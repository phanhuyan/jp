var MZ=Object.defineProperty;var RZ=(e,t,n)=>t in e?MZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(RZ(e,typeof t!="symbol"?t+"":t,n),n);function kZ(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function El(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var CN={exports:{}},A5={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LZ=Symbol.for("react.transitional.element"),DZ=Symbol.for("react.fragment");function AN(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:LZ,type:e,key:i,ref:t!==void 0?t:null,props:n}}A5.Fragment=DZ;A5.jsx=AN;A5.jsxs=AN;CN.exports=A5;var vw=CN.exports;const fe=vw.Fragment,g=vw.jsx,N=vw.jsxs;var MN={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww=Symbol.for("react.transitional.element"),NZ=Symbol.for("react.portal"),OZ=Symbol.for("react.fragment"),PZ=Symbol.for("react.strict_mode"),FZ=Symbol.for("react.profiler"),BZ=Symbol.for("react.consumer"),zZ=Symbol.for("react.context"),HZ=Symbol.for("react.forward_ref"),VZ=Symbol.for("react.suspense"),$Z=Symbol.for("react.memo"),RN=Symbol.for("react.lazy"),ax=Symbol.iterator;function GZ(e){return e===null||typeof e!="object"?null:(e=ax&&e[ax]||e["@@iterator"],typeof e=="function"?e:null)}var kN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LN=Object.assign,DN={};function cg(e,t,n){this.props=e,this.context=t,this.refs=DN,this.updater=n||kN}cg.prototype.isReactComponent={};cg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function NN(){}NN.prototype=cg.prototype;function _w(e,t,n){this.props=e,this.context=t,this.refs=DN,this.updater=n||kN}var Tw=_w.prototype=new NN;Tw.constructor=_w;LN(Tw,cg.prototype);Tw.isPureReactComponent=!0;var lx=Array.isArray,Un={H:null,A:null,T:null,S:null},ON=Object.prototype.hasOwnProperty;function Iw(e,t,n,i,r,s){return n=s.ref,{$$typeof:ww,type:e,key:t,ref:n!==void 0?n:null,props:s}}function XZ(e,t){return Iw(e.type,t,void 0,void 0,void 0,e.props)}function Sw(e){return typeof e=="object"&&e!==null&&e.$$typeof===ww}function jZ(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cx=/\/+/g;function HE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jZ(""+e.key):t.toString(36)}function ux(){}function YZ(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ux,ux):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function mf(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ww:case NZ:o=!0;break;case RN:return o=e._init,mf(o(e._payload),t,n,i,r)}}if(o)return r=r(e),o=i===""?"."+HE(e,0):i,lx(r)?(n="",o!=null&&(n=o.replace(cx,"$&/")+"/"),mf(r,t,n,"",function(c){return c})):r!=null&&(Sw(r)&&(r=XZ(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(cx,"$&/")+"/")+o)),t.push(r)),1;o=0;var a=i===""?".":i+":";if(lx(e))for(var l=0;l<e.length;l++)i=e[l],s=a+HE(i,l),o+=mf(i,t,n,s,r);else if(l=GZ(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,s=a+HE(i,l++),o+=mf(i,t,n,s,r);else if(s==="object"){if(typeof e.then=="function")return mf(YZ(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return o}function dU(e,t,n){if(e==null)return e;var i=[],r=0;return mf(e,i,"","",function(s){return t.call(n,s,r++)}),i}function WZ(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dx=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function KZ(){}Ke.Children={map:dU,forEach:function(e,t,n){dU(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return dU(e,function(){t++}),t},toArray:function(e){return dU(e,function(t){return t})||[]},only:function(e){if(!Sw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=cg;Ke.Fragment=OZ;Ke.Profiler=FZ;Ke.PureComponent=_w;Ke.StrictMode=PZ;Ke.Suspense=VZ;Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Un;Ke.act=function(){throw Error("act(...) is not supported in production builds of React.")};Ke.cache=function(e){return function(){return e.apply(null,arguments)}};Ke.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=LN({},e.props),r=e.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&&(s=void 0),t.key!==void 0&&(r=""+t.key),t)!ON.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}return Iw(e.type,r,void 0,void 0,s,i)};Ke.createContext=function(e){return e={$$typeof:zZ,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:BZ,_context:e},e};Ke.createElement=function(e,t,n){var i,r={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)ON.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return Iw(e,s,void 0,void 0,null,r)};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:HZ,render:e}};Ke.isValidElement=Sw;Ke.lazy=function(e){return{$$typeof:RN,_payload:{_status:-1,_result:e},_init:WZ}};Ke.memo=function(e,t){return{$$typeof:$Z,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=Un.T,n={};Un.T=n;try{var i=e(),r=Un.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(KZ,dx)}catch(s){dx(s)}finally{Un.T=t}};Ke.unstable_useCacheRefresh=function(){return Un.H.useCacheRefresh()};Ke.use=function(e){return Un.H.use(e)};Ke.useActionState=function(e,t,n){return Un.H.useActionState(e,t,n)};Ke.useCallback=function(e,t){return Un.H.useCallback(e,t)};Ke.useContext=function(e){return Un.H.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e,t){return Un.H.useDeferredValue(e,t)};Ke.useEffect=function(e,t){return Un.H.useEffect(e,t)};Ke.useId=function(){return Un.H.useId()};Ke.useImperativeHandle=function(e,t,n){return Un.H.useImperativeHandle(e,t,n)};Ke.useInsertionEffect=function(e,t){return Un.H.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return Un.H.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return Un.H.useMemo(e,t)};Ke.useOptimistic=function(e,t){return Un.H.useOptimistic(e,t)};Ke.useReducer=function(e,t,n){return Un.H.useReducer(e,t,n)};Ke.useRef=function(e){return Un.H.useRef(e)};Ke.useState=function(e){return Un.H.useState(e)};Ke.useSyncExternalStore=function(e,t,n){return Un.H.useSyncExternalStore(e,t,n)};Ke.useTransition=function(){return Un.H.useTransition()};Ke.version="19.0.0";MN.exports=Ke;var L=MN.exports;const ue=El(L),ZZ=kZ({__proto__:null,default:ue},[L]);var PN={exports:{}},M5={},FN={exports:{}},BN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,H){var $=B.length;B.push(H);e:for(;0<$;){var X=$-1>>>1,W=B[X];if(0<r(W,H))B[X]=H,B[$]=W,$=X;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var H=B[0],$=B.pop();if($!==H){B[0]=$;e:for(var X=0,W=B.length,Q=W>>>1;X<Q;){var oe=2*(X+1)-1,ne=B[oe],ie=oe+1,me=B[ie];if(0>r(ne,$))ie<W&&0>r(me,ne)?(B[X]=me,B[ie]=$,X=ie):(B[X]=ne,B[oe]=$,X=oe);else if(ie<W&&0>r(me,$))B[X]=me,B[ie]=$,X=ie;else break e}}return H}function r(B,H){var $=B.sortIndex-H.sortIndex;return $!==0?$:B.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,m=!1,p=!1,U=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(B){for(var H=n(c);H!==null;){if(H.callback===null)i(c);else if(H.startTime<=B)i(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function v(B){if(p=!1,w(B),!m)if(n(l)!==null)m=!0,j();else{var H=n(c);H!==null&&G(v,H.startTime-B)}}var I=!1,x=-1,_=5,T=-1;function A(){return!(e.unstable_now()-T<_)}function C(){if(I){var B=e.unstable_now();T=B;var H=!0;try{e:{m=!1,p&&(p=!1,b(x),x=-1),h=!0;var $=f;try{t:{for(w(B),d=n(l);d!==null&&!(d.expirationTime>B&&A());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var W=X(d.expirationTime<=B);if(B=e.unstable_now(),typeof W=="function"){d.callback=W,w(B),H=!0;break t}d===n(l)&&i(l),w(B)}else i(l);d=n(l)}if(d!==null)H=!0;else{var Q=n(c);Q!==null&&G(v,Q.startTime-B),H=!1}}break e}finally{d=null,f=$,h=!1}H=void 0}}finally{H?k():I=!1}}}var k;if(typeof y=="function")k=function(){y(C)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,D=P.port2;P.port1.onmessage=C,k=function(){D.postMessage(null)}}else k=function(){U(C,0)};function j(){I||(I=!0,k())}function G(B,H){x=U(function(){B(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,j())},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(B){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var $=f;f=H;try{return B()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var $=f;f=B;try{return H()}finally{f=$}},e.unstable_scheduleCallback=function(B,H,$){var X=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?X+$:X):$=X,B){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,B={id:u++,callback:H,priorityLevel:B,startTime:$,expirationTime:W,sortIndex:-1},$>X?(B.sortIndex=$,t(c,B),n(l)===null&&B===n(c)&&(p?(b(x),x=-1):p=!0,G(v,$-X))):(B.sortIndex=W,t(l,B),m||h||(m=!0,j())),B},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(B){var H=f;return function(){var $=f;f=H;try{return B.apply(this,arguments)}finally{f=$}}}})(BN);FN.exports=BN;var qZ=FN.exports,zN={exports:{}},br={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QZ=L;function HN(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Rl(){}var ur={d:{f:Rl,r:function(){throw Error(HN(522))},D:Rl,C:Rl,L:Rl,m:Rl,X:Rl,S:Rl,M:Rl},p:0,findDOMNode:null},JZ=Symbol.for("react.portal");function eq(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:JZ,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Jm=QZ.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function R5(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ur;br.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(HN(299));return eq(e,t,null,n)};br.flushSync=function(e){var t=Jm.T,n=ur.p;try{if(Jm.T=null,ur.p=2,e)return e()}finally{Jm.T=t,ur.p=n,ur.d.f()}};br.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,ur.d.C(e,t))};br.prefetchDNS=function(e){typeof e=="string"&&ur.d.D(e)};br.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=R5(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?ur.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&ur.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};br.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=R5(t.as,t.crossOrigin);ur.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&ur.d.M(e)};br.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=R5(n,t.crossOrigin);ur.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};br.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=R5(t.as,t.crossOrigin);ur.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else ur.d.m(e)};br.requestFormReset=function(e){ur.d.r(e)};br.unstable_batchedUpdates=function(e,t){return e(t)};br.useFormState=function(e,t,n){return Jm.H.useFormState(e,t,n)};br.useFormStatus=function(){return Jm.H.useHostTransitionStatus()};br.version="19.0.0";function VN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VN)}catch(e){console.error(e)}}VN(),zN.exports=br;var mi=zN.exports;const tq=El(mi);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=qZ,$N=L,nq=mi;function re(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function GN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}var iq=Symbol.for("react.element"),fU=Symbol.for("react.transitional.element"),Cm=Symbol.for("react.portal"),Cf=Symbol.for("react.fragment"),XN=Symbol.for("react.strict_mode"),f7=Symbol.for("react.profiler"),rq=Symbol.for("react.provider"),jN=Symbol.for("react.consumer"),Oa=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),h7=Symbol.for("react.suspense"),g7=Symbol.for("react.suspense_list"),Cw=Symbol.for("react.memo"),Gl=Symbol.for("react.lazy"),YN=Symbol.for("react.offscreen"),sq=Symbol.for("react.memo_cache_sentinel"),fx=Symbol.iterator;function qg(e){return e===null||typeof e!="object"?null:(e=fx&&e[fx]||e["@@iterator"],typeof e=="function"?e:null)}var oq=Symbol.for("react.client.reference");function m7(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===oq?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cf:return"Fragment";case Cm:return"Portal";case f7:return"Profiler";case XN:return"StrictMode";case h7:return"Suspense";case g7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Oa:return(e.displayName||"Context")+".Provider";case jN:return(e._context.displayName||"Context")+".Consumer";case xw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Cw:return t=e.displayName||null,t!==null?t:m7(e.type)||"Memo";case Gl:t=e._payload,e=e._init;try{return m7(e(t))}catch{}}return null}var We=$N.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sn=Object.assign,VE,hx;function Am(e){if(VE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);VE=t&&t[1]||"",hx=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+VE+e+hx}var $E=!1;function GE(e,t){if(!e||$E)return"";$E=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var f=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){f=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){f=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&f&&typeof h.stack=="string")return[h.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split(`
`),c=a.split(`
`);for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(i!==1||r!==1)do if(i--,r--,0>r||l[i]!==c[r]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=r);break}}}finally{$E=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Am(n):""}function aq(e){switch(e.tag){case 26:case 27:case 5:return Am(e.type);case 16:return Am("Lazy");case 13:return Am("Suspense");case 19:return Am("SuspenseList");case 0:case 15:return e=GE(e.type,!1),e;case 11:return e=GE(e.type.render,!1),e;case 1:return e=GE(e.type,!0),e;default:return""}}function gx(e){try{var t="";do t+=aq(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ug(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function WN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function mx(e){if(ug(e)!==e)throw Error(re(188))}function lq(e){var t=e.alternate;if(!t){if(t=ug(e),t===null)throw Error(re(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return mx(r),e;if(s===i)return mx(r),t;s=s.sibling}throw Error(re(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(re(189))}}if(n.alternate!==i)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?e:t}function KN(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=KN(e),t!==null)return t;e=e.sibling}return null}var Mm=Array.isArray,rn=nq.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$u={pending:!1,data:null,method:null,action:null},p7=[],Af=-1;function oa(e){return{current:e}}function vi(e){0>Af||(e.current=p7[Af],p7[Af]=null,Af--)}function un(e,t){Af++,p7[Af]=e.current,e.current=t}var zo=oa(null),G1=oa(null),fc=oa(null),hb=oa(null);function gb(e,t){switch(un(fc,t),un(G1,e),un(zo,null),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?pC(t):0;break;default:if(e=e===8?t.parentNode:t,t=e.tagName,e=e.namespaceURI)e=pC(e),t=aF(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}vi(zo),un(zo,t)}function wh(){vi(zo),vi(G1),vi(fc)}function U7(e){e.memoizedState!==null&&un(hb,e);var t=zo.current,n=aF(t,e.type);t!==n&&(un(G1,e),un(zo,n))}function mb(e){G1.current===e&&(vi(zo),vi(G1)),hb.current===e&&(vi(hb),t0._currentValue=$u)}var b7=Object.prototype.hasOwnProperty,Aw=ri.unstable_scheduleCallback,XE=ri.unstable_cancelCallback,cq=ri.unstable_shouldYield,uq=ri.unstable_requestPaint,Ho=ri.unstable_now,dq=ri.unstable_getCurrentPriorityLevel,ZN=ri.unstable_ImmediatePriority,qN=ri.unstable_UserBlockingPriority,pb=ri.unstable_NormalPriority,fq=ri.unstable_LowPriority,QN=ri.unstable_IdlePriority,hq=ri.log,gq=ri.unstable_setDisableYieldValue,J0=null,Qr=null;function mq(e){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(J0,e,void 0,(e.current.flags&128)===128)}catch{}}function rc(e){if(typeof hq=="function"&&gq(e),Qr&&typeof Qr.setStrictMode=="function")try{Qr.setStrictMode(J0,e)}catch{}}var Jr=Math.clz32?Math.clz32:bq,pq=Math.log,Uq=Math.LN2;function bq(e){return e>>>=0,e===0?32:31-(pq(e)/Uq|0)|0}var hU=128,gU=4194304;function Eu(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function k5(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var a=n&134217727;return a!==0?(n=a&~r,n!==0?i=Eu(n):(s&=a,s!==0?i=Eu(s):e||(o=a&~o,o!==0&&(i=Eu(o))))):(a=n&~r,a!==0?i=Eu(a):s!==0?i=Eu(s):e||(o=n&~o,o!==0&&(i=Eu(o)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===32&&(o&4194176)!==0)?t:i}function ep(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function yq(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JN(){var e=hU;return hU<<=1,!(hU&4194176)&&(hU=128),e}function eO(){var e=gU;return gU<<=1,!(gU&62914560)&&(gU=4194304),e}function jE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tp(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Eq(e,t,n,i,r,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Jr(n),d=1<<u;a[u]=0,l[u]=-1;var f=c[u];if(f!==null)for(c[u]=null,u=0;u<f.length;u++){var h=f[u];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&tO(e,i,0),s!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=s&~(o&~t))}function tO(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Jr(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194218}function nO(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Jr(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function iO(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function rO(){var e=rn.p;return e!==0?e:(e=window.event,e===void 0?32:UF(e.type))}function vq(e,t){var n=rn.p;try{return rn.p=e,t()}finally{rn.p=n}}var eu=Math.random().toString(36).slice(2),Yi="__reactFiber$"+eu,Mr="__reactProps$"+eu,dg="__reactContainer$"+eu,y7="__reactEvents$"+eu,wq="__reactListeners$"+eu,_q="__reactHandles$"+eu,px="__reactResources$"+eu,X1="__reactMarker$"+eu;function Mw(e){delete e[Yi],delete e[Mr],delete e[y7],delete e[wq],delete e[_q]}function ku(e){var t=e[Yi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dg]||n[Yi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bC(e);e!==null;){if(n=e[Yi])return n;e=bC(e)}return t}e=n,n=e.parentNode}return null}function fg(e){if(e=e[Yi]||e[dg]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Rm(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(re(33))}function qf(e){var t=e[px];return t||(t=e[px]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function pi(e){e[X1]=!0}var sO=new Set,oO={};function Rd(e,t){_h(e,t),_h(e+"Capture",t)}function _h(e,t){for(oO[e]=t,e=0;e<t.length;e++)sO.add(t[e])}var tl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tq=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ux={},bx={};function Iq(e){return b7.call(bx,e)?!0:b7.call(Ux,e)?!1:Tq.test(e)?bx[e]=!0:(Ux[e]=!0,!1)}function b2(e,t,n){if(Iq(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function mU(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ha(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function ps(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sq(e){var t=aO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ub(e){e._valueTracker||(e._valueTracker=Sq(e))}function lO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=aO(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function bb(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xq=/[\n"\\]/g;function ys(e){return e.replace(xq,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function E7(e,t,n,i,r,s,o,a){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ps(t)):e.value!==""+ps(t)&&(e.value=""+ps(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?v7(e,o,ps(t)):n!=null?v7(e,o,ps(n)):i!=null&&e.removeAttribute("value"),r==null&&s!=null&&(e.defaultChecked=!!s),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?e.name=""+ps(a):e.removeAttribute("name")}function cO(e,t,n,i,r,s,o,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null))return;n=n!=null?""+ps(n):"",t=t!=null?""+ps(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function v7(e,t,n){t==="number"&&bb(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Qf(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ps(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function uO(e,t,n){if(t!=null&&(t=""+ps(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ps(n):""}function dO(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(re(92));if(Mm(i)){if(1<i.length)throw Error(re(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ps(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function Th(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Cq=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yx(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Cq.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function fO(e,t,n){if(t!=null&&typeof t!="object")throw Error(re(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&yx(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&yx(e,s,t[s])}function Rw(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aq=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mq=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function y2(e){return Mq.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var w7=null;function kw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mf=null,Jf=null;function Ex(e){var t=fg(e);if(t&&(e=t.stateNode)){var n=e[Mr]||null;e:switch(e=t.stateNode,t.type){case"input":if(E7(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ys(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Mr]||null;if(!r)throw Error(re(90));E7(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&lO(i)}break e;case"textarea":uO(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Qf(e,!!n.multiple,t,!1)}}}var YE=!1;function hO(e,t,n){if(YE)return e(t,n);YE=!0;try{var i=e(t);return i}finally{if(YE=!1,(Mf!==null||Jf!==null)&&(V5(),Mf&&(t=Mf,e=Jf,Jf=Mf=null,Ex(t),e)))for(t=0;t<e.length;t++)Ex(e[t])}}function j1(e,t){var n=e.stateNode;if(n===null)return null;var i=n[Mr]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(re(231,t,typeof n));return n}var _7=!1;if(tl)try{var Qg={};Object.defineProperty(Qg,"passive",{get:function(){_7=!0}}),window.addEventListener("test",Qg,Qg),window.removeEventListener("test",Qg,Qg)}catch{_7=!1}var sc=null,Lw=null,E2=null;function gO(){if(E2)return E2;var e,t=Lw,n=t.length,i,r="value"in sc?sc.value:sc.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return E2=r.slice(e,1<i?1-i:void 0)}function v2(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pU(){return!0}function vx(){return!1}function kr(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pU:vx,this.isPropagationStopped=vx,this}return sn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pU)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pU)},persist:function(){},isPersistent:pU}),t}var kd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L5=kr(kd),np=sn({},kd,{view:0,detail:0}),Rq=kr(np),WE,KE,Jg,D5=sn({},np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jg&&(Jg&&e.type==="mousemove"?(WE=e.screenX-Jg.screenX,KE=e.screenY-Jg.screenY):KE=WE=0,Jg=e),WE)},movementY:function(e){return"movementY"in e?e.movementY:KE}}),wx=kr(D5),kq=sn({},D5,{dataTransfer:0}),Lq=kr(kq),Dq=sn({},np,{relatedTarget:0}),ZE=kr(Dq),Nq=sn({},kd,{animationName:0,elapsedTime:0,pseudoElement:0}),Oq=kr(Nq),Pq=sn({},kd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fq=kr(Pq),Bq=sn({},kd,{data:0}),_x=kr(Bq),zq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $q(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vq[e])?!!t[e]:!1}function Dw(){return $q}var Gq=sn({},np,{key:function(e){if(e.key){var t=zq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=v2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dw,charCode:function(e){return e.type==="keypress"?v2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?v2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xq=kr(Gq),jq=sn({},D5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tx=kr(jq),Yq=sn({},np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dw}),Wq=kr(Yq),Kq=sn({},kd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zq=kr(Kq),qq=sn({},D5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Qq=kr(qq),Jq=sn({},kd,{newState:0,oldState:0}),eQ=kr(Jq),tQ=[9,13,27,32],Nw=tl&&"CompositionEvent"in window,e1=null;tl&&"documentMode"in document&&(e1=document.documentMode);var nQ=tl&&"TextEvent"in window&&!e1,mO=tl&&(!Nw||e1&&8<e1&&11>=e1),Ix=" ",Sx=!1;function pO(e,t){switch(e){case"keyup":return tQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rf=!1;function iQ(e,t){switch(e){case"compositionend":return UO(t);case"keypress":return t.which!==32?null:(Sx=!0,Ix);case"textInput":return e=t.data,e===Ix&&Sx?null:e;default:return null}}function rQ(e,t){if(Rf)return e==="compositionend"||!Nw&&pO(e,t)?(e=gO(),E2=Lw=sc=null,Rf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mO&&t.locale!=="ko"?null:t.data;default:return null}}var sQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sQ[e.type]:t==="textarea"}function bO(e,t,n,i){Mf?Jf?Jf.push(i):Jf=[i]:Mf=i,t=Db(t,"onChange"),0<t.length&&(n=new L5("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var t1=null,Y1=null;function oQ(e){rF(e,0)}function N5(e){var t=Rm(e);if(lO(t))return e}function Cx(e,t){if(e==="change")return t}var yO=!1;if(tl){var qE;if(tl){var QE="oninput"in document;if(!QE){var Ax=document.createElement("div");Ax.setAttribute("oninput","return;"),QE=typeof Ax.oninput=="function"}qE=QE}else qE=!1;yO=qE&&(!document.documentMode||9<document.documentMode)}function Mx(){t1&&(t1.detachEvent("onpropertychange",EO),Y1=t1=null)}function EO(e){if(e.propertyName==="value"&&N5(Y1)){var t=[];bO(t,Y1,e,kw(e)),hO(oQ,t)}}function aQ(e,t,n){e==="focusin"?(Mx(),t1=t,Y1=n,t1.attachEvent("onpropertychange",EO)):e==="focusout"&&Mx()}function lQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return N5(Y1)}function cQ(e,t){if(e==="click")return N5(t)}function uQ(e,t){if(e==="input"||e==="change")return N5(t)}function dQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ss=typeof Object.is=="function"?Object.is:dQ;function W1(e,t){if(ss(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!b7.call(t,r)||!ss(e[r],t[r]))return!1}return!0}function Rx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kx(e,t){var n=Rx(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rx(n)}}function vO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wO(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bb(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bb(e.document)}return t}function Ow(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fQ(e,t){var n=wO(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&vO(t.ownerDocument.documentElement,t)){if(i!==null&&Ow(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=kx(t,s);var o=kx(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hQ=tl&&"documentMode"in document&&11>=document.documentMode,kf=null,T7=null,n1=null,I7=!1;function Lx(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I7||kf==null||kf!==bb(i)||(i=kf,"selectionStart"in i&&Ow(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),n1&&W1(n1,i)||(n1=i,i=Db(T7,"onSelect"),0<i.length&&(t=new L5("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=kf)))}function mu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lf={animationend:mu("Animation","AnimationEnd"),animationiteration:mu("Animation","AnimationIteration"),animationstart:mu("Animation","AnimationStart"),transitionrun:mu("Transition","TransitionRun"),transitionstart:mu("Transition","TransitionStart"),transitioncancel:mu("Transition","TransitionCancel"),transitionend:mu("Transition","TransitionEnd")},JE={},_O={};tl&&(_O=document.createElement("div").style,"AnimationEvent"in window||(delete Lf.animationend.animation,delete Lf.animationiteration.animation,delete Lf.animationstart.animation),"TransitionEvent"in window||delete Lf.transitionend.transition);function Ld(e){if(JE[e])return JE[e];if(!Lf[e])return e;var t=Lf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _O)return JE[e]=t[n];return e}var TO=Ld("animationend"),IO=Ld("animationiteration"),SO=Ld("animationstart"),gQ=Ld("transitionrun"),mQ=Ld("transitionstart"),pQ=Ld("transitioncancel"),xO=Ld("transitionend"),CO=new Map,Dx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function mo(e,t){CO.set(e,t),Rd(t,[e])}var gs=[],Df=0,Pw=0;function O5(){for(var e=Df,t=Pw=Df=0;t<e;){var n=gs[t];gs[t++]=null;var i=gs[t];gs[t++]=null;var r=gs[t];gs[t++]=null;var s=gs[t];if(gs[t++]=null,i!==null&&r!==null){var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}s!==0&&AO(n,r,s)}}function P5(e,t,n,i){gs[Df++]=e,gs[Df++]=t,gs[Df++]=n,gs[Df++]=i,Pw|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Fw(e,t,n,i){return P5(e,t,n,i),yb(e)}function kc(e,t){return P5(e,null,null,t),yb(e)}function AO(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(r=!0)),e=s,s=s.return;r&&t!==null&&e.tag===3&&(s=e.stateNode,r=31-Jr(n),s=s.hiddenUpdates,e=s[r],e===null?s[r]=[t]:e.push(t),t.lane=n|536870912)}function yb(e){if(50<g1)throw g1=0,Y7=null,Error(re(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Nf={},Nx=new WeakMap;function Es(e,t){if(typeof e=="object"&&e!==null){var n=Nx.get(e);return n!==void 0?n:(t={value:e,source:t,stack:gx(t)},Nx.set(e,t),t)}return{value:e,source:t,stack:gx(t)}}var Of=[],Pf=0,Eb=null,vb=0,Us=[],bs=0,Gu=null,Pa=1,Fa="";function vu(e,t){Of[Pf++]=vb,Of[Pf++]=Eb,Eb=e,vb=t}function MO(e,t,n){Us[bs++]=Pa,Us[bs++]=Fa,Us[bs++]=Gu,Gu=e;var i=Pa;e=Fa;var r=32-Jr(i)-1;i&=~(1<<r),n+=1;var s=32-Jr(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Pa=1<<32-Jr(t)+r|n<<r|i,Fa=s+e}else Pa=1<<s|n<<r|i,Fa=e}function Bw(e){e.return!==null&&(vu(e,1),MO(e,1,0))}function zw(e){for(;e===Eb;)Eb=Of[--Pf],Of[Pf]=null,vb=Of[--Pf],Of[Pf]=null;for(;e===Gu;)Gu=Us[--bs],Us[bs]=null,Fa=Us[--bs],Us[bs]=null,Pa=Us[--bs],Us[bs]=null}var lr=null,Mi=null,St=!1,Zs=null,Ro=!1,S7=Error(re(519));function id(e){var t=Error(re(418,""));throw K1(Es(t,e)),S7}function Ox(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Yi]=e,t[Mr]=i,n){case"dialog":at("cancel",t),at("close",t);break;case"iframe":case"object":case"embed":at("load",t);break;case"video":case"audio":for(n=0;n<Q1.length;n++)at(Q1[n],t);break;case"source":at("error",t);break;case"img":case"image":case"link":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"input":at("invalid",t),cO(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ub(t);break;case"select":at("invalid",t);break;case"textarea":at("invalid",t),dO(t,i.value,i.defaultValue,i.children),Ub(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||oF(t.textContent,n)?(i.popover!=null&&(at("beforetoggle",t),at("toggle",t)),i.onScroll!=null&&at("scroll",t),i.onScrollEnd!=null&&at("scrollend",t),i.onClick!=null&&(t.onclick=G5),t=!0):t=!1,t||id(e)}function Px(e){for(lr=e.return;lr;)switch(lr.tag){case 3:case 27:Ro=!0;return;case 5:case 13:Ro=!1;return;default:lr=lr.return}}function em(e){if(e!==lr)return!1;if(!St)return Px(e),St=!0,!1;var t=!1,n;if((n=e.tag!==3&&e.tag!==27)&&((n=e.tag===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||e4(e.type,e.memoizedProps)),n=!n),n&&(t=!0),t&&Mi&&id(e),Px(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Mi=no(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Mi=null}}else Mi=lr?no(e.stateNode.nextSibling):null;return!0}function ip(){Mi=lr=null,St=!1}function K1(e){Zs===null?Zs=[e]:Zs.push(e)}var i1=Error(re(460)),RO=Error(re(474)),x7={then:function(){}};function Fx(e){return e=e.status,e==="fulfilled"||e==="rejected"}function UU(){}function kO(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(UU,UU),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===i1?Error(re(483)):e;default:if(typeof t.status=="string")t.then(UU,UU);else{if(e=Qt,e!==null&&100<e.shellSuspendCounter)throw Error(re(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,e===i1?Error(re(483)):e}throw r1=t,i1}}var r1=null;function Bx(){if(r1===null)throw Error(re(459));var e=r1;return r1=null,e}var eh=null,Z1=0;function bU(e){var t=Z1;return Z1+=1,eh===null&&(eh=[]),kO(eh,e,t)}function tm(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yU(e,t){throw t.$$typeof===iq?Error(re(525)):(e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function zx(e){var t=e._init;return t(e._payload)}function LO(e){function t(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function i(b){for(var y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function r(b,y){return b=mc(b,y),b.index=0,b.sibling=null,b}function s(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=33554434,y):w):(b.flags|=33554434,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=33554434),b}function a(b,y,w,v){return y===null||y.tag!==6?(y=d8(w,b.mode,v),y.return=b,y):(y=r(y,w),y.return=b,y)}function l(b,y,w,v){var I=w.type;return I===Cf?u(b,y,w.props.children,v,w.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Gl&&zx(I)===y.type)?(y=r(y,w.props),tm(y,w),y.return=b,y):(y=S2(w.type,w.key,w.props,null,b.mode,v),tm(y,w),y.return=b,y)}function c(b,y,w,v){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=f8(w,b.mode,v),y.return=b,y):(y=r(y,w.children||[]),y.return=b,y)}function u(b,y,w,v,I){return y===null||y.tag!==7?(y=ju(w,b.mode,v,I),y.return=b,y):(y=r(y,w),y.return=b,y)}function d(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return y=d8(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fU:return w=S2(y.type,y.key,y.props,null,b.mode,w),tm(w,y),w.return=b,w;case Cm:return y=f8(y,b.mode,w),y.return=b,y;case Gl:var v=y._init;return y=v(y._payload),d(b,y,w)}if(Mm(y)||qg(y))return y=ju(y,b.mode,w,null),y.return=b,y;if(typeof y.then=="function")return d(b,bU(y),w);if(y.$$typeof===Oa)return d(b,EU(b,y),w);yU(b,y)}return null}function f(b,y,w,v){var I=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return I!==null?null:a(b,y,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fU:return w.key===I?l(b,y,w,v):null;case Cm:return w.key===I?c(b,y,w,v):null;case Gl:return I=w._init,w=I(w._payload),f(b,y,w,v)}if(Mm(w)||qg(w))return I!==null?null:u(b,y,w,v,null);if(typeof w.then=="function")return f(b,y,bU(w),v);if(w.$$typeof===Oa)return f(b,y,EU(b,w),v);yU(b,w)}return null}function h(b,y,w,v,I){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return b=b.get(w)||null,a(y,b,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fU:return b=b.get(v.key===null?w:v.key)||null,l(y,b,v,I);case Cm:return b=b.get(v.key===null?w:v.key)||null,c(y,b,v,I);case Gl:var x=v._init;return v=x(v._payload),h(b,y,w,v,I)}if(Mm(v)||qg(v))return b=b.get(w)||null,u(y,b,v,I,null);if(typeof v.then=="function")return h(b,y,w,bU(v),I);if(v.$$typeof===Oa)return h(b,y,w,EU(y,v),I);yU(y,v)}return null}function m(b,y,w,v){for(var I=null,x=null,_=y,T=y=0,A=null;_!==null&&T<w.length;T++){_.index>T?(A=_,_=null):A=_.sibling;var C=f(b,_,w[T],v);if(C===null){_===null&&(_=A);break}e&&_&&C.alternate===null&&t(b,_),y=s(C,y,T),x===null?I=C:x.sibling=C,x=C,_=A}if(T===w.length)return n(b,_),St&&vu(b,T),I;if(_===null){for(;T<w.length;T++)_=d(b,w[T],v),_!==null&&(y=s(_,y,T),x===null?I=_:x.sibling=_,x=_);return St&&vu(b,T),I}for(_=i(_);T<w.length;T++)A=h(_,b,T,w[T],v),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?T:A.key),y=s(A,y,T),x===null?I=A:x.sibling=A,x=A);return e&&_.forEach(function(k){return t(b,k)}),St&&vu(b,T),I}function p(b,y,w,v){if(w==null)throw Error(re(151));for(var I=null,x=null,_=y,T=y=0,A=null,C=w.next();_!==null&&!C.done;T++,C=w.next()){_.index>T?(A=_,_=null):A=_.sibling;var k=f(b,_,C.value,v);if(k===null){_===null&&(_=A);break}e&&_&&k.alternate===null&&t(b,_),y=s(k,y,T),x===null?I=k:x.sibling=k,x=k,_=A}if(C.done)return n(b,_),St&&vu(b,T),I;if(_===null){for(;!C.done;T++,C=w.next())C=d(b,C.value,v),C!==null&&(y=s(C,y,T),x===null?I=C:x.sibling=C,x=C);return St&&vu(b,T),I}for(_=i(_);!C.done;T++,C=w.next())C=h(_,b,T,C.value,v),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?T:C.key),y=s(C,y,T),x===null?I=C:x.sibling=C,x=C);return e&&_.forEach(function(P){return t(b,P)}),St&&vu(b,T),I}function U(b,y,w,v){if(typeof w=="object"&&w!==null&&w.type===Cf&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case fU:e:{for(var I=w.key;y!==null;){if(y.key===I){if(I=w.type,I===Cf){if(y.tag===7){n(b,y.sibling),v=r(y,w.props.children),v.return=b,b=v;break e}}else if(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Gl&&zx(I)===y.type){n(b,y.sibling),v=r(y,w.props),tm(v,w),v.return=b,b=v;break e}n(b,y);break}else t(b,y);y=y.sibling}w.type===Cf?(v=ju(w.props.children,b.mode,v,w.key),v.return=b,b=v):(v=S2(w.type,w.key,w.props,null,b.mode,v),tm(v,w),v.return=b,b=v)}return o(b);case Cm:e:{for(I=w.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),v=r(y,w.children||[]),v.return=b,b=v;break e}else{n(b,y);break}else t(b,y);y=y.sibling}v=f8(w,b.mode,v),v.return=b,b=v}return o(b);case Gl:return I=w._init,w=I(w._payload),U(b,y,w,v)}if(Mm(w))return m(b,y,w,v);if(qg(w)){if(I=qg(w),typeof I!="function")throw Error(re(150));return w=I.call(w),p(b,y,w,v)}if(typeof w.then=="function")return U(b,y,bU(w),v);if(w.$$typeof===Oa)return U(b,y,EU(b,w),v);yU(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),v=r(y,w),v.return=b,b=v):(n(b,y),v=d8(w,b.mode,v),v.return=b,b=v),o(b)):n(b,y)}return function(b,y,w,v){try{Z1=0;var I=U(b,y,w,v);return eh=null,I}catch(_){if(_===i1)throw _;var x=Ts(29,_,null,b.mode);return x.lanes=v,x.return=b,x}finally{}}}var rd=LO(!0),DO=LO(!1),Ih=oa(null),wb=oa(0);function Hx(e,t){e=rl,un(wb,e),un(Ih,t),rl=e|t.baseLanes}function C7(){un(wb,rl),un(Ih,Ih.current)}function Hw(){rl=wb.current,vi(Ih),vi(wb)}var Ds=oa(null),Vo=null;function ql(e){var t=e.alternate;un(ei,ei.current&1),un(Ds,e),Vo===null&&(t===null||Ih.current!==null||t.memoizedState!==null)&&(Vo=e)}function NO(e){if(e.tag===22){if(un(ei,ei.current),un(Ds,e),Vo===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vo=e)}}else Ql()}function Ql(){un(ei,ei.current),un(Ds,Ds.current)}function Ba(e){vi(Ds),Vo===e&&(Vo=null),vi(ei)}var ei=oa(0);function _b(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var UQ=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},bQ=ri.unstable_scheduleCallback,yQ=ri.unstable_NormalPriority,Jn={$$typeof:Oa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vw(){return{controller:new UQ,data:new Map,refCount:0}}function rp(e){e.refCount--,e.refCount===0&&bQ(yQ,function(){e.controller.abort()})}var s1=null,A7=0,Sh=0,th=null;function EQ(e,t){if(s1===null){var n=s1=[];A7=0,Sh=d9(),th={status:"pending",value:void 0,then:function(i){n.push(i)}}}return A7++,t.then(Vx,Vx),t}function Vx(){if(--A7===0&&s1!==null){th!==null&&(th.status="fulfilled");var e=s1;s1=null,Sh=0,th=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function vQ(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var $x=We.S;We.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&EQ(e,t),$x!==null&&$x(e,t)};var Xu=oa(null);function $w(){var e=Xu.current;return e!==null?e:Qt.pooledCache}function w2(e,t){t===null?un(Xu,Xu.current):un(Xu,t.pool)}function OO(){var e=$w();return e===null?null:{parent:Jn._currentValue,pool:e}}var Lc=0,qe=null,zt=null,zn=null,Tb=!1,nh=!1,sd=!1,Ib=0,q1=0,ih=null,wQ=0;function Cn(){throw Error(re(321))}function Gw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ss(e[n],t[n]))return!1;return!0}function Xw(e,t,n,i,r,s){return Lc=s,qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,We.H=e===null||e.memoizedState===null?Dd:tu,sd=!1,s=n(i,r),sd=!1,nh&&(s=FO(t,n,i,r)),PO(e),s}function PO(e){We.H=Yo;var t=zt!==null&&zt.next!==null;if(Lc=0,zn=zt=qe=null,Tb=!1,q1=0,ih=null,t)throw Error(re(300));e===null||bi||(e=e.dependencies,e!==null&&Cb(e)&&(bi=!0))}function FO(e,t,n,i){qe=e;var r=0;do{if(nh&&(ih=null),q1=0,nh=!1,25<=r)throw Error(re(301));if(r+=1,zn=zt=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}We.H=Nd,s=t(n,i)}while(nh);return s}function _Q(){var e=We.H,t=e.useState()[0];return t=typeof t.then=="function"?sp(t):t,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(qe.flags|=1024),t}function jw(){var e=Ib!==0;return Ib=0,e}function Yw(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ww(e){if(Tb){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Tb=!1}Lc=0,zn=zt=qe=null,nh=!1,q1=Ib=0,ih=null}function vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?qe.memoizedState=zn=e:zn=zn.next=e,zn}function Xn(){if(zt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var t=zn===null?qe.memoizedState:zn.next;if(t!==null)zn=t,zt=e;else{if(e===null)throw qe.alternate===null?Error(re(467)):Error(re(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},zn===null?qe.memoizedState=zn=e:zn=zn.next=e}return zn}var F5;F5=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function sp(e){var t=q1;return q1+=1,ih===null&&(ih=[]),e=kO(ih,e,t),t=qe,(zn===null?t.memoizedState:zn.next)===null&&(t=t.alternate,We.H=t===null||t.memoizedState===null?Dd:tu),e}function B5(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return sp(e);if(e.$$typeof===Oa)return Wi(e)}throw Error(re(438,String(e)))}function Kw(e){var t=null,n=qe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=qe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=F5(),qe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=sq;return t.index++,n}function nl(e,t){return typeof t=="function"?t(e):t}function _2(e){var t=Xn();return Zw(t,zt,e)}function Zw(e,t,n){var i=e.queue;if(i===null)throw Error(re(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,r===null)e.memoizedState=s;else{t=r.next;var a=o=null,l=null,c=t,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(mt&d)===d:(Lc&d)===d){var f=c.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Sh&&(u=!0);else if((Lc&f)===f){c=c.next,f===Sh&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=d,o=s):l=l.next=d,qe.lanes|=f,Nc|=f;d=c.action,sd&&n(s,d),s=c.hasEagerState?c.eagerState:n(s,d)}else f={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=f,o=s):l=l.next=f,qe.lanes|=d,Nc|=d;c=c.next}while(c!==null&&c!==t);if(l===null?o=s:l.next=a,!ss(s,e.memoizedState)&&(bi=!0,u&&(n=th,n!==null)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=l,i.lastRenderedState=s}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function e8(e){var t=Xn(),n=t.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);ss(s,t.memoizedState)||(bi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function BO(e,t,n){var i=qe,r=Xn(),s=St;if(s){if(n===void 0)throw Error(re(407));n=n()}else n=t();var o=!ss((zt||r).memoizedState,n);if(o&&(r.memoizedState=n,bi=!0),r=r.queue,qw(VO.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||zn!==null&&zn.memoizedState.tag&1){if(i.flags|=2048,xh(9,HO.bind(null,i,r,n,t),{destroy:void 0},null),Qt===null)throw Error(re(349));s||Lc&60||zO(i,t,n)}return n}function zO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=qe.updateQueue,t===null?(t=F5(),qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function HO(e,t,n,i){t.value=n,t.getSnapshot=i,$O(t)&&GO(e)}function VO(e,t,n){return n(function(){$O(t)&&GO(e)})}function $O(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ss(e,n)}catch{return!0}}function GO(e){var t=kc(e,2);t!==null&&hr(t,e,2)}function M7(e){var t=vr();if(typeof e=="function"){var n=e;if(e=n(),sd){rc(!0);try{n()}finally{rc(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t}function XO(e,t,n,i){return e.baseState=n,Zw(e,zt,typeof i=="function"?i:nl)}function TQ(e,t,n,i,r){if(H5(e))throw Error(re(485));if(e=t.action,e!==null){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};We.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,jO(t,s)):(s.next=n.next,t.pending=n.next=s)}}function jO(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=We.T,o={};We.T=o;try{var a=n(r,i),l=We.S;l!==null&&l(o,a),Gx(e,t,a)}catch(c){R7(e,t,c)}finally{We.T=s}}else try{s=n(r,i),Gx(e,t,s)}catch(c){R7(e,t,c)}}function Gx(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){Xx(e,t,i)},function(i){return R7(e,t,i)}):Xx(e,t,n)}function Xx(e,t,n){t.status="fulfilled",t.value=n,YO(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,jO(e,n)))}function R7(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,YO(t),t=t.next;while(t!==i)}e.action=null}function YO(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function WO(e,t){return t}function KO(e,t){if(St){var n=Qt.formState;if(n!==null){e:{var i=qe;if(St){if(Mi){t:{for(var r=Mi,s=Ro;r.nodeType!==8;){if(!s){r=null;break t}if(r=no(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){Mi=no(r.nextSibling),i=r.data==="F!";break e}}id(i)}i=!1}i&&(t=n[0])}}return n=vr(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WO,lastRenderedState:t},n.queue=i,n=fP.bind(null,qe,i),i.dispatch=n,i=M7(!1),s=t9.bind(null,qe,!1,i.queue),i=vr(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=TQ.bind(null,qe,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ZO(e){var t=Xn();return qO(t,zt,e)}function qO(e,t,n){t=Zw(e,t,WO)[0],e=_2(nl)[0],t=typeof t=="object"&&t!==null&&typeof t.then=="function"?sp(t):t;var i=Xn(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&(qe.flags|=2048,xh(9,IQ.bind(null,r,n),{destroy:void 0},null)),[t,s,e]}function IQ(e,t){e.action=t}function QO(e){var t=Xn(),n=zt;if(n!==null)return qO(t,n,e);Xn(),t=t.memoizedState,n=Xn();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function xh(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},t=qe.updateQueue,t===null&&(t=F5(),qe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function JO(){return Xn().memoizedState}function T2(e,t,n,i){var r=vr();qe.flags|=e,r.memoizedState=xh(1|t,n,{destroy:void 0},i===void 0?null:i)}function z5(e,t,n,i){var r=Xn();i=i===void 0?null:i;var s=r.memoizedState.inst;zt!==null&&i!==null&&Gw(i,zt.memoizedState.deps)?r.memoizedState=xh(t,n,s,i):(qe.flags|=e,r.memoizedState=xh(1|t,n,s,i))}function jx(e,t){T2(8390656,8,e,t)}function qw(e,t){z5(2048,8,e,t)}function eP(e,t){return z5(4,2,e,t)}function tP(e,t){return z5(4,4,e,t)}function nP(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iP(e,t,n){n=n!=null?n.concat([e]):null,z5(4,4,nP.bind(null,t,e),n)}function Qw(){}function rP(e,t){var n=Xn();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Gw(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function sP(e,t){var n=Xn();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Gw(t,i[1]))return i[0];if(i=e(),sd){rc(!0);try{e()}finally{rc(!1)}}return n.memoizedState=[i,t],i}function Jw(e,t,n){return n===void 0||Lc&1073741824?e.memoizedState=t:(e.memoizedState=n,e=YP(),qe.lanes|=e,Nc|=e,n)}function oP(e,t,n,i){return ss(n,t)?n:Ih.current!==null?(e=Jw(e,n,i),ss(e,t)||(bi=!0),e):Lc&42?(e=YP(),qe.lanes|=e,Nc|=e,t):(bi=!0,e.memoizedState=n)}function aP(e,t,n,i,r){var s=rn.p;rn.p=s!==0&&8>s?s:8;var o=We.T,a={};We.T=a,t9(e,!1,t,n);try{var l=r(),c=We.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=vQ(l,i);o1(e,t,u,es(e))}else o1(e,t,i,es(e))}catch(d){o1(e,t,{then:function(){},status:"rejected",reason:d},es())}finally{rn.p=s,We.T=o}}function SQ(){}function k7(e,t,n,i){if(e.tag!==5)throw Error(re(476));var r=lP(e).queue;aP(e,r,t,$u,n===null?SQ:function(){return cP(e),n(i)})}function lP(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$u,baseState:$u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:$u},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cP(e){var t=lP(e).next.queue;o1(e,t,{},es())}function e9(){return Wi(t0)}function uP(){return Xn().memoizedState}function dP(){return Xn().memoizedState}function xQ(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=es();e=hc(n);var i=gc(t,e,n);i!==null&&(hr(i,t,n),l1(i,t,n)),t={cache:Vw()},e.payload=t;return}t=t.return}}function CQ(e,t,n){var i=es();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},H5(e)?hP(t,n):(n=Fw(e,t,n,i),n!==null&&(hr(n,e,i),gP(n,t,i)))}function fP(e,t,n){var i=es();o1(e,t,n,i)}function o1(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(H5(e))hP(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ss(a,o))return P5(e,t,r,0),Qt===null&&O5(),!1}catch{}finally{}if(n=Fw(e,t,r,i),n!==null)return hr(n,e,i),gP(n,t,i),!0}return!1}function t9(e,t,n,i){if(i={lane:2,revertLane:d9(),action:i,hasEagerState:!1,eagerState:null,next:null},H5(e)){if(t)throw Error(re(479))}else t=Fw(e,n,i,2),t!==null&&hr(t,e,2)}function H5(e){var t=e.alternate;return e===qe||t!==null&&t===qe}function hP(e,t){nh=Tb=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gP(e,t,n){if(n&4194176){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,nO(e,n)}}var Yo={readContext:Wi,use:B5,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn};Yo.useCacheRefresh=Cn;Yo.useMemoCache=Cn;Yo.useHostTransitionStatus=Cn;Yo.useFormState=Cn;Yo.useActionState=Cn;Yo.useOptimistic=Cn;var Dd={readContext:Wi,use:B5,useCallback:function(e,t){return vr().memoizedState=[e,t===void 0?null:t],e},useContext:Wi,useEffect:jx,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,T2(4194308,4,nP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return T2(4194308,4,e,t)},useInsertionEffect:function(e,t){T2(4,2,e,t)},useMemo:function(e,t){var n=vr();t=t===void 0?null:t;var i=e();if(sd){rc(!0);try{e()}finally{rc(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=vr();if(n!==void 0){var r=n(t);if(sd){rc(!0);try{n(t)}finally{rc(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=CQ.bind(null,qe,e),[i.memoizedState,e]},useRef:function(e){var t=vr();return e={current:e},t.memoizedState=e},useState:function(e){e=M7(e);var t=e.queue,n=fP.bind(null,qe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qw,useDeferredValue:function(e,t){var n=vr();return Jw(n,e,t)},useTransition:function(){var e=M7(!1);return e=aP.bind(null,qe,e.queue,!0,!1),vr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=qe,r=vr();if(St){if(n===void 0)throw Error(re(407));n=n()}else{if(n=t(),Qt===null)throw Error(re(349));mt&60||zO(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,jx(VO.bind(null,i,s,e),[e]),i.flags|=2048,xh(9,HO.bind(null,i,s,n,t),{destroy:void 0},null),n},useId:function(){var e=vr(),t=Qt.identifierPrefix;if(St){var n=Fa,i=Pa;n=(i&~(1<<32-Jr(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ib++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=wQ++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return vr().memoizedState=xQ.bind(null,qe)}};Dd.useMemoCache=Kw;Dd.useHostTransitionStatus=e9;Dd.useFormState=KO;Dd.useActionState=KO;Dd.useOptimistic=function(e){var t=vr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=t9.bind(null,qe,!0,n),n.dispatch=t,[e,t]};var tu={readContext:Wi,use:B5,useCallback:rP,useContext:Wi,useEffect:qw,useImperativeHandle:iP,useInsertionEffect:eP,useLayoutEffect:tP,useMemo:sP,useReducer:_2,useRef:JO,useState:function(){return _2(nl)},useDebugValue:Qw,useDeferredValue:function(e,t){var n=Xn();return oP(n,zt.memoizedState,e,t)},useTransition:function(){var e=_2(nl)[0],t=Xn().memoizedState;return[typeof e=="boolean"?e:sp(e),t]},useSyncExternalStore:BO,useId:uP};tu.useCacheRefresh=dP;tu.useMemoCache=Kw;tu.useHostTransitionStatus=e9;tu.useFormState=ZO;tu.useActionState=ZO;tu.useOptimistic=function(e,t){var n=Xn();return XO(n,zt,e,t)};var Nd={readContext:Wi,use:B5,useCallback:rP,useContext:Wi,useEffect:qw,useImperativeHandle:iP,useInsertionEffect:eP,useLayoutEffect:tP,useMemo:sP,useReducer:e8,useRef:JO,useState:function(){return e8(nl)},useDebugValue:Qw,useDeferredValue:function(e,t){var n=Xn();return zt===null?Jw(n,e,t):oP(n,zt.memoizedState,e,t)},useTransition:function(){var e=e8(nl)[0],t=Xn().memoizedState;return[typeof e=="boolean"?e:sp(e),t]},useSyncExternalStore:BO,useId:uP};Nd.useCacheRefresh=dP;Nd.useMemoCache=Kw;Nd.useHostTransitionStatus=e9;Nd.useFormState=QO;Nd.useActionState=QO;Nd.useOptimistic=function(e,t){var n=Xn();return zt!==null?XO(n,zt,e,t):(n.baseState=e,[e,n.queue.dispatch])};function t8(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:sn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var L7={isMounted:function(e){return(e=e._reactInternals)?ug(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=es(),r=hc(i);r.payload=t,n!=null&&(r.callback=n),t=gc(e,r,i),t!==null&&(hr(t,e,i),l1(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=es(),r=hc(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=gc(e,r,i),t!==null&&(hr(t,e,i),l1(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=es(),i=hc(n);i.tag=2,t!=null&&(i.callback=t),t=gc(e,i,n),t!==null&&(hr(t,e,n),l1(t,e,n))}};function Yx(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!W1(n,i)||!W1(r,s):!0}function Wx(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&L7.enqueueReplaceState(t,t.state,null)}function od(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=sn({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var Sb=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mP(e){Sb(e)}function pP(e){console.error(e)}function UP(e){Sb(e)}function xb(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Kx(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function D7(e,t,n){return n=hc(n),n.tag=3,n.payload={element:null},n.callback=function(){xb(e,t)},n}function bP(e){return e=hc(e),e.tag=3,e}function yP(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){Kx(t,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Kx(t,n,i),typeof r!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function AQ(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&op(t,n,r,!0),n=Ds.current,n!==null){switch(n.tag){case 13:return Vo===null?K7():n.alternate===null&&Tn===0&&(Tn=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===x7?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),g8(e,i,r)),!1;case 22:return n.flags|=65536,i===x7?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),g8(e,i,r)),!1}throw Error(re(435,n.tag))}return g8(e,i,r),K7(),!1}if(St)return t=Ds.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==S7&&(e=Error(re(422),{cause:i}),K1(Es(e,n)))):(i!==S7&&(t=Error(re(423),{cause:i}),K1(Es(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=Es(i,n),r=D7(e.stateNode,i,r),a8(e,r),Tn!==4&&(Tn=2)),!1;var s=Error(re(520),{cause:i});if(s=Es(s,n),f1===null?f1=[s]:f1.push(s),Tn!==4&&(Tn=2),t===null)return!0;i=Es(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=D7(n.stateNode,i,e),a8(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(pc===null||!pc.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=bP(r),yP(r,e,n,i),a8(n,r),!1}n=n.return}while(n!==null);return!1}var EP=Error(re(461)),bi=!1;function xi(e,t,n,i){t.child=e===null?DO(t,null,n,i):rd(t,e.child,n,i)}function Zx(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return ad(t),i=Xw(e,t,n,o,s,r),a=jw(),e!==null&&!bi?(Yw(e,t,r),il(e,t,r)):(St&&a&&Bw(t),t.flags|=1,xi(e,t,i,r),t.child)}function qx(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!o9(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,vP(e,t,s,i,r)):(e=S2(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!n9(e,r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:W1,n(o,i)&&e.ref===t.ref)return il(e,t,r)}return t.flags|=1,e=mc(s,i),e.ref=t.ref,e.return=t,t.child=e}function vP(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(W1(s,i)&&e.ref===t.ref)if(bi=!1,t.pendingProps=i=s,n9(e,r))e.flags&131072&&(bi=!0);else return t.lanes=e.lanes,il(e,t,r)}return N7(e,t,n,i,r)}function wP(e,t,n){var i=t.pendingProps,r=i.children,s=(t.stateNode._pendingVisibility&2)!==0,o=e!==null?e.memoizedState:null;if(a1(e,t),i.mode==="hidden"||s){if(t.flags&128){if(i=o!==null?o.baseLanes|n:n,e!==null){for(r=t.child=e.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return Qx(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&w2(t,o!==null?o.cachePool:null),o!==null?Hx(t,o):C7(),NO(t);else return t.lanes=t.childLanes=536870912,Qx(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(w2(t,o.cachePool),Hx(t,o),Ql(),t.memoizedState=null):(e!==null&&w2(t,null),C7(),Ql());return xi(e,t,r,n),t.child}function Qx(e,t,n,i){var r=$w();return r=r===null?null:{parent:Jn._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&w2(t,null),C7(),NO(t),e!==null&&op(e,t,i,!0),null}function a1(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(re(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function N7(e,t,n,i,r){return ad(t),n=Xw(e,t,n,i,void 0,r),i=jw(),e!==null&&!bi?(Yw(e,t,r),il(e,t,r)):(St&&i&&Bw(t),t.flags|=1,xi(e,t,n,r),t.child)}function Jx(e,t,n,i,r,s){return ad(t),t.updateQueue=null,n=FO(t,i,n,r),PO(e),i=jw(),e!==null&&!bi?(Yw(e,t,s),il(e,t,s)):(St&&i&&Bw(t),t.flags|=1,xi(e,t,n,s),t.child)}function eC(e,t,n,i,r){if(ad(t),t.stateNode===null){var s=Nf,o=n.contextType;typeof o=="object"&&o!==null&&(s=Wi(o)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=L7,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},i9(t),o=n.contextType,s.context=typeof o=="object"&&o!==null?Wi(o):Nf,s.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(t8(t,n,o,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&L7.enqueueReplaceState(s,s.state,null),u1(t,i,s,r),c1(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var a=t.memoizedProps,l=od(n,a);s.props=l;var c=s.context,u=n.contextType;o=Nf,typeof u=="object"&&u!==null&&(o=Wi(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,u||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==o)&&Wx(t,s,i,o),Xl=!1;var f=t.memoizedState;s.state=f,u1(t,i,s,r),c1(),c=t.memoizedState,a||f!==c||Xl?(typeof d=="function"&&(t8(t,n,d,i),c=t.memoizedState),(l=Xl||Yx(t,n,l,i,f,c,o))?(u||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=o,i=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,H7(e,t),o=t.memoizedProps,u=od(n,o),s.props=u,d=t.pendingProps,f=s.context,c=n.contextType,l=Nf,typeof c=="object"&&c!==null&&(l=Wi(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||f!==l)&&Wx(t,s,i,l),Xl=!1,f=t.memoizedState,s.state=f,u1(t,i,s,r),c1();var h=t.memoizedState;o!==d||f!==h||Xl||e!==null&&e.dependencies!==null&&Cb(e.dependencies)?(typeof a=="function"&&(t8(t,n,a,i),h=t.memoizedState),(u=Xl||Yx(t,n,u,i,f,h,l)||e!==null&&e.dependencies!==null&&Cb(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,h,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,h,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,a1(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=rd(t,e.child,null,r),t.child=rd(t,null,n,r)):xi(e,t,n,r),t.memoizedState=s.state,e=t.child):e=il(e,t,r),e}function tC(e,t,n,i){return ip(),t.flags|=256,xi(e,t,n,i),t.child}var n8={dehydrated:null,treeContext:null,retryLane:0};function i8(e){return{baseLanes:e,cachePool:OO()}}function r8(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Is),e}function _P(e,t,n){var i=t.pendingProps,r=!1,s=(t.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(ei.current&2)!==0),o&&(r=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(St){if(r?ql(t):Ql(),St){var a=Mi,l;if(l=a){e:{for(l=a,a=Ro;l.nodeType!==8;){if(!a){a=null;break e}if(l=no(l.nextSibling),l===null){a=null;break e}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:Gu!==null?{id:Pa,overflow:Fa}:null,retryLane:536870912},l=Ts(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,lr=t,Mi=null,l=!0):l=!1}l||id(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return a.data==="$!"?t.lanes=16:t.lanes=536870912,null;Ba(t)}return a=i.children,i=i.fallback,r?(Ql(),r=t.mode,a=P7({mode:"hidden",children:a},r),i=ju(i,r,n,null),a.return=t,i.return=t,a.sibling=i,t.child=a,r=t.child,r.memoizedState=i8(n),r.childLanes=r8(e,o,n),t.memoizedState=n8,i):(ql(t),O7(t,a))}if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(s)t.flags&256?(ql(t),t.flags&=-257,t=s8(e,t,n)):t.memoizedState!==null?(Ql(),t.child=e.child,t.flags|=128,t=null):(Ql(),r=i.fallback,a=t.mode,i=P7({mode:"visible",children:i.children},a),r=ju(r,a,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,rd(t,e.child,null,n),i=t.child,i.memoizedState=i8(n),i.childLanes=r8(e,o,n),t.memoizedState=n8,t=r);else if(ql(t),a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var c=o.dgst;o=c,i=Error(re(419)),i.stack="",i.digest=o,K1({value:i,source:null,stack:null}),t=s8(e,t,n)}else if(bi||op(e,t,n,!1),o=(n&e.childLanes)!==0,bi||o){if(o=Qt,o!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(o.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane)throw l.retryLane=i,kc(e,i),hr(o,e,i),EP}a.data==="$?"||K7(),t=s8(e,t,n)}else a.data==="$?"?(t.flags|=128,t.child=e.child,t=GQ.bind(null,e),a._reactRetry=t,t=null):(e=l.treeContext,Mi=no(a.nextSibling),lr=t,St=!0,Zs=null,Ro=!1,e!==null&&(Us[bs++]=Pa,Us[bs++]=Fa,Us[bs++]=Gu,Pa=e.id,Fa=e.overflow,Gu=t),t=O7(t,i.children),t.flags|=4096);return t}return r?(Ql(),r=i.fallback,a=t.mode,l=e.child,c=l.sibling,i=mc(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&31457280,c!==null?r=mc(c,r):(r=ju(r,a,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,a=e.child.memoizedState,a===null?a=i8(n):(l=a.cachePool,l!==null?(c=Jn._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=OO(),a={baseLanes:a.baseLanes|n,cachePool:l}),r.memoizedState=a,r.childLanes=r8(e,o,n),t.memoizedState=n8,i):(ql(t),n=e.child,e=n.sibling,n=mc(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=n,t.memoizedState=null,n)}function O7(e,t){return t=P7({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function P7(e,t){return XP(e,t,0,null)}function s8(e,t,n){return rd(t,e.child,null,n),e=O7(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nC(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),B7(e.return,t,n)}function o8(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function TP(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(xi(e,t,i.children,n),i=ei.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nC(e,n,t);else if(e.tag===19)nC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(un(ei,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&_b(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),o8(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&_b(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}o8(t,!0,n,null,s);break;case"together":o8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Nc|=t.lanes,!(n&t.childLanes))if(e!==null){if(op(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,n=mc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function n9(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Cb(e)))}function MQ(e,t,n){switch(t.tag){case 3:gb(t,t.stateNode.containerInfo),Jl(t,Jn,e.memoizedState.cache),ip();break;case 27:case 5:U7(t);break;case 4:gb(t,t.stateNode.containerInfo);break;case 10:Jl(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(ql(t),t.flags|=128,null):n&t.child.childLanes?_P(e,t,n):(ql(t),e=il(e,t,n),e!==null?e.sibling:null);ql(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(op(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return TP(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),un(ei,ei.current),i)break;return null;case 22:case 23:return t.lanes=0,wP(e,t,n);case 24:Jl(t,Jn,e.memoizedState.cache)}return il(e,t,n)}function IP(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)bi=!0;else{if(!n9(e,n)&&!(t.flags&128))return bi=!1,MQ(e,t,n);bi=!!(e.flags&131072)}else bi=!1,St&&t.flags&1048576&&MO(t,vb,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")o9(i)?(e=od(i,e),t.tag=1,t=eC(null,t,i,e,n)):(t.tag=0,t=N7(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===xw){t.tag=11,t=Zx(null,t,i,e,n);break e}else if(r===Cw){t.tag=14,t=qx(null,t,i,e,n);break e}}throw t=m7(i)||i,Error(re(306,t,""))}}return t;case 0:return N7(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=od(i,t.pendingProps),eC(e,t,i,r,n);case 3:e:{if(gb(t,t.stateNode.containerInfo),e===null)throw Error(re(387));var s=t.pendingProps;r=t.memoizedState,i=r.element,H7(e,t),u1(t,s,null,n);var o=t.memoizedState;if(s=o.cache,Jl(t,Jn,s),s!==r.cache&&z7(t,[Jn],n,!0),c1(),s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=tC(e,t,s,n);break e}else if(s!==i){i=Es(Error(re(424)),t),K1(i),t=tC(e,t,s,n);break e}else for(Mi=no(t.stateNode.containerInfo.firstChild),lr=t,St=!0,Zs=null,Ro=!0,n=DO(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ip(),s===i){t=il(e,t,n);break e}xi(e,t,s,n)}t=t.child}return t;case 26:return a1(e,t),e===null?(n=EC(t.type,null,t.pendingProps,null))?t.memoizedState=n:St||(n=t.type,e=t.pendingProps,i=Nb(fc.current).createElement(n),i[Yi]=t,i[Mr]=e,Ri(i,n,e),pi(i),t.stateNode=i):t.memoizedState=EC(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return U7(t),e===null&&St&&(i=t.stateNode=cF(t.type,t.pendingProps,fc.current),lr=t,Ro=!0,Mi=no(i.firstChild)),i=t.pendingProps.children,e!==null||St?xi(e,t,i,n):t.child=rd(t,null,i,n),a1(e,t),t.child;case 5:return e===null&&St&&((r=i=Mi)&&(i=oJ(i,t.type,t.pendingProps,Ro),i!==null?(t.stateNode=i,lr=t,Mi=no(i.firstChild),Ro=!1,r=!0):r=!1),r||id(t)),U7(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,e4(r,s)?i=null:o!==null&&e4(r,o)&&(t.flags|=32),t.memoizedState!==null&&(r=Xw(e,t,_Q,null,null,n),t0._currentValue=r),a1(e,t),xi(e,t,i,n),t.child;case 6:return e===null&&St&&((e=n=Mi)&&(n=aJ(n,t.pendingProps,Ro),n!==null?(t.stateNode=n,lr=t,Mi=null,e=!0):e=!1),e||id(t)),null;case 13:return _P(e,t,n);case 4:return gb(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=rd(t,null,i,n):xi(e,t,i,n),t.child;case 11:return Zx(e,t,t.type,t.pendingProps,n);case 7:return xi(e,t,t.pendingProps,n),t.child;case 8:return xi(e,t,t.pendingProps.children,n),t.child;case 12:return xi(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Jl(t,t.type,i.value),xi(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,ad(t),r=Wi(r),i=i(r),t.flags|=1,xi(e,t,i,n),t.child;case 14:return qx(e,t,t.type,t.pendingProps,n);case 15:return vP(e,t,t.type,t.pendingProps,n);case 19:return TP(e,t,n);case 22:return wP(e,t,n);case 24:return ad(t),i=Wi(Jn),e===null?(r=$w(),r===null&&(r=Qt,s=Vw(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},i9(t),Jl(t,Jn,r)):(e.lanes&n&&(H7(e,t),u1(t,null,null,n),c1()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Jl(t,Jn,i)):(i=s.cache,Jl(t,Jn,i),i!==r.cache&&z7(t,[Jn],n,!0))),xi(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(re(156,t.tag))}var F7=oa(null),Od=null,za=null;function Jl(e,t,n){un(F7,t._currentValue),t._currentValue=n}function Ga(e){e._currentValue=F7.current,vi(F7)}function B7(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function z7(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var s=r.dependencies;if(s!==null){var o=r.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=r;for(var l=0;l<t.length;l++)if(a.context===t[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),B7(s.return,n,e),i||(o=null);break e}s=a.next}}else if(r.tag===18){if(o=r.return,o===null)throw Error(re(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),B7(o,n,e),o=null}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}}function op(e,t,n,i){e=null;for(var r=t,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var o=r.alternate;if(o===null)throw Error(re(387));if(o=o.memoizedProps,o!==null){var a=r.type;ss(r.pendingProps.value,o.value)||(e!==null?e.push(a):e=[a])}}else if(r===hb.current){if(o=r.alternate,o===null)throw Error(re(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(t0):e=[t0])}r=r.return}e!==null&&z7(t,e,n,i),t.flags|=262144}function Cb(e){for(e=e.firstContext;e!==null;){if(!ss(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ad(e){Od=e,za=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wi(e){return SP(Od,e)}function EU(e,t){return Od===null&&ad(e),SP(e,t)}function SP(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},za===null){if(e===null)throw Error(re(308));za=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else za=za.next=t;return n}var Xl=!1;function i9(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function H7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function hc(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,bn&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=yb(e),AO(e,null,n),t}return P5(e,i,t,n),yb(e)}function l1(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194176)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,nO(e,n)}}function a8(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var V7=!1;function c1(){if(V7){var e=th;if(e!==null)throw e}}function u1(e,t,n,i){V7=!1;var r=e.updateQueue;Xl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane&-536870913,h=f!==a.lane;if(h?(mt&f)===f:(i&f)===f){f!==0&&f===Sh&&(V7=!0),u!==null&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,p=a;f=t;var U=n;switch(p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(U,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,f=typeof m=="function"?m.call(U,d,f):m,f==null)break e;d=sn({},d,f);break e;case 2:Xl=!0}}f=a.callback,f!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[f]:h.push(f))}else h={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,s===null&&(r.shared.lanes=0),Nc|=o,e.lanes=o,e.memoizedState=d}}function xP(e,t){if(typeof e!="function")throw Error(re(191,e));e.call(t)}function CP(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xP(n[e],t)}function ap(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,o=n.inst;i=s(),o.destroy=i}n=n.next}while(n!==r)}}catch(a){Xt(t,t.return,a)}}function Dc(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&e)===e){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,r=t;var l=n;try{a()}catch(c){Xt(r,l,c)}}}i=i.next}while(i!==s)}}catch(c){Xt(t,t.return,c)}}function AP(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{CP(t,n)}catch(i){Xt(e,e.return,i)}}}function MP(e,t,n){n.props=od(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Xt(e,t,i)}}function Lu(e,t){try{var n=e.ref;if(n!==null){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(s){Xt(e,t,s)}}function Gr(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Xt(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Xt(e,t,r)}else n.current=null}function RP(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Xt(e,e.return,r)}}function iC(e,t,n){try{var i=e.stateNode;tJ(i,e.type,n,t),i[Mr]=t}catch(r){Xt(e,e.return,r)}}function kP(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27||e.tag===4}function l8(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==27&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $7(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=G5));else if(i!==4&&i!==27&&(e=e.child,e!==null))for($7(e,t,n),e=e.sibling;e!==null;)$7(e,t,n),e=e.sibling}function Ab(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&i!==27&&(e=e.child,e!==null))for(Ab(e,t,n),e=e.sibling;e!==null;)Ab(e,t,n),e=e.sibling}var Ca=!1,_n=!1,c8=!1,rC=typeof WeakSet=="function"?WeakSet:Set,gi=null,sC=!1;function RQ(e,t){if(e=e.containerInfo,Q7=Bb,e=wO(e),Ow(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(J7={focusedElem:e,selectionRange:n},Bb=!1,gi=t;gi!==null;)if(t=gi,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gi=e;else for(;gi!==null;){switch(t=gi,s=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var m=od(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(m,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(p){Xt(n,n.return,p)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)t4(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":t4(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(re(163))}if(e=t.sibling,e!==null){e.return=t.return,gi=e;break}gi=t.return}return m=sC,sC=!1,m}function LP(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ma(e,n),i&4&&ap(5,n);break;case 1:if(ma(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(a){Xt(n,n.return,a)}else{var r=od(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Xt(n,n.return,a)}}i&64&&AP(n),i&512&&Lu(n,n.return);break;case 3:if(ma(e,n),i&64&&(i=n.updateQueue,i!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{CP(i,e)}catch(a){Xt(n,n.return,a)}}break;case 26:ma(e,n),i&512&&Lu(n,n.return);break;case 27:case 5:ma(e,n),t===null&&i&4&&RP(n),i&512&&Lu(n,n.return);break;case 12:ma(e,n);break;case 13:ma(e,n),i&4&&OP(e,n);break;case 22:if(r=n.memoizedState!==null||Ca,!r){t=t!==null&&t.memoizedState!==null||_n;var s=Ca,o=_n;Ca=r,(_n=t)&&!o?Bl(e,n,(n.subtreeFlags&8772)!==0):ma(e,n),Ca=s,_n=o}i&512&&(n.memoizedProps.mode==="manual"?Lu(n,n.return):Gr(n,n.return));break;default:ma(e,n)}}function DP(e){var t=e.alternate;t!==null&&(e.alternate=null,DP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Mw(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Bn=null,Fr=!1;function ga(e,t,n){for(n=n.child;n!==null;)NP(e,t,n),n=n.sibling}function NP(e,t,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(J0,n)}catch{}switch(n.tag){case 26:_n||Gr(n,t),ga(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:_n||Gr(n,t);var i=Bn,r=Fr;for(Bn=n.stateNode,ga(e,t,n),n=n.stateNode,t=n.attributes;t.length;)n.removeAttributeNode(t[0]);Mw(n),Bn=i,Fr=r;break;case 5:_n||Gr(n,t);case 6:r=Bn;var s=Fr;if(Bn=null,ga(e,t,n),Bn=r,Fr=s,Bn!==null)if(Fr)try{e=Bn,i=n.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){Xt(n,t,o)}else try{Bn.removeChild(n.stateNode)}catch(o){Xt(n,t,o)}break;case 18:Bn!==null&&(Fr?(t=Bn,n=n.stateNode,t.nodeType===8?v8(t.parentNode,n):t.nodeType===1&&v8(t,n),r0(t)):v8(Bn,n.stateNode));break;case 4:i=Bn,r=Fr,Bn=n.stateNode.containerInfo,Fr=!0,ga(e,t,n),Bn=i,Fr=r;break;case 0:case 11:case 14:case 15:_n||Dc(2,n,t),_n||Dc(4,n,t),ga(e,t,n);break;case 1:_n||(Gr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&MP(n,t,i)),ga(e,t,n);break;case 21:ga(e,t,n);break;case 22:_n||Gr(n,t),_n=(i=_n)||n.memoizedState!==null,ga(e,t,n),_n=i;break;default:ga(e,t,n)}}function OP(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{r0(e)}catch(n){Xt(t,t.return,n)}}function kQ(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new rC),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new rC),t;default:throw Error(re(435,e.tag))}}function u8(e,t){var n=kQ(e);t.forEach(function(i){var r=XQ.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function cs(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 27:case 5:Bn=a.stateNode,Fr=!1;break e;case 3:Bn=a.stateNode.containerInfo,Fr=!0;break e;case 4:Bn=a.stateNode.containerInfo,Fr=!0;break e}a=a.return}if(Bn===null)throw Error(re(160));NP(s,o,r),Bn=null,Fr=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)PP(t,e),t=t.sibling}var js=null;function PP(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:cs(t,e),us(e),i&4&&(Dc(3,e,e.return),ap(3,e),Dc(5,e,e.return));break;case 1:cs(t,e),us(e),i&512&&(_n||n===null||Gr(n,n.return)),i&64&&Ca&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=js;if(cs(t,e),us(e),i&512&&(_n||n===null||Gr(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[X1]||s[Yi]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),Ri(s,i,n),s[Yi]=e,pi(s),i=s;break e;case"link":var o=wC("link","href",r).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(s=o[a],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}s=r.createElement(i),Ri(s,i,n),r.head.appendChild(s);break;case"meta":if(o=wC("meta","content",r).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(s=o[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}s=r.createElement(i),Ri(s,i,n),r.head.appendChild(s);break;default:throw Error(re(468,i))}s[Yi]=e,pi(s),i=s}e.stateNode=i}else _C(r,e.type,e.stateNode);else e.stateNode=vC(r,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?_C(r,e.type,e.stateNode):vC(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&iC(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&e.alternate===null){r=e.stateNode,s=e.memoizedProps;try{for(var l=r.firstChild;l;){var c=l.nextSibling,u=l.nodeName;l[X1]||u==="HEAD"||u==="BODY"||u==="SCRIPT"||u==="STYLE"||u==="LINK"&&l.rel.toLowerCase()==="stylesheet"||r.removeChild(l),l=c}for(var d=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ri(r,d,s),r[Yi]=e,r[Mr]=s}catch(m){Xt(e,e.return,m)}}case 5:if(cs(t,e),us(e),i&512&&(_n||n===null||Gr(n,n.return)),e.flags&32){r=e.stateNode;try{Th(r,"")}catch(m){Xt(e,e.return,m)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,iC(e,r,n!==null?n.memoizedProps:r)),i&1024&&(c8=!0);break;case 6:if(cs(t,e),us(e),i&4){if(e.stateNode===null)throw Error(re(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Xt(e,e.return,m)}}break;case 3:if(C2=null,r=js,js=Ob(t.containerInfo),cs(t,e),js=r,us(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{r0(t.containerInfo)}catch(m){Xt(e,e.return,m)}c8&&(c8=!1,FP(e));break;case 4:i=js,js=Ob(e.stateNode.containerInfo),cs(t,e),us(e),js=i;break;case 12:cs(t,e),us(e);break;case 13:cs(t,e),us(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(c9=Ho()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,u8(e,i)));break;case 22:if(i&512&&(_n||n===null||Gr(n,n.return)),l=e.memoizedState!==null,c=n!==null&&n.memoizedState!==null,u=Ca,d=_n,Ca=u||l,_n=d||c,cs(t,e),_n=d,Ca=u,us(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=l?t._visibility&-2:t._visibility|1,l&&(t=Ca||_n,n===null||c||t||pf(e)),e.memoizedProps===null||e.memoizedProps.mode!=="manual"))e:for(n=null,t=e;;){if(t.tag===5||t.tag===26||t.tag===27){if(n===null){c=n=t;try{if(r=c.stateNode,l)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{o=c.stateNode,a=c.memoizedProps.style;var h=a!=null&&a.hasOwnProperty("display")?a.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Xt(c,c.return,m)}}}else if(t.tag===6){if(n===null){c=t;try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(m){Xt(c,c.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,u8(e,n))));break;case 19:cs(t,e),us(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,u8(e,i)));break;case 21:break;default:cs(t,e),us(e)}}function us(e){var t=e.flags;if(t&2){try{if(e.tag!==27){e:{for(var n=e.return;n!==null;){if(kP(n)){var i=n;break e}n=n.return}throw Error(re(160))}switch(i.tag){case 27:var r=i.stateNode,s=l8(e);Ab(e,s,r);break;case 5:var o=i.stateNode;i.flags&32&&(Th(o,""),i.flags&=-33);var a=l8(e);Ab(e,a,o);break;case 3:case 4:var l=i.stateNode.containerInfo,c=l8(e);$7(e,c,l);break;default:throw Error(re(161))}}}catch(u){Xt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function FP(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;FP(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ma(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)LP(e,t.alternate,t),t=t.sibling}function pf(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Dc(4,t,t.return),pf(t);break;case 1:Gr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&MP(t,t.return,n),pf(t);break;case 26:case 27:case 5:Gr(t,t.return),pf(t);break;case 22:Gr(t,t.return),t.memoizedState===null&&pf(t);break;default:pf(t)}e=e.sibling}}function Bl(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Bl(r,s,n),ap(4,s);break;case 1:if(Bl(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(c){Xt(i,i.return,c)}if(i=s,r=i.updateQueue,r!==null){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(l!==null)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)xP(l[r],a)}catch(c){Xt(i,i.return,c)}}n&&o&64&&AP(s),Lu(s,s.return);break;case 26:case 27:case 5:Bl(r,s,n),n&&i===null&&o&4&&RP(s),Lu(s,s.return);break;case 12:Bl(r,s,n);break;case 13:Bl(r,s,n),n&&o&4&&OP(r,s);break;case 22:s.memoizedState===null&&Bl(r,s,n),Lu(s,s.return);break;default:Bl(r,s,n)}t=t.sibling}}function r9(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&rp(n))}function s9(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&rp(e))}function kl(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)BP(e,t,n,i),t=t.sibling}function BP(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:kl(e,t,n,i),r&2048&&ap(9,t);break;case 3:kl(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&rp(e)));break;case 12:if(r&2048){kl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;typeof a=="function"&&a(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Xt(t,t.return,l)}}else kl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,t.memoizedState!==null?s._visibility&4?kl(e,t,n,i):d1(e,t):s._visibility&4?kl(e,t,n,i):(s._visibility|=4,Uf(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&r9(t.alternate,t);break;case 24:kl(e,t,n,i),r&2048&&s9(t.alternate,t);break;default:kl(e,t,n,i)}}function Uf(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var s=e,o=t,a=n,l=i,c=o.flags;switch(o.tag){case 0:case 11:case 15:Uf(s,o,a,l,r),ap(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState!==null?u._visibility&4?Uf(s,o,a,l,r):d1(s,o):(u._visibility|=4,Uf(s,o,a,l,r)),r&&c&2048&&r9(o.alternate,o);break;case 24:Uf(s,o,a,l,r),r&&c&2048&&s9(o.alternate,o);break;default:Uf(s,o,a,l,r)}t=t.sibling}}function d1(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:d1(n,i),r&2048&&r9(i.alternate,i);break;case 24:d1(n,i),r&2048&&s9(i.alternate,i);break;default:d1(n,i)}t=t.sibling}}var km=8192;function tf(e){if(e.subtreeFlags&km)for(e=e.child;e!==null;)zP(e),e=e.sibling}function zP(e){switch(e.tag){case 26:tf(e),e.flags&km&&e.memoizedState!==null&&EJ(js,e.memoizedState,e.memoizedProps);break;case 5:tf(e);break;case 3:case 4:var t=js;js=Ob(e.stateNode.containerInfo),tf(e),js=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=km,km=16777216,tf(e),km=t):tf(e));break;default:tf(e)}}function HP(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function nm(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];gi=i,$P(i,e)}HP(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)VP(e),e=e.sibling}function VP(e){switch(e.tag){case 0:case 11:case 15:nm(e),e.flags&2048&&Dc(9,e,e.return);break;case 3:nm(e);break;case 12:nm(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,I2(e)):nm(e);break;default:nm(e)}}function I2(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];gi=i,$P(i,e)}HP(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Dc(8,t,t.return),I2(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,I2(t));break;default:I2(t)}e=e.sibling}}function $P(e,t){for(;gi!==null;){var n=gi;switch(n.tag){case 0:case 11:case 15:Dc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:rp(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,gi=i;else e:for(n=e;gi!==null;){i=gi;var r=i.sibling,s=i.return;if(DP(i),i===n){gi=null;break e}if(r!==null){r.return=s,gi=r;break e}gi=s}}}function LQ(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,n,i){return new LQ(e,t,n,i)}function o9(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mc(e,t){var n=e.alternate;return n===null?(n=Ts(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&31457280,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function GP(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function S2(e,t,n,i,r,s){var o=0;if(i=e,typeof e=="function")o9(e)&&(o=1);else if(typeof e=="string")o=bJ(e,n,zo.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Cf:return ju(n.children,r,s,t);case XN:o=8,r|=24;break;case f7:return e=Ts(12,n,t,r|2),e.elementType=f7,e.lanes=s,e;case h7:return e=Ts(13,n,t,r),e.elementType=h7,e.lanes=s,e;case g7:return e=Ts(19,n,t,r),e.elementType=g7,e.lanes=s,e;case YN:return XP(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rq:case Oa:o=10;break e;case jN:o=9;break e;case xw:o=11;break e;case Cw:o=14;break e;case Gl:o=16,i=null;break e}o=29,n=Error(re(130,e===null?"null":typeof e,"")),i=null}return t=Ts(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function ju(e,t,n,i){return e=Ts(7,e,i,t),e.lanes=n,e}function XP(e,t,n,i){e=Ts(22,e,i,t),e.elementType=YN,e.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(re(456));if(!(r._pendingVisibility&2)){var o=kc(s,2);o!==null&&(r._pendingVisibility|=2,hr(o,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(re(456));if(r._pendingVisibility&2){var o=kc(s,2);o!==null&&(r._pendingVisibility&=-3,hr(o,s,2))}}};return e.stateNode=r,e}function d8(e,t,n){return e=Ts(6,e,null,t),e.lanes=n,e}function f8(e,t,n){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pa(e){e.flags|=4}function oC(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!fF(t)){if(t=Ds.current,t!==null&&((mt&4194176)===mt?Vo!==null:(mt&62914560)!==mt&&!(mt&536870912)||t!==Vo))throw r1=x7,RO;e.flags|=8192}}function vU(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?eO():536870912,e.lanes|=t,Ch|=t)}function im(e,t){if(!St)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function DQ(e,t,n){var i=t.pendingProps;switch(zw(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(t),null;case 1:return hn(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ga(Jn),wh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(em(t)?pa(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zs!==null&&(W7(Zs),Zs=null))),hn(t),null;case 26:return n=t.memoizedState,e===null?(pa(t),n!==null?(hn(t),oC(t,n)):(hn(t),t.flags&=-16777217)):n?n!==e.memoizedState?(pa(t),hn(t),oC(t,n)):(hn(t),t.flags&=-16777217):(e.memoizedProps!==i&&pa(t),hn(t),t.flags&=-16777217),null;case 27:mb(t),n=fc.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&pa(t);else{if(!i){if(t.stateNode===null)throw Error(re(166));return hn(t),null}e=zo.current,em(t)?Ox(t):(e=cF(r,i,n),t.stateNode=e,pa(t))}return hn(t),null;case 5:if(mb(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&pa(t);else{if(!i){if(t.stateNode===null)throw Error(re(166));return hn(t),null}if(e=zo.current,em(t))Ox(t);else{switch(r=Nb(fc.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Yi]=t,e[Mr]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(Ri(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&pa(t)}}return hn(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&pa(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(re(166));if(e=fc.current,em(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=lr,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Yi]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||oF(e.nodeValue,n)),e||id(t)}else e=Nb(e).createTextNode(i),e[Yi]=t,t.stateNode=e}return hn(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=em(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(re(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(re(317));r[Yi]=t}else ip(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hn(t),r=!1}else Zs!==null&&(W7(Zs),Zs=null),r=!0;if(!r)return t.flags&256?(Ba(t),t):(Ba(t),null)}if(Ba(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),vU(t,t.updateQueue),hn(t),null;case 4:return wh(),e===null&&f9(t.stateNode.containerInfo),hn(t),null;case 10:return Ga(t.type),hn(t),null;case 19:if(vi(ei),r=t.memoizedState,r===null)return hn(t),null;if(i=(t.flags&128)!==0,s=r.rendering,s===null)if(i)im(r,!1);else{if(Tn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=_b(e),s!==null){for(t.flags|=128,im(r,!1),e=s.updateQueue,t.updateQueue=e,vU(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)GP(n,e),n=n.sibling;return un(ei,ei.current&1|2),t.child}e=e.sibling}r.tail!==null&&Ho()>Mb&&(t.flags|=128,i=!0,im(r,!1),t.lanes=4194304)}else{if(!i)if(e=_b(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,vU(t,e),im(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!St)return hn(t),null}else 2*Ho()-r.renderingStartTime>Mb&&n!==536870912&&(t.flags|=128,i=!0,im(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(e=r.last,e!==null?e.sibling=s:t.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ho(),t.sibling=null,e=ei.current,un(ei,i?e&1|2:e&1),t):(hn(t),null);case 22:case 23:return Ba(t),Hw(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(hn(t),t.subtreeFlags&6&&(t.flags|=8192)):hn(t),n=t.updateQueue,n!==null&&vU(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&vi(Xu),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ga(Jn),hn(t),null;case 25:return null}throw Error(re(156,t.tag))}function NQ(e,t){switch(zw(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ga(Jn),wh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return mb(t),null;case 13:if(Ba(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));ip()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vi(ei),null;case 4:return wh(),null;case 10:return Ga(t.type),null;case 22:case 23:return Ba(t),Hw(),e!==null&&vi(Xu),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ga(Jn),null;case 25:return null;default:return null}}function jP(e,t){switch(zw(t),t.tag){case 3:Ga(Jn),wh();break;case 26:case 27:case 5:mb(t);break;case 4:wh();break;case 13:Ba(t);break;case 19:vi(ei);break;case 10:Ga(t.type);break;case 22:case 23:Ba(t),Hw(),e!==null&&vi(Xu);break;case 24:Ga(Jn)}}var OQ={getCacheForType:function(e){var t=Wi(Jn),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},PQ=typeof WeakMap=="function"?WeakMap:Map,bn=0,Qt=null,et=null,mt=0,Zt=0,Br=null,Aa=!1,hg=!1,a9=!1,rl=0,Tn=0,Nc=0,Yu=0,l9=0,Is=0,Ch=0,f1=null,ko=null,G7=!1,c9=0,Mb=1/0,Rb=null,pc=null,wU=!1,Su=null,h1=0,X7=0,j7=null,g1=0,Y7=null;function es(){if(bn&2&&mt!==0)return mt&-mt;if(We.T!==null){var e=Sh;return e!==0?e:d9()}return rO()}function YP(){Is===0&&(Is=!(mt&536870912)||St?JN():536870912);var e=Ds.current;return e!==null&&(e.flags|=32),Is}function hr(e,t,n){(e===Qt&&Zt===2||e.cancelPendingCommit!==null)&&(Ah(e,0),Ma(e,mt,Is,!1)),tp(e,n),(!(bn&2)||e!==Qt)&&(e===Qt&&(!(bn&2)&&(Yu|=n),Tn===4&&Ma(e,mt,Is,!1)),aa(e))}function WP(e,t,n){if(bn&6)throw Error(re(327));var i=!n&&(t&60)===0&&(t&e.expiredLanes)===0||ep(e,t),r=i?zQ(e,t):h8(e,t,!0),s=i;do{if(r===0){hg&&!i&&Ma(e,t,0,!1);break}else if(r===6)Ma(e,t,0,!Aa);else{if(n=e.current.alternate,s&&!FQ(n)){r=h8(e,t,!1),s=!1;continue}if(r===2){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var a=e;r=f1;var l=a.current.memoizedState.isDehydrated;if(l&&(Ah(a,o).flags|=256),o=h8(a,o,!1),o!==2){if(a9&&!l){a.errorRecoveryDisabledLanes|=s,Yu|=s,r=4;break e}s=ko,ko=r,s!==null&&W7(s)}r=o}if(s=!1,r!==2)continue}}if(r===1){Ah(e,0),Ma(e,t,0,!0);break}e:{switch(i=e,r){case 0:case 1:throw Error(re(345));case 4:if((t&4194176)===t){Ma(i,t,Is,!Aa);break e}break;case 2:ko=null;break;case 3:case 5:break;default:throw Error(re(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(s=c9+300-Ho(),10<s)){if(Ma(i,t,Is,!Aa),k5(i,0)!==0)break e;i.timeoutHandle=lF(aC.bind(null,i,n,ko,Rb,G7,t,Is,Yu,Ch,Aa,2,-0,0),s);break e}aC(i,n,ko,Rb,G7,t,Is,Yu,Ch,Aa,0,-0,0)}}break}while(!0);aa(e)}function W7(e){ko===null?ko=e:ko.push.apply(ko,e)}function aC(e,t,n,i,r,s,o,a,l,c,u,d,f){var h=t.subtreeFlags;if((h&8192||(h&16785408)===16785408)&&(e0={stylesheets:null,count:0,unsuspend:yJ},zP(t),t=vJ(),t!==null)){e.cancelPendingCommit=t(cC.bind(null,e,n,i,r,o,a,l,1,d,f)),Ma(e,s,o,!c);return}cC(e,n,i,r,o,a,l,u,d,f)}function FQ(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ss(s(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ma(e,t,n,i){t&=~l9,t&=~Yu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-Jr(r),o=1<<s;i[s]=-1,r&=~o}n!==0&&tO(e,n,t)}function V5(){return bn&6?!0:(lp(0),!1)}function u9(){if(et!==null){if(Zt===0)var e=et.return;else e=et,za=Od=null,Ww(e),eh=null,Z1=0,e=et;for(;e!==null;)jP(e.alternate,e),e=e.return;et=null}}function Ah(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,iJ(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),u9(),Qt=e,et=n=mc(e.current,null),mt=t,Zt=0,Br=null,Aa=!1,hg=ep(e,t),a9=!1,Ch=Is=l9=Yu=Nc=Tn=0,ko=f1=null,G7=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Jr(i),s=1<<r;t|=e[r],i&=~s}return rl=t,O5(),n}function KP(e,t){qe=null,We.H=Yo,t===i1?(t=Bx(),Zt=3):t===RO?(t=Bx(),Zt=4):Zt=t===EP?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Br=t,et===null&&(Tn=1,xb(e,Es(t,e.current)))}function ZP(){var e=We.H;return We.H=Yo,e===null?Yo:e}function qP(){var e=We.A;return We.A=OQ,e}function K7(){Tn=4,Aa||(mt&4194176)!==mt&&Ds.current!==null||(hg=!0),!(Nc&134217727)&&!(Yu&134217727)||Qt===null||Ma(Qt,mt,Is,!1)}function h8(e,t,n){var i=bn;bn|=2;var r=ZP(),s=qP();(Qt!==e||mt!==t)&&(Rb=null,Ah(e,t)),t=!1;var o=Tn;e:do try{if(Zt!==0&&et!==null){var a=et,l=Br;switch(Zt){case 8:u9(),o=6;break e;case 3:case 2:case 6:Ds.current===null&&(t=!0);var c=Zt;if(Zt=0,Br=null,Ff(e,a,l,c),n&&hg){o=0;break e}break;default:c=Zt,Zt=0,Br=null,Ff(e,a,l,c)}}BQ(),o=Tn;break}catch(u){KP(e,u)}while(!0);return t&&e.shellSuspendCounter++,za=Od=null,bn=i,We.H=r,We.A=s,et===null&&(Qt=null,mt=0,O5()),o}function BQ(){for(;et!==null;)QP(et)}function zQ(e,t){var n=bn;bn|=2;var i=ZP(),r=qP();Qt!==e||mt!==t?(Rb=null,Mb=Ho()+500,Ah(e,t)):hg=ep(e,t);e:do try{if(Zt!==0&&et!==null){t=et;var s=Br;t:switch(Zt){case 1:Zt=0,Br=null,Ff(e,t,s,1);break;case 2:if(Fx(s)){Zt=0,Br=null,lC(t);break}t=function(){Zt===2&&Qt===e&&(Zt=7),aa(e)},s.then(t,t);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:Fx(s)?(Zt=0,Br=null,lC(t)):(Zt=0,Br=null,Ff(e,t,s,7));break;case 5:var o=null;switch(et.tag){case 26:o=et.memoizedState;case 5:case 27:var a=et;if(!o||fF(o)){Zt=0,Br=null;var l=a.sibling;if(l!==null)et=l;else{var c=a.return;c!==null?(et=c,$5(c)):et=null}break t}}Zt=0,Br=null,Ff(e,t,s,5);break;case 6:Zt=0,Br=null,Ff(e,t,s,6);break;case 8:u9(),Tn=6;break e;default:throw Error(re(462))}}HQ();break}catch(u){KP(e,u)}while(!0);return za=Od=null,We.H=i,We.A=r,bn=n,et!==null?0:(Qt=null,mt=0,O5(),Tn)}function HQ(){for(;et!==null&&!cq();)QP(et)}function QP(e){var t=IP(e.alternate,e,rl);e.memoizedProps=e.pendingProps,t===null?$5(e):et=t}function lC(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Jx(n,t,t.pendingProps,t.type,void 0,mt);break;case 11:t=Jx(n,t,t.pendingProps,t.type.render,t.ref,mt);break;case 5:Ww(t);default:jP(n,t),t=et=GP(t,rl),t=IP(n,t,rl)}e.memoizedProps=e.pendingProps,t===null?$5(e):et=t}function Ff(e,t,n,i){za=Od=null,Ww(t),eh=null,Z1=0;var r=t.return;try{if(AQ(e,r,t,n,mt)){Tn=1,xb(e,Es(n,e.current)),et=null;return}}catch(s){if(r!==null)throw et=r,s;Tn=1,xb(e,Es(n,e.current)),et=null;return}t.flags&32768?(St||i===1?e=!0:hg||mt&536870912?e=!1:(Aa=e=!0,(i===2||i===3||i===6)&&(i=Ds.current,i!==null&&i.tag===13&&(i.flags|=16384))),JP(t,e)):$5(t)}function $5(e){var t=e;do{if(t.flags&32768){JP(t,Aa);return}e=t.return;var n=DQ(t.alternate,t,rl);if(n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);Tn===0&&(Tn=5)}function JP(e,t){do{var n=NQ(e.alternate,e);if(n!==null){n.flags&=32767,et=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){et=e;return}et=e=n}while(e!==null);Tn=6,et=null}function cC(e,t,n,i,r,s,o,a,l,c){var u=We.T,d=rn.p;try{rn.p=2,We.T=null,VQ(e,t,n,i,d,r,s,o,a,l,c)}finally{We.T=u,rn.p=d}}function VQ(e,t,n,i,r,s,o,a){do rh();while(Su!==null);if(bn&6)throw Error(re(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=l.lanes|l.childLanes;if(c|=Pw,Eq(e,i,c,s,o,a),e===Qt&&(et=Qt=null,mt=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||wU||(wU=!0,X7=c,j7=n,jQ(pb,function(){return rh(),null})),n=(l.flags&15990)!==0,l.subtreeFlags&15990||n?(n=We.T,We.T=null,s=rn.p,rn.p=2,o=bn,bn|=4,RQ(e,l),PP(l,e),fQ(J7,e.containerInfo),Bb=!!Q7,J7=Q7=null,e.current=l,LP(e,l.alternate,l),uq(),bn=o,rn.p=s,We.T=n):e.current=l,wU?(wU=!1,Su=e,h1=i):eF(e,c),c=e.pendingLanes,c===0&&(pc=null),mq(l.stateNode),aa(e),t!==null)for(r=e.onRecoverableError,l=0;l<t.length;l++)c=t[l],r(c.value,{componentStack:c.stack});return h1&3&&rh(),c=e.pendingLanes,i&4194218&&c&42?e===Y7?g1++:(g1=0,Y7=e):g1=0,lp(0),null}function eF(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,rp(t)))}function rh(){if(Su!==null){var e=Su,t=X7;X7=0;var n=iO(h1),i=We.T,r=rn.p;try{if(rn.p=32>n?32:n,We.T=null,Su===null)var s=!1;else{n=j7,j7=null;var o=Su,a=h1;if(Su=null,h1=0,bn&6)throw Error(re(331));var l=bn;if(bn|=4,VP(o.current),BP(o,o.current,a,n),bn=l,lp(0,!1),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(J0,o)}catch{}s=!0}return s}finally{rn.p=r,We.T=i,eF(e,t)}}return!1}function uC(e,t,n){t=Es(n,t),t=D7(e.stateNode,t,2),e=gc(e,t,2),e!==null&&(tp(e,2),aa(e))}function Xt(e,t,n){if(e.tag===3)uC(e,e,n);else for(;t!==null;){if(t.tag===3){uC(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(pc===null||!pc.has(i))){e=Es(n,e),n=bP(2),i=gc(t,n,2),i!==null&&(yP(n,i,t,e),tp(i,2),aa(i));break}}t=t.return}}function g8(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new PQ;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(a9=!0,r.add(n),e=$Q.bind(null,e,t,n),t.then(e,e))}function $Q(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Qt===e&&(mt&n)===n&&(Tn===4||Tn===3&&(mt&62914560)===mt&&300>Ho()-c9?!(bn&2)&&Ah(e,0):l9|=n,Ch===mt&&(Ch=0)),aa(e)}function tF(e,t){t===0&&(t=eO()),e=kc(e,t),e!==null&&(tp(e,t),aa(e))}function GQ(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),tF(e,n)}function XQ(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(re(314))}i!==null&&i.delete(t),tF(e,n)}function jQ(e,t){return Aw(e,t)}var kb=null,bf=null,Z7=!1,Lb=!1,m8=!1,Wu=0;function aa(e){e!==bf&&e.next===null&&(bf===null?kb=bf=e:bf=bf.next=e),Lb=!0,Z7||(Z7=!0,WQ(YQ))}function lp(e,t){if(!m8&&Lb){m8=!0;do for(var n=!1,i=kb;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var o=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Jr(42|e)+1)-1,s&=r&~(o&~a),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,dC(i,s))}else s=mt,s=k5(i,i===Qt?s:0),!(s&3)||ep(i,s)||(n=!0,dC(i,s));i=i.next}while(n);m8=!1}}function YQ(){Lb=Z7=!1;var e=0;Wu!==0&&(nJ()&&(e=Wu),Wu=0);for(var t=Ho(),n=null,i=kb;i!==null;){var r=i.next,s=nF(i,t);s===0?(i.next=null,n===null?kb=r:n.next=r,r===null&&(bf=n)):(n=i,(e!==0||s&3)&&(Lb=!0)),i=r}lp(e)}function nF(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var o=31-Jr(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=yq(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(t=Qt,n=mt,n=k5(e,e===t?n:0),i=e.callbackNode,n===0||e===t&&Zt===2||e.cancelPendingCommit!==null)return i!==null&&i!==null&&XE(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ep(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&XE(i),iO(n)){case 2:case 8:n=qN;break;case 32:n=pb;break;case 268435456:n=QN;break;default:n=pb}return i=iF.bind(null,e),n=Aw(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&XE(i),e.callbackPriority=2,e.callbackNode=null,2}function iF(e,t){var n=e.callbackNode;if(rh()&&e.callbackNode!==n)return null;var i=mt;return i=k5(e,e===Qt?i:0),i===0?null:(WP(e,i,t),nF(e,Ho()),e.callbackNode!=null&&e.callbackNode===n?iF.bind(null,e):null)}function dC(e,t){if(rh())return null;WP(e,t,!0)}function WQ(e){rJ(function(){bn&6?Aw(ZN,e):e()})}function d9(){return Wu===0&&(Wu=JN()),Wu}function fC(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:y2(""+e)}function hC(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function KQ(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var s=fC((r[Mr]||null).action),o=i.submitter;o&&(t=(t=o[Mr]||null)?fC(t.formAction):o.getAttribute("formAction"),t!==null&&(s=t,o=null));var a=new L5("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Wu!==0){var l=o?hC(r,o):new FormData(r);k7(n,{pending:!0,data:l,method:r.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=o?hC(r,o):new FormData(r),k7(n,{pending:!0,data:l,method:r.method,action:s},s,l))},currentTarget:r}]})}}for(var p8=0;p8<Dx.length;p8++){var U8=Dx[p8],ZQ=U8.toLowerCase(),qQ=U8[0].toUpperCase()+U8.slice(1);mo(ZQ,"on"+qQ)}mo(TO,"onAnimationEnd");mo(IO,"onAnimationIteration");mo(SO,"onAnimationStart");mo("dblclick","onDoubleClick");mo("focusin","onFocus");mo("focusout","onBlur");mo(gQ,"onTransitionRun");mo(mQ,"onTransitionStart");mo(pQ,"onTransitionCancel");mo(xO,"onTransitionEnd");_h("onMouseEnter",["mouseout","mouseover"]);_h("onMouseLeave",["mouseout","mouseover"]);_h("onPointerEnter",["pointerout","pointerover"]);_h("onPointerLeave",["pointerout","pointerover"]);Rd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Q1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Q1));function rF(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){Sb(u)}r.currentTarget=null,s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;s=a,r.currentTarget=c;try{s(r)}catch(u){Sb(u)}r.currentTarget=null,s=l}}}}function at(e,t){var n=t[y7];n===void 0&&(n=t[y7]=new Set);var i=e+"__bubble";n.has(i)||(sF(t,e,2,!1),n.add(i))}function b8(e,t,n){var i=0;t&&(i|=4),sF(n,e,i,t)}var _U="_reactListening"+Math.random().toString(36).slice(2);function f9(e){if(!e[_U]){e[_U]=!0,sO.forEach(function(n){n!=="selectionchange"&&(QQ.has(n)||b8(n,!1,e),b8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_U]||(t[_U]=!0,b8("selectionchange",!1,t))}}function sF(e,t,n,i){switch(UF(t)){case 2:var r=TJ;break;case 8:r=IJ;break;default:r=p9}n=r.bind(null,t,n,e),r=void 0,!_7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function y8(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ku(a),o===null)return;if(l=o.tag,l===5||l===6||l===26||l===27){i=s=o;continue e}a=a.parentNode}}i=i.return}hO(function(){var c=s,u=kw(n),d=[];e:{var f=CO.get(e);if(f!==void 0){var h=L5,m=e;switch(e){case"keypress":if(v2(n)===0)break e;case"keydown":case"keyup":h=Xq;break;case"focusin":m="focus",h=ZE;break;case"focusout":m="blur",h=ZE;break;case"beforeblur":case"afterblur":h=ZE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Lq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Wq;break;case TO:case IO:case SO:h=Oq;break;case xO:h=Zq;break;case"scroll":case"scrollend":h=Rq;break;case"wheel":h=Qq;break;case"copy":case"cut":case"paste":h=Fq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Tx;break;case"toggle":case"beforetoggle":h=eQ}var p=(t&4)!==0,U=!p&&(e==="scroll"||e==="scrollend"),b=p?f!==null?f+"Capture":null:f;p=[];for(var y=c,w;y!==null;){var v=y;if(w=v.stateNode,v=v.tag,v!==5&&v!==26&&v!==27||w===null||b===null||(v=j1(y,b),v!=null&&p.push(J1(y,v,w))),U)break;y=y.return}0<p.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==w7&&(m=n.relatedTarget||n.fromElement)&&(ku(m)||m[dg]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?ku(m):null,m!==null&&(U=ug(m),p=m.tag,m!==U||p!==5&&p!==27&&p!==6)&&(m=null)):(h=null,m=c),h!==m)){if(p=wx,v="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=Tx,v="onPointerLeave",b="onPointerEnter",y="pointer"),U=h==null?f:Rm(h),w=m==null?f:Rm(m),f=new p(v,y+"leave",h,n,u),f.target=U,f.relatedTarget=w,v=null,ku(u)===c&&(p=new p(b,y+"enter",m,n,u),p.target=w,p.relatedTarget=U,v=p),U=v,h&&m)t:{for(p=h,b=m,y=0,w=p;w;w=nf(w))y++;for(w=0,v=b;v;v=nf(v))w++;for(;0<y-w;)p=nf(p),y--;for(;0<w-y;)b=nf(b),w--;for(;y--;){if(p===b||b!==null&&p===b.alternate)break t;p=nf(p),b=nf(b)}p=null}else p=null;h!==null&&gC(d,f,h,p,!1),m!==null&&U!==null&&gC(d,U,m,p,!0)}}e:{if(f=c?Rm(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var I=Cx;else if(xx(f))if(yO)I=uQ;else{I=lQ;var x=aQ}else h=f.nodeName,!h||h.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?c&&Rw(c.elementType)&&(I=Cx):I=cQ;if(I&&(I=I(e,c))){bO(d,I,n,u);break e}x&&x(e,f,c),e==="focusout"&&c&&f.type==="number"&&c.memoizedProps.value!=null&&v7(f,"number",f.value)}switch(x=c?Rm(c):window,e){case"focusin":(xx(x)||x.contentEditable==="true")&&(kf=x,T7=c,n1=null);break;case"focusout":n1=T7=kf=null;break;case"mousedown":I7=!0;break;case"contextmenu":case"mouseup":case"dragend":I7=!1,Lx(d,n,u);break;case"selectionchange":if(hQ)break;case"keydown":case"keyup":Lx(d,n,u)}var _;if(Nw)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Rf?pO(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(mO&&n.locale!=="ko"&&(Rf||T!=="onCompositionStart"?T==="onCompositionEnd"&&Rf&&(_=gO()):(sc=u,Lw="value"in sc?sc.value:sc.textContent,Rf=!0)),x=Db(c,T),0<x.length&&(T=new _x(T,e,null,n,u),d.push({event:T,listeners:x}),_?T.data=_:(_=UO(n),_!==null&&(T.data=_)))),(_=nQ?iQ(e,n):rQ(e,n))&&(T=Db(c,"onBeforeInput"),0<T.length&&(x=new _x("onBeforeInput","beforeinput",null,n,u),d.push({event:x,listeners:T}),x.data=_)),KQ(d,e,c,n,u)}rF(d,t)})}function J1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Db(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=j1(e,n),r!=null&&i.unshift(J1(e,r,s)),r=j1(e,t),r!=null&&i.push(J1(e,r,s))),e=e.return}return i}function nf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gC(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,r?(c=j1(n,s),c!=null&&o.unshift(J1(n,c,l))):r||(c=j1(n,s),c!=null&&o.push(J1(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var JQ=/\r\n?/g,eJ=/\u0000|\uFFFD/g;function mC(e){return(typeof e=="string"?e:""+e).replace(JQ,`
`).replace(eJ,"")}function oF(e,t){return t=mC(t),mC(e)===t}function G5(){}function Bt(e,t,n,i,r,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Th(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Th(e,""+i);break;case"className":mU(e,"class",i);break;case"tabIndex":mU(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":mU(e,n,i);break;case"style":fO(e,i,s);break;case"data":if(t!=="object"){mU(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=y2(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Bt(e,t,"name",r.name,r,null),Bt(e,t,"formEncType",r.formEncType,r,null),Bt(e,t,"formMethod",r.formMethod,r,null),Bt(e,t,"formTarget",r.formTarget,r,null)):(Bt(e,t,"encType",r.encType,r,null),Bt(e,t,"method",r.method,r,null),Bt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=y2(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=G5);break;case"onScroll":i!=null&&at("scroll",e);break;case"onScrollEnd":i!=null&&at("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(re(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(re(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=y2(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":at("beforetoggle",e),at("toggle",e),b2(e,"popover",i);break;case"xlinkActuate":ha(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ha(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ha(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ha(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ha(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ha(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ha(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ha(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ha(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":b2(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Aq.get(n)||n,b2(e,n,i))}}function q7(e,t,n,i,r,s){switch(n){case"style":fO(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(re(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(re(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Th(e,i):(typeof i=="number"||typeof i=="bigint")&&Th(e,""+i);break;case"onScroll":i!=null&&at("scroll",e);break;case"onScrollEnd":i!=null&&at("scrollend",e);break;case"onClick":i!=null&&(e.onclick=G5);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oO.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),s=e[Mr]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):b2(e,n,i)}}}function Ri(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",e),at("load",e);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(o!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(re(137,t));default:Bt(e,t,s,o,n,null)}}r&&Bt(e,t,"srcSet",n.srcSet,n,null),i&&Bt(e,t,"src",n.src,n,null);return;case"input":at("invalid",e);var a=s=o=r=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":r=u;break;case"type":o=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":s=u;break;case"defaultValue":a=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(re(137,t));break;default:Bt(e,t,i,u,n,null)}}cO(e,s,a,l,c,o,r,!1),Ub(e);return;case"select":at("invalid",e),i=o=s=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":s=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:Bt(e,t,r,a,n,null)}t=s,n=o,e.multiple=!!i,t!=null?Qf(e,!!i,t,!1):n!=null&&Qf(e,!!i,n,!0);return;case"textarea":at("invalid",e),s=r=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":r=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(re(91));break;default:Bt(e,t,o,a,n,null)}dO(e,i,r,s),Ub(e);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Bt(e,t,l,i,n,null)}return;case"dialog":at("cancel",e),at("close",e);break;case"iframe":case"object":at("load",e);break;case"video":case"audio":for(i=0;i<Q1.length;i++)at(Q1[i],e);break;case"image":at("error",e),at("load",e);break;case"details":at("toggle",e);break;case"embed":case"source":case"link":at("error",e),at("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(re(137,t));default:Bt(e,t,c,i,n,null)}return;default:if(Rw(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&q7(e,t,u,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Bt(e,t,a,i,n,null))}function tJ(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,a=null,l=null,c=null,u=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":l=d;default:i.hasOwnProperty(h)||Bt(e,t,h,null,i,d)}}for(var f in i){var h=i[f];if(d=n[f],i.hasOwnProperty(f)&&(h!=null||d!=null))switch(f){case"type":s=h;break;case"name":r=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(re(137,t));break;default:h!==d&&Bt(e,t,f,h,i,d)}}E7(e,o,a,l,c,u,s,r);return;case"select":h=o=a=f=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":h=l;default:i.hasOwnProperty(s)||Bt(e,t,s,null,i,l)}for(r in i)if(s=i[r],l=n[r],i.hasOwnProperty(r)&&(s!=null||l!=null))switch(r){case"value":f=s;break;case"defaultValue":a=s;break;case"multiple":o=s;default:s!==l&&Bt(e,t,r,s,i,l)}t=a,n=o,i=h,f!=null?Qf(e,!!n,f,!1):!!i!=!!n&&(t!=null?Qf(e,!!n,t,!0):Qf(e,!!n,n?[]:"",!1));return;case"textarea":h=f=null;for(a in n)if(r=n[a],n.hasOwnProperty(a)&&r!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Bt(e,t,a,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(r!=null||s!=null))switch(o){case"value":f=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(re(91));break;default:r!==s&&Bt(e,t,o,r,i,s)}uO(e,f,h);return;case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&f!=null&&!i.hasOwnProperty(m))switch(m){case"selected":e.selected=!1;break;default:Bt(e,t,m,null,i,f)}for(l in i)if(f=i[l],h=n[l],i.hasOwnProperty(l)&&f!==h&&(f!=null||h!=null))switch(l){case"selected":e.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Bt(e,t,l,f,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var p in n)f=n[p],n.hasOwnProperty(p)&&f!=null&&!i.hasOwnProperty(p)&&Bt(e,t,p,null,i,f);for(c in i)if(f=i[c],h=n[c],i.hasOwnProperty(c)&&f!==h&&(f!=null||h!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(re(137,t));break;default:Bt(e,t,c,f,i,h)}return;default:if(Rw(t)){for(var U in n)f=n[U],n.hasOwnProperty(U)&&f!==void 0&&!i.hasOwnProperty(U)&&q7(e,t,U,void 0,i,f);for(u in i)f=i[u],h=n[u],!i.hasOwnProperty(u)||f===h||f===void 0&&h===void 0||q7(e,t,u,f,i,h);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&f!=null&&!i.hasOwnProperty(b)&&Bt(e,t,b,null,i,f);for(d in i)f=i[d],h=n[d],!i.hasOwnProperty(d)||f===h||f==null&&h==null||Bt(e,t,d,f,i,h)}var Q7=null,J7=null;function Nb(e){return e.nodeType===9?e:e.ownerDocument}function pC(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aF(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function e4(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var E8=null;function nJ(){var e=window.event;return e&&e.type==="popstate"?e===E8?!1:(E8=e,!0):(E8=null,!1)}var lF=typeof setTimeout=="function"?setTimeout:void 0,iJ=typeof clearTimeout=="function"?clearTimeout:void 0,UC=typeof Promise=="function"?Promise:void 0,rJ=typeof queueMicrotask=="function"?queueMicrotask:typeof UC<"u"?function(e){return UC.resolve(null).then(e).catch(sJ)}:lF;function sJ(e){setTimeout(function(){throw e})}function v8(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),r0(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);r0(t)}function t4(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":t4(n),Mw(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function oJ(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[X1])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(r.href==null?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=no(e.nextSibling),e===null)break}return null}function aJ(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=no(e.nextSibling),e===null))return null;return e}function no(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}function bC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function cF(e,t,n){switch(t=Nb(n),e){case"html":if(e=t.documentElement,!e)throw Error(re(452));return e;case"head":if(e=t.head,!e)throw Error(re(453));return e;case"body":if(e=t.body,!e)throw Error(re(454));return e;default:throw Error(re(451))}}var Ns=new Map,yC=new Set;function Ob(e){return typeof e.getRootNode=="function"?e.getRootNode():e.ownerDocument}var vl=rn.d;rn.d={f:lJ,r:cJ,D:uJ,C:dJ,L:fJ,m:hJ,X:mJ,S:gJ,M:pJ};function lJ(){var e=vl.f(),t=V5();return e||t}function cJ(e){var t=fg(e);t!==null&&t.tag===5&&t.type==="form"?cP(t):vl.r(e)}var gg=typeof document>"u"?null:document;function uF(e,t,n){var i=gg;if(i&&typeof t=="string"&&t){var r=ys(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),yC.has(r)||(yC.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),Ri(t,"link",e),pi(t),i.head.appendChild(t)))}}function uJ(e){vl.D(e),uF("dns-prefetch",e,null)}function dJ(e,t){vl.C(e,t),uF("preconnect",e,t)}function fJ(e,t,n){vl.L(e,t,n);var i=gg;if(i&&e&&t){var r='link[rel="preload"][as="'+ys(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ys(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ys(n.imageSizes)+'"]')):r+='[href="'+ys(e)+'"]';var s=r;switch(t){case"style":s=Mh(e);break;case"script":s=mg(e)}Ns.has(s)||(e=sn({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ns.set(s,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(cp(s))||t==="script"&&i.querySelector(up(s))||(t=i.createElement("link"),Ri(t,"link",e),pi(t),i.head.appendChild(t)))}}function hJ(e,t){vl.m(e,t);var n=gg;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ys(i)+'"][href="'+ys(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=mg(e)}if(!Ns.has(s)&&(e=sn({rel:"modulepreload",href:e},t),Ns.set(s,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(up(s)))return}i=n.createElement("link"),Ri(i,"link",e),pi(i),n.head.appendChild(i)}}}function gJ(e,t,n){vl.S(e,t,n);var i=gg;if(i&&e){var r=qf(i).hoistableStyles,s=Mh(e);t=t||"default";var o=r.get(s);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(cp(s)))a.loading=5;else{e=sn({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ns.get(s))&&h9(e,n);var l=o=i.createElement("link");pi(l),Ri(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,x2(o,t,i)}o={type:"stylesheet",instance:o,count:1,state:a},r.set(s,o)}}}function mJ(e,t){vl.X(e,t);var n=gg;if(n&&e){var i=qf(n).hoistableScripts,r=mg(e),s=i.get(r);s||(s=n.querySelector(up(r)),s||(e=sn({src:e,async:!0},t),(t=Ns.get(r))&&g9(e,t),s=n.createElement("script"),pi(s),Ri(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function pJ(e,t){vl.M(e,t);var n=gg;if(n&&e){var i=qf(n).hoistableScripts,r=mg(e),s=i.get(r);s||(s=n.querySelector(up(r)),s||(e=sn({src:e,async:!0,type:"module"},t),(t=Ns.get(r))&&g9(e,t),s=n.createElement("script"),pi(s),Ri(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function EC(e,t,n,i){var r=(r=fc.current)?Ob(r):null;if(!r)throw Error(re(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Mh(n.href),n=qf(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Mh(n.href);var s=qf(r).hoistableStyles,o=s.get(e);if(o||(r=r.ownerDocument||r,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,o),(s=r.querySelector(cp(e)))&&!s._p&&(o.instance=s,o.state.loading=5),Ns.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ns.set(e,n),s||UJ(r,e,n,o.state))),t&&i===null)throw Error(re(528,""));return o}if(t&&i!==null)throw Error(re(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=mg(n),n=qf(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(re(444,e))}}function Mh(e){return'href="'+ys(e)+'"'}function cp(e){return'link[rel="stylesheet"]['+e+"]"}function dF(e){return sn({},e,{"data-precedence":e.precedence,precedence:null})}function UJ(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ri(t,"link",n),pi(t),e.head.appendChild(t))}function mg(e){return'[src="'+ys(e)+'"]'}function up(e){return"script[async]"+e}function vC(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ys(n.href)+'"]');if(i)return t.instance=i,pi(i),i;var r=sn({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),pi(i),Ri(i,"style",r),x2(i,n.precedence,e),t.instance=i;case"stylesheet":r=Mh(n.href);var s=e.querySelector(cp(r));if(s)return t.state.loading|=4,t.instance=s,pi(s),s;i=dF(n),(r=Ns.get(r))&&h9(i,r),s=(e.ownerDocument||e).createElement("link"),pi(s);var o=s;return o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Ri(s,"link",i),t.state.loading|=4,x2(s,n.precedence,e),t.instance=s;case"script":return s=mg(n.src),(r=e.querySelector(up(s)))?(t.instance=r,pi(r),r):(i=n,(r=Ns.get(s))&&(i=sn({},n),g9(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),pi(r),Ri(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(re(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,x2(i,n.precedence,e));return t.instance}function x2(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===t)s=a;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function h9(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function g9(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var C2=null;function wC(e,t,n){if(C2===null){var i=new Map,r=C2=new Map;r.set(n,i)}else r=C2,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[X1]||s[Yi]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(t)||"";o=e+o;var a=i.get(o);a?a.push(s):i.set(o,[s])}}return i}function _C(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function bJ(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fF(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var e0=null;function yJ(){}function EJ(e,t,n){if(e0===null)throw Error(re(475));var i=e0;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=Mh(n.href),s=e.querySelector(cp(r));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Pb.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,pi(s);return}s=e.ownerDocument||e,n=dF(n),(r=Ns.get(r))&&h9(n,r),s=s.createElement("link"),pi(s);var o=s;o._p=new Promise(function(a,l){o.onload=a,o.onerror=l}),Ri(s,"link",n),t.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Pb.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function vJ(){if(e0===null)throw Error(re(475));var e=e0;return e.stylesheets&&e.count===0&&n4(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&n4(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Pb(){if(this.count--,this.count===0){if(this.stylesheets)n4(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fb=null;function n4(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fb=new Map,t.forEach(wJ,e),Fb=null,Pb.call(e))}function wJ(e,t){if(!(t.state.loading&4)){var n=Fb.get(e);if(n)var i=n.get(null);else{n=new Map,Fb.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var o=r[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}r=t.instance,o=r.getAttribute("data-precedence"),s=n.get(o)||i,s===i&&n.set(null,r),n.set(o,r),this.count++,i=Pb.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var t0={$$typeof:Oa,Provider:null,Consumer:null,_currentValue:$u,_currentValue2:$u,_threadCount:0};function _J(e,t,n,i,r,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jE(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jE(0),this.hiddenUpdates=jE(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function hF(e,t,n,i,r,s,o,a,l,c,u,d){return e=new _J(e,t,n,o,a,l,c,d),t=1,s===!0&&(t|=24),s=Ts(3,null,null,t),e.current=s,s.stateNode=e,t=Vw(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},i9(s),e}function gF(e){return e?(e=Nf,e):Nf}function mF(e,t,n,i,r,s){r=gF(r),i.context===null?i.context=r:i.pendingContext=r,i=hc(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=gc(e,i,t),n!==null&&(hr(n,e,t),l1(n,e,t))}function TC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function m9(e,t){TC(e,t),(e=e.alternate)&&TC(e,t)}function pF(e){if(e.tag===13){var t=kc(e,67108864);t!==null&&hr(t,e,67108864),m9(e,67108864)}}var Bb=!0;function TJ(e,t,n,i){var r=We.T;We.T=null;var s=rn.p;try{rn.p=2,p9(e,t,n,i)}finally{rn.p=s,We.T=r}}function IJ(e,t,n,i){var r=We.T;We.T=null;var s=rn.p;try{rn.p=8,p9(e,t,n,i)}finally{rn.p=s,We.T=r}}function p9(e,t,n,i){if(Bb){var r=i4(i);if(r===null)y8(e,t,i,zb,n),IC(e,i);else if(xJ(r,e,t,n,i))i.stopPropagation();else if(IC(e,i),t&4&&-1<SJ.indexOf(e)){for(;r!==null;){var s=fg(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Eu(s.pendingLanes);if(o!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-Jr(o);a.entanglements[1]|=l,o&=~l}aa(s),!(bn&6)&&(Mb=Ho()+500,lp(0))}}break;case 13:a=kc(s,2),a!==null&&hr(a,s,2),V5(),m9(s,2)}if(s=i4(i),s===null&&y8(e,t,i,zb,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else y8(e,t,i,null,n)}}function i4(e){return e=kw(e),U9(e)}var zb=null;function U9(e){if(zb=null,e=ku(e),e!==null){var t=ug(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=WN(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return zb=e,null}function UF(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dq()){case ZN:return 2;case qN:return 8;case pb:case fq:return 32;case QN:return 268435456;default:return 32}default:return 32}}var r4=!1,Uc=null,bc=null,yc=null,n0=new Map,i0=new Map,ec=[],SJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IC(e,t){switch(e){case"focusin":case"focusout":Uc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":n0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":i0.delete(t.pointerId)}}function rm(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=fg(t),t!==null&&pF(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function xJ(e,t,n,i,r){switch(t){case"focusin":return Uc=rm(Uc,e,t,n,i,r),!0;case"dragenter":return bc=rm(bc,e,t,n,i,r),!0;case"mouseover":return yc=rm(yc,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return n0.set(s,rm(n0.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,i0.set(s,rm(i0.get(s)||null,e,t,n,i,r)),!0}return!1}function bF(e){var t=ku(e.target);if(t!==null){var n=ug(t);if(n!==null){if(t=n.tag,t===13){if(t=WN(n),t!==null){e.blockedOn=t,vq(e.priority,function(){if(n.tag===13){var i=es(),r=kc(n,i);r!==null&&hr(r,n,i),m9(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function A2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=i4(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);w7=i,n.target.dispatchEvent(i),w7=null}else return t=fg(n),t!==null&&pF(t),e.blockedOn=n,!1;t.shift()}return!0}function SC(e,t,n){A2(e)&&n.delete(t)}function CJ(){r4=!1,Uc!==null&&A2(Uc)&&(Uc=null),bc!==null&&A2(bc)&&(bc=null),yc!==null&&A2(yc)&&(yc=null),n0.forEach(SC),i0.forEach(SC)}function TU(e,t){e.blockedOn===t&&(e.blockedOn=null,r4||(r4=!0,ri.unstable_scheduleCallback(ri.unstable_NormalPriority,CJ)))}var IU=null;function xC(e){IU!==e&&(IU=e,ri.unstable_scheduleCallback(ri.unstable_NormalPriority,function(){IU===e&&(IU=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(U9(i||n)===null)continue;break}var s=fg(n);s!==null&&(e.splice(t,3),t-=3,k7(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function r0(e){function t(l){return TU(l,e)}Uc!==null&&TU(Uc,e),bc!==null&&TU(bc,e),yc!==null&&TU(yc,e),n0.forEach(t),i0.forEach(t);for(var n=0;n<ec.length;n++){var i=ec[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<ec.length&&(n=ec[0],n.blockedOn===null);)bF(n),n.blockedOn===null&&ec.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],o=r[Mr]||null;if(typeof s=="function")o||xC(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(r=s,o=s[Mr]||null)a=o.formAction;else if(U9(r)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),xC(n)}}}function b9(e){this._internalRoot=e}X5.prototype.render=b9.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));var n=t.current,i=es();mF(n,i,e,t,null,null)};X5.prototype.unmount=b9.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e.tag===0&&rh(),mF(e.current,2,null,e,null,null),V5(),t[dg]=null}};function X5(e){this._internalRoot=e}X5.prototype.unstable_scheduleHydration=function(e){if(e){var t=rO();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ec.length&&t!==0&&t<ec[n].priority;n++);ec.splice(n,0,e),n===0&&bF(e)}};var CC=$N.version;if(CC!=="19.0.0")throw Error(re(527,CC,"19.0.0"));rn.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=lq(t),e=e!==null?KN(e):null,e=e===null?null:e.stateNode,e};var AJ={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:We,findFiberByHostInstance:ku,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var SU=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!SU.isDisabled&&SU.supportsFiber)try{J0=SU.inject(AJ),Qr=SU}catch{}}M5.createRoot=function(e,t){if(!GN(e))throw Error(re(299));var n=!1,i="",r=mP,s=pP,o=UP,a=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=hF(e,1,!1,null,null,n,i,r,s,o,a,null),e[dg]=t.current,f9(e.nodeType===8?e.parentNode:e),new b9(t)};M5.hydrateRoot=function(e,t,n){if(!GN(e))throw Error(re(299));var i=!1,r="",s=mP,o=pP,a=UP,l=null,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(c=n.formState)),t=hF(e,1,!0,t,n??null,i,r,s,o,a,l,c),t.context=gF(null),n=t.current,i=es(),r=hc(i),r.callback=null,gc(n,r,i),t.current.lanes=i,tp(t,i),aa(t),e[dg]=t.current,f9(e),new X5(t)};M5.version="19.0.0";function yF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yF)}catch(e){console.error(e)}}yF(),PN.exports=M5;var MJ=PN.exports;const RJ="modulepreload",kJ=function(e,t){return new URL(e,t).href},AC={},Ee=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");r=Promise.all(n.map(o=>{if(o=kJ(o,i),o in AC)return;AC[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":RJ,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function LJ(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=e;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await Ee(()=>import("./workbox-window.prod.es5-B9K5rw8f.js"),__vite__mapDeps([]),import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:t}).then(d=>{s?s("./sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const Pt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Vt=globalThis,Pd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ku="9.0.1";function j5(){return Y5(Vt),Vt}function Y5(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Ku,t[Ku]=t[Ku]||{}}function W5(e,t,n=Vt){const i=n.__SENTRY__=n.__SENTRY__||{},r=i[Ku]=i[Ku]||{};return r[e]||(r[e]=t())}const DJ="Sentry Logger ",Hb=["debug","info","warn","error","log","assert","trace"],Vb={};function pg(e){if(!("console"in Vt))return e();const t=Vt.console,n={},i=Object.keys(Vb);i.forEach(r=>{const s=Vb[r];n[r]=t[r],t[r]=s});try{return e()}finally{i.forEach(r=>{t[r]=n[r]})}}function NJ(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Pd?Hb.forEach(n=>{t[n]=(...i)=>{e&&pg(()=>{Vt.console[n](`${DJ}[${n}]:`,...i)})}}):Hb.forEach(n=>{t[n]=()=>{}}),t}const $e=W5("logger",NJ),EF=50,ld="?",MC=/\(error: (.*)\)/,RC=/captureMessage|captureException/;function vF(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0,r=0)=>{const s=[],o=n.split(`
`);for(let a=i;a<o.length;a++){const l=o[a];if(l.length>1024)continue;const c=MC.test(l)?l.replace(MC,"$1"):l;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=EF+r)break}}return PJ(s.slice(r))}}function OJ(e){return Array.isArray(e)?vF(...e):e}function PJ(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(xU(t).function||"")&&t.pop(),t.reverse(),RC.test(xU(t).function||"")&&(t.pop(),RC.test(xU(t).function||"")&&t.pop()),t.slice(0,EF).map(n=>({...n,filename:n.filename||xU(t).filename,function:n.function||ld}))}function xU(e){return e[e.length-1]||{}}const w8="<anonymous>";function Oc(e){try{return!e||typeof e!="function"?w8:e.name||w8}catch{return w8}}function kC(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(i=>{i.stacktrace.frames&&n.push(...i.stacktrace.frames)}),n}catch{return}}}const M2={},LC={};function Fd(e,t){M2[e]=M2[e]||[],M2[e].push(t)}function Bd(e,t){if(!LC[e]){LC[e]=!0;try{t()}catch(n){Pd&&$e.error(`Error while instrumenting ${e}`,n)}}}function io(e,t){const n=e&&M2[e];if(n)for(const i of n)try{i(t)}catch(r){Pd&&$e.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Oc(i)}
Error:`,r)}}let _8=null;function FJ(e){const t="error";Fd(t,e),Bd(t,BJ)}function BJ(){_8=Vt.onerror,Vt.onerror=function(e,t,n,i,r){return io("error",{column:i,error:r,line:n,msg:e,url:t}),_8?_8.apply(this,arguments):!1},Vt.onerror.__SENTRY_INSTRUMENTED__=!0}let T8=null;function zJ(e){const t="unhandledrejection";Fd(t,e),Bd(t,HJ)}function HJ(){T8=Vt.onunhandledrejection,Vt.onunhandledrejection=function(e){return io("unhandledrejection",e),T8?T8.apply(this,arguments):!0},Vt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const wF=Object.prototype.toString;function y9(e){switch(wF.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return cd(e,Error)}}function Ug(e,t){return wF.call(e)===`[object ${t}]`}function _F(e){return Ug(e,"ErrorEvent")}function DC(e){return Ug(e,"DOMError")}function VJ(e){return Ug(e,"DOMException")}function Xa(e){return Ug(e,"String")}function E9(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function v9(e){return e===null||E9(e)||typeof e!="object"&&typeof e!="function"}function Rh(e){return Ug(e,"Object")}function K5(e){return typeof Event<"u"&&cd(e,Event)}function $J(e){return typeof Element<"u"&&cd(e,Element)}function GJ(e){return Ug(e,"RegExp")}function Z5(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function XJ(e){return Rh(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function cd(e,t){try{return e instanceof t}catch{return!1}}function TF(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const w9=Vt,jJ=80;function IF(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,r=[];let s=0,o=0;const a=" > ",l=a.length;let c;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||jJ;for(;n&&s++<i&&(c=YJ(n,u),!(c==="html"||s>1&&o+r.length*l+c.length>=d));)r.push(c),o+=c.length,n=n.parentNode;return r.reverse().join(a)}catch{return"<unknown>"}}function YJ(e,t){const n=e,i=[];if(!(n!=null&&n.tagName))return"";if(w9.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}i.push(n.tagName.toLowerCase());const r=t!=null&&t.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(r!=null&&r.length)r.forEach(o=>{i.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&i.push(`#${n.id}`);const o=n.className;if(o&&Xa(o)){const a=o.split(/\s+/);for(const l of a)i.push(`.${l}`)}}const s=["aria-label","type","name","title","alt"];for(const o of s){const a=n.getAttribute(o);a&&i.push(`[${o}="${a}"]`)}return i.join("")}function _9(){try{return w9.document.location.href}catch{return""}}function WJ(e){if(!w9.HTMLElement)return null;let t=e;const n=5;for(let i=0;i<n;i++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function sh(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function $b(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const r=e[i];try{TF(r)?n.push("[VueViewModel]"):n.push(String(r))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function KJ(e,t,n=!1){return Xa(e)?GJ(t)?t.test(e):Xa(t)?n?e===t:e.includes(t):!1:!1}function q5(e,t=[],n=!1){return t.some(i=>KJ(e,i,n))}function jr(e,t,n){if(!(t in e))return;const i=e[t],r=n(i);typeof r=="function"&&SF(r,i);try{e[t]=r}catch{Pd&&$e.log(`Failed to replace method "${t}" in object`,e)}}function ud(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Pd&&$e.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function SF(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ud(e,"__sentry_original__",t)}catch{}}function T9(e){return e.__sentry_original__}function xF(e){if(y9(e))return{message:e.message,name:e.name,stack:e.stack,...OC(e)};if(K5(e)){const t={type:e.type,target:NC(e.target),currentTarget:NC(e.currentTarget),...OC(e)};return typeof CustomEvent<"u"&&cd(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function NC(e){try{return $J(e)?IF(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function OC(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function ZJ(e,t=40){const n=Object.keys(xF(e));n.sort();const i=n[0];if(!i)return"[object has no keys]";if(i.length>=t)return sh(i,t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:sh(s,t)}return""}function Yr(e){return s4(e,new Map)}function s4(e,t){if(qJ(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const r of Object.getOwnPropertyNames(e))typeof e[r]<"u"&&(i[r]=s4(e[r],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(r=>{i.push(s4(r,t))}),i}return e}function qJ(e){if(!Rh(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const CF=1e3;function dp(){return Date.now()/CF}function QJ(){const{performance:e}=Vt;if(!(e!=null&&e.now))return dp;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/CF}const ja=QJ();function xs(){const e=Vt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return t.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function AF(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function jl(e){const{message:t,event_id:n}=e;if(t)return t;const i=AF(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function o4(e,t,n){const i=e.exception=e.exception||{},r=i.values=i.values||[],s=r[0]=r[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function dd(e,t){const n=AF(e);if(!n)return;const i={type:"generic",handled:!0},r=n.mechanism;if(n.mechanism={...i,...r,...t},t&&"data"in t){const s={...r==null?void 0:r.data,...t.data};n.mechanism.data=s}}function PC(e){if(JJ(e))return!0;try{ud(e,"__sentry_captured__",!0)}catch{}return!1}function JJ(e){try{return e.__sentry_captured__}catch{}}var Ea;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(Ea||(Ea={}));function fd(e){return new Pc(t=>{t(e)})}function Gb(e){return new Pc((t,n)=>{n(e)})}class Pc{constructor(t){this._state=Ea.PENDING,this._handlers=[],this._runExecutor(t)}then(t,n){return new Pc((i,r)=>{this._handlers.push([!1,s=>{if(!t)i(s);else try{i(t(s))}catch(o){r(o)}},s=>{if(!n)r(s);else try{i(n(s))}catch(o){r(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Pc((n,i)=>{let r,s;return this.then(o=>{s=!1,r=o,t&&t()},o=>{s=!0,r=o,t&&t()}).then(()=>{if(s){i(r);return}n(r)})})}_executeHandlers(){if(this._state===Ea.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ea.RESOLVED&&n[1](this._value),this._state===Ea.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,o)=>{if(this._state===Ea.PENDING){if(Z5(o)){o.then(i,r);return}this._state=s,this._value=o,this._executeHandlers()}},i=s=>{n(Ea.RESOLVED,s)},r=s=>{n(Ea.REJECTED,s)};try{t(i,r)}catch(s){r(s)}}}function eee(e){const t=ja(),n={sid:xs(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>nee(n)};return e&&kh(n,e),n}function kh(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ja(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:xs()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function tee(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),kh(e,n)}function nee(e){return Yr({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function FC(){return xs()}function MF(){return xs().substring(16)}function fp(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const i={...e};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=fp(i[r],t[r],n-1));return i}const a4="_sentrySpan";function BC(e,t){t?ud(e,a4,t):delete e[a4]}function zC(e){return e[a4]}const iee=100;class Wo{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:FC(),sampleRand:Math.random()}}clone(){const t=new Wo;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,BC(t,zC(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&kh(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,i=n instanceof Wo?n.getScopeData():Rh(n)?t:void 0,{tags:r,extra:s,user:o,contexts:a,level:l,fingerprint:c=[],propagationContext:u}=i||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,BC(this,void 0),this._attachments=[],this.setPropagationContext({traceId:FC(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var s;const i=typeof n=="number"?n:iee;if(i<=0)return this;const r={timestamp:dp(),...t};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:zC(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=fp(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const i=(n==null?void 0:n.event_id)||xs();if(!this._client)return $e.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:r,...n,event_id:i},this),i}captureMessage(t,n,i){const r=(i==null?void 0:i.event_id)||xs();if(!this._client)return $e.warn("No client configured on scope - will not capture message!"),r;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...i,event_id:r},this),r}captureEvent(t,n){const i=(n==null?void 0:n.event_id)||xs();return this._client?(this._client.captureEvent(t,{...n,event_id:i},this),i):($e.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function ree(){return W5("defaultCurrentScope",()=>new Wo)}function see(){return W5("defaultIsolationScope",()=>new Wo)}class oee{constructor(t,n){let i;t?i=t:i=new Wo;let r;n?r=n:r=new Wo,this._stack=[{scope:i}],this._isolationScope=r}withScope(t){const n=this._pushScope();let i;try{i=t(n)}catch(r){throw this._popScope(),r}return Z5(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Lh(){const e=j5(),t=Y5(e);return t.stack=t.stack||new oee(ree(),see())}function aee(e){return Lh().withScope(e)}function lee(e,t){const n=Lh();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function HC(e){return Lh().withScope(()=>e(Lh().getIsolationScope()))}function cee(){return{withIsolationScope:HC,withScope:aee,withSetScope:lee,withSetIsolationScope:(e,t)=>HC(t),getCurrentScope:()=>Lh().getScope(),getIsolationScope:()=>Lh().getIsolationScope()}}function I9(e){const t=Y5(e);return t.acs?t.acs:cee()}function wl(){const e=j5();return I9(e).getCurrentScope()}function hp(){const e=j5();return I9(e).getIsolationScope()}function uee(){return W5("globalScope",()=>new Wo)}function S9(...e){const t=j5(),n=I9(t);if(e.length===2){const[i,r]=e;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(e[0])}function Ji(){return wl().getClient()}function dee(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:i,propagationSpanId:r}=t;return Yr({trace_id:n,span_id:r||MF(),parent_span_id:i})}const fee="sentry.source",hee="sentry.sample_rate",gee="sentry.op",mee="sentry.origin",RF="sentry.profile_id",kF="sentry.exclusive_time",pee=0,Uee=1,bee="_sentryScope",yee="_sentryIsolationScope";function LF(e){return{scope:e[bee],isolationScope:e[yee]}}function Eee(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const vee="sentry-",wee=/^sentry-/;function _ee(e){const t=Tee(e);if(!t)return;const n=Object.entries(t).reduce((i,[r,s])=>{if(r.match(wee)){const o=r.slice(vee.length);i[o]=s}return i},{});if(Object.keys(n).length>0)return n}function Tee(e){if(!(!e||!Xa(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const i=VC(n);return Object.entries(i).forEach(([r,s])=>{t[r]=s}),t},{}):VC(e)}function VC(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(n&&i&&(t[n]=i),t),{})}const Iee=1;let $C=!1;function See(e){const{spanId:t,traceId:n,isRemote:i}=e.spanContext(),r=i?t:x9(e).parent_span_id,s=LF(e).scope,o=i?(s==null?void 0:s.getPropagationContext().propagationSpanId)||MF():t;return Yr({parent_span_id:r,span_id:o,trace_id:n})}function GC(e){return typeof e=="number"?XC(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?XC(e.getTime()):ja()}function XC(e){return e>9999999999?e/1e3:e}function x9(e){if(Cee(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(xee(e)){const{attributes:i,startTime:r,name:s,endTime:o,parentSpanId:a,status:l}=e;return Yr({span_id:t,trace_id:n,data:i,description:s,parent_span_id:a,start_timestamp:GC(r),timestamp:GC(o)||void 0,status:Mee(l),op:i[gee],origin:i[mee]})}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function xee(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Cee(e){return typeof e.getSpanJSON=="function"}function Aee(e){const{traceFlags:t}=e.spanContext();return t===Iee}function Mee(e){if(!(!e||e.code===pee))return e.code===Uee?"ok":e.message||"unknown_error"}const Ree="_sentryRootSpan";function DF(e){return e[Ree]||e}function jC(){$C||(pg(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),$C=!0)}function kee(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=Ji())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const C9="production",Lee="_frozenDsc";function NF(e,t){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},r=Yr({environment:n.environment||C9,release:n.release,public_key:i,trace_id:e});return t.emit("createDsc",r),r}function Dee(e,t){const n=t.getPropagationContext();return n.dsc||NF(n.traceId,e)}function Nee(e){var m;const t=Ji();if(!t)return{};const n=DF(e),i=x9(n),r=i.data,s=n.spanContext().traceState,o=(s==null?void 0:s.get("sentry.sample_rate"))??r[hee];function a(p){return(typeof o=="number"||typeof o=="string")&&(p.sample_rate=`${o}`),p}const l=n[Lee];if(l)return a(l);const c=s==null?void 0:s.get("sentry.dsc"),u=c&&_ee(c);if(u)return a(u);const d=NF(e.spanContext().traceId,t),f=r[fee],h=i.description;return f!=="url"&&h&&(d.transaction=h),kee()&&(d.sampled=String(Aee(n)),d.sample_rand=(s==null?void 0:s.get("sentry.sample_rand"))??((m=LF(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(d),t.emit("createDsc",d,n),d}const Oee=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Pee(e){return e==="http"||e==="https"}function A9(e,t=!1){const{host:n,path:i,pass:r,port:s,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&r?`:${r}`:""}@${n}${s?`:${s}`:""}/${i&&`${i}/`}${o}`}function Fee(e){const t=Oee.exec(e);if(!t){pg(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,i,r="",s="",o="",a=""]=t.slice(1);let l="",c=a;const u=c.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),c=u.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return OF({host:s,pass:r,path:l,projectId:c,port:o,protocol:n,publicKey:i})}function OF(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Bee(e){if(!Pd)return!0;const{port:t,projectId:n,protocol:i}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:($e.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Pee(i)?t&&isNaN(parseInt(t,10))?($e.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:($e.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):($e.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function zee(e){const t=typeof e=="string"?Fee(e):OF(e);if(!(!t||!Bee(t)))return t}function va(e,t=100,n=1/0){try{return l4("",e,t,n)}catch(i){return{ERROR:`**non-serializable** (${i})`}}}function PF(e,t=3,n=100*1024){const i=va(e,t);return Gee(i)>n?PF(e,t-1,n):i}function l4(e,t,n=1/0,i=1/0,r=Xee()){const[s,o]=r;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Hee(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(l===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const c=t;if(c&&typeof c.toJSON=="function")try{const h=c.toJSON();return l4("",h,l-1,i,r)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=xF(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=i){u[h]="[MaxProperties ~]";break}const m=f[h];u[h]=l4(h,m,l-1,i,r),d++}return o(t),u}function Hee(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(TF(t))return"[VueViewModel]";if(XJ(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Oc(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Vee(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Vee(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function $ee(e){return~-encodeURI(e).split(/%..|./).length}function Gee(e){return $ee(JSON.stringify(e))}function Xee(){const e=new WeakSet;function t(i){return e.has(i)?!0:(e.add(i),!1)}function n(i){e.delete(i)}return[t,n]}function Q5(e,t=[]){return[e,t]}function jee(e,t){const[n,i]=e;return[n,[...i,t]]}function YC(e,t){const n=e[1];for(const i of n){const r=i[0].type;if(t(i,r))return!0}return!1}function c4(e){const t=Y5(Vt);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Yee(e){const[t,n]=e;let i=JSON.stringify(t);function r(s){typeof i=="string"?i=typeof s=="string"?i+s:[c4(i),s]:i.push(typeof s=="string"?c4(s):s)}for(const s of n){const[o,a]=s;if(r(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)r(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(va(a))}r(l)}}return typeof i=="string"?i:Wee(i)}function Wee(e){const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);let i=0;for(const r of e)n.set(r,i),i+=r.length;return n}function Kee(e){const t=typeof e.data=="string"?c4(e.data):e.data;return[Yr({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const Zee={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security"};function WC(e){return Zee[e]}function FF(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function qee(e,t,n,i){var s;const r=(s=e.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:A9(i)},...r&&{trace:Yr({...r})}}}function Qee(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Jee(e,t,n,i){const r=FF(n),s={sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&t&&{dsn:A9(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Q5(s,[o])}function ete(e,t,n,i){const r=FF(n),s=e.type&&e.type!=="replay_event"?e.type:"event";Qee(e,n==null?void 0:n.sdk);const o=qee(e,r,i,t);return delete e.sdkProcessingMetadata,Q5(o,[[{type:s},e]])}function u4(e,t,n,i=0){return new Pc((r,s)=>{const o=e[i];if(t===null||typeof o!="function")r(t);else{const a=o({...t},n);Pt&&o.id&&a===null&&$e.log(`Event processor "${o.id}" dropped event`),Z5(a)?a.then(l=>u4(e,l,n,i+1).then(r)).then(null,s):u4(e,a,n,i+1).then(r).then(null,s)}})}let CU,KC,AU;function tte(e){const t=Vt._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return AU&&n.length===KC||(KC=n.length,AU=n.reduce((i,r)=>{CU||(CU={});const s=CU[r];if(s)i[s[0]]=s[1];else{const o=e(r);for(let a=o.length-1;a>=0;a--){const l=o[a],c=l==null?void 0:l.filename,u=t[r];if(c&&u){i[c]=u,CU[r]=[c,u];break}}}return i},{})),AU}function nte(e,t){const{fingerprint:n,span:i,breadcrumbs:r,sdkProcessingMetadata:s}=t;ite(e,t),i&&ote(e,i),ate(e,n),rte(e,r),ste(e,s)}function ZC(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:c,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:m}=t;MU(e,"extra",n),MU(e,"tags",i),MU(e,"user",r),MU(e,"contexts",s),e.sdkProcessingMetadata=fp(e.sdkProcessingMetadata,a,2),o&&(e.level=o),h&&(e.transactionName=h),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),c.length&&(e.fingerprint=[...e.fingerprint,...c]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function MU(e,t,n){e[t]=fp(e[t],n,1)}function ite(e,t){const{extra:n,tags:i,user:r,contexts:s,level:o,transactionName:a}=t,l=Yr(n);Object.keys(l).length&&(e.extra={...l,...e.extra});const c=Yr(i);Object.keys(c).length&&(e.tags={...c,...e.tags});const u=Yr(r);Object.keys(u).length&&(e.user={...u,...e.user});const d=Yr(s);Object.keys(d).length&&(e.contexts={...d,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function rte(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function ste(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function ote(e,t){e.contexts={trace:See(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Nee(t),...e.sdkProcessingMetadata};const n=DF(t),i=x9(n).description;i&&!e.transaction&&e.type==="transaction"&&(e.transaction=i)}function ate(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function lte(e,t,n,i,r,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||n.event_id||xs(),timestamp:t.timestamp||dp()},c=n.integrations||e.integrations.map(U=>U.name);cte(l,e),fte(l,c),r&&r.emit("applyFrameMetadata",t),t.type===void 0&&ute(l,e.stackParser);const u=gte(i,n.captureContext);n.mechanism&&dd(l,n.mechanism);const d=r?r.getEventProcessors():[],f=uee().getScopeData();if(s){const U=s.getScopeData();ZC(f,U)}if(u){const U=u.getScopeData();ZC(f,U)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),nte(l,f);const m=[...d,...f.eventProcessors];return u4(m,l,n).then(U=>(U&&dte(U),typeof o=="number"&&o>0?hte(U,o,a):U))}function cte(e,t){var l,c;const{environment:n,release:i,dist:r,maxValueLength:s=250}=t;e.environment=e.environment||n||C9,!e.release&&i&&(e.release=i),!e.dist&&r&&(e.dist=r),e.message&&(e.message=sh(e.message,s));const o=(c=(l=e.exception)==null?void 0:l.values)==null?void 0:c[0];o!=null&&o.value&&(o.value=sh(o.value,s));const a=e.request;a!=null&&a.url&&(a.url=sh(a.url,s))}function ute(e,t){var i,r;const n=tte(t);(r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=n[l.filename])})})}function dte(e){var i,r;const t={};if((r=(i=e.exception)==null?void 0:i.values)==null||r.forEach(s=>{var o,a;(a=(o=s.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([s,o])=>{n.push({type:"sourcemap",code_file:s,debug_id:o})})}function fte(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function hte(e,t,n){var r,s;if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:va(o.data,t,n)}}))},...e.user&&{user:va(e.user,t,n)},...e.contexts&&{contexts:va(e.contexts,t,n)},...e.extra&&{extra:va(e.extra,t,n)}};return(r=e.contexts)!=null&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=va(e.contexts.trace.data,t,n))),e.spans&&(i.spans=e.spans.map(o=>({...o,...o.data&&{data:va(o.data,t,n)}}))),(s=e.contexts)!=null&&s.flags&&i.contexts&&(i.contexts.flags=va(e.contexts.flags,3,n)),i}function gte(e,t){if(!t)return e;const n=e?e.clone():new Wo;return n.update(t),n}function mte(e){if(e)return pte(e)?{captureContext:e}:bte(e)?{captureContext:e}:e}function pte(e){return e instanceof Wo||typeof e=="function"}const Ute=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function bte(e){return Object.keys(e).some(t=>Ute.includes(t))}function M9(e,t){return wl().captureException(e,mte(t))}function qC(e,t){const n=typeof t=="string"?t:void 0,i=typeof t!="string"?{captureContext:t}:void 0;return wl().captureMessage(e,n,i)}function BF(e,t){return wl().captureEvent(e,t)}function QC(e){const t=hp(),n=wl(),{userAgent:i}=Vt.navigator||{},r=eee({user:n.getUser()||t.getUser(),...i&&{userAgent:i},...e}),s=t.getSession();return(s==null?void 0:s.status)==="ok"&&kh(s,{status:"exited"}),zF(),t.setSession(r),r}function zF(){const e=hp(),n=wl().getSession()||e.getSession();n&&tee(n),HF(),e.setSession()}function HF(){const e=hp(),t=Ji(),n=e.getSession();n&&t&&t.captureSession(n)}function JC(e=!1){if(e){zF();return}HF()}const yte="7";function Ete(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function vte(e){return`${Ete(e)}${e.projectId}/envelope/`}function wte(e,t){const n={sentry_version:yte};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function _te(e,t,n){return t||`${vte(e)}?${wte(e,n)}`}const eA=[];function Tte(e){const t={};return e.forEach(n=>{const{name:i}=n,r=t[i];r&&!r.isDefaultInstance&&n.isDefaultInstance||(t[i]=n)}),Object.values(t)}function Ite(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(r=>{r.isDefaultInstance=!0});let i;if(Array.isArray(n))i=[...t,...n];else if(typeof n=="function"){const r=n(t);i=Array.isArray(r)?r:[r]}else i=t;return Tte(i)}function Ste(e,t){const n={};return t.forEach(i=>{i&&VF(e,i,n)}),n}function tA(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function VF(e,t,n){if(n[t.name]){Pt&&$e.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,eA.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),eA.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const i=t.preprocessEvent.bind(t);e.on("preprocessEvent",(r,s)=>i(r,s,e))}if(typeof t.processEvent=="function"){const i=t.processEvent.bind(t),r=Object.assign((s,o)=>i(s,o,e),{id:t.name});e.addEventProcessor(r)}Pt&&$e.log(`Integration installed: ${t.name}`)}function xte(e,t,n){const i=[{type:"client_report"},{timestamp:dp(),discarded_events:e}];return Q5(t?{dsn:t}:{},[i])}class qs extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}function $F(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Cte(e){var l;const{trace_id:t,parent_span_id:n,span_id:i,status:r,origin:s,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return Yr({data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:i??"",start_timestamp:e.start_timestamp??0,status:r,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o==null?void 0:o[RF],exclusive_time:o==null?void 0:o[kF],measurements:e.measurements,is_segment:!0})}function Ate(e){const t={type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[RF]:e.profile_id},...e.exclusive_time&&{[kF]:e.exclusive_time}}}},measurements:e.measurements};return Yr(t)}const nA="Not capturing exception because it's already been captured.",iA="Discarded session because of missing or non-string release";class Mte{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=zee(t.dsn):Pt&&$e.warn("No DSN provided, client will not send events."),this._dsn){const n=_te(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,i){const r=xs();if(PC(t))return Pt&&$e.log(nA),r;const s={event_id:r,...n};return this._process(this.eventFromException(t,s).then(o=>this._captureEvent(o,s,i))),s.event_id}captureMessage(t,n,i,r){const s={event_id:xs(),...i},o=E9(t)?t:String(t),a=v9(t)?this.eventFromMessage(o,n,s):this.eventFromException(t,s);return this._process(a.then(l=>this._captureEvent(l,s,r))),s.event_id}captureEvent(t,n,i){const r=xs();if(n!=null&&n.originalException&&PC(n.originalException))return Pt&&$e.log(nA),r;const s={event_id:r,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||i,l)),s.event_id}captureSession(t){this.sendSession(t),kh(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(i=>n.flush(t).then(r=>i&&r))):fd(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];VF(this,t,this._integrations),n||tA(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let i=ete(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])i=jee(i,Kee(s));const r=this.sendEnvelope(i);r&&r.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const{release:n,environment:i=C9}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){Pt&&$e.warn(iA);return}s.release=s.release||n,s.environment=s.environment||i,t.attrs=s}else{if(!t.release&&!n){Pt&&$e.warn(iA);return}t.release=t.release||n,t.environment=t.environment||i}this.emit("beforeSendSession",t);const r=Jee(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,n,i=1){if(this._options.sendClientReports){const r=`${t}:${n}`;Pt&&$e.log(`Recording outcome: "${r}"${i>1?` (${i} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+i}}on(t,n){const i=this._hooks[t]=this._hooks[t]||[];return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}emit(t,...n){const i=this._hooks[t];i&&i.forEach(r=>r(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Pt&&$e.error("Error while sending envelope:",n),n)):(Pt&&$e.error("Transport disabled"),fd({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Ste(this,t),tA(this,t)}_updateSessionFromEvent(t,n){var l;let i=n.level==="fatal",r=!1;const s=(l=n.exception)==null?void 0:l.values;if(s){r=!0;for(const c of s){const u=c.mechanism;if((u==null?void 0:u.handled)===!1){i=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&i)&&(kh(t,{...i&&{status:"crashed"},errors:t.errors||Number(r||i)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Pc(n=>{let i=0;const r=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(i+=r,t&&i>=t&&(clearInterval(s),n(!1)))},r)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,i,r){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||r.setLastEventId(t.event_id||n.event_id),lte(s,t,n,i,this,r).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:dee(i),...a.contexts};const l=Dee(this,i);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},i=wl(),r=hp()){return Pt&&d4(t)&&$e.log(`Captured error event \`${$F(t)[0]||"<unknown>"}\``),this._processEvent(t,n,i,r).then(s=>s.event_id,s=>{Pt&&(s instanceof qs&&s.logLevel==="log"?$e.log(s.message):$e.warn(s))})}_processEvent(t,n,i,r){const s=this.getOptions(),{sampleRate:o}=s,a=GF(t),l=d4(t),c=t.type||"error",u=`before send for type \`${c}\``,d=typeof o>"u"?void 0:Eee(o);if(l&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),Gb(new qs(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const f=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,i,r).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",f),new qs("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return h;const p=kte(this,s,h,n);return Rte(p,u)}).then(h=>{var U;if(h===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw new qs(`${u} returned \`null\`, will not send event.`,"log")}const m=i.getSession()||r.getSession();if(l&&m&&this._updateSessionFromEvent(m,h),a){const b=((U=h.sdkProcessingMetadata)==null?void 0:U.spanCountBeforeProcessing)||0,y=h.spans?h.spans.length:0,w=b-y;w>0&&this.recordDroppedEvent("before_send","span",w)}const p=h.transaction_info;if(a&&p&&h.transaction!==t.transaction){const b="custom";h.transaction_info={...p,source:b}}return this.sendEvent(h,n),h}).then(null,h=>{throw h instanceof qs?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),new qs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,i])=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:i}})}_flushOutcomes(){Pt&&$e.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Pt&&$e.log("No outcomes to send");return}if(!this._dsn){Pt&&$e.log("No dsn provided, will not send outcomes");return}Pt&&$e.log("Sending outcomes:",t);const n=xte(t,this._options.tunnel&&A9(this._dsn));this.sendEnvelope(n)}}function Rte(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Z5(e))return e.then(i=>{if(!Rh(i)&&i!==null)throw new qs(n);return i},i=>{throw new qs(`${t} rejected with ${i}`)});if(!Rh(e)&&e!==null)throw new qs(n);return e}function kte(e,t,n,i){const{beforeSend:r,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=n;if(d4(a)&&r)return r(a,i);if(GF(a)){if(o){const l=o(Cte(a));if(l?a=fp(n,Ate(l)):jC(),a.spans){const c=[];for(const u of a.spans){const d=o(u);d?c.push(d):(jC(),c.push(u))}a.spans=c}}if(s){if(a.spans){const l=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return s(a,i)}}return a}function d4(e){return e.type===void 0}function GF(e){return e.type==="transaction"}function Lte(e,t){t.debug===!0&&(Pt?$e.enable():pg(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),wl().update(t.initialScope);const i=new e(t);return Dte(i),i.init(),i}function Dte(e){wl().setClient(e)}function Nte(e){const t=[];function n(){return e===void 0||t.length<e}function i(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function r(o){if(!n())return Gb(new qs("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>i(a)).then(null,()=>i(a).then(null,()=>{})),a}function s(o){return new Pc((a,l)=>{let c=t.length;if(!c)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{fd(d).then(()=>{--c||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:r,drain:s}}const Ote=60*1e3;function Pte(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const i=Date.parse(`${e}`);return isNaN(i)?Ote:i-t}function Fte(e,t){return e[t]||e.all||0}function Bte(e,t,n=Date.now()){return Fte(e,t)>n}function zte(e,{statusCode:t,headers:n},i=Date.now()){const r={...e},s=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(s)for(const a of s.trim().split(",")){const[l,c,,,u]=a.split(":",5),d=parseInt(l,10),f=(isNaN(d)?60:d)*1e3;if(!c)r.all=i+f;else for(const h of c.split(";"))h==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(r[h]=i+f):r[h]=i+f}else o?r.all=i+Pte(o,i):t===429&&(r.all=i+60*1e3);return r}const Hte=64;function Vte(e,t,n=Nte(e.bufferSize||Hte)){let i={};const r=o=>n.drain(o);function s(o){const a=[];if(YC(o,(d,f)=>{const h=WC(f);Bte(i,h)?e.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return fd({});const l=Q5(o[0],a),c=d=>{YC(l,(f,h)=>{e.recordDroppedEvent(d,WC(h))})},u=()=>t({body:Yee(l)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Pt&&$e.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),i=zte(i,d),d),d=>{throw c("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof qs)return Pt&&$e.error("Skipped sending event because buffer is full."),c("queue_overflow"),fd({});throw d})}return{send:s,flush:r}}function $te(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function Gte(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Xte(e,t,n=[t],i="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${i}:@sentry/${s}`,version:Ku})),version:Ku}),e._metadata=r}const jte=100;function hd(e,t){const n=Ji(),i=hp();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:s=jte}=n.getOptions();if(s<=0)return;const a={timestamp:dp(),...e},l=r?pg(()=>r(a,t)):a;l!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),i.addBreadcrumb(l,s))}let rA;const Yte="FunctionToString",sA=new WeakMap,Wte=()=>({name:Yte,setupOnce(){rA=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=T9(this),n=sA.has(Ji())&&t!==void 0?t:this;return rA.apply(n,e)}}catch{}},setup(e){sA.set(e,!0)}}),Kte=Wte,Zte=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],qte="InboundFilters",Qte=(e={})=>({name:qte,processEvent(t,n,i){const r=i.getOptions(),s=ene(e,r);return tne(t,s)?null:t}}),Jte=Qte;function ene(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Zte],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function tne(e,t){return t.ignoreInternal&&one(e)?(Pt&&$e.warn(`Event dropped due to being internal Sentry Error.
Event: ${jl(e)}`),!0):nne(e,t.ignoreErrors)?(Pt&&$e.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${jl(e)}`),!0):lne(e)?(Pt&&$e.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${jl(e)}`),!0):ine(e,t.ignoreTransactions)?(Pt&&$e.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${jl(e)}`),!0):rne(e,t.denyUrls)?(Pt&&$e.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${jl(e)}.
Url: ${Xb(e)}`),!0):sne(e,t.allowUrls)?!1:(Pt&&$e.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${jl(e)}.
Url: ${Xb(e)}`),!0)}function nne(e,t){return e.type||!t||!t.length?!1:$F(e).some(n=>q5(n,t))}function ine(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?q5(n,t):!1}function rne(e,t){if(!(t!=null&&t.length))return!1;const n=Xb(e);return n?q5(n,t):!1}function sne(e,t){if(!(t!=null&&t.length))return!0;const n=Xb(e);return n?q5(n,t):!0}function one(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function ane(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Xb(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?ane(t):null}catch{return Pt&&$e.error(`Cannot extract url for event ${jl(e)}`),null}}function lne(e){var t,n;return e.type||!((n=(t=e.exception)==null?void 0:t.values)!=null&&n.length)?!1:!e.message&&!e.exception.values.some(i=>i.stacktrace||i.type&&i.type!=="Error"||i.value)}function cne(e,t,n=250,i,r,s,o){var l;if(!((l=s.exception)!=null&&l.values)||!o||!cd(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=une(f4(e,t,r,o.originalException,i,s.exception.values,a,0),n))}function f4(e,t,n,i,r,s,o,a){if(s.length>=n+1)return s;let l=[...s];if(cd(i[r],Error)){oA(o,a);const c=e(t,i[r]),u=l.length;aA(c,r,u,a),l=f4(e,t,n,i[r],r,[c,...l],c,u)}return Array.isArray(i.errors)&&i.errors.forEach((c,u)=>{if(cd(c,Error)){oA(o,a);const d=e(t,c),f=l.length;aA(d,`errors[${u}]`,f,a),l=f4(e,t,n,c,r,[d,...l],d,f)}}),l}function oA(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function aA(e,t,n,i){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:i}}function une(e,t){return e.map(n=>(n.value&&(n.value=sh(n.value,t)),n))}function XF(e){const t="console";Fd(t,e),Bd(t,dne)}function dne(){"console"in Vt&&Hb.forEach(function(e){e in Vt.console&&jr(Vt.console,e,function(t){return Vb[e]=t,function(...n){io("console",{args:n,level:e});const r=Vb[e];r==null||r.apply(Vt.console,n)}})})}function jF(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const fne="CaptureConsole",hne=(e={})=>{const t=e.levels||Hb,n=e.handled??!0;return{name:fne,setup(i){"console"in Vt&&XF(({args:r,level:s})=>{Ji()!==i||!t.includes(s)||mne(r,s,n)})}}},gne=hne;function mne(e,t,n){const i={level:jF(t),extra:{arguments:e}};S9(r=>{if(r.addEventProcessor(a=>(a.logger="console",dd(a,{handled:n,type:"console"}),a)),t==="assert"){if(!e[0]){const a=`Assertion failed: ${$b(e.slice(1)," ")||"console.assert"}`;r.setExtra("arguments",e.slice(1)),qC(a,i)}return}const s=e.find(a=>a instanceof Error);if(s){M9(s,i);return}const o=$b(e," ");qC(o,i)})}const pne="Dedupe",Une=()=>{let e;return{name:pne,processEvent(t){if(t.type)return t;try{if(yne(t,e))return Pt&&$e.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},bne=Une;function yne(e,t){return t?!!(Ene(e,t)||vne(e,t)):!1}function Ene(e,t){const n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!WF(e,t)||!YF(e,t))}function vne(e,t){const n=lA(t),i=lA(e);return!(!n||!i||n.type!==i.type||n.value!==i.value||!WF(e,t)||!YF(e,t))}function YF(e,t){let n=kC(e),i=kC(t);if(!n&&!i)return!0;if(n&&!i||!n&&i||(n=n,i=i,i.length!==n.length))return!1;for(let r=0;r<i.length;r++){const s=i[r],o=n[r];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function WF(e,t){let n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return n.join("")===i.join("")}catch{return!1}}function lA(e){var t;return((t=e.exception)==null?void 0:t.values)&&e.exception.values[0]}function I8(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function KF(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const jb=Vt;function wne(){return"history"in jb}function ZF(){if(!("fetch"in jb))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function h4(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function _ne(){var n;if(typeof EdgeRuntime=="string")return!0;if(!ZF())return!1;if(h4(jb.fetch))return!0;let e=!1;const t=jb.document;if(t&&typeof t.createElement=="function")try{const i=t.createElement("iframe");i.hidden=!0,t.head.appendChild(i),(n=i.contentWindow)!=null&&n.fetch&&(e=h4(i.contentWindow.fetch)),t.head.removeChild(i)}catch(i){Pd&&$e.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}return e}function Tne(e,t){const n="fetch";Fd(n,e),Bd(n,()=>Ine(void 0,t))}function Ine(e,t=!1){t&&!_ne()||jr(Vt,"fetch",function(n){return function(...i){const r=new Error,{method:s,url:o}=Sne(i),a={args:i,fetchData:{method:s,url:o},startTimestamp:ja()*1e3,virtualError:r};return io("fetch",{...a}),n.apply(Vt,i).then(async l=>(io("fetch",{...a,endTimestamp:ja()*1e3,response:l}),l),l=>{throw io("fetch",{...a,endTimestamp:ja()*1e3,error:l}),y9(l)&&l.stack===void 0&&(l.stack=r.stack,ud(l,"framesToPop",1)),l})}})}function g4(e,t){return!!e&&typeof e=="object"&&!!e[t]}function cA(e){return typeof e=="string"?e:e?g4(e,"url")?e.url:e.toString?e.toString():"":""}function Sne(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:cA(n),method:g4(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:cA(t),method:g4(t,"method")?String(t.method).toUpperCase():"GET"}}function xne(){return"npm"}const kn=Vt;let m4=0;function qF(){return m4>0}function Cne(){m4++,setTimeout(()=>{m4--})}function Dh(e,t={}){function n(r){return typeof r=="function"}if(!n(e))return e;try{const r=e.__sentry_wrapped__;if(r)return typeof r=="function"?r:e;if(T9(e))return e}catch{return e}const i=function(...r){try{const s=r.map(o=>Dh(o,t));return e.apply(this,s)}catch(s){throw Cne(),S9(o=>{o.addEventProcessor(a=>(t.mechanism&&(o4(a,void 0),dd(a,t.mechanism)),a.extra={...a.extra,arguments:r},a)),M9(s)}),s}};try{for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch{}SF(i,e),ud(e,"__sentry_wrapped__",i);try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get(){return e.name}})}catch{}return i}function R9(e,t){const n=k9(e,t),i={type:Lne(t),value:Dne(t)};return n.length&&(i.stacktrace={frames:n}),i.type===void 0&&i.value===""&&(i.value="Unrecoverable error caught"),i}function Ane(e,t,n,i){const r=Ji(),s=r==null?void 0:r.getOptions().normalizeDepth,o=Bne(t),a={__serialized__:PF(t,s)};if(o)return{exception:{values:[R9(e,o)]},extra:a};const l={exception:{values:[{type:K5(t)?t.constructor.name:i?"UnhandledRejection":"Error",value:Pne(t,{isUnhandledRejection:i})}]},extra:a};if(n){const c=k9(e,n);c.length&&(l.exception.values[0].stacktrace={frames:c})}return l}function S8(e,t){return{exception:{values:[R9(e,t)]}}}function k9(e,t){const n=t.stacktrace||t.stack||"",i=Rne(t),r=kne(t);try{return e(n,i,r)}catch{}return[]}const Mne=/Minified React error #\d+;/i;function Rne(e){return e&&Mne.test(e.message)?1:0}function kne(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function QF(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Lne(e){const t=e==null?void 0:e.name;return!t&&QF(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Dne(e){const t=e==null?void 0:e.message;return QF(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Nne(e,t,n,i){const r=(n==null?void 0:n.syntheticException)||void 0,s=L9(e,t,r,i);return dd(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),fd(s)}function One(e,t,n="info",i,r){const s=(i==null?void 0:i.syntheticException)||void 0,o=p4(e,t,s,r);return o.level=n,i!=null&&i.event_id&&(o.event_id=i.event_id),fd(o)}function L9(e,t,n,i,r){let s;if(_F(t)&&t.error)return S8(e,t.error);if(DC(t)||VJ(t)){const o=t;if("stack"in t)s=S8(e,t);else{const a=o.name||(DC(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;s=p4(e,l,n,i),o4(s,l)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return y9(t)?S8(e,t):Rh(t)||K5(t)?(s=Ane(e,t,n,r),dd(s,{synthetic:!0}),s):(s=p4(e,t,n,i),o4(s,`${t}`),dd(s,{synthetic:!0}),s)}function p4(e,t,n,i){const r={};if(i&&n){const s=k9(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]}),dd(r,{synthetic:!0})}if(E9(t)){const{__sentry_template_string__:s,__sentry_template_values__:o}=t;return r.logentry={message:s,params:o},r}return r.message=t,r}function Pne(e,{isUnhandledRejection:t}){const n=ZJ(e),i=t?"promise rejection":"exception";return _F(e)?`Event \`ErrorEvent\` captured as ${i} with message \`${e.message}\``:K5(e)?`Event \`${Fne(e)}\` (type=${e.type}) captured as ${i}`:`Object captured as ${i} with keys: ${n}`}function Fne(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Bne(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class zne extends Mte{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},i=kn.SENTRY_SDK_SOURCE||xne();Xte(n,"browser",["browser"],i),super(n),n.sendClientReports&&kn.document&&kn.document.addEventListener("visibilitychange",()=>{kn.document.visibilityState==="hidden"&&this._flushOutcomes()}),this._options.sendDefaultPii&&(this.on("postprocessEvent",$te),this.on("beforeSendSession",Gte))}eventFromException(t,n){return Nne(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",i){return One(this._options.stackParser,t,n,i,this._options.attachStacktrace)}_prepareEvent(t,n,i,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,i,r)}}const Hne=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ir=Vt,Vne=1e3;let uA,U4,b4;function $ne(e){const t="dom";Fd(t,e),Bd(t,Gne)}function Gne(){if(!Ir.document)return;const e=io.bind(null,"dom"),t=dA(e,!0);Ir.document.addEventListener("click",t,!1),Ir.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var s,o;const r=(s=Ir[n])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(jr(r,"addEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=d[l]=d[l]||{refCount:0};if(!f.handler){const h=dA(e);f.handler=h,a.call(this,l,h,u)}f.refCount++}catch{}return a.call(this,l,c,u)}}),jr(r,"removeEventListener",function(a){return function(l,c,u){if(l==="click"||l=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},f=d[l];f&&(f.refCount--,f.refCount<=0&&(a.call(this,l,f.handler,u),f.handler=void 0,delete d[l]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,c,u)}}))})}function Xne(e){if(e.type!==U4)return!1;try{if(!e.target||e.target._sentryId!==b4)return!1}catch{}return!0}function jne(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function dA(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const i=Yne(n);if(jne(n.type,i))return;ud(n,"_sentryCaptured",!0),i&&!i._sentryId&&ud(i,"_sentryId",xs());const r=n.type==="keypress"?"input":n.type;Xne(n)||(e({event:n,name:r,global:t}),U4=n.type,b4=i?i._sentryId:void 0),clearTimeout(uA),uA=Ir.setTimeout(()=>{b4=void 0,U4=void 0},Vne)}}function Yne(e){try{return e.target}catch{return null}}let RU;function JF(e){const t="history";Fd(t,e),Bd(t,Wne)}function Wne(){if(Ir.addEventListener("popstate",()=>{const t=Ir.location.href,n=RU;if(RU=t,n===t)return;io("history",{from:n,to:t})}),!wne())return;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const r=RU,s=String(i);if(RU=s,r===s)return;io("history",{from:r,to:s})}return t.apply(this,n)}}jr(Ir.history,"pushState",e),jr(Ir.history,"replaceState",e)}const R2={};function Kne(e){const t=R2[e];if(t)return t;let n=Ir[e];if(h4(n))return R2[e]=n.bind(Ir);const i=Ir.document;if(i&&typeof i.createElement=="function")try{const r=i.createElement("iframe");r.hidden=!0,i.head.appendChild(r);const s=r.contentWindow;s!=null&&s[e]&&(n=s[e]),i.head.removeChild(r)}catch(r){Hne&&$e.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,r)}return n&&(R2[e]=n.bind(Ir))}function fA(e){R2[e]=void 0}const Lm="__sentry_xhr_v3__";function Zne(e){const t="xhr";Fd(t,e),Bd(t,qne)}function qne(){if(!Ir.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,i){const r=new Error,s=ja()*1e3,o=Xa(i[0])?i[0].toUpperCase():void 0,a=Qne(i[1]);if(!o||!a)return t.apply(n,i);n[Lm]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const l=()=>{const c=n[Lm];if(c&&n.readyState===4){try{c.status_code=n.status}catch{}const u={endTimestamp:ja()*1e3,startTimestamp:s,xhr:n,virtualError:r};io("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(c,u,d){return l(),c.apply(u,d)}}):n.addEventListener("readystatechange",l),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(c,u,d){const[f,h]=d,m=u[Lm];return m&&Xa(f)&&Xa(h)&&(m.request_headers[f.toLowerCase()]=h),c.apply(u,d)}}),t.apply(n,i)}}),e.send=new Proxy(e.send,{apply(t,n,i){const r=n[Lm];if(!r)return t.apply(n,i);i[0]!==void 0&&(r.body=i[0]);const s={startTimestamp:ja()*1e3,xhr:n};return io("xhr",s),t.apply(n,i)}})}function Qne(e){if(Xa(e))return e;try{return e.toString()}catch{}}function Jne(e,t=Kne("fetch")){let n=0,i=0;function r(s){const o=s.body.length;n+=o,i++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&i<15,...e.fetchOptions};if(!t)return fA("fetch"),Gb("No fetch implementation available");try{return t(e.url,a).then(l=>(n-=o,i--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return fA("fetch"),n-=o,i--,Gb(l)}}return Vte(e,r)}const eie=30,tie=50;function y4(e,t,n,i){const r={filename:e,function:t==="<anonymous>"?ld:t,in_app:!0};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}const nie=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,iie=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,rie=/\((\S*)(?::(\d+))(?::(\d+))\)/,sie=e=>{const t=nie.exec(e);if(t){const[,i,r,s]=t;return y4(i,ld,+r,+s)}const n=iie.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=rie.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[r,s]=eB(n[1]||ld,n[2]);return y4(s,r,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},oie=[eie,sie],aie=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,lie=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,cie=e=>{const t=aie.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=lie.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let i=t[3],r=t[1]||ld;return[r,i]=eB(r,i),y4(i,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},uie=[tie,cie],die=[oie,uie],fie=vF(...die),eB=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,i=e.indexOf("safari-web-extension")!==-1;return n||i?[e.indexOf("@")!==-1?e.split("@")[0]:ld,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},s0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,kU=1024,hie="Breadcrumbs",gie=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:hie,setup(n){t.console&&XF(bie(n)),t.dom&&$ne(Uie(n,t.dom)),t.xhr&&Zne(yie(n)),t.fetch&&Tne(Eie(n)),t.history&&JF(vie(n)),t.sentry&&n.on("beforeSendEvent",pie(n))}}},mie=gie;function pie(e){return function(n){Ji()===e&&hd({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:jl(n)},{event:n})}}function Uie(e,t){return function(i){if(Ji()!==e)return;let r,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>kU&&(s0&&$e.warn(`\`dom.maxStringLength\` cannot exceed ${kU}, but a value of ${a} was configured. Sentry will use ${kU} instead.`),a=kU),typeof o=="string"&&(o=[o]);try{const c=i.event,u=wie(c)?c.target:c;r=IF(u,{keyAttrs:o,maxStringLength:a}),s=WJ(u)}catch{r="<unknown>"}if(r.length===0)return;const l={category:`ui.${i.name}`,message:r};s&&(l.data={"ui.component_name":s}),hd(l,{event:i.event,name:i.name,global:i.global})}}function bie(e){return function(n){if(Ji()!==e)return;const i={category:"console",data:{arguments:n.args,logger:"console"},level:jF(n.level),message:$b(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)i.message=`Assertion failed: ${$b(n.args.slice(1)," ")||"console.assert"}`,i.data.arguments=n.args.slice(1);else return;hd(i,{input:n.args,level:n.level})}}function yie(e){return function(n){if(Ji()!==e)return;const{startTimestamp:i,endTimestamp:r}=n,s=n.xhr[Lm];if(!i||!r||!s)return;const{method:o,url:a,status_code:l,body:c}=s,u={method:o,url:a,status_code:l},d={xhr:n.xhr,input:c,startTimestamp:i,endTimestamp:r},f=KF(l);hd({category:"xhr",data:u,type:"http",level:f},d)}}function Eie(e){return function(n){if(Ji()!==e)return;const{startTimestamp:i,endTimestamp:r}=n;if(!r||n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST")return;const s={method:n.fetchData.method,url:n.fetchData.url};if(n.error){const o={data:n.error,input:n.args,startTimestamp:i,endTimestamp:r};hd({category:"fetch",data:s,level:"error",type:"http"},o)}else{const o=n.response;s.request_body_size=n.fetchData.request_body_size,s.response_body_size=n.fetchData.response_body_size,s.status_code=o==null?void 0:o.status;const a={input:n.args,response:o,startTimestamp:i,endTimestamp:r},l=KF(s.status_code);hd({category:"fetch",data:s,type:"http",level:l},a)}}}function vie(e){return function(n){if(Ji()!==e)return;let i=n.from,r=n.to;const s=I8(kn.location.href);let o=i?I8(i):void 0;const a=I8(r);o!=null&&o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(r=a.relative),s.protocol===o.protocol&&s.host===o.host&&(i=o.relative),hd({category:"navigation",data:{from:i,to:r}})}}function wie(e){return!!e&&!!e.target}const _ie=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Tie="BrowserApiErrors",Iie=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Tie,setupOnce(){t.setTimeout&&jr(kn,"setTimeout",hA),t.setInterval&&jr(kn,"setInterval",hA),t.requestAnimationFrame&&jr(kn,"requestAnimationFrame",xie),t.XMLHttpRequest&&"XMLHttpRequest"in kn&&jr(XMLHttpRequest.prototype,"send",Cie);const n=t.eventTarget;n&&(Array.isArray(n)?n:_ie).forEach(Aie)}}},Sie=Iie;function hA(e){return function(...t){const n=t[0];return t[0]=Dh(n,{mechanism:{data:{function:Oc(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function xie(e){return function(t){return e.apply(this,[Dh(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Oc(e)},handled:!1,type:"instrument"}})])}}function Cie(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&jr(n,r,function(s){const o={mechanism:{data:{function:r,handler:Oc(s)},handled:!1,type:"instrument"}},a=T9(s);return a&&(o.mechanism.data.handler=Oc(a)),Dh(s,o)})}),e.apply(this,t)}}function Aie(e){var i,r;const n=(i=kn[e])==null?void 0:i.prototype;(r=n==null?void 0:n.hasOwnProperty)!=null&&r.call(n,"addEventListener")&&(jr(n,"addEventListener",function(s){return function(o,a,l){try{Mie(a)&&(a.handleEvent=Dh(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Oc(a),target:e},handled:!1,type:"instrument"}}))}catch{}return s.apply(this,[o,Dh(a,{mechanism:{data:{function:"addEventListener",handler:Oc(a),target:e},handled:!1,type:"instrument"}}),l])}}),jr(n,"removeEventListener",function(s){return function(o,a,l){try{const c=a.__sentry_wrapped__;c&&s.call(this,o,c,l)}catch{}return s.call(this,o,a,l)}}))}function Mie(e){return typeof e.handleEvent=="function"}const Rie=()=>({name:"BrowserSession",setupOnce(){if(typeof kn.document>"u"){s0&&$e.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}QC({ignoreDuration:!0}),JC(),JF(({from:e,to:t})=>{e!==void 0&&e!==t&&(QC({ignoreDuration:!0}),JC())})}}),kie="GlobalHandlers",Lie=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:kie,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Nie(n),gA("onerror")),t.onunhandledrejection&&(Oie(n),gA("onunhandledrejection"))}}},Die=Lie;function Nie(e){FJ(t=>{const{stackParser:n,attachStacktrace:i}=tB();if(Ji()!==e||qF())return;const{msg:r,url:s,line:o,column:a,error:l}=t,c=Bie(L9(n,l||r,void 0,i,!1),s,o,a);c.level="error",BF(c,{originalException:l,mechanism:{handled:!1,type:"onerror"}})})}function Oie(e){zJ(t=>{const{stackParser:n,attachStacktrace:i}=tB();if(Ji()!==e||qF())return;const r=Pie(t),s=v9(r)?Fie(r):L9(n,r,void 0,i,!0);s.level="error",BF(s,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function Pie(e){if(v9(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Fie(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Bie(e,t,n,i){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],c=i,u=n,d=Xa(t)&&t.length>0?t:_9();return l.length===0&&l.push({colno:c,filename:d,function:ld,in_app:!0,lineno:u}),e}function gA(e){s0&&$e.log(`Global Handler attached: ${e}`)}function tB(){const e=Ji();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const zie=()=>({name:"HttpContext",preprocessEvent(e){var o,a;if(!kn.navigator&&!kn.location&&!kn.document)return;const t=((o=e.request)==null?void 0:o.url)||_9(),{referrer:n}=kn.document||{},{userAgent:i}=kn.navigator||{},r={...(a=e.request)==null?void 0:a.headers,...n&&{Referer:n},...i&&{"User-Agent":i}},s={...e.request,...t&&{url:t},headers:r};e.request=s}}),Hie="cause",Vie=5,$ie="LinkedErrors",Gie=(e={})=>{const t=e.limit||Vie,n=e.key||Hie;return{name:$ie,preprocessEvent(i,r,s){const o=s.getOptions();cne(R9,o.stackParser,o.maxValueLength,n,t,i,r)}}},Xie=Gie;function jie(e){return[Jte(),Kte(),Sie(),mie(),Die(),Xie(),bne(),zie(),Rie()]}function Yie(e={}){var n;return{...{defaultIntegrations:jie(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=kn.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...Wie(e)}}function Wie(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const i=n;e[i]!==void 0&&(t[i]=e[i])}return t}function Kie(){var l;const e=typeof kn.window<"u"&&kn;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],i=(l=n==null?void 0:n.runtime)==null?void 0:l.id,r=_9()||"",s=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!i&&kn===kn.top&&s.some(c=>r.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!i&&!o&&!a}function Zie(e={}){const t=Yie(e);if(!t.skipBrowserExtensionCheck&&Kie()){s0&&pg(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}s0&&!ZF()&&$e.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:OJ(t.stackParser||fie),integrations:Ite(t),transport:t.transport||Jne};return Lte(zne,n)}function qie(){const e=Error.prepareStackTrace;try{let t=[];return Error.prepareStackTrace=(n,i)=>{const r=i.slice(1);return t=r,r},new Error().stack,t}finally{Error.prepareStackTrace=e}}var Qie={};const nB={"excalidraw.com":"production","staging.excalidraw.com":"staging","vercel.app":"staging"},Jie=Qie.VITE_APP_DISABLE_SENTRY==="true",x8=!Jie&&Object.keys(nB).find(e=>window.location.hostname.indexOf(e)>=0);Zie({dsn:x8?"https://7bfc596a5bf945eda6b660d3015a5460@sentry.io/5179260":void 0,environment:x8?nB[x8]:void 0,release:"",ignoreErrors:["undefined is not an object (evaluating 'window.__pad.performLoop')","InvalidStateError: Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.",/(Failed to fetch|(fetch|loading) dynamically imported module)/i,/QuotaExceededError: (The quota has been exceeded|.*setItem.*Storage)/i,"Internal error opening backing store for indexedDB.open"],integrations:[gne({levels:["error"]})],beforeSend(e){var t;return(t=e.request)!=null&&t.url&&(e.request.url=e.request.url.replace(/#.*$/,"")),e.exception||(e.exception={values:[{type:"ConsoleError",value:e.message??"Unknown error",stacktrace:{frames:qie().slice(1).filter(n=>{var i;return n.getFileName()&&!((i=n.getFileName())!=null&&i.includes("@sentry_browser.js"))}).map(n=>{var i;return{filename:n.getFileName()??void 0,function:n.getFunctionName()??void 0,in_app:!(((i=n.getFileName())==null?void 0:i.includes("node_modules"))??!1),lineno:n.getLineNumber()??void 0,colno:n.getColumnNumber()??void 0}})},mechanism:{type:"instrument",handled:!0,data:{function:"console.error",handler:"Sentry.beforeSend"}}}]}),e}});class ere{constructor(t){F(this,"content",[]);this.scoreFunction=t}sinkDown(t){const n=this.content[t],i=this.scoreFunction(n);for(;t>0;){const r=(t+1>>1)-1,s=this.content[r];if(i<this.scoreFunction(s))this.content[t]=s,t=r;else break}this.content[t]=n}bubbleUp(t){const n=this.content.length,i=this.content[t],r=this.scoreFunction(i);for(;;){const s=(t+1<<1)-1,o=s+1;let a=t,l=r;if(s<n){const c=this.scoreFunction(this.content[s]);c<l&&(a=s,l=c)}if(o<n&&this.scoreFunction(this.content[o])<l&&(a=o),a===t)break;this.content[t]=this.content[a],t=a}this.content[t]=i}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){if(this.content.length===0)return null;const t=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),t}remove(t){if(this.content.length===0)return;const n=this.content.indexOf(t),i=this.content.pop();n<this.content.length&&(this.content[n]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}}const tre="#ffffff",nre="#000000",ire=["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],rre=["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],sre=["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],ore=["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],are=["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],lre=["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],cre=["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],ure=["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],dre=["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],fre=["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],hre=["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],gre=["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],mre=["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"],yi={white:tre,black:nre,gray:ire,red:rre,pink:sre,grape:ore,violet:are,indigo:lre,blue:cre,cyan:ure,teal:dre,green:fre,lime:hre,yellow:gre,orange:mre},E4=240,pre=(e,t)=>t.reduce((n,i)=>(i in e&&(n[i]=e[i]),n),{}),Ure=5,yf=5,bre=4,Dm=4,Nm=1,zs=[0,2,4,6,8],Hs=(e,t)=>t.map(n=>yi[e][n]),je={transparent:"transparent",black:"#1e1e1e",white:"#ffffff",gray:Hs("gray",zs),red:Hs("red",zs),pink:Hs("pink",zs),grape:Hs("grape",zs),violet:Hs("violet",zs),blue:Hs("blue",zs),cyan:Hs("cyan",zs),teal:Hs("teal",zs),green:Hs("green",zs),yellow:Hs("yellow",zs),orange:Hs("orange",zs),bronze:["#f8f1ee","#eaddd7","#d2bab0","#a18072","#846358"]},iB=pre(je,["cyan","blue","violet","grape","pink","green","teal","yellow","orange","red"]),rB=[je.black,je.red[Dm],je.green[Dm],je.blue[Dm],je.yellow[Dm]],sB=[je.transparent,je.red[Nm],je.green[Nm],je.blue[Nm],je.yellow[Nm]],oB=[je.white,"#f8f9fa","#f5faff","#fffce8","#fdf8f6"],yre={transparent:je.transparent,white:je.white,gray:je.gray,black:je.black,bronze:je.bronze,...iB},Ere={transparent:je.transparent,white:je.white,gray:je.gray,black:je.black,bronze:je.bronze,...iB},vre=e=>[je.cyan[e],je.blue[e],je.violet[e],je.grape[e],je.pink[e],je.green[e],je.teal[e],je.yellow[e],je.orange[e],je.red[e]],wre=(e,t,n)=>`#${((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}`,aB=typeof window<"u"&&"ResizeObserver"in window,Ec="Excalidraw",_re=36,lB=10,mA=20,k2=8,Tre=5,pA=1,Ire=30,Vr=Math.PI/12,Sre="red",Ct={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",GRAB:"grab",POINTER:"pointer",MOVE:"move",AUTO:""},zl={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1,ERASER:5},wu={enabled:"all",disabled:"none",inheritFromUI:"var(--ui-pointerEvents)"};var te=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.EXCALIDRAW_LINK="excalidraw-link",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(te||{});const LU={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5},cB={TEST:"test",DEVELOPMENT:"development"},gr={SIDEBAR:"sidebar",SHAPE_ACTIONS_MENU:"App-menu__left",ZOOM_ACTIONS:"zoom-actions",SEARCH_MENU_INPUT_WRAPPER:"layer-ui__search-inputWrapper",CONVERT_ELEMENT_TYPE_POPUP:"ConvertElementTypePopup",SHAPE_ACTIONS_THEME_SCOPE:"shape-actions-theme-scope",FRAME_NAME:"frame-name"},Bf="Xiaolai",o0="Segoe UI Emoji",tt={Virgil:1,Helvetica:2,Cascadia:3,Excalifont:5,Nunito:6,"Lilita One":7,"Comic Shanns":8,"Liberation Sans":9,Assistant:10},uB="sans-serif",dB="monospace",xre={[uB]:998,[dB]:999},zf={[Bf]:100,...xre,[o0]:1e3};function Cre(e){switch(e){case tt.Cascadia:case tt["Comic Shanns"]:return dB;default:return uB}}const fB=e=>{const t=Cre(e);switch(e){case tt.Excalifont:return[Bf,t,o0];default:return[t,o0]}},ke={LIGHT:"light",DARK:"dark"},Ht={strokeColor:"#bbb",strokeWidth:2,strokeStyle:"solid",fillStyle:"solid",roughness:0,roundness:null,backgroundColor:"transparent",radius:8,nameOffsetY:3,nameColorLightTheme:"#999999",nameColorDarkTheme:"#7a7a7a",nameFontSize:14,nameLineHeight:1.25},D9=1,_l=20,nu=tt.Excalifont,gp="left",Yb="top",hB="{version}",gd=2,Wb=2*gd,Are=1e-5,UA=2*Wb-Are,DU="#ffffff",Mre="#1e1e1e",Rre="#a2f1a6",Kb=20,gB=5,Nh={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},kre={text:"text/plain",html:"text/html",json:"application/json",excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json",excalidrawlibIds:"application/vnd.excalidrawlib.ids+json"},Te={...kre,"excalidraw.svg":"image/svg+xml","excalidraw.png":"image/png",binary:"application/octet-stream",...Nh},Lre=[Te.text,Te.html,...Object.values(Nh)],C8={png:"png",svg:"svg",clipboard:"clipboard"},Cs={excalidraw:"excalidraw",excalidrawClipboard:"excalidraw/clipboard",excalidrawLibrary:"excalidrawlib",excalidrawClipboardWithAPI:"excalidraw-api/clipboard"},N9=()=>window.EXCALIDRAW_EXPORT_SOURCE||window.location.origin,Dre=500,Nre=300,Ore=500,Pre=3e4,Fre=100,J5=.1,O9=.1,P9=30,Bre=300,bA=6e4,yA=3e3,F9="invert(93%) hue-rotate(180deg)",v4={addLibrary:"addLibrary"},w4={addLibrary:"addLibrary"},EA={canvasActions:{changeViewBackgroundColor:!0,clearCanvas:!0,export:{saveFileToDisk:!0},loadScene:!0,saveToActiveFile:!0,toggleTheme:null,saveAsImage:!0}},sm=2,B9=[1,2,3],bg=10,zre=1440,vA=4*1024*1024,st="http://www.w3.org/2000/svg",Hre=`<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`,mB=128,ey={excalidraw:2,excalidrawLibrary:2},$n=5,Vre=.7,$re=11,Wr={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},a0={LEFT:"left",CENTER:"center",RIGHT:"right"},Gre=20,A8=.25,Xre=32,yn={LEGACY:1,PROPORTIONAL_RADIUS:2,ADAPTIVE_RADIUS:3},pB={artist:1,cartoonist:2},M8={thin:1,bold:2,extraBold:4},mn={strokeColor:je.black,backgroundColor:je.transparent,fillStyle:"solid",strokeWidth:2,strokeStyle:"solid",roughness:pB.artist,opacity:100,locked:!1},Zb="library",Zu="search",As={name:"default",defaultTab:Zb},UB=new Set(["iframe","embeddable","image"]),Qn={selection:"selection",rectangle:"rectangle",diamond:"diamond",ellipse:"ellipse",text:"text",image:"image",eraser:"eraser",frame:"frame",magicframe:"magicframe",laser:"laser"},m1={MERMAID_TO_EXCALIDRAW:"mermaid-to-excalidraw",PUBLISH_LIBRARY:"publish-library-data"},bB="Untitled",Hf={generalStats:1,elementProperties:2},ms=1,fi={sharp:"sharp",round:"round",elbow:"elbow"},yB=.3,qb="element";var Du=(e=>(e.ACTIVE="active",e.AWAY="away",e.IDLE="idle",e))(Du||{});const jre=20,Yre=35,mp={background:"var(--mobile-action-button-bg)"},Oh={[tt.Excalifont]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25}},[tt.Nunito]:{metrics:{unitsPerEm:1e3,ascender:1011,descender:-353,lineHeight:1.25}},[tt["Lilita One"]]:{metrics:{unitsPerEm:1e3,ascender:923,descender:-220,lineHeight:1.15}},[tt["Comic Shanns"]]:{metrics:{unitsPerEm:1e3,ascender:750,descender:-250,lineHeight:1.25}},[tt.Virgil]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},deprecated:!0},[tt.Helvetica]:{metrics:{unitsPerEm:2048,ascender:1577,descender:-471,lineHeight:1.15},deprecated:!0,local:!0},[tt.Cascadia]:{metrics:{unitsPerEm:2048,ascender:1900,descender:-480,lineHeight:1.2},deprecated:!0},[tt["Liberation Sans"]]:{metrics:{unitsPerEm:2048,ascender:1854,descender:-434,lineHeight:1.15},private:!0},[tt.Assistant]:{metrics:{unitsPerEm:2048,ascender:1021,descender:-287,lineHeight:1.25},private:!0},[zf.Xiaolai]:{metrics:{unitsPerEm:1e3,ascender:880,descender:-144,lineHeight:1.25},fallback:!0},[zf["Segoe UI Emoji"]]:{metrics:{unitsPerEm:1e3,ascender:886,descender:-374,lineHeight:1.25},local:!0,fallback:!0}},xu={LATIN:"U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD",LATIN_EXT:"U+0100-02AF, U+0304, U+0308, U+0329, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF",CYRILIC_EXT:"U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F",CYRILIC:"U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116",VIETNAMESE:"U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329, U+1EA0-1EF9, U+20AB"},z9="local:",EB=(e,t,n)=>{var c;const{unitsPerEm:i,ascender:r,descender:s}=((c=Oh[e])==null?void 0:c.metrics)||Oh[tt.Excalifont].metrics,o=t/i,a=(n-o*r+o*s)/2;return o*r+a},Fc=e=>{var n;const{lineHeight:t}=((n=Oh[e])==null?void 0:n.metrics)||Oh[tt.Excalifont].metrics;return t};class Wre{constructor(){F(this,"jobs",[]);F(this,"running",!1)}tick(){if(this.running)return;const t=this.jobs.shift();t?(this.running=!0,t.promise.resolve(Bc(t.jobFactory,...t.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(t,...n){const i=iy();return this.jobs.push({jobFactory:t,promise:i,args:n}),this.tick(),i}}const vB="excalidraw.desktopUIMode",wB=599,Kre=1e3,Zre=500,qre=wB+1,Qre=1400,Jre=1440,ese=1229,ao=/Mac|iPod|iPhone|iPad/.test(navigator.platform),_B=/^Win/.test(navigator.platform),TB=/\b(android)\b/i.test(navigator.userAgent),l0=typeof window<"u"&&"netscape"in window&&navigator.userAgent.indexOf("rv:")>1&&navigator.userAgent.indexOf("Gecko")>1,tse=navigator.userAgent.indexOf("Chrome")!==-1,nse=!tse&&navigator.userAgent.indexOf("Safari")!==-1,H9=/iPad|iPhone/i.test(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,ise=()=>{var e,t;return((t=(e=navigator.brave)==null?void 0:e.isBrave)==null?void 0:t.name)==="isBrave"},rse=(e,t)=>e<=wB||t<Zre&&e<Kre,sse=(e,t)=>{const n=Math.min(e,t),i=Math.max(e,t);return n>=qre&&i<=Qre},ose=()=>{const e=navigator.userAgent||"",t=navigator.platform||"",n=navigator.userAgentData;if(n){const r=(n.platform||"").toLowerCase(),s=r==="windows"||r==="macos"||r==="linux"||r==="chrome os";if(n.mobile===!0)return!0;if(n.mobile===!1&&r==="android")return(matchMedia==null?void 0:matchMedia("(hover: none)").matches)&&(matchMedia==null?void 0:matchMedia("(pointer: coarse)").matches);if(s)return!1}if(H9)return!0;if(TB){const r=/Mobile/i.test(e);if(r||!r)return(matchMedia==null?void 0:matchMedia("(hover: none)").matches)&&(matchMedia==null?void 0:matchMedia("(pointer: coarse)").matches)}return/Win|Linux|CrOS|Mac/.test(t)||/Windows NT|X11|CrOS|Macintosh/.test(e),!1},ase=(e,t)=>rse(e,t)?"phone":sse(e,t)?"tablet":"desktop",p1=e=>e.formFactor==="phone"?"mobile":e.formFactor==="tablet"?"compact":e.desktopUIMode,IB=e=>{const t=e??"";let n="unknown";return H9?n="ios":TB?n="android":t&&(n="other"),{isMobileDevice:ose(),platform:n}},lse=()=>{if(typeof window>"u")return null;try{const e=window.localStorage.getItem(vB);if(e==="compact"||e==="full")return e}catch{}return null},cse=e=>{if(!(typeof window>"u"))try{window.localStorage.setItem(vB,e)}catch{}},use=e=>{if(!(e!=="compact"&&e!=="full"))return cse(e),e},it={EQUAL:"Equal",MINUS:"Minus",NUM_ADD:"NumpadAdd",NUM_SUBTRACT:"NumpadSubtract",NUM_ZERO:"Numpad0",BRACKET_RIGHT:"BracketRight",BRACKET_LEFT:"BracketLeft",ONE:"Digit1",TWO:"Digit2",THREE:"Digit3",QUOTE:"Quote",ZERO:"Digit0",SLASH:"Slash",C:"KeyC",D:"KeyD",H:"KeyH",V:"KeyV",Z:"KeyZ",Y:"KeyY",R:"KeyR",S:"KeyS"},V={ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",BACKSPACE:"Backspace",ALT:"Alt",CTRL_OR_CMD:ao?"metaKey":"ctrlKey",DELETE:"Delete",ENTER:"Enter",ESCAPE:"Escape",QUESTION_MARK:"?",SPACE:" ",TAB:"Tab",CHEVRON_LEFT:"<",CHEVRON_RIGHT:">",PERIOD:".",COMMA:",",SLASH:"/",A:"a",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",L:"l",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",V:"v",X:"x",Y:"y",Z:"z",K:"k",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},dse=new Map([[V.Z,it.Z],[V.Y,it.Y]]),fse=e=>/^[a-z]$/.test(e.toLowerCase()),_4=(e,t)=>{if(t===e.key.toLowerCase())return!0;const n=dse.get(t);return!!(n&&!fse(e.key)&&e.code===n)},Om=e=>e===V.ARROW_LEFT||e===V.ARROW_RIGHT||e===V.ARROW_DOWN||e===V.ARROW_UP,wA=e=>e.altKey,om=e=>e.shiftKey,U1=e=>e.shiftKey,pp=1e-4,Ze=(e,t,n)=>Math.min(Math.max(e,t),n),Ya=(e,t,n="round")=>{const i=Math.pow(10,t);return Math[n]((e+Number.EPSILON)*i)/i},hse=(e,t,n="round")=>{const i=1/t;return Math[n](e*i)/i},NU=(e,t)=>(e+t)/2,b1=e=>typeof e=="number"&&Number.isFinite(e),_A=(e,t,n=pp)=>Math.abs(e-t)<n,ro=e=>e<0?e%(2*Math.PI)+2*Math.PI:e%(2*Math.PI);function qu(e){return e*Math.PI/180}function ty(e){return e*180/Math.PI}function gse(e){return Math.abs(Math.sin(2*e))<pp}function mse(e,t,n){return e=ro(e),t=ro(t),n=ro(n),t<n?e>=t&&e<=n:e>=t||e<=n}function pse(e,t){e=ro(e),t=ro(t);let n=e-t;return n<-Math.PI?n=n+2*Math.PI:n>Math.PI&&(n=n-2*Math.PI),Math.abs(n)}function pn(e,t,n=0,i=0){return[e-n,t-i]}function he(e,t=[0,0],n,i=[0,1]){const r=pn(e[0]-t[0],e[1]-t[1]);return n&&SB(r)<n*n?i:r}function yt(e,t){return e[0]*t[1]-t[0]*e[1]}function y1(e,t){return e[0]*t[0]+e[1]*t[1]}function Vf(e,t){return[e[0]+t[0],e[1]+t[1]]}function Qb(e,t){return[e[0]-t[0],e[1]-t[1]]}function In(e,t){return pn(e[0]*t,e[1]*t)}function SB(e){return e[0]*e[0]+e[1]*e[1]}function Use(e){return Math.sqrt(SB(e))}const ts=e=>{const t=Use(e);return t===0?pn(0,0):pn(e[0]/t,e[1]/t)},xB=e=>pn(e[1],-e[0]);function S(e,t){return[e,t]}function ny(e){return e.length===2?S(e[0],e[1]):void 0}function Ei(e,t=S(0,0)){return S(t[0]+e[0],t[1]+e[1])}function $f(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&!isNaN(e[0])&&typeof e[1]=="number"&&!isNaN(e[1])}function Os(e,t,n=pp){const i=Math.abs;return i(e[0]-t[0])<n&&i(e[1]-t[1])<n}function q([e,t],[n,i],r){return S((e-n)*Math.cos(r)-(t-i)*Math.sin(r)+n,(e-n)*Math.sin(r)+(t-i)*Math.cos(r)+i)}function Jb(e,t=[0,0]){return S(e[0]+t[0],e[1]+t[1])}function e6(e,t){return S((e[0]+t[0])/2,(e[1]+t[1])/2)}function ct(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function Ra(e,t){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}const Pm=(e,t,n)=>Jb(t,In(he(e,t),n)),c0=(e,t,n)=>t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1]),CB=[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],AB=[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872];function Hn(e,t,n,i){return[e,t,n,i]}function bse(e,t,n,i,r=.001,s=10){let o=1/0,a=0;for(;o>=r;){if(a>=s)return null;const l=1-n,c=l*l,u=c*l,d=n*n,f=d*n,h=u*e[0][0]+3*c*n*e[1][0]+3*l*d*e[2][0]+f*e[3][0],m=u*e[0][1]+3*c*n*e[1][1]+3*l*d*e[2][1]+f*e[3][1],p=t[0][0]+i*(t[1][0]-t[0][0]),U=t[0][1]+i*(t[1][1]-t[0][1]),b=h-p,y=m-U;if(o=Math.abs(b)+Math.abs(y),o<r)break;const w=-3*c*e[0][0]+3*c*e[1][0]-6*l*n*e[1][0]-3*d*e[2][0]+6*l*n*e[2][0]+3*d*e[3][0],v=-3*c*e[0][1]+3*c*e[1][1]-6*l*n*e[1][1]-3*d*e[2][1]+6*l*n*e[2][1]+3*d*e[3][1],I=-(t[1][0]-t[0][0]),x=-(t[1][1]-t[0][1]),_=w*x-I*v;if(Math.abs(_)<1e-12)return null;const T=1/_,A=T*(x*-b-I*-y),C=T*(-v*-b+w*-y);n+=A,i+=C,a+=1}return[n,i]}const oh=(e,t)=>S((1-t)**3*e[0][0]+3*(1-t)**2*t*e[1][0]+3*(1-t)*t**2*e[2][0]+t**3*e[3][0],(1-t)**3*e[0][1]+3*(1-t)**2*t*e[1][1]+3*(1-t)*t**2*e[2][1]+t**3*e[3][1]),R8=[[.5,0],[.2,0],[.8,0]],k8=([e,t],n,i)=>{const r=bse(i,n,e,t,.01,3);if(!r)return null;const[s,o]=r;return s<0||s>1||o<0||o>1?null:oh(i,s)};function MB(e,t){let n=k8(R8[0],t,e);return n?[n]:(n=k8(R8[1],t,e),n?[n]:(n=k8(R8[2],t,e),n?[n]:[]))}function yse(e,t,n=.001){const i=(c,u,d,f=n)=>{let h=c,m=u,p;for(;m-h>f;)p=(m+h)/2,d(p-f)<d(p+f)?m=p:h=p;return p};let s=0;for(let c=1/0,u=0;u<30;u++){const d=ct(t,oh(e,u/30));d<c&&(c=d,s=u)}const o=Math.max((s-1)/30,0),a=Math.min((s+1)/30,1),l=i(o,a,c=>ct(t,oh(e,c)));return l?oh(e,l):null}function V9(e,t){const n=yse(e,t);return n?ct(t,n):0}function Ese(e){return Array.isArray(e)&&e.length===4&&$f(e[0])&&$f(e[1])&&$f(e[2])&&$f(e[3])}function $9([e,t,n,i],r){return pn(-3*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*t[0]-6*r*(1-r)*t[0]-3*r*r*n[0]+6*r*(1-r)*n[0]+3*r*r*i[0],-3*(1-r)*(1-r)*e[1]+3*(1-r)*(1-r)*t[1]-6*r*(1-r)*t[1]-3*r*r*n[1]+6*r*(1-r)*n[1]+3*r*r*i[1])}function vse(e,t=.5){if(e.length<2)return;const n=[];for(let i=0;i<e.length-1;i++){const r=e[i-1<0?0:i-1],s=e[i],o=e[i+1>=e.length?e.length-1:i+1],a=s[0]+(o[0]-r[0])*t/2,l=s[1]+(o[1]-r[1])*t/2;n.push([S(a,l),S(o[0],o[1])])}return n}function G9(e,t=.5){if(e.length<2)return;const n=[];for(let i=0;i<e.length-1;i++){const r=e[i-1<0?0:i-1],s=e[i],o=e[i+1>=e.length?e.length-1:i+1],a=e[i+2>=e.length?e.length-1:i+2],l=[(o[0]-r[0])*t,(o[1]-r[1])*t],c=[(a[0]-s[0])*t,(a[1]-s[1])*t],u=s[0]+l[0]/3,d=s[1]+l[1]/3,f=o[0]-c[0]/3,h=o[1]-c[1]/3;n.push(Hn(S(s[0],s[1]),S(u,d),S(f,h),S(o[0],o[1])))}return n}function wo([e,t,n,i],r,s=50){const o=[];for(let a=0;a<=s;a++){const l=a/s,c=Hn(e,t,n,i),u=oh(c,l),d=ts($9(c,l)),f=xB(d);o.push(Ei(In(f,r),u))}return o}function Ll(e,t,n,i,r=50){const s=[];for(let o=0;o<=r;o++){const a=o/r,l=1-a,c=S(l*l*e[0]+2*l*a*t[0]+a*a*n[0],l*l*e[1]+2*l*a*t[1]+a*a*n[1]),u=2*(1-a)*(t[0]-e[0])+2*a*(n[0]-t[0]),d=2*(1-a)*(t[1]-e[1])+2*a*(n[1]-t[1]),f=ts(pn(u,d)),h=xB(f);s.push(Ei(In(h,i),c))}return s}function X9(e){let n=0;for(let i=0;i<24;i++){const r=.5*CB[i]+.5,s=$9(e,r),o=Math.sqrt(s[0]*s[0]+s[1]*s[1]);n+=AB[i]*o}return .5*n}function wse(e,t){if(t<=0)return 0;if(t>=1)return X9(e);const n=t/2,i=t/2;let r=0;for(let s=0;s<24;s++){const o=n*CB[s]+i,a=$9(e,o),l=Math.sqrt(a[0]*a[0]+a[1]*a[1]);r+=AB[s]*l}return n*r}function _se(e,t){const n=X9(e),i=n*t;let r=0,s=1,o=t,a=0;const l=n*1e-4,c=20;for(let u=0;u<c&&(a=wse(e,o),!(Math.abs(a-i)<l));u++)a<i?r=o:s=o,o=(r+s)/2;return oh(e,o)}function RB(e,t,n){return{center:e,halfWidth:t,halfHeight:n}}const Tse=(e,t)=>{const{halfWidth:n,halfHeight:i,center:r}=t,s=n,o=i,a=Vf(he(e),In(he(r),-1)),l=Math.abs(a[0]),c=Math.abs(a[1]);let u=.707,d=.707;for(let m=0;m<3;m++){const p=s*u,U=o*d,b=(s*s-o*o)*u**3/s,y=(o*o-s*s)*d**3/o,w=p-b,v=U-y,I=l-b,x=c-y,_=Math.hypot(v,w),T=Math.hypot(x,I);u=Math.min(1,Math.max(0,(I*_/T+b)/s)),d=Math.min(1,Math.max(0,(x*_/T+y)/o));const A=Math.hypot(d,u);u/=A,d/=A}const[f,h]=[s*u*Math.sign(a[0]),o*d*Math.sign(a[1])];return ct(Ei(a),S(f,h))};function Ise(e,t){const n=e.halfWidth,i=e.halfHeight,r=he(t[1],t[0]),s=pn(t[0][0]-e.center[0],t[0][1]-e.center[1]),o=pn(r[0]/(n*n),r[1]/(i*i)),a=pn(s[0]/(n*n),s[1]/(i*i)),l=y1(r,o),c=y1(r,a),u=y1(s,a)-1,d=c*c-l*u,f=[];if(d>0){const h=(-c-Math.sqrt(d))/l,m=(-c+Math.sqrt(d))/l;0<=h&&h<=1&&f.push(S(t[0][0]+(t[1][0]-t[0][0])*h,t[0][1]+(t[1][1]-t[0][1])*h)),0<=m&&m<=1&&f.push(S(t[0][0]+(t[1][0]-t[0][0])*m,t[0][1]+(t[1][1]-t[0][1])*m))}else if(d===0){const h=-c/l;0<=h&&h<=1&&f.push(S(t[0][0]+(t[1][0]-t[0][0])*h,t[0][1]+(t[1][1]-t[0][1])*h))}return f}function TA(e,t){return[e,t]}function Sse(e,t){const n=e[1][1]-e[0][1],i=e[0][0]-e[1][0],r=t[1][1]-t[0][1],s=t[0][0]-t[1][0],o=n*s-r*i;if(o!==0){const a=n*e[0][0]+i*e[0][1],l=r*t[0][0]+s*t[0][1];return S((a*s-l*i)/o,(n*l-r*a)/o)}return null}function Me(e,t){return[e,t]}const xse=e=>Array.isArray(e)&&e.length===2&&$f(e[0])&&$f(e[0]),t6=(e,t,n=pp)=>{const i=oc(e,t);return i===0?!0:i<n},oc=(e,t)=>{const[n,i]=e,[[r,s],[o,a]]=t,l=n-r,c=i-s,u=o-r,d=a-s,f=l*u+c*d,h=u*u+d*d;let m=-1;h!==0&&(m=f/h);let p,U;m<0?(p=r,U=s):m>1?(p=o,U=a):(p=r+m*u,U=s+m*d);const b=n-p,y=i-U;return Math.sqrt(b*b+y*y)};function u0(e,t,n){const i=Sse(TA(e[0],e[1]),TA(t[0],t[1]));return!i||!t6(i,t,n)||!t6(i,e,n)?null:i}function IA(e,t){return u0(e,t)?0:Math.min(oc(e[0],t),oc(e[1],t),oc(t[0],e),oc(t[1],e))}function T4(...e){return LB(e)}function n6(e){return LB(e)}const kB=(e,t)=>{const[n,i]=e;let r=0;for(let s=0;s<t.length;s++){const o=(s+1)%t.length,[a,l]=t[s],[c,u]=t[o];l<=i?u>i&&(c-a)*(i-l)-(n-a)*(u-l)>0&&r++:u<=i&&(c-a)*(i-l)-(n-a)*(u-l)<0&&r--}return r!==0};function LB(e){return Cse(e)?e:[...e,e[0]]}function Cse(e){return Os(e[0],e[e.length-1])}function Vi(e,t){return Zo([e,t])}const i6=([e,t],[n,i])=>e<=n?t>=n:e>=n?i>=e:!1,r6=([e,t],[n,i])=>{const r=Math.max(e,n),s=Math.min(t,i);return r<=s?Zo([r,s]):null},OU=(e,[t,n])=>e>=t&&e<=n;function Ase(e,t){return[e,t]}function L8([e,t,n],i){const r=(u,d,f)=>(u[0]-f[0])*(d[1]-f[1])-(d[0]-f[0])*(u[1]-f[1]),s=r(i,e,t),o=r(i,t,n),a=r(i,n,e),l=s<0||o<0||a<0,c=s>0||o>0||a>0;return!(l&&c)}const Ph=e=>{const t=e.map(i=>i[0]),n=e.map(i=>i[1]);return{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}},s6=(e,t,n,i)=>{const r=n.map(h=>h[e]),s=Math.max(...r),o=Math.min(...r),a=s-o,l=a===0?1:t/a;let c=1/0;const u=n.map(h=>{const m=h[e]*l,p=[...h];return p[e]=m,m<c&&(c=m),p});if(!i||u.length===2)return u;const d=o-c;return u.map(h=>h.map((m,p)=>p===e?m+d:m))},Pn=(e,t,n)=>n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t];var DB={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Na,function(){var n=function(){this._listeners={}};n.prototype.addEventListener=function(c,u){this._listeners[c]=this._listeners[c]||[],this._listeners[c].indexOf(u)<0&&this._listeners[c].push(u)},n.prototype.removeEventListener=function(c,u){if(this._listeners[c]){var d=this._listeners[c].indexOf(u);d>=0&&this._listeners[c].splice(d,1)}},n.prototype.dispatchEvent=function(c){if(this._listeners[c.type]&&this._listeners[c.type].length)for(var u=this._listeners[c.type].slice(),d=0,f=u.length;d<f;++d)u[d].call(this,c)};var i=function(c){return typeof c.constructor=="function"&&c.constructor.name==="GeneratorFunction"},r=function(c){return{next:function(){var u=c();return u?{value:u}:{done:!0}}}},s=function(c){var u=!1;return{next:function(){return u?{done:!0}:(u=!0,{value:c})}}},o=function(c,u){var d=typeof c;if(d==="object"){if(typeof c.next=="function")return c;if(typeof c.then=="function")return s(c)}return d==="function"?i(c)?c():r(c):s(u.resolve(c))},a=function(c,u,d){this.target=c,this.type=u,this.data=d},l=function(c,u,d){if(n.call(this),typeof u!="number"||Math.floor(u)!==u||u<1)throw new Error("Invalid concurrency");this._concurrency=u,this._options=d||{},this._options.promise=this._options.promise||Promise,this._iterator=o(c,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return l.prototype=new n,l.prototype.constructor=l,l.prototype.concurrency=function(c){return typeof c<"u"&&(this._concurrency=c,this.active()&&this._proceed()),this._concurrency},l.prototype.size=function(){return this._size},l.prototype.active=function(){return!!this._promise},l.prototype.promise=function(){return this._promise},l.prototype.start=function(){var c=this,u=this._options.promise;return this._promise=new u(function(d,f){c._callbacks={reject:f,resolve:d},c._proceed()}),this._promise},l.prototype._fireEvent=function(c,u){this.dispatchEvent(new a(this,c,u))},l.prototype._settle=function(c){c?this._callbacks.reject(c):this._callbacks.resolve(),this._promise=null,this._callbacks=null},l.prototype._onPooledPromiseFulfilled=function(c,u){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:c,result:u}),this._proceed())},l.prototype._onPooledPromiseRejected=function(c,u){this._size--,this.active()&&(this._fireEvent("rejected",{promise:c,error:u}),this._settle(u||new Error("Unknown error")))},l.prototype._trackPromise=function(c){var u=this;c.then(function(d){u._onPooledPromiseFulfilled(c,d)},function(d){u._onPooledPromiseRejected(c,d)}).catch(function(d){u._settle(new Error("Promise processing failed: "+d))})},l.prototype._proceed=function(){if(!this._done){for(var c={done:!1};this._size<this._concurrency&&!(c=this._iterator.next()).done;)this._size++,this._trackPromise(c.value);this._done=c===null||!!c.done}this._done&&this._size===0&&this._settle()},l.PromisePoolEvent=a,l.PromisePool=l,l})})(DB);var Mse=DB.exports;const Rse=El(Mse);class SA{constructor(t,n){F(this,"pool");F(this,"entries",{});this.pool=new Rse(t,n)}all(){const t=n=>{if(n.data.result){const[i,r]=n.data.result;this.entries[i]=r}};return this.pool.addEventListener("fulfilled",t),this.pool.start().then(()=>(setTimeout(()=>{this.pool.removeEventListener("fulfilled",t)}),Object.values(this.entries)))}}let NB=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function kse(){return Math.floor(Math.random()*2**31)}class OB{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const xA=()=>{const e=new Date,t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),i=`${e.getDate()}`.padStart(2,"0"),r=`${e.getHours()}`.padStart(2,"0"),s=`${e.getMinutes()}`.padStart(2,"0");return`${t}-${n}-${i}-${r}${s}`},Rt=e=>e.charAt(0).toUpperCase()+e.slice(1),Lse=e=>e instanceof HTMLElement&&e.className.includes("ToolIcon"),I4=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement,Dse=e=>I4(e)||e instanceof Element&&!!e.closest("label, button"),ka=e=>e instanceof HTMLElement&&e.dataset.type==="wysiwyg"||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&(e.type==="text"||e.type==="number"||e.type==="password"||e.type==="search"),Up=({fontFamily:e})=>{for(const[t,n]of Object.entries(tt))if(n===e)return`${t}${fB(n).map(i=>`, ${i}`).join("")}`;return o0},pt=({fontSize:e,fontFamily:t})=>`${e}px ${Up({fontFamily:t})}`,Nse=async e=>{requestAnimationFrame(()=>requestAnimationFrame(e))},sl=(e,t)=>{let n=0,i=null;const r=(...s)=>{i=s,clearTimeout(n),n=window.setTimeout(()=>{i=null,e(...s)},t)};return r.flush=()=>{if(clearTimeout(n),i){const s=i;i=null,e(...s)}},r.cancel=()=>{i=null,clearTimeout(n)},r},bp=(e,t)=>{let n=null,i=null,r=null;const s=a=>{n=window.requestAnimationFrame(()=>{n=null,e(...a),i=null,r&&(i=r,r=null,s(i))})},o=(...a)=>{i=a,n===null?s(i):t!=null&&t.trailing&&(r=a)};return o.flush=()=>{n!==null&&(cancelAnimationFrame(n),n=null),i&&(e(...r||i),i=r=null)},o.cancel=()=>{i=r=null,n!==null&&(cancelAnimationFrame(n),n=null)},o},ol=e=>1-Math.pow(1-e,4),CA=(e,t,n)=>(t-e)*ol(n)+e,Ose=({fromValues:e,toValues:t,onStep:n,duration:i=250,interpolateValue:r,onStart:s,onEnd:o,onCancel:a})=>{let l=!1,c=0,u;function d(f){if(l)return;u===void 0&&(u=f,s==null||s());const h=Math.min(f-u,i),m=ol(h/i),p={};if(Object.keys(e).forEach(U=>{const b=U,y=(t[b]-e[b])*m+e[b];p[b]=y}),n(p),h<i){const U=h/i,b={};Object.keys(e).forEach(y=>{const w=y,v=e[w],I=t[w];let x;x=r?r(v,I,U,w):CA(v,I,U),x==null&&(x=CA(v,I,U)),b[w]=x}),n(b),c=window.requestAnimationFrame(d)}else n(t),o==null||o()}return c=window.requestAnimationFrame(d),()=>{a==null||a(),l=!0,window.cancelAnimationFrame(c)}},Pse=(e,t)=>{if(!e.length||t<1)return[];let n=0,i=0;const r=Array(Math.ceil(e.length/t));for(;n<e.length;)r[i++]=e.slice(n,n+=t);return r},Gi=(e,t)=>Math.abs(e-t),tn=(e,t)=>t.type==="custom"?{...e.activeTool,type:"custom",customType:t.customType,locked:t.locked??e.activeTool.locked}:{...e.activeTool,lastActiveTool:t.lastActiveToolBeforeEraser===void 0?e.activeTool.lastActiveTool:t.lastActiveToolBeforeEraser,type:t.type,customType:null,locked:t.locked??e.activeTool.locked,fromSelection:t.fromSelection??!1},Nt=({clientX:e,clientY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e-i)/n.value-s,l=(t-r)/n.value-o;return{x:a,y:l}},Kr=({sceneX:e,sceneY:t},{zoom:n,offsetLeft:i,offsetTop:r,scrollX:s,scrollY:o})=>{const a=(e+s)*n.value+i,l=(t+o)*n.value+r;return{x:a,y:l}},PU=e=>getComputedStyle(document.documentElement).getPropertyValue(`--${e}`),Fse="A-Za-z--------",Bse="---",zse=new RegExp(`^[^${Fse}]*[${Bse}]`),PB=e=>zse.test(e),Wa=e=>{const[t,n]=e;return{x:t,y:n}},FB=e=>{if((e==null?void 0:e.name)==="AbortError"){console.warn(e);return}throw e},BB=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let i=n-1;for(;++i<e.length;)if(t(e[i],i,e))return i;return-1},Cu=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let i=n+1;for(;--i>-1;)if(t(e[i],i,e))return i;return-1},Hse=(e,t)=>{for(let n=0;n<e.length;n++){const i=t(e[n],n);if(i!=null)return i}},Sr=e=>{const t=e.length===5&&e.substr(4,1)==="0",n=e.length===9&&e.substr(7,2)==="00";return t||n||e===je.transparent},L2=e=>e.fillStyle!=="solid"||Sr(e.backgroundColor),iy=()=>{let e,t;const n=new Promise((i,r)=>{e=i,t=r});return n.resolve=e,n.reject=t,n},AA=(e,t)=>{const n=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}],i=/\.0+$|(\.[0-9]*[1-9])0+$/;let r;for(r=n.length-1;r>0&&!(e>=n[r].value);r--);return(e/n[r].value).toFixed(t).replace(i,"$1")+n[r].symbol},S4=()=>{var e;return((e=document.querySelector('meta[name="version"]'))==null?void 0:e.content)||hB},Vse=e=>{let t=e.parentElement;for(;t;){if(t===document.body)return document;const{overflowY:n}=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return t;t=t.parentElement}return document},$se=e=>{let t=e.parentElement;for(;t;){if(t.tabIndex>-1){t.focus();return}t=t.parentElement}},j9=e=>{e.preventDefault(),e.returnValue=""},zB=e=>Array.from(e).map(t=>`0${t.toString(16)}`.slice(-2)).join(""),yg=()=>Date.now(),ve=e=>e instanceof Map?e:e.reduce((t,n)=>(t.set(typeof n=="string"?n:n.id,n),t),new Map),Gse=e=>e.reduce((t,n,i)=>(t.set(n.id,[n,i]),t),new Map),Ua=(e,t)=>e.reduce((n,i,r)=>(n[t?t(i):r]=i,n),{}),Xse=e=>e.reduce((t,n,i)=>{const r={...n,prev:null,next:null};if(i!==0){const s=t[i-1];if(r.prev=s,s.next=r,i===e.length-1){const o=t[0];r.next=o,o.prev=r}}return t.push(r),t},[]),Yl=e=>Array.isArray(e)?e:e.values(),jse=e=>Array.isArray(e)?e:Array.from(Yl(e)),Yse=()=>cB.TEST==="production",Y9=()=>cB.DEVELOPMENT==="production",Wse=()=>typeof process<"u"&&!0,HB=(e,t)=>new CustomEvent(e,{detail:{nativeEvent:t},cancelable:!0}),D2=(e,t)=>{let n=!1;for(const i in t){const r=t[i];if(typeof r<"u"){if(e[i]===r&&(typeof r!="object"||r===null))continue;n=!0}}return n?{...e,...t}:e},yp=()=>{try{return window.self===window.top?"top":"iframe"}catch{return"iframe"}},Kse=()=>yp()==="iframe",Ep=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,x4=e=>{const t=e==null?void 0:e.querySelectorAll("button, a, input, select, textarea, div[tabindex], label[tabindex]");return t?Array.from(t).filter(n=>n.tabIndex>-1&&!n.disabled):[]},MA=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t,Ki=(e,t,n,i=!1)=>{const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return i&&console.warn("%cisShallowEqual: objects don't have same properties ->","color: #8B4000",e,t),!1;if(n&&Array.isArray(n)){for(const o of n)if(!(e[o]===t[o]||MA(e[o],t[o])))return i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),!1;return!0}return r.every(o=>{const a=n==null?void 0:n[o],l=a?a(e[o],t[o]):e[o]===t[o]||MA(e[o],t[o]);return!l&&i&&console.warn(`%cisShallowEqual: ${o} not equal ->`,"color: #8B4000",e[o],t[o]),l})},ry=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(r){if(e==null||e(r),!n||!(r!=null&&r.defaultPrevented))return t==null?void 0:t(r)},Ko=(e,t,n)=>{if(!t)return e;if(n)return console.error(t),e;throw new Error(t)};function gn(e,t){if(!e)throw new Error(t)}const Zse=e=>{let t,n;const i=function(r){const s=Object.entries(r);if(t){let a=!0;for(const[l,c]of s)if(t.get(l)!==c){a=!1;break}if(a)return n}const o=e(r);return t=new Map(s),n=o,o};return i.clear=()=>{t=void 0,n=void 0},i},VB=(e,t)=>e instanceof Set||e instanceof Map?e.has(t):"includes"in e?e.includes(t):e.hasOwnProperty(t),Ka=e=>JSON.parse(JSON.stringify(e)),am=(e,t)=>Ki(e,t)?e:t;function en(e,t,n,i){var r;return e?((r=e==null?void 0:e.addEventListener)==null||r.call(e,t,n,i),()=>{var s;(s=e==null?void 0:e.removeEventListener)==null||s.call(e,t,n,i)}):()=>{}}function qse(e,t=!0){const n=e.length;if(n<4)return"";let i=e[0],r=e[1];const s=e[2];let o=`M${i[0].toFixed(2)},${i[1].toFixed(2)} Q${r[0].toFixed(2)},${r[1].toFixed(2)} ${NU(r[0],s[0]).toFixed(2)},${NU(r[1],s[1]).toFixed(2)} T`;for(let a=2,l=n-1;a<l;a++)i=e[a],r=e[a+1],o+=`${NU(i[0],r[0]).toFixed(2)},${NU(i[1],r[1]).toFixed(2)} `;return t&&(o+="Z"),o}const $B=e=>e.replace(/\r?\n|\r/g,`
`),Zo=e=>e,Bc=async(e,...t)=>new Promise(n=>{n(e(...t))}),Qse=(...e)=>Math.max(...e.map(t=>t?1:0))>0,Jse=e=>{try{return JSON.parse(e)}catch{return null}},N2=e=>e.replace(/"/g,"&quot;"),D8=e=>Array.isArray(e)?e:[e],eoe=e=>Array.isArray(e),GB=e=>eoe(e)?e.length:e instanceof Map||e instanceof Set?e.size:Object.keys(e).length,XB=(e,t)=>{if(GB(e)===0)return null;const n=t||(r=>r);let i=null;for(const r of e){const s=n(r);if((i===null||i===s)&&s!=null)i=s;else return null}return i};let toe=new OB(Date.now());const Ps=()=>Math.floor(toe.next()*2**31),mr=()=>NB();var W9={};Object.defineProperty(W9,"__esModule",{value:!0});var jB=W9.sanitizeUrl=void 0,noe=/^([^\w]*)(javascript|data|vbscript)/im,ioe=/&#(\w+)(^\w|;)?/g,roe=/&(newline|tab);/gi,soe=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,ooe=/^.+(:|&colon;)/gim,aoe=[".","/"];function loe(e){return aoe.indexOf(e[0])>-1}function coe(e){return e.replace(ioe,function(t,n){return String.fromCharCode(n)})}function uoe(e){var t=coe(e||"").replace(roe,"").replace(soe,"").trim();if(!t)return"about:blank";if(loe(t))return t;var n=t.match(ooe);if(!n)return t;var i=n[0];return noe.test(i)?"about:blank":t}jB=W9.sanitizeUrl=uoe;const ns=e=>(e=e.trim(),e&&jB(N2(e))),YB=e=>!!(e!=null&&e.includes(location.origin)||e!=null&&e.startsWith("/")),K9=e=>{if(e=ns(e),e.startsWith("/"))return`${location.origin}${e}`;try{new URL(e)}catch{return"about:blank"}return e};class Ys{constructor(){F(this,"subscribers",[])}on(...t){const n=t.flat().filter(i=>typeof i=="function");return this.subscribers.push(...n),()=>this.off(n)}once(...t){const n=t.flat().filter(r=>typeof r=="function");n.push(()=>i());const i=this.on(...n);return i}off(...t){const n=t.flat();this.subscribers=this.subscribers.filter(i=>!n.includes(i))}trigger(...t){for(const n of this.subscribers)n(...t);return this}clear(){this.subscribers=[]}}function C4(e,t,n){if(e&&e.length){const[i,r]=t,s=Math.PI/180*n,o=Math.cos(s),a=Math.sin(s);for(const l of e){const[c,u]=l;l[0]=(c-i)*o-(u-r)*a+i,l[1]=(c-i)*a+(u-r)*o+r}}}function doe(e,t,n){const i=[];e.forEach(r=>i.push(...r)),C4(i,t,n)}function foe(e,t){return e[0]===t[0]&&e[1]===t[1]}function hoe(e,t,n,i=1){const r=n,s=Math.max(t,.1),o=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,a=[0,0];if(r)for(const c of o)C4(c,a,r);const l=goe(o,s,i);if(r){for(const c of o)C4(c,a,-r);doe(l,a,-r)}return l}function goe(e,t,n){const i=[];for(const c of e){const u=[...c];foe(u[0],u[u.length-1])||u.push([u[0][0],u[0][1]]),u.length>2&&i.push(u)}const r=[];t=Math.max(t,.1);const s=[];for(const c of i)for(let u=0;u<c.length-1;u++){const d=c[u],f=c[u+1];if(d[1]!==f[1]){const h=Math.min(d[1],f[1]);s.push({ymin:h,ymax:Math.max(d[1],f[1]),x:h===d[1]?d[0]:f[0],islope:(f[0]-d[0])/(f[1]-d[1])})}}if(s.sort((c,u)=>c.ymin<u.ymin?-1:c.ymin>u.ymin?1:c.x<u.x?-1:c.x>u.x?1:c.ymax===u.ymax?0:(c.ymax-u.ymax)/Math.abs(c.ymax-u.ymax)),!s.length)return r;let o=[],a=s[0].ymin,l=0;for(;o.length||s.length;){if(s.length){let c=-1;for(let d=0;d<s.length&&!(s[d].ymin>a);d++)c=d;s.splice(0,c+1).forEach(d=>{o.push({s:a,edge:d})})}if(o=o.filter(c=>!(c.edge.ymax<=a)),o.sort((c,u)=>c.edge.x===u.edge.x?0:(c.edge.x-u.edge.x)/Math.abs(c.edge.x-u.edge.x)),(n!==1||l%t===0)&&o.length>1)for(let c=0;c<o.length;c=c+2){const u=c+1;if(u>=o.length)break;const d=o[c].edge,f=o[u].edge;r.push([[Math.round(d.x),a],[Math.round(f.x),a]])}a+=n,o.forEach(c=>{c.edge.x=c.edge.x+n*c.edge.islope}),l++}return r}function vp(e,t){var n;const i=t.hachureAngle+90;let r=t.hachureGap;r<0&&(r=t.strokeWidth*4),r=Math.max(r,.1);let s=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),hoe(e,r,i,s||1)}class Z9{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const i=vp(t,n);return{type:"fillSketch",ops:this.renderLines(i,n)}}renderLines(t,n){const i=[];for(const r of t)i.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return i}}function sy(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class moe extends Z9{fillPolygons(t,n){let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);const r=Object.assign({},n,{hachureGap:i}),s=vp(t,r),o=Math.PI/180*n.hachureAngle,a=[],l=i*.5*Math.cos(o),c=i*.5*Math.sin(o);for(const[d,f]of s)sy([d,f])&&a.push([[d[0]-l,d[1]+c],[...f]],[[d[0]+l,d[1]-c],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,n)}}}class poe extends Z9{fillPolygons(t,n){const i=this._fillPolygons(t,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(t,r);return i.ops=i.ops.concat(s.ops),i}}class Uoe{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const i=vp(t,n);return this.dotsOnLines(i,n)}dotsOnLines(t,n){const i=[];let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const a of t){const l=sy(a),c=l/r,u=Math.ceil(c)-1,d=l-u*r,f=(a[0][0]+a[1][0])/2-r/4,h=Math.min(a[0][1],a[1][1]);for(let m=0;m<u;m++){const p=h+d+m*r,U=f-o+Math.random()*2*o,b=p-o+Math.random()*2*o,y=this.helper.ellipse(U,b,s,s,n);i.push(...y.ops)}}return{type:"fillSketch",ops:i}}}class boe{constructor(t){this.helper=t}fillPolygons(t,n){const i=vp(t,n);return{type:"fillSketch",ops:this.dashedLine(i,n)}}dashedLine(t,n){const i=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,s=[];return t.forEach(o=>{const a=sy(o),l=Math.floor(a/(i+r)),c=(a+r-l*(i+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let h=0;h<l;h++){const m=h*(i+r),p=m+i,U=[u[0]+m*Math.cos(f)+c*Math.cos(f),u[1]+m*Math.sin(f)+c*Math.sin(f)],b=[u[0]+p*Math.cos(f)+c*Math.cos(f),u[1]+p*Math.sin(f)+c*Math.sin(f)];s.push(...this.helper.doubleLineOps(U[0],U[1],b[0],b[1],n))}}),s}}class yoe{constructor(t){this.helper=t}fillPolygons(t,n){const i=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,r=n.zigzagOffset<0?i:n.zigzagOffset;n=Object.assign({},n,{hachureGap:i+r});const s=vp(t,n);return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(t,n,i){const r=[];return t.forEach(s=>{const o=sy(s),a=Math.round(o/(2*n));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const u=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let d=0;d<a;d++){const f=d*2*n,h=(d+1)*2*n,m=Math.sqrt(2*Math.pow(n,2)),p=[l[0]+f*Math.cos(u),l[1]+f*Math.sin(u)],U=[l[0]+h*Math.cos(u),l[1]+h*Math.sin(u)],b=[p[0]+m*Math.cos(u+Math.PI/4),p[1]+m*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(p[0],p[1],b[0],b[1],i),...this.helper.doubleLineOps(b[0],b[1],U[0],U[1],i))}}),r}}const Er={};function Eoe(e,t){let n=e.fillStyle||"hachure";if(!Er[n])switch(n){case"zigzag":Er[n]||(Er[n]=new moe(t));break;case"cross-hatch":Er[n]||(Er[n]=new poe(t));break;case"dots":Er[n]||(Er[n]=new Uoe(t));break;case"dashed":Er[n]||(Er[n]=new boe(t));break;case"zigzag-line":Er[n]||(Er[n]=new yoe(t));break;case"hachure":default:n="hachure",Er[n]||(Er[n]=new Z9(t));break}return Er[n]}const voe=0,A4=1,WB=2,FU={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function woe(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:voe,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:A4,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:WB,text:""},t}function N8(e,t){return e.type===t}function q9(e){const t=[],n=woe(e);let i="BOD",r=0,s=n[r];for(;!N8(s,WB);){let o=0;const a=[];if(i==="BOD")if(s.text==="M"||s.text==="m")r++,o=FU[s.text],i=s.text;else return q9("M0,0"+e);else N8(s,A4)?o=FU[i]:(r++,o=FU[s.text],i=s.text);if(r+o<n.length){for(let l=r;l<r+o;l++){const c=n[l];if(N8(c,A4))a[a.length]=+c.text;else throw new Error("Param not a number: "+i+","+c.text)}if(typeof FU[i]=="number"){const l={key:i,data:a};t.push(l),r+=o,s=n[r],i==="M"&&(i="L"),i==="m"&&(i="l")}else throw new Error("Bad segment: "+i)}else throw new Error("Path data ended short")}return t}function KB(e){let t=0,n=0,i=0,r=0;const s=[];for(const{key:o,data:a}of e)switch(o){case"M":s.push({key:"M",data:[...a]}),[t,n]=a,[i,r]=a;break;case"m":t+=a[0],n+=a[1],s.push({key:"M",data:[t,n]}),i=t,r=n;break;case"L":s.push({key:"L",data:[...a]}),[t,n]=a;break;case"l":t+=a[0],n+=a[1],s.push({key:"L",data:[t,n]});break;case"C":s.push({key:"C",data:[...a]}),t=a[4],n=a[5];break;case"c":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),t=a[2],n=a[3];break;case"q":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":s.push({key:"A",data:[...a]}),t=a[5],n=a[6];break;case"a":t+=a[5],n+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,n]});break;case"H":s.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],s.push({key:"H",data:[t]});break;case"V":s.push({key:"V",data:[...a]}),n=a[0];break;case"v":n+=a[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...a]}),t=a[2],n=a[3];break;case"s":{const l=a.map((c,u)=>u%2?c+n:c+t);s.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":s.push({key:"T",data:[...a]}),t=a[0],n=a[1];break;case"t":t+=a[0],n+=a[1],s.push({key:"T",data:[t,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),t=i,n=r;break}return s}function ZB(e){const t=[];let n="",i=0,r=0,s=0,o=0,a=0,l=0;for(const{key:c,data:u}of e){switch(c){case"M":t.push({key:"M",data:[...u]}),[i,r]=u,[s,o]=u;break;case"C":t.push({key:"C",data:[...u]}),i=u[4],r=u[5],a=u[2],l=u[3];break;case"L":t.push({key:"L",data:[...u]}),[i,r]=u;break;case"H":i=u[0],t.push({key:"L",data:[i,r]});break;case"V":r=u[0],t.push({key:"L",data:[i,r]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=i+(i-a),f=r+(r-l)):(d=i,f=r),t.push({key:"C",data:[d,f,...u]}),a=u[0],l=u[1],i=u[2],r=u[3];break}case"T":{const[d,f]=u;let h=0,m=0;n==="Q"||n==="T"?(h=i+(i-a),m=r+(r-l)):(h=i,m=r);const p=i+2*(h-i)/3,U=r+2*(m-r)/3,b=d+2*(h-d)/3,y=f+2*(m-f)/3;t.push({key:"C",data:[p,U,b,y,d,f]}),a=h,l=m,i=d,r=f;break}case"Q":{const[d,f,h,m]=u,p=i+2*(d-i)/3,U=r+2*(f-r)/3,b=h+2*(d-h)/3,y=m+2*(f-m)/3;t.push({key:"C",data:[p,U,b,y,h,m]}),a=d,l=f,i=h,r=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),h=u[2],m=u[3],p=u[4],U=u[5],b=u[6];d===0||f===0?(t.push({key:"C",data:[i,r,U,b,U,b]}),i=U,r=b):(i!==U||r!==b)&&(qB(i,r,U,b,d,f,h,m,p).forEach(function(w){t.push({key:"C",data:w})}),i=U,r=b);break}case"Z":t.push({key:"Z",data:[]}),i=s,r=o;break}n=c}return t}function _oe(e){return Math.PI*e/180}function lm(e,t,n){const i=e*Math.cos(n)-t*Math.sin(n),r=e*Math.sin(n)+t*Math.cos(n);return[i,r]}function qB(e,t,n,i,r,s,o,a,l,c){const u=_oe(o);let d=[],f=0,h=0,m=0,p=0;if(c)[f,h,m,p]=c;else{[e,t]=lm(e,t,-u),[n,i]=lm(n,i,-u);const P=(e-n)/2,D=(t-i)/2;let j=P*P/(r*r)+D*D/(s*s);j>1&&(j=Math.sqrt(j),r=j*r,s=j*s);const G=a===l?-1:1,B=r*r,H=s*s,$=B*H-B*D*D-H*P*P,X=B*D*D+H*P*P,W=G*Math.sqrt(Math.abs($/X));m=W*r*D/s+(e+n)/2,p=W*-s*P/r+(t+i)/2,f=Math.asin(parseFloat(((t-p)/s).toFixed(9))),h=Math.asin(parseFloat(((i-p)/s).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=Math.PI*2+f),h<0&&(h=Math.PI*2+h),l&&f>h&&(f=f-Math.PI*2),!l&&h>f&&(h=h-Math.PI*2)}let U=h-f;if(Math.abs(U)>Math.PI*120/180){const P=h,D=n,j=i;l&&h>f?h=f+Math.PI*120/180*1:h=f+Math.PI*120/180*-1,n=m+r*Math.cos(h),i=p+s*Math.sin(h),d=qB(n,i,D,j,r,s,o,0,l,[h,P,m,p])}U=h-f;const b=Math.cos(f),y=Math.sin(f),w=Math.cos(h),v=Math.sin(h),I=Math.tan(U/4),x=4/3*r*I,_=4/3*s*I,T=[e,t],A=[e+x*y,t-_*b],C=[n+x*v,i-_*w],k=[n,i];if(A[0]=2*T[0]-A[0],A[1]=2*T[1]-A[1],c)return[A,C,k].concat(d);{d=[A,C,k].concat(d);const P=[];for(let D=0;D<d.length;D+=3){const j=lm(d[D][0],d[D][1],u),G=lm(d[D+1][0],d[D+1][1],u),B=lm(d[D+2][0],d[D+2][1],u);P.push([j[0],j[1],G[0],G[1],B[0],B[1]])}return P}}const Toe={randOffset:Aoe,randOffsetWithRange:Moe,ellipse:xoe,doubleLineOps:Roe};function QB(e,t,n,i,r){return{type:"path",ops:al(e,t,n,i,r)}}function O2(e,t,n){const i=(e||[]).length;if(i>2){const r=[];for(let s=0;s<i-1;s++)r.push(...al(e[s][0],e[s][1],e[s+1][0],e[s+1][1],n));return t&&r.push(...al(e[i-1][0],e[i-1][1],e[0][0],e[0][1],n)),{type:"path",ops:r}}else if(i===2)return QB(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function Ioe(e,t){return O2(e,!0,t)}function Soe(e,t,n,i,r){const s=[[e,t],[e+n,t],[e+n,t+i],[e,t+i]];return Ioe(s,r)}function RA(e,t){let n=NA(e,1*(1+t.roughness*.2),t);if(!t.disableMultiStroke){const i=NA(e,1.5*(1+t.roughness*.22),koe(t));n=n.concat(i)}return{type:"path",ops:n}}function xoe(e,t,n,i,r){const s=JB(n,i,r);return M4(e,t,r,s).opset}function JB(e,t,n){const i=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*i)),s=Math.PI*2/r;let o=Math.abs(e/2),a=Math.abs(t/2);const l=1-n.curveFitting;return o+=Pe(o*l,n),a+=Pe(a*l,n),{increment:s,rx:o,ry:a}}function M4(e,t,n,i){const[r,s]=OA(i.increment,e,t,i.rx,i.ry,1,i.increment*o6(.1,o6(.4,1,n),n),n);let o=a6(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[a]=OA(i.increment,e,t,i.rx,i.ry,1.5,0,n),l=a6(a,null,n);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function kA(e,t,n,i,r,s,o,a,l){const c=e,u=t;let d=Math.abs(n/2),f=Math.abs(i/2);d+=Pe(d*.01,l),f+=Pe(f*.01,l);let h=r,m=s;for(;h<0;)h+=Math.PI*2,m+=Math.PI*2;m-h>Math.PI*2&&(h=0,m=Math.PI*2);const p=Math.PI*2/l.curveStepCount,U=Math.min(p/2,(m-h)/2),b=PA(U,c,u,d,f,h,m,1,l);if(!l.disableMultiStroke){const y=PA(U,c,u,d,f,h,m,1.5,l);b.push(...y)}return o&&(a?b.push(...al(c,u,c+d*Math.cos(h),u+f*Math.sin(h),l),...al(c,u,c+d*Math.cos(m),u+f*Math.sin(m),l)):b.push({op:"lineTo",data:[c,u]},{op:"lineTo",data:[c+d*Math.cos(h),u+f*Math.sin(h)]})),{type:"path",ops:b}}function LA(e,t){const n=ZB(KB(q9(e))),i=[];let r=[0,0],s=[0,0];for(const{key:o,data:a}of n)switch(o){case"M":{s=[a[0],a[1]],r=[a[0],a[1]];break}case"L":i.push(...al(s[0],s[1],a[0],a[1],t)),s=[a[0],a[1]];break;case"C":{const[l,c,u,d,f,h]=a;i.push(...Loe(l,c,u,d,f,h,s,t)),s=[f,h];break}case"Z":i.push(...al(s[0],s[1],r[0],r[1],t)),s=[r[0],r[1]];break}return{type:"path",ops:i}}function O8(e,t){const n=[];for(const i of e)if(i.length){const r=t.maxRandomnessOffset||0,s=i.length;if(s>2){n.push({op:"move",data:[i[0][0]+Pe(r,t),i[0][1]+Pe(r,t)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[i[o][0]+Pe(r,t),i[o][1]+Pe(r,t)]})}}return{type:"fillPath",ops:n}}function Ef(e,t){return Eoe(t,Toe).fillPolygons(e,t)}function Coe(e,t,n,i,r,s,o){const a=e,l=t;let c=Math.abs(n/2),u=Math.abs(i/2);c+=Pe(c*.01,o),u+=Pe(u*.01,o);let d=r,f=s;for(;d<0;)d+=Math.PI*2,f+=Math.PI*2;f-d>Math.PI*2&&(d=0,f=Math.PI*2);const h=(f-d)/o.curveStepCount,m=[];for(let p=d;p<=f;p=p+h)m.push([a+c*Math.cos(p),l+u*Math.sin(p)]);return m.push([a+c*Math.cos(f),l+u*Math.sin(f)]),m.push([a,l]),Ef([m],o)}function Aoe(e,t){return Pe(e,t)}function Moe(e,t,n){return o6(e,t,n)}function Roe(e,t,n,i,r){return al(e,t,n,i,r,!0)}function koe(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function ez(e){return e.randomizer||(e.randomizer=new OB(e.seed||0)),e.randomizer.next()}function o6(e,t,n,i=1){return n.roughness*i*(ez(n)*(t-e)+e)}function Pe(e,t,n=1){return o6(-e,e,t,n)}function al(e,t,n,i,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,a=DA(e,t,n,i,r,!0,!1);if(o)return a;const l=DA(e,t,n,i,r,!0,!0);return a.concat(l)}function DA(e,t,n,i,r,s,o){const a=Math.pow(e-n,2)+Math.pow(t-i,2),l=Math.sqrt(a);let c=1;l<200?c=1:l>500?c=.4:c=-.0016668*l+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>a&&(u=l/10);const d=u/2,f=.2+ez(r)*.2;let h=r.bowing*r.maxRandomnessOffset*(i-t)/200,m=r.bowing*r.maxRandomnessOffset*(e-n)/200;h=Pe(h,r,c),m=Pe(m,r,c);const p=[],U=()=>Pe(d,r,c),b=()=>Pe(u,r,c),y=r.preserveVertices;return o?p.push({op:"move",data:[e+(y?0:U()),t+(y?0:U())]}):p.push({op:"move",data:[e+(y?0:Pe(u,r,c)),t+(y?0:Pe(u,r,c))]}),o?p.push({op:"bcurveTo",data:[h+e+(n-e)*f+U(),m+t+(i-t)*f+U(),h+e+2*(n-e)*f+U(),m+t+2*(i-t)*f+U(),n+(y?0:U()),i+(y?0:U())]}):p.push({op:"bcurveTo",data:[h+e+(n-e)*f+b(),m+t+(i-t)*f+b(),h+e+2*(n-e)*f+b(),m+t+2*(i-t)*f+b(),n+(y?0:b()),i+(y?0:b())]}),p}function NA(e,t,n){const i=[];i.push([e[0][0]+Pe(t,n),e[0][1]+Pe(t,n)]),i.push([e[0][0]+Pe(t,n),e[0][1]+Pe(t,n)]);for(let r=1;r<e.length;r++)i.push([e[r][0]+Pe(t,n),e[r][1]+Pe(t,n)]),r===e.length-1&&i.push([e[r][0]+Pe(t,n),e[r][1]+Pe(t,n)]);return a6(i,null,n)}function a6(e,t,n){const i=e.length,r=[];if(i>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[e[1][0],e[1][1]]});for(let a=1;a+2<i;a++){const l=e[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*e[a+1][0]-o*e[a-1][0])/6,l[1]+(o*e[a+1][1]-o*e[a-1][1])/6],s[2]=[e[a+1][0]+(o*e[a][0]-o*e[a+2][0])/6,e[a+1][1]+(o*e[a][1]-o*e[a+2][1])/6],s[3]=[e[a+1][0],e[a+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(r.push({op:"move",data:[e[1][0],e[1][1]]}),r.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):i===2&&r.push(...al(e[0][0],e[0][1],e[1][0],e[1][1],n));return r}function OA(e,t,n,i,r,s,o,a){const l=a.roughness===0,c=[],u=[];if(l){e=e/4,u.push([t+i*Math.cos(-e),n+r*Math.sin(-e)]);for(let d=0;d<=Math.PI*2;d=d+e){const f=[t+i*Math.cos(d),n+r*Math.sin(d)];c.push(f),u.push(f)}u.push([t+i*Math.cos(0),n+r*Math.sin(0)]),u.push([t+i*Math.cos(e),n+r*Math.sin(e)])}else{const d=Pe(.5,a)-Math.PI/2;u.push([Pe(s,a)+t+.9*i*Math.cos(d-e),Pe(s,a)+n+.9*r*Math.sin(d-e)]);const f=Math.PI*2+d-.01;for(let h=d;h<f;h=h+e){const m=[Pe(s,a)+t+i*Math.cos(h),Pe(s,a)+n+r*Math.sin(h)];c.push(m),u.push(m)}u.push([Pe(s,a)+t+i*Math.cos(d+Math.PI*2+o*.5),Pe(s,a)+n+r*Math.sin(d+Math.PI*2+o*.5)]),u.push([Pe(s,a)+t+.98*i*Math.cos(d+o),Pe(s,a)+n+.98*r*Math.sin(d+o)]),u.push([Pe(s,a)+t+.9*i*Math.cos(d+o*.5),Pe(s,a)+n+.9*r*Math.sin(d+o*.5)])}return[u,c]}function PA(e,t,n,i,r,s,o,a,l){const c=s+Pe(.1,l),u=[];u.push([Pe(a,l)+t+.9*i*Math.cos(c-e),Pe(a,l)+n+.9*r*Math.sin(c-e)]);for(let d=c;d<=o;d=d+e)u.push([Pe(a,l)+t+i*Math.cos(d),Pe(a,l)+n+r*Math.sin(d)]);return u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),u.push([t+i*Math.cos(o),n+r*Math.sin(o)]),a6(u,null,l)}function Loe(e,t,n,i,r,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let u=[0,0];const d=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let h=0;h<d;h++)h===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(f?0:Pe(c[0],a)),o[1]+(f?0:Pe(c[0],a))]}),u=f?[r,s]:[r+Pe(c[h],a),s+Pe(c[h],a)],l.push({op:"bcurveTo",data:[e+Pe(c[h],a),t+Pe(c[h],a),n+Pe(c[h],a),i+Pe(c[h],a),u[0],u[1]]});return l}function cm(e){return[...e]}function Doe(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const i=[];if(n===3)i.push(cm(e[0]),cm(e[1]),cm(e[2]),cm(e[2]));else{const r=[];r.push(e[0],e[0]);for(let a=1;a<e.length;a++)r.push(e[a]),a===e.length-1&&r.push(e[a]);const s=[],o=1-t;i.push(cm(r[0]));for(let a=1;a+2<r.length;a++){const l=r[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*r[a+1][0]-o*r[a-1][0])/6,l[1]+(o*r[a+1][1]-o*r[a-1][1])/6],s[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],s[3]=[r[a+1][0],r[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function Noe(e,t){return Math.sqrt(P2(e,t))}function P2(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Ooe(e,t,n){const i=P2(t,n);if(i===0)return P2(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),P2(e,_u(t,n,r))}function _u(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Poe(e,t){const n=e[t+0],i=e[t+1],r=e[t+2],s=e[t+3];let o=3*i[0]-2*n[0]-s[0];o*=o;let a=3*i[1]-2*n[1]-s[1];a*=a;let l=3*r[0]-2*s[0]-n[0];l*=l;let c=3*r[1]-2*s[1]-n[1];return c*=c,o<l&&(o=l),a<c&&(a=c),o+a}function R4(e,t,n,i){const r=i||[];if(Poe(e,t)<n){const s=e[t+0];r.length?Noe(r[r.length-1],s)>1&&r.push(s):r.push(s),r.push(e[t+3])}else{const o=e[t+0],a=e[t+1],l=e[t+2],c=e[t+3],u=_u(o,a,.5),d=_u(a,l,.5),f=_u(l,c,.5),h=_u(u,d,.5),m=_u(d,f,.5),p=_u(h,m,.5);R4([o,u,h,p],0,n,r),R4([p,m,f,c],0,n,r)}return r}function Q9(e,t){return l6(e,0,e.length,t)}function l6(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=Ooe(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(l6(e,t,c+1,i,s),l6(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}function wp(e,t=.15,n){const i=[],r=(e.length-1)/3;for(let s=0;s<r;s++){const o=s*3;R4(e,o,t,i)}return n&&n>0?l6(i,0,i.length,n):i}function Foe(e,t,n){const i=q9(e),r=ZB(KB(i)),s=[];let o=[],a=[0,0],l=[];const c=()=>{l.length>=4&&o.push(...wp(l,t)),l=[]},u=()=>{c(),o.length&&(s.push(o),o=[])};for(const{key:f,data:h}of r)switch(f){case"M":u(),a=[h[0],h[1]],o.push(a);break;case"L":c(),o.push([h[0],h[1]]);break;case"C":if(!l.length){const m=o.length?o[o.length-1]:a;l.push([m[0],m[1]])}l.push([h[0],h[1]]),l.push([h[2],h[3]]),l.push([h[4],h[5]]);break;case"Z":c(),o.push([a[0],a[1]]);break}if(u(),!n)return s;const d=[];for(const f of s){const h=Q9(f,n);h.length&&d.push(h)}return d}const Pr="none";class Fh{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return kse()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,i){return{shape:t,sets:n||[],options:i||this.defaultOptions}}line(t,n,i,r,s){const o=this._o(s);return this._d("line",[QB(t,n,i,r,o)],o)}rectangle(t,n,i,r,s){const o=this._o(s),a=[],l=Soe(t,n,i,r,o);if(o.fill){const c=[[t,n],[t+i,n],[t+i,n+r],[t,n+r]];o.fillStyle==="solid"?a.push(O8([c],o)):a.push(Ef([c],o))}return o.stroke!==Pr&&a.push(l),this._d("rectangle",a,o)}ellipse(t,n,i,r,s){const o=this._o(s),a=[],l=JB(i,r,o),c=M4(t,n,o,l);if(o.fill)if(o.fillStyle==="solid"){const u=M4(t,n,o,l).opset;u.type="fillPath",a.push(u)}else a.push(Ef([c.estimatedPoints],o));return o.stroke!==Pr&&a.push(c.opset),this._d("ellipse",a,o)}circle(t,n,i,r){const s=this.ellipse(t,n,i,i,r);return s.shape="circle",s}linearPath(t,n){const i=this._o(n);return this._d("linearPath",[O2(t,!1,i)],i)}arc(t,n,i,r,s,o,a=!1,l){const c=this._o(l),u=[],d=kA(t,n,i,r,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const f=Object.assign({},c);f.disableMultiStroke=!0;const h=kA(t,n,i,r,s,o,!0,!1,f);h.type="fillPath",u.push(h)}else u.push(Coe(t,n,i,r,s,o,c));return c.stroke!==Pr&&u.push(d),this._d("arc",u,c)}curve(t,n){const i=this._o(n),r=[],s=RA(t,i);if(i.fill&&i.fill!==Pr&&t.length>=3)if(i.fillStyle==="solid"){const o=RA(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=Doe(t),a=wp(o,10,(1+i.roughness)/2);r.push(Ef([a],i))}return i.stroke!==Pr&&r.push(s),this._d("curve",r,i)}polygon(t,n){const i=this._o(n),r=[],s=O2(t,!0,i);return i.fill&&(i.fillStyle==="solid"?r.push(O8([t],i)):r.push(Ef([t],i))),i.stroke!==Pr&&r.push(s),this._d("polygon",r,i)}path(t,n){const i=this._o(n),r=[];if(!t)return this._d("path",r,i);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==Pr,o=i.stroke!==Pr,a=!!(i.simplification&&i.simplification<1),l=a?4-4*(i.simplification||1):(1+i.roughness)/2,c=Foe(t,1,l),u=LA(t,i);if(s)if(i.fillStyle==="solid")if(c.length===1){const d=LA(t,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(d.ops)})}else r.push(O8(c,i));else r.push(Ef(c,i));return o&&(a?c.forEach(d=>{r.push(O2(d,!1,i))}):r.push(u)),this._d("path",r,i)}opsToPath(t,n){let i="";for(const r of t.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `;break}}return i.trim()}toPaths(t){const n=t.sets||[],i=t.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:Pr};break;case"fillPath":o={d:this.opsToPath(s),stroke:Pr,strokeWidth:0,fill:i.fill||Pr};break;case"fillSketch":o=this.fillSketch(s,i);break}o&&r.push(o)}return r}fillSketch(t,n){let i=n.fillWeight;return i<0&&(i=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Pr,strokeWidth:i,fill:Pr}}_mergedShape(t){return t.filter((n,i)=>i===0?!0:n.op!=="move")}}class Boe{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Fh(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.ctx,s=t.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=i.stroke==="none"?"transparent":i.stroke,r.lineWidth=i.strokeWidth,i.strokeLineDash&&r.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(r.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=i.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,a),r.restore();break}case"fillSketch":this.fillSketch(r,o,i);break}}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2),t.save(),i.fillLineDash&&t.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(t.lineDashOffset=i.fillLineDashOffset),t.strokeStyle=i.fill||"",t.lineWidth=r,this._drawToContext(t,n,i.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,i,r="nonzero"){t.beginPath();for(const s of n.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}n.type==="fillPath"?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o),o}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o),o}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o),o}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s),s}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i),i}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i),i}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c),c}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i),i}path(t,n){const i=this.gen.path(t,n);return this.draw(i),i}}const BU="http://www.w3.org/2000/svg";class zoe{constructor(t,n){this.svg=t,this.gen=new Fh(n)}draw(t){const n=t.sets||[],i=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(BU,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of n){let l=null;switch(a.type){case"path":{l=r.createElementNS(BU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break}case"fillPath":{l=r.createElementNS(BU,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(r,a,i);break}}l&&s.appendChild(l)}return s}fillSketch(t,n,i){let r=i.fillWeight;r<0&&(r=i.strokeWidth/2);const s=t.createElementNS(BU,"path");return s.setAttribute("d",this.opsToPath(n,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,i,r,s){const o=this.gen.line(t,n,i,r,s);return this.draw(o)}rectangle(t,n,i,r,s){const o=this.gen.rectangle(t,n,i,r,s);return this.draw(o)}ellipse(t,n,i,r,s){const o=this.gen.ellipse(t,n,i,r,s);return this.draw(o)}circle(t,n,i,r){const s=this.gen.circle(t,n,i,r);return this.draw(s)}linearPath(t,n){const i=this.gen.linearPath(t,n);return this.draw(i)}polygon(t,n){const i=this.gen.polygon(t,n);return this.draw(i)}arc(t,n,i,r,s,o,a=!1,l){const c=this.gen.arc(t,n,i,r,s,o,a,l);return this.draw(c)}curve(t,n){const i=this.gen.curve(t,n);return this.draw(i)}path(t,n){const i=this.gen.path(t,n);return this.draw(i)}}const iu={canvas(e,t){return new Boe(e,t)},svg(e,t){return new zoe(e,t)},generator(e){return new Fh(e)},newSeed(){return Fh.newSeed()}},Hoe=e=>{const{angle:t,width:n,height:i,x:r,y:s}=e,o=r+n/2,a=s+i/2,l=S(o,a);let c;return e.type==="diamond"?c=T4(q(S(o,s),l,t),q(S(r+n,a),l,t),q(S(o,s+i),l,t),q(S(r,a),l,t)):c=T4(q(S(r,s),l,t),q(S(r+n,s),l,t),q(S(r+n,s+i),l,t),q(S(r,s+i),l,t)),{type:"polygon",data:c}},Voe=e=>{const{width:t,height:n,angle:i,x:r,y:s}=e;return{type:"ellipse",data:{center:S(r+t/2,s+n/2),angle:i,halfWidth:t/2,halfHeight:n/2}}},zd=e=>{if(!e)return[];for(const t of e.sets)if(t.type==="path")return t.ops;return e.sets[0].ops},$oe=(e,t=S(0,0),n,i)=>{const r=l=>q(S(l[0]+t[0],l[1]+t[1]),i,n),s=zd(e),o=[];let a=S(0,0);for(const l of s){if(l.op==="move"){const c=ny(l.data);gn(c!=null,"Ops data is not a point"),a=r(c)}if(l.op==="bcurveTo"){const c=r(S(l.data[0],l.data[1])),u=r(S(l.data[2],l.data[3])),d=r(S(l.data[4],l.data[5]));o.push(Hn(a,c,u,d)),a=d}}return{type:"polycurve",data:o}},Goe=e=>{let t=e[0];const n=[];for(let i=1;i<e.length;i++){const r=e[i];n.push(Me(t,r)),t=r}return n},Xoe=(e,t,n=!1)=>{const i=s=>q(Ei(Vf(he(s),pn(e.x,e.y))),t,e.angle),r=Goe(e.points.map(s=>i(s)));return n?{type:"polygon",data:n6(r.flat())}:{type:"polyline",data:r}},joe=(e,t,n=S(0,0),i,r)=>{const s=u=>q(S(u[0]+n[0],u[1]+n[1]),r,i);if(e.roundness===null)return{type:"polygon",data:n6(e.points.map(u=>s(u)))};const o=zd(t),a=[];let l=!1;for(const u of o)u.op==="move"?(l=!l,l&&a.push(S(u.data[0],u.data[1]))):u.op==="bcurveTo"?l&&(a.push(S(u.data[0],u.data[1])),a.push(S(u.data[2],u.data[3])),a.push(S(u.data[4],u.data[5]))):u.op==="lineTo"&&l&&a.push(S(u.data[0],u.data[1]));const c=wp(a,10,5).map(u=>s(u));return{type:"polygon",data:n6(c)}};function FA(e,t,n,i=r=>r){return e*i(.5-t*(.5-n))}function Yoe(e){return[-e[0],-e[1]]}function Xs(e,t){return[e[0]+t[0],e[1]+t[1]]}function hs(e,t){return[e[0]-t[0],e[1]-t[1]]}function $s(e,t){return[e[0]*t,e[1]*t]}function Woe(e,t){return[e[0]/t,e[1]/t]}function um(e){return[e[1],-e[0]]}function BA(e,t){return e[0]*t[0]+e[1]*t[1]}function Koe(e,t){return e[0]===t[0]&&e[1]===t[1]}function Zoe(e){return Math.hypot(e[0],e[1])}function qoe(e){return e[0]*e[0]+e[1]*e[1]}function zA(e,t){return qoe(hs(e,t))}function tz(e){return Woe(e,Zoe(e))}function Qoe(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function dm(e,t,n){let i=Math.sin(n),r=Math.cos(n),s=e[0]-t[0],o=e[1]-t[1],a=s*r-o*i,l=s*i+o*r;return[a+t[0],l+t[1]]}function k4(e,t,n){return Xs(e,$s(hs(t,e),n))}function HA(e,t,n){return Xs(e,$s(t,n))}var{min:rf,PI:Joe}=Math,VA=.275,fm=Joe+1e-4;function eae(e,t={}){let{size:n=16,smoothing:i=.5,thinning:r=.5,simulatePressure:s=!0,easing:o=H=>H,start:a={},end:l={},last:c=!1}=t,{cap:u=!0,easing:d=H=>H*(2-H)}=a,{cap:f=!0,easing:h=H=>--H*H*H+1}=l;if(e.length===0||n<=0)return[];let m=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,m):a.taper,U=l.taper===!1?0:l.taper===!0?Math.max(n,m):l.taper,b=Math.pow(n*i,2),y=[],w=[],v=e.slice(0,10).reduce((H,$)=>{let X=$.pressure;if(s){let W=rf(1,$.distance/n),Q=rf(1,1-W);X=rf(1,H+(Q-H)*(W*VA))}return(H+X)/2},e[0].pressure),I=FA(n,r,e[e.length-1].pressure,o),x,_=e[0].vector,T=e[0].point,A=T,C=T,k=A,P=!1;for(let H=0;H<e.length;H++){let{pressure:$}=e[H],{point:X,vector:W,distance:Q,runningLength:oe}=e[H];if(H<e.length-1&&m-oe<3)continue;if(r){if(s){let Ye=rf(1,Q/n),ut=rf(1,1-Ye);$=rf(1,v+(ut-v)*(Ye*VA))}I=FA(n,r,$,o)}else I=n/2;x===void 0&&(x=I);let ne=oe<p?d(oe/p):1,ie=m-oe<U?h((m-oe)/U):1;I=Math.max(.01,I*Math.min(ne,ie));let me=(H<e.length-1?e[H+1]:e[H]).vector,Re=H<e.length-1?BA(W,me):1,Ve=BA(W,_)<0&&!P,wt=Re!==null&&Re<0;if(Ve||wt){let Ye=$s(um(_),I);for(let ut=1/13,$t=0;$t<=1;$t+=ut)C=dm(hs(X,Ye),X,fm*$t),y.push(C),k=dm(Xs(X,Ye),X,fm*-$t),w.push(k);T=C,A=k,wt&&(P=!0);continue}if(P=!1,H===e.length-1){let Ye=$s(um(W),I);y.push(hs(X,Ye)),w.push(Xs(X,Ye));continue}let Ot=$s(um(k4(me,W,Re)),I);C=hs(X,Ot),(H<=1||zA(T,C)>b)&&(y.push(C),T=C),k=Xs(X,Ot),(H<=1||zA(A,k)>b)&&(w.push(k),A=k),v=$,_=W}let D=e[0].point.slice(0,2),j=e.length>1?e[e.length-1].point.slice(0,2):Xs(e[0].point,[1,1]),G=[],B=[];if(e.length===1){if(!(p||U)||c){let H=HA(D,tz(um(hs(D,j))),-(x||I)),$=[];for(let X=1/13,W=X;W<=1;W+=X)$.push(dm(H,D,fm*2*W));return $}}else{if(!(p||U&&e.length===1))if(u)for(let $=1/13,X=$;X<=1;X+=$){let W=dm(w[0],D,fm*X);G.push(W)}else{let $=hs(y[0],w[0]),X=$s($,.5),W=$s($,.51);G.push(hs(D,X),hs(D,W),Xs(D,W),Xs(D,X))}let H=um(Yoe(e[e.length-1].vector));if(U||p&&e.length===1)B.push(j);else if(f){let $=HA(j,H,I);for(let X=1/29,W=X;W<1;W+=X)B.push(dm($,j,fm*3*W))}else B.push(Xs(j,$s(H,I)),Xs(j,$s(H,I*.99)),hs(j,$s(H,I*.99)),hs(j,$s(H,I)))}return y.concat(B,w.reverse(),G)}function tae(e,t={}){var n;let{streamline:i=.5,size:r=16,last:s=!1}=t;if(e.length===0)return[];let o=.15+(1-i)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:m,pressure:p=.5})=>[h,m,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let m=1;m<5;m++)a.push(k4(a[0],h,m/4))}a.length===1&&(a=[...a,[...Xs(a[0],[1,1]),...a[0].slice(2)]]);let l=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,u=0,d=l[0],f=a.length-1;for(let h=1;h<a.length;h++){let m=s&&h===f?a[h].slice(0,2):k4(d.point,a[h],o);if(Koe(d.point,m))continue;let p=Qoe(m,d.point);if(u+=p,h<f&&!c){if(u<r)continue;c=!0}d={point:m,pressure:a[h][2]>=0?a[h][2]:.5,vector:tz(hs(d.point,m)),distance:p,runningLength:u},l.push(d)}return l[0].vector=((n=l[1])==null?void 0:n.vector)||[0,0],l}function nae(e,t={}){return eae(tae(e,t),t)}const ci=10,iae=(e,t,n,i,r,s,o,a)=>{var k,P;const{width:l,height:c}=ll(e),u=i/l,d=r/c,f=(((k=e.crop)==null?void 0:k.x)??0)/u,h=(((P=e.crop)==null?void 0:P.y)??0)/d,m=q(S(s,o),oi(e,t),-e.angle);s=m[0],o=m[1];let p=e.width,U=e.height,b=e.crop??{x:0,y:0,width:i,height:r,naturalWidth:i,naturalHeight:r};const y=b.height,w=b.width,v=e.scale[0]===-1,I=e.scale[1]===-1;let x=o-e.y,_=s-e.x;n.includes("n")&&(U=Ze(e.height-x,ci,I?c-h:e.height+h)),n.includes("s")&&(x=o-e.y-e.height,U=Ze(e.height+x,ci,I?e.height+h:c-h)),n.includes("e")&&(_=s-e.x-e.width,p=Ze(e.width+_,ci,v?e.width+f:l-f)),n.includes("w")&&(p=Ze(e.width-_,ci,v?l-f:e.width+f));const T=D=>{D.height=U*d,D.width=p*u};T(b);const A=(D,j)=>{T(j),D.includes("n")&&(I||(j.y+=y-j.height)),D.includes("s")&&I&&(j.y+=y-j.height),D.includes("e")&&v&&(j.x+=w-j.width),D.includes("w")&&(v||(j.x+=w-j.width))};switch(n){case"n":{if(a){const D=f+e.width/2,j=l-f-e.width/2,G=Math.min(D,j)*2;p=Ze(U*a,ci,G),U=p/a}A(n,b),a&&(b.x+=(w-b.width)/2);break}case"s":{if(a){const D=f+e.width/2,j=l-f-e.width/2,G=Math.min(D,j)*2;p=Ze(U*a,ci,G),U=p/a}A(n,b),a&&(b.x+=(w-b.width)/2);break}case"w":{if(a){const D=h+e.height/2,j=c-h-e.height/2,G=Math.min(D,j)*2;U=Ze(p/a,ci,G),p=U*a}A(n,b),a&&(b.y+=(y-b.height)/2);break}case"e":{if(a){const D=h+e.height/2,j=c-h-e.height/2,G=Math.min(D,j)*2;U=Ze(p/a,ci,G),p=U*a}A(n,b),a&&(b.y+=(y-b.height)/2);break}case"ne":{if(a)if(_>-x){const D=I?c-h:h+e.height;U=Ze(p/a,ci,D),p=U*a}else{const D=v?f+e.width:l-f;p=Ze(U*a,ci,D),U=p/a}A(n,b);break}case"nw":{if(a)if(_<x){const D=I?c-h:h+e.height;U=Ze(p/a,ci,D),p=U*a}else{const D=v?l-f:f+e.width;p=Ze(U*a,ci,D),U=p/a}A(n,b);break}case"se":{if(a)if(_>x){const D=I?h+e.height:c-h;U=Ze(p/a,ci,D),p=U*a}else{const D=v?f+e.width:l-f;p=Ze(U*a,ci,D),U=p/a}A(n,b);break}case"sw":{if(a)if(-_>x){const D=I?h+e.height:c-h;U=Ze(p/a,ci,D),p=U*a}else{const D=v?l-f:f+e.width;p=Ze(U*a,ci,D),U=p/a}A(n,b);break}}const C=rae(e,n,p,U,!!a);return _A(b.width,b.naturalWidth)&&_A(b.height,b.naturalHeight)&&(b=null),{x:C[0],y:C[1],width:p,height:U,crop:b}},rae=(e,t,n,i,r)=>{const[s,o,a,l]=m0(e,e.width,e.height,!0),c=S(s,o),u=S(a,l),d=e6(c,u),[f,h,m,p]=m0(e,n,i,!0),U=m-f,b=p-h;let y=[...c];if(["n","w","nw"].includes(t)&&(y=[u[0]-Math.abs(U),u[1]-Math.abs(b)]),t==="ne"){const T=[c[0],u[1]];y=[T[0],T[1]-Math.abs(b)]}if(t==="sw"){const T=[u[0],c[1]];y=[T[0]-Math.abs(U),T[1]]}r&&(["s","n"].includes(t)&&(y[0]=d[0]-U/2),["e","w"].includes(t)&&(y[1]=d[1]-b/2));const w=e.angle,v=q(y,d,w),I=[y[0]+Math.abs(U)/2,y[1]+Math.abs(b)/2],x=q(I,d,w);y=q(v,x,-w);const _=[...y];return _[0]+=e.x-f,_[1]+=e.y-h,_},sae=(e,t)=>{if(e.crop){const{width:n,height:i}=ll(e),[r,s,o,a,l,c]=He(e,t),u=he(q(S(r,s),S(l,c),e.angle)),d=he(q(S(o,s),S(l,c),e.angle)),f=ts(Qb(d,u)),h=he(q(S(r,a),S(l,c),e.angle)),m=Qb(h,u),p=ts(m),{cropX:U,cropY:b}=oae(e.crop,e.scale),y=Vf(Vf(u,In(f,-U*n/e.crop.naturalWidth)),In(p,-b*i/e.crop.naturalHeight)),w=Ei(Vf(Vf(y,In(f,n/2)),In(p,i/2))),v=q(Ei(y),w,-e.angle);return{...e,x:v[0],y:v[1],width:n,height:i,crop:null}}return e},ll=e=>{if(e.crop){const t=e.width/(e.crop.width/e.crop.naturalWidth),n=e.height/(e.crop.height/e.crop.naturalHeight);return{width:t,height:n}}return{width:e.width,height:e.height}},oae=(e,t)=>{let n=e.x,i=e.y;const r=t[0]===-1,s=t[1]===-1;return r&&(n=e.naturalWidth-Math.abs(n)-e.width),s&&(i=e.naturalHeight-Math.abs(i)-e.height),{cropX:n,cropY:i}},aae=(e,t=!1)=>{const n=e.crop;if(!n)return null;const i=e.scale[0]===-1,r=e.scale[1]===-1;let s=n.x,o=n.y;if(i&&(s=n.naturalWidth-n.width-n.x),r&&(o=n.naturalHeight-n.height-n.y),t)return{x:s,y:o};const{width:a,height:l}=ll(e);return{x:s/(n.naturalWidth/a),y:o/(n.naturalHeight/l)}},E1=new WeakMap,J9=(e,t)=>{const n=E1.get(e);if(!n)return;const{version:i,shapes:r}=n;if(i!==e.version){E1.delete(e);return}return r.get(t)},e_=(e,t,n)=>{const i=E1.get(e);if(!i){E1.set(e,{version:e.version,shapes:new Map([[n,t]])});return}const{version:r,shapes:s}=i;if(r!==e.version){E1.set(e,{version:e.version,shapes:new Map([[n,t]])});return}s.set(n,t)};function c6(e){const t=J9(e,0);if(t)return t;const n=rce(e),i=[],r=[];for(let o=0;o<n.length;o+=1){const a=n[o],l=n[o-1]&&ny(n[o-1].data.slice(-2));switch(a.op){case"move":continue;case"lineTo":if(!l)throw new Error("prevPoint is undefined");i.push(Me(S(e.x+l[0],e.y+l[1]),S(e.x+a.data[0],e.y+a.data[1])));continue;case"bcurveTo":if(!l)throw new Error("prevPoint is undefined");r.push(Hn(S(e.x+l[0],e.y+l[1]),S(e.x+a.data[0],e.y+a.data[1]),S(e.x+a.data[2],e.y+a.data[3]),S(e.x+a.data[4],e.y+a.data[5])));continue;default:console.error("Unknown op type",a.op)}}const s=[i,r];return e_(e,s,0),s}function t_(e,t=0){const n=J9(e,t);if(n)return n;let i=dr(Math.min(e.width,e.height),e);i===0&&(i=.01);const r=Ase(S(e.x,e.y),S(e.x+e.width,e.y+e.height)),s=Me(S(r[0][0]+i,r[0][1]),S(r[1][0]-i,r[0][1])),o=Me(S(r[1][0],r[0][1]+i),S(r[1][0],r[1][1]-i)),a=Me(S(r[0][0]+i,r[1][1]),S(r[1][0]-i,r[1][1])),l=Me(S(r[0][0],r[1][1]-i),S(r[0][0],r[0][1]+i)),c=[Hn(l[1],S(l[1][0]+2/3*(r[0][0]-l[1][0]),l[1][1]+2/3*(r[0][1]-l[1][1])),S(s[0][0]+2/3*(r[0][0]-s[0][0]),s[0][1]+2/3*(r[0][1]-s[0][1])),s[0]),Hn(s[1],S(s[1][0]+2/3*(r[1][0]-s[1][0]),s[1][1]+2/3*(r[0][1]-s[1][1])),S(o[0][0]+2/3*(r[1][0]-o[0][0]),o[0][1]+2/3*(r[0][1]-o[0][1])),o[0]),Hn(o[1],S(o[1][0]+2/3*(r[1][0]-o[1][0]),o[1][1]+2/3*(r[1][1]-o[1][1])),S(a[1][0]+2/3*(r[1][0]-a[1][0]),a[1][1]+2/3*(r[1][1]-a[1][1])),a[1]),Hn(a[0],S(a[0][0]+2/3*(r[0][0]-a[0][0]),a[0][1]+2/3*(r[1][1]-a[0][1])),S(l[0][0]+2/3*(r[0][0]-l[0][0]),l[0][1]+2/3*(r[1][1]-l[0][1])),l[0])],u=t>0?c.map(h=>G9(wo(h,t))):[[c[0]],[c[1]],[c[2]],[c[3]]],f=[[Me(u[0][u[0].length-1][3],u[1][0][0]),Me(u[1][u[1].length-1][3],u[2][0][0]),Me(u[2][u[2].length-1][3],u[3][0][0]),Me(u[3][u[3].length-1][3],u[0][0][0])],u.flat()];return e_(e,f,t),f}function n_(e,t=0){const n=J9(e,t);if(n)return n;const[i,r,s,o,a,l,c,u]=S6(e),d=e.roundness?dr(Math.abs(i-c),e):(i-c)*.01,f=e.roundness?dr(Math.abs(o-r),e):(o-r)*.01,[h,m,p,U]=[S(e.x+i,e.y+r),S(e.x+s,e.y+o),S(e.x+a,e.y+l),S(e.x+c,e.y+u)],b=[Hn(S(m[0]-d,m[1]-f),m,m,S(m[0]-d,m[1]+f)),Hn(S(p[0]+d,p[1]-f),p,p,S(p[0]-d,p[1]-f)),Hn(S(U[0]+d,U[1]+f),U,U,S(U[0]+d,U[1]-f)),Hn(S(h[0]-d,h[1]+f),h,h,S(h[0]+d,h[1]+f))],y=t>0?b.map(I=>G9(wo(I,t))):[[b[0]],[b[1]],[b[2]],[b[3]]],v=[[Me(y[0][y[0].length-1][3],y[1][0][0]),Me(y[1][y[1].length-1][3],y[2][0][0]),Me(y[2][y[2].length-1][3],y[3][0][0]),Me(y[3][y[3].length-1][3],y[0][0][0])],y.flat()];return e_(e,v,t),v}const qo=(e,t=1)=>{if(e.length>=3){const[n,i]=[e[0],e[e.length-1]];return ct(n,i)<=k2/t}return!1},dr=(e,t)=>{var n,i,r,s;if(((n=t.roundness)==null?void 0:n.type)===yn.PROPORTIONAL_RADIUS||((i=t.roundness)==null?void 0:i.type)===yn.LEGACY)return e*A8;if(((r=t.roundness)==null?void 0:r.type)===yn.ADAPTIVE_RADIUS){const o=((s=t.roundness)==null?void 0:s.value)??Xre,a=o/A8;return e<=a?e*A8:o}return 0},Ln=e=>!!e&&e.type==="image"&&!!e.fileId,Et=e=>!!e&&e.type==="image",or=e=>!!e&&e.type==="embeddable",Wl=e=>!!e&&e.type==="iframe",vs=e=>!!e&&(e.type==="iframe"||e.type==="embeddable"),ge=e=>e!=null&&e.type==="text",nz=e=>e!=null&&e.type==="frame",F2=e=>e!=null&&e.type==="magicframe",we=e=>e!=null&&(e.type==="frame"||e.type==="magicframe"),qi=e=>e!=null&&lae(e.type),lae=e=>e==="freedraw",xe=e=>e!=null&&i_(e.type),nn=e=>e!=null&&e.type==="line",Ce=e=>e!=null&&e.type==="arrow",pe=e=>Ce(e)&&e.elbowed,cae=e=>Ce(e)&&!e.elbowed,uae=e=>Ce(e)&&!e.elbowed&&!e.roundness,dae=e=>Ce(e)&&!e.elbowed&&e.roundness!==null,i_=e=>e==="arrow"||e==="line",Ha=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&L4(e.type),L4=e=>e==="arrow",os=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),fae=e=>e!=null&&(e.type==="rectangle"||e.type==="diamond"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),Qu=(e,t=!0)=>e!=null&&(!e.locked||t===!0)&&(e.type==="rectangle"||e.type==="diamond"||e.type==="ellipse"||Ce(e)),iz=e=>{const t=e==null?void 0:e.type;if(!t)return!1;switch(t){case"text":case"diamond":case"rectangle":case"iframe":case"embeddable":case"ellipse":case"arrow":case"freedraw":case"line":case"frame":case"magicframe":case"image":case"selection":return!0;default:return Ko(t,null),!1}},oy=e=>e.type==="rectangle"||e.type==="ellipse"||e.type==="diamond",Di=e=>{var t;return Qu(e)&&!!((t=e.boundElements)!=null&&t.some(({type:n})=>n==="text"))},Lt=e=>e!==null&&"containerId"in e&&e.containerId!==null&&ge(e),rz=e=>!!e.startBinding||!!e.endBinding,Hd=e=>e==="rectangle"||e==="embeddable"||e==="iframe"||e==="image",sz=e=>e==="line"||e==="arrow"||e==="diamond",hae=(e,t)=>!!((e===yn.ADAPTIVE_RADIUS||e===yn.LEGACY)&&Hd(t.type)||e===yn.PROPORTIONAL_RADIUS&&sz(t.type)),gae=e=>sz(e.type)?{type:yn.PROPORTIONAL_RADIUS}:Hd(e.type)?{type:yn.ADAPTIVE_RADIUS}:null,Bh=e=>Object.hasOwn(e,"fixedPoint")&&e.fixedPoint!=null,ah=e=>uae(e)?"sharpArrow":dae(e)?"curvedArrow":pe(e)?"elbowArrow":"line",D4=e=>e.length>3&&Os(e[0],e[e.length-1]),oz=e=>e.length>3||e.length===3&&!Os(e[0],e[e.length-1]),zh={},u6=(e,t)=>{const n=zh[e]||(zh[e]={height:t});return n.height=t,n},az=e=>{zh[e]&&delete zh[e]},mae=e=>{var t;return((t=zh[e])==null?void 0:t.height)??null},jn=(e,t,n)=>{const i=e.split(`
`).map(a=>a||" ").join(`
`),r=parseFloat(t),s=yae(i,r,n);return{width:o_(i,t),height:s}},lz="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".toLocaleUpperCase(),cz=(e,t)=>{const n=Eae(e);return n===0?jn(lz.split("").join(`
`),e,t).width+$n*2:n+$n*2},r_=(e,t)=>jn("",e,t).width+$n*2,pae=()=>o_(lz,pt({fontSize:_l,fontFamily:nu}))>0,Hh=e=>$B(e).replace(/\t/g,"        "),s_=e=>Hh(e).split(`
`),Uae=e=>{const t=s_(e.text).length;return e.height/t/e.fontSize},_p=(e,t)=>e*t,uz=(e,t)=>_p(e,t)+$n*2;let P8;class bae{constructor(){F(this,"canvas");this.canvas=document.createElement("canvas")}getLineWidth(t,n){const i=this.canvas.getContext("2d");return i.font=n,i.measureText(t).width}}const md=(e,t)=>(P8||(P8=new bae),P8.getLineWidth(e,t)),o_=(e,t)=>{const n=s_(e);let i=0;return n.forEach(r=>{i=Math.max(i,md(r,t))}),i},yae=(e,t,n)=>{const i=s_(e).length;return _p(t,n)*i},Tp=(()=>{const e={};return{calculate:(r,s)=>{const o=r.charCodeAt(0);if(e[s]||(e[s]=[]),!e[s][o]){const a=md(r,s);e[s][o]=a}return e[s][o]},getCache:r=>e[r],clearCache:r=>{e[r]=[]}}})(),Eae=e=>{const t=Tp.getCache(e);if(!t)return 0;const n=t.filter(i=>i!==void 0);return Math.max(...n)};let F8,zU,B8;const vae=e=>(F8||(F8=It.class(...Object.values(wa))),F8.test(e)),wae=()=>{if(!zU)try{zU=Tae()}catch{zU=_ae()}return zU},a_=()=>(B8||(B8=Iae()),B8),ds={WHITESPACE:/\s/u,HYPHEN:/-/u,OPENING:/<\(\[\{/u,CLOSING:/>\)\]\}.,:;!\?\//u},wa={CHAR:new RegExp("\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}","u"),OPENING://u,CLOSING://u,CURRENCY://u},pu={FLAG:new RegExp("\\p{RI}\\p{RI}","u"),JOINER:new RegExp("(?:\\p{Emoji_Modifier}|\\uFE0F\\u20E3?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?","u"),ZWJ:/\u200D/u,ANY:/[\p{Emoji}]/u,MOST:/[\p{Extended_Pictographic}\p{Emoji_Presentation}]/u},_ae=()=>It.or(a_(),wn.On(ds.HYPHEN,ds.WHITESPACE,wa.CHAR)),Tae=()=>It.or(a_(),wn.Before(ds.WHITESPACE).Build(),wn.After(ds.WHITESPACE,ds.HYPHEN).Build(),wn.Before(wa.CHAR,wa.CURRENCY).NotPrecededBy(ds.OPENING,wa.OPENING).Build(),wn.After(wa.CHAR).NotFollowedBy(ds.HYPHEN,ds.CLOSING,wa.CLOSING).Build(),wn.BeforeMany(wa.OPENING).NotPrecededBy(ds.OPENING).Build(),wn.AfterMany(wa.CLOSING).NotFollowedBy(ds.CLOSING).Build(),wn.AfterMany(ds.CLOSING).FollowedBy(ds.OPENING).Build()),Iae=()=>It.group(It.or(pu.FLAG,It.and(pu.MOST,pu.JOINER,It.build(`(?:${pu.ZWJ.source}(?:${pu.FLAG.source}|${pu.ANY.source}${pu.JOINER.source}))*`)))),It={build:e=>new RegExp(e,"u"),join:(...e)=>e.map(t=>t.source).join(""),and:(...e)=>It.build(It.join(...e)),or:(...e)=>It.build(e.map(t=>t.source).join("|")),group:(...e)=>It.build(`(${It.join(...e)})`),class:(...e)=>It.build(`[${It.join(...e)}]`)},wn={On:(...e)=>{const t=It.join(...e);return It.build(`([${t}])`)},Before:(...e)=>{const t=It.join(...e),n=()=>It.build(`(?=[${t}])`);return wn.Chain(n)},After:(...e)=>{const t=It.join(...e),n=()=>It.build(`(?<=[${t}])`);return wn.Chain(n)},BeforeMany:(...e)=>{const t=It.join(...e),n=()=>It.build(`(?<![${t}])(?=[${t}])`);return wn.Chain(n)},AfterMany:(...e)=>{const t=It.join(...e),n=()=>It.build(`(?<=[${t}])(?![${t}])`);return wn.Chain(n)},NotBefore:(...e)=>{const t=It.join(...e),n=()=>It.build(`(?![${t}])`);return wn.Chain(n)},NotAfter:(...e)=>{const t=It.join(...e),n=()=>It.build(`(?<![${t}])`);return wn.Chain(n)},Chain:e=>({Build:e,PreceededBy:(...t)=>{const n=e(),i=wn.After(...t).Build(),r=()=>It.and(i,n);return wn.Chain(r)},FollowedBy:(...t)=>{const n=e(),i=wn.Before(...t).Build(),r=()=>It.and(n,i);return wn.Chain(r)},NotPrecededBy:(...t)=>{const n=e(),i=wn.NotAfter(...t).Build(),r=()=>It.and(i,n);return wn.Chain(r)},NotFollowedBy:(...t)=>{const n=e(),i=wn.NotBefore(...t).Build(),r=()=>It.and(n,i);return wn.Chain(r)}})},Sae=e=>{const t=wae();return e.normalize("NFC").split(t).filter(Boolean)},ru=(e,t,n)=>{if(!Number.isFinite(n)||n<0)return e;const i=[],r=e.split(`
`);for(const s of r){if(md(s,t)<=n){i.push(s);continue}const a=xae(s,t,n);i.push(...a)}return i.join(`
`)},xae=(e,t,n)=>{const i=[],s=Sae(e)[Symbol.iterator]();let o="",a=0,l=s.next();for(;!l.done;){const c=l.value,u=o+c,d=Mae(c)?a+Tp.calculate(c,t):md(u,t);if(/\s/.test(c)||d<=n){o=u,a=d,l=s.next();continue}if(o)i.push(o.trimEnd()),o="",a=0;else{const f=Cae(c,t,n),h=f[f.length-1]??"",m=f.slice(0,-1);i.push(...m),o=h,a=md(h,t),l=s.next()}}if(o){const c=Aae(o,t,n);i.push(c)}return i},Cae=(e,t,n)=>{if(a_().test(e))return[e];const i=[],r=Array.from(e);let s="",o=0;for(const a of r){const l=Tp.calculate(a,t),c=o+l;if(c<=n){s=s+a,o=c;continue}s&&i.push(s),s=a,o=l}return s&&i.push(s),i},Aae=(e,t,n)=>{if(!(md(e,t)>n))return e;let[,r,s]=e.match(/^(.+?)(\s+)$/)??[e,e.trimEnd(),""],o=md(r,t);for(const a of Array.from(s)){const l=Tp.calculate(a,t),c=o+l;if(c>n)break;r=r+a,o=c}return r},Mae=e=>e.codePointAt(0)!==void 0&&e.codePointAt(1)===void 0,Qi=(e,t,n)=>{const i=n.getNonDeletedElementsMap();let r;const s={x:e.x,y:e.y,text:e.text,width:e.width,height:e.height,angle:t?Ce(t)?0:t.angle:e.angle};s.text=e.text,(t||!e.autoResize)&&(r=t?Jo(t,e):e.width,s.text=ru(e.originalText,pt(e),r));const o=jn(s.text,pt(e),e.lineHeight);if(e.autoResize&&(s.width=o.width),s.height=o.height,t){const a=Sp(t,e),l=Jo(t,e);if(!Ce(t)&&o.height>a){const f=pd(o.height,t.type);n.mutateElement(t,{height:f}),u6(t.id,f)}if(o.width>l){const f=pd(o.width,t.type);n.mutateElement(t,{width:f})}const c={...e,...s},{x:u,y:d}=su(t,c,i);s.x=u,s.y=d}n.mutateElement(e,s)},Ip=(e,t,n,i=!1)=>{const r=t.getNonDeletedElementsMap();if(!Qo(e))return;az(e.id);const o=Le(e,r);if(o&&o.text){if(!e)return;let a=o.text,l=o.height,c=o.width;const u=Jo(e,o),d=Sp(e,o);let f=e.height;if(i||n!=="n"&&n!=="s"){a&&(a=ru(o.originalText,pt(o),u));const h=jn(a,pt(o),o.lineHeight);l=h.height,c=h.width}if(l>d){f=pd(l,e.type);const h=f-e.height,m=!Ce(e)&&(n==="ne"||n==="nw"||n==="n")?e.y-h:e.y;t.mutateElement(e,{height:f,y:m})}t.mutateElement(o,{text:a,width:c,height:l}),Ce(e)||t.mutateElement(o,su(e,o,r))}},su=(e,t,n)=>{if(Ce(e))return Ue.getBoundTextElementPosition(e,t,n);const i=Rae(e),r=Sp(e,t),s=Jo(e,t);let o,a;t.verticalAlign===Wr.TOP?a=i.y:t.verticalAlign===Wr.BOTTOM?a=i.y+(r-t.height):a=i.y+(r/2-t.height/2),t.textAlign===a0.LEFT?o=i.x:t.textAlign===a0.RIGHT?o=i.x+(s-t.width):o=i.x+(s/2-t.width/2);const l=e.angle??0;if(l!==0){const c=S(i.x+s/2,i.y+r/2),u=S(o+t.width/2,a+t.height/2),[d,f]=q(u,c,l);return{x:d-t.width/2,y:f-t.height/2}}return{x:o,y:a}},Qo=e=>{var t,n,i;return(t=e==null?void 0:e.boundElements)!=null&&t.length&&((i=(n=e==null?void 0:e.boundElements)==null?void 0:n.find(r=>r.type==="text"))==null?void 0:i.id)||null},Le=(e,t)=>{if(!e)return null;const n=Qo(e);return n&&t.get(n)||null},Yn=(e,t)=>e&&e.containerId&&t.get(e.containerId)||null,z8=(e,t,n)=>{if(!Ce(e))return{x:e.x+e.width/2,y:e.y+e.height/2};if(Ue.getPointsGlobalCoordinates(e,n).length%2===1){const o=Math.floor(e.points.length/2),a=Ue.getPointGlobalCoordinates(e,e.points[o],n);return{x:a[0],y:a[1]}}const r=e.points.length/2-1;let s=Ue.getEditorMidPoints(e,n,t)[r];return s||(s=Ue.getSegmentMidPoint(e,r+1)),{x:s[0],y:s[1]}},Rae=e=>{let t=$n,n=$n;return e.type==="ellipse"&&(t+=e.width/2*(1-Math.sqrt(2)/2),n+=e.height/2*(1-Math.sqrt(2)/2)),e.type==="diamond"&&(t+=e.width/4,n+=e.height/4),{x:e.x+t,y:e.y+n}},kae=(e,t)=>Ce(t)?0:t?t.angle:e.angle,dz=(e,t)=>e.some(n=>{if(Lt(n)){const i=Yn(n,t);return!Ce(i)}return!1}),fz=(e,t)=>e.some(n=>{if(Lt(n)){const i=Yn(n,t);return!Ce(i)}return ge(n)}),Lae=new Set(["rectangle","ellipse","diamond","arrow"]),Dae=e=>Lae.has(e.type),pd=(e,t)=>{e=Math.ceil(e);const n=$n*2;return t==="ellipse"?Math.round((e+n)/Math.sqrt(2)*2):t==="arrow"?e+n*8:t==="diamond"?2*(e+n):e+n},Jo=(e,t)=>{const{width:n}=e;if(Ce(e)){const i=((t==null?void 0:t.fontSize)??_l)*$re;return Math.max(Vre*n,i)}return e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-$n*2:e.type==="diamond"?Math.round(n/2)-$n*2:n-$n*2},Sp=(e,t)=>{const{height:n}=e;return Ce(e)?n-$n*8*2<=0?t.height:n:e.type==="ellipse"?Math.round(n/2*Math.sqrt(2))-$n*2:e.type==="diamond"?Math.round(n/2)-$n*2:n-$n*2},hz=(e,t=`

`)=>e.reduce((i,r)=>(ge(r)&&i.push(r.text),i),[]).join(t),xp=(e,t,n)=>{switch(e.type){case"selection":case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"magicframe":return Nae(e,t,n);case"diamond":return Oae(e,t,n);case"ellipse":return Pae(e,t,n);case"line":case"arrow":case"freedraw":return Fae(e,n)}},Nae=(e,t,n)=>{const i=oi(e,t),r=q(n,i,-e.angle),[s,o]=t_(e);return Math.min(...s.map(a=>oc(r,a)),...o.map(a=>V9(a,r)).filter(a=>a!==null))},Oae=(e,t,n)=>{const i=oi(e,t),r=q(n,i,-e.angle),[s,o]=n_(e);return Math.min(...s.map(a=>oc(r,a)),...o.map(a=>V9(a,r)).filter(a=>a!==null))},Pae=(e,t,n)=>{const i=oi(e,t);return Tse(q(n,i,-e.angle),RB(i,e.width/2,e.height/2))},Fae=(e,t)=>{const[n,i]=c6(e);return Math.min(...n.map(r=>oc(t,r)),...i.map(r=>V9(r,t)))},d6=e=>{if(e.type==="arrow")return!1;const t=!Sr(e.backgroundColor)||Di(e)||vs(e)||ge(e);return e.type==="line"||e.type==="freedraw"?t&&qo(e.points):t||Et(e)},vf=({point:e,element:t,threshold:n,elementsMap:i,frameNameBound:r=null})=>{const s=r?c0(S(r.x-n,r.y-n),e,S(r.x+r.width+n,r.y+r.height+n)):!1,o=si(t,i,!0);return!c0(S(o[0]-n,o[1]-n),q(e,_g(o),-t.angle),S(o[2]+n,o[3]+n))&&!s?!1:d6(t)&&l_(e,t,i)||$A(e,t,i,n)||s},ay=(e,t,n,i=0)=>{let[r,s,o,a]=si(t,n);return r-=i,s-=i,o+=i,a+=i,c0(S(r,s),e,S(o,a))},Bae=(e,t)=>!vf(e)&&!gz(e.point,e.element,t)&&ay(e.point,e.element,t),gz=(e,t,n)=>{const i=Le(t,n);if(!i)return!1;const r=xe(t)?{...i,...Ue.getBoundTextElementPosition(t,i,n)}:i;return l_(e,r,n)},$o=(e,t,n,i=0,r=!1)=>{const s=[Math.min(n[0][0]-i,n[1][0]-i),Math.min(n[0][1]-i,n[1][1]-i),Math.max(n[0][0]+i,n[1][0]+i),Math.max(n[0][1]+i,n[1][1]+i)],o=si(e,t);if(!Vd(s,o))return[];switch(e.type){case"rectangle":case"image":case"text":case"iframe":case"embeddable":case"frame":case"selection":case"magicframe":return Hae(e,t,n,i,r);case"diamond":return Vae(e,t,n,i,r);case"ellipse":return $ae(e,t,n,i);case"line":case"freedraw":case"arrow":return zae(e,n,r)}},mz=(e,t,n,i,r,s=!1)=>{for(const o of e){const a=S_(o[0],o[1],o[2],o[3]),l=[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])];if(!Vd(a,l))continue;const c=MB(o,t);if(c.length>0){for(const u of c)n.push(q(u,i,r));if(s)return n}}return n},pz=(e,t,n,i,r,s=!1)=>{for(const o of e){const a=u0(o,t);if(a&&(n.push(q(a,i,r)),s))return n}return n},zae=(e,t,n=!1)=>{const[i,r]=c6(e),s=[];for(const o of i){const a=u0(o,t);if(a&&(s.push(a),n))return s}for(const o of r){const a=S_(o[0],o[1],o[2],o[3]),l=[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])];if(!Vd(a,l))continue;const c=MB(o,t);if(c.length>0&&(s.push(...c),n))return s}return s},Hae=(e,t,n,i=0,r=!1)=>{const s=oi(e,t),o=q(n[0],s,-e.angle),a=q(n[1],s,-e.angle),l=Me(o,a),[c,u]=t_(e,i),d=[];return pz(c,l,d,s,e.angle,r),r&&d.length>0||mz(u,l,d,s,e.angle,r),d},Vae=(e,t,n,i=0,r=!1)=>{const s=oi(e,t),o=q(n[0],s,-e.angle),a=q(n[1],s,-e.angle),l=Me(o,a),[c,u]=n_(e,i),d=[];return pz(c,l,d,s,e.angle,r),r&&d.length>0||mz(u,l,d,s,e.angle,r),d},$ae=(e,t,n,i=0)=>{const r=oi(e,t),s=q(n[0],r,-e.angle),o=q(n[1],r,-e.angle);return Ise(RB(r,e.width/2+i,e.height/2+i),Me(s,o)).map(a=>q(a,r,e.angle))},$A=(e,t,n,i=1)=>xp(t,n,e)<=i,l_=(e,t,n)=>{if((xe(t)||qi(t))&&!qo(t.points))return!1;const[i,r,s,o]=si(t,n);if(!c0(S(i,r),e,S(s,o)))return!1;const a=S((i+s)/2,(r+o)/2),l=Ei(In(ts(he(e,a,.1)),Math.max(t.width,t.height)*2),a),c=Me(e,l);return $o(t,n,c).filter((d,f,h)=>h.findIndex(m=>Os(m,d))===f).length%2===1},Vn=[1,0],cr=[0,1],ws=[-1,0],Js=[0,-1],Vh=e=>{const[t,n]=e,i=Math.abs(t),r=Math.abs(n);return t>r?Vn:t<=-r?ws:n>i?cr:Js},zr=(e,t)=>Vh(he(e,t)),La=(e,t)=>Oo(zr(e,t)),Gn=(e,t)=>e[0]===t[0]&&e[1]===t[1],Oo=e=>Gn(e,Vn)||Gn(e,ws),Gae=(e,t,n)=>{const i=_g(t),r=.95,s=Ei(In(he(q(S(e.x+e.width/2,e.y),i,e.angle),i),r),i),o=Ei(In(he(q(S(e.x+e.width,e.y+e.height/2),i,e.angle),i),r),i),a=Ei(In(he(q(S(e.x+e.width/2,e.y+e.height),i,e.angle),i),r),i),l=Ei(In(he(q(S(e.x,e.y+e.height/2),i,e.angle),i),r),i);if(yt(he(n,s),he(s,o))<=0&&yt(he(n,s),he(s,l))>0)return zr(s,i);if(yt(he(n,o),he(o,a))<=0&&yt(he(n,o),he(o,s))>0)return zr(o,i);if(yt(he(n,a),he(a,l))<=0&&yt(he(n,a),he(a,o))>0)return zr(a,i);if(yt(he(n,l),he(l,s))<=0&&yt(he(n,l),he(l,a))>0)return zr(l,i);if(yt(he(n,i),he(s,i))<=0&&yt(he(n,i),he(o,i))>0){const u=e.width>e.height?s:o;return zr(u,i)}else if(yt(he(n,i),he(o,i))<=0&&yt(he(n,i),he(a,i))>0){const u=e.width>e.height?a:o;return zr(u,i)}else if(yt(he(n,i),he(a,i))<=0&&yt(he(n,i),he(l,i))>0){const u=e.width>e.height?a:l;return zr(u,i)}const c=e.width>e.height?s:l;return zr(c,i)},c_=(e,t,n)=>{const r=_g(t);if(e.type==="diamond")return Gae(e,t,n);const s=Pm(S(t[0],t[1]),r,2),o=Pm(S(t[2],t[1]),r,2),a=Pm(S(t[0],t[3]),r,2),l=Pm(S(t[2],t[3]),r,2);return L8([s,o,r],n)?Js:L8([o,l,r],n)?Vn:L8([l,a,r],n)?cr:ws},Uz=e=>[e[0]===0?0:e[0]>0?-1:1,e[1]===0?0:e[1]>0?-1:1],u_=1,Mn=40,Xae=(e,t)=>{const n=e.fixedSegments?e.fixedSegments.slice():null;if(n){const i=[];e.points.map(o=>S(e.x+o[0],e.y+o[1])).forEach((o,a,l)=>{if(a<2)return i.push(o);const c=zr(o,l[a-1]),u=zr(l[a-1],l[a-2]);if(Gn(c,u)){const d=(n==null?void 0:n.findIndex(h=>h.index===a-1))??-1,f=(n==null?void 0:n.findIndex(h=>h.index===a))??-1;f!==-1&&(n[f].start=S(l[a-2][0]-e.x,l[a-2][1]-e.y)),d!==-1&&n.splice(d,1),i.splice(-1,1),n.forEach(h=>{h.index>a-1&&(h.index-=1)})}return i.push(o)});const r=[];i.forEach((o,a,l)=>{if(a<3)return r.push(o);if(ct(l[a-2],l[a-1])<u_){const c=(n==null?void 0:n.findIndex(f=>f.index===a-2))??-1,u=(n==null?void 0:n.findIndex(f=>f.index===a-1))??-1;u!==-1&&n.splice(u,1),c!==-1&&n.splice(c,1),r.splice(-2,2),n.forEach(f=>{f.index>a-2&&(f.index-=2)});const d=La(o,l[a-1]);return r.push(S(d?o[0]:l[a-2][0],d?l[a-2][1]:o[1]))}r.push(o)});const s=n.filter(o=>o.index!==1&&o.index!==r.length-1);return s.length===0?Za(h_(g_(f_(e,d_(e,t,r.map(o=>S(o[0]-e.x,o[1]-e.y))))??[])),s,null,null):Za(r,s,e.startIsSpecial,e.endIsSpecial)}return{x:e.x,y:e.y,points:e.points,fixedSegments:e.fixedSegments,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}},jae=(e,t,n)=>{var A,C;const i=t.map(k=>k.index),s=(((A=e.fixedSegments)==null?void 0:A.map(k=>k.index))??[]).findIndex(k=>!i.includes(k));if(s===-1||!((C=e.fixedSegments)!=null&&C[s]))return{points:e.points};const o=e.fixedSegments[s].index,a=e.fixedSegments[s-1],l=e.fixedSegments[s+1],c=e.x+(a?a.end[0]:0),u=e.y+(a?a.end[1]:0),d=a?null:e.startBinding,f=l?null:e.endBinding,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredStartElement:b,hoveredEndElement:y,...w}=d_({x:c,y:u,startBinding:d,endBinding:f,startArrowhead:null,endArrowhead:null,points:e.points},n,[S(0,0),S(e.x+((l==null?void 0:l.start[0])??e.points[e.points.length-1][0])-c,e.y+((l==null?void 0:l.start[1])??e.points[e.points.length-1][1])-u)],{isDragging:!1}),{points:v}=Za(h_(g_(f_(e,{startHeading:h,endHeading:m,startGlobalPoint:p,endGlobalPoint:U,hoveredEndElement:y,...w})??[])),t,null,null);if(!v||v.length<2)throw new Error("Property 'points' is required in the update returned by normalizeArrowElementUpdate()");const I=[];if(a)for(let k=0;k<a.index;k++)I.push(S(e.x+e.points[k][0],e.y+e.points[k][1]));if(v.forEach(k=>{I.push(S(e.x+(a?a.end[0]:0)+k[0],e.y+(a?a.end[1]:0)+k[1]))}),l)for(let k=l.index;k<e.points.length;k++)I.push(S(e.x+e.points[k][0],e.y+e.points[k][1]));const x=((l==null?void 0:l.index)??e.points.length)-((a==null?void 0:a.index)??0)-1,_=t.map(k=>k.index>o?{...k,index:k.index-x+(v.length-1)}:k),T=I.flatMap((k,P)=>{const D=I[P-1],j=I[P+1];if(D&&j){const G=zr(k,D),B=zr(j,k);if(Gn(G,B))return _.forEach(H=>{H.index>P&&(H.index-=1)}),[];if(Gn(G,Uz(B)))return _.forEach(H=>{H.index>P&&(H.index+=1)}),[k,k]}return[k]});return Za(T,_,!1,!1)},Yae=(e,t,n,i,r,s)=>{var I,x;const o=t.map((_,T)=>e.fixedSegments==null||e.fixedSegments[T]===void 0||e.fixedSegments[T].index!==_.index||(_.start[0]!==e.fixedSegments[T].start[0]&&_.end[0]!==e.fixedSegments[T].end[0])!=(_.start[1]!==e.fixedSegments[T].start[1]&&_.end[1]!==e.fixedSegments[T].end[1])?T:null).filter(_=>_!==null).shift();if(o==null)return{points:e.points};const a=((I=e.fixedSegments)==null?void 0:I.findIndex(_=>_.index===1))??-1,l=((x=e.fixedSegments)==null?void 0:x.findIndex(_=>_.index===e.points.length-1))??-1,c=ct(t[o].start,t[o].end),u=c<Mn+5;if(a===-1&&t[o].index===1&&r){const _=Oo(n),A=(_?Gn(n,Vn):Gn(n,cr))?u?c/2:Mn:u?-c/2:-40;t[o].start=S(t[o].start[0]+(_?A:0),t[o].start[1]+(_?0:A))}if(l===-1&&t[o].index===e.points.length-1&&s){const _=Oo(i),A=(_?Gn(i,Vn):Gn(i,cr))?u?c/2:Mn:u?-c/2:-40;t[o].end=S(t[o].end[0]+(_?A:0),t[o].end[1]+(_?0:A))}const d=t.map(_=>({..._,start:S(e.x+_.start[0],e.y+_.start[1]),end:S(e.x+_.end[0],e.y+_.end[1])})),f=e.points.map((_,T)=>S(e.x+_[0],e.y+_[1])),h=d[o].index-1,m=d[o].index,p=d[o].start,U=d[o].end,b=f[h-1]&&!Os(f[h],f[h-1])?La(f[h-1],f[h]):void 0,y=f[m+1]&&!Os(f[m],f[m+1])?La(f[m+1],f[m]):void 0;if(b!==void 0){const _=b?1:0;f[h-1][_]=p[_]}if(f[h]=p,f[m]=U,y!==void 0){const _=y?1:0;f[m+1][_]=U[_]}const w=d.findIndex(_=>_.index===h);if(w!==-1){const _=La(d[w].end,d[w].start)?1:0;d[w].start[_]=p[_],d[w].end=p}const v=d.findIndex(_=>_.index===m+1);if(v!==-1){const _=La(d[v].end,d[v].start)?1:0;d[v].end[_]=U[_],d[v].start=U}if(a===-1&&h===0){const _=r?Oo(n):La(f[1],f[0]);f.unshift(S(_?p[0]:e.x+e.points[0][0],_?e.y+e.points[0][1]:p[1])),r&&f.unshift(S(e.x+e.points[0][0],e.y+e.points[0][1]));for(const T of d)T.index+=r?2:1}if(l===-1&&m===e.points.length-1){const _=Oo(i);f.push(S(_?U[0]:e.x+e.points[e.points.length-1][0],_?e.y+e.points[e.points.length-1][1]:U[1])),s&&f.push(S(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]))}return Za(f,d.map(_=>({..._,start:S(_.start[0]-e.x,_.start[1]-e.y),end:S(_.end[0]-e.x,_.end[1]-e.y)})),!1,!1)},Wae=(e,t,n,i,r,s,o,a,l)=>{let c=e.startIsSpecial??null,u=e.endIsSpecial??null;const d=t.map((U,b)=>b===0||b===t.length-1?S(e.x+U[0],e.y+U[1]):S(e.x+e.points[b][0],e.y+e.points[b][1])),f=n.map(U=>({...U,start:S(e.x+(U.start[0]-t[0][0]),e.y+(U.start[1]-t[0][1])),end:S(e.x+(U.end[0]-t[0][0]),e.y+(U.end[1]-t[0][1]))})),h=[],m=2+(c?1:0),p=2+(u?1:0);for(;h.length+m<d.length-p;)h.push(d[h.length+m]);{const U=d.at(c?2:1),b=d.at(c?3:2);if(!U||!b)throw new Error(`Second and third points must exist when handling endpoint drag (${c})`);const y=Oo(i),w=Oo(Vh(he(U,b)));if(a&&y===w){const v=y?Gn(i,Vn):Gn(i,cr);if(h.unshift(S(w?s[0]+(v?Mn:-40):b[0],w?b[1]:s[1]+(v?Mn:-40))),h.unshift(S(y?s[0]+(v?Mn:-40):s[0],y?s[1]:s[1]+(v?Mn:-40))),!c){c=!0;for(const I of f)I.index>1&&(I.index+=1)}}else if(h.unshift(S(w?s[0]:U[0],w?U[1]:s[1])),c){c=!1;for(const v of f)v.index>1&&(v.index-=1)}h.unshift(s)}{const U=d.at(d.length-(u?3:2)),b=d.at(d.length-(u?4:3));if(!U||!b)throw new Error(`Second and third to last points must exist when handling endpoint drag (${u})`);const y=Oo(r),w=La(b,U);if(l&&y===w){const v=y?Gn(r,Vn):Gn(r,cr);h.push(S(w?o[0]+(v?Mn:-40):b[0],w?b[1]:o[1]+(v?Mn:-40))),h.push(S(y?o[0]+(v?Mn:-40):o[0],y?o[1]:o[1]+(v?Mn:-40))),u||(u=!0)}else h.push(S(w?o[0]:U[0],w?U[1]:o[1])),u&&(u=!1)}return h.push(o),Za(h,f.map(({index:U})=>({index:U,start:h[U-1],end:h[U]})).map(U=>({...U,start:S(U.start[0]-s[0],U.start[1]-s[1]),end:S(U.end[0]-s[0],U.end[1]-s[1])})),c,u)},HU=1e6,Eg=(e,t,n,i)=>{var I;if(e.points.length<2)return{points:n.points??e.points};const r=n.fixedSegments??e.fixedSegments??[],s=n.points?n.points&&n.points.length===2?e.points.map((x,_)=>_===0?n.points[0]:_===e.points.length-1?n.points[1]:x):n.points.slice():e.points.slice(),{startBinding:o,endBinding:a,...l}=n,c=typeof o<"u"?o:e.startBinding,u=typeof a<"u"?a:e.endBinding,d=c&&f6(c.elementId,t),f=u&&f6(u.elementId,t),h=yz(s);if(c&&!d&&h||u&&!f&&h||t.size===0&&h||Object.keys(l).length===0&&((d==null?void 0:d.id)!==(c==null?void 0:c.elementId)||(f==null?void 0:f.id)!==(u==null?void 0:u.elementId)))return Za(s.map(x=>S(e.x+x[0],e.y+x[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial);const{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:b,hoveredStartElement:y,hoveredEndElement:w,...v}=d_({x:e.x,y:e.y,startBinding:c,endBinding:u,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead,points:e.points},t,s,i);return t.size===0&&h?Za(s.map(x=>S(e.x+x[0],e.y+x[1])),e.fixedSegments,e.startIsSpecial,e.endIsSpecial):!n.points&&!n.fixedSegments&&!n.startBinding&&!n.endBinding?Xae(e,t):n.startBinding===e.startBinding&&n.endBinding===e.endBinding&&(n.points??[]).every((x,_)=>Os(x,e.points[_]??S(1/0,1/0)))&&h?{}:r.length===0?Za(h_(g_(f_(e,{startHeading:m,endHeading:p,startGlobalPoint:U,endGlobalPoint:b,hoveredEndElement:w,...v})??[])),r,null,null):(((I=e.fixedSegments)==null?void 0:I.length)??0)>r.length?jae(e,r,t):n.points?n.points&&n.fixedSegments?n:Wae(e,s,r,m,p,U,b,y,w):Yae(e,r,m,p,y,w)},d_=(e,t,n,i)=>{var I,x;const r=Jb(n[0],pn(e.x,e.y)),s=Jb(n[n.length-1],pn(e.x,e.y));let o=null,a=null;if(i!=null&&i.isDragging){const _=Array.from(t.values());o=YA(r,t,_,i==null?void 0:i.zoom)||null,a=YA(s,t,_,i==null?void 0:i.zoom)||null}else o=e.startBinding&&f6(e.startBinding.elementId,t)||null,a=e.endBinding&&f6(e.endBinding.elementId,t)||null;const l=XA({...e,type:"arrow",elbowed:!0,points:n},"start",(I=e.startBinding)==null?void 0:I.fixedPoint,r,o,t,i==null?void 0:i.isDragging),c=XA({...e,type:"arrow",elbowed:!0,points:n},"end",(x=e.endBinding)==null?void 0:x.fixedPoint,s,a,t,i==null?void 0:i.isDragging),u=jA(l,c,o,r,t),d=jA(c,l,a,s,t),f=[l[0]-2,l[1]-2,l[0]+2,l[1]+2],h=[c[0]-2,c[1]-2,c[0]+2,c[1]+2],m=o?_a(o,t,Dl(u,e.startArrowhead?kt*6:kt*2,1)):f,p=a?_a(a,t,Dl(d,e.endArrowhead?kt*6:kt*2,1)):h,U=p0(l,a?_a(a,t,Dl(d,Mn,Mn)):h)||p0(c,o?_a(o,t,Dl(u,Mn,Mn)):f),b=bz(U?[f,h]:[m,p]),y=qae(U?f:m,U?h:p,b,U?Dl(u,!o&&!a?0:Mn,0):Dl(u,!o&&!a?0:Mn-(e.startArrowhead?kt*6:kt*2),Mn),U?Dl(d,!o&&!a?0:Mn,0):Dl(d,!o&&!a?0:Mn-(e.endArrowhead?kt*6:kt*2),Mn),U,o&&_a(o,t),a&&_a(a,t)),w=GA(y[0],u,l),v=GA(y[1],d,c);return{dynamicAABBs:y,startDonglePosition:w,startGlobalPoint:l,startHeading:u,endDonglePosition:v,endGlobalPoint:c,endHeading:d,commonBounds:b,hoveredStartElement:o,hoveredEndElement:a,boundsOverlap:U,startElementBounds:m,endElementBounds:p}},f_=(e,t)=>{const{dynamicAABBs:n,startDonglePosition:i,startGlobalPoint:r,startHeading:s,endDonglePosition:o,endGlobalPoint:a,endHeading:l,commonBounds:c,hoveredEndElement:u}=t,d=Qae(n,i||r,s,o||a,l,c),f=i&&VU(i,d),h=o&&VU(o,d),m=VU(a,d);m&&u&&(m.closed=!0);const p=VU(r,d);p&&e.startBinding&&(p.closed=!0);const U=f&&h&&(p0(f.pos,n[1])||p0(h.pos,n[0])),b=Kae(f||p,h||m,d,s||Vn,l||Vn,U?[]:n);if(b){const y=b.map(w=>[w.pos[0],w.pos[1]]);return f&&y.unshift(r),h&&y.push(a),y}return null},Dl=(e,t,n)=>{switch(e){case Js:return[t,n,n,n];case Vn:return[n,t,n,n];case cr:return[n,n,t,n]}return[n,n,n,t]},Kae=(e,t,n,i,r,s)=>{const o=H8(e.pos,t.pos),a=new ere(l=>l.f);for(a.push(e);a.size()>0;){const l=a.pop();if(!l||l.closed)continue;if(l===t)return Zae(e,l);l.closed=!0;const c=ele(l.addr,n);for(let u=0;u<4;u++){const d=c[u];if(!d||d.closed)continue;const f=Pm(d.pos,l.pos,.5);if(Qse(...s.map(v=>p0(f,v))))continue;const h=tle(u),m=l.parent?Vh(he(l.pos,l.parent.pos)):i,p=Uz(m);if(Gn(p,h)||WA(e.addr,d.addr)&&Gn(h,i)||WA(t.addr,d.addr)&&Gn(h,r))continue;const b=m!==h,y=l.g+H8(d.pos,l.pos)+(b?Math.pow(o,3):0),w=d.visited;if(!w||y<d.g){const v=Jae(d,t,h,r);d.visited=!0,d.parent=l,d.h=H8(t.pos,d.pos)+v*Math.pow(o,2),d.g=y,d.f=d.g+d.h,w?a.rescoreElement(d):a.push(d)}}}return null},Zae=(e,t)=>{let n=t;const i=[];for(;n.parent;)i.unshift(n),n=n.parent;return i.unshift(e),i},H8=(e,t)=>Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1]),qae=(e,t,n,i,r,s,o,a)=>{const l=o??e,c=a??t,[u,d,f,h]=i??[0,0,0,0],[m,p,U,b]=r??[0,0,0,0],y=[e[0]>t[2]?e[1]>t[3]||e[3]<t[1]?Math.min((l[0]+c[2])/2,e[0]-h):(l[0]+c[2])/2:e[0]>t[0]?e[0]-h:n[0]-h,e[1]>t[3]?e[0]>t[2]||e[2]<t[0]?Math.min((l[1]+c[3])/2,e[1]-u):(l[1]+c[3])/2:e[1]>t[1]?e[1]-u:n[1]-u,e[2]<t[0]?e[1]>t[3]||e[3]<t[1]?Math.max((l[2]+c[0])/2,e[2]+d):(l[2]+c[0])/2:e[2]<t[2]?e[2]+d:n[2]+d,e[3]<t[1]?e[0]>t[2]||e[2]<t[0]?Math.max((l[3]+c[1])/2,e[3]+f):(l[3]+c[1])/2:e[3]<t[3]?e[3]+f:n[3]+f],w=[t[0]>e[2]?t[1]>e[3]||t[3]<e[1]?Math.min((c[0]+l[2])/2,t[0]-b):(c[0]+l[2])/2:t[0]>e[0]?t[0]-b:n[0]-b,t[1]>e[3]?t[0]>e[2]||t[2]<e[0]?Math.min((c[1]+l[3])/2,t[1]-m):(c[1]+l[3])/2:t[1]>e[1]?t[1]-m:n[1]-m,t[2]<e[0]?t[1]>e[3]||t[3]<e[1]?Math.max((c[2]+l[0])/2,t[2]+p):(c[2]+l[0])/2:t[2]<e[2]?t[2]+p:n[2]+p,t[3]<e[1]?t[0]>e[2]||t[2]<e[0]?Math.max((c[3]+l[1])/2,t[3]+U):(c[3]+l[1])/2:t[3]<e[3]?t[3]+U:n[3]+U],v=bz([y,w]);if(!s&&y[2]-y[0]+w[2]-w[0]>v[2]-v[0]+1e-11&&y[3]-y[1]+w[3]-w[1]>v[3]-v[1]+1e-11){const[I,x]=[(w[0]+w[2])/2,(w[1]+w[3])/2];if(t[0]>e[2]&&e[1]>t[3]){const _=y[2]+(w[0]-y[2])/2,T=w[3]+(y[1]-w[3])/2;return yt(pn(e[2]-I,e[1]-x),pn(e[0]-I,e[3]-x))>0?[[y[0],y[1],_,y[3]],[_,w[1],w[2],w[3]]]:[[y[0],T,y[2],y[3]],[w[0],w[1],w[2],T]]}else if(e[2]<t[0]&&e[3]<t[1]){const _=y[2]+(w[0]-y[2])/2,T=y[3]+(w[1]-y[3])/2;return yt(pn(e[0]-I,e[1]-x),pn(e[2]-I,e[3]-x))>0?[[y[0],y[1],y[2],T],[w[0],T,w[2],w[3]]]:[[y[0],y[1],_,y[3]],[_,w[1],w[2],w[3]]]}else if(e[0]>t[2]&&e[3]<t[1]){const _=w[2]+(y[0]-w[2])/2,T=y[3]+(w[1]-y[3])/2;return yt(pn(e[2]-I,e[1]-x),pn(e[0]-I,e[3]-x))>0?[[_,y[1],y[2],y[3]],[w[0],w[1],_,w[3]]]:[[y[0],y[1],y[2],T],[w[0],T,w[2],w[3]]]}else if(e[0]>t[2]&&e[1]>t[3]){const _=w[2]+(y[0]-w[2])/2,T=w[3]+(y[1]-w[3])/2;return yt(pn(e[0]-I,e[1]-x),pn(e[2]-I,e[3]-x))>0?[[_,y[1],y[2],y[3]],[w[0],w[1],_,w[3]]]:[[y[0],T,y[2],y[3]],[w[0],w[1],w[2],T]]}}return[y,w]},Qae=(e,t,n,i,r,s)=>{const o=new Set,a=new Set;n===ws||n===Vn?a.add(t[1]):o.add(t[0]),r===ws||r===Vn?a.add(i[1]):o.add(i[0]),e.forEach(u=>{o.add(u[0]),o.add(u[2]),a.add(u[1]),a.add(u[3])}),o.add(s[0]),o.add(s[2]),a.add(s[1]),a.add(s[3]);const l=Array.from(a).sort((u,d)=>u-d),c=Array.from(o).sort((u,d)=>u-d);return{row:l.length,col:c.length,data:l.flatMap((u,d)=>c.map((f,h)=>({f:0,g:0,h:0,closed:!1,visited:!1,parent:null,addr:[h,d],pos:[f,u]})))}},GA=(e,t,n)=>{switch(t){case Js:return S(n[0],e[1]);case Vn:return S(e[2],n[1]);case cr:return S(n[0],e[3])}return S(e[0],n[1])},Jae=(e,t,n,i)=>{if(i===Vn)switch(n){case Vn:return e.pos[0]>=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2;case Js:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case cr:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case ws:return e.pos[1]===t.pos[1]?4:2}else if(i===ws)switch(n){case Vn:return e.pos[1]===t.pos[1]?4:2;case Js:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case cr:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3;case ws:return e.pos[0]<=t.pos[0]?4:e.pos[1]===t.pos[1]?0:2}else if(i===Js)switch(n){case Vn:return e.pos[1]>t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Js:return e.pos[1]>=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case cr:return e.pos[0]===t.pos[0]?4:2;case ws:return e.pos[1]>t.pos[1]&&e.pos[0]>t.pos[0]?1:3}else if(i===cr)switch(n){case Vn:return e.pos[1]<t.pos[1]&&e.pos[0]<t.pos[0]?1:3;case Js:return e.pos[0]===t.pos[0]?4:2;case cr:return e.pos[1]<=t.pos[1]?4:e.pos[0]===t.pos[0]?0:2;case ws:return e.pos[1]<t.pos[1]&&e.pos[0]>t.pos[0]?1:3}return 0},ele=([e,t],n)=>[Fm([e,t-1],n),Fm([e+1,t],n),Fm([e,t+1],n),Fm([e-1,t],n)],Fm=([e,t],n)=>e<0||e>=n.col||t<0||t>=n.row?null:n.data[t*n.col+e]??null,VU=(e,t)=>{for(let n=0;n<t.col;n++)for(let i=0;i<t.row;i++){const r=Fm([n,i],t);if(r&&e[0]===r.pos[0]&&e[1]===r.pos[1])return r}return null},bz=e=>[Math.min(...e.map(t=>t[0])),Math.min(...e.map(t=>t[1])),Math.max(...e.map(t=>t[2])),Math.max(...e.map(t=>t[3]))],f6=(e,t)=>{const n=t.get(e);return n&&os(n)?n:null},Za=(e,t,n,i)=>{const r=e[0][0],s=e[0][1];let o=e.map(a=>Jb(a,In(he(e[0]),-1)));return(r<-1e6||r>HU||s<-1e6||s>HU||r+o[o.length-1][0]<-1e6||s+o[o.length-1][0]>HU||r+o[o.length-1][1]<-1e6||s+o[o.length-1][1]>HU)&&console.error("Elbow arrow normalization is outside reasonable bounds (> 1e6)",{x:r,y:s,points:o,...Ph(o)}),o=o.map(([a,l])=>S(Ze(a,-1e6,1e6),Ze(l,-1e6,1e6))),{points:o,x:Ze(r,-1e6,1e6),y:Ze(s,-1e6,1e6),fixedSegments:((t==null?void 0:t.length)??0)>0?t:null,...Ph(o),startIsSpecial:n,endIsSpecial:i}},h_=e=>{if(e.length>1){let t=Math.abs(e[0][1]-e[1][1])<Math.abs(e[0][0]-e[1][0]);return e.filter((n,i)=>{if(i===0||i===e.length-1)return!0;const r=e[i+1],s=Math.abs(n[1]-r[1])<Math.abs(n[0]-r[0]);return t===s?(t=s,!1):(t=s,!0)})}return e},g_=e=>e.length>=4?e.filter((t,n)=>{if(n===0||n===e.length-1)return!0;const i=e[n-1];return ct(i,t)>u_}):e,tle=e=>{switch(e){case 0:return Js;case 1:return Vn;case 2:return cr}return ws},XA=(e,t,n,i,r,s,o)=>o?r&&s?Tz(e,r,t,s):i:r?f0(n||[0,0],r,s??ve([r])):i,jA=(e,t,n,i,r)=>mle(e,t,n,n&&_a(n,r,Array(4).fill(xp(n,r,e))),i,r),YA=(e,t,n,i)=>qa(Wa(e),n,t,i,!0,!0),WA=(e,t)=>e[0]===t[0]&&e[1]===t[1],yz=(e,t=u_)=>e.slice(1).map((n,i)=>Math.abs(n[0]-e[i][0])<t||Math.abs(n[1]-e[i][1])<t).every(Boolean),_i=(e,t,n,i)=>{let r=!1;const{points:s,fixedSegments:o,startBinding:a,endBinding:l,fileId:c}=n;pe(e)&&(Object.keys(n).length===0||typeof s<"u"||typeof o<"u"||typeof a<"u"||typeof l<"u")?n={...n,angle:0,...Eg({...e,x:n.x||e.x,y:n.y||e.y},t,n,i)}:typeof s<"u"&&(n={...Ph(s),...n});for(const u in n){const d=n[u];if(typeof d<"u"){if(e[u]===d&&(typeof d!="object"||d===null||u==="groupIds"||u==="scale"))continue;if(u==="scale"){const f=e[u],h=d;if(f[0]===h[0]&&f[1]===h[1])continue}else if(u==="points"){const f=e[u],h=d;if(f.length===h.length){let m=!1,p=f.length;for(;--p;){const U=f[p],b=h[p];if(U[0]!==b[0]||U[1]!==b[1]){m=!0;break}}if(!m)continue}}e[u]=d,r=!0}}return r&&((typeof n.height<"u"||typeof n.width<"u"||typeof c<"u"||typeof s<"u")&&qt.delete(e),e.version=n.version??e.version+1,e.versionNonce=n.versionNonce??Ps(),e.updated=yg()),e},Ie=(e,t,n=!1)=>{let i=!1;for(const r in t){const s=t[r];if(typeof s<"u"){if(e[r]===s&&(typeof s!="object"||s===null))continue;i=!0}}return!i&&!n?e:{...e,...t,version:t.version??e.version+1,versionNonce:t.versionNonce??Ps(),updated:yg()}},Da=(e,t)=>(e.version=(t??e.version)+1,e.versionNonce=Ps(),e.updated=yg(),e),nle=e=>!e[V.CTRL_OR_CMD],Ju=e=>e.isBindingEnabled,kt=5,ile=10,rle=(e,t)=>{const n=[];return t.forEach(i=>{const r=e.getNonDeletedElement(i);r!=null&&n.push(r)}),n},h6=(e,t,n,i)=>{i.getNonDeletedElementsMap();const r=new Set,s=new Set;KA(e,t,n,"start",r,s,i),KA(e,n,t,"end",r,s,i);const o=Array.from(s).filter(a=>!r.has(a));rle(i,o).forEach(a=>{var l;i.mutateElement(a,{boundElements:(l=a.boundElements)==null?void 0:l.filter(c=>c.type!=="arrow"||c.id!==e.id)})})},KA=(e,t,n,i,r,s,o,a)=>{if(t!=="keep"){if(t===null){const l=cle(e,i,o);l!=null&&s.add(l);return}_z(e)?(n==null||(n==="keep"?!vz(e,t,i):i==="start"||n.id!==t.id))&&(ea(e,t,i,o),r.add(t.id)):(ea(e,t,i,o),r.add(t.id))}},Ez=(e,t,n)=>["start","end"].map(i=>{var o,a;const r=Iz(e,i,t),s=i==="start"?(o=e.startBinding)==null?void 0:o.elementId:(a=e.endBinding)==null?void 0:a.elementId;if(s){const l=t.get(s);if(os(l)&&B2(l,r,t,n))return l}return null}),sle=(e,t,n,i,r,s)=>{const a=e.points.length-1,l=n.findIndex(f=>f===0)>-1,c=n.findIndex(f=>f===a)>-1,u=l?t?p6(e,"start",i,r,s):null:"keep",d=c?t?p6(e,"end",i,r,s):null:"keep";return[u,d]},ole=(e,t,n,i,r)=>{if(pe(e))return["keep","keep"];const[s,o]=Ez(e,t,r),a=s&&i?p6(e,"start",t,n,r):null,l=o&&i?p6(e,"end",t,n,r):null;return[a,l]},g6=(e,t,n,i,r)=>{e.forEach(s=>{const[o,a]=n!=null&&n.length?sle(s,t,n??[],i.getNonDeletedElementsMap(),i.getNonDeletedElements(),r):ole(s,i.getNonDeletedElementsMap(),i.getNonDeletedElements(),t,r);h6(s,o,a,i)})},V8=(e,t,n)=>e.length>50?[]:e.filter(xe).flatMap(i=>Ez(i,t,n)).filter(i=>i!==null).filter(i=>e.filter(r=>r.id===(i==null?void 0:i.id)).length===0),N4=(e,t,n,i,r)=>Array.from(t.reduce((s,o)=>{const a=qa(o,n.getNonDeletedElements(),n.getNonDeletedElementsMap(),i,pe(e),pe(e));return a!=null&&!wz(e,r==null?void 0:r.id,a)&&s.add(a),s},new Set)),ale=(e,t,n,i)=>{const r=i.getNonDeletedElements(),s=i.getNonDeletedElementsMap();t.startBoundElement!=null&&ea(e,t.startBoundElement,"start",i);const o=qa(n,r,s,t.zoom,pe(e),pe(e));o!==null&&(vz(e,o,"end")||ea(e,o,"end",i))},lle=(e,t)=>({...e,gap:Math.min(e.gap,vg(t,t.width,t.height))}),ea=(e,t,n,i)=>{if(!Ce(e))return;let r={elementId:t.id,...lle(fle(e,t,n,i.getNonDeletedElementsMap()),t)};pe(e)&&(r={...r,...m6(e,t,n,i.getNonDeletedElementsMap())}),i.mutateElement(e,{[n==="start"?"startBinding":"endBinding"]:r}),ve(t.boundElements||[]).has(e.id)||i.mutateElement(t,{boundElements:(t.boundElements||[]).concat({id:e.id,type:"arrow"})})},vz=(e,t,n)=>{const i=e[n==="start"?"endBinding":"startBinding"];return wz(e,i==null?void 0:i.elementId,t)},wz=(e,t,n)=>t===n.id&&_z(e),_z=e=>e.points.length<3&&!pe(e),cle=(e,t,n)=>{const i=t==="start"?"startBinding":"endBinding",r=e[i];return r==null?null:(n.mutateElement(e,{[i]:null}),r.elementId)},qa=(e,t,n,i,r,s)=>{if(s){let a=!1;const l=dle(t,u=>os(u,!1)&&B2(u,e,n,i,(r||!L2(u))&&!we(u))).filter(u=>a?!1:(L2(u)||(a=!0),!0));if(!l||l.length===0)return null;if(l.length===1)return l[0];const c=l.filter(u=>B2(u,e,n,i,!1));return c.length===1?c[0]:l.sort((u,d)=>d.width**2+d.height**2-(u.width**2+u.height**2)).pop()}return ule(t,a=>os(a,!1)&&B2(a,e,n,i,(r||!L2(a))&&!we(a)))},ule=(e,t)=>{let n=null;for(let i=e.length-1;i>=0;--i){const r=e[i];if(!r.isDeleted&&t(r)){n=r;break}}return n},dle=(e,t)=>{const n=[];for(let i=e.length-1;i>=0;--i){const r=e[i];r.isDeleted||t(r)&&n.push(r)}return n},fle=(e,t,n,i)=>{const r=n==="start"?-1:1,s=r===-1?0:e.points.length-1,o=s-r,a=Ue.getPointAtIndexGlobalCoordinates(e,s,i),l=Ue.getPointAtIndexGlobalCoordinates(e,o,i);return{focus:vle(t,i,l,a),gap:Math.max(1,xp(t,i,a))}},fr=(e,t,n)=>{if(!os(e))return;const{newSize:i,simultaneouslyUpdated:r}=n??{},s=gle(r);let o=t.getNonDeletedElementsMap();n!=null&&n.changedElements&&(o=new Map(o),n.changedElements.forEach(a=>{o.set(a.id,a)})),U6(o,e,a=>{var p,U;if(!xe(a)||a.isDeleted||!hle(a,e))return;const l=a.startBinding?o.get(a.startBinding.elementId):null,c=a.endBinding?o.get(a.endBinding.elementId):null;let u=null,d=null;l&&c&&(u=si(l,o),d=si(c,o));const f={startBinding:ZA(e,a.startBinding,i),endBinding:ZA(e,a.endBinding,i)};if(s.has(a.id)){t.mutateElement(a,f);return}const h=b6(o,a,(b,y)=>{var w,v;if(b&&os(b)&&(y==="startBinding"||y==="endBinding")&&(e.id===((w=a[y])==null?void 0:w.elementId)||e.id===((v=a[y==="startBinding"?"endBinding":"startBinding"])==null?void 0:v.elementId)&&!Vd(u,d))){const I=yle(a,y,f[y],b,o);if(I)return[y==="startBinding"?0:a.points.length-1,{point:I}]}return null}).filter(b=>b!==null);Ue.movePoints(a,t,new Map(h),{...e.id===((p=a.startBinding)==null?void 0:p.elementId)?{startBinding:f.startBinding}:{},...e.id===((U=a.endBinding)==null?void 0:U.elementId)?{endBinding:f.endBinding}:{}});const m=Le(a,o);m&&!m.isDeleted&&Ip(a,t,!1)})},d0=(e,t,n)=>{xe(e)?g6([e],!0,[],t,n==null?void 0:n.zoom):fr(e,t,{...n,changedElements:new Map([[e.id,e]])})},hle=(e,t)=>{var n,i;return((n=e.startBinding)==null?void 0:n.elementId)===t.id||((i=e.endBinding)==null?void 0:i.elementId)===t.id},gle=e=>new Set((e||[]).map(t=>t.id)),mle=(e,t,n,i,r,s,o)=>{const a=Vh(he(t,e));return!n||!i?a:ple(r,n,s,o)?c_(n,i,e):Vh(he(e,oi(n,s)))},ple=(e,t,n,i)=>{const r=xp(t,n,e),s=vg(t,t.width,t.height,i);return r>s?null:r},Tz=(e,t,n,i)=>{const r=_a(t,i),s=e.points[n==="start"?0:e.points.length-1],o=S(e.x+s[0],e.y+s[1]),a=fae(t)?Ule(t,i,o):o,l=pe(e),c=_g(r),u=n==="start"?1:e.points.length-2,d=q(S(e.x+e.points[u][0],e.y+e.points[u][1]),c,e.angle??0);let f=null;if(l){const h=Oo(c_(t,r,o)),m=ble(t,i,a),p=S(h?c[0]:m[0],h?m[1]:c[1]),U=Me(p,Ei(In(ts(he(m,p)),Math.max(t.width,t.height)*2),p));if(f=$o(t,i,U,kt).sort(Ra)[0],!f){const b=S(h?m[0]:c[0],h?c[1]:m[1]),y=Me(b,Ei(In(ts(he(m,b)),Math.max(t.width,t.height)*2),b));f=$o(t,i,y,kt).sort(Ra)[0]}}else f=$o(t,i,Me(d,Ei(In(ts(he(a,d)),ct(a,d)+Math.max(t.width,t.height)*2),d)),kt).sort((h,m)=>Ra(h,d)-Ra(m,d))[0];return!f||Ra(a,f)<pp?a:l?f:a},Ule=(e,t,n)=>{const i=oi(e,t),r=q(n,i,-e.angle);return r[0]<e.x&&r[1]<e.y?r[1]-e.y>-5?q(S(e.x-kt,e.y),i,e.angle):q(S(e.x,e.y-kt),i,e.angle):r[0]<e.x&&r[1]>e.y+e.height?r[0]-e.x>-5?q(S(e.x,e.y+e.height+kt),i,e.angle):q(S(e.x-kt,e.y+e.height),i,e.angle):r[0]>e.x+e.width&&r[1]>e.y+e.height?r[0]-e.x<e.width+kt?q(S(e.x+e.width,e.y+e.height+kt),i,e.angle):q(S(e.x+e.width+kt,e.y+e.height),i,e.angle):r[0]>e.x+e.width&&r[1]<e.y?r[0]-e.x<e.width+kt?q(S(e.x+e.width,e.y-kt),i,e.angle):q(S(e.x+e.width+kt,e.y),i,e.angle):n},ble=(e,t,n,i=.05)=>{const{x:r,y:s,width:o,height:a,angle:l}=e,c=oi(e,t,-.1,-.1),u=q(n,c,-l),d=Ze(i*a,5,80),f=Ze(i*o,5,80);if(u[0]<=r+o/2&&u[1]>c[1]-d&&u[1]<c[1]+d)return q(S(r-kt,c[1]),c,l);if(u[1]<=s+a/2&&u[0]>c[0]-f&&u[0]<c[0]+f)return q(S(c[0],s-kt),c,l);if(u[0]>=r+o/2&&u[1]>c[1]-d&&u[1]<c[1]+d)return q(S(r+o+kt,c[1]),c,l);if(u[1]>=s+a/2&&u[0]>c[0]-f&&u[0]<c[0]+f)return q(S(c[0],s+a+kt),c,l);if(e.type==="diamond"){const h=kt,m=S(r+o/4-h,s+a/4-h),p=S(r+3*o/4+h,s+a/4-h),U=S(r+o/4-h,s+3*a/4+h),b=S(r+3*o/4+h,s+3*a/4+h);if(ct(m,u)<Math.max(f,d))return q(m,c,l);if(ct(p,u)<Math.max(f,d))return q(p,c,l);if(ct(U,u)<Math.max(f,d))return q(U,c,l);if(ct(b,u)<Math.max(f,d))return q(b,c,l)}return n},yle=(e,t,n,i,r)=>{if(n==null||n.elementId!==i.id&&e.points.length>2)return null;const s=t==="startBinding"?-1:1,o=s===-1?0:e.points.length-1;if(pe(e)&&Bh(n)){const d=ly(n.fixedPoint)??m6(e,i,t==="startBinding"?"start":"end",r).fixedPoint,f=oi(i,r),h=S(i.x+d[0]*i.width,i.y+d[1]*i.height),m=q(h,f,i.angle);return Ue.pointFromAbsoluteCoords(e,m,r)}const a=o-s,l=Ue.getPointAtIndexGlobalCoordinates(e,a,r),c=wle(i,r,n.focus,l);let u;if(n.gap===0)u=c;else{const d=Ue.getPointAtIndexGlobalCoordinates(e,o,r),f=oi(i,r),h=ct(l,d)+ct(l,f)+Math.max(i.width,i.height)*2,m=[...$o(i,r,Me(l,Ei(In(ts(he(c,l)),h),l)),n.gap).sort((p,U)=>Ra(p,l)-Ra(U,l)),Ei(In(ts(he(c,l)),ct(l,d)),l)];m.length>1?u=m[0]:m.length===1?u=c:u=d}return Ue.pointFromAbsoluteCoords(e,u,r)},m6=(e,t,n,i)=>{const r=[t.x,t.y,t.x+t.width,t.y+t.height],s=Tz(e,t,n,i),o=S(r[0]+(r[2]-r[0])/2,r[1]+(r[3]-r[1])/2),a=q(s,o,-t.angle);return{fixedPoint:ly([(a[0]-t.x)/t.width,(a[1]-t.y)/t.height])}},ZA=(e,t,n)=>{if(t==null||n==null)return t;const{width:i,height:r}=n,{width:s,height:o}=e,a=Math.max(1,Math.min(vg(e,i,r),t.gap*(i<r?i/s:r/o)));return{...t,gap:a}},p6=(e,t,n,i,r)=>qa(Iz(e,t,n),i,n,r,pe(e),pe(e)),Iz=(e,t,n)=>{const i=t==="start"?0:-1;return Wa(Ue.getPointAtIndexGlobalCoordinates(e,i,n))},Ele=(e,t,n)=>{for(const i of e){if("boundElements"in i&&i.boundElements&&Object.assign(i,{boundElements:i.boundElements.reduce((r,s)=>{const o=t.get(s.id);return o&&r.push({...s,id:o}),r},[])}),"containerId"in i&&i.containerId&&Object.assign(i,{containerId:t.get(i.containerId)??null}),"endBinding"in i&&i.endBinding){const r=t.get(i.endBinding.elementId);Object.assign(i,{endBinding:r?{...i.endBinding,elementId:r}:null})}if("startBinding"in i&&i.startBinding){const r=t.get(i.startBinding.elementId);Object.assign(i,{startBinding:r?{...i.startBinding,elementId:r}:null})}pe(i)&&Object.assign(i,Eg(i,n,{points:[i.points[0],i.points[i.points.length-1]]}))}},Sz=(e,t)=>{const n=ve(e);for(const i of t)Gf.unbindAffected(n,i,(r,s)=>_i(r,n,s)),Xf.unbindAffected(n,i,(r,s)=>_i(r,n,s))},v1=(e,t,n=[])=>{if(!e)return null;const i=e.filter(r=>!t.has(r.id));return i.push(...n.map(r=>({id:r.id,type:r.type}))),i},B2=(e,{x:t,y:n},i,r,s)=>{const o=S(t,n),a=vg(e,e.width,e.height,r),l=(s||!L2(e))&&!we(e),c=[t-a,n-a,t+a,n+a],u=si(e,i);if(!Vd(c,u))return!1;const d=$o(e,i,Me(oi(e,i),o)),f=xp(e,i,o);return l?d.length===0||f<=a:d.length>0&&f<=a},vg=(e,t,n,i)=>{const r=i!=null&&i.value&&i.value<1?i.value:1,o=(e.type==="diamond"?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*o,32),ile/r+kt)},vle=(e,t,n,i)=>{const r=oi(e,t);if(Os(n,i))return 0;const s=q(n,r,-e.angle),o=q(i,r,-e.angle),a=Math.sign(yt(he(o,n),he(o,r)))*-1,l=Me(o,Ei(In(ts(he(o,s)),Math.max(e.width*2,e.height*2)),o)),c=e.type==="diamond"?[Me(S(e.x+e.width/2,e.y),S(e.x+e.width/2,e.y+e.height)),Me(S(e.x,e.y+e.height/2),S(e.x+e.width,e.y+e.height/2))]:[Me(S(e.x,e.y),S(e.x+e.width,e.y+e.height)),Me(S(e.x+e.width,e.y),S(e.x,e.y+e.height))],u=e.type==="diamond"?[Me(S(e.x+e.width/2,e.y-e.height),S(e.x+e.width/2,e.y+e.height*2)),Me(S(e.x-e.width,e.y+e.height/2),S(e.x+e.width*2,e.y+e.height/2))]:[Me(S(e.x-e.width,e.y-e.height),S(e.x+e.width*2,e.y+e.height*2)),Me(S(e.x+e.width*2,e.y-e.height),S(e.x-e.width,e.y+e.height*2))];return[u0(l,u[0]),u0(l,u[1])].filter(h=>h!==null).sort((h,m)=>Ra(h,i)-Ra(m,i)).map((h,m)=>a*ct(r,h)/(e.type==="diamond"?ct(c[m][0],c[m][1])/2:Math.sqrt(e.width**2+e.height**2)/2)).sort((h,m)=>Math.abs(h)-Math.abs(m))[0]??0},wle=(e,t,n,i)=>{const r=oi(e,t);if(n===0)return r;const s=(e.type==="diamond"?[S(e.x,e.y+e.height/2),S(e.x+e.width/2,e.y),S(e.x+e.width,e.y+e.height/2),S(e.x+e.width/2,e.y+e.height)]:[S(e.x,e.y),S(e.x+e.width,e.y),S(e.x+e.width,e.y+e.height),S(e.x,e.y+e.height)]).map(l=>Ei(In(he(l,r),Math.abs(n)),r)).map(l=>q(l,r,e.angle)),o=[yt(he(i,s[0]),he(s[1],s[0]))>0&&(n>0?yt(he(i,s[1]),he(s[2],s[1]))<0:yt(he(i,s[3]),he(s[0],s[3]))<0),yt(he(i,s[1]),he(s[2],s[1]))>0&&(n>0?yt(he(i,s[2]),he(s[3],s[2]))<0:yt(he(i,s[0]),he(s[1],s[0]))<0),yt(he(i,s[2]),he(s[3],s[2]))>0&&(n>0?yt(he(i,s[3]),he(s[0],s[3]))<0:yt(he(i,s[1]),he(s[2],s[1]))<0),yt(he(i,s[3]),he(s[0],s[3]))>0&&(n>0?yt(he(i,s[0]),he(s[1],s[0]))<0:yt(he(i,s[2]),he(s[3],s[2]))<0)];return o[0]?n>0?s[1]:s[0]:o[1]?n>0?s[2]:s[1]:o[2]?n>0?s[3]:s[2]:n>0?s[0]:s[3]},_le=new Set(["boundElements","frameId","containerId","startBinding","endBinding"]),U6=(e,t,n)=>{var i;os(t)&&(((i=t.boundElements)==null?void 0:i.slice())??[]).forEach(({id:s})=>{n(e.get(s),"boundElements",s)})},b6=(e,t,n)=>{const i=[];if(t.frameId){const r=t.frameId;i.push(n(e.get(r),"frameId",r))}if(Lt(t)){const r=t.containerId;i.push(n(e.get(r),"containerId",r))}if(Ce(t)){if(t.startBinding){const r=t.startBinding.elementId;i.push(n(e.get(r),"startBinding",r))}if(t.endBinding){const r=t.endBinding.elementId;i.push(n(e.get(r),"endBinding",r))}}return i};class Gf{static unbindAffected(t,n,i){n&&b6(t,n,r=>{!r||r.isDeleted||U6(t,r,(s,o,a)=>{a===n.id&&i(r,{boundElements:v1(r.boundElements,new Set([a]))})})})}}F(Gf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||b6(t,n,(r,s)=>{var o,a;if(!r||r.isDeleted){i(n,{[s]:null});return}s!=="frameId"&&((o=r.boundElements)!=null&&o.find(l=>l.id===n.id)||(Ce(n)&&i(r,{boundElements:v1(r.boundElements,new Set,new Array(n))}),ge(n)&&((a=r.boundElements)!=null&&a.find(l=>l.type==="text")?i(n,{[s]:null}):i(r,{boundElements:v1(r.boundElements,new Set,new Array(n))}))))})});class Xf{static unbindAffected(t,n,i){n&&U6(t,n,r=>{!r||r.isDeleted||b6(t,r,(s,o,a)=>{a===n.id&&i(r,{[o]:null})})})}}F(Xf,"rebindAffected",(t,n,i)=>{!n||n.isDeleted||U6(t,n,(r,s,o)=>{var a,l;if(!r||r.isDeleted){i(n,{boundElements:v1(n.boundElements,new Set([o]))});return}ge(r)&&(((l=(((a=n.boundElements)==null?void 0:a.slice())??[]).reverse().find(u=>u.type==="text"))==null?void 0:l.id)===r.id?r.containerId!==n.id&&i(r,{containerId:n.id}):(r.containerId!==null&&i(r,{containerId:null}),i(n,{boundElements:v1(n.boundElements,new Set([r.id]))})))})});const f0=(e,t,n)=>{const[i,r]=ly(e);return q(S(t.x+t.width*i,t.y+t.height*r),oi(t,n),t.angle)},Tle=(e,t)=>{const n=e.startBinding&&t.get(e.startBinding.elementId),i=e.endBinding&&t.get(e.endBinding.elementId),r=n&&e.startBinding?f0(e.startBinding.fixedPoint,n,t):S(e.x+e.points[0][0],e.y+e.points[0][1]),s=i&&e.endBinding?f0(e.endBinding.fixedPoint,i,t):S(e.x+e.points[e.points.length-1][0],e.y+e.points[e.points.length-1][1]);return[r,s]},Ile=(e,t)=>{const[n,i]=Tle(e,t);return[Ue.pointFromAbsoluteCoords(e,n,t),Ue.pointFromAbsoluteCoords(e,i,t)]},ly=e=>e&&(Math.abs(e[0]-.5)<1e-4||Math.abs(e[1]-.5)<1e-4)?e.map(t=>Math.abs(t-.5)<1e-4?.5001:t):e,$8=({points:e})=>{const t=e[0][0],n=e[0][1];return{points:e.map(i=>S(i[0]-t,i[1]-n)),offsetX:t,offsetY:n}},Se=class Se{constructor(t,n,i=!1){F(this,"elementId");F(this,"selectedPointsIndices");F(this,"pointerDownState");F(this,"isDragging");F(this,"lastUncommittedPoint");F(this,"pointerOffset");F(this,"startBindingElement");F(this,"endBindingElement");F(this,"hoverPointIndex");F(this,"segmentMidPointHoveredCoords");F(this,"elbowed");F(this,"customLineAngle");F(this,"isEditing");this.elementId=t.id,Os(t.points[0],S(0,0))||(console.error("Linear element is not normalized",Error().stack),_i(t,n,Se.getNormalizeElementPointsAndCoords(t))),this.selectedPointsIndices=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep",this.pointerDownState={prevSelectedPointsIndices:null,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:null,segmentMidpoint:{value:null,index:null,added:!1}},this.hoverPointIndex=-1,this.segmentMidPointHoveredCoords=null,this.elbowed=pe(t)&&t.elbowed,this.customLineAngle=null,this.isEditing=i}static getElement(t,n){const i=n.get(t);return i||null}static handleBoxSelection(t,n,i,r){var p;if(!((p=n.selectedLinearElement)!=null&&p.isEditing)||!n.selectionElement)return!1;const{selectedLinearElement:s}=n,{selectedPointsIndices:o,elementId:a}=s,l=Se.getElement(a,r);if(!l)return!1;const[c,u,d,f]=He(n.selectionElement,r),m=Se.getPointsGlobalCoordinates(l,r).reduce((U,b,y)=>((b[0]>=c&&b[0]<=d&&b[1]>=u&&b[1]<=f||t.shiftKey&&(o!=null&&o.includes(y)))&&U.push(y),U),[]).filter(U=>!(pe(l)&&U!==0&&U!==l.points.length-1));i({selectedLinearElement:{...s,selectedPointsIndices:m.length?m:null}})}static handlePointDragging(t,n,i,r,s){var h,m;if(!s)return null;const{elementId:o}=s,a=n.scene.getNonDeletedElementsMap(),l=Se.getElement(o,a);let c=s.customLineAngle;if(!l||pe(l)&&!s.pointerDownState.lastClickedIsEndPoint&&s.pointerDownState.lastClickedPoint!==0)return null;const u=pe(l)?[(h=s.selectedPointsIndices)!=null&&h.includes(0)?0:void 0,(m=s.selectedPointsIndices)!=null&&m.find(p=>p>0)?l.points.length-1:void 0].filter(p=>p!==void 0):s.selectedPointsIndices,d=pe(l)?s.pointerDownState.lastClickedPoint>0?l.points.length-1:0:s.pointerDownState.lastClickedPoint,f=l.points[d];if(u&&f){if(U1(t)&&u.length===1&&l.points.length>1){const y=u[0],w=l.points[y===0?1:y-1];c=s.customLineAngle??Math.atan2(l.points[y][1]-w[1],l.points[y][0]-w[0]);const[v,I]=Se._getShiftLockedDelta(l,a,w,S(i,r),t[V.CTRL_OR_CMD]?null:n.getEffectiveGridSize(),c);Se.movePoints(l,n.scene,new Map([[y,{point:S(v+w[0],I+w[1]),isDragging:y===d}]]))}else{const y=Se.createPointAt(l,a,i-s.pointerOffset.x,r-s.pointerOffset.y,t[V.CTRL_OR_CMD]?null:n.getEffectiveGridSize()),w=y[0]-f[0],v=y[1]-f[1];Se.movePoints(l,n.scene,new Map(u.map(I=>{const x=I===d?Se.createPointAt(l,a,i-s.pointerOffset.x,r-s.pointerOffset.y,t[V.CTRL_OR_CMD]?null:n.getEffectiveGridSize()):S(l.points[I][0]+w,l.points[I][1]+v);return[I,{point:x,isDragging:I===d}]})))}Le(l,a)&&Ip(l,n.scene,!1);let U=[];if(Ha(l,!1)){const y=u[0]===0,w=u[u.length-1]===l.points.length-1,v=[];!y!=!w?v.push({x:i,y:r}):(y&&v.push(Wa(Se.getPointGlobalCoordinates(l,l.points[0],a))),w&&v.push(Wa(Se.getPointGlobalCoordinates(l,l.points[u[u.length-1]],a)))),v.length&&(U=N4(l,v,n.scene,n.state.zoom))}const b={...s,selectedPointsIndices:u,segmentMidPointHoveredCoords:d!==0&&d!==l.points.length-1?this.getPointGlobalCoordinates(l,f,a):null,hoverPointIndex:d===0||d===l.points.length-1?d:-1,isDragging:!0,customLineAngle:c};return{...n.state,selectedLinearElement:b,suggestedBindings:U}}return null}static handlePointerUp(t,n,i,r){var m;const s=r.getNonDeletedElementsMap(),o=r.getNonDeletedElements(),a=Nt(t,i),{elementId:l,selectedPointsIndices:c,isDragging:u,pointerDownState:d}=n,f=Se.getElement(l,s);if(!f)return n;const h={};if(u&&c){for(const p of c)if(p===0||p===f.points.length-1){qo(f.points,i.zoom.value)&&(nn(f)&&r.mutateElement(f,{...I_(f,!0)},{informMutation:!1,isDragging:!1}),Se.movePoints(f,r,new Map([[p,{point:p===0?f.points[f.points.length-1]:f.points[0]}]])));const U=Ju(i)?qa(((c==null?void 0:c.length)??0)>1?Wa(Se.getPointAtIndexGlobalCoordinates(f,p,s)):a,o,s,i.zoom,pe(f),pe(f)):null;h[p===0?"startBindingElement":"endBindingElement"]=U}}return{...n,...h,segmentMidPointHoveredCoords:null,hoverPointIndex:-1,selectedPointsIndices:u||t.shiftKey?!u&&t.shiftKey&&((m=d.prevSelectedPointsIndices)!=null&&m.includes(d.lastClickedPoint))?c&&c.filter(p=>p!==d.lastClickedPoint):c:c!=null&&c.includes(d.lastClickedPoint)?[d.lastClickedPoint]:c,isDragging:!1,pointerOffset:{x:0,y:0},customLineAngle:null}}static isSegmentTooShort(t,n,i,r,s){if(pe(t))return r>=0&&r<t.points.length?ct(n,i)*s.value<Se.POINT_HANDLE_SIZE/2:!1;let o=ct(n,i);if(t.points.length>2&&t.roundness){const[a,l]=c6(t);gn(a.length===0&&l.length>0,"Only linears built out of curves are supported"),gn(a.length+l.length>=r,"Invalid segment index while calculating mid point"),o=X9(l[r])}return o*s.value<Se.POINT_HANDLE_SIZE*4}static getSegmentMidPoint(t,n){if(pe(t)){gn(t.points.length>=n,"Invalid segment index while calculating elbow arrow mid point");const s=e6(t.points[n-1],t.points[n]);return S(t.x+s[0],t.y+s[1])}const[i,r]=c6(t);if(gn(i.length===0&&r.length>0||i.length>0&&r.length===0,"Only linears built out of either segments or curves are supported"),gn(i.length+r.length>=n,"Invalid segment index while calculating mid point"),i.length){const s=i[n-1];return e6(s[0],s[1])}if(r.length){const s=r[n-1];return _se(s,.5)}gn(!1,"Invalid segment type while calculating mid point")}static getSegmentMidPointIndex(t,n,i,r){const s=Se.getElement(t.elementId,r);if(!s)return-1;const o=Se.getEditorMidPoints(s,r,n);let a=0;for(;a<o.length;){if(Se.arePointsEqual(i,o[a]))return a+1;a++}return-1}static handlePointerDown(t,n,i,r,s,o){var T,A;const a=n.state,l=o.getNonDeletedElementsMap(),c=o.getNonDeletedElements(),u={didAddPoint:!1,hitElement:null,linearElementEditor:null};if(!s)return u;const{elementId:d}=s,f=Se.getElement(d,l);if(!f)return u;const h=Se.getSegmentMidpointHitCoords(s,r,a,l);let m=null;if(h)m=Se.getSegmentMidPointIndex(s,a,h,l);else if(t.altKey&&((T=a.selectedLinearElement)!=null&&T.isEditing))return s.lastUncommittedPoint==null&&(o.mutateElement(f,{points:[...f.points,Se.createPointAt(f,l,r.x,r.y,t[V.CTRL_OR_CMD]?null:n.getEffectiveGridSize())]}),u.didAddPoint=!0),i.scheduleCapture(),u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:-1,lastClickedIsEndPoint:!1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:[f.points.length-1],lastUncommittedPoint:null,endBindingElement:qa(r,c,l,n.state.zoom,s.elbowed)},u.didAddPoint=!0,u;const p=Se.getPointIndexUnderCursor(f,l,a.zoom,r.x,r.y);if(p>=0||h)u.hitElement=f;else{const{startBindingElement:C,endBindingElement:k}=s;Ju(a)&&Ha(f)&&h6(f,C,k,o)}const[U,b,y,w]=He(f,l),v=(U+y)/2,I=(b+w)/2,x=p>-1&&q(S(f.x+f.points[p][0],f.y+f.points[p][1]),S(v,I),f.angle),_=p>-1||t.shiftKey?t.shiftKey||(A=s.selectedPointsIndices)!=null&&A.includes(p)?Sle([...s.selectedPointsIndices||[],p]):[p]:null;return u.linearElementEditor={...s,pointerDownState:{prevSelectedPointsIndices:s.selectedPointsIndices,lastClickedPoint:p,lastClickedIsEndPoint:p===f.points.length-1,origin:{x:r.x,y:r.y},segmentMidpoint:{value:h,index:m,added:!1}},selectedPointsIndices:_,pointerOffset:x?{x:r.x-x[0],y:r.y-x[1]}:{x:0,y:0}},u}static arePointsEqual(t,n){return!t&&!n?!0:!t||!n?!1:Os(t,n)}static handlePointerMove(t,n,i,r){var h,m;const s=r.state;if(!((h=s.selectedLinearElement)!=null&&h.isEditing))return null;const{elementId:o,lastUncommittedPoint:a}=s.selectedLinearElement,l=r.scene.getNonDeletedElementsMap(),c=Se.getElement(o,l);if(!c)return s.selectedLinearElement;const{points:u}=c,d=u[u.length-1];if(!t.altKey)return d===a&&Se.deletePoints(c,r,[u.length-1]),(m=s.selectedLinearElement)!=null&&m.lastUncommittedPoint?{...s.selectedLinearElement,lastUncommittedPoint:null}:s.selectedLinearElement;let f;if(U1(t)&&u.length>=2){const p=u[u.length-2],[U,b]=Se._getShiftLockedDelta(c,l,p,S(n,i),t[V.CTRL_OR_CMD]?null:r.getEffectiveGridSize());f=S(U+p[0],b+p[1])}else f=Se.createPointAt(c,l,n-s.selectedLinearElement.pointerOffset.x,i-s.selectedLinearElement.pointerOffset.y,t[V.CTRL_OR_CMD]||pe(c)?null:r.getEffectiveGridSize());return d===a?Se.movePoints(c,r.scene,new Map([[c.points.length-1,{point:f}]])):Se.addPoints(c,r.scene,[f]),{...s.selectedLinearElement,lastUncommittedPoint:c.points[c.points.length-1]}}static getPointGlobalCoordinates(t,n,i){const[r,s,o,a]=He(t,i),l=(r+o)/2,c=(s+a)/2,{x:u,y:d}=t;return q(S(u+n[0],d+n[1]),S(l,c),t.angle)}static getPointsGlobalCoordinates(t,n){const[i,r,s,o]=He(t,n),a=(i+s)/2,l=(r+o)/2;return t.points.map(c=>{const{x:u,y:d}=t;return q(S(u+c[0],d+c[1]),S(a,l),t.angle)})}static getPointAtIndexGlobalCoordinates(t,n,i){const r=n<0?t.points.length+n:n,[s,o,a,l]=He(t,i),c=(s+a)/2,u=(o+l)/2,d=t.points[r],{x:f,y:h}=t;return q(d?S(f+d[0],h+d[1]):S(f,h),S(c,u),t.angle)}static pointFromAbsoluteCoords(t,n,i){if(pe(t))return S(n[0]-t.x,n[1]-t.y);const[r,s,o,a]=He(t,i),l=(r+o)/2,c=(s+a)/2,[u,d]=q(S(n[0],n[1]),S(l,c),-t.angle);return S(u-t.x,d-t.y)}static getPointIndexUnderCursor(t,n,i,r,s){const o=Se.getPointsGlobalCoordinates(t,n);let a=o.length;for(;--a>-1;){const l=o[a];if(ct(S(r,s),S(l[0],l[1]))*i.value<Se.POINT_HANDLE_SIZE+1)return a}return-1}static createPointAt(t,n,i,r,s){const o=Pn(i,r,s),[a,l,c,u]=He(t,n),d=(a+c)/2,f=(l+u)/2,[h,m]=q(S(o[0],o[1]),S(d,f),-t.angle);return S(h-t.x,m-t.y)}static getNormalizeElementPointsAndCoords(t){const{points:n,offsetX:i,offsetY:r}=$8(t);return{points:n,x:t.x+i,y:t.y+r}}static duplicateSelectedPoints(t,n){var f;gn((f=t.selectedLinearElement)==null?void 0:f.isEditing,"Not currently editing a linear element");const i=n.getNonDeletedElementsMap(),{selectedPointsIndices:r,elementId:s}=t.selectedLinearElement,o=Se.getElement(s,i);gn(o,"The linear element does not exist in the provided Scene"),gn(r!=null,"There are no selected points to duplicate");const{points:a}=o,l=[];let c=!1,u=-1;const d=a.reduce((h,m,p)=>{if(++u,h.push(m),r.includes(p)){const b=a[p+1];b||(c=!0),h.push(b?S((m[0]+b[0])/2,(m[1]+b[1])/2):S(m[0],m[1])),l.push(u+1),++u}return h},[]);if(n.mutateElement(o,{points:d}),c){const h=o.points[o.points.length-1];Se.movePoints(o,n,new Map([[o.points.length-1,{point:S(h[0]+30,h[1]+30)}]]))}return{...t,selectedLinearElement:{...t.selectedLinearElement,selectedPointsIndices:l}}}static deletePoints(t,n,i){var u,d;const r=((u=n.state.selectedLinearElement)==null?void 0:u.isEditing)&&((d=n.state.selectedLinearElement)==null?void 0:d.lastUncommittedPoint)===t.points[t.points.length-1],s=t.points.filter((f,h)=>!i.includes(h));nn(t)&&t.polygon&&(r||i.includes(0)||i.includes(t.points.length-1))&&(s[0]=S(s[s.length-1][0],s[s.length-1][1]));const{points:a,offsetX:l,offsetY:c}=$8({points:s});Se._updatePoints(t,n.scene,a,l,c)}static addPoints(t,n,i){const r=[...t.points,...i];nn(t)&&t.polygon&&(r[0]=S(r[r.length-1][0],r[r.length-1][1]));const{points:s,offsetX:o,offsetY:a}=$8({points:r});Se._updatePoints(t,n,s,o,a)}static movePoints(t,n,i,r){var u,d,f;const{points:s}=t;if(nn(t)&&t.polygon){const h=i.get(0),m=i.get(s.length-1);h?i.set(s.length-1,{point:S(h.point[0],h.point[1]),isDragging:h.isDragging}):m&&i.set(0,{point:S(m.point[0],m.point[1]),isDragging:m.isDragging})}const o=((u=i.get(0))==null?void 0:u.point)??S(0,0),[a,l]=o,c=pe(t)?[((d=i.get(0))==null?void 0:d.point)??s[0],((f=i.get(s.length-1))==null?void 0:f.point)??s[s.length-1]]:s.map((h,m)=>{var U;const p=((U=i.get(m))==null?void 0:U.point)??h;return S(p[0]-a,p[1]-l)});Se._updatePoints(t,n,c,a,l,r,{isDragging:Array.from(i.values()).some(h=>h.isDragging)})}static shouldAddMidpoint(t,n,i,r){var c;const s=Se.getElement(t.elementId,r);if(s&&pe(s)||!s)return!1;const{segmentMidpoint:o}=t.pointerDownState;if(o.added||o.value===null||o.index===null||t.pointerDownState.origin===null)return!1;const a=t.pointerDownState.origin,l=ct(S(a.x,a.y),S(n.x,n.y));return!(!((c=i.selectedLinearElement)!=null&&c.isEditing)&&l<lB/i.zoom.value)}static addMidpoint(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=Se.getElement(t.elementId,o);if(!a)return;const{segmentMidpoint:l}=t.pointerDownState,c={pointerDownState:t.pointerDownState,selectedPointsIndices:t.selectedPointsIndices},u=Se.createPointAt(a,o,n.x,n.y,r&&!pe(a)?i.getEffectiveGridSize():null),d=[...a.points.slice(0,l.index),u,...a.points.slice(l.index)];return s.mutateElement(a,{points:d}),c.pointerDownState={...t.pointerDownState,segmentMidpoint:{...t.pointerDownState.segmentMidpoint,added:!0},lastClickedPoint:l.index},c.selectedPointsIndices=[l.index],c}static _updatePoints(t,n,i,r,s,o,a){if(pe(t)){const l={};(o==null?void 0:o.startBinding)!==void 0&&(l.startBinding=o.startBinding!==null&&Bh(o.startBinding)?o.startBinding:null),(o==null?void 0:o.endBinding)!==void 0&&(l.endBinding=o.endBinding!==null&&Bh(o.endBinding)?o.endBinding:null),l.points=Array.from(i),n.mutateElement(t,l,{informMutation:!0,isDragging:(a==null?void 0:a.isDragging)??!1})}else{const l=dM(t,i),c=dM(t,t.points),u=(l[0]+l[2])/2,d=(l[1]+l[3])/2,f=(c[0]+c[2])/2,h=(c[1]+c[3])/2,m=f-u,p=h-d,U=q(S(r,s),S(m,p),t.angle);n.mutateElement(t,{...o,points:i,x:t.x+U[0],y:t.y+U[1]})}}static _getShiftLockedDelta(t,n,i,r,s,o){const a=Se.getPointGlobalCoordinates(t,i,n);if(pe(t))return[r[0]-a[0],r[1]-a[1]];const[l,c]=Pn(r[0],r[1],s),{width:u,height:d}=z4(a[0],a[1],l,c,o);return q(S(u,d),S(0,0),-t.angle)}static moveFixedSegment(t,n,i,r,s){const o=s.getNonDeletedElementsMap(),a=Se.getElement(t.elementId,o);if(!a||!pe(a))return t;if(n&&n>0&&n<a.points.length){const l=Oo(Vh(he(a.points[n],a.points[n-1]))),c=(a.fixedSegments??[]).reduce((h,m)=>(h[m.index]=m,h),{});c[n]={index:n,start:S(l?a.points[n-1][0]:i-a.x,l?r-a.y:a.points[n-1][1]),end:S(l?a.points[n][0]:i-a.x,l?r-a.y:a.points[n][1])};const u=Object.values(c).sort((h,m)=>h.index-m.index),d=u.map(h=>h.index).reduce((h,m)=>m<n?h+1:h,0);s.mutateElement(a,{fixedSegments:u});const f=S(a.x+(a.fixedSegments[d].start[0]+a.fixedSegments[d].end[0])/2,a.y+(a.fixedSegments[d].start[1]+a.fixedSegments[d].end[1])/2);return{...t,segmentMidPointHoveredCoords:f,pointerDownState:{...t.pointerDownState,segmentMidpoint:{added:!1,index:a.fixedSegments[d].index,value:f}}}}return t}static deleteFixedSegment(t,n,i){var r;n.mutateElement(t,{fixedSegments:(r=t.fixedSegments)==null?void 0:r.filter(s=>s.index!==i)})}};F(Se,"POINT_HANDLE_SIZE",10),F(Se,"getEditorMidPoints",(t,n,i)=>{var l;const r=Le(t,n);if(!pe(t)&&!((l=i.selectedLinearElement)!=null&&l.isEditing)&&t.points.length>2&&!r)return[];const s=Se.getPointsGlobalCoordinates(t,n);let o=0;const a=[];for(;o<s.length-1;){if(Se.isSegmentTooShort(t,t.points[o],t.points[o+1],o,i.zoom)){a.push(null),o++;continue}const c=Se.getSegmentMidPoint(t,o+1);a.push(c),o++}return a}),F(Se,"getSegmentMidpointHitCoords",(t,n,i,r)=>{var h;const{elementId:s}=t,o=Se.getElement(s,r);if(!o)return null;const a=Se.getPointIndexUnderCursor(o,r,i.zoom,n.x,n.y);if(!pe(o)&&a>=0||Se.getPointsGlobalCoordinates(o,r).length>=3&&!((h=i.selectedLinearElement)!=null&&h.isEditing)&&!pe(o))return null;const c=(Se.POINT_HANDLE_SIZE+1)/i.zoom.value,u=t.segmentMidPointHoveredCoords;if(u&&ct(S(u[0],u[1]),S(n.x,n.y))<=c)return u;let d=0;const f=Se.getEditorMidPoints(o,r,i);for(;d<f.length;){if(f[d]!==null&&ct(f[d],S(n.x,n.y))<=c)return f[d];d++}return null}),F(Se,"getBoundTextElementPosition",(t,n,i)=>{Se.getPointsGlobalCoordinates(t,i).length<2&&_i(n,i,{isDeleted:!0});let s=0,o=0;if(t.points.length%2===1){const a=Math.floor(t.points.length/2),l=Se.getPointGlobalCoordinates(t,t.points[a],i);s=l[0]-n.width/2,o=l[1]-n.height/2}else{const a=t.points.length/2-1,l=Se.getSegmentMidPoint(t,a+1);s=l[0]-n.width/2,o=l[1]-n.height/2}return{x:s,y:o}}),F(Se,"getMinMaxXYWithBoundText",(t,n,i,r)=>{let[s,o,a,l]=i;const c=(s+a)/2,u=(o+l)/2,{x:d,y:f}=Se.getBoundTextElementPosition(t,r,n),h=d+r.width,m=f+r.height,p=S(c,u),U=q(S(s,o),p,t.angle),b=q(S(a,o),p,t.angle),y=q(S(d,f),p,-t.angle),w=q(S(h,f),p,-t.angle),v=q(S(d,m),p,-t.angle),I=q(S(h,m),p,-t.angle);return U[0]<b[0]&&U[1]>=b[1]?(s=Math.min(s,v[0]),a=Math.max(a,Math.max(w[0],I[0])),o=Math.min(o,y[1]),l=Math.max(l,I[1])):U[0]>=b[0]&&U[1]>b[1]?(s=Math.min(s,I[0]),a=Math.max(a,Math.max(y[0],w[0])),o=Math.min(o,v[1]),l=Math.max(l,w[1])):U[0]>=b[0]?(s=Math.min(s,w[0]),a=Math.max(a,v[0]),o=Math.min(o,I[1]),l=Math.max(l,y[1])):U[1]<=b[1]&&(s=Math.min(s,Math.min(w[0],y[0])),a=Math.max(a,I[0]),o=Math.min(o,w[1]),l=Math.max(l,v[1])),[s,o,a,l,c,u]}),F(Se,"getElementAbsoluteCoords",(t,n,i=!1)=>{let r,s,o,a,l;if(t.points.length<2||!qt.get(t)){const{minX:f,minY:h,maxX:m,maxY:p}=t.points.reduce((U,[b,y])=>(U.minY=Math.min(U.minY,y),U.minX=Math.min(U.minX,b),U.maxX=Math.max(U.maxX,b),U.maxY=Math.max(U.maxY,y),U),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});s=f+t.x,o=h+t.y,a=m+t.x,l=p+t.y}else{const f=qt.generateElementShape(t,null),h=zd(f[0]),[m,p,U,b]=gy(h);s=m+t.x,o=p+t.y,a=U+t.x,l=b+t.y}const c=(s+a)/2,u=(o+l)/2;if(r=[s,o,a,l,c,u],!i)return r;const d=Le(t,n);return d&&(r=Se.getMinMaxXYWithBoundText(t,n,[s,o,a,l],d)),r});let Ue=Se;const Sle=e=>{let t=[...new Set(e.filter(n=>n!==null&&n!==-1))];return t=t.sort((n,i)=>n-i),t.length?t:null};function qA(e){return[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1]),Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]}function xle(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}const Cle=1e-6;function QA(e,t){const n=he(e[1],e[0]),i=he(t,e[0]),r=yt(n,i);return Math.abs(r)<Cle}function G8(e,t){const n=he(e[1],e[0]),i=he(t,e[0]);return yt(n,i)<0}function JA(e,t){return QA(e,t[0])||QA(e,t[1])||(G8(e,t[0])?!G8(e,t[1]):G8(e,t[1]))}function Ale(e,t){return xle(qA(e),qA(t))&&JA(e,t)&&JA(t,e)}const Mle=e=>e.type==="diamond"?[S(e.width/2,0),S(e.width,e.height/2),S(e.width/2,e.height),S(0,e.height/2)]:[S(0,0),S(0+e.width,0),S(0+e.width,e.height),S(0,e.height)],Rle=e=>xe(e)||qi(e)?e.points:Mle(e),eM=e=>{const t=e.reduce((n,[i,r])=>(n.minY=Math.min(n.minY,r),n.minX=Math.min(n.minX,i),n.maxX=Math.max(n.maxX,i),n.maxY=Math.max(n.maxY,r),n),{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,cx:0,cy:0});return t.cx=(t.maxX+t.minX)/2,t.cy=(t.maxY+t.minY)/2,t},kle=e=>{const t=Rle(e),{cx:n,cy:i}=eM(t),r=S(n,i),s=t.map(u=>q(u,r,e.angle)),{minX:o,minY:a,maxX:l,maxY:c}=eM(s);return[o+e.x,a+e.y,l+e.x,c+e.y]},Lle=(e,t)=>{const n=kle(e);return(OU(n[0],Vi(t[0],t[2]))||OU(t[0],Vi(n[0],n[2])))&&(OU(n[1],Vi(t[1],t[3]))||OU(t[1],Vi(n[1],n[3])))},Dle=({elements:e,bounds:t,type:n,errorMargin:i=0})=>{var o;iz(t)&&(t=si(t,ve(e)));const r=[t[0]-i,t[1]-i,t[2]+i,t[3]+i],s=new Set;for(const a of e){if(s.has(a.id))continue;if(Lle(a,r)){if(s.add(a.id),a.boundElements)for(const c of a.boundElements)s.add(c.id);ge(a)&&a.containerId&&s.add(a.containerId),Ce(a)&&(a.startBinding&&s.add(a.startBinding.elementId),a.endBinding&&s.add((o=a.endBinding)==null?void 0:o.elementId))}}return e.filter(a=>s.has(a.id))},xz=(e,t,n)=>{const i=n.reduce((r,s)=>(s.groupIds.includes(e)&&(r[s.id]=!0),r),{});return Object.keys(i).length<2?t.selectedGroupIds[e]||t.editingGroupId===e?{selectedElementIds:t.selectedElementIds,selectedGroupIds:{...t.selectedGroupIds,[e]:!1},editingGroupId:null}:t:{editingGroupId:t.editingGroupId,selectedGroupIds:{...t.selectedGroupIds,[e]:!0},selectedElementIds:{...t.selectedElementIds,...i}}},Si=function(){let e=null,t=null,n=null;const i=(s,o,a,l)=>{if(n!==void 0&&o===t&&s===e&&a.editingGroupId===(n==null?void 0:n.editingGroupId))return n;const c={};for(const f of s){let h=f.groupIds;if(a.editingGroupId){const m=h.indexOf(a.editingGroupId);m>-1&&(h=h.slice(0,m))}if(h.length>0){const m=h[h.length-1];c[m]=!0}}const u={},d=o.reduce((f,h)=>{if(h.isDeleted)return f;const m=h.groupIds.find(p=>c[p]);return m&&(f[h.id]=!0,Array.isArray(u[m])?u[m].push(h.id):u[m]=[h.id]),f},{});for(const f of Object.keys(u))u[f].length<2&&c[f]&&(c[f]=!1);return t=o,e=s,n={editingGroupId:a.editingGroupId,selectedGroupIds:c,selectedElementIds:xt({...a.selectedElementIds,...d},l)},n},r=(s,o,a,l)=>{const c=l?l.scene.getSelectedElements({selectedElementIds:s.selectedElementIds,elements:o}):Ge(o,s);return c.length?i(c,o,s,a):{selectedGroupIds:{},editingGroupId:null,selectedElementIds:xt(s.selectedElementIds,a)}};return r.clearCache=()=>{t=null,e=null,n=null},r}(),m_=(e,t)=>Cz(e,t)!=null,Cz=(e,t)=>t.groupIds.filter(n=>n!==e.editingGroupId).find(n=>e.selectedGroupIds[n]),vc=e=>Object.entries(e.selectedGroupIds).filter(([t,n])=>n).map(([t,n])=>t),Cp=(e,t)=>{let n={...t,selectedGroupIds:{}};for(const i of e){let r=i.groupIds;if(t.editingGroupId){const s=r.indexOf(t.editingGroupId);s>-1&&(r=r.slice(0,s))}if(r.length>0){const s=r[r.length-1];n={...n,...xz(s,n,e)}}}return n.selectedGroupIds},Nle=(e,t)=>({...e,editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:{[t.id]:!0}}),h0=(e,t)=>e.groupIds.includes(t),At=(e,t)=>{const n=[];for(const i of e.values())h0(i,t)&&n.push(i);return n},Az=(e,t)=>e.groupIds.find(n=>t[n]),Ole=(e,t,n)=>{const i=[...e],r=n?i.indexOf(n):-1,s=r>-1?r:i.length;return i.splice(s,0,t),i},Ple=(e,t)=>e.filter(n=>!t[n]),Mz=(e,t)=>{const n=new Map;return e.forEach(i=>{const r=i.groupIds.length===0?i.id:i.groupIds[i.groupIds.length-1],s=n.get(r)||[],o=Le(i,t);o&&s.push(o),n.set(r,[...s,i])}),Array.from(n.values())},Fle=e=>{const t=new Set;for(const[,n]of e)if(!n.isDeleted)for(const i of n.groupIds??[])t.add(i);return t},p_=e=>{const t=e.flatMap(r=>r.groupIds),n=new Map;let i=0;for(const r of t)n.set(r,(n.get(r)??0)+1),n.get(r)>i&&(i=n.get(r));return i===e.length},$h=e=>e.groupIds.length>0,Ble=(e,t,n)=>{const i=[...e],r=t?e.indexOf(t):-1,s=r>-1?r:e.length;for(let o=0;o<s;o++)i[o]=n(i[o]);return i},cy=(e,t,n)=>{const i=vc(n),r=e.filter(d=>!Lt(d)),s=new Map,o=new Map,a=d=>{const f=o.get(d.id)||[],h=Le(d,t);h&&f.push(h),o.set(d.id,[...f,d])},l=(d,f)=>{const h=s.get(f)||[],m=Le(d,t);m&&h.push(m),s.set(f,[...h,d])},c=(d,f)=>{const h=d.groupIds.indexOf(f,0);return d.groupIds.slice(0,h).length>0?l(d,d.groupIds[h-1]):a(d)},u=e.every(d=>m_(n,d));return r.forEach(d=>{const f=Az(d,n.selectedGroupIds);f?i.length===1&&u?c(d,f):l(d,f):a(d)}),Array.from(s.values()).concat(Array.from(o.values()))},U_=e=>{const t=new Set;return e.forEach(n=>{we(n)&&t.add(n.id)}),e.filter(n=>!(n.frameId&&t.has(n.frameId)))},b_=(e,t,n,i=!0)=>{const[r,s,o,a]=He(t,n);let l=e.filter(c=>{let[u,d,f,h]=si(c,n);const m=Ar(c,n);if(m){const[p,U,b,y]=si(m,n);u=Math.max(p,u),d=Math.max(U,d),f=Math.min(b,f),h=Math.min(y,h)}return c.locked===!1&&c.type!=="selection"&&!Lt(c)&&r<=u&&s<=d&&o>=f&&a>=h});return l=i?U_(l):l,l=l.filter(c=>{const u=Ar(c,n);return u?zc(c,u,n):!0}),l},Rz=(e,t,n,i)=>{const r=new Set(t.map(s=>s.id));return e.filter(s=>{const o=x6(s,n.width,n.height,n,i);return!r.has(s.id)&&o})},Wn=function(){let e=null,t=null,n=null;const i=(r,s)=>(n!=null&&r===e&&s.selectedElementIds===t||(n=r.some(o=>s.selectedElementIds[o.id]),e=r,t=s.selectedElementIds),n);return i.clearCache=()=>{e=null,t=null,n=null},i}(),Ge=(e,t,n)=>{const i=new Set,r=[];for(const s of e.values()){if(t.selectedElementIds[s.id]){r.push(s),i.add(s.id);continue}if(n!=null&&n.includeBoundTextElement&&Lt(s)&&t.selectedElementIds[s==null?void 0:s.containerId]){r.push(s),i.add(s.id);continue}}if(n!=null&&n.includeElementsInFrames){const s=[];return r.forEach(o=>{we(o)&&is(e,o.id).forEach(a=>!i.has(a.id)&&s.push(a)),s.push(o)}),s}return r},uy=(e,t)=>t.editingTextElement?[t.editingTextElement]:t.newElement?[t.newElement]:Ge(e,t,{includeBoundTextElement:!0}),xt=(e,t)=>Ki(t.selectedElementIds,e)?t.selectedElementIds:e,zle=(e,t)=>{var i;const n=e.filter(xe);if(n.length===1){const r=n[0],s=((i=r.boundElements)==null?void 0:i.map(a=>a.id))??[];if(e.every(a=>a.id===r.id||s.includes(a.id)))return new Ue(r,ve(t))}return null},kz=(e,t,n)=>({selectedLinearElement:zle(e,t),...Si({editingGroupId:n.editingGroupId,selectedElementIds:U_(e).reduce((i,r)=>(Lt(r)||(i[r.id]=!0),i),{})},t,n,null)}),Hle=(e,t,n)=>{const i=ve(e);for(const r of t)if(r.frameId){const s=n.get(r.id),o=n.get(r.frameId),a=s&&i.get(s);a&&_i(a,i,{frameId:o??null})}};function y_(e,t,n){const i=I6(t,n),r=I6(e,n);return i.some(o=>r.some(a=>Ale(o,a)))}const Lz=(e,t,n)=>fy(b_(e,t,n,!1)).filter(i=>!we(i)&&!i.frameId||i.frameId===t.id),E_=(e,t,n)=>b_([t],e,n).some(i=>i.id===t.id),Ap=(e,t,n)=>{const[i,r,s,o]=He(t,n),[a,l,c,u]=nt(e);return i<=a&&r<=l&&s>=c&&o>=u},zc=(e,t,n)=>Ap([e],t,n)||y_(e,t,n)||E_(e,t,n),tM=(e,t,n)=>{const[i,r,s,o]=He(t,n);return c0(S(i,r),S(e.x,e.y),S(s,o))},Vle=e=>{const t=new Map;for(const n of e){const i=we(n)?n.id:n.frameId;i&&!t.has(i)&&t.set(i,is(e,i))}return t},is=(e,t)=>{const n=[];for(const i of e.values())i.frameId===t&&n.push(i);return n},v_=e=>e.filter(t=>we(t)),w_=e=>{const t=ve(v_(e));return e.filter(n=>t.has(n.id)||!n.frameId||!t.has(n.frameId))},Go=(e,t,n,i)=>{const r=is(e,t.id),s=new Set(r),o=new Set([...Lz(e,t,i),...r.filter(f=>E_(f,t,i))]),a=r.filter(f=>!o.has(f)),l=new Set(Array.from(o).flatMap(f=>f.groupIds));for(const f of a)if(!y_(f,t,i))f.groupIds.length===0&&s.delete(f);else if(f.groupIds.length>0)for(const h of f.groupIds)l.add(h);for(const f of a)if(f.groupIds.length>0){let h=!0;for(const m of f.groupIds)l.has(m)&&(h=!1);h&&s.delete(f)}const c=Array.from(o).filter(f=>f.groupIds.length===0);for(const f of c)s.add(f);const u=Array.from(o).filter(f=>f.groupIds.length>0),d=Cp(u,n);for(const[f,h]of Object.entries(d))if(h){const m=At(e,f);if(Ap(m,t,i))for(const p of m)s.add(p)}return[...s].filter(f=>!(ge(f)&&f.containerId))},$le=(e,t,n)=>Gle(fy(e,Lz(e,t,n)),t,n),Gle=(e,t,n)=>{const i=[],r=new Map;for(const s of e){let o=!1;if(s.groupIds.length>0){if(s.groupIds.some(a=>r.get(a)))o=!0;else{const a=new Set(s.groupIds.flatMap(l=>At(n,l)));o=!Ap(Array.from(a),t,n)}s.groupIds.forEach(a=>{r.set(a,o)})}o||i.push(s)}return i},Ar=(e,t)=>e.frameId&&t.get(e.frameId)||null,Xle=(e,t)=>{const n=new Set,i=ve(e);e=fy(e);for(const o of e)we(o)&&o.id!==t.id&&n.add(o.id);const r=new Set,s=[];for(const o of e)if(!(we(o)||o.frameId&&n.has(o.frameId)))if(o.groupIds.length){const a=o.groupIds.at(-1);if(!r.has(a)){r.add(a);const l=At(e,a);if(l.some(c=>zc(c,t,i)))for(const c of l)s.push(c)}}else zc(o,t,i)&&s.push(o);return s},w1=(e,t,n,i)=>{const r=ve(e),s=new Map;for(const c of e.values())c.frameId===n.id&&s.set(c.id,!0);const o=new Set(t.map(c=>c.id)),a=[],l=new Set;for(const c of t)we(c)&&c.id!==n.id&&l.add(c.id);for(const c of fy(e,t)){if(we(c)||c.frameId&&l.has(c.frameId)||c.frameId&&i.selectedElementIds[c.id]&&i.selectedElementIds[c.frameId])continue;s.has(c.id)||a.push(c);const u=Le(c,r);u&&!o.has(u.id)&&!s.has(u.id)&&a.push(u)}for(const c of a)_i(c,r,{frameId:n.id});return e},dy=(e,t)=>{const n=new Map,i=new Map;for(const r of e)if(r.frameId){n.set(r.id,r);const s=i.get(r.frameId)||[];s.push(r);const o=Le(r,t);o&&(n.set(o.id,o),s.push(o)),i.set(r.frameId,s)}for(const[,r]of n)_i(r,t,{frameId:null})},Dz=(e,t)=>{const n=is(e,t.id);return dy(n,ve(e)),e},wg=(e,t,n,i)=>w1(Dz(e,n),t,n,i.state).slice(),Gh=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,elements:e}),r=new Set(i);if(t.editingGroupId)for(const a of i)a.groupIds.length===0?r.add(a):a.groupIds.flatMap(l=>At(e,l)).forEach(l=>r.add(l));const s=new Set,o=ve(e);return r.forEach(a=>{a.frameId&&!we(a)&&!E6(a,o,t)&&s.add(a)}),s.size>0&&dy(s,o),e},fy=(e,t)=>{const n=new Set,i=t||e;for(const o of i.values()){const a=o.groupIds[o.groupIds.length-1];a&&n.add(a)}const r=new Set;for(const o of n)At(e,o).some(a=>we(a))&&r.add(o);const s=[];for(const o of i.values())r.has(o.groupIds[o.groupIds.length-1])||s.push(o);return s},y6=(e,t,n)=>{const i=ge(e)&&Yn(e,t)||e;return i.frameId&&n.selectedElementIds[i.id]&&n.selectedElementIds[i.frameId]?Ar(i,t):n.selectedElementIds[i.id]&&n.selectedElementsAreBeingDragged?n.frameToHighlight:Ar(i,t)},E6=(e,t,n,i)=>{var l;const r=(i==null?void 0:i.targetFrame)??y6(e,t,n);if(!r)return!1;const s=ge(e)&&Yn(e,t)||e,o=c=>{i!=null&&i.checkedGroups&&s.groupIds.forEach(u=>{var d;(d=i.checkedGroups)==null||d.set(u,c)})};if(!n.selectedElementIds[s.id]||!n.selectedElementsAreBeingDragged||n.selectedElementIds[s.id]&&n.selectedElementIds[r.id])return!0;if(s.groupIds.length===0)return zc(s,r,t);for(const c of s.groupIds)if((l=i==null?void 0:i.checkedGroups)!=null&&l.has(c))return i.checkedGroups.get(c);const a=new Set(s.groupIds.filter(c=>i!=null&&i.checkedGroups?!i.checkedGroups.has(c):!0).flatMap(c=>At(t,c)));if(n.editingGroupId&&n.selectedElementsAreBeingDragged){const c=new Set(Ge(t,n));if(n.frameToHighlight!==null)return!0;c.forEach(d=>{a.delete(d)})}for(const c of a)if(we(c))return o(!1),!1;for(const c of a)if(zc(c,r,t))return o(!0),!0;return!1},O4=(e,t,n,i,r)=>{if(!n.frameRendering||!n.frameRendering.clip)return!1;const s=y_(e,t,i)||E_(e,t,i);if(s){for(const o of e.groupIds)r==null||r.set(o,!0);return!0}if(!s&&e.groupIds.length>0&&!Ap([e],t,i)){let o=!1;if(n.selectedElementsAreBeingDragged)o=E6(e,i,n,{targetFrame:t,checkedGroups:r});else{o=e.frameId===t.id;for(const a of e.groupIds)r==null||r.set(a,o)}for(const a of e.groupIds)r==null||r.set(a,o);return o}return!1},jle="Frame",Yle="AI Frame",__=e=>nz(e)?jle:Yle,Nz=e=>e.name===null?__(e):e.name,T_=(e,t)=>Dle({elements:e,bounds:t,type:"overlap"}).filter(n=>!n.frameId||n.frameId===t.id),Oz=e=>{const t=ve(e);return e.length>1&&e.some(n=>n.frameId&&t.has(n.frameId))},Pz="invert(100%) hue-rotate(180deg) saturate(1.25)",Fz=(e,t)=>Ln(e)&&!t.imageCache.has(e.fileId),Bz=(e,t,n)=>{var i;return n.theme===ke.DARK&&Ln(e)&&!Fz(e,t)&&((i=t.imageCache.get(e.fileId))==null?void 0:i.mimeType)!==Te.svg},hy=e=>{switch(e.type){case"freedraw":return e.strokeWidth*12;case"text":return e.fontSize/2;case"arrow":return e.endArrowhead||e.endArrowhead?40:20;default:return 20}},zz=(e,t,n,i,r=1)=>{let s=((t==null?void 0:t.opacity)??100)*e.opacity/1e4*r;return(n.has(e.id)||i&&i.some(o=>o.id===e.id)||t&&n.has(t.id))&&(s*=Gre/100),s},Wle=(e,t,n)=>{const s=hy(e),[o,a,l,c]=He(e,t),u=xe(e)||qi(e)?Gi(o,l):e.width,d=xe(e)||qi(e)?Gi(a,c):e.height;let f=u*window.devicePixelRatio+s*2,h=d*window.devicePixelRatio+s*2,m=n.value;return(f*m>32767||h*m>32767)&&(m=Math.min(32767/f,32767/h)),f*h*m*m>16777216&&(m=Math.sqrt(16777216/(f*h))),f=Math.floor(f*m),h=Math.floor(h*m),{width:f,height:h,scale:m}},Hz=(e,t,n,i,r)=>{var b,y;const s=document.createElement("canvas"),o=s.getContext("2d"),a=hy(e),{width:l,height:c,scale:u}=Wle(e,t,n);if(!l||!c)return null;s.width=l,s.height=c;let d=-100,f=0;if(xe(e)||qi(e)){const[w,v]=He(e,t);d=e.x>w?Gi(e.x,w)*window.devicePixelRatio*u:0,f=e.y>v?Gi(e.y,v)*window.devicePixelRatio*u:0,o.translate(d,f)}o.save(),o.translate(a*u,a*u),o.scale(window.devicePixelRatio*u,window.devicePixelRatio*u);const h=iu.canvas(s);Bz(e,i,r)&&(o.filter=Pz),z2(e,h,o,i),o.restore();const m=Le(e,t),p=document.createElement("canvas"),U=p.getContext("2d");if(Ce(e)&&m){const[w,v,I,x]=He(e,t),_=Math.max(Gi(w,I),Gi(v,x));p.width=_*window.devicePixelRatio*u+a*u*10,p.height=_*window.devicePixelRatio*u+a*u*10,U.translate(p.width/2,p.height/2),U.rotate(e.angle),U.drawImage(s,-s.width/2,-s.height/2,s.width,s.height);const[,,,,T,A]=He(m,t);U.rotate(-e.angle);const C=(p.width-s.width)/2,k=(p.height-s.height)/2,P=p.width/2-(T-w)*window.devicePixelRatio*u-C-a*u,D=p.height/2-(A-v)*window.devicePixelRatio*u-k-a*u;U.translate(-P,-D),U.clearRect(-(m.width/2+$n)*window.devicePixelRatio*u,-(m.height/2+$n)*window.devicePixelRatio*u,(m.width+$n*2)*window.devicePixelRatio*u,(m.height+$n*2)*window.devicePixelRatio*u)}return{element:e,canvas:s,theme:r.theme,scale:u,zoomValue:n.value,canvasOffsetX:d,canvasOffsetY:f,boundTextElementVersion:((b=Le(e,t))==null?void 0:b.version)||null,containingFrameOpacity:((y=Ar(e,t))==null?void 0:y.opacity)||100,boundTextCanvas:p,angle:e.angle,imageCrop:Et(e)?e.crop:null}},Vz=typeof document<"u"?document.createElement("img"):{src:""};Vz.src=`data:${Te.svg},${encodeURIComponent('<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="#888" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>')}`;const $z=typeof document<"u"?document.createElement("img"):{src:""};$z.src=`data:${Te.svg},${encodeURIComponent('<svg viewBox="0 0 668 668" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48ZM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56ZM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.81709 0 0 .81709 124.825 145.825)"/><path d="M256 8C119.034 8 8 119.033 8 256c0 136.967 111.034 248 248 248s248-111.034 248-248S392.967 8 256 8Zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676ZM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676Z" style="fill:#888;fill-rule:nonzero" transform="matrix(.30366 0 0 .30366 506.822 60.065)"/></svg>')}`;const Kle=(e,t)=>{t.fillStyle="#E7E7E7",t.fillRect(0,0,e.width,e.height);const n=Math.min(e.width,e.height),i=Math.min(n,Math.min(n*.4,100));t.drawImage(e.status==="error"?$z:Vz,e.width/2-i/2,e.height/2-i/2,i,i)},z2=(e,t,n,i,r)=>{var s;switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":{n.lineJoin="round",n.lineCap="round",t.draw(qt.get(e));break}case"arrow":case"line":{n.lineJoin="round",n.lineCap="round",qt.get(e).forEach(o=>{t.draw(o)});break}case"freedraw":{n.save(),n.fillStyle=e.strokeColor;const o=Qle(e),a=qt.get(e);a&&t.draw(a),n.fillStyle=e.strokeColor,n.fill(o),n.restore();break}case"image":{const o=Ln(e)?(s=i.imageCache.get(e.fileId))==null?void 0:s.image:void 0;if(o!=null&&!(o instanceof Promise)){e.roundness&&n.roundRect&&(n.beginPath(),n.roundRect(0,0,e.width,e.height,dr(Math.min(e.width,e.height),e)),n.clip());const{x:a,y:l,width:c,height:u}=e.crop?e.crop:{x:0,y:0,width:o.naturalWidth,height:o.naturalHeight};n.drawImage(o,a,l,c,u,0,0,e.width,e.height)}else Kle(e,n);break}default:if(ge(e)){const o=PB(e.text),a=o&&!n.canvas.isConnected;a&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",o?"rtl":"ltr"),n.save(),n.font=pt(e),n.fillStyle=e.strokeColor,n.textAlign=e.textAlign;const l=e.text.replace(/\r\n?/g,`
`).split(`
`),c=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,u=_p(e.fontSize,e.lineHeight),d=EB(e.fontFamily,e.fontSize,u);for(let f=0;f<l.length;f++)n.fillText(l[f],c,f*u+d);n.restore(),a&&n.canvas.remove()}else throw new Error(`Unimplemented type ${e.type}`)}},P4=new WeakMap,nM=(e,t,n,i)=>{var d;const r=n?i.zoom:{value:1},s=P4.get(e),o=s&&s.zoomValue!==r.value&&!(i!=null&&i.shouldCacheIgnoreZoom),a=Le(e,t),l=(a==null?void 0:a.version)||null,c=Et(e)?e.crop:null,u=((d=Ar(e,t))==null?void 0:d.opacity)||100;if(!s||o||s.theme!==i.theme||s.boundTextElementVersion!==l||s.imageCrop!==c||s.containingFrameOpacity!==u||Ce(e)&&a&&e.angle!==s.angle){const f=Hz(e,t,r,n,i);return f?(P4.set(e,f),f):null}return s},X8=(e,t,n,i,r)=>{const s=e.element,o=hy(s),a=e.scale,[l,c,u,d]=He(s,r),f=((l+u)/2+i.scrollX)*window.devicePixelRatio,h=((c+d)/2+i.scrollY)*window.devicePixelRatio;t.save(),t.scale(1/window.devicePixelRatio,1/window.devicePixelRatio);const m=Le(s,r);if(Ce(s)&&m){const p=(e.boundTextCanvas.width-e.canvas.width)/2,U=(e.boundTextCanvas.height-e.canvas.height)/2;t.translate(f,h),t.drawImage(e.boundTextCanvas,-(u-l)/2*window.devicePixelRatio-p/a-o,-(d-c)/2*window.devicePixelRatio-U/a-o,e.boundTextCanvas.width/a,e.boundTextCanvas.height/a)}else t.translate(f,h),t.rotate(s.angle),"scale"in e.element&&!Fz(s,n)&&t.scale(e.element.scale[0],e.element.scale[1]),t.translate(-f,-h),t.drawImage(e.canvas,(l+i.scrollX)*window.devicePixelRatio-o*e.scale/e.scale,(c+i.scrollY)*window.devicePixelRatio-o*e.scale/e.scale,e.canvas.width/e.scale,e.canvas.height/e.scale);t.restore()},Zle=(e,t,n,i)=>{t.save(),t.translate(e.x+n.scrollX,e.y+n.scrollY),t.fillStyle="rgba(0, 0, 200, 0.04)";const r=.5/n.zoom.value;t.fillRect(r,r,e.width,e.height),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(r,r,e.width,e.height),t.restore()},Tu=(e,t,n,i,r,s,o)=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="elementLinkSelector"&&!o.selectedElementIds[e.id]&&!o.hoveredElementIds[e.id];switch(r.globalAlpha=zz(e,Ar(e,t),s.elementsPendingErasure,s.pendingFlowchartNodes,a?yB:1),e.type){case"magicframe":case"frame":{o.frameRendering.enabled&&o.frameRendering.outline&&(r.save(),r.translate(e.x+o.scrollX,e.y+o.scrollY),r.fillStyle="rgba(0, 0, 200, 0.04)",r.lineWidth=Ht.strokeWidth/o.zoom.value,r.strokeStyle=Ht.strokeColor,F2(e)&&(r.strokeStyle=o.theme===ke.LIGHT?"#7affd7":"#1d8264"),r.roundRect?(r.beginPath(),r.roundRect(0,0,e.width,e.height,Ht.radius/o.zoom.value),r.stroke(),r.closePath()):r.strokeRect(0,0,e.width,e.height),r.restore());break}case"freedraw":{if(qt.generateElementShape(e,null),s.isExporting){const[c,u,d,f]=He(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY,p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);r.save(),r.translate(h,m),r.rotate(e.angle),r.translate(-p,-U),z2(e,i,r,s),r.restore()}else{const c=nM(e,n,s,o);if(!c)return;X8(c,r,s,o,n)}break}case"rectangle":case"diamond":case"ellipse":case"line":case"arrow":case"image":case"text":case"iframe":case"embeddable":{if(qt.generateElementShape(e,s),s.isExporting){const[c,u,d,f]=He(e,t),h=(c+d)/2+o.scrollX,m=(u+f)/2+o.scrollY;let p=(d-c)/2-(e.x-c),U=(f-u)/2-(e.y-u);if(ge(e)){const y=Yn(e,t);if(Ce(y)){const w=Ue.getBoundTextElementPosition(y,e,t);p=(d-c)/2-(w.x-c),U=(f-u)/2-(w.y-u)}}r.save(),r.translate(h,m),Bz(e,s,o)&&(r.filter="none");const b=Le(e,t);if(Ce(e)&&b){const y=document.createElement("canvas"),w=y.getContext("2d"),v=Math.max(Gi(c,d),Gi(u,f)),I=hy(e);y.width=v*o.exportScale+I*10*o.exportScale,y.height=v*o.exportScale+I*10*o.exportScale,w.translate(y.width/2,y.height/2),w.scale(o.exportScale,o.exportScale),p=e.width/2-(e.x-c),U=e.height/2-(e.y-u),w.rotate(e.angle);const x=iu.canvas(y);w.translate(-p,-U),z2(e,x,w,s),w.translate(p,U),w.rotate(-e.angle);const[,,,,_,T]=He(b,t),A=(c+d)/2-_,C=(u+f)/2-T;w.translate(-A,-C),w.clearRect(-b.width/2,-b.height/2,b.width,b.height),r.scale(1/o.exportScale,1/o.exportScale),r.drawImage(y,-y.width/2,-y.height/2,y.width,y.height)}else r.rotate(e.angle),e.type==="image"&&r.scale(e.scale[0],e.scale[1]),r.translate(-p,-U),z2(e,i,r,s);r.restore()}else{const c=nM(e,n,s,o);if(!c)return;const u=r.imageSmoothingEnabled;if(!(o!=null&&o.shouldCacheIgnoreZoom)&&(!e.angle||gse(e.angle))&&(r.imageSmoothingEnabled=!1),e.id===o.croppingElementId&&Et(c.element)&&c.element.crop!==null){r.save(),r.globalAlpha=.1;const d=Hz(sae(c.element,t),n,o.zoom,s,o);d&&X8(d,r,s,o,n),r.restore()}X8(c,r,s,o,n),r.imageSmoothingEnabled=u}break}default:throw new Error(`Unimplemented type ${e.type}`)}r.globalAlpha=1},Gz=new WeakMap([]);function qle(e){const t=Xz(e),n=new Path2D(t);return Gz.set(e,n),n}function Qle(e){return Gz.get(e)}function Xz(e){return tce(jz(e))}function Jle(e,t,n){const i=si({...e,angle:0},n),r=S((i[0]+i[2])/2,(i[1]+i[3])/2);return gn(t.length>=2,"Freepath outline must have at least 2 points"),t.slice(2).reduce((s,o)=>(s.push(Me(s[s.length-1][1],q(S(o[0]+e.x,o[1]+e.y),r,e.angle))),s),[Me(q(S(t[0][0]+e.x,t[0][1]+e.y),r,e.angle),q(S(t[1][0]+e.x,t[1][1]+e.y),r,e.angle))])}function jz(e){const t=e.simulatePressure?e.points:e.points.length?e.points.map(([i,r],s)=>[i,r,e.pressures[s]]):[[0,0,.5]],n={simulatePressure:e.simulatePressure,size:e.strokeWidth*4.25,thinning:.6,smoothing:.5,streamline:.5,easing:i=>Math.sin(i*Math.PI/2),last:!!e.lastCommittedPoint};return nae(t,n)}function iM(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}const ece=/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g;function tce(e){if(!e.length)return"";const t=e.length-1;return e.reduce((n,i,r,s)=>(r===t?n.push(i,iM(i,s[0]),"L",s[0],"Z"):n.push(i,iM(i,s[r+1])),n),["M",e[0],"Q"]).join(" ").replace(ece,"$1")}const Hc=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="line"||e==="freedraw",F4=e=>e==="rectangle"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line"||e==="text",v6=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="freedraw"||e==="arrow"||e==="line",w6=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="ellipse"||e==="diamond"||e==="arrow"||e==="line",g0=e=>e==="rectangle"||e==="iframe"||e==="embeddable"||e==="line"||e==="diamond"||e==="image",_6=e=>e==="arrow",T6=e=>e==="arrow",Hi=class Hi{};F(Hi,"rg",new Fh),F(Hi,"cache",new WeakMap),F(Hi,"get",t=>Hi.cache.get(t)),F(Hi,"set",(t,n)=>Hi.cache.set(t,n)),F(Hi,"delete",t=>Hi.cache.delete(t)),F(Hi,"destroy",()=>{Hi.cache=new WeakMap}),F(Hi,"generateElementShape",(t,n)=>{const i=n!=null&&n.isExporting?void 0:Hi.get(t);if(i!==void 0)return i;P4.delete(t);const r=sce(t,Hi.rg,n||{isExporting:!1,canvasBackgroundColor:je.white,embedsValidationStatus:null});return Hi.cache.set(t,r),r});let qt=Hi;const nce=e=>[8,8+e],Yz=e=>[1.5,6+e];function ice(e){const t=e.roughness,n=Math.max(e.width,e.height),i=Math.min(e.width,e.height);return i>=20&&n>=50||i>=15&&e.roundness&&g0(e.type)||xe(e)&&n>=50?t:Math.min(t/(n<10?3:2),2.5)}const Hr=(e,t=!1)=>{const n={seed:e.seed,strokeLineDash:e.strokeStyle==="dashed"?nce(e.strokeWidth):e.strokeStyle==="dotted"?Yz(e.strokeWidth):void 0,disableMultiStroke:e.strokeStyle!=="solid",strokeWidth:e.strokeStyle!=="solid"?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:e.strokeWidth*4,roughness:ice(e),stroke:e.strokeColor,preserveVertices:t||e.roughness<pB.cartoonist};switch(e.type){case"rectangle":case"iframe":case"embeddable":case"diamond":case"ellipse":return n.fillStyle=e.fillStyle,n.fill=Sr(e.backgroundColor)?void 0:e.backgroundColor,e.type==="ellipse"&&(n.curveFitting=1),n;case"line":case"freedraw":return qo(e.points)&&(n.fillStyle=e.fillStyle,n.fill=e.backgroundColor==="transparent"?void 0:e.backgroundColor),n;case"arrow":return n;default:throw new Error(`Unimplemented type ${e.type}`)}},rM=(e,t,n)=>vs(e)&&(t||or(e)&&(n==null?void 0:n.get(e.id))!==!0)&&Sr(e.backgroundColor)&&Sr(e.strokeColor)?{...e,roughness:0,backgroundColor:"#d3d3d3",fillStyle:"solid"}:Wl(e)?{...e,strokeColor:Sr(e.strokeColor)?"#000000":e.strokeColor,backgroundColor:Sr(e.backgroundColor)?"#f4f4f6":e.backgroundColor}:e,sM=(e,t,n,i,r,s,o)=>{const a=uM(e,t,n,i);if(a===null)return[];const l=(c,u)=>{if(c===null)return[];const[,,d,f,h,m]=c;return[r.line(d,f,h,m,u)]};switch(i){case"dot":case"circle":case"circle_outline":{const[c,u,d]=a;return delete s.strokeLineDash,[r.circle(c,u,d,{...s,fill:i==="circle_outline"?o:e.strokeColor,fillStyle:"solid",stroke:e.strokeColor,roughness:Math.min(.5,s.roughness||0)})]}case"triangle":case"triangle_outline":{const[c,u,d,f,h,m]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[c,u]],{...s,fill:i==="triangle_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"diamond":case"diamond_outline":{const[c,u,d,f,h,m,p,U]=a;return delete s.strokeLineDash,[r.polygon([[c,u],[d,f],[h,m],[p,U],[c,u]],{...s,fill:i==="diamond_outline"?o:e.strokeColor,fillStyle:"solid",roughness:Math.min(1,s.roughness||0)})]}case"crowfoot_one":return l(a,s);case"bar":case"arrow":case"crowfoot_many":case"crowfoot_one_or_many":default:{const[c,u,d,f,h,m]=a;if(e.strokeStyle==="dotted"){const p=Yz(e.strokeWidth-1);s.strokeLineDash=[p[0],p[1]-1]}else delete s.strokeLineDash;return s.roughness=Math.min(1,s.roughness||0),[r.line(d,f,c,u,s),r.line(h,m,c,u,s),...i==="crowfoot_one_or_many"?l(uM(e,t,n,"crowfoot_one"),s):[]]}}},rce=e=>{const t=new Fh,n={seed:e.seed,disableMultiStroke:!0,disableMultiStrokeFill:!0,roughness:0,preserveVertices:!0},i=_g(e.points.reduce((r,s)=>[Math.min(e.x+s[0],r[0]),Math.min(e.y+s[1],r[1]),Math.max(e.x+s[0],r[2]),Math.max(e.y+s[1],r[3])],[1/0,1/0,-1/0,-1/0]));switch(e.type){case"line":case"arrow":{const r=e.points.length?e.points:[S(0,0)];return pe(e)?t.path(Wz(r,16),n).sets[0].ops:e.roundness?t.curve(r,n).sets[0].ops.slice(0,e.points.length).map((s,o)=>{if(o===0){const a=q(S(e.x+s.data[0],e.y+s.data[1]),i,e.angle);return{op:"move",data:S(a[0]-e.x,a[1]-e.y)}}return{op:"bcurveTo",data:[q(S(e.x+s.data[0],e.y+s.data[1]),i,e.angle),q(S(e.x+s.data[2],e.y+s.data[3]),i,e.angle),q(S(e.x+s.data[4],e.y+s.data[5]),i,e.angle)].map(a=>S(a[0]-e.x,a[1]-e.y)).flat()}}):r.map((s,o)=>{const a=q(S(e.x+s[0],e.y+s[1]),i,e.angle);return{op:o===0?"move":"lineTo",data:S(a[0]-e.x,a[1]-e.y)}})}case"freedraw":{if(e.points.length<2)return[];const r=Q9(e.points,.75);return t.curve(r,n).sets[0].ops.slice(0,e.points.length).map((s,o)=>{if(o===0){const a=q(S(e.x+s.data[0],e.y+s.data[1]),i,e.angle);return{op:"move",data:S(a[0]-e.x,a[1]-e.y)}}return{op:"bcurveTo",data:[q(S(e.x+s.data[0],e.y+s.data[1]),i,e.angle),q(S(e.x+s.data[2],e.y+s.data[3]),i,e.angle),q(S(e.x+s.data[4],e.y+s.data[5]),i,e.angle)].map(a=>S(a[0]-e.x,a[1]-e.y)).flat()}})}}},sce=(e,t,{isExporting:n,canvasBackgroundColor:i,embedsValidationStatus:r})=>{switch(e.type){case"rectangle":case"iframe":case"embeddable":{let s;if(e.roundness){const o=e.width,a=e.height,l=dr(Math.min(o,a),e);s=t.path(`M ${l} 0 L ${o-l} 0 Q ${o} 0, ${o} ${l} L ${o} ${a-l} Q ${o} ${a}, ${o-l} ${a} L ${l} ${a} Q 0 ${a}, 0 ${a-l} L 0 ${l} Q 0 0, ${l} 0`,Hr(rM(e,n,r),!0))}else s=t.rectangle(0,0,e.width,e.height,Hr(rM(e,n,r),!1));return s}case"diamond":{let s;const[o,a,l,c,u,d,f,h]=S6(e);if(e.roundness){const m=dr(Math.abs(o-f),e),p=dr(Math.abs(c-a),e);s=t.path(`M ${o+m} ${a+p} L ${l-m} ${c-p}
            C ${l} ${c}, ${l} ${c}, ${l-m} ${c+p}
            L ${u+m} ${d-p}
            C ${u} ${d}, ${u} ${d}, ${u-m} ${d-p}
            L ${f+m} ${h+p}
            C ${f} ${h}, ${f} ${h}, ${f+m} ${h-p}
            L ${o-m} ${a+p}
            C ${o} ${a}, ${o} ${a}, ${o+m} ${a+p}`,Hr(e,!0))}else s=t.polygon([[o,a],[l,c],[u,d],[f,h]],Hr(e));return s}case"ellipse":return t.ellipse(e.width/2,e.height/2,e.width,e.height,Hr(e));case"line":case"arrow":{let s;const o=Hr(e),a=e.points.length?e.points:[S(0,0)];if(pe(e)?a.every(l=>Math.abs(l[0])<=1e6&&Math.abs(l[1])<=1e6)?s=[t.path(Wz(a,16),Hr(e,!0))]:(console.error("Elbow arrow with extreme point positions detected. Arrow not rendered.",e.id,JSON.stringify(a)),s=[]):e.roundness?s=[t.curve(a,o)]:o.fill?s=[t.polygon(a,o)]:s=[t.linearPath(a,o)],e.type==="arrow"){const{startArrowhead:l=null,endArrowhead:c="arrow"}=e;if(l!==null){const u=sM(e,s,"start",l,t,o,i);s.push(...u)}if(c!==null){const u=sM(e,s,"end",c,t,o,i);s.push(...u)}}return s}case"freedraw":{let s;if(qle(e),qo(e.points)){const o=Q9(e.points,.75);s=t.curve(o,{...Hr(e),stroke:"none"})}else s=null;return s}case"frame":case"magicframe":case"text":case"image":return null;default:return Ko(e,`generateElementShape(): Unimplemented type ${e==null?void 0:e.type}`),null}},Wz=(e,t)=>{const n=[];for(let r=1;r<e.length-1;r+=1){const s=e[r-1],o=e[r+1],a=e[r],l=La(a,s),c=La(o,a),u=Math.min(t,ct(e[r],o)/2,ct(e[r],s)/2);l?s[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):s[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u]),n.push(e[r]),c?o[0]<a[0]?n.push([e[r][0]-u,e[r][1]]):n.push([e[r][0]+u,e[r][1]]):o[1]<a[1]?n.push([e[r][0],e[r][1]-u]):n.push([e[r][0],e[r][1]+u])}const i=[`M ${e[0][0]} ${e[0][1]}`];for(let r=0;r<n.length;r+=3)i.push(`L ${n[r][0]} ${n[r][1]}`),i.push(`Q ${n[r+1][0]} ${n[r+1][1]}, ${n[r+2][0]} ${n[r+2][1]}`);return i.push(`L ${e[e.length-1][0]} ${e[e.length-1][1]}`),i.join(" ")},oce=(e,t)=>{var n;switch(e.type){case"rectangle":case"diamond":case"frame":case"magicframe":case"embeddable":case"image":case"iframe":case"text":case"selection":return Hoe(e);case"arrow":case"line":{const i=((n=qt.get(e))==null?void 0:n[0])??qt.generateElementShape(e,null)[0],[,,,,r,s]=He(e,t);return d6(e)?joe(e,i,S(e.x,e.y),e.angle,S(r,s)):$oe(i,S(e.x,e.y),e.angle,S(r,s))}case"ellipse":return Voe(e);case"freedraw":{const[,,,,i,r]=He(e,t);return Xoe(e,S(i,r),d6(e))}}},I_=(e,t)=>{const n=[...e.points];if(t){if(!oz(e.points))return null;const r=n[0],s=n[n.length-1];Math.hypot(r[0]-s[0],r[1]-s[1])>jre||n.length<4?n.push(S(r[0],r[1])):n[n.length-1]=S(r[0],r[1])}return{polygon:t,points:n}},Co=class Co{static getBounds(t,n,i=!1){const r=i&&t.angle!==0?Co.nonRotatedBoundsCache.get(t):Co.boundsCache.get(t);if(r!=null&&r.version&&r.version===t.version&&!Lt(t))return r.bounds;if(i&&t.angle!==0){const o=Co.calculateBounds({...t,angle:0},n);return Co.nonRotatedBoundsCache.set(t,{version:t.version,bounds:o}),o}const s=Co.calculateBounds(t,n);return Co.boundsCache.set(t,{version:t.version,bounds:s}),s}static calculateBounds(t,n){let i;const[r,s,o,a,l,c]=He(t,n);if(qi(t)){const[u,d,f,h]=x_(t.points.map(([m,p])=>q(S(m,p),S(l-t.x,c-t.y),t.angle)));return[u+t.x,d+t.y,f+t.x,h+t.y]}else if(xe(t))i=hce(t,l,c,n);else if(t.type==="diamond"){const[u,d]=q(S(l,s),S(l,c),t.angle),[f,h]=q(S(l,a),S(l,c),t.angle),[m,p]=q(S(r,c),S(l,c),t.angle),[U,b]=q(S(o,c),S(l,c),t.angle),y=Math.min(u,f,m,U),w=Math.min(d,h,p,b),v=Math.max(u,f,m,U),I=Math.max(d,h,p,b);i=[y,w,v,I]}else if(t.type==="ellipse"){const u=(o-r)/2,d=(a-s)/2,f=Math.cos(t.angle),h=Math.sin(t.angle),m=Math.hypot(u*f,d*h),p=Math.hypot(d*f,u*h);i=[l-m,c-p,l+m,c+p]}else{const[u,d]=q(S(r,s),S(l,c),t.angle),[f,h]=q(S(r,a),S(l,c),t.angle),[m,p]=q(S(o,a),S(l,c),t.angle),[U,b]=q(S(o,s),S(l,c),t.angle),y=Math.min(u,f,m,U),w=Math.min(d,h,p,b),v=Math.max(u,f,m,U),I=Math.max(d,h,p,b);i=[y,w,v,I]}return i}};F(Co,"boundsCache",new WeakMap),F(Co,"nonRotatedBoundsCache",new WeakMap);let B4=Co;const He=(e,t,n=!1)=>{if(qi(e))return cce(e);if(xe(e))return Ue.getElementAbsoluteCoords(e,t,n);if(ge(e)){const i=t?Yn(e,t):null;if(Ce(i)){const{x:r,y:s}=Ue.getBoundTextElementPosition(i,e,t);return[r,s,r+e.width,s+e.height,r+e.width/2,s+e.height/2]}}return[e.x,e.y,e.x+e.width,e.y+e.height,e.x+e.width/2,e.y+e.height/2]},I6=(e,t)=>{const n=oce(e,t),[i,r,s,o,a,l]=He(e,t),c=S(a,l);if(n.type==="polycurve"){const b=n.data.map(w=>wp(w,10)),y=[];if(nn(e)&&!e.polygon||Ce(e))for(const w of b){let v=0;for(;v<w.length-1;)y.push(Me(S(w[v][0],w[v][1]),S(w[v+1][0],w[v+1][1]))),v++}else{const w=b.flat();let v=0;for(;v<w.length-1;)y.push(Me(S(w[v][0],w[v][1]),S(w[v+1][0],w[v+1][1]))),v++}return y}else{if(n.type==="polyline")return n.data;if(ace(e)){const[U,b]=t_(e),y=b.map(v=>aM(v,c,e.angle)).flat();return[...oM(U,c,e.angle),...y]}else if(e.type==="diamond"){const[U,b]=n_(e),y=b.map(v=>aM(v,c,e.angle)).flat();return[...oM(U,c,e.angle),...y]}else if(n.type==="polygon"){if(ge(e)){const y=Yn(e,t);if(y&&xe(y))return[Me(S(i,r),S(s,r)),Me(S(s,r),S(s,o)),Me(S(s,o),S(i,o)),Me(S(i,o),S(i,r))]}const U=n.data,b=[];for(let y=0;y<U.length-1;y++)b.push(Me(U[y],U[y+1]));return b}else if(n.type==="ellipse")return lce(e)}const[u,d,f,h,,,m,p]=[[i,r],[s,r],[i,o],[s,o],[a,r],[a,o],[i,l],[s,l]].map(U=>q(U,c,e.angle));return[Me(u,d),Me(f,h),Me(u,f),Me(d,h),Me(u,p),Me(f,p),Me(d,m),Me(h,m)]},ace=e=>e!=null&&(e.type==="rectangle"||e.type==="image"||e.type==="iframe"||e.type==="embeddable"||e.type==="frame"||e.type==="magicframe"||e.type==="text"&&!e.containerId),oM=(e,t,n)=>e.map(i=>Me(q(i[0],t,n),q(i[1],t,n))),aM=(e,t,n)=>{const i=wp(e,10);let r=0;const s=[];for(;r<i.length-1;)s.push(Me(q(S(i[r][0],i[r][1]),t,n),q(S(i[r+1][0],i[r+1][1]),t,n))),r++;return s},lce=e=>{const t=S(e.x+e.width/2,e.y+e.height/2),n=e.width/2,i=e.height/2,r=[],s=[],o=90,a=Math.PI*2/o;for(let l=0;l<o;l++){const c=l*a,u=t[0]+n*Math.cos(c),d=t[1]+i*Math.sin(c);s.push(q(S(u,d),t,e.angle))}for(let l=0;l<s.length-1;l++)r.push(Me(s[l],s[l+1]));return r.push(Me(s[s.length-1],s[0])),r},S6=e=>{const t=Math.floor(e.width/2)+1,n=0,i=e.width,r=Math.floor(e.height/2)+1,s=t,o=e.height;return[t,n,i,r,s,o,0,r]},lM=(e,t,n,i,r)=>{const s=1-e;return Math.pow(s,3)*t+3*Math.pow(s,2)*e*n+3*s*Math.pow(e,2)*i+Math.pow(e,3)*r},cM=(e,t,n,i)=>{const r=t-e,s=n-t,o=i-n,a=3*r-6*s+3*o,l=6*s-6*r,c=3*r,u=l*l-4*a*c;if(!(u>=0))return!1;let f=null,h=null,m=1/0,p=1/0;return a===0?m=p=-c/l:(m=(-l+Math.sqrt(u))/(2*a),p=(-l-Math.sqrt(u))/(2*a)),m>=0&&m<=1&&(f=lM(m,e,t,n,i)),p>=0&&p<=1&&(h=lM(p,e,t,n,i)),[f,h]},S_=(e,t,n,i)=>{const r=cM(e[0],t[0],n[0],i[0]),s=cM(e[1],t[1],n[1],i[1]);let o=Math.min(e[0],i[0]),a=Math.max(e[0],i[0]);if(r){const u=r.filter(d=>d!==null);o=Math.min(o,...u),a=Math.max(a,...u)}let l=Math.min(e[1],i[1]),c=Math.max(e[1],i[1]);if(s){const u=s.filter(d=>d!==null);l=Math.min(l,...u),c=Math.max(c,...u)}return[o,l,a,c]},gy=(e,t)=>{let n=S(0,0);const{minX:i,minY:r,maxX:s,maxY:o}=e.reduce((a,{op:l,data:c})=>{if(l==="move"){const u=ny(c);gn(u!=null,"Op data is not a point"),n=u}else if(l==="bcurveTo"){const u=S(c[0],c[1]),d=S(c[2],c[3]),f=S(c[4],c[5]),h=t?t(u):u,m=t?t(d):d,p=t?t(f):f,U=t?t(n):n;n=f;const[b,y,w,v]=S_(U,h,m,p);a.minX=Math.min(a.minX,b),a.minY=Math.min(a.minY,y),a.maxX=Math.max(a.maxX,w),a.maxY=Math.max(a.maxY,v)}return a},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[i,r,s,o]},x_=e=>{let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const[s,o]of e)t=Math.min(t,s),n=Math.min(n,o),i=Math.max(i,s),r=Math.max(r,o);return[t,n,i,r]},cce=e=>{const[t,n,i,r]=x_(e.points),s=t+e.x,o=n+e.y,a=i+e.x,l=r+e.y;return[s,o,a,l,(s+a)/2,(o+l)/2]},uce=e=>{switch(e){case"arrow":return 25;case"diamond":case"diamond_outline":return 12;case"crowfoot_many":case"crowfoot_one":case"crowfoot_one_or_many":return 20;default:return 15}},dce=e=>{switch(e){case"bar":return 90;case"arrow":return 20;default:return 25}},uM=(e,t,n,i)=>{if(t.length<1)return null;const r=zd(t[0]);if(r.length<1)return null;const s=n==="start"?1:r.length-1,o=r[s].data;gn(o.length===6,"Op data length is not 6");const a=S(o[4],o[5]),l=S(o[2],o[3]),c=S(o[0],o[1]),u=r[s-1];let d=S(0,0);if(u.op==="move"){const G=ny(u.data);gn(G!=null,"Op data is not a point"),d=G}else u.op==="bcurveTo"&&(d=S(u.data[4],u.data[5]));const f=(G,B)=>Math.pow(1-G,3)*a[B]+3*G*Math.pow(1-G,2)*l[B]+3*Math.pow(G,2)*(1-G)*c[B]+d[B]*Math.pow(G,3),[h,m]=n==="start"?d:a,[p,U]=[f(.3,0),f(.3,1)],b=Math.hypot(h-p,m-U),y=(h-p)/b,w=(m-U)/b,v=uce(i);let I=0;{const[G,B]=n==="end"?e.points[e.points.length-1]:e.points[0],[H,$]=e.points.length>1?n==="end"?e.points[e.points.length-2]:e.points[1]:[0,0];I=Math.hypot(G-H,B-$)}const _=Math.min(v,I*(i==="diamond"||i==="diamond_outline"?.25:.5)),T=h-y*_,A=m-w*_;if(i==="dot"||i==="circle"||i==="circle_outline"){const G=Math.hypot(A-m,T-h)+e.strokeWidth-2;return[h,m,G]}const C=dce(i);if(i==="crowfoot_many"||i==="crowfoot_one_or_many"){const[G,B]=q(S(h,m),S(T,A),qu(-C)),[H,$]=q(S(h,m),S(T,A),qu(C));return[T,A,G,B,H,$]}const[k,P]=q(S(T,A),S(h,m),-C*Math.PI/180),[D,j]=q(S(T,A),S(h,m),qu(C));if(i==="diamond"||i==="diamond_outline"){let G,B;if(n==="start"){const[H,$]=e.points.length>1?e.points[1]:[0,0];[G,B]=q(S(h+_*2,m),S(h,m),Math.atan2($-m,H-h))}else{const[H,$]=e.points.length>1?e.points[e.points.length-2]:[0,0];[G,B]=q(S(h-_*2,m),S(h,m),Math.atan2(m-$,h-H))}return[h,m,k,P,G,B,D,j]}return[h,m,k,P,D,j]},fce=e=>{const t=iu.generator(),n=Hr(e),i=e.roundness?"curve":n.fill?"polygon":"linearPath";return t[i](e.points,n)},hce=(e,t,n,i)=>{var d;const r=Le(e,i);if(e.points.length<2){const[f,h]=e.points[0],[m,p]=q(S(e.x+f,e.y+h),S(t,n),e.angle);let U=[m,p,m,p];if(r){const b=Ue.getMinMaxXYWithBoundText(e,i,[m,p,m,p],r);U=[b[0],b[1],b[2],b[3]]}return U}const o=((d=qt.get(e))==null?void 0:d[0])??fce(e),a=zd(o),c=gy(a,([f,h])=>q(S(e.x+f,e.y+h),S(t,n),e.angle));let u=[c[0],c[1],c[2],c[3]];if(r){const f=Ue.getMinMaxXYWithBoundText(e,i,u,r);u=[f[0],f[1],f[2],f[3]]}return u},si=(e,t,n=!1)=>B4.getBounds(e,t,n),nt=(e,t)=>{if(!GB(e))return[0,0,0,0];let n=1/0,i=-1/0,r=1/0,s=-1/0;const o=t||ve(e);return e.forEach(a=>{const[l,c,u,d]=si(a,o);n=Math.min(n,l),r=Math.min(r,c),i=Math.max(i,u),s=Math.max(s,d)}),[n,r,i,s]},C_=(e,t)=>{const[n,i,r,s]=nt(e);return[n+t.x,i+t.y,r+t.x,s+t.y]},m0=(e,t,n,i)=>{if(!(xe(e)||qi(e)))return[e.x,e.y,e.x+t,e.y+n];const r=s6(0,t,s6(1,n,e.points,i),i);let s;if(qi(e))s=x_(r);else{const u=iu.generator(),d=e.roundness?u.curve(r,Hr(e)):u.linearPath(r,Hr(e)),f=zd(d);s=gy(f)}const[o,a,l,c]=s;return[o+e.x,a+e.y,l+e.x,c+e.y]},dM=(e,t)=>{const n=iu.generator(),i=e.roundness==null?n.linearPath(t,Hr(e)):n.curve(t,Hr(e)),r=zd(i),[s,o,a,l]=gy(r);return[s+e.x,o+e.y,a+e.x,l+e.y]},gce=(e,t)=>{if(!e.length)return[0,0,0,0];let n=1/0,i=e[0];const r=ve(e);return e.forEach(s=>{const[o,a,l,c]=si(s,r),u=ct(S((o+l)/2,(a+c)/2),S(t.x,t.y));u<n&&(n=u,i=s)}),si(i,r)},Ms=e=>{const[t,n,i,r]=nt(e);return{minX:t,minY:n,maxX:i,maxY:r,width:i-t,height:r-n,midX:(t+i)/2,midY:(n+r)/2}},Kz=({scrollX:e,scrollY:t,width:n,height:i,zoom:r})=>[-e,-t,-e+n/r.value,-t+i/r.value],_g=e=>S(e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2),_a=(e,t,n)=>{const i={minX:e.x,minY:e.y,maxX:e.x+e.width,maxY:e.y+e.height,midX:e.x+e.width/2,midY:e.y+e.height/2},r=oi(e,t),[s,o]=q(S(i.minX,i.minY),r,e.angle),[a,l]=q(S(i.maxX,i.minY),r,e.angle),[c,u]=q(S(i.maxX,i.maxY),r,e.angle),[d,f]=q(S(i.minX,i.maxY),r,e.angle),h=[Math.min(s,a,c,d),Math.min(o,l,u,f),Math.max(s,a,c,d),Math.max(o,l,u,f)];if(n){const[m,p,U,b]=n;return[h[0]-b,h[1]-m,h[2]+p,h[3]+U]}return h},p0=(e,t)=>e[0]>t[0]&&e[0]<t[2]&&e[1]>t[1]&&e[1]<t[3],Vd=(e,t)=>{if(e==null||t==null)return!1;const[n,i,r,s]=e,[o,a,l,c]=t;return n<l&&r>o&&i<c&&s>a},oi=(e,t,n=0,i=0)=>{const[r,s]=_g(si(e,t));return S(r+n,s+i)},mce=.1,Qa=e=>xe(e)||qi(e)?e.points.length<2||e.points.length===2&&Ce(e)&&Os(e.points[0],e.points[e.points.length-1],mce):e.width===0&&e.height===0,x6=(e,t,n,i,r)=>{const[s,o,a,l]=si(e,r),c=Nt({clientX:i.offsetLeft,clientY:i.offsetTop},i),u=Nt({clientX:i.offsetLeft+t,clientY:i.offsetTop+n},i);return c.x<=a&&c.y<=l&&u.x>=s&&u.y>=o},H2=(e,t,n,i,r,s)=>{const[o,a,l,c]=nt(e,r),u=Nt({clientX:i.offsetLeft+((s==null?void 0:s.left)||0),clientY:i.offsetTop+((s==null?void 0:s.top)||0)},i),d=Nt({clientX:i.offsetLeft+t-((s==null?void 0:s.right)||0),clientY:i.offsetTop+n-((s==null?void 0:s.bottom)||0)},i);return o>=u.x&&a>=u.y&&l<=d.x&&c<=d.y},fM=(e,t,n)=>{const i=Math.abs(t),r=Math.abs(n);if(e==="line"||e==="arrow"||e==="freedraw"){const s=Math.round(Math.atan(r/i)/Vr)*Vr;s===0?n=0:s===Math.PI/2?t=0:n=i*Math.tan(s)*Math.sign(n)||n}else e!=="selection"&&(n=i*Math.sign(n));return{width:t,height:n}},z4=(e,t,n,i,r)=>{let s=n-e,o=i-t;const a=Math.atan2(o,s);let l=Math.round(a/Vr)*Vr;if(r){const c=Math.floor(r/Vr)*Vr;mse(a,c,c+Vr)&&(pse(a,r)<Vr/6?l=r:ro(a)>ro(r)?l=c+Vr:l=c)}if(l===0)o=0;else if(l===Math.PI/2)s=0;else{const c=Math.tan(l),u=-1,d=t-c*e,f=-1/c,h=-1,m=i-f*n,p=(u*m-h*d)/(c*h-f*u),U=(d*f-m*c)/(c*h-f*u);s=p-e,o=U-t}return{width:s,height:o}},Zz=e=>{const t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){const n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){const n=Math.abs(e.height);t.height=n,t.y=e.y-n}return t},pce=(e,t,n,i)=>{const r=cy(e,n.getNonDeletedElementsMap(),i),s=Ms(e);return r.flatMap(o=>{const a=Uce(o,s,t);return o.map(l=>{const c=n.mutateElement(l,{x:l.x+a.x,y:l.y+a.y});return fr(l,n,{simultaneouslyUpdated:o}),c})})},Uce=(e,t,{axis:n,position:i})=>{const r=Ms(e),[s,o]=n==="x"?["minX","maxX"]:["minY","maxY"],a={x:0,y:0};return i==="start"?{...a,[n]:t[s]-r[s]}:i==="end"?{...a,[n]:t[o]-r[o]}:{...a,[n]:(t[s]+t[o])/2-(r[s]+r[o])/2}},bce=e=>{const t=e.slice(),n=new Set,i=s=>{var c,u,d;const o=(u=(c=s[0])==null?void 0:c.groupIds)==null?void 0:u.join(""),a=[s[0]],l=[];for(const f of s.slice(1))((d=f.groupIds)==null?void 0:d.join(""))===o?a.push(f):l.push(f);return l.length?[...a,...i(l)]:a},r=new Map;return t.forEach((s,o)=>{var a;if(!r.has(s.id))if((a=s.groupIds)!=null&&a.length){const l=s.groupIds[s.groupIds.length-1],c=t.slice(o).filter(u=>{var f;const d=(f=u==null?void 0:u.groupIds)==null?void 0:f.some(h=>h===l);return d&&r.set(u.id,!0),d});for(const u of i(c))n.add(u)}else n.add(s)}),n.size!==e.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),e):[...n]},yce=e=>{const t=Gse(e),n=e.slice(),i=new Set;return n.forEach((r,s)=>{var o,a;if(r)if((o=r.boundElements)!=null&&o.length)i.add(r),n[s]=null,r.boundElements.forEach(l=>{const c=t.get(l.id);c&&l.type==="text"&&(i.add(c[0]),n[c[1]]=null)});else if(r.type==="text"&&r.containerId){const l=t.get(r.containerId);(a=l==null?void 0:l[0].boundElements)!=null&&a.find(c=>c.id===r.id)||(i.add(r),n[s]=null)}else i.add(r),n[s]=null}),i.size!==e.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),e):[...i]},Ece=e=>yce(bce(e)),vce=(e,t,n,i)=>{const r=Vc(n);return r.id=mr(),r.updated=yg(),i&&(r.seed=Ps(),Da(r)),r.groupIds=Ble(r.groupIds,e,s=>(t.has(s)||t.set(s,mr()),t.get(s))),r},_1=e=>{let{elements:t}=e;const n="appState"in e?e.appState:{editingGroupId:null,selectedGroupIds:{}},i=new Map,r=new Map,s=[],o=[],a=new Map,l=new Map,c=new Map,u=ve(t),d=e.type==="in-place"?e.idsOfElementsToDuplicate:new Map(t.map(U=>[U.id,U]));if(e.type==="in-place")for(const U of Object.keys(e.appState.selectedGroupIds))t.filter(b=>{var y;return(y=b.groupIds)==null?void 0:y.includes(U)}).forEach(b=>d.set(b.id,b));t=Ece(t);const f=t.slice(),h=U=>{const y=D8(U).reduce((w,v)=>{if(i.has(v.id))return w;i.set(v.id,!0);const I=vce(n.editingGroupId,r,v,e.randomizeSeed);return i.set(I.id,!0),c.set(I.id,I),a.set(v.id,I.id),l.set(I.id,v),o.push(v),s.push(I),w.push(I),w},[]);return Array.isArray(U)?y:y[0]||null},m=(U,b)=>{if(b){if(U>f.length-1){f.push(...D8(b));return}f.splice(U+1,0,...D8(b))}},p=new Set(t.filter(U=>d.has(U.id)&&we(U)).map(U=>U.id));for(const U of t){if(i.has(U.id)||!d.has(U.id))continue;const b=Cz(n,U);if(b){const y=At(t,b).flatMap(v=>we(v)?[...is(t,v.id),v]:[v]),w=Cu(f,v=>{var I;return(I=v.groupIds)==null?void 0:I.includes(b)});m(w,h(y));continue}if(!(U.frameId&&p.has(U.frameId))){if(we(U)){const y=U.id,w=is(t,y),v=Cu(f,I=>I.frameId===y||I.id===y);m(v,h([...w,U]));continue}if(Di(U)){const y=Le(U,u),w=Cu(f,v=>v.id===U.id||"containerId"in v&&v.containerId===U.id);y?m(w,h([U,y])):m(w,h(U));continue}if(Lt(U)){const y=Yn(U,u),w=Cu(f,v=>v.id===U.id||v.id===(y==null?void 0:y.id));y?m(w,h([y,U])):m(w,h(U));continue}m(Cu(f,y=>y.id===U.id),h(U))}}if(Ele(s,a,c),Hle(f,o,a),e.overrides)for(const U of s){const b=l.get(U.id);b&&Object.assign(U,e.overrides({duplicateElement:U,origElement:b,origIdToDuplicateId:a}))}return{duplicatedElements:s,duplicateElementsMap:c,elementsWithDuplicates:f,origIdToDuplicateId:a}},H4=(e,t=0)=>{if(e==null||typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){const i=typeof e.constructor=="function"?Object.create(Object.getPrototypeOf(e)):{};for(const r in e)if(e.hasOwnProperty(r)){if(t===0&&(r==="shape"||r==="canvas"))continue;i[r]=H4(e[r],t+1)}return i}if(Array.isArray(e)){let i=e.length;const r=new Array(i);for(;i--;)r[i]=H4(e[i],t+1);return r}return e},Vc=e=>H4(e),K={IMMEDIATELY:"IMMEDIATELY",NEVER:"NEVER",EVENTUALLY:"EVENTUALLY"};class wce{constructor(t){F(this,"onDurableIncrementEmitter",new Ys);F(this,"onStoreIncrementEmitter",new Ys);F(this,"scheduledMacroActions",new Set);F(this,"scheduledMicroActions",[]);F(this,"_snapshot",Po.empty());this.app=t}get snapshot(){return this._snapshot}set snapshot(t){this._snapshot=t}scheduleAction(t){this.scheduledMacroActions.add(t),this.satisfiesScheduledActionsInvariant()}scheduleCapture(){this.scheduleAction(K.IMMEDIATELY)}scheduleMicroAction(t){const{action:n}=t;let i;if("change"in t)i=t.change;else{const s=Po.create(this.app.scene.getElementsMapIncludingDeleted(),this.app.state),o=s.maybeClone(n,t.elements?Cce(t.elements):void 0,t.appState);i=lh.create(s,o)}const r="delta"in t?t.delta:void 0;this.scheduledMicroActions.push(()=>this.processAction({action:n,change:i,delta:r}))}commit(t,n){this.flushMicroActions();try{const i=this.getScheduledMacroAction();this.processAction({action:i,elements:t,appState:n})}finally{this.satisfiesScheduledActionsInvariant(),this.scheduledMacroActions=new Set}}clear(){this.snapshot=Po.empty(),this.scheduledMacroActions=new Set}emitDurableIncrement(t,n=void 0,i=void 0){const r=this.snapshot;let s,o;if(n?s=n:s=lh.create(r,t),i?o=i:o=Ud.calculate(r,t),!o.isEmpty()){const a=new _ce(s,o);this.onDurableIncrementEmitter.trigger(a),this.onStoreIncrementEmitter.trigger(a)}}emitEphemeralIncrement(t,n=void 0){let i;if(n)i=n;else{const s=this.snapshot;i=lh.create(s,t)}const r=new Tce(i);this.onStoreIncrementEmitter.trigger(r)}applyChangeToSnapshot(t){const n=this.snapshot,i=this.snapshot.applyChange(t);return n===i?null:i}maybeCloneSnapshot(t,n,i){if(!n&&!i)return null;const r=this.snapshot,s=this.snapshot.maybeClone(t,n,i);return r===s?null:s}flushMicroActions(){for(const t of this.scheduledMicroActions)try{t()}catch(n){console.error("Failed to execute scheduled micro action",n)}this.scheduledMicroActions=[]}processAction(t){const{action:n}=t;if(n===K.EVENTUALLY&&!this.onStoreIncrementEmitter.subscribers.length)return;let i;if("change"in t?i=this.applyChangeToSnapshot(t.change):i=this.maybeCloneSnapshot(n,t.elements,t.appState),!i)return;const r="change"in t?t.change:void 0,s="delta"in t?t.delta:void 0;try{switch(n){case K.IMMEDIATELY:this.emitDurableIncrement(i,r,s);break;case K.NEVER:case K.EVENTUALLY:this.emitEphemeralIncrement(i,r);break;default:Ko(n,"Unknown store action")}}finally{switch(n){case K.IMMEDIATELY:case K.NEVER:this.snapshot=i;break}}}getScheduledMacroAction(){let t;return this.scheduledMacroActions.has(K.IMMEDIATELY)?t=K.IMMEDIATELY:this.scheduledMacroActions.has(K.NEVER)?t=K.NEVER:t=K.EVENTUALLY,t}satisfiesScheduledActionsInvariant(){if(!(this.scheduledMacroActions.size>=0&&this.scheduledMacroActions.size<=Object.keys(K).length)){const t=`There can be at most three store actions scheduled at the same time, but there are "${this.scheduledMacroActions.size}".`;console.error(t,this.scheduledMacroActions.values())}}}class lh{constructor(t,n){this.elements=t,this.appState=n}static create(t,n){const i=n.getChangedElements(t),r=n.getChangedAppState(t);return new lh(i,r)}}class qz{constructor(t,n){this.type=t,this.change=n}static isDurable(t){return t.type==="durable"}static isEphemeral(t){return t.type==="ephemeral"}}class _ce extends qz{constructor(t,n){super("durable",t),this.change=t,this.delta=n}}class Tce extends qz{constructor(t){super("ephemeral",t),this.change=t}}class Ud{constructor(t,n,i){this.id=t,this.elements=n,this.appState=i}static create(t,n,i={id:mr()}){return new this(i.id,t,n)}static calculate(t,n){const i=n.metadata.didElementsChange?Au.calculate(t.elements,n.elements):Au.empty(),r=n.metadata.didAppStateChange?An.calculate(t.appState,n.appState):An.empty();return this.create(i,r)}static restore(t){const{id:n,elements:i,appState:r}=t;return new this(n,Au.restore(i),An.restore(r))}static load({id:t,elements:{added:n,removed:i,updated:r},appState:{delta:s}}){const o=Au.create(n,i,r),a=An.create(s);return new this(t,o,a)}static squash(...t){const n=Ud.empty();for(const i of t)n.elements.squash(i.elements),n.appState.squash(i.appState);return n}static inverse(t){return this.create(t.elements.inverse(),t.appState.inverse())}static applyTo(t,n,i,r){const[s,o]=t.elements.applyTo(n,Po.empty().elements,r),[a,l]=t.appState.applyTo(i,s);return[s,a,o||l]}static applyLatestChanges(t,n,i,r){return this.create(t.elements.applyLatestChanges(n,i,r),t.appState,{id:t.id})}static empty(){return Ud.create(Au.empty(),An.empty())}isEmpty(){return this.elements.isEmpty()&&this.appState.isEmpty()}}class Po{constructor(t,n,i={didElementsChange:!1,didAppStateChange:!1,isEmpty:!1}){F(this,"_lastChangedElementsHash",0);F(this,"_lastChangedAppStateHash",0);this.elements=t,this.appState=n,this.metadata=i}static create(t,n,i={didElementsChange:!1,didAppStateChange:!1}){return new Po(t,hM(n)?n:ch(n),i)}static empty(){return new Po(new Map,Ice(),{didElementsChange:!1,didAppStateChange:!1,isEmpty:!0})}getChangedElements(t){const n={};for(const i of Yl(t.elements))this.elements.get(i.id)||(n[i.id]=Ie(i,{isDeleted:!0}));for(const i of Yl(this.elements))t.elements.get(i.id)!==i&&(n[i.id]=i);return n}getChangedAppState(t){return De.getRightDifferences(t.appState,this.appState).reduce((n,i)=>Object.assign(n,{[i]:this.appState[i]}),{})}isEmpty(){return this.metadata.isEmpty}applyChange(t){const n=new Map(this.elements);for(const[r,s]of Object.entries(t.elements))n.set(r,s);const i=ch({...this.appState,...t.appState});return Po.create(n,i,{didElementsChange:Object.keys(t.elements).length>0,didAppStateChange:Object.keys(t.appState).length>0})}maybeClone(t,n,i){const r={shouldCompareHashes:!1};t===K.EVENTUALLY&&(r.shouldCompareHashes=!0);const s=this.maybeCreateElementsSnapshot(n,r),o=this.maybeCreateAppStateSnapshot(i,r);let a=!1,l=!1;return this.elements!==s&&(a=!0),this.appState!==o&&(l=!0),!a&&!l?this:new Po(s,o,{didElementsChange:a,didAppStateChange:l})}maybeCreateAppStateSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.appState;const i=hM(t)?t:ch(t);return this.detectChangedAppState(i,n)?i:this.appState}maybeCreateElementsSnapshot(t,n={shouldCompareHashes:!1}){if(!t)return this.elements;const i=this.detectChangedElements(t,n);return i!=null&&i.size?this.createElementsSnapshot(i):this.elements}detectChangedAppState(t,n={shouldCompareHashes:!1}){if(this.appState===t)return;const i=De.isRightDifferent(this.appState,t);if(!i)return;const r=P_(JSON.stringify(t));if(!(n.shouldCompareHashes&&this._lastChangedAppStateHash===r))return this._lastChangedAppStateHash=r,i}detectChangedElements(t,n={shouldCompareHashes:!1}){if(this.elements===t)return;const i=new Map;for(const s of Yl(this.elements))t.get(s.id)||i.set(s.id,Ie(s,{isDeleted:!0}));for(const s of Yl(t)){const o=this.elements.get(s.id);if(!o||o.version<s.version){if(Et(s)&&!Ln(s))continue;i.set(s.id,s)}}if(!i.size)return;const r=TH(i);if(!(n.shouldCompareHashes&&this._lastChangedElementsHash===r))return this._lastChangedElementsHash=r,i}createElementsSnapshot(t){const n=new Map;for(const i of Yl(this.elements))n.set(i.id,i);for(const i of Yl(t))n.set(i.id,Vc(i));return n}}const Qz="__observedAppState",Ice=()=>({name:null,editingGroupId:null,viewBackgroundColor:je.white,selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null,croppingElementId:null,activeLockedId:null,lockedMultiSelections:{}}),ch=e=>{const t={name:e.name,editingGroupId:e.editingGroupId,viewBackgroundColor:e.viewBackgroundColor,selectedElementIds:e.selectedElementIds,selectedGroupIds:e.selectedGroupIds,croppingElementId:e.croppingElementId,activeLockedId:e.activeLockedId,lockedMultiSelections:e.lockedMultiSelections,selectedLinearElement:e.selectedLinearElement?{elementId:e.selectedLinearElement.elementId,isEditing:!!e.selectedLinearElement.isEditing}:null};return Reflect.defineProperty(t,Qz,{value:!0,enumerable:!1}),t},hM=e=>!!Reflect.get(e,Qz),Jz="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function jf(e,t,n){const i=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===i||t&&t.slice(-1)===i)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||i)===t[o];)o++;if(o>0)return t.slice(0,o)+jf(e.slice(o),t.slice(o),n)}const r=e?n.indexOf(e[0]):0,s=t!=null?n.indexOf(t[0]):n.length;if(s-r>1){const o=Math.round(.5*(r+s));return n[o]}else return t&&t.length>1?t.slice(0,1):n[r]+jf(e.slice(1),null,n)}function eH(e){if(e.length!==tH(e[0]))throw new Error("invalid integer part of order key: "+e)}function tH(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function Bm(e){const t=tH(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function gM(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=Bm(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function mM(e,t){eH(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])+1;o===t.length?i[s]=t[0]:(i[s]=t[o],r=!1)}if(r){if(n==="Z")return"a"+t[0];if(n==="z")return null;const s=String.fromCharCode(n.charCodeAt(0)+1);return s>"a"?i.push(t[0]):i.pop(),s+i.join("")}else return n+i.join("")}function Sce(e,t){eH(e);const[n,...i]=e.split("");let r=!0;for(let s=i.length-1;r&&s>=0;s--){const o=t.indexOf(i[s])-1;o===-1?i[s]=t.slice(-1):(i[s]=t[o],r=!1)}if(r){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?i.push(t.slice(-1)):i.pop(),s+i.join("")}else return n+i.join("")}function sf(e,t,n=Jz){if(e!=null&&gM(e,n),t!=null&&gM(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const l=Bm(t),c=t.slice(l.length);if(l==="A"+n[0].repeat(26))return l+jf("",c,n);if(l<t)return l;const u=Sce(l,n);if(u==null)throw new Error("cannot decrement any more");return u}if(t==null){const l=Bm(e),c=e.slice(l.length),u=mM(l,n);return u??l+jf(c,null,n)}const i=Bm(e),r=e.slice(i.length),s=Bm(t),o=t.slice(s.length);if(i===s)return i+jf(r,o,n);const a=mM(i,n);if(a==null)throw new Error("cannot increment any more");return a<t?a:i+jf(r,null,n)}function V4(e,t,n,i=Jz){if(n===0)return[];if(n===1)return[sf(e,t,i)];if(t==null){let o=sf(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=sf(o,t,i),a.push(o);return a}if(e==null){let o=sf(e,t,i);const a=[o];for(let l=0;l<n-1;l++)o=sf(e,o,i),a.push(o);return a.reverse(),a}const r=Math.floor(n/2),s=sf(e,t,i);return[...V4(e,s,r,i),s,...V4(s,t,n-r-1,i)]}class xce extends Error{constructor(){super(...arguments);F(this,"code","ELEMENT_HAS_INVALID_INDEX")}}const A_=(e,{shouldThrow:t=!1,includeBoundTextValidation:n=!1,ignoreLogs:i,reconciliationContext:r})=>{const s=[],o=l=>`${l==null?void 0:l.index}:${l==null?void 0:l.id}:${l==null?void 0:l.type}:${l==null?void 0:l.isDeleted}:${l==null?void 0:l.version}:${l==null?void 0:l.versionNonce}`,a=e.map(l=>l.index);for(const[l,c]of a.entries()){const u=a[l-1],d=a[l+1];if($4(c,u,d)||s.push(`Fractional indices invariant has been compromised: "${o(e[l-1])}", "${o(e[l])}", "${o(e[l+1])}"`),n&&Di(e[l])){const f=e[l],h=Le(f,ve(e));h&&h.index<=f.index&&s.push(`Fractional indices invariant for bound elements has been compromised: "${o(h)}", "${o(f)}"`)}}if(s.length){const l=new xce,c=[];if(r&&(c.push("Additional reconciliation context:"),c.push(r.localElements.map(u=>o(u))),c.push(r.remoteElements.map(u=>o(u)))),i||console.error(s.join(`

`),l.stack,e.map(u=>o(u)),...c),t)throw l}},M_=e=>e.sort((t,n)=>pM(t)&&pM(n)?t.index<n.index?-1:t.index>n.index?1:t.id<n.id?-1:1:1),lo=(e,t)=>{try{const n=ve(e),i=Ace(e,t),r=R_(e,i),s=e.map(o=>{const a=r.get(o);return a?{...o,index:a.index}:o});A_(s,{includeBoundTextValidation:!1,shouldThrow:!0,ignoreLogs:!0});for(const[o,{index:a}]of r)_i(o,n,{index:a})}catch{ou(e)}return e},ou=e=>{const t=ve(e),n=nH(e),i=R_(e,n);for(const[r,{index:s}]of i)_i(r,t,{index:s});return e},Cce=e=>{const t=ve(e),n=nH(e),i=R_(e,n);for(const[r,{index:s}]of i)t.set(r.id,Ie(r,{index:s}));return t},Ace=(e,t)=>{const n=[];let i=0;for(;i<e.length;)if(t.has(e[i].id)){const r=[i-1,i];for(;++i<e.length&&t.has(e[i].id);)r.push(i);r.push(i),n.push(r)}else i++;return n},nH=e=>{const t=[];let n,i,r=-1,s=0;const o=c=>{var f;const u=e[r]?e[r].index:void 0,d=(f=e[c-1])==null?void 0:f.index;return!u&&d||u&&d&&d>u?[d,c-1]:[u,r]},a=c=>{var f;const u=e[s]?e[s].index:void 0;if(u&&c<s)return[u,s];let d=s;for(;++d<e.length;){const h=(f=e[d])==null?void 0:f.index;if(!u&&h||u&&h&&h>u)return[h,d]}return[void 0,d]};let l=0;for(;l<e.length;){const c=e[l].index;if([n,r]=o(l),[i,s]=a(l),$4(c,n,i))l++;else{const u=[r,l];for(;++l<e.length;){const d=e[l].index,[f,h]=o(l),[m,p]=a(l);if($4(d,f,m))break;[n,r]=[f,h],[i,s]=[m,p],u.push(l)}u.push(s),t.push(u)}}return t},$4=(e,t,n)=>e?t&&n?t<e&&e<n:!t&&n?e<n:t&&!n?t<e:!!e:!1,R_=(e,t)=>{var i,r;const n=new Map;for(const s of t){const o=s.shift(),a=s.pop(),l=V4((i=e[o])==null?void 0:i.index,(r=e[a])==null?void 0:r.index,s.length);for(let c=0;c<s.length;c++){const u=e[s[c]];n.set(u,{index:l[c]})}}return n},pM=e=>!!e.index;var iH="Expected a function",UM=NaN,Mce="[object Symbol]",Rce=/^\s+|\s+$/g,kce=/^[-+]0x[0-9a-f]+$/i,Lce=/^0b[01]+$/i,Dce=/^0o[0-7]+$/i,Nce=parseInt,Oce=typeof Na=="object"&&Na&&Na.Object===Object&&Na,Pce=typeof self=="object"&&self&&self.Object===Object&&self,Fce=Oce||Pce||Function("return this")(),Bce=Object.prototype,zce=Bce.toString,Hce=Math.max,Vce=Math.min,j8=function(){return Fce.Date.now()};function $ce(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(iH);t=bM(t)||0,C6(n)&&(u=!!n.leading,d="maxWait"in n,s=d?Hce(bM(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(x){var _=i,T=r;return i=r=void 0,c=x,o=e.apply(T,_),o}function m(x){return c=x,a=setTimeout(b,t),u?h(x):o}function p(x){var _=x-l,T=x-c,A=t-_;return d?Vce(A,s-T):A}function U(x){var _=x-l,T=x-c;return l===void 0||_>=t||_<0||d&&T>=s}function b(){var x=j8();if(U(x))return y(x);a=setTimeout(b,p(x))}function y(x){return a=void 0,f&&i?h(x):(i=r=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function v(){return a===void 0?o:y(j8())}function I(){var x=j8(),_=U(x);if(i=arguments,r=this,l=x,_){if(a===void 0)return m(l);if(d)return a=setTimeout(b,t),h(l)}return a===void 0&&(a=setTimeout(b,t)),o}return I.cancel=w,I.flush=v,I}function Gce(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(iH);return C6(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),$ce(e,t,{leading:i,maxWait:t,trailing:r})}function C6(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Xce(e){return!!e&&typeof e=="object"}function jce(e){return typeof e=="symbol"||Xce(e)&&zce.call(e)==Mce}function bM(e){if(typeof e=="number")return e;if(jce(e))return UM;if(C6(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=C6(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Rce,"");var n=Lce.test(e);return n||Dce.test(e)?Nce(e.slice(2),n?2:8):kce.test(e)?UM:+e}var Yce=Gce;const Fo=El(Yce),yM=e=>{const t=new Map,n=[];for(const i of e)i.isDeleted||(n.push(i),t.set(i.id,i));return{elementsMap:t,elements:n}},Wce=Fo(e=>{window!=null&&window.DEBUG_FRACTIONAL_INDICES&&A_(e,{shouldThrow:Yse(),includeBoundTextValidation:!0})},1e3*60,{leading:!0,trailing:!1}),Kce=e=>{const t=["includeBoundTextElement","includeElementsInFrames"];let n="";for(const i of t)n+=`${i}:${e[i]?"1":"0"}`;return n};class A6{constructor(t=null,n){F(this,"callbacks",new Set);F(this,"nonDeletedElements",[]);F(this,"nonDeletedElementsMap",Zo(new Map));F(this,"elements",[]);F(this,"nonDeletedFramesLikes",[]);F(this,"frames",[]);F(this,"elementsMap",Zo(new Map));F(this,"selectedElementsCache",{selectedElementIds:null,elements:null,cache:new Map});F(this,"sceneNonce");F(this,"insertElement",t=>{const n=t.frameId?this.getElementIndex(t.frameId):this.elements.length;this.insertElementAtIndex(t,n)});F(this,"insertElements",t=>{var i;if(!t.length)return;const n=(i=t[0])!=null&&i.frameId?this.getElementIndex(t[0].frameId):this.elements.length;this.insertElementsAtIndex(t,n)});F(this,"getContainerElement",t=>t&&t.containerId&&this.getElement(t.containerId)||null);F(this,"getElementsFromId",t=>{const n=this.getNonDeletedElementsMap(),i=n.get(t);return i?[i]:At(n,t)});t&&this.replaceAllElements(t,n)}getSceneNonce(){return this.sceneNonce}getNonDeletedElementsMap(){return this.nonDeletedElementsMap}getElementsIncludingDeleted(){return this.elements}getElementsMapIncludingDeleted(){return this.elementsMap}getNonDeletedElements(){return this.nonDeletedElements}getFramesIncludingDeleted(){return this.frames}getSelectedElements(t){const n=Kce(t),i=(t==null?void 0:t.elements)||this.nonDeletedElements;if(this.selectedElementsCache.elements===i&&this.selectedElementsCache.selectedElementIds===t.selectedElementIds){const s=this.selectedElementsCache.cache.get(n);if(s)return s}else(t==null?void 0:t.elements)==null&&this.selectedElementsCache.cache.clear();const r=Ge(i,{selectedElementIds:t.selectedElementIds},t);return(t==null?void 0:t.elements)==null&&(this.selectedElementsCache.selectedElementIds=t.selectedElementIds,this.selectedElementsCache.elements=this.nonDeletedElements,this.selectedElementsCache.cache.set(n,r)),r}getNonDeletedFramesLikes(){return this.nonDeletedFramesLikes}getElement(t){return this.elementsMap.get(t)||null}getNonDeletedElement(t){const n=this.getElement(t);return n&&Q4(n)?n:null}mapElements(t){let n=!1;const i=this.elements.map(r=>{const s=t(r);return s!==r&&(n=!0),s});return n&&this.replaceAllElements(i),n}replaceAllElements(t,n){const i=jse(t),r=[];n!=null&&n.skipValidation||Wce(i),this.elements=ou(i),this.elementsMap.clear(),this.elements.forEach(o=>{we(o)&&r.push(o),this.elementsMap.set(o.id,o)});const s=yM(this.elements);this.nonDeletedElements=s.elements,this.nonDeletedElementsMap=s.elementsMap,this.frames=r,this.nonDeletedFramesLikes=yM(this.frames).elements,this.triggerUpdate()}triggerUpdate(){this.sceneNonce=Ps();for(const t of Array.from(this.callbacks))t()}onUpdate(t){if(this.callbacks.has(t))throw new Error;return this.callbacks.add(t),()=>{if(!this.callbacks.has(t))throw new Error;this.callbacks.delete(t)}}destroy(){this.elements=[],this.nonDeletedElements=[],this.nonDeletedFramesLikes=[],this.frames=[],this.elementsMap.clear(),this.selectedElementsCache.selectedElementIds=null,this.selectedElementsCache.elements=null,this.selectedElementsCache.cache.clear(),this.callbacks.clear()}insertElementAtIndex(t,n){if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),t,...this.elements.slice(n)];lo(i,ve([t])),this.replaceAllElements(i)}insertElementsAtIndex(t,n){if(!t.length)return;if(!Number.isFinite(n)||n<0)throw new Error("insertElementAtIndex can only be called with index >= 0");const i=[...this.elements.slice(0,n),...t,...this.elements.slice(n)];lo(i,ve(t)),this.replaceAllElements(i)}getElementIndex(t){return this.elements.findIndex(n=>n.id===t)}mutateElement(t,n,i={informMutation:!0,isDragging:!1}){const r=this.getNonDeletedElementsMap(),{version:s}=t,{version:o}=_i(t,r,n,i);return this.elementsMap.has(t.id)&&s!==o&&i.informMutation&&this.triggerUpdate(),t}}class De{constructor(t,n){this.deleted=t,this.inserted=n}static create(t,n,i,r){const s=i&&r!=="inserted"?i(t,"deleted"):t,o=i&&r!=="deleted"?i(n,"inserted"):n;return new De(s,o)}static calculate(t,n,i,r){if(t===n)return De.empty();const s={},o={};for(const c of this.getDifferences(t,n))s[c]=t[c],o[c]=n[c];const[a,l]=r?r(s,o):[s,o];return De.create(a,l,i)}static empty(){return new De({},{})}static isEmpty(t){return!Object.keys(t.deleted).length&&!Object.keys(t.inserted).length}static merge(t,n,i=De.empty()){return De.create({...t.deleted,...n.deleted,...i.deleted},{...t.inserted,...n.inserted,...i.inserted})}static mergeObjects(t,n,i={}){const r={...t};for(const s of Object.keys(i))delete r[s];return{...r,...n}}static mergeArrays(t,n,i,r){return Object.values(De.mergeObjects(Ua(t??[],r),Ua(n??[],r),Ua(i??[],r)))}static diffObjects(t,n,i,r){if(!t[i]&&!n[i])return;const s=t[i]!==null&&typeof t[i]=="object",o=n[i]!==null&&typeof n[i]=="object";if(s||o){const a=t[i]??{},l=n[i]??{},c=De.getLeftDifferences(a,l).reduce((d,f)=>(d[f]=r(a[f]),d),{}),u=De.getRightDifferences(a,l).reduce((d,f)=>(d[f]=r(l[f]),d),{});Object.keys(c).length||Object.keys(u).length?(Reflect.set(t,i,c),Reflect.set(n,i,u)):(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}else t[i]===n[i]&&(Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i))}static diffArrays(t,n,i,r){if(!(!t[i]&&!n[i])&&(Array.isArray(t[i])||Array.isArray(n[i]))){const s=Array.isArray(t[i])?t[i]:[],o=Array.isArray(n[i])?n[i]:[],a=Ua(De.getLeftDifferences(Ua(s,r),Ua(o,r)),c=>c),l=Ua(De.getRightDifferences(Ua(s,r),Ua(o,r)),c=>c);if(Object.keys(a).length||Object.keys(l).length){const c=s.filter(d=>a[r?r(d):String(d)]),u=o.filter(d=>l[r?r(d):String(d)]);Reflect.set(t,i,c),Reflect.set(n,i,u)}else Reflect.deleteProperty(t,i),Reflect.deleteProperty(n,i)}}static isLeftDifferent(t,n,i=!1){return!!this.distinctKeysIterator("left",t,n,i).next().value}static isRightDifferent(t,n,i=!1){return!!this.distinctKeysIterator("right",t,n,i).next().value}static isInnerDifferent(t,n,i=!1){return!!!!this.distinctKeysIterator("inner",t,n,i).next().value}static isDifferent(t,n,i=!1){return!!!!this.distinctKeysIterator("full",t,n,i).next().value}static getLeftDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("left",t,n,i)).sort()}static getRightDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("right",t,n,i)).sort()}static getInnerDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("inner",t,n,i)).sort()}static getDifferences(t,n,i=!1){return Array.from(this.distinctKeysIterator("full",t,n,i)).sort()}static*distinctKeysIterator(t,n,i,r=!1){if(n===i)return;let s=[];t==="left"?s=Object.keys(n):t==="right"?s=Object.keys(i):t==="inner"?s=Object.keys(n).filter(o=>o in i):t==="full"?s=Array.from(new Set([...Object.keys(n),...Object.keys(i)])):Ko(t,`Unknown distinctKeysIterator's join param "${t}"`,!0);for(const o of s){const a=n[o],l=i[o];if(a!==l){if(!r&&typeof a=="object"&&typeof l=="object"&&a!==null&&l!==null&&Ki(a,l))continue;yield o}}}}class An{constructor(t){this.delta=t}static create(t){return new An(t)}static calculate(t,n){const i=De.calculate(t,n,An.orderAppStateKeys,An.postProcess);return new An(i)}static restore(t){const{delta:n}=t;return new An(n)}static empty(){return new An(De.create({},{}))}inverse(){const t=De.create(this.delta.inserted,this.delta.deleted);return new An(t)}squash(t){if(t.isEmpty())return this;const n=De.mergeObjects(this.delta.deleted.selectedElementIds??{},t.delta.deleted.selectedElementIds??{}),i=De.mergeObjects(this.delta.inserted.selectedElementIds??{},t.delta.inserted.selectedElementIds??{}),r=De.mergeObjects(this.delta.deleted.selectedGroupIds??{},t.delta.deleted.selectedGroupIds??{}),s=De.mergeObjects(this.delta.inserted.selectedGroupIds??{},t.delta.inserted.selectedGroupIds??{}),o=De.mergeObjects(this.delta.deleted.lockedMultiSelections??{},t.delta.deleted.lockedMultiSelections??{}),a=De.mergeObjects(this.delta.inserted.lockedMultiSelections??{},t.delta.inserted.lockedMultiSelections??{}),l={},c={};return(Object.keys(n).length||Object.keys(i).length)&&(c.selectedElementIds=n,l.selectedElementIds=i),(Object.keys(r).length||Object.keys(s).length)&&(c.selectedGroupIds=r,l.selectedGroupIds=s),(Object.keys(o).length||Object.keys(a).length)&&(c.lockedMultiSelections=o,l.lockedMultiSelections=a),this.delta=De.merge(this.delta,t.delta,De.create(c,l)),this}applyTo(t,n){try{const{selectedElementIds:i={},selectedGroupIds:r={},lockedMultiSelections:s={}}=this.delta.deleted,{selectedElementIds:o={},selectedGroupIds:a={},lockedMultiSelections:l={},selectedLinearElement:c,...u}=this.delta.inserted,d=De.mergeObjects(t.selectedElementIds,o,i),f=De.mergeObjects(t.selectedGroupIds,a,r),h=De.mergeObjects(t.lockedMultiSelections,l,s),m=c&&n.has(c.elementId)?new Ue(n.get(c.elementId),n,c.isEditing):null,p={...t,...u,selectedElementIds:d,selectedGroupIds:f,lockedMultiSelections:h,selectedLinearElement:typeof c<"u"?m:t.selectedLinearElement},U=this.filterInvisibleChanges(t,p,n);return[p,U]}catch(i){return console.error("Couldn't apply appstate change",i),[t,!1]}}isEmpty(){return De.isEmpty(this.delta)}filterInvisibleChanges(t,n,i){const r=ch(t),s=ch(n),o=De.isRightDifferent(An.stripElementsProps(r),An.stripElementsProps(s)),a=De.isRightDifferent(An.stripStandaloneProps(r),An.stripStandaloneProps(s));if(!o&&!a)return!1;const l={value:o};if(a){const c=De.getRightDifferences(An.stripStandaloneProps(r),An.stripStandaloneProps(s));let u=new Set;(c.includes("editingGroupId")||c.includes("selectedGroupIds"))&&(u=Fle(i));for(const d of c)switch(d){case"selectedElementIds":n[d]=An.filterSelectedElements(n[d],i,l);break;case"selectedGroupIds":n[d]=An.filterSelectedGroups(n[d],u,l);break;case"croppingElementId":{const y=n[d];if(!y)l.value=!0;else{const w=i.get(y);w&&!w.isDeleted?l.value=!0:n[d]=null}break}case"editingGroupId":const f=n[d];f?u.has(f)?l.value=!0:n[d]=null:l.value=!0;break;case"selectedLinearElement":const h=n[d];if(!h)l.value=!0;else{const y=i.get(h.elementId);y&&!y.isDeleted?l.value=!0:n[d]=null}break;case"lockedMultiSelections":const m=t[d]||{},p=n[d]||{};Ki(m,p)||(l.value=!0);break;case"activeLockedId":const U=t[d]||null,b=n[d]||null;U!==b&&(l.value=!0);break;default:Ko(d,`Unknown ObservedElementsAppState's key "${d}"`,!0)}}return l.value}static filterSelectedElements(t,n,i){const r=Object.keys(t);if(!r.length)return i.value=!0,t;const s={...t};for(const o of r){const a=n.get(o);a&&!a.isDeleted?i.value=!0:delete s[o]}return s}static filterSelectedGroups(t,n,i){if(!Object.keys(t).length)return i.value=!0,t;const s={...t};for(const o of Object.keys(s))n.has(o)?i.value=!0:delete s[o];return s}static stripElementsProps(t){const{editingGroupId:n,selectedGroupIds:i,selectedElementIds:r,selectedLinearElement:s,croppingElementId:o,lockedMultiSelections:a,activeLockedId:l,...c}=t;return c}static stripStandaloneProps(t){const{name:n,viewBackgroundColor:i,...r}=t;return r}static postProcess(t,n){try{De.diffObjects(t,n,"selectedElementIds",i=>!0),De.diffObjects(t,n,"selectedGroupIds",i=>i??!1),De.diffObjects(t,n,"lockedMultiSelections",i=>i??{})}catch{console.error("Couldn't postprocess appstate change deltas.")}finally{return[t,n]}}static orderAppStateKeys(t){const n={};for(const i of Object.keys(t).sort())n[i]=t[i];return n}}const bt=class bt{constructor(t,n,i){this.added=t,this.removed=n,this.updated=i}static create(t,n,i,r={shouldRedistribute:!1}){let s;if(r.shouldRedistribute){const o={},a={},l={},c=[...Object.entries(t),...Object.entries(n),...Object.entries(i)];for(const[u,d]of c)this.satisfiesAddition(d)?o[u]=d:this.satisfiesRemoval(d)?a[u]=d:l[u]=d;s=new bt(o,a,l)}else s=new bt(t,n,i);return s}static restore(t){const{added:n,removed:i,updated:r}=t;return bt.create(n,i,r)}static validate(t,n,i){for(const[r,s]of Object.entries(t[n]))if(!this.satisfiesCommmonInvariants(s)||!this.satisfiesUniqueInvariants(t,r)||!i(s))throw console.error(`Broken invariant for "${n}" delta, element "${r}", delta:`,s),new Error(`ElementsDelta invariant broken for element "${r}".`)}static calculate(t,n){if(t===n)return bt.empty();const i={},r={},s={};for(const o of t.values())if(!n.get(o.id)){const l={...o},c={isDeleted:!0,version:o.version+1,versionNonce:Ps()},u=De.create(l,c,bt.stripIrrelevantProps);o.isDeleted?s[o.id]=u:r[o.id]=u}for(const o of n.values()){const a=t.get(o.id);if(!a){const l={isDeleted:!0,version:o.version-1,versionNonce:Ps()},c={...o},u=De.create(l,c,bt.stripIrrelevantProps);o.isDeleted?s[o.id]=u:i[o.id]=u;continue}if(a.versionNonce!==o.versionNonce){const l=De.calculate(a,o,bt.stripIrrelevantProps,bt.postProcess);if(typeof a.isDeleted=="boolean"&&typeof o.isDeleted=="boolean"&&a.isDeleted!==o.isDeleted){a.isDeleted&&!o.isDeleted?i[o.id]=l:r[o.id]=l;continue}s[o.id]=l}}return bt.create(i,r,s)}static empty(){return bt.create({},{},{})}inverse(){const t=s=>{const o={};for(const[a,{inserted:l,deleted:c}]of Object.entries(s))o[a]=De.create({...l},{...c});return o},n=t(this.added),i=t(this.removed),r=t(this.updated);return bt.create(i,n,r)}isEmpty(){return Object.keys(this.added).length===0&&Object.keys(this.removed).length===0&&Object.keys(this.updated).length===0}applyLatestChanges(t,n,i){const r=(c,u)=>(d,f)=>{let h;switch(f){case"deleted":h=c;break;case"inserted":h=u;break}if(!h)return console.error("Element not found when trying to apply latest changes"),d;const m={};for(const p of Object.keys(d))switch(p){case"boundElements":m[p]=d[p];break;default:m[p]=h[p]}return m},s=c=>{const u={};for(const[d,f]of Object.entries(c)){const h=t.get(d),m=n.get(d);let p=null;h||m?p=De.create(f.deleted,f.inserted,r(h,m),i):p=f,De.isInnerDifferent(p.deleted,p.inserted)&&(u[d]=p)}return u},o=s(this.added),a=s(this.removed),l=s(this.updated);return bt.create(o,a,l,{shouldRedistribute:!0})}applyTo(t,n=Po.empty().elements,i){let r=new Map(t),s;const o={containsVisibleDifference:!1,containsZindexDifference:!1,applyDirection:void 0};try{const a=bt.createApplier(t,r,n,o,i),l=a(this.added),c=a(this.removed),u=a(this.updated),d=this.resolveConflicts(t,r,o.applyDirection);s=new Map([...l,...c,...u,...d])}catch(a){return console.error("Couldn't apply elements delta",a),[t,!0]}try{r=bt.reorderElements(r,s,o),bt.redrawElements(r,s)}catch(a){console.error("Couldn't mutate elements after applying elements change",a)}finally{return[r,o.containsVisibleDifference]}}squash(t){if(t.isEmpty())return this;const{added:n,removed:i,updated:r}=t,s=(o,a)=>{const l=De.mergeArrays(o.deleted.boundElements??[],a.deleted.boundElements??[],void 0,u=>u.id)??[],c=De.mergeArrays(o.inserted.boundElements??[],a.inserted.boundElements??[],void 0,u=>u.id)??[];if(!(!l.length&&!c.length))return De.create({boundElements:l},{boundElements:c})};for(const[o,a]of Object.entries(n)){const l=this.added[o]??this.removed[o]??this.updated[o];if(!l)this.added[o]=a;else{const c=s(l,a);delete this.removed[o],delete this.updated[o],this.added[o]=De.merge(l,a,c)}}for(const[o,a]of Object.entries(i)){const l=this.added[o]??this.removed[o]??this.updated[o];if(!l)this.removed[o]=a;else{const c=s(l,a);delete this.added[o],delete this.updated[o],this.removed[o]=De.merge(l,a,c)}}for(const[o,a]of Object.entries(r)){const l=this.added[o]??this.removed[o]??this.updated[o];if(!l)this.updated[o]=a;else{const c=s(l,a),u=De.merge(l,a,c);l===this.added[o]?this.added[o]=u:l===this.removed[o]?this.removed[o]=u:this.updated[o]=u}}return this}static applyDelta(t,n,i,r){var o,a,l;const s={};for(const c of Object.keys(n.inserted)){if(c==="boundElements"||(o=r==null?void 0:r.excludedProperties)!=null&&o.has(c))continue;const u=n.inserted[c];Reflect.set(s,c,u)}if((a=n.deleted.boundElements)!=null&&a.length||(l=n.inserted.boundElements)!=null&&l.length){const c=De.mergeArrays(t.boundElements,n.inserted.boundElements,n.deleted.boundElements,u=>u.id);Object.assign(s,{boundElements:c})}if(!i.containsVisibleDifference){const{index:c,...u}=s,d=bt.checkForVisibleDifference(t,u);i.containsVisibleDifference=d}return i.containsZindexDifference||(i.containsZindexDifference=n.deleted.index!==n.inserted.index),Ie(t,s,!0)}static checkForVisibleDifference(t,n){return t.isDeleted&&n.isDeleted!==!1?!1:t.isDeleted&&n.isDeleted===!1||t.isDeleted===!1&&n.isDeleted?!0:De.isRightDifferent(t,n)}resolveConflicts(t,n,i="forward"){const r=new Map,s=(a,l)=>{const c=n.get(a.id);if(!c)return;const u=t.get(a.id),d=i==="forward"?c.version+1:c.version-1,f=l;let h;u===c?h=Ie(c,{...f,version:d},!0):h=_i(c,n,{...f,version:(u==null?void 0:u.version)!==c.version?c.version:d}),r.set(h.id,h),n.set(h.id,h)};for(const a of Object.keys(this.removed))bt.unbindAffected(t,n,a,s);for(const a of Object.keys(this.added))bt.rebindAffected(t,n,a,s);for(const[a]of Array.from(Object.entries(this.updated)).filter(([l,c])=>Object.keys({...c.deleted,...c.inserted}).find(u=>_le.has(u)))){const l=n.get(a);!l||l.isDeleted||bt.rebindAffected(t,n,a,s)}const o=new Map(Array.from(t).filter(([a])=>r.has(a)));return this.squash(bt.calculate(o,r)),r}static unbindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);Gf.unbindAffected(n,s(),r),Gf.unbindAffected(n,o(),r),Xf.unbindAffected(n,s(),r),Xf.unbindAffected(n,o(),r)}static rebindAffected(t,n,i,r){const s=()=>t.get(i),o=()=>n.get(i);Gf.unbindAffected(n,s(),r),Gf.rebindAffected(n,o(),r),Xf.unbindAffected(n,s(),(a,l)=>{ge(a)&&r(a,l)}),Xf.rebindAffected(n,o(),r)}static redrawElements(t,n){try{const i=new A6(t,{skipValidation:!0});bt.redrawTextBoundingBoxes(i,n),bt.redrawBoundArrows(i,n)}catch(i){console.error("Couldn't redraw elements",i)}finally{return t}}static redrawTextBoundingBoxes(t,n){const i=t.getNonDeletedElementsMap(),r=new Map;for(const s of n.values()){if(Lt(s)){const{containerId:o}=s,a=o?i.get(o):void 0;a&&r.set(a.id,{container:a,boundText:s})}if(Di(s)){const o=Qo(s),a=o?i.get(o):void 0;a&&r.set(s.id,{container:s,boundText:a})}}for(const{container:s,boundText:o}of r.values())s.isDeleted||o.isDeleted||Qi(o,s,t)}static redrawBoundArrows(t,n){for(const i of n.values())!i.isDeleted&&os(i)&&fr(i,t,{changedElements:n})}static reorderElements(t,n,i){if(!i.containsZindexDifference)return t;const r=Array.from(t.values()),s=M_([...r]),o=De.getRightDifferences(r,s,!0).reduce((a,l)=>{const c=r[Number(l)];return c&&n.has(c.id)&&a.set(c.id,c),a},new Map);return!i.containsVisibleDifference&&o.size&&(i.containsVisibleDifference=!0),ve(lo(s,o))}static postProcess(t,n){try{De.diffArrays(t,n,"boundElements",s=>s.id);const i=t.points??[],r=n.points??[];De.isDifferent(i,r)||(Reflect.deleteProperty(t,"points"),Reflect.deleteProperty(n,"points"))}catch{console.error("Couldn't postprocess elements delta.")}finally{return[t,n]}}static stripIrrelevantProps(t){const{id:n,updated:i,...r}=t;return r}};F(bt,"satisfiesAddition",({deleted:t,inserted:n})=>t.isDeleted===!0&&!n.isDeleted),F(bt,"satisfiesRemoval",({deleted:t,inserted:n})=>!t.isDeleted&&n.isDeleted===!0),F(bt,"satisfiesUpdate",({deleted:t,inserted:n})=>!!t.isDeleted==!!n.isDeleted),F(bt,"satisfiesCommmonInvariants",({deleted:t,inserted:n})=>!!(Number.isInteger(t.version)&&Number.isInteger(n.version)&&t.version>=0&&n.version>=0&&t.version!==n.version)),F(bt,"satisfiesUniqueInvariants",(t,n)=>{const{added:i,removed:r,updated:s}=t;return[i[n],r[n],s[n]].filter(Boolean).length===1}),F(bt,"createApplier",(t,n,i,r,s)=>o=>{const a=bt.createGetter(n,i,r);return Object.entries(o).reduce((l,[c,u])=>{const d=a(c,u.inserted);if(d){const f=bt.applyDelta(d,u,r,s);if(n.set(f.id,f),l.set(f.id,f),!r.applyDirection){const h=t.get(c);h&&(r.applyDirection=h.version>f.version?"backward":"forward")}}return l},new Map)}),F(bt,"createGetter",(t,n,i)=>(r,s)=>{let o=t.get(r);return o||(o=n.get(r),o?(i.containsZindexDifference=!0,(!s.isDeleted||s.isDeleted&&!o.isDeleted)&&(i.containsVisibleDifference=!0)):o=Ie({id:r,version:1},{...s})),o});let Au=bt;const Zce=(e,t,n,i)=>{const[r,s,o,a]=n.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],l=Ms(e),c=cy(e,t,i).map(h=>[h,Ms(h)]).sort((h,m)=>h[1][s]-m[1][s]);let u=0;for(const h of c)u+=h[1][a];const d=(l[a]-u)/(c.length-1);if(d<0){const h=c.findIndex(b=>b[1][r]===l[r]),m=c.findIndex(b=>b[1][o]===l[o]),p=(c[m][1][s]-c[h][1][s])/(c.length-1);let U=c[h][1][s];return c.flatMap(([b,y],w)=>{const v={x:0,y:0};return w!==h&&w!==m&&(U+=p,v[n.axis]=U-y[s]),b.map(I=>Ie(I,{x:I.x+v.x,y:I.y+v.y}))})}let f=l[r];return c.flatMap(([h,m])=>{const p={x:0,y:0};return p[n.axis]=f-m[r],f+=d,f+=m[a],h.map(U=>Ie(U,{x:U.x+p.x,y:U.y+p.y}))})},qce=(e,t,n,i,r,s)=>{if(t.length===1&&pe(t[0])&&(t[0].startBinding||t[0].endBinding))return;const o=t.filter(d=>{if(pe(d)&&d.startBinding&&d.endBinding){const f=t.find(m=>{var p;return m.id===((p=d.startBinding)==null?void 0:p.elementId)}),h=t.find(m=>{var p;return m.id===((p=d.endBinding)==null?void 0:p.elementId)});return f&&h}return!0}),a=new Set(o),l=o.filter(d=>we(d)).map(d=>d.id);if(l.length>0)for(const d of i.getNonDeletedElements())d.frameId!==null&&l.includes(d.frameId)&&a.add(d);const c=[];for(const d of a){const f=e.originalElements.get(d.id);if(!f)return;c.push(f)}const u=Qce(nt(c),n,r,s);a.forEach(d=>{if(EM(e,d,i,u),!Ce(d)){const f=Le(d,i.getNonDeletedElementsMap());f&&EM(e,f,i,u),fr(d,i,{simultaneouslyUpdated:Array.from(a)})}})},Qce=(e,t,n,i)=>{const[r,s]=e;let o=r+t.x+n.x,a=s+t.y+n.y;if(n.x===0||n.y===0){const[l,c]=Pn(r+t.x,s+t.y,i);n.x===0&&(o=l),n.y===0&&(a=c)}return{x:o-r,y:a-s}},EM=(e,t,n,i)=>{const r=e.originalElements.get(t.id)??t,s=r.x+i.x,o=r.y+i.y;n.mutateElement(t,{x:s,y:o})},Jce=(e,t,n)=>{const[i,r]=nt(e);return[t-i,n-r]},vM=({newElement:e,elementType:t,originX:n,originY:i,x:r,y:s,width:o,height:a,shouldMaintainAspectRatio:l,shouldResizeFromCenter:c,zoom:u,scene:d,widthAspectRatio:f=null,originOffset:h=null,informMutation:m=!0})=>{l&&e.type!=="selection"&&(f?a=o/f:(Math.abs(s-i)>Math.abs(r-n)?{width:o,height:a}=fM(t,a,r<n?-o:o):{width:o,height:a}=fM(t,o,s<i?-a:a),a<0&&(a=-a)));let p=r<n?n-o:n,U=s<i?i-a:i;c&&(o+=o,a+=a,p=n-o/2,U=i-a/2);let b=null;if(ge(e)){a=e.height;const y=r_(pt({fontSize:e.fontSize,fontFamily:e.fontFamily}),e.lineHeight);o=Math.max(o,y),Math.abs(r-n)>_re/u&&(b={autoResize:!1}),U=i,c&&(p=n-o/2)}if(o!==0&&a!==0){let y=null;Et(e)&&(y={initialWidth:o,initialHeight:a}),d.mutateElement(e,{x:p+((h==null?void 0:h.x)??0),y:U+((h==null?void 0:h.y)??0),width:o,height:a,...b,...y},{informMutation:m,isDragging:!1})}},rH=(e,t)=>{const n=window.location.href;try{const i=new URL(n);return i.searchParams.set(qb,e),ns(i.toString())}catch(i){console.error(i)}return ns(n)},sH=(e,t)=>{if(e.length>0&&M6(e)){if(e.length===1)return{id:e[0].id,type:"element"};if(e.length>1){const n=Object.keys(t.selectedGroupIds)[0];return n?{id:n,type:"group"}:{id:e[0].groupIds[0],type:"group"}}}return null},M6=e=>!!(e.length===1||e.length>1&&p_(e)),uh=e=>{try{const t=new URL(e);return t.searchParams.has(qb)&&t.host===window.location.host}catch{return!1}},eue=e=>{try{const{searchParams:t}=new URL(e);if(t.has(qb))return t.get(qb)}catch{}return null},co=(e,{x:t,y:n,strokeColor:i=mn.strokeColor,backgroundColor:r=mn.backgroundColor,fillStyle:s=mn.fillStyle,strokeWidth:o=mn.strokeWidth,strokeStyle:a=mn.strokeStyle,roughness:l=mn.roughness,opacity:c=mn.opacity,width:u=0,height:d=0,angle:f=0,groupIds:h=[],frameId:m=null,index:p=null,roundness:U=null,boundElements:b=null,link:y=null,locked:w=mn.locked,...v})=>((t<-1e6||t>1e6||n<-1e6||n>1e6||u<-1e6||u>1e6||d<-1e6||d>1e6)&&console.error("New element size or position is too large",{x:t,y:n,width:u,height:d,points:v.points}),{id:v.id||mr(),type:e,x:t,y:n,width:u,height:d,angle:f,strokeColor:i,backgroundColor:r,fillStyle:s,strokeWidth:o,strokeStyle:a,roughness:l,opacity:c,groupIds:h,frameId:m,index:p,roundness:U,seed:v.seed??Ps(),version:v.version||1,versionNonce:v.versionNonce??0,isDeleted:!1,boundElements:b,updated:yg(),link:y,locked:w,customData:v.customData}),ta=e=>co(e.type,e),wM=e=>co("embeddable",e),tue=e=>({...co("iframe",e)}),k_=e=>Ie({...co("frame",e),type:"frame",name:(e==null?void 0:e.name)||null},{}),G4=e=>Ie({...co("magicframe",e),type:"magicframe",name:(e==null?void 0:e.name)||null},{}),oH=(e,t)=>({x:e.textAlign==="center"?t.width/2:e.textAlign==="right"?t.width:0,y:e.verticalAlign==="middle"?t.height/2:0}),as=e=>{const t=e.fontFamily||nu,n=e.fontSize||_l,i=e.lineHeight||Fc(t),r=Hh(e.text),s=jn(r,pt({fontFamily:t,fontSize:n}),i),o=e.textAlign||gp,a=e.verticalAlign||Yb,l=oH({textAlign:o,verticalAlign:a},s),c={...co("text",e),text:r,fontSize:n,fontFamily:t,textAlign:o,verticalAlign:a,x:e.x-l.x,y:e.y-l.y,width:s.width,height:s.height,containerId:e.containerId||null,originalText:e.originalText??r,autoResize:e.autoResize??!0,lineHeight:i};return Ie(c,{})},nue=(e,t,n)=>{let{width:i,height:r}=jn(n,pt(e),e.lineHeight);e.autoResize||(i=e.width);const{textAlign:s,verticalAlign:o}=e;let a,l;if(s==="center"&&o===Wr.MIDDLE&&!e.containerId&&e.autoResize){const c=jn(e.text,pt(e),e.lineHeight),u=oH(e,{width:i-c.width,height:r-c.height});a=e.x-u.x,l=e.y-u.y}else{const[c,u,d,f]=He(e,t),[h,m,p,U]=m0(e,i,r,!1),b=(c-h)/2,y=(u-m)/2,w=(d-p)/2,v=(f-U)/2;[a,l]=iue({s:!0,e:s==="center"||s==="left",w:s==="center"||s==="right"},e.x,e.y,e.angle,b,y,w,v)}return{width:i,height:r,x:Number.isFinite(a)?a:e.x,y:Number.isFinite(l)?l:e.y}},iue=(e,t,n,i,r,s,o,a)=>{const l=Math.cos(i),c=Math.sin(i);return e.e&&e.w?t+=r+o:e.e?(t+=r*(1+l),n+=r*c,t+=o*(1-l),n+=o*-c):e.w&&(t+=r*(1-l),n+=r*-c,t+=o*(1+l),n+=o*c),e.n&&e.s?n+=s+a:e.n?(t+=s*c,n+=s*(1-l),t+=a*-c,n+=a*(1+l)):(t+=s*-c,n+=s*(1+l),t+=a*c,n+=a*(1-l)),[t,n]},aH=(e,t,n,i=e.text)=>{if(e.isDeleted)return;(t||!e.autoResize)&&(i=ru(i,pt(e),t?Jo(t,e):e.width));const r=nue(e,n,i);return{text:i,...r}},rue=e=>({...co(e.type,e),points:e.points||[],pressures:e.pressures||[],simulatePressure:e.simulatePressure,lastCommittedPoint:null}),wc=e=>{const t={...co(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:null,endArrowhead:null};return nn(t)?{...t,polygon:e.polygon??!1}:t},dh=e=>e.elbowed?{...co(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!0,fixedSegments:e.fixedSegments||[],startIsSpecial:!1,endIsSpecial:!1}:{...co(e.type,e),points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead||null,endArrowhead:e.endArrowhead||null,elbowed:!1},lH=e=>({...co("image",e),strokeColor:"transparent",status:e.status??"pending",fileId:e.fileId??null,scale:e.scale??[1,1],crop:e.crop??null}),bo=new Map,sue=/^(?:http(?:s)?:\/\/)?(?:www\.)?youtu(?:be\.com|\.be)\/(embed\/|watch\?v=|shorts\/|playlist\?list=|embed\/videoseries\?list=)?([a-zA-Z0-9_-]+)/,oue=/^(?:http(?:s)?:\/\/)?(?:(?:w){3}\.)?(?:player\.)?vimeo\.com\/(?:video\/)?([^?\s]+)(?:\?.*)?$/,aue=/^https:\/\/(?:www\.)?figma\.com/,_M=/^https:\/\/gist\.github\.com\/([\w_-]+)\/([\w_-]+)/,lue=/^<script[\s\S]*?\ssrc=["'](https:\/\/gist\.github\.com\/.*?)\.js["']/i,cue=/^(?:https?:\/\/)?forms\.microsoft\.com\//,TM=/(?:https?:\/\/)?(?:(?:w){3}\.)?(?:twitter|x)\.com\/[^/]+\/status\/(\d+)/,uue=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:twitter|x)\.com\/[^"']*)/i,due=/^https:\/\/(?:www\.)?val\.town\/(v|embed)\/[a-zA-Z_$][0-9a-zA-Z_$]+\.[a-zA-Z_$][0-9a-zA-Z_$]+/,fue=/^<(?:iframe|blockquote)[\s\S]*?\s(?:src|href)=["']([^"']*)["'][\s\S]*?>$/i,IM=/giphy.com\/(?:clips|embed|gifs)\/[a-zA-Z0-9]*?-?([a-zA-Z0-9]+)(?:[^a-zA-Z0-9]|$)/,SM=/^(?:http(?:s)?:\/\/)?(?:www\.)?reddit\.com\/r\/([a-zA-Z0-9_]+)\/comments\/([a-zA-Z0-9_]+)\/([a-zA-Z0-9_]+)\/?(?:\?[^#\s]*)?(?:#[^\s]*)?$/,hue=/^<blockquote[\s\S]*?\shref=["'](https?:\/\/(?:www\.)?reddit\.com\/[^"']*)/i,gue=e=>{let t;try{const o=new URL(e.startsWith("http")?e:`https://${e}`);t=o.searchParams.get("t")||o.searchParams.get("start")}catch{const a=e.match(/[?&#](?:t|start)=([^&#\s]+)/);t=a==null?void 0:a[1]}if(!t)return 0;if(/^\d+$/.test(t))return parseInt(t,10);const n=t.match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(!n)return 0;const[,i="0",r="0",s="0"]=n;return parseInt(i)*3600+parseInt(r)*60+parseInt(s)},X4=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","link.excalidraw.com","gist.github.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","val.town","giphy.com","reddit.com","forms.microsoft.com"]),xM=new Set(["youtube.com","youtu.be","vimeo.com","player.vimeo.com","figma.com","twitter.com","x.com","*.simplepdf.eu","stackblitz.com","reddit.com","forms.microsoft.com"]),T1=e=>`<html><body>${e}</body></html>`,Yf=e=>{if(!e)return null;if(bo.has(e))return bo.get(e);const t=e,n=xM.has(j4(e,xM)||"");let i="generic",r={w:560,h:840};const s=e.match(sue);if(s!=null&&s[2]){const c=gue(t),u=c>0?`&start=${c}`:"",d=e.includes("shorts");switch(i="video",s[1]){case"embed/":case"watch?v=":case"shorts/":e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${u}`;break;case"playlist?list=":case"embed/videoseries?list=":e=`https://www.youtube.com/embed/videoseries?list=${s[2]}&enablejsapi=1${u}`;break;default:e=`https://www.youtube.com/embed/${s[2]}?enablejsapi=1${u}`;break}return r=d?{w:315,h:560}:{w:560,h:315},bo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}}const o=e.match(oue);if(o!=null&&o[1]){const c=o==null?void 0:o[1],u=/^\d+$/.test(c)?void 0:new URIError("Invalid embed link format");return i="video",e=`https://player.vimeo.com/video/${c}?api=1`,r={w:560,h:315},bo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,error:u,sandbox:{allowSameOrigin:n}}}if(e.match(aue))return i="generic",e=`https://www.figma.com/embed?embed_host=share&url=${encodeURIComponent(e)}`,r={w:550,h:550},bo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};const l=e.match(due);if(l)return e=l[1]==="embed"?l[0]:l[0].replace("/v","/embed"),bo.set(t,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}};if(cue.test(e)&&!e.includes("embed=true")&&(e+=e.includes("?")?"&embed=true":"?embed=true"),TM.test(e)){const c=e.match(TM)[1],u=N2(`https://twitter.com/x/status/${c}`),d={type:"document",srcdoc:f=>T1(`<blockquote class="twitter-tweet" data-dnt="true" data-theme="${f}"><a href="${u}"></a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return bo.set(t,d),d}if(SM.test(e)){const[,c,u,d]=e.match(SM),f=N2(`https://reddit.com/r/${c}/comments/${u}/${d}`),h={type:"document",srcdoc:m=>T1(`<blockquote class="reddit-embed-bq" data-embed-theme="${m}"><a href="${f}"></a><br></blockquote><script async="" src="https://embed.reddit.com/widgets.js" charset="UTF-8"><\/script>`),intrinsicSize:{w:480,h:480},sandbox:{allowSameOrigin:n}};return bo.set(t,h),h}if(_M.test(e)){const[,c,u]=e.match(_M),d=N2(`https://gist.github.com/${c}/${u}`),f={type:"document",srcdoc:()=>T1(`
          <script src="${d}.js"><\/script>
          <style type="text/css">
            * { margin: 0px; }
            table, .gist { height: 100%; }
            .gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
          </style>
        `),intrinsicSize:{w:550,h:720},sandbox:{allowSameOrigin:n}};return bo.set(e,f),f}return bo.set(e,{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}),{link:e,intrinsicSize:r,type:i,sandbox:{allowSameOrigin:n}}},cH=e=>{let t;Wl(e)?t="IFrame element":t=!e.link||(e==null?void 0:e.link)===""?"Empty Web-Embed":e.link;const n=Math.max(Math.min(e.width/2,e.width/t.length),e.width/30),i=tt.Helvetica,r=pt({fontSize:n,fontFamily:i});return as({x:e.x+e.width/2,y:e.y+e.height/2,strokeColor:e.strokeColor!=="transparent"?e.strokeColor:"black",backgroundColor:"transparent",fontFamily:i,fontSize:n,text:ru(t,r,e.width-20),textAlign:"center",verticalAlign:Wr.MIDDLE,angle:e.angle??0})},j4=(e,t)=>{try{const{hostname:n}=new URL(e),i=n.replace(/^www\./,"");if(t instanceof Set){if(X4.has(i))return i;const s=i.replace(/^([^.]+)/,"*");return X4.has(s)?s:null}const r=t.replace(/^www\./,"");if(i===r)return r}catch{}return null},mue=e=>{const t=e.match(uue);if(t&&t.length===2)return t[1];const n=e.match(hue);if(n&&n.length===2)return n[1];const i=e.match(lue);if(i&&i.length===2)return i[1];if(IM.test(e))return`https://giphy.com/embed/${IM.exec(e)[1]}`;const r=e.match(fue);return r&&r.length===2?r[1]:e},V2=(e,t)=>{if(!e)return!1;if(t!=null)if(typeof t=="function"){const n=t(e);if(typeof n=="boolean")return n}else{if(typeof t=="boolean")return t;if(t instanceof RegExp)return t.test(e);if(Array.isArray(t)){for(const n of t)if(n instanceof RegExp){if(e.match(n))return!0}else if(j4(e,n))return!0;return!1}}return!!j4(e,X4)},fh=100,Nu=100,CM=e=>{switch(e){case V.ARROW_UP:return"up";case V.ARROW_DOWN:return"down";case V.ARROW_RIGHT:return"right";case V.ARROW_LEFT:return"left";default:return"right"}},uH=(e,t,n,i)=>{const r=[...n.values()].reduce((s,o)=>{var l;let a;if(pe(o)&&(a=o[e==="predecessors"?"startBinding":"endBinding"])&&((l=o[e==="predecessors"?"endBinding":"startBinding"])==null?void 0:l.elementId)===t.id){const c=n.get(a.elementId);if(!c)return s;gn(os(c),"not an ExcalidrawBindableElement");const u=e==="predecessors"?o.points[o.points.length-1]:[0,0],d=c_(t,_a(t,n),[u[0]+o.x,u[1]+o.y]);s.push({relative:c,heading:d})}return s},[]);switch(i){case"up":return r.filter(s=>Gn(s.heading,Js)).map(s=>s.relative);case"down":return r.filter(s=>Gn(s.heading,cr)).map(s=>s.relative);case"right":return r.filter(s=>Gn(s.heading,Vn)).map(s=>s.relative);case"left":return r.filter(s=>Gn(s.heading,ws)).map(s=>s.relative)}},Y4=(e,t,n)=>uH("successors",e,t,n),W4=(e,t,n)=>uH("predecessors",e,t,n),pue=(e,t,n)=>{const i=Nu+e.width;if(n==="up"||n==="down"){const a=fh+e.height,l=e.x,c=e.x+e.width;if(t.every(u=>u.x+u.width<l||u.x>c))return{x:0,y:a*(n==="up"?-1:1)}}else if(n==="right"||n==="left"){const a=e.y,l=e.y+e.height;if(t.every(c=>c.y+c.height<a||c.y>l))return{x:(Nu+e.width)*(n==="left"?-1:1),y:0}}if(n==="up"||n==="down"){const a=fh+e.height,l=(t.length===0,a),c=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*i:t.length/2*i*-1;return n==="up"?{x:c,y:l*-1}:{x:c,y:l}}const r=fh+e.height,s=(t.length===0,Nu+e.width),o=t.length===0?0:(t.length+1)%2===0?(t.length+1)/2*r:t.length/2*r*-1;return n==="left"?{x:s*-1,y:o}:{x:s,y:o}},Uue=(e,t,n,i)=>{const r=i.getNonDeletedElementsMap(),s=Y4(e,r,n),o=W4(e,r,n),a=pue(e,[...s,...o],n),l=ta({type:e.type,x:e.x+a.x,y:e.y+a.y,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});gn(oy(l),"not an ExcalidrawFlowchartNodeElement");const c=dH(e,l,n,t,i);return{nextNode:l,bindingArrow:c}},bue=(e,t,n,i,r)=>{const s=[];for(let o=0;o<r;o++){let a,l;if(n==="left"||n==="right"){const d=fh*(r-1)+r*e.height,f=e.y+e.height/2-d/2;let h=Nu+e.width;n==="left"&&(h*=-1),a=e.x+h;const m=(fh+e.height)*o;l=f+m}else{const d=Nu*(r-1)+r*e.width,f=e.x+e.width/2-d/2;let h=fh+e.height;n==="up"&&(h*=-1),l=e.y+h;const m=(Nu+e.width)*o;a=f+m}const c=ta({type:e.type,x:a,y:l,width:e.width,height:e.height,roundness:e.roundness,roughness:e.roughness,backgroundColor:e.backgroundColor,strokeColor:e.strokeColor,strokeWidth:e.strokeWidth,opacity:e.opacity,fillStyle:e.fillStyle,strokeStyle:e.strokeStyle});gn(oy(c),"not an ExcalidrawFlowchartNodeElement");const u=dH(e,c,n,t,i);s.push(c),s.push(u)}return s},dH=(e,t,n,i,r)=>{let s,o;switch(n){case"up":{s=e.x+e.width/2,o=e.y-6;break}case"down":{s=e.x+e.width/2,o=e.y+e.height+6;break}case"right":{s=e.x+e.width+6,o=e.y+e.height/2;break}case"left":{s=e.x-6,o=e.y+e.height/2;break}}let l,c;switch(n){case"up":{l=t.x+t.width/2-s,c=t.y+t.height-o+6;break}case"down":{l=t.x+t.width/2-s,c=t.y-o-6;break}case"right":{l=t.x-s-6,c=t.y-o+t.height/2;break}case"left":{l=t.x+t.width-s+6,c=t.y-o+t.height/2;break}}const u=dh({type:"arrow",x:s,y:o,startArrowhead:null,endArrowhead:i.currentItemEndArrowhead,strokeColor:e.strokeColor,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,opacity:e.opacity,roughness:e.roughness,points:[S(0,0),S(l,c)],elbowed:!0}),d=r.getNonDeletedElementsMap();ea(u,e,"start",r),ea(u,t,"end",r);const f=new Map;f.set(e.id,e),f.set(t.id,t),f.set(u.id,u),Ue.movePoints(u,r,new Map([[1,{point:u.points[1]}]]));const h=Eg(u,Zo(new Map([...d.entries(),[e.id,e],[t.id,t],[u.id,u]])),{points:u.points});return{...u,...h}};class yue{constructor(){F(this,"isExploring",!1);F(this,"sameLevelNodes",[]);F(this,"sameLevelIndex",0);F(this,"direction",null);F(this,"visitedNodes",new Set)}clear(){this.isExploring=!1,this.sameLevelNodes=[],this.sameLevelIndex=0,this.direction=null,this.visitedNodes.clear()}exploreByDirection(t,n,i){if(!os(t))return null;if(i!==this.direction&&this.clear(),this.visitedNodes.has(t.id)||this.visitedNodes.add(t.id),this.isExploring&&i===this.direction&&this.sameLevelNodes.length>1)return this.sameLevelIndex=(this.sameLevelIndex+1)%this.sameLevelNodes.length,this.sameLevelNodes[this.sameLevelIndex].id;const r=[...Y4(t,n,i),...W4(t,n,i)];if(r.length>0)return this.sameLevelIndex=0,this.isExploring=!0,this.sameLevelNodes=r,this.direction=i,this.visitedNodes.add(r[0].id),r[0].id;if(i===this.direction||!this.isExploring){this.isExploring||this.visitedNodes.add(t.id);const o=["up","right","down","left"].filter(a=>a!==i).map(a=>[...Y4(t,n,a),...W4(t,n,a)]).flat().filter(a=>!this.visitedNodes.has(a.id));for(const a of o)if(!this.visitedNodes.has(a.id))return this.visitedNodes.add(a.id),this.isExploring=!0,this.direction=i,a.id}return null}}class Eue{constructor(){F(this,"isCreatingChart",!1);F(this,"numberOfNodes",0);F(this,"direction","right");F(this,"pendingNodes",null)}createNodes(t,n,i,r){const s=r.getNonDeletedElementsMap();if(i!==this.direction){const{nextNode:o,bindingArrow:a}=Uue(t,n,i,r);this.numberOfNodes=1,this.isCreatingChart=!0,this.direction=i,this.pendingNodes=[o,a]}else{this.numberOfNodes+=1;const o=bue(t,n,i,r,this.numberOfNodes);this.isCreatingChart=!0,this.direction=i,this.pendingNodes=o}if(t.frameId){const o=s.get(t.frameId);gn(o&&nz(o),"not an ExcalidrawFrameElement"),o&&this.pendingNodes.every(a=>Ap([a],o,s)||zc(a,o,s))&&(this.pendingNodes=this.pendingNodes.map(a=>_i(a,s,{frameId:t.frameId})))}}clear(){this.isCreatingChart=!1,this.pendingNodes=null,this.direction=null,this.numberOfNodes=0}}const vue=(e,t)=>{var n,i;for(const[,r]of t)if(r.type==="arrow"&&(((n=r.startBinding)==null?void 0:n.elementId)===e.id||((i=r.endBinding)==null?void 0:i.elementId)===e.id))return!0;return!1},wue=e=>new Promise((t,n)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=r=>{n(r)},i.src=e}),fH=async({fileIds:e,files:t,imageCache:n})=>{const i=new Map,r=new Map;return await Promise.all(e.reduce((s,o)=>{const a=t[o];return a&&!i.has(o)?(i.set(o,!0),s.concat((async()=>{try{if(a.mimeType===Te.binary)throw new Error("Only images can be added to ImageCache");const l=wue(a.dataURL),c={image:l,mimeType:a.mimeType};n.set(o,c);const u=await l;n.set(o,{...c,image:u})}catch{r.set(o,!0)}})())):s},[])),{imageCache:n,updatedFiles:i,erroredFiles:r}},hH=e=>e.filter(t=>Ln(t)),_ue=e=>(e==null?void 0:e.nodeName.toLowerCase())==="svg",AM=e=>{const t=new DOMParser().parseFromString(e,Te.svg),n=t.querySelector("svg");if(t.querySelector("parsererror")||!_ue(n))throw new Error("Invalid SVG");{n.hasAttribute("xmlns")||n.setAttribute("xmlns",st);let r=n.getAttribute("width"),s=n.getAttribute("height");(r!=null&&r.includes("%")||r==="auto")&&(r=null),(s!=null&&s.includes("%")||s==="auto")&&(s=null);const o=n.getAttribute("viewBox");if(!r||!s){if(r=r||"50",s=s||"50",o){const a=o.match(/\d+ +\d+ +(\d+(?:\.\d+)?) +(\d+(?:\.\d+)?)/);a&&([,r,s]=a)}n.setAttribute("width",r),n.setAttribute("height",s)}return o||n.setAttribute("viewBox",`0 0 ${r} ${s}`),n.outerHTML}},MM=(e,t,n,i=50)=>{if(!e||e.length===0)return[];const r=[],s=Array.isArray(e[0])?e:e.map(h=>[h]),o=s.length,a=Math.max(1,Math.ceil(Math.sqrt(o))),l=[];for(let h=0;h<o;h+=a)l.push(s.slice(h,h+a));let c=0;const u=l.map(h=>{let m=0,p=0;const U=h.map(b=>{const[y,w,v,I]=nt(b);return{elements:b,bounds:[y,w,v,I],width:v-y,height:I-w}});return U.forEach((b,y)=>{m+=b.width,y<U.length-1&&(m+=i),b.height>p&&(p=b.height)}),c+=p,{unitBounds:U,width:m,maxHeight:p}}),d=c+Math.max(0,l.length-1)*i;let f=n-d/2;return u.forEach(h=>{const{unitBounds:m,width:p,maxHeight:U}=h;let b=t-p/2;m.forEach(y=>{const[w,v]=y.bounds,I=b-w,x=f-v;y.elements.forEach(_=>{r.push(Ie(_,{x:_.x+I,y:_.y+x}))}),b+=y.width+i}),f+=U+i}),r},Tue=(e,t,n,i,r,s,o,a,l,c,u)=>{const d=i.getNonDeletedElementsMap();if(n.length===1){const[f]=n;if(t==="rotation")pe(f)||(Iue(f,i,a,l,r),fr(f,i));else if(t){const h=n[0].id,m=d.get(h),p=e.get(h);if(m&&p){const{nextWidth:U,nextHeight:b}=Rue(m,p,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});U0(U,b,m,p,e,i,t,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s})}}return ge(f)&&fr(f,i),!0}else if(n.length>1){if(t==="rotation")return xue(e,n,i,a,l,r,c,u),!0;if(t){const{nextWidth:f,nextHeight:h,flipByX:m,flipByY:p,originalBoundingBox:U}=kue(n,e,d,t,a,l,{shouldMaintainAspectRatio:o,shouldResizeFromCenter:s});return gH(n,d,t,i,e,{shouldResizeFromCenter:s,shouldMaintainAspectRatio:o,flipByX:m,flipByY:p,nextWidth:f,nextHeight:h,originalBoundingBox:U}),!0}}return!1},Iue=(e,t,n,i,r)=>{const[s,o,a,l]=He(e,t.getNonDeletedElementsMap()),c=(s+a)/2,u=(o+l)/2;let d;we(e)?d=0:(d=5*Math.PI/2+Math.atan2(i-u,n-c),r&&(d=d+Vr/2,d=d-d%Vr),d=ro(d));const f=Qo(e);if(t.mutateElement(e,{angle:d}),f){const h=t.getElement(f);if(h&&!Ce(e)){const{x:m,y:p}=su(e,h,t.getNonDeletedElementsMap());t.mutateElement(h,{angle:d,x:m,y:p})}}},L_=(e,t,n,i)=>xe(e)||qi(e)?{points:s6(0,t,s6(1,n,e.points,i),i)}:{},D_=(e,t,n)=>{let i=e.width;if(Lt(e)){const o=Yn(e,t);o&&(i=Jo(o,e))}const s=e.fontSize*(n/i);return s<D9?null:{size:s}},Sue=(e,t,n,i,r,s,o)=>{const a=n.getNonDeletedElementsMap(),l=t.width*(o/t.height),c=D_(t,a,l);if(c!==null){if(i.includes("n")||i.includes("s")){const u=S(e.x,e.y),d=K4(u,e.width,e.height,l,o,e.angle,i,!1,r);n.mutateElement(t,{fontSize:c.size,width:l,height:o,x:d.x,y:d.y});return}if(i==="e"||i==="w"){const u=r_(pt({fontSize:t.fontSize,fontFamily:t.fontFamily}),t.lineHeight),d=Math.max(u,s),f=ru(t.originalText,pt(t),Math.abs(d)),h=jn(f,pt(t),t.lineHeight),m=h.height,p=S(e.x,e.y),U=K4(p,e.width,e.height,d,m,t.angle,i,!1,r),b={width:Math.abs(d),height:Math.abs(h.height),x:U.x,y:U.y,text:f,autoResize:!1};n.mutateElement(t,b)}}},xue=(e,t,n,i,r,s,o,a)=>{var u;const l=n.getNonDeletedElementsMap();let c=5*Math.PI/2+Math.atan2(r-a,i-o);s&&(c+=Vr/2,c-=c%Vr);for(const d of t)if(!we(d)){const[f,h,m,p]=He(d,l),U=(f+m)/2,b=(h+p)/2,y=((u=e.get(d.id))==null?void 0:u.angle)??d.angle,[w,v]=q(S(U,b),S(o,a),c+y-d.angle),I=pe(d)?{points:Ile(d,l)}:{x:d.x+(w-U),y:d.y+(v-b),angle:ro(c+y)};n.mutateElement(d,I),fr(d,n,{simultaneouslyUpdated:t});const x=Le(d,l);if(x&&!Ce(d)){const{x:_,y:T}=su(d,x,l);n.mutateElement(x,{x:_,y:T,angle:ro(c+y)})}}n.triggerUpdate()},Cue=(e,t,n,i,r)=>{const[s,o,a,l]=t.length===1?He(t[0],n):nt(t),c=(s+a)/2,u=(o+l)/2,d=t.length===1?t[0].angle:0;switch([i,r]=q(S(i,r),S(c,u),-d),e){case"n":return q(S(i-(s+a)/2,r-o),S(0,0),d);case"s":return q(S(i-(s+a)/2,r-l),S(0,0),d);case"w":return q(S(i-s,r-(o+l)/2),S(0,0),d);case"e":return q(S(i-a,r-(o+l)/2),S(0,0),d);case"nw":return q(S(i-s,r-o),S(0,0),d);case"ne":return q(S(i-a,r-o),S(0,0),d);case"sw":return q(S(i-s,r-l),S(0,0),d);case"se":return q(S(i-a,r-l),S(0,0),d);default:return[0,0]}},Aue=(e,t)=>{const[,[n,i]]=t.points;return e==="nw"&&(n<0||i<0)||e==="ne"&&n>=0||e==="sw"&&n<=0||e==="se"&&(n>0||i>0)?"end":"origin"},Mue=(e,t,n)=>{if(n)return"center";if(t)switch(e){case"n":return"south-side";case"e":return"west-side";case"s":return"north-side";case"w":return"east-side";case"ne":return"bottom-left";case"nw":return"bottom-right";case"se":return"top-left";case"sw":return"top-right"}return["e","se","s"].includes(e)?"top-left":["n","nw","w"].includes(e)?"bottom-right":e==="ne"?"bottom-left":"top-right"},K4=(e,t,n,i,r,s,o,a,l)=>{const c=Mue(o,a,l),[u,d]=e;switch(c){case"top-left":return{x:u+(t-i)/2+(i-t)/2*Math.cos(s)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(i-t)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"top-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(n-r)/2*Math.sin(s),y:d+(n-r)/2+(t-i)/2*Math.sin(s)+(r-n)/2*Math.cos(s)};case"bottom-left":return{x:u+(t-i)/2*(1-Math.cos(s))+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(i-t)/2*Math.sin(s)};case"bottom-right":return{x:u+(t-i)/2*(Math.cos(s)+1)+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)+(t-i)/2*Math.sin(s)};case"center":return{x:u-(i-t)/2,y:d-(r-n)/2};case"east-side":return{x:u+(t-i)/2*(Math.cos(s)+1),y:d+(t-i)/2*Math.sin(s)+(n-r)/2};case"west-side":return{x:u+(t-i)/2*(1-Math.cos(s)),y:d+(i-t)/2*Math.sin(s)+(n-r)/2};case"north-side":return{x:u+(t-i)/2+(n-r)/2*Math.sin(s),y:d+(r-n)/2*(Math.cos(s)-1)};case"south-side":return{x:u+(t-i)/2+(r-n)/2*Math.sin(s),y:d+(n-r)/2*(Math.cos(s)+1)}}},U0=(e,t,n,i,r,s,o,{shouldInformMutation:a=!0,shouldMaintainAspectRatio:l=!1,shouldResizeFromCenter:c=!1}={})=>{if(ge(n)&&ge(i))return Sue(i,n,s,o,c,e,t);let u={};const d=s.getNonDeletedElementsMap(),f=Le(n,d);if(f){const U=r.get(f.id);if(U&&(u={fontSize:U.fontSize}),l){const b={...n,width:e},y=D_(f,d,Jo(b,f));if(y===null)return;u={fontSize:y.size}}else{const b=cz(pt(f),f.lineHeight),y=uz(f.fontSize,f.lineHeight);e=Math.max(e,b),t=Math.max(t,y)}}const h=L_(i,e,t,!0);let m=S(i.x,i.y);if(xe(i)){const[U,b]=si(i,r);m=S(U,b)}const p=K4(m,i.width,i.height,e,t,i.angle,o,l,c);if(xe(i)&&h.points){const U=i.x-m[0],b=i.y-m[1];p.x+=U,p.y+=b;const y=h.points[0][0],w=h.points[0][1];p.x+=y,p.y+=w,h.points=h.points.map(v=>S(v[0]-y,v[1]-w))}if(e<0&&(p.x=p.x+e),t<0&&(p.y=p.y+t),"scale"in n&&"scale"in i&&s.mutateElement(n,{scale:[(Math.sign(e)||i.scale[0])*i.scale[0],(Math.sign(t)||i.scale[1])*i.scale[1]]}),Ce(n)&&f&&l){const U=e/n.width*f.fontSize;if(U<D9)return;u.fontSize=U}if(e!==0&&t!==0&&Number.isFinite(p.x)&&Number.isFinite(p.y)){const U={...p,width:Math.abs(e),height:Math.abs(t),...h};s.mutateElement(n,U,{informMutation:a,isDragging:!1}),f&&u!=null&&s.mutateElement(f,{fontSize:u.fontSize}),Ip(n,s,o,l),fr(n,s,{newSize:{width:e,height:t}})}},Rue=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1}={})=>{const[a,l,c,u]=m0(t,t.width,t.height,!0),d=S(a,l),f=S(c,u),h=e6(d,f),m=q(S(i,r),h,-t.angle),[p,U,b,y]=m0(e,e.width,e.height,!0),w=b-p,v=y-U,I=f[0]-d[0],x=f[1]-d[1];let _=I/w,T=x/v;n.includes("e")&&(_=(m[0]-d[0])/w),n.includes("s")&&(T=(m[1]-d[1])/v),n.includes("w")&&(_=(f[0]-m[0])/w),n.includes("n")&&(T=(f[1]-m[1])/v);let A=e.width*_,C=e.height*T;if(o&&(A=2*A-t.width,C=2*C-t.height),s){const k=Math.abs(A)/t.width,P=Math.abs(C)/t.height;if(n.length===1&&(C*=k,A*=P),n.length===2){const D=Math.max(k,P);A=t.width*D*Math.sign(A),C=t.height*D*Math.sign(C)}}return{nextWidth:A,nextHeight:C}},kue=(e,t,n,i,r,s,{shouldMaintainAspectRatio:o=!1,shouldResizeFromCenter:a=!1}={})=>{const l=e.map(D=>t.get(D.id)),c=l.reduce((D,j)=>{if(!xe(j))return D;const G=Qo(j);if(!G)return D;const B=t.get(G)??null;return Lt(B)?[...D,{...B,...Ue.getBoundTextElementPosition(j,B,n)}]:D},[]),u=Ms(l.map(D=>D).concat(c)),{minX:d,minY:f,maxX:h,maxY:m,midX:p,midY:U}=u,b=h-d,y=m-f,w={ne:[d,m],se:[d,f],sw:[h,f],nw:[h,m],e:[d,f+y/2],w:[h,f+y/2],n:[d+b/2,m],s:[d+b/2,f]},[v,I]=a?[p,U]:w[i],x=a?2:1,_=Math.max(Math.abs(r-v)/b||0,Math.abs(s-I)/y||0)*x;let T=i.includes("e")||i.includes("w")?Math.abs(r-v)*x:b,A=i.includes("n")||i.includes("s")?Math.abs(s-I)*x:y;o&&(T=b*_*Math.sign(r-v),A=y*_*Math.sign(s-I));const C={ne:[r<v,s>I],se:[r<v,s<I],sw:[r>v,s<I],nw:[r>v,s>I],e:[r<v,!1],w:[r>v,!1],n:[!1,s>I],s:[!1,s<I]},[k,P]=C[i].map(D=>D);return{originalBoundingBox:u,nextWidth:T,nextHeight:A,flipByX:k,flipByY:P}},gH=(e,t,n,i,r,{shouldMaintainAspectRatio:s=!1,shouldResizeFromCenter:o=!1,flipByX:a=!1,flipByY:l=!1,nextHeight:c,nextWidth:u,originalBoundingBox:d}={})=>{if(u===void 0&&c===void 0&&a===void 0&&l===void 0||c===0||u===0)return;r||(r=t);const f=e.reduce((x,_)=>{const T=r.get(_.id);return T&&x.push({orig:T,latest:_}),x},[]);let h;if(d)h=d;else{const x=f.reduce((_,{orig:T})=>{if(!xe(T))return _;const A=Qo(T);if(!A)return _;const C=r.get(A)??null;return Lt(C)?[..._,{...C,...Ue.getBoundTextElementPosition(T,C,t)}]:_},[]);h=Ms(f.map(({orig:_})=>_).concat(x))}const{minX:m,minY:p,maxX:U,maxY:b,midX:y,midY:w}=h,v=U-m,I=b-p;if(u===void 0&&c===void 0&&(u=v,c=I),s&&(u===void 0?u=c*(v/I):c===void 0?c=u*(I/v):Math.abs(u/c-v/I)>.001&&(u=c*(v/I))),u&&c){let x=n.includes("e")||n.includes("w")?Math.abs(u)/v:1,_=n.includes("n")||n.includes("s")?Math.abs(c)/I:1,T;n.length===1?T=n.includes("e")||n.includes("w")?x:_:T=Math.max(Math.abs(u)/v||0,Math.abs(c)/I||0);const A={ne:[m,b],se:[m,p],sw:[U,p],nw:[U,b],e:[m,p+I/2],w:[U,p+I/2],n:[m+v/2,b],s:[m+v/2,p]},[C,k]=o?[y,w]:A[n],P=s||f.some(H=>H.latest.angle!==0||ge(H.latest)||$h(H.latest));P&&(x=T,_=T);const[D,j]=[a?-1:1,l?-1:1],G=[];for(const{orig:H,latest:$}of f){if(ge(H)&&Lt(H))continue;const X=H.width*x,W=H.height*_,Q=ro(H.angle*D*j),oe=xe(H)||qi(H),ne=H.x-C,ie=H.y-k,me=a&&!oe?X:0,Re=l&&!oe?W:0,Ve=C+D*(ne*x+me),wt=k+j*(ie*_+Re),Ot=L_(H,X*D,W*j,!1),Ye={x:Ve,y:wt,width:X,height:W,angle:Q,...Ot};if(pe(H)&&(H.startBinding&&(Ye.startBinding={...H.startBinding,fixedPoint:[a?-H.startBinding.fixedPoint[0]+1:H.startBinding.fixedPoint[0],l?-H.startBinding.fixedPoint[1]+1:H.startBinding.fixedPoint[1]]}),H.endBinding&&(Ye.endBinding={...H.endBinding,fixedPoint:[a?-H.endBinding.fixedPoint[0]+1:H.endBinding.fixedPoint[0],l?-H.endBinding.fixedPoint[1]+1:H.endBinding.fixedPoint[1]]}),H.fixedSegments&&Ot.points&&(Ye.fixedSegments=H.fixedSegments.map($t=>({...$t,start:Ot.points[$t.index-1],end:Ot.points[$t.index]})))),Et(H)&&(Ye.scale=[H.scale[0]*D,H.scale[1]*j]),ge(H)){const $t=D_(H,t,X);if(!$t)return;Ye.fontSize=$t.size}const ut=r.get(Qo(H)??"");if(ut)if(P){const $t=ut.fontSize*T;if($t<D9)return;Ye.boundTextFontSize=$t}else Ye.boundTextFontSize=ut.fontSize;G.push({element:$,update:Ye})}const B=G.map(({element:H})=>H);for(const{element:H,update:{boundTextFontSize:$,...X}}of G){const{width:W,height:Q,angle:oe}=X;i.mutateElement(H,X),fr(H,i,{simultaneouslyUpdated:B,newSize:{width:W,height:Q}});const ne=Le(H,t);ne&&$&&(i.mutateElement(ne,{fontSize:$,angle:xe(H)?void 0:oe}),Ip(H,i,n,!0))}i.triggerUpdate()}},RM={mouse:8,pen:16,touch:28},Lue=16,mH={e:!0,s:!0,n:!0,w:!0},kM={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},Y8={e:!0,s:!0,n:!0,w:!0},ba=(e,t,n,i,r,s,o)=>{const[a,l]=q(S(e+n/2,t+i/2),S(r,s),o);return[a-n/2,l-i/2,n,i]},N_=e=>!(e.formFactor==="phone"&&e.userAgent.isMobileDevice),I1=e=>N_(e)?mH:{},O_=([e,t,n,i,r,s],o,a,l,c={},u=4,d=gd)=>{const f=RM[l],h=f/a.value,m=f/a.value,p=f/a.value,U=f/a.value,b=n-e,y=i-t,w=u/a.value,v=(f-d*2)/(2*a.value),I={nw:c.nw?void 0:ba(e-w-p+v,t-w-U+v,h,m,r,s,o),ne:c.ne?void 0:ba(n+w-v,t-w-U+v,h,m,r,s,o),sw:c.sw?void 0:ba(e-w-p+v,i+w-v,h,m,r,s,o),se:c.se?void 0:ba(n+w-v,i+w-v,h,m,r,s,o),rotation:c.rotation?void 0:ba(e+b/2-h/2,t-w-U+v-Lue/a.value,h,m,r,s,o)},x=5*RM.mouse/a.value;return Math.abs(b)>x&&(c.n||(I.n=ba(e+b/2-h/2,t-w-U+v,h,m,r,s,o)),c.s||(I.s=ba(e+b/2-h/2,i+w-v,h,m,r,s,o))),Math.abs(y)>x&&(c.w||(I.w=ba(e-w-p+v,t+y/2-m/2,h,m,r,s,o)),c.e||(I.e=ba(n+w-v,t+y/2-m/2,h,m,r,s,o))),I},pH=(e,t,n,i="mouse",r=mH)=>{if(e.locked||pe(e))return{};if(e.type==="freedraw"||xe(e)){if(e.points.length===2){const[,o]=e.points;o[0]===0||o[1]===0?r=Y8:o[0]>0&&o[1]<0?r=kM:o[0]>0&&o[1]>0?r=Y8:o[0]<0&&o[1]>0?r=kM:o[0]<0&&o[1]<0&&(r=Y8)}}else we(e)&&(r={...r,rotation:!0});const s=xe(e)?gd+8:Et(e)?0:gd;return O_(He(e,n,!0),e.angle,t,i,r,s,Et(e)?0:void 0)},UH=(e,t,n)=>{var r;if((r=t.selectedLinearElement)!=null&&r.isEditing)return!1;if(e.length>1)return!0;const i=e[0];return pe(i)?!1:xe(i)?i.points.length>2&&!n.userAgent.isMobileDevice:!0},Z4=(e,t,n)=>t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3],Due=(e,t,n,i,r,s,o,a)=>{if(!n.selectedElementIds[e.id])return!1;const{rotation:l,...c}=pH(e,s,t,o,I1(a));if(l&&Z4(l,i,r))return"rotation";const u=Object.keys(c).filter(d=>{const f=c[d];return f?Z4(f,i,r):!1});if(u.length>0)return u[0];if(N_(a)){const[d,f,h,m,p,U]=He(e,t);if(!(xe(e)&&e.points.length<=2)){const b=Et(e)?0:Wb/s.value,y=Wb/s.value,w=bH(S(d-b,f-b),S(h+b,m+b),S(p,U),e.angle);for(const[v,I]of Object.entries(w))if(t6(S(i,r),I,y))return v}}return!1},LM=(e,t,n,i,r,s,o,a)=>e.reduce((l,c)=>{if(l)return l;const u=Due(c,o,t,n,i,r,s,a);return u?{element:c,transformHandleType:u}:null},null),DM=([e,t,n,i],r,s,o,a,l)=>{const c=O_([e,t,n,i,(e+n)/2,(t+i)/2],0,o,a,I1(l)),u=Object.keys(c).find(d=>{const f=c[d];return f&&Z4(f,r,s)});if(u)return u;if(N_(l)){const d=(e+n)/2,f=(t+i)/2,h=Wb/o.value,m=bH(S(e-h,t-h),S(n+h,i+h),S(d,f),0);for(const[p,U]of Object.entries(m))if(t6(S(r,s),U,h))return p}return!1},W8=["ns","nesw","ew","nwse"],Nue=(e,t)=>{const n=W8.indexOf(e);if(n>=0){const i=Math.round(t/(Math.PI/4));e=W8[(n+i)%W8.length]}return e},NM=e=>{const{element:t,transformHandleType:n}=e,i=t&&Math.sign(t.height)*Math.sign(t.width)===-1;let r=null;switch(n){case"n":case"s":r="ns";break;case"w":case"e":r="ew";break;case"nw":case"se":i?r="nesw":r="nwse";break;case"ne":case"sw":i?r="nwse":r="nesw";break;case"rotation":return"grab"}return r&&t&&(r=Nue(r,t.angle)),r?`${r}-resize`:""},bH=([e,t],[n,i],r,s)=>{const o=q(S(e,t),r,s),a=q(S(n,t),r,s),l=q(S(e,i),r,s),c=q(S(n,i),r,s);return{n:[o,a],e:[a,c],s:[c,l],w:[l,o]}},Oue=(e,t)=>{var n;return!!(!e.viewModeEnabled&&((n=e.openDialog)==null?void 0:n.name)!=="elementLinkSelector"&&(e.activeTool.type!=="custom"&&(e.editingTextElement||e.activeTool.type!=="selection"&&e.activeTool.type!=="lasso"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser")||Ge(t,e).length))},q4=(e,t)=>e.frameId===t||e.id===t,yH=(e,t,n)=>{let i=[],r=[],s=null,o=-1;const a=ve(n||Ge(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++o<e.length;){const l=e[o];a.get(l.id)?(r.length&&(i=i.concat(r),r=[]),i.push(o),s=o+1):l.isDeleted&&s===o?(s=o+1,r.push(o)):r=[]}return i},Pue=e=>{let t=0;return e.reduce((n,i,r)=>(r>0&&e[r-1]!==i-1&&(t=++t),(n[t]||(n[t]=[])).push(i),n),[])},OM=(e,t,n,i)=>{var r,s;if("containerId"in e&&e.containerId){const o=i.getElement(e.containerId);if(o)return n==="left"?Math.min(t.indexOf(o),t.indexOf(e)):Math.max(t.indexOf(o),t.indexOf(e))}else{const o=(s=(r=e.boundElements)==null?void 0:r.find(a=>a.type!=="arrow"))==null?void 0:s.id;if(o){const a=i.getElement(o);if(a)return n==="left"?Math.min(t.indexOf(a),t.indexOf(e)):Math.max(t.indexOf(a),t.indexOf(e))}}},Fue=(e,t)=>{let n=-1,i=-1;return e.forEach((r,s)=>{q4(r,t)&&(n===-1&&(n=s),i=s)}),n===-1?[]:e.slice(n,i+1)},Bue=(e,t,n,i,r,s)=>{const o=t[n],a=f=>f.isDeleted?!1:r?f.frameId===r:e.editingGroupId?f.groupIds.includes(e.editingGroupId):!0,l=i==="left"?Cu(t,f=>a(f),Math.max(0,n-1)):BB(t,f=>a(f),n+1),c=t[l];if(!c)return-1;if(e.editingGroupId){if((o==null?void 0:o.groupIds.join(""))===(c==null?void 0:c.groupIds.join("")))return OM(c,t,i,s)??l;if(!(c!=null&&c.groupIds.includes(e.editingGroupId)))return-1}if(!r&&(c.frameId||we(c))){const f=Fue(t,c.frameId||c.id);return i==="left"?t.indexOf(f[0]):t.indexOf(f[f.length-1])}if(!c.groupIds.length)return OM(c,t,i,s)??l;const u=e.editingGroupId?c.groupIds[c.groupIds.indexOf(e.editingGroupId)-1]:c.groupIds[c.groupIds.length-1],d=At(t,u);return d.length?i==="left"?t.indexOf(d[0]):t.indexOf(d[d.length-1]):l},EH=(e,t)=>t.reduce((n,i)=>{const r=e[i];return n.set(r.id,r),n},new Map),vH=(e,t,n,i)=>{const r=yH(e,t),s=EH(e,r);let o=Pue(r);n==="right"&&(o=o.reverse());const a=new Set(r.filter(l=>we(e[l])).map(l=>e[l].id));return o.forEach((l,c)=>{var w;const u=l[0],d=l[l.length-1],f=n==="left"?u:d,h=l.some(v=>{const I=e[v];return I.frameId&&a.has(I.frameId)})?null:(w=e[f])==null?void 0:w.frameId,m=Bue(t,e,f,n,h,i);if(m===-1||f===m)return;const p=n==="left"?e.slice(0,m):e.slice(0,u),U=e.slice(u,d+1),b=n==="left"?e.slice(m,u):e.slice(d+1,m+1),y=n==="left"?e.slice(d+1):e.slice(m+1);e=n==="left"?[...p,...U,...b,...y]:[...p,...b,...U,...y]}),lo(e,s),e},wH=(e,t,n,i,r)=>{const s=yH(e,t,r),o=EH(e,s),a=[];let l,c;if(n==="left"){if(i)l=BB(e,m=>q4(m,i));else if(t.editingGroupId){const m=At(e,t.editingGroupId);if(!m.length)return e;l=e.indexOf(m[0])}else l=0;c=s[s.length-1]}else{if(i)c=Cu(e,m=>q4(m,i));else if(t.editingGroupId){const m=At(e,t.editingGroupId);if(!m.length)return e;c=e.indexOf(m[m.length-1])}else c=e.length-1;l=s[0]}l===-1&&(l=0);for(let m=l;m<c+1;m++)s.includes(m)||a.push(e[m]);const u=Array.from(o.values()),d=e.slice(0,l),f=e.slice(c+1),h=n==="left"?[...d,...u,...a,...f]:[...d,...a,...u,...f];return lo(h,o),h};function _H(e,t,n,i){const r=ve(Ge(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),s={regularElements:[],frameChildren:new Map},o=new Set;for(const c of e)r.has(c.id)&&we(c)&&o.add(c.id);for(const c of e)if(r.has(c.id))if(we(c)||c.frameId&&o.has(c.frameId))s.regularElements.push(c);else if(!c.frameId)s.regularElements.push(c);else{const u=s.frameChildren.get(c.frameId)||[];u.push(c),s.frameChildren.set(c.frameId,u)}let a=e;const l=Array.from(s.frameChildren.entries());for(const[c,u]of l)a=i(e,t,n,c,u);return i(a,t,n,null,s.regularElements)}const zue=(e,t,n)=>vH(e,t,"left",n),Hue=(e,t,n)=>vH(e,t,"right",n),Vue=(e,t)=>_H(e,t,"left",wH),$ue=(e,t)=>_H(e,t,"right",wH),tc=e=>e.reduce((t,n)=>t+n.version,0),TH=e=>{let t=5381;for(const n of Yl(e))t=(t<<5)+t+n.versionNonce;return t>>>0},P_=e=>{let t=5381;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)+t+i}return t>>>0},Gue=e=>e.filter(t=>!t.isDeleted&&!Qa(t)),Yt=e=>e.filter(t=>!t.isDeleted),Q4=e=>!e.isDeleted,F_=e=>Yt(e).map(t=>i_(t.type)?{...t,lastCommittedPoint:null}:t),Xue=e=>F_(e),IH=e=>F_(e),SH=e=>F_(e);function xH(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=xH(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function ce(){for(var e=0,t,n,i="";e<arguments.length;)(t=arguments[e++])&&(n=xH(t))&&(i&&(i+=" "),i+=n);return i}let CH=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const jue=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((i,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t)))})};var cl={};let Yue=0;function Wt(e,t){const n=`atom${++Yue}`,i={toString(){return(cl?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof e=="function"?i.read=e:(i.init=e,i.read=Wue,i.write=Kue),i}function Wue(e){return e(this)}function Kue(e,t,n){return t(this,typeof n=="function"?n(e(this)):n)}const PM=(e,t)=>e.unstable_is?e.unstable_is(t):t===e,J4=e=>"init"in e,K8=e=>!!e.write,R6=new WeakMap,ev=e=>{var t;return tv(e)&&!((t=R6.get(e))!=null&&t[1])},Zue=(e,t)=>{const n=R6.get(e);if(n)n[1]=!0,n[0].forEach(i=>i(t));else if((cl?"production":void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},que=e=>{if(R6.has(e))return;const t=[new Set,!1];R6.set(e,t);const n=()=>{t[1]=!0};e.then(n,n),e.onCancel=i=>{t[0].add(i)}},tv=e=>typeof(e==null?void 0:e.then)=="function",FM=e=>"v"in e||"e"in e,$U=e=>{if("e"in e)throw e.e;if((cl?"production":void 0)!=="production"&&!("v"in e))throw new Error("[Bug] atom state is not initialized");return e.v},AH=(e,t,n)=>{n.p.has(e)||(n.p.add(e),t.then(()=>{n.p.delete(e)},()=>{n.p.delete(e)}))},BM=(e,t,n,i,r)=>{var s;if((cl?"production":void 0)!=="production"&&i===t)throw new Error("[Bug] atom cannot depend on itself");n.d.set(i,r.n),ev(n.v)&&AH(t,n.v,r),(s=r.m)==null||s.t.add(t),e&&Que(e,i,t)},hm=()=>({D:new Map,H:new Set,M:new Set,L:new Set}),S1=(e,t,n)=>{e[t].add(n)},zM=(e,t,n)=>{e.D.has(t)||(e.D.set(t,new Set),S1(e,"M",()=>{var i;(i=n.m)==null||i.l.forEach(r=>S1(e,"M",r))}))},Que=(e,t,n)=>{const i=e.D.get(t);i&&i.add(n)},Jue=(e,t)=>e.D.get(t),Uu=e=>{let t,n=!1;const i=r=>{try{r()}catch(s){n||(t=s,n=!0)}};for(;e.H.size||e.M.size||e.L.size;)e.D.clear(),e.H.forEach(i),e.H.clear(),e.M.forEach(i),e.M.clear(),e.L.forEach(i),e.L.clear();if(n)throw t},MH=(...[e,t,n,i])=>{const r=(b,y,w)=>{const v="v"in y,I=y.v,x=ev(y.v)?y.v:null;if(tv(w)){que(w);for(const _ of y.d.keys())AH(b,w,e(_));y.v=w}else y.v=w;delete y.e,delete y.x,(!v||!Object.is(I,y.v))&&(++y.n,x&&Zue(x,w))},s=(b,y)=>{var w;const v=e(y);if(FM(v)&&(v.m&&!v.x||Array.from(v.d).every(([C,k])=>s(b,C).n===k)))return v;v.d.clear();let I=!0;const x=C=>{if(PM(y,C)){const P=e(C);if(!FM(P))if(J4(C))r(C,P,C.init);else throw new Error("no atom init");return $U(P)}const k=s(b,C);try{return $U(k)}finally{if(I)BM(b,y,v,C,k);else{const P=hm();BM(P,y,v,C,k),d(P,y,v),Uu(P)}}};let _,T;const A={get signal(){return _||(_=new AbortController),_.signal},get setSelf(){return(cl?"production":void 0)!=="production"&&!K8(y)&&console.warn("setSelf function cannot be used with read-only atom"),!T&&K8(y)&&(T=(...C)=>{if((cl?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)return u(y,...C)}),T}};try{const C=t(y,x,A);if(r(y,v,C),tv(C)){(w=C.onCancel)==null||w.call(C,()=>_==null?void 0:_.abort());const k=()=>{if(v.m){const P=hm();d(P,y,v),Uu(P)}};C.then(k,k)}return v}catch(C){return delete v.v,v.e=C,delete v.x,++v.n,v}finally{I=!1}},o=b=>$U(s(void 0,b)),a=(b,y,w)=>{var v,I;const x=new Map;for(const _ of((v=w.m)==null?void 0:v.t)||[]){const T=e(_);T.m&&x.set(_,T)}for(const _ of w.p)x.set(_,e(_));return(I=Jue(b,y))==null||I.forEach(_=>{x.set(_,e(_))}),x},l=(b,y,w)=>{const v=[],I=new Set,x=new Set,_=[[y,w]];for(;_.length>0;){const[T,A]=_[_.length-1];if(x.has(T)){_.pop();continue}if(I.has(T)){v.push([T,A,A.n]),x.add(T),A.x=!0,_.pop();continue}I.add(T);for(const[C,k]of a(b,T,A))T!==C&&!I.has(C)&&_.push([C,k])}S1(b,"H",()=>{const T=new Set([y]);for(let A=v.length-1;A>=0;--A){const[C,k,P]=v[A];let D=!1;for(const j of k.d.keys())if(j!==C&&T.has(j)){D=!0;break}D&&(s(b,C),d(b,C,k),P!==k.n&&(zM(b,C,k),T.add(C))),delete k.x}})},c=(b,y,...w)=>{let v=!0;const I=_=>$U(s(b,_)),x=(_,...T)=>{const A=e(_);try{if(PM(y,_)){if(!J4(_))throw new Error("atom not writable");const C=A.n,k=T[0];r(_,A,k),d(b,_,A),C!==A.n&&(zM(b,_,A),l(b,_,A));return}else return c(b,_,...T)}finally{v||Uu(b)}};try{return n(y,I,x,...w)}finally{v=!1}},u=(b,...y)=>{const w=hm();try{return c(w,b,...y)}finally{Uu(w)}},d=(b,y,w)=>{if(w.m&&!ev(w.v)){for(const v of w.d.keys())w.m.d.has(v)||(f(b,v,e(v)).t.add(y),w.m.d.add(v));for(const v of w.m.d||[])if(!w.d.has(v)){w.m.d.delete(v);const I=h(b,v,e(v));I==null||I.t.delete(y)}}},f=(b,y,w)=>{if(!w.m){s(b,y);for(const v of w.d.keys())f(b,v,e(v)).t.add(y);if(w.m={l:new Set,d:new Set(w.d.keys()),t:new Set},K8(y)){const v=w.m;let I;const x=(_,T)=>{let A=!0;I=(...C)=>{try{return c(_,y,...C)}finally{A||Uu(_)}};try{return T()}finally{A=!1}};S1(b,"L",()=>{const _=x(b,()=>i(y,(...T)=>I(...T)));_&&(v.u=T=>x(T,_))})}}return w.m},h=(b,y,w)=>{if(w.m&&!w.m.l.size&&!Array.from(w.m.t).some(v=>{var I;return(I=e(v).m)==null?void 0:I.d.has(y)})){const v=w.m.u;v&&S1(b,"L",()=>v(b)),delete w.m;for(const I of w.d.keys()){const x=h(b,I,e(I));x==null||x.t.delete(y)}return}return w.m};return{get:o,set:u,sub:(b,y)=>{const w=hm(),v=e(b),x=f(w,b,v).l;return x.add(y),Uu(w),()=>{x.delete(y);const _=hm();h(_,b,v),Uu(_)}},unstable_derive:b=>MH(...b(e,t,n,i))}},ede=e=>{const t=new WeakMap,n=new Set;let i,r=0;const s=e.unstable_derive((l,c,u,d)=>(i=l,[f=>{let h=t.get(f);if(!h){const m=l(f);h=new Proxy(m,{set(p,U,b){return U==="m"&&n.add(f),Reflect.set(p,U,b)},deleteProperty(p,U){return U==="m"&&n.delete(f),Reflect.deleteProperty(p,U)}}),t.set(f,h)}return h},c,(f,h,m,...p)=>r?m(f,...p):u(f,h,m,...p),d])),o=s.set;return Object.assign(s,{dev4_get_internal_weak_map:()=>({get:l=>{const c=i(l);if(c.n!==0)return c}}),dev4_get_mounted_atoms:()=>n,dev4_restore_atoms:l=>{o({read:()=>null,write:(u,d)=>{++r;try{for(const[f,h]of l)J4(f)&&d(f,h)}finally{--r}}})}})},Mp=()=>{const e=new WeakMap,n=MH(i=>{if((cl?"production":void 0)!=="production"&&!i)throw new Error("Atom is undefined or null");let r=e.get(i);return r||(r={d:new Map,p:new Set,n:0},e.set(i,r)),r},(i,...r)=>i.read(...r),(i,...r)=>i.write(...r),(i,...r)=>{var s;return(s=i.onMount)==null?void 0:s.call(i,...r)});return(cl?"production":void 0)!=="production"?ede(n):n};let gm;const tde=()=>(gm||(gm=Mp(),(cl?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=gm),globalThis.__JOTAI_DEFAULT_STORE__!==gm&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),gm);var RH={};const kH=L.createContext(void 0),my=e=>{const t=L.useContext(kH);return(e==null?void 0:e.store)||t||tde()},nde=({children:e,store:t})=>{const n=L.useRef(void 0);return!t&&!n.current&&(n.current=Mp()),L.createElement(kH.Provider,{value:t||n.current},e)},nv=e=>typeof(e==null?void 0:e.then)=="function",LH=e=>{e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t})},ide=ue.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(LH(e),e)}),Z8=new WeakMap,HM=e=>{let t=Z8.get(e);return t||(t=new Promise((n,i)=>{let r=e;const s=l=>c=>{r===l&&n(c)},o=l=>c=>{r===l&&i(c)},a=l=>{"onCancel"in l&&typeof l.onCancel=="function"&&l.onCancel(c=>{if((RH?"production":void 0)!=="production"&&c===l)throw new Error("[Bug] p is not updated even after cancelation");nv(c)?(Z8.set(c,t),r=c,c.then(s(c),o(c)),a(c)):n(c)})};e.then(s(e),o(e)),a(e)}),Z8.set(e,t)),t};function hh(e,t){const n=my(t),[[i,r,s],o]=L.useReducer(c=>{const u=n.get(e);return Object.is(c[0],u)&&c[1]===n&&c[2]===e?c:[u,n,e]},void 0,()=>[n.get(e),n,e]);let a=i;(r!==n||s!==e)&&(o(),a=n.get(e));const l=t==null?void 0:t.delay;if(L.useEffect(()=>{const c=n.sub(e,()=>{if(typeof l=="number"){const u=n.get(e);nv(u)&&LH(HM(u)),setTimeout(o,l);return}o()});return o(),c},[n,e,l]),L.useDebugValue(a),nv(a)){const c=HM(a);return ide(c)}return a}function B_(e,t){const n=my(t);return L.useCallback((...r)=>{if((RH?"production":void 0)!=="production"&&!("write"in e))throw new Error("not writable atom");return n.set(e,...r)},[n,e])}function Xh(e,t){return[hh(e,t),B_(e,t)]}const VM=new WeakMap;function rde(e,t){const n=my(t),i=sde(n);for(const[r,s]of e)(!i.has(r)||t!=null&&t.dangerouslyForceHydrate)&&(i.add(r),n.set(r,s))}const sde=e=>{let t=VM.get(e);return t||(t=new WeakSet,VM.set(e,t)),t};function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Wf.apply(this,arguments)}function DH(){const e=L.createContext(null);function t({store:o,initialValues:a=[],children:l}){const c=L.useRef(o);return c.current||(c.current=Mp()),rde(a,{store:c.current}),g(e.Provider,{value:c.current,children:l})}const n=o=>{const a=L.useContext(e);if(!a)throw new Error("Missing Provider from createIsolation");return my(Wf({store:a},o))};return{Provider:t,useStore:n,useAtom:(o,a)=>{const l=n();return Xh(o,Wf({store:l},a))},useAtomValue:(o,a)=>{const l=n();return hh(o,Wf({store:l},a))},useSetAtom:(o,a)=>{const l=n();return B_(o,Wf({store:l},a))}}}const{read:lAe,write:cAe}=Wt(null);L.createContext({scope:void 0,baseStore:void 0});const NH=DH(),{useAtom:dn,useSetAtom:py,useAtomValue:OH,useStore:uAe}=NH,ode=NH.Provider,Xr=Mp(),PH={paste:"Paste",pasteAsPlaintext:"Paste as plaintext",pasteCharts:"Paste charts",selectAll:"Select all",multiSelect:"Add element to selection",moveCanvas:"Move canvas",cut:"Cut",copy:"Copy",copyAsPng:"Copy to clipboard as PNG",copyAsSvg:"Copy to clipboard as SVG",copyText:"Copy to clipboard as text",copySource:"Copy source to clipboard",convertToCode:"Convert to code",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",sendBackward:"Send backward",delete:"Delete",copyStyles:"Copy styles",pasteStyles:"Paste styles",stroke:"Stroke",changeStroke:"Change stroke color",background:"Background",changeBackground:"Change background color",fill:"Fill",strokeWidth:"Stroke width",strokeStyle:"Stroke style",strokeStyle_solid:"Solid",strokeStyle_dashed:"Dashed",strokeStyle_dotted:"Dotted",sloppiness:"Sloppiness",opacity:"Opacity",textAlign:"Text align",edges:"Edges",sharp:"Sharp",round:"Round",arrowheads:"Arrowheads",arrowhead_none:"None",arrowhead_arrow:"Arrow",arrowhead_bar:"Bar",arrowhead_circle:"Circle",arrowhead_circle_outline:"Circle (outline)",arrowhead_triangle:"Triangle",arrowhead_triangle_outline:"Triangle (outline)",arrowhead_diamond:"Diamond",arrowhead_diamond_outline:"Diamond (outline)",arrowhead_crowfoot_many:"Crow's foot (many)",arrowhead_crowfoot_one:"Crow's foot (one)",arrowhead_crowfoot_one_or_many:"Crow's foot (one or many)",more_options:"More options",arrowtypes:"Arrow type",arrowtype_sharp:"Sharp arrow",arrowtype_round:"Curved arrow",arrowtype_elbowed:"Elbow arrow",fontSize:"Font size",fontFamily:"Font family",addWatermark:'Add "Made with Excalidraw"',handDrawn:"Hand-drawn",normal:"Normal",code:"Code",small:"Small",medium:"Medium",large:"Large",veryLarge:"Very large",solid:"Solid",hachure:"Hachure",zigzag:"Zigzag",crossHatch:"Cross-hatch",thin:"Thin",bold:"Bold",left:"Left",center:"Center",right:"Right",extraBold:"Extra bold",architect:"Architect",artist:"Artist",cartoonist:"Cartoonist",fileTitle:"File name",colorPicker:"Color picker",canvasColors:"Used on canvas",canvasBackground:"Canvas background",drawingCanvas:"Drawing canvas",clearCanvas:"Clear canvas",layers:"Layers",actions:"Actions",language:"Language",liveCollaboration:"Live collaboration...",duplicateSelection:"Duplicate",untitled:"Untitled",name:"Name",yourName:"Your name",madeWithExcalidraw:"Made with Excalidraw",group:"Group selection",ungroup:"Ungroup selection",collaborators:"Collaborators",toggleGrid:"Toggle grid",addToLibrary:"Add to library",removeFromLibrary:"Remove from library",libraryLoadingMessage:"Loading library",libraries:"Browse libraries",loadingScene:"Loading scene",loadScene:"Load scene from file",align:"Align",alignTop:"Align top",alignBottom:"Align bottom",alignLeft:"Align left",alignRight:"Align right",centerVertically:"Center vertically",centerHorizontally:"Center horizontally",distributeHorizontally:"Distribute horizontally",distributeVertically:"Distribute vertically",flipHorizontal:"Flip horizontal",flipVertical:"Flip vertical",viewMode:"View mode",share:"Share",showStroke:"Show stroke color picker",showBackground:"Show background color picker",showFonts:"Show font picker",toggleTheme:"Toggle light/dark theme",theme:"Theme",personalLib:"Personal Library",excalidrawLib:"Excalidraw Library",decreaseFontSize:"Decrease font size",increaseFontSize:"Increase font size",unbindText:"Unbind text",bindText:"Bind text to the container",createContainerFromText:"Wrap text in a container",link:{edit:"Edit link",editEmbed:"Edit embeddable link",create:"Add link",label:"Link",labelEmbed:"Link & embed",empty:"No link is set",hint:"Type or paste your link here",goToElement:"Go to target element"},lineEditor:{edit:"Edit line",editArrow:"Edit arrow"},polygon:{breakPolygon:"Break polygon",convertToPolygon:"Convert to polygon"},elementLock:{lock:"Lock",unlock:"Unlock",lockAll:"Lock all",unlockAll:"Unlock all"},statusPublished:"Published",sidebarLock:"Keep sidebar open",selectAllElementsInFrame:"Select all elements in frame",removeAllElementsFromFrame:"Remove all elements from frame",eyeDropper:"Pick color from canvas",textToDiagram:"Text to diagram",prompt:"Prompt",followUs:"Follow us",discordChat:"Discord chat",zoomToFitViewport:"Zoom to fit in viewport",zoomToFitSelection:"Zoom to fit selection",zoomToFit:"Zoom to fit all elements",installPWA:"Install Excalidraw locally (PWA)",autoResize:"Enable text auto-resizing",imageCropping:"Image cropping",unCroppedDimension:"Uncropped dimension",copyElementLink:"Copy link to object",linkToElement:"Link to object",wrapSelectionInFrame:"Wrap selection in frame",tab:"Tab",shapeSwitch:"Switch shape"},FH={title:"Link to object",desc:"Click on a shape on canvas or paste a link.",notFound:"Linked object wasn't found on canvas."},BH={noItems:"No items added yet...",hint_emptyLibrary:"Select an item on canvas to add it here, or install a library from the public repository, below.",hint_emptyPrivateLibrary:"Select an item on canvas to add it here.",search:{inputPlaceholder:"Search library",heading:"Library matches",noResults:"No matching items found...",clearSearch:"Clear search"}},zH={title:"Find on canvas",noMatch:"No matches found...",singleResult:"result",multipleResults:"results",placeholder:"Find text on canvas...",frames:"Frames",texts:"Texts"},HH={clearReset:"Reset the canvas",exportJSON:"Export to file",exportImage:"Export image...",export:"Save to...",copyToClipboard:"Copy to clipboard",copyLink:"Copy link",save:"Save to current file",saveAs:"Save as",load:"Open",getShareableLink:"Get shareable link",close:"Close",selectLanguage:"Select language",scrollBackToContent:"Scroll back to content",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",menu:"Menu",done:"Done",edit:"Edit",undo:"Undo",redo:"Redo",resetLibrary:"Reset library",createNewRoom:"Create new room",fullScreen:"Full screen",darkMode:"Dark mode",lightMode:"Light mode",systemMode:"System mode",zenMode:"Zen mode",objectsSnapMode:"Snap to objects",exitZenMode:"Exit zen mode",cancel:"Cancel",saveLibNames:"Save name(s) and exit",clear:"Clear",remove:"Remove",embed:"Toggle embedding",publishLibrary:"Rename or publish",submit:"Submit",confirm:"Confirm",embeddableInteractionButton:"Click to interact"},VH={clearReset:"This will clear the whole canvas. Are you sure?",couldNotCreateShareableLink:"Couldn't create shareable link.",couldNotCreateShareableLinkTooBig:"Couldn't create shareable link: the scene is too big",couldNotLoadInvalidFile:"Couldn't load invalid file",importBackendFailed:"Importing from backend failed.",cannotExportEmptyCanvas:"Cannot export empty canvas.",couldNotCopyToClipboard:"Couldn't copy to clipboard.",decryptFailed:"Couldn't decrypt data.",uploadedSecurly:"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can't read the content.",loadSceneOverridePrompt:"Loading external drawing will replace your existing content. Do you wish to continue?",collabStopOverridePrompt:`Stopping the session will overwrite your previous, locally stored drawing. Are you sure?

(If you want to keep your local drawing, simply close the browser tab instead.)`,errorAddingToLibrary:"Couldn't add item to the library",errorRemovingFromLibrary:"Couldn't remove item from the library",confirmAddLibrary:"This will add {{numShapes}} shape(s) to your library. Are you sure?",imageDoesNotContainScene:"This image does not seem to contain any scene data. Have you enabled scene embedding during export?",cannotRestoreFromImage:"Scene couldn't be restored from this image file",invalidSceneUrl:"Couldn't import scene from the supplied URL. It's either malformed, or doesn't contain valid Excalidraw JSON data.",resetLibrary:"This will clear your library. Are you sure?",removeItemsFromsLibrary:"Delete {{count}} item(s) from library?",invalidEncryptionKey:"Encryption key must be of 22 characters. Live collaboration is disabled.",collabOfflineWarning:`No internet connection available.
Your changes will not be saved!`,localStorageQuotaExceeded:"Browser storage quota exceeded. Changes will not be saved."},$H={unsupportedFileType:"Unsupported file type.",imageInsertError:"Couldn't insert image. Try again later...",fileTooBig:"File is too big. Maximum allowed size is {{maxSize}}.",svgImageInsertError:"Couldn't insert SVG image. The SVG markup looks invalid.",failedToFetchImage:"Failed to fetch image.",cannotResolveCollabServer:"Couldn't connect to the collab server. Please reload the page and try again.",importLibraryError:"Couldn't load library",saveLibraryError:"Couldn't save library to storage. Please save your library to a file locally to make sure you don't lose changes.",collabSaveFailed:"Couldn't save to the backend database. If problems persist, you should save your file locally to ensure you don't lose your work.",collabSaveFailed_sizeExceeded:"Couldn't save to the backend database, the canvas seems to be too big. You should save the file locally to ensure you don't lose your work.",imageToolNotSupported:"Images are disabled.",brave_measure_text_error:{line1:"Looks like you are using Brave browser with the <bold>Aggressively Block Fingerprinting</bold> setting enabled.",line2:"This could result in breaking the <bold>Text Elements</bold> in your drawings.",line3:"We strongly recommend disabling this setting. You can follow <link>these steps</link> on how to do so.",line4:"If disabling this setting doesn't fix the display of text elements, please open an <issueLink>issue</issueLink> on our GitHub, or write us on <discordLink>Discord</discordLink>"},libraryElementTypeError:{embeddable:"Embeddable elements cannot be added to the library.",iframe:"IFrame elements cannot be added to the library.",image:"Support for adding images to the library coming soon!"},asyncPasteFailedOnRead:"Couldn't paste (couldn't read from system clipboard).",asyncPasteFailedOnParse:"Couldn't paste.",copyToSystemClipboardFailed:"Couldn't copy to clipboard."},GH={selection:"Selection",lasso:"Lasso selection",image:"Insert image",rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Draw",text:"Text",library:"Library",lock:"Keep selected tool active after drawing",penMode:"Pen mode - prevent touch",link:"Add / Update link for a selected shape",eraser:"Eraser",frame:"Frame tool",magicframe:"Wireframe to code",embeddable:"Web Embed",laser:"Laser pointer",hand:"Hand (panning tool)",extraTools:"More tools",mermaidToExcalidraw:"Mermaid to Excalidraw",convertElementType:"Toggle shape type"},XH={rectangle:"Rectangle",diamond:"Diamond",ellipse:"Ellipse",arrow:"Arrow",line:"Line",freedraw:"Freedraw",text:"Text",image:"Image",group:"Group",frame:"Frame",magicframe:"Wireframe to code",embeddable:"Web Embed",selection:"Selection",iframe:"IFrame"},jH={canvasActions:"Canvas actions",selectedShapeActions:"Selected shape actions",shapes:"Shapes"},YH={dismissSearch:"{{shortcut}} to dismiss search",canvasPanning:"To move canvas, hold {{shortcut_1}} or {{shortcut_2}} while dragging, or use the hand tool",linearElement:"Click to start multiple points, drag for single line",arrowTool:"Click to start multiple points, drag for single line. Press {{shortcut}} again to change arrow type.",freeDraw:"Click and drag, release when you're finished",text:"Tip: you can also add text by double-clicking anywhere with the selection tool",embeddable:"Click-drag to create a website embed",text_selected:"Double-click or press {{shortcut}} to edit text",text_editing:"Press {{shortcut_1}} or {{shortcut_2}} to finish editing",linearElementMulti:"Click on last point or press {{shortcut_1}} or {{shortcut_2}} to finish",lockAngle:"You can constrain angle by holding {{shortcut}}",resize:`You can constrain proportions by holding {{shortcut_1}} while resizing,
hold {{shortcut_2}} to resize from the center`,resizeImage:`You can resize freely by holding {{shortcut_1}},
hold {{shortcut_2}} to resize from the center`,rotate:"You can constrain angles by holding {{shortcut}} while rotating",lineEditor_info:"Hold {{shortcut_1}} and Double-click or press {{shortcut_2}} to edit points",lineEditor_line_info:"Double-click or press {{shortcut}} to edit points",lineEditor_pointSelected:`Press {{shortcut_1}} to remove point(s),
{{shortcut_2}} to duplicate, or drag to move`,lineEditor_nothingSelected:`Select a point to edit (hold {{shortcut_1}} to select multiple),
or hold {{shortcut_2}} and click to add new points`,publishLibrary:"Publish your own library",bindTextToElement:"{{shortcut}} to add text",createFlowchart:"{{shortcut}} to create a flowchart",deepBoxSelect:"Hold {{shortcut}} to deep select, and to prevent dragging",eraserRevert:"Hold {{shortcut}} to revert the elements marked for deletion",firefox_clipboard_write:'This feature can likely be enabled by setting the "dom.events.asyncClipboard.clipboardItem" flag to "true". To change the browser flags in Firefox, visit the "about:config" page.',disableSnapping:"Hold {{shortcut}} to disable snapping",enterCropEditor:"Double click the image or press {{shortcut}} to crop the image",leaveCropEditor:"Click outside the image or press {{shortcut_1}} or {{shortcut_2}} to finish cropping"},WH={cannotShowPreview:"Cannot show preview",canvasTooBig:"The canvas may be too big.",canvasTooBigTip:"Tip: try moving the farthest elements a bit closer together."},KH={headingMain:"Encountered an error. Try <button>reloading the page</button>.",clearCanvasMessage:"If reloading doesn't work, try <button>clearing the canvas</button>.",clearCanvasCaveat:" This will result in loss of work ",trackedToSentry:"The error with identifier {{eventId}} was tracked on our system.",openIssueMessage:"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our <button>bug tracker</button>. Please include information below by copying and pasting into the GitHub issue.",sceneContent:"Scene content:"},ZH={or:"Or"},qH={desc_intro:"Invite people to collaborate on your drawing.",desc_privacy:"Don't worry, the session is end-to-end encrypted, and fully private. Not even our server can see what you draw.",button_startSession:"Start session",button_stopSession:"Stop session",desc_inProgressIntro:"Live-collaboration session is now in progress.",desc_shareLink:"Share this link with anyone you want to collaborate with:",desc_exitSession:"Stopping the session will disconnect you from the room, but you'll be able to continue working with the scene, locally. Note that this won't affect other people, and they'll still be able to collaborate on their version.",shareTitle:"Join a live collaboration session on Excalidraw"},QH={title:"Error"},JH={disk_title:"Save to disk",disk_details:"Export the scene data to a file from which you can import later.",disk_button:"Save to file",link_title:"Shareable link",link_details:"Export as a read-only link.",link_button:"Export to Link",excalidrawplus_description:"Save the scene to your Excalidraw+ workspace.",excalidrawplus_button:"Export",excalidrawplus_exportError:"Couldn't export to Excalidraw+ at this moment..."},eV={blog:"Read our blog",click:"click",deepSelect:"Deep select",deepBoxSelect:"Deep select within box, and prevent dragging",createFlowchart:"Create a flowchart from a generic element",navigateFlowchart:"Navigate a flowchart",curvedArrow:"Curved arrow",curvedLine:"Curved line",documentation:"Documentation",doubleClick:"double-click",drag:"drag",editor:"Editor",editLineArrowPoints:"Edit line/arrow points",editText:"Edit text / add label",github:"Found an issue? Submit",howto:"Follow our guides",or:"or",preventBinding:"Prevent arrow binding",tools:"Tools",shortcuts:"Keyboard shortcuts",textFinish:"Finish editing (text editor)",textNewLine:"Add new line (text editor)",title:"Help",view:"View",zoomToFit:"Zoom to fit all elements",zoomToSelection:"Zoom to selection",toggleElementLock:"Lock/unlock selection",movePageUpDown:"Move page up/down",movePageLeftRight:"Move page left/right",cropStart:"Crop image",cropFinish:"Finish image cropping"},tV={title:"Clear canvas"},nV={title:"Publish library",itemName:"Item name",authorName:"Author name",githubUsername:"GitHub username",twitterUsername:"Twitter username",libraryName:"Library name",libraryDesc:"Library description",website:"Website",placeholder:{authorName:"Your name or username",libraryName:"Name of your library",libraryDesc:"Description of your library to help people understand its usage",githubHandle:"GitHub handle (optional), so you can edit the library once submitted for review",twitterHandle:"Twitter username (optional), so we know who to credit when promoting over Twitter",website:"Link to your personal website or elsewhere (optional)"},errors:{required:"Required",website:"Enter a valid URL"},noteDescription:"Submit your library to be included in the <link>public library repository</link> for other people to use in their drawings.",noteGuidelines:"The library needs to be manually approved first. Please read the <link>guidelines</link> before submitting. You will need a GitHub account to communicate and make changes if requested, but it is not strictly required.",noteLicense:"By submitting, you agree the library will be published under the <link>MIT License</link>, which in short means anyone can use them without restrictions.",noteItems:"Each library item must have its own name so it's filterable. The following library items will be included:",atleastOneLibItem:"Please select at least one library item to get started",republishWarning:"Note: some of the selected items are marked as already published/submitted. You should only resubmit items when updating an existing library or submission."},iV={title:"Library submitted",content:"Thank you {{authorName}}. Your library has been submitted for review. You can track the status <link>here</link>"},rV={resetLibrary:"Reset library",removeItemsFromLib:"Remove selected items from library"},sV={header:"Export image",label:{withBackground:"Background",onlySelected:"Only selected",darkMode:"Dark mode",embedScene:"Embed scene",scale:"Scale",padding:"Padding"},tooltip:{embedScene:`Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.
Will increase exported file size.`},title:{exportToPng:"Export to PNG",exportToSvg:"Export to SVG",copyPngToClipboard:"Copy PNG to clipboard"},button:{exportToPng:"PNG",exportToSvg:"SVG",copyPngToClipboard:"Copy to clipboard"}},oV={tooltip:"Your drawings are end-to-end encrypted so Excalidraw's servers will never see them.",link:"Blog post on end-to-end encryption in Excalidraw"},aV={angle:"Angle",shapes:"Shapes",height:"Height",scene:"Scene",selected:"Selected",storage:"Storage",fullTitle:"Canvas & Shape properties",title:"Properties",generalStats:"General",elementProperties:"Shape properties",total:"Total",version:"Version",versionCopy:"Click to copy",versionNotAvailable:"Version not available",width:"Width"},lV={addedToLibrary:"Added to library",copyStyles:"Copied styles.",copyToClipboard:"Copied to clipboard.",copyToClipboardAsPng:`Copied {{exportSelection}} to clipboard as PNG
({{exportColorScheme}})`,copyToClipboardAsSvg:`Copied {{exportSelection}} to clipboard as SVG
({{exportColorScheme}})`,fileSaved:"File saved.",fileSavedToFilename:"Saved to {filename}",canvas:"canvas",selection:"selection",pasteAsSingleElement:`Use {{shortcut}} to paste as a single element,
or paste into an existing text editor`,unableToEmbed:"Embedding this url is currently not allowed. Raise an issue on GitHub to request the url whitelisted",unrecognizedLinkFormat:"The link you embedded does not match the expected format. Please try to paste the 'embed' string provided by the source site",elementLinkCopied:"Link copied to clipboard"},cV={transparent:"Transparent",black:"Black",white:"White",red:"Red",pink:"Pink",grape:"Grape",violet:"Violet",gray:"Gray",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",yellow:"Yellow",orange:"Orange",bronze:"Bronze"},uV={app:{center_heading:"All your data is saved locally in your browser.",center_heading_plus:"Did you want to go to the Excalidraw+ instead?",menuHint:"Export, preferences, languages, ..."},defaults:{menuHint:"Export, preferences, and more...",center_heading:"Diagrams. Made. Simple.",toolbarHint:"Pick a tool & Start drawing!",helpHint:"Shortcuts & help"}},dV={color:"Color",mostUsedCustomColors:"Most used custom colors",colors:"Colors",shades:"Shades",hexCode:"Hex code",noShades:"No shades available for this color"},fV={action:{exportToImage:{title:"Export as image",button:"Export as image",description:"Export the scene data as an image from which you can import later."},saveToDisk:{title:"Save to disk",button:"Save to disk",description:"Export the scene data to a file from which you can import later."},excalidrawPlus:{title:"Excalidraw+",button:"Export to Excalidraw+",description:"Save the scene to your Excalidraw+ workspace."}},modal:{loadFromFile:{title:"Load from file",button:"Load from file",description:"Loading from a file will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first using one of the options below."},shareableLink:{title:"Load from link",button:"Replace my content",description:"Loading external drawing will <bold>replace your existing content</bold>.<br></br>You can back up your drawing first by using one of the options below."}}},hV={title:"Mermaid to Excalidraw",button:"Insert",description:"Currently only <flowchartLink>Flowchart</flowchartLink>,<sequenceLink> Sequence, </sequenceLink> and <classLink>Class </classLink>Diagrams are supported. The other types will be rendered as image in Excalidraw.",syntax:"Mermaid Syntax",preview:"Preview"},gV={placeholder:"Quick search"},mV={badge:{old:"old"},sceneFonts:"In this scene",availableFonts:"Available fonts",empty:"No fonts found"},pV={empty:"No users found",hint:{text:"Click on user to follow",followStatus:"You're currently following this user",inCall:"User is in a voice call",micMuted:"User's microphone is muted",isSpeaking:"User is speaking"}},UV={title:"Command palette",shortcuts:{select:"Select",confirm:"Confirm",close:"Close"},recents:"Recently used",search:{placeholder:"Search menus, commands, and discover hidden gems",noMatch:"No matching commands..."},itemNotAvailable:"Command is not available...",shortcutHint:"For Command palette, use {{shortcut}}"},bV={ctrl:"Ctrl",option:"Option",cmd:"Cmd",alt:"Alt",escape:"Esc",enter:"Enter",shift:"Shift",spacebar:"Space",delete:"Delete",mmb:"Scroll wheel"},z_={labels:PH,elementLink:FH,library:BH,search:zH,buttons:HH,alerts:VH,errors:$H,toolBar:GH,element:XH,headings:jH,hints:YH,canvasError:WH,errorSplash:KH,shareDialog:ZH,roomDialog:qH,errorDialog:QH,exportDialog:JH,helpDialog:eV,clearCanvasDialog:tV,publishDialog:nV,publishSuccessDialog:iV,confirmDialog:rV,imageExportDialog:sV,encrypted:oV,stats:aV,toast:lV,colors:cV,welcomeScreen:uV,colorPicker:dV,overwriteConfirm:fV,mermaid:hV,quickSearch:gV,fontList:mV,userList:pV,commandPalette:UV,keys:bV},ade=Object.freeze(Object.defineProperty({__proto__:null,alerts:VH,buttons:HH,canvasError:WH,clearCanvasDialog:tV,colorPicker:dV,colors:cV,commandPalette:UV,confirmDialog:rV,default:z_,element:XH,elementLink:FH,encrypted:oV,errorDialog:QH,errorSplash:KH,errors:$H,exportDialog:JH,fontList:mV,headings:jH,helpDialog:eV,hints:YH,imageExportDialog:sV,keys:bV,labels:PH,library:BH,mermaid:hV,overwriteConfirm:fV,publishDialog:nV,publishSuccessDialog:iV,quickSearch:gV,roomDialog:qH,search:zH,shareDialog:ZH,stats:aV,toast:lV,toolBar:GH,userList:pV,welcomeScreen:uV},Symbol.toStringTag,{value:"Module"})),yV=100,EV=23,vV={"ar-SA":91,"az-AZ":27,"bg-BG":70,"bn-BD":42,"bn-IN":42,"ca-ES":91,"cs-CZ":82,"da-DK":31,"de-CH":91,"de-DE":91,"el-GR":86,en:yV,"es-ES":91,"eu-ES":78,"fa-IR":91,"fi-FI":67,"fr-FR":99,"gl-ES":67,"he-IL":91,"hi-IN":91,"hu-HU":53,"id-ID":90,"it-IT":91,"ja-JP":82,kaa:EV,"kab-KAB":60,"kk-KZ":14,"km-KH":60,"ko-KR":81,"ku-TR":64,"lt-LT":37,"lv-LV":57,"mr-IN":91,"my-MM":27,"nb-NO":91,"nl-NL":59,"nn-NO":48,"oc-FR":75,"pa-IN":58,"pl-PL":100,"pt-BR":90,"pt-PT":91,"ro-RO":100,"ru-RU":91,"si-LK":75,"sk-SK":91,"sl-SI":91,"sv-SE":91,"ta-IN":86,"th-TH":63,"tr-TR":94,"uk-UA":90,"uz-UZ":0,"vi-VN":75,"zh-CN":100,"zh-HK":17,"zh-TW":91},lde=Object.freeze(Object.defineProperty({__proto__:null,default:vV,en:yV,kaa:EV},Symbol.toStringTag,{value:"Module"})),cde=85,$d={code:"en",label:"English"},Uy=[$d,...[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"cs-CZ",label:"esky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:" "},{code:"ko-KR",label:""},{code:"ku-TR",label:"Kurd"},{code:"lt-LT",label:"Lietuvi"},{code:"lv-LV",label:"Latvieu"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Slovenina"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""},{code:"vi-VN",label:"Ting Vit"},{code:"mr-IN",label:""}].filter(e=>vV[e.code]>=cde).sort((e,t)=>e.label>t.label?1:-1)],wV="__test__";let Kf=$d,$2={};const _V=async e=>{if(Kf=e,document.documentElement.dir=Kf.rtl?"rtl":"ltr",document.documentElement.lang=Kf.code,e.code.startsWith(wV))$2={};else try{$2=await jue(Object.assign({"./locales/ar-SA.json":()=>Ee(()=>import("./locales/ar-SA.json-Bs6R135r.js"),__vite__mapDeps([]),import.meta.url),"./locales/az-AZ.json":()=>Ee(()=>import("./locales/az-AZ.json-BYSpKLDC.js"),__vite__mapDeps([]),import.meta.url),"./locales/bg-BG.json":()=>Ee(()=>import("./locales/bg-BG.json-CXXy5net.js"),__vite__mapDeps([]),import.meta.url),"./locales/bn-BD.json":()=>Ee(()=>import("./locales/bn-BD.json-oWHQ_B04.js"),__vite__mapDeps([]),import.meta.url),"./locales/bn-IN.json":()=>Ee(()=>import("./locales/bn-IN.json-CKE9Q-wh.js"),__vite__mapDeps([]),import.meta.url),"./locales/ca-ES.json":()=>Ee(()=>import("./locales/ca-ES.json-9we--f2Z.js"),__vite__mapDeps([]),import.meta.url),"./locales/cs-CZ.json":()=>Ee(()=>import("./locales/cs-CZ.json-C7LNS4Fx.js"),__vite__mapDeps([]),import.meta.url),"./locales/da-DK.json":()=>Ee(()=>import("./locales/da-DK.json-BQL7-425.js"),__vite__mapDeps([]),import.meta.url),"./locales/de-CH.json":()=>Ee(()=>import("./locales/de-CH.json-Dnl6nIBW.js"),__vite__mapDeps([]),import.meta.url),"./locales/de-DE.json":()=>Ee(()=>import("./locales/de-DE.json-Dnl6nIBW.js"),__vite__mapDeps([]),import.meta.url),"./locales/el-GR.json":()=>Ee(()=>import("./locales/el-GR.json-Ckfl66pD.js"),__vite__mapDeps([]),import.meta.url),"./locales/en.json":()=>Ee(()=>Promise.resolve().then(()=>ade),void 0,import.meta.url),"./locales/es-ES.json":()=>Ee(()=>import("./locales/es-ES.json-CUcsdQDl.js"),__vite__mapDeps([]),import.meta.url),"./locales/eu-ES.json":()=>Ee(()=>import("./locales/eu-ES.json-CSNkgXhr.js"),__vite__mapDeps([]),import.meta.url),"./locales/fa-IR.json":()=>Ee(()=>import("./locales/fa-IR.json-FFpaP7Q2.js"),__vite__mapDeps([]),import.meta.url),"./locales/fi-FI.json":()=>Ee(()=>import("./locales/fi-FI.json-B4yqNlKo.js"),__vite__mapDeps([]),import.meta.url),"./locales/fr-FR.json":()=>Ee(()=>import("./locales/fr-FR.json-DfQ4eYl8.js"),__vite__mapDeps([]),import.meta.url),"./locales/gl-ES.json":()=>Ee(()=>import("./locales/gl-ES.json-DFMZpFiO.js"),__vite__mapDeps([]),import.meta.url),"./locales/he-IL.json":()=>Ee(()=>import("./locales/he-IL.json-CFt8az2F.js"),__vite__mapDeps([]),import.meta.url),"./locales/hi-IN.json":()=>Ee(()=>import("./locales/hi-IN.json-BtmIz8fq.js"),__vite__mapDeps([]),import.meta.url),"./locales/hu-HU.json":()=>Ee(()=>import("./locales/hu-HU.json-Bb-nig7n.js"),__vite__mapDeps([]),import.meta.url),"./locales/id-ID.json":()=>Ee(()=>import("./locales/id-ID.json-DyVtaCAr.js"),__vite__mapDeps([]),import.meta.url),"./locales/it-IT.json":()=>Ee(()=>import("./locales/it-IT.json-C0H77bAN.js"),__vite__mapDeps([]),import.meta.url),"./locales/ja-JP.json":()=>Ee(()=>import("./locales/ja-JP.json-DQmC5_NN.js"),__vite__mapDeps([]),import.meta.url),"./locales/kaa.json":()=>Ee(()=>import("./locales/kaa.json-CVs6He4h.js"),__vite__mapDeps([]),import.meta.url),"./locales/kab-KAB.json":()=>Ee(()=>import("./locales/kab-KAB.json-C1JM5BKr.js"),__vite__mapDeps([]),import.meta.url),"./locales/kk-KZ.json":()=>Ee(()=>import("./locales/kk-KZ.json-Dvqamimz.js"),__vite__mapDeps([]),import.meta.url),"./locales/km-KH.json":()=>Ee(()=>import("./locales/km-KH.json-DbT3p73L.js"),__vite__mapDeps([]),import.meta.url),"./locales/ko-KR.json":()=>Ee(()=>import("./locales/ko-KR.json-DREmLTQS.js"),__vite__mapDeps([]),import.meta.url),"./locales/ku-TR.json":()=>Ee(()=>import("./locales/ku-TR.json-DrQA-YfD.js"),__vite__mapDeps([]),import.meta.url),"./locales/lt-LT.json":()=>Ee(()=>import("./locales/lt-LT.json-DGRPFWD1.js"),__vite__mapDeps([]),import.meta.url),"./locales/lv-LV.json":()=>Ee(()=>import("./locales/lv-LV.json-CASIfe6V.js"),__vite__mapDeps([]),import.meta.url),"./locales/mr-IN.json":()=>Ee(()=>import("./locales/mr-IN.json-hSf8Ju5N.js"),__vite__mapDeps([]),import.meta.url),"./locales/my-MM.json":()=>Ee(()=>import("./locales/my-MM.json-6v_t93UK.js"),__vite__mapDeps([]),import.meta.url),"./locales/nb-NO.json":()=>Ee(()=>import("./locales/nb-NO.json-Dqd12NPv.js"),__vite__mapDeps([]),import.meta.url),"./locales/nl-NL.json":()=>Ee(()=>import("./locales/nl-NL.json-CKcuiTwv.js"),__vite__mapDeps([]),import.meta.url),"./locales/nn-NO.json":()=>Ee(()=>import("./locales/nn-NO.json-Dr77ZhXZ.js"),__vite__mapDeps([]),import.meta.url),"./locales/oc-FR.json":()=>Ee(()=>import("./locales/oc-FR.json-38R0RC-s.js"),__vite__mapDeps([]),import.meta.url),"./locales/pa-IN.json":()=>Ee(()=>import("./locales/pa-IN.json-BpVd2R6L.js"),__vite__mapDeps([]),import.meta.url),"./locales/percentages.json":()=>Ee(()=>Promise.resolve().then(()=>lde),void 0,import.meta.url),"./locales/pl-PL.json":()=>Ee(()=>import("./locales/pl-PL.json-SCtPkDvk.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-BR.json":()=>Ee(()=>import("./locales/pt-BR.json-4ytUdxoG.js"),__vite__mapDeps([]),import.meta.url),"./locales/pt-PT.json":()=>Ee(()=>import("./locales/pt-PT.json-BkfB8CUn.js"),__vite__mapDeps([]),import.meta.url),"./locales/ro-RO.json":()=>Ee(()=>import("./locales/ro-RO.json-GYlv0K-e.js"),__vite__mapDeps([]),import.meta.url),"./locales/ru-RU.json":()=>Ee(()=>import("./locales/ru-RU.json-D2N8VkFv.js"),__vite__mapDeps([]),import.meta.url),"./locales/si-LK.json":()=>Ee(()=>import("./locales/si-LK.json-LOvgQPv-.js"),__vite__mapDeps([]),import.meta.url),"./locales/sk-SK.json":()=>Ee(()=>import("./locales/sk-SK.json-7_zsSOcw.js"),__vite__mapDeps([]),import.meta.url),"./locales/sl-SI.json":()=>Ee(()=>import("./locales/sl-SI.json-Bb5hfJhH.js"),__vite__mapDeps([]),import.meta.url),"./locales/sv-SE.json":()=>Ee(()=>import("./locales/sv-SE.json-fmW0iDNi.js"),__vite__mapDeps([]),import.meta.url),"./locales/ta-IN.json":()=>Ee(()=>import("./locales/ta-IN.json-Bzd7wSNN.js"),__vite__mapDeps([]),import.meta.url),"./locales/th-TH.json":()=>Ee(()=>import("./locales/th-TH.json-pMNO3aZd.js"),__vite__mapDeps([]),import.meta.url),"./locales/tr-TR.json":()=>Ee(()=>import("./locales/tr-TR.json-D4RLn_Mi.js"),__vite__mapDeps([]),import.meta.url),"./locales/uk-UA.json":()=>Ee(()=>import("./locales/uk-UA.json-xSuXt7gp.js"),__vite__mapDeps([]),import.meta.url),"./locales/uz-UZ.json":()=>Ee(()=>import("./locales/uz-UZ.json-LZHw8Q0p.js"),__vite__mapDeps([]),import.meta.url),"./locales/vi-VN.json":()=>Ee(()=>import("./locales/vi-VN.json-C6kgtI1G.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-CN.json":()=>Ee(()=>import("./locales/zh-CN.json-DJzJ6ZIt.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-HK.json":()=>Ee(()=>import("./locales/zh-HK.json-BWMcw_hi.js"),__vite__mapDeps([]),import.meta.url),"./locales/zh-TW.json":()=>Ee(()=>import("./locales/zh-TW.json-DhrABcfR.js"),__vite__mapDeps([]),import.meta.url)}),`./locales/${Kf.code}.json`)}catch(t){console.error(`Failed to load language ${e.code}:`,t.message),$2=z_}Xr.set(TV,e.code)},b0=()=>Kf,$M=(e,t)=>{for(let n=0;n<t.length;++n){const i=t[n];if(e[i]===void 0)return;e=e[i]}if(typeof e=="string")return e},R=(e,t,n)=>{if(Kf.code.startsWith(wV))return`[[${t?`${e}(${JSON.stringify(t).slice(1,-1)})`:e}]]`;const i=e.split(".");let r=$M($2,i)||$M(z_,i)||n;if(r===void 0){const s=`Can't find translation for ${e}`;return console.warn(s),""}if(t)for(const s in t)r=r.replace(`{{${s}}}`,String(t[s]));return r},TV=Wt($d.code),fn=()=>{const e=OH(TV);return{t:R,langCode:e}},ude=(e,t)=>{const[n,i,r,s]=t,{x:o,y:a}=Kr({sceneX:n,sceneY:i},e),{x:l,y:c}=Kr({sceneX:r,sceneY:s},e);return l-o>e.width||c-a>e.height},IV=({scenePoint:e,viewportDimensions:t,zoom:n,offsets:i})=>{let r=(t.width-((i==null?void 0:i.right)??0))/2/n.value-e.x;r+=((i==null?void 0:i.left)??0)/2/n.value;let s=(t.height-((i==null?void 0:i.bottom)??0))/2/n.value-e.y;return s+=((i==null?void 0:i.top)??0)/2/n.value,{scrollX:r,scrollY:s}},y0=(e,t)=>{if(e=Gue(e),!e.length)return{scrollX:0,scrollY:0};let[n,i,r,s]=nt(e);ude(t,[n,i,r,s])&&([n,i,r,s]=gce(e,Nt({clientX:t.scrollX,clientY:t.scrollY},t)));const o=(n+r)/2,a=(i+s)/2;return IV({scenePoint:{x:o,y:a},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},Va=e=>Ze(Ya(e,6),O9,P9),dde=e=>Ze(Math.round(e),1,100),SV=e=>Ze(Math.round(e),1,100),eo=e=>"var(--icon-fill-color)",xV=e=>e===ke.LIGHT?yi.white:"#1e1e1e",Y=(e,t=512)=>{const{width:n=512,height:i=n,mirror:r,style:s,...o}=typeof t=="number"?{width:t}:t;return g("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${n} ${i}`,className:ce({"rtl-mirror":r}),style:s,...o,children:typeof e=="string"?g("path",{fill:"currentColor",d:e}):e})},le={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Be={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:3,y:8,width:18,height:4,rx:1}),g("line",{x1:12,y1:8,x2:12,y2:21}),g("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),g("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),le);const CV=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),g("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),g("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),g("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),le),fde=Y(N("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),le),hde=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"1"}),g("circle",{cx:"12",cy:"19",r:"1"}),g("circle",{cx:"12",cy:"5",r:"1"})]}),le),gde=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),g("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),g("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),le),mde=Y(N("svg",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),g("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),g("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),le),GM=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M6.5 9.5l3.5 -3"}),g("path",{d:"M14 5.5l3 1.5"}),g("path",{d:"M18.5 10l-2.5 7"}),g("path",{d:"M13.5 17.5l-7 -5"})]}),le),by=Y(N("g",{children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:g("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),g("g",{mask:"url(#UnlockedIcon)",children:g("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),Be),H_=Y(N("g",{strokeWidth:"1.25",children:[g("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),g("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),Be),pde=Y(g("g",{fill:"currentColor",children:g("path",{d:"M12 2a5 5 0 0 1 5 5v3a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-10a3 3 0 0 1 -3 -3v-6a3 3 0 0 1 3 -3v-3a5 5 0 0 1 5 -5m0 12a2 2 0 0 0 -1.995 1.85l-.005 .15a2 2 0 1 0 2 -2m0 -10a3 3 0 0 0 -3 3v3h6v-3a3 3 0 0 0 -3 -3"})}),{width:24,height:24}),Ude=Y(N(fe,{children:[g("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),g("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),bde=Y(N(fe,{children:[g("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),g("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),yde=Y(N(fe,{children:[g("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),g("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),g("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),k6=Y(g("g",{fill:"currentColor",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),yy=Y(N("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),g("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),x1=Y(N("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[g("path",{d:"M4.028 13.252c-.657 -.972 -1.028 -2.078 -1.028 -3.252c0 -3.866 4.03 -7 9 -7s9 3.134 9 7s-4.03 7 -9 7c-1.913 0 -3.686 -.464 -5.144 -1.255"}),g("path",{d:"M5 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 17c0 1.42 .316 2.805 1 4"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),V_=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),le),$_=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),le),G_=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"})]}),le),AV=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),g("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),le),X_=Y(g("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),Be),Ede=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),g("path",{d:"M16 7h4"}),g("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),le),Rp=Y(N("g",{strokeWidth:"1.25",children:[g("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),g("path",{d:"m11.25 5.417 3.333 3.333"})]}),Be),gh=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),g("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),g("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),g("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),g("polyline",{points:"5 20 11 4 13 4 20 20"})]}),le),vde=Y(N("g",{stroke:"currentColor",strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),le),G2=Y(N("g",{strokeWidth:"1.25",children:[g("path",{d:"M12.5 6.667h.01"}),g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),g("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),g("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),Be),MV=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),g("path",{d:"M18 13.3l-6.3 -6.3"})]}),le),XM=Y(g("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),Be),jM=Y(g("path",{d:"M5 10h10",strokeWidth:"1.25"}),Be),wde=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 21l-6 -6"}),g("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),g("path",{d:"M3 4v4h4"})]}),le),$c=Y(g("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),Be),L6=Y(N("g",{strokeWidth:"1.5",children:[g("polyline",{points:"12 16 18 10 12 4"}),g("polyline",{points:"8 4 2 10 8 16"})]}),Be),iv=Y(N("g",{strokeWidth:"1.25",children:[g("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),g("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),Be),rv=Y(g("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),Be),sv=Y(g("g",{stroke:"currentColor",strokeLinejoin:"round",children:g("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),{...Be,strokeWidth:1.5}),_de=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),g("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),le),Ey=Y(g("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),Be),j_=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),le),Tde=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"12",cy:"12",r:"9"}),g("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),le),YM=Y(g("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),Be),Y_=Y(g("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),Be),RV=Y(N("g",{strokeWidth:"1.25",children:[g("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),g("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),Be),kV=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),g("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),le),Ide=Y(g("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),D6=Y(N("g",{strokeWidth:"1.25",children:[g("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),g("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),Be),Sde=Y("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),xde=Y("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),W_=Y(g("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),Be);Y("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512});Y("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z");const q8=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),g("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),g("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),le),Cde=Y(g("g",{strokeWidth:1.5,children:g("path",{d:"M6 18l12 -12"})}),le),LV=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8h.01"}),g("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),g("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),g("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),g("path",{d:"M19 16v6"}),g("path",{d:"M22 19l-3 3l-3 -3"})]}),le),Ade=Y("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512});Y("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});Y("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512});const Mde=Y("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z");Y("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z");const WM=Y(g("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),Be),KM=Y(g("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),Be),Rde=Y("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),K_=Y(g("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),Be),kde=Y("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),Lde=Y("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),Dde=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),g("path",{d:"M12 14v-11"}),g("path",{d:"M9 6l3 -3l3 3"})]}),le),Nde=Y(N(fe,{children:[g("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),g("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64});Y(g("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024});const DV=N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 10l0 10"}),g("path",{d:"M12 10l4 4"}),g("path",{d:"M12 10l-4 4"}),g("path",{d:"M4 4l16 0"})]}),NV=N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 5l0 14"}),g("path",{d:"M16 9l-4 -4"}),g("path",{d:"M8 9l4 -4"})]}),ZM=Y(NV,le),qM=Y(NV,{...le,style:{transform:"rotate(180deg)"}}),QM=Y(DV,le),JM=Y(DV,{...le,style:{transform:"rotate(180deg)"}}),eR=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),tR=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),nR=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),iR=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),Ode=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),Pde=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),rR=Y(N("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),g("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),Be),sR=Y(N("g",{stroke:"currentColor",strokeWidth:"1.25",children:[g("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),g("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),g("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),Be),Z_=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("circle",{cx:"9",cy:"7",r:"4"}),g("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),g("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),g("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),le);Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z");Y("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z");const au=Y(N(fe,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M15 5 5 15M5 5l10 10"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be);Y("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0});const Fde=Y("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24});Y("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512});const oR=ue.memo(({theme:e})=>Y(N(fe,{children:[g("path",{d:"M25 26H111V111H25",fill:eo()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:eo(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:eo()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:eo(),strokeWidth:"2"}),N("g",{fill:xV(e),stroke:eo(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),aR=ue.memo(({theme:e})=>Y(N(fe,{children:[g("path",{d:"M25 26H111V111H25",fill:eo()}),g("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:eo(),strokeWidth:"2"}),g("path",{d:"M100 100H160V160H100",fill:eo()}),g("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:eo(),strokeWidth:"2"}),N("g",{fill:xV(e),stroke:eo(),strokeWidth:"6",children:[g("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),g("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),g("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),g("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Bde=Y(g("g",{strokeWidth:1.25,children:g("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),Be),zde=Y(N(fe,{children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),g("g",{mask:"url(#FillHachureIcon)",children:g("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Be),Hde=Y(N(fe,{children:[N("g",{clipPath:"url(#a)",children:[g("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),g("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:g("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("g",{mask:"url(#FillCrossHatchIcon)",children:g("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),Vde=Y(N(fe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...Be,fill:"currentColor"}),OV=Y(g(fe,{children:g("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Be),$de=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),Be),Gde=Y(g("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),Be);ue.memo(({theme:e})=>Y(g("path",{d:"M6 10H34",stroke:eo(),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20}));const Xde=Y(N("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12h2"}),g("path",{d:"M17 12h2"}),g("path",{d:"M11 12h2"})]}),le),jde=Y(N("g",{strokeWidth:"2",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M8 12v.01"}),g("path",{d:"M12 12v.01"}),g("path",{d:"M16 12v.01"}),g("path",{d:"M20 12v.01"})]}),le),Yde=Y(g("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),Be),Wde=Y(g("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),Be),Kde=Y(g("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),Be),Zde=Y(N("svg",{strokeWidth:"1.5",children:[g("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),g("path",{d:"M13.3333 3.33331V3.34331"}),g("path",{d:"M16.6667 3.33331V3.34331"}),g("path",{d:"M16.6667 6.66669V6.67669"}),g("path",{d:"M16.6667 10V10.01"}),g("path",{d:"M3.33334 13.3333V13.3433"}),g("path",{d:"M16.6667 13.3333V13.3433"}),g("path",{d:"M3.33334 16.6667V16.6767"}),g("path",{d:"M6.66666 16.6667V16.6767"}),g("path",{d:"M10 16.6667V16.6767"}),g("path",{d:"M13.3333 16.6667V16.6767"}),g("path",{d:"M16.6667 16.6667V16.6767"})]}),Be),qde=Y(N("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),g("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),g("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),g("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),g("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),g("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),g("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),g("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),g("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),g("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),g("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),g("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),le),Qde=Y(N("g",{stroke:"currentColor",opacity:.3,strokeWidth:2,children:[g("path",{d:"M12 12l9 0"}),g("path",{d:"M3 9l6 6"}),g("path",{d:"M3 15l6 -6"})]}),le),ov=ue.memo(({flip:e=!1})=>Y(N("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[g("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),g("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),Jde=ue.memo(({flip:e=!1})=>Y(N("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),efe=ue.memo(({flip:e=!1})=>Y(N("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[g("path",{d:"M26 10L6 10"}),g("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),tfe=ue.memo(({flip:e=!1})=>Y(g("g",{transform:e?"translate(40, 0) scale(-1, 1)":"",children:g("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),nfe=ue.memo(({flip:e=!1})=>Y(N("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",children:[g("path",{d:"M32 10L6 10",strokeWidth:2}),g("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),ife=ue.memo(({flip:e=!1})=>Y(N("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[g("path",{d:"M6,9.5H27"}),g("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),rfe=ue.memo(({flip:e=!1})=>Y(N("g",{stroke:"currentColor",fill:"currentColor",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),sfe=ue.memo(({flip:e=!1})=>Y(N("g",{stroke:"currentColor",fill:"none",transform:e?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{d:"M6,9.5H20"}),g("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),ofe=ue.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),afe=ue.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,15 L15,5"})}),{width:40,height:20})),lfe=ue.memo(({flip:e=!1})=>Y(g("g",{stroke:"currentColor",fill:"none",transform:e?"":"translate(40, 0) scale(-1, 1)",strokeLinejoin:"round",strokeWidth:2,children:g("path",{d:"M34,10 H6 M15,10 L15,16 L15,4 M15,10 L7,5 M15,10 L7,15"})}),{width:40,height:20})),cfe=Y(N(fe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),ufe=Y(N(fe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),dfe=Y(N(fe,{children:[g("g",{clipPath:"url(#a)",children:g("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),ffe=Y(g(fe,{children:g("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),Be),vy=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 7v-2h13v2"}),g("path",{d:"M10 5v14"}),g("path",{d:"M12 19h-4"}),g("path",{d:"M15 13v-1h6v1"}),g("path",{d:"M18 12v7"}),g("path",{d:"M17 19h2"})]}),le),hfe=Y(g(fe,{children:N("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 12h10"}),g("path",{d:"M7 5v14"}),g("path",{d:"M17 5v14"}),g("path",{d:"M15 19h4"}),g("path",{d:"M15 5h4"}),g("path",{d:"M5 19h4"}),g("path",{d:"M5 5h4"})]})}),le),av=Y(g(fe,{children:g("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),Be),PV=Y(N(fe,{children:[g("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:g("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),g("defs",{children:g("clipPath",{id:"a",children:g("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),Be),gfe=Y(N("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),g("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),le),mfe=Y(N("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),g("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),le),pfe=Y(N("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),g("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),g("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),le),Ufe=ue.memo(({theme:e})=>Y(N("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),g("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),le)),bfe=ue.memo(({theme:e})=>Y(N("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),g("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),le)),yfe=ue.memo(({theme:e})=>Y(N("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),g("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),g("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),le)),FV=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M21 19h-18l9 -15"}),g("path",{d:"M20.615 15.171h.015"}),g("path",{d:"M19.515 11.771h.015"}),g("path",{d:"M17.715 8.671h.015"}),g("path",{d:"M15.415 5.971h.015"})]}),le),Efe=Y(g("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512});Y(g("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"}));const BV=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),g("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),g("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),le),lR=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 11l5 5l5 -5"}),g("path",{d:"M12 4l0 12"})]}),le),kp=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),g("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),le),vfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M9.15 14.85l8.85 -10.85"}),g("path",{d:"M6 4l8.85 10.85"})]}),le),wfe=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),g("path",{d:"M12 17l0 .01"}),g("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),le),_fe=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M7 4v16l13 -8z"})]}),le),Tfe=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),le),Ife=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 12l5 5l10 -10"})]}),le),Sfe=Y(N(fe,{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),g("path",{d:"M12 9v4"}),g("path",{d:"M12 17h.01"})]}),le),xfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l6 6"}),g("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),le),lv=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l-4 7h8z"}),g("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),g("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),le),ed=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 7l16 0"}),g("path",{d:"M4 17l16 0"}),g("path",{d:"M7 4l0 16"}),g("path",{d:"M17 4l0 16"})]}),le),q_=Y(g("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),X2=Y(N("g",{strokeWidth:"1.25",children:[g("path",{d:"M4.16602 10H15.8327"}),g("path",{d:"M12.5 13.3333L15.8333 10"}),g("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),Be),E0=Y(N("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[g("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),g("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),N6=Y(N("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),le);Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z"}),g("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),g("path",{d:"M15 6l3 3"}),g("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),g("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),le);Y(N("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),g("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),g("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),g("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),g("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),g("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),le);const Cfe=Y(N("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),le),Q_=Y(N("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),g("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),le),Afe=Y(N("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),g("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),g("path",{d:"M3 3l18 18"})]}),le),Mfe=Y(N("g",{stroke:"currentColor",fill:"none",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),le),Rfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),g("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),g("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),g("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),g("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),g("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),le),bd=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),g("path",{d:"M21 21l-6 -6"})]}),le),kfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),g("path",{d:"M12 7v5l3 3"}),g("path",{d:"M19 16l-2 3h4l-2 3"})]}),le),Lfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),g("path",{d:"M5 10a7 7 0 0 0 14 0"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),le),Dfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 3l18 18"}),g("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),g("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),g("path",{d:"M8 21l8 0"}),g("path",{d:"M12 17l0 4"})]}),le),cv=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),le),Nfe=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),g("path",{d:"M12 20v.01"}),g("path",{d:"M16 20v.01"}),g("path",{d:"M8 20v.01"}),g("path",{d:"M4 20v.01"}),g("path",{d:"M4 16v.01"}),g("path",{d:"M4 12v.01"}),g("path",{d:"M4 8v.01"}),g("path",{d:"M4 4v.01"}),g("path",{d:"M8 4v.01"}),g("path",{d:"M12 4v.01"}),g("path",{d:"M16 4v.01"}),g("path",{d:"M20 4v.01"}),g("path",{d:"M20 8v.01"}),g("path",{d:"M20 12v.01"}),g("path",{d:"M20 16v.01"}),g("path",{d:"M20 20v.01"})]}),le),Ofe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3v18"}),g("path",{d:"M19 21v-18"}),g("path",{d:"M5 7h14"}),g("path",{d:"M5 15h14"}),g("path",{d:"M8 13v4"}),g("path",{d:"M11 13v4"}),g("path",{d:"M16 13v4"}),g("path",{d:"M14 5v4"}),g("path",{d:"M11 5v4"}),g("path",{d:"M8 5v4"}),g("path",{d:"M3 21h18"})]}),le),Pfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 12l18 0"}),g("path",{d:"M7 16l10 0l-10 5l0 -5"}),g("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),le),Ffe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M12 3l0 18"}),g("path",{d:"M16 7l0 10l5 0l-5 -10"}),g("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),le),zV=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),g("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),g("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),le),J_=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),g("path",{d:"M22 22l-3 -3"}),g("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),g("path",{d:"M3 11v-1"}),g("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),g("path",{d:"M10 3h1"}),g("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),le),Bfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),g("path",{d:"M10 15l2 6l2 -6"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),le),zfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),g("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),g("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),g("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),g("path",{d:"M11 21v-6l3 6v-6"})]}),le),Hfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),g("path",{d:"M4 8l5 0"}),g("path",{d:"M15 8l4 0"})]}),le),Vfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),g("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),g("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),g("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),le),$fe=Y(N("g",{stroke:"currentColor",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-16a1 1 0 0 1-1-1v-10zM7 20h10M9 16v4M15 16v4"})]}),{...le,strokeWidth:1.5}),HV=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M21 12h-13l3 -3"}),g("path",{d:"M11 15l-3 -3"})]}),le),VV=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M2 8a4 4 0 0 1 4 -4h12a4 4 0 0 1 4 4v8a4 4 0 0 1 -4 4h-12a4 4 0 0 1 -4 -4v-8z"}),g("path",{d:"M10 9l5 3l-5 3z"})]}),le),Gfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),g("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),g("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),g("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"}),g("path",{d:"M7 12h10"}),g("path",{d:"M10 9v6"}),g("path",{d:"M14 9v6"})]}),le),Xfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 6h18"}),g("path",{d:"M3 12h18"}),g("path",{d:"M3 18h18"}),g("path",{d:"M6 3v18"}),g("path",{d:"M12 3v18"}),g("path",{d:"M18 3v18"})]}),le),jfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M17 3m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M3 17m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"}),g("path",{d:"M17 5c-6.627 0 -12 5.373 -12 12"})]}),le),eT=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 18l12 -12"}),g("path",{d:"M18 10v-4h-4"})]}),le),tT=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4,19L10,19C11.097,19 12,18.097 12,17L12,9C12,7.903 12.903,7 14,7L21,7"}),g("path",{d:"M18 4l3 3l-3 3"})]}),le),nT=Y(N("g",{children:[g("path",{d:"M16,12L20,9L16,6"}),g("path",{d:"M6 20c0 -6.075 4.925 -11 11 -11h3"})]}),le),$V=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 9l6 6l6 -6"})]}),le),Yfe=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),le),Wfe=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 15l6 -6l6 6"})]}),le),cR=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M8 5v10a1 1 0 0 0 1 1h10"}),g("path",{d:"M5 8h10a1 1 0 0 1 1 1v10"})]}),le),GV=Y(N("g",{children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M19 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M5 7l0 10"}),g("path",{d:"M7 5l10 0"}),g("path",{d:"M7 19l10 0"}),g("path",{d:"M19 7l0 10"})]}),le);Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 11v8a1 1 0 0 0 1 1h8m-9 -14v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1"}),g("path",{d:"M4 12h7a1 1 0 0 1 1 1v7"})]}),le);const Kfe=Y(N("g",{strokeWidth:1.5,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M4 6l8 0"}),g("path",{d:"M16 6l4 0"}),g("path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M4 12l2 0"}),g("path",{d:"M10 12l10 0"}),g("path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),g("path",{d:"M4 18l11 0"}),g("path",{d:"M19 18l1 0"})]}),le),Zfe=Y(N("g",{strokeWidth:1,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M6 10l4 -4 L6 14l8 -8 L6 18l12 -12 L10 18l8 -8 L14 18l4 -4"})]}),le),qfe=Y(N("g",{strokeWidth:1.25,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"}),g("path",{d:"M13.5 6.5l4 4"})]}),le);Y(N("g",{strokeWidth:1,children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M11 7l-5 5l5 5"}),g("path",{d:"M17 7l-5 5l5 5"})]}),le);const Qfe=Y(N("g",{strokeWidth:"1.75",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"}),g("path",{d:"M15 4l0 16"})]}),le),Jfe=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1"})]}),le),ehe=Y(N("g",{strokeWidth:"1.25",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M3 4l18 0"}),g("path",{d:"M4 4v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-10"}),g("path",{d:"M12 16l0 4"}),g("path",{d:"M9 20l6 0"}),g("path",{d:"M8 12l3 -3l2 2l3 -3"})]}),le),the=Y(N("g",{strokeWidth:"1.5",children:[g("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),g("path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"}),g("circle",{cx:"12",cy:"13",r:"3"})]}),le);class nhe extends Error{constructor(t="Couldn't export canvas.",n="CANVAS_ERROR"){super(),this.name=n,this.message=t}}class jh extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}class Ou extends Error{constructor(n="Image Scene Data Error",i="IMAGE_SCENE_DATA_ERROR"){super(n);F(this,"code");this.name="EncodingError",this.code=i}}class XV extends Error{constructor(n="Worker URL is not defined!",i="WORKER_URL_NOT_DEFINED"){super(n);F(this,"code");this.name="WorkerUrlNotDefinedError",this.code=i}}class jV extends Error{constructor(n="Worker has to be in a separate chunk!",i="WORKER_IN_THE_MAIN_CHUNK"){super(n);F(this,"code");this.name="WorkerInTheMainChunkError",this.code=i}}class to extends Error{constructor(t){super(t),this.name="ExcalidrawError"}}const ul=({size:e="1em",circleWidth:t=8,synchronized:n=!1,className:i=""})=>{const s=-(ue.useRef(Date.now()).current%1600);return g("div",{className:`Spinner ${i}`,children:g("svg",{viewBox:"0 0 100 100",style:{width:e,height:e,"--spinner-delay":n?`${s}ms`:0},children:g("circle",{cx:"50",cy:"50",r:50-t/2,strokeWidth:t,fill:"none",strokeMiterlimit:"10"})})})},Xe=ue.forwardRef(({size:e="medium",visible:t=!0,className:n="",...i},r)=>{const{id:s}=Dr(),o=ue.useRef(null);ue.useImperativeHandle(r,()=>o.current);const a=`ToolIcon_size_${e}`,[l,c]=L.useState(!1),u=L.useRef(!0),d=async h=>{var p;const m="onClick"in i&&((p=i.onClick)==null?void 0:p.call(i,h));if(Ep(m))try{c(!0),await m}catch(U){if(U instanceof jh)console.warn(U);else throw U}finally{u.current&&c(!1)}};L.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const f=L.useRef(null);if(i.type==="button"||i.type==="icon"||i.type==="submit"){const h=i.type==="icon"?"button":i.type;return N("button",{className:ce("ToolIcon_type_button",a,n,t&&!i.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!i.hidden,"ToolIcon--selected":i.selected,"ToolIcon--plain":i.type==="icon"}),style:i.style,"data-testid":i["data-testid"],hidden:i.hidden,title:i.title,"aria-label":i["aria-label"],type:h,onClick:d,ref:o,disabled:l||i.isLoading||!!i.disabled,children:[(i.icon||i.label)&&N("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":!!i.disabled,children:[i.icon||i.label,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel}),i.isLoading&&g(ul,{})]}),i.showAriaLabel&&N("div",{className:"ToolIcon__label",children:[i["aria-label"]," ",l&&g(ul,{})]}),i.children]})}return N("label",{className:ce("ToolIcon",n),title:i.title,onPointerDown:h=>{var m;f.current=h.pointerType||null,(m=i.onPointerDown)==null||m.call(i,{pointerType:h.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{f.current=null})},children:[g("input",{className:`ToolIcon_type_radio ${a}`,type:"radio",name:i.name,"aria-label":i["aria-label"],"aria-keyshortcuts":i["aria-keyshortcuts"],"data-testid":i["data-testid"],id:`${s}-${i.id}`,onChange:()=>{var h;(h=i.onChange)==null||h.call(i,{pointerType:f.current})},checked:i.checked,ref:o}),N("div",{className:"ToolIcon__icon",children:[i.icon,i.keyBindingLabel&&g("span",{className:"ToolIcon__keybinding",children:i.keyBindingLabel})]})]})});Xe.displayName="ToolButton";let uv=[];const de=e=>(uv=uv.concat(e),e),ihe=(e,t,n)=>{const i=new Set(Ge(e.filter(u=>we(u)),t).map(u=>u.id)),r={},s=n.scene.getNonDeletedElementsMap(),o=new Set;for(const u of i){const d=is(e,u);for(const f of d)if(!o.has(f.id)){if(Lt(f)){const h=Yn(f,s);h&&(r[h.id]=!0)}else r[f.id]=!0;o.add(f.id)}}let a=!0;const l=e.map(u=>{if(t.selectedElementIds[u.id]){const d=Lt(u)?Yn(u,s):null;return u.frameId&&i.has(u.frameId)?(a=!1,r[u.id]=!0,u):d!=null&&d.frameId&&i.has(d==null?void 0:d.frameId)?u:(u.boundElements&&u.boundElements.forEach(f=>{var m,p;const h=n.scene.getNonDeletedElementsMap().get(f.id);h&&pe(h)&&n.scene.mutateElement(h,{startBinding:u.id===((m=h.startBinding)==null?void 0:m.elementId)?null:h.startBinding,endBinding:u.id===((p=h.endBinding)==null?void 0:p.elementId)?null:h.endBinding})}),Ie(u,{isDeleted:!0}))}return u.frameId&&i.has(u.frameId)?(a=!1,Lt(u)||(r[u.id]=!0),Ie(u,{frameId:null})):Lt(u)&&t.selectedElementIds[u.containerId]?Ie(u,{isDeleted:!0}):u});let c=t.editingGroupId;if(a&&t.editingGroupId){const u=At(l,t.editingGroupId).filter(d=>!d.isDeleted);if(u.length>1)u[0]&&(r[u[0].id]=!0);else{c=null,u[0]&&(r[u[0].id]=!0);const d=u[0];if(d){const f=d.groupIds.findIndex(m=>m===t.editingGroupId),h=d.groupIds[f+1];if(h){const m=At(l,h).filter(p=>!p.isDeleted);m.length>1&&(c=h,m.forEach(p=>{r[p.id]=!0}))}}}}return{elements:l,appState:{...t,...Si({selectedElementIds:r,editingGroupId:c},l,t,null)}}},uR=(e,t)=>{if(e.editingGroupId){const n=At(Yt(t),e.editingGroupId);if(n.length)return{...e,selectedElementIds:{[n[0].id]:!0}}}return e},YV=de({name:"deleteSelectedElements",label:"labels.delete",icon:$c,trackEvent:{category:"element",action:"delete"},perform:(e,t,n,i)=>{var o;if((o=t.selectedLinearElement)!=null&&o.isEditing){const{elementId:a,selectedPointsIndices:l,startBindingElement:c,endBindingElement:u}=t.selectedLinearElement,d=i.scene.getNonDeletedElementsMap(),f=Ue.getElement(a,d);if(!f||l==null)return!1;if(l.length>=f.points.length){const m=e.map(U=>U.id===f.id?Ie(U,{isDeleted:!0}):U),p=uR(t,m);return{elements:m,appState:{...p,selectedLinearElement:null},captureUpdate:K.IMMEDIATELY}}const h={startBindingElement:l!=null&&l.includes(0)?null:c,endBindingElement:l!=null&&l.includes(f.points.length-1)?null:u};return Ue.deletePoints(f,i,l),{elements:e,appState:{...t,selectedLinearElement:{...t.selectedLinearElement,...h,selectedPointsIndices:(l==null?void 0:l[0])>0?[l[0]-1]:[0]}},captureUpdate:K.IMMEDIATELY}}let{elements:r,appState:s}=ihe(e,t,i);return Sz(r,r.filter(a=>a.isDeleted)),s=uR(s,r),{elements:r,appState:{...s,activeTool:tn(t,{type:i.state.preferredSelectionTool.type}),multiElement:null,activeEmbeddable:null,selectedLinearElement:null},captureUpdate:Wn(Yt(e),t)?K.IMMEDIATELY:K.EVENTUALLY}},keyTest:(e,t,n)=>(e.key===V.BACKSPACE||e.key===V.DELETE)&&!e[V.CTRL_OR_CMD],PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=ua()==="mobile";return g(Xe,{type:"button",icon:$c,title:R("labels.delete"),"aria-label":R("labels.delete"),onClick:()=>n(null),disabled:!Wn(Yt(e),t),style:{...r&&t.openPopup!=="compactOtherProperties"?mp:{}}})}}),J=e=>e.replace(/\b(Opt(?:ion)?|Alt)\b/i,R(ao?"keys.option":"keys.alt")).replace(/\bShift\b/i,R("keys.shift")).replace(/\b(Enter|Return)\b/i,R("keys.enter")).replace(/\b(Ctrl|Cmd|Command|CtrlOrCmd)\b/gi,R(ao?"keys.cmd":"keys.ctrl")).replace(/\b(Esc(?:ape)?)\b/i,R("keys.escape")).replace(/\b(Space(?:bar)?)\b/i,R("keys.spacebar")).replace(/\b(Del(?:ete)?)\b/i,R("keys.delete")),rhe=de({name:"sendBackward",label:"labels.sendBackward",keywords:["move down","zindex","layer"],icon:qM,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:zue(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[V.CTRL_OR_CMD]&&!e.shiftKey&&e.code===it.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${R("labels.sendBackward")}  ${J("CtrlOrCmd+[")}`,children:qM})}),she=de({name:"bringForward",label:"labels.bringForward",keywords:["move up","zindex","layer"],icon:ZM,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Hue(e,t,i.scene),appState:t,captureUpdate:K.IMMEDIATELY}),keyPriority:40,keyTest:e=>e[V.CTRL_OR_CMD]&&!e.shiftKey&&e.code===it.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${R("labels.bringForward")}  ${J("CtrlOrCmd+]")}`,children:ZM})}),ohe=de({name:"sendToBack",label:"labels.sendToBack",keywords:["move down","zindex","layer"],icon:JM,trackEvent:{category:"element"},perform:(e,t)=>({elements:Vue(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>ao?e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.BRACKET_LEFT:e[V.CTRL_OR_CMD]&&e.shiftKey&&e.code===it.BRACKET_LEFT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:()=>e(null),title:`${R("labels.sendToBack")}  ${J(ao?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")}`,children:JM})}),ahe=de({name:"bringToFront",label:"labels.bringToFront",keywords:["move up","zindex","layer"],icon:QM,trackEvent:{category:"element"},perform:(e,t)=>({elements:$ue(e,t),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>ao?e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.BRACKET_RIGHT:e[V.CTRL_OR_CMD]&&e.shiftKey&&e.code===it.BRACKET_RIGHT,PanelComponent:({updateData:e,appState:t})=>g("button",{type:"button",className:"zIndexButton",onClick:n=>e(null),title:`${R("labels.bringToFront")}  ${J(ao?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")}`,children:QM})}),lhe=de({name:"selectAll",label:"labels.selectAll",icon:Nfe,trackEvent:{category:"canvas"},viewMode:!1,perform:(e,t,n,i)=>{var s;if((s=t.selectedLinearElement)!=null&&s.isEditing)return!1;const r=e.filter(o=>!o.isDeleted&&!(ge(o)&&o.containerId)&&!o.locked).reduce((o,a)=>(o[a.id]=!0,o),{});return{appState:{...t,...Si({editingGroupId:null,selectedElementIds:r},Yt(e),t,i),selectedLinearElement:Object.keys(r).length===1&&xe(e[0])?new Ue(e[0],ve(e)):null},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[V.CTRL_OR_CMD]&&e.key===V.A}),che=de({name:"duplicateSelection",label:"labels.duplicateSelection",icon:iv,trackEvent:{category:"element"},perform:(e,t,n,i)=>{var o;if(t.selectedElementsAreBeingDragged)return!1;if((o=t.selectedLinearElement)!=null&&o.isEditing)try{const a=Ue.duplicateSelectedPoints(t,i.scene);return{elements:e,appState:a,captureUpdate:K.IMMEDIATELY}}catch{return!1}let{duplicatedElements:r,elementsWithDuplicates:s}=_1({type:"in-place",elements:e,idsOfElementsToDuplicate:ve(Ge(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0})),appState:t,randomizeSeed:!0,overrides:({origElement:a,origIdToDuplicateId:l})=>{const c=a.frameId&&l.get(a.frameId);return{x:a.x+Kb/2,y:a.y+Kb/2,frameId:c??a.frameId}}});if(i.props.onDuplicate&&s){const a=i.props.onDuplicate(s,e);a&&(s=a)}return{elements:lo(s,ve(r)),appState:{...t,...kz(r,Yt(s),t)},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[V.CTRL_OR_CMD]&&e.key===V.D,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=ua()==="mobile";return g(Xe,{type:"button",icon:iv,title:`${R("labels.duplicateSelection")}  ${J("CtrlOrCmd+D")}`,"aria-label":R("labels.duplicateSelection"),onClick:()=>n(null),disabled:!Wn(Yt(e),t),style:{...r&&t.openPopup!=="compactOtherProperties"?mp:{}}})}});var uhe={VITE_APP_BACKEND_V2_GET_URL:"https://json.excalidraw.com/api/v2/",VITE_APP_BACKEND_V2_POST_URL:"https://json.excalidraw.com/api/v2/post/",VITE_APP_LIBRARY_URL:"https://libraries.excalidraw.com",VITE_APP_LIBRARY_BACKEND:"https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries",VITE_APP_PLUS_LP:"https://plus.excalidraw.com",VITE_APP_PLUS_APP:"https://app.excalidraw.com",VITE_APP_AI_BACKEND:"https://oss-ai.excalidraw.com",VITE_APP_WS_SERVER_URL:"https://oss-collab.excalidraw.com",VITE_APP_FIREBASE_CONFIG:'{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}',VITE_APP_ENABLE_TRACKING:"true",VITE_APP_PLUS_EXPORT_PUBLIC_KEY:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`,VITE_APP_DEBUG_ENABLE_TEXT_CONTAINER_BOUNDING_BOX:"false",VITE_APP_COLLAPSE_OVERLAY:"false",VITE_APP_ENABLE_ESLINT:"false",VITE_APP_GIT_SHA:"",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const dhe=new Set(["command_palette","export"]),Je=(e,t,n,i)=>{try{if(typeof window>"u"||uhe.VITE_WORKER_ID||!dhe.has(e))return;Y9(),window.sa_event&&window.sa_event(t,{category:e,label:n,value:i})}catch(r){console.error("error during analytics",r)}},iT=L.forwardRef((e,t)=>{const{title:n,className:i,testId:r,active:s,standalone:o,icon:a,onClick:l}=e;return g("button",{type:"button",ref:t,title:n,"data-testid":r,className:ce(i,{standalone:o,active:s}),onClick:l,style:e.style,children:a},n)}),la=e=>g(fe,{children:e.options.map(t=>e.type==="button"?g(iT,{icon:t.icon,title:t.text,testId:t.testId,active:t.active??e.value===t.value,onClick:n=>e.onClick(t.value,n)},t.text):N("label",{className:ce({active:e.value===t.value}),title:t.text,children:[g("input",{type:"radio",name:e.group,onChange:()=>e.onChange(t.value),checked:e.value===t.value,"data-testid":t.testId}),t.icon]},t.text))});function Li(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function dR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function WV(...e){return t=>{let n=!1;const i=e.map(r=>{const s=dR(r,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():dR(e[r],null)}}}}function uo(...e){return L.useCallback(WV(...e),e)}function Lp(e,t=[]){let n=[];function i(s,o){const a=L.createContext(o),l=n.length;n=[...n,o];const c=d=>{var b;const{scope:f,children:h,...m}=d,p=((b=f==null?void 0:f[e])==null?void 0:b[l])||a,U=L.useMemo(()=>m,Object.values(m));return g(p.Provider,{value:U,children:h})};c.displayName=s+"Provider";function u(d,f){var p;const h=((p=f==null?void 0:f[e])==null?void 0:p[l])||a,m=L.useContext(h);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>L.createContext(o));return function(a){const l=(a==null?void 0:a[e])||s;return L.useMemo(()=>({[`__scope${e}`]:{...a,[e]:l}}),[a,l])}};return r.scopeName=e,[i,fhe(r,...t)]}function fhe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return L.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var v0=L.forwardRef((e,t)=>{const{children:n,...i}=e,r=L.Children.toArray(n),s=r.find(ghe);if(s){const o=s.props.children,a=r.map(l=>l===s?L.Children.count(o)>1?L.Children.only(null):L.isValidElement(o)?o.props.children:null:l);return g(dv,{...i,ref:t,children:L.isValidElement(o)?L.cloneElement(o,void 0,a):null})}return g(dv,{...i,ref:t,children:n})});v0.displayName="Slot";var dv=L.forwardRef((e,t)=>{const{children:n,...i}=e;if(L.isValidElement(n)){const r=phe(n),s=mhe(i,n.props);return n.type!==L.Fragment&&(s.ref=t?WV(t,r):r),L.cloneElement(n,s)}return L.Children.count(n)>1?L.Children.only(null):null});dv.displayName="SlotClone";var hhe=({children:e})=>g(fe,{children:e});function ghe(e){return L.isValidElement(e)&&e.type===hhe}function mhe(e,t){const n={...t};for(const i in t){const r=e[i],s=t[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function phe(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Uhe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],yr=Uhe.reduce((e,t)=>{const n=L.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?v0:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g(a,{...o,ref:r})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function bhe(e,t){e&&mi.flushSync(()=>e.dispatchEvent(t))}function dl(e){const t=L.useRef(e);return L.useEffect(()=>{t.current=e}),L.useMemo(()=>(...n)=>{var i;return(i=t.current)==null?void 0:i.call(t,...n)},[])}function yhe(e,t=globalThis==null?void 0:globalThis.document){const n=dl(e);L.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[n,t])}var Ehe="DismissableLayer",fv="dismissableLayer.update",vhe="dismissableLayer.pointerDownOutside",whe="dismissableLayer.focusOutside",fR,KV=L.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ZV=L.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=e,c=L.useContext(KV),[u,d]=L.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=L.useState({}),m=uo(t,_=>d(_)),p=Array.from(c.layers),[U]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(U),y=u?p.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,v=y>=b,I=Ihe(_=>{const T=_.target,A=[...c.branches].some(C=>C.contains(T));!v||A||(r==null||r(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),x=She(_=>{const T=_.target;[...c.branches].some(C=>C.contains(T))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return yhe(_=>{y===c.layers.size-1&&(i==null||i(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),L.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(fR=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),hR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=fR)}},[u,f,n,c]),L.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),hR())},[u,c]),L.useEffect(()=>{const _=()=>h({});return document.addEventListener(fv,_),()=>document.removeEventListener(fv,_)},[]),g(yr.div,{...l,ref:m,style:{pointerEvents:w?v?"auto":"none":void 0,...e.style},onFocusCapture:Li(e.onFocusCapture,x.onFocusCapture),onBlurCapture:Li(e.onBlurCapture,x.onBlurCapture),onPointerDownCapture:Li(e.onPointerDownCapture,I.onPointerDownCapture)})});ZV.displayName=Ehe;var _he="DismissableLayerBranch",The=L.forwardRef((e,t)=>{const n=L.useContext(KV),i=L.useRef(null),r=uo(t,i);return L.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g(yr.div,{...e,ref:r})});The.displayName=_he;function Ihe(e,t=globalThis==null?void 0:globalThis.document){const n=dl(e),i=L.useRef(!1),r=L.useRef(()=>{});return L.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){qV(vhe,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=l,t.addEventListener("click",r.current,{once:!0})):l()}else t.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}function She(e,t=globalThis==null?void 0:globalThis.document){const n=dl(e),i=L.useRef(!1);return L.useEffect(()=>{const r=s=>{s.target&&!i.current&&qV(whe,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function hR(){const e=new CustomEvent(fv);document.dispatchEvent(e)}function qV(e,t,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),i?bhe(r,s):r.dispatchEvent(s)}var Q8=0;function xhe(){L.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gR()),document.body.insertAdjacentElement("beforeend",e[1]??gR()),Q8++,()=>{Q8===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Q8--}},[])}function gR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var J8="focusScope.autoFocusOnMount",e3="focusScope.autoFocusOnUnmount",mR={bubbles:!1,cancelable:!0},Che="FocusScope",QV=L.forwardRef((e,t)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[a,l]=L.useState(null),c=dl(r),u=dl(s),d=L.useRef(null),f=uo(t,p=>l(p)),h=L.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;L.useEffect(()=>{if(i){let p=function(w){if(h.paused||!a)return;const v=w.target;a.contains(v)?d.current=v:Hl(d.current,{select:!0})},U=function(w){if(h.paused||!a)return;const v=w.relatedTarget;v!==null&&(a.contains(v)||Hl(d.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const I of w)I.removedNodes.length>0&&Hl(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",U);const y=new MutationObserver(b);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",U),y.disconnect()}}},[i,a,h.paused]),L.useEffect(()=>{if(a){UR.add(h);const p=document.activeElement;if(!a.contains(p)){const b=new CustomEvent(J8,mR);a.addEventListener(J8,c),a.dispatchEvent(b),b.defaultPrevented||(Ahe(Dhe(JV(a)),{select:!0}),document.activeElement===p&&Hl(a))}return()=>{a.removeEventListener(J8,c),setTimeout(()=>{const b=new CustomEvent(e3,mR);a.addEventListener(e3,u),a.dispatchEvent(b),b.defaultPrevented||Hl(p??document.body,{select:!0}),a.removeEventListener(e3,u),UR.remove(h)},0)}}},[a,c,u,h]);const m=L.useCallback(p=>{if(!n&&!i||h.paused)return;const U=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(U&&b){const y=p.currentTarget,[w,v]=Mhe(y);w&&v?!p.shiftKey&&b===v?(p.preventDefault(),n&&Hl(w,{select:!0})):p.shiftKey&&b===w&&(p.preventDefault(),n&&Hl(v,{select:!0})):b===y&&p.preventDefault()}},[n,i,h.paused]);return g(yr.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});QV.displayName=Che;function Ahe(e,{select:t=!1}={}){const n=document.activeElement;for(const i of e)if(Hl(i,{select:t}),document.activeElement!==n)return}function Mhe(e){const t=JV(e),n=pR(t,e),i=pR(t.reverse(),e);return[n,i]}function JV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function pR(e,t){for(const n of e)if(!Rhe(n,{upTo:t}))return n}function Rhe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function khe(e){return e instanceof HTMLInputElement&&"select"in e}function Hl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&khe(e)&&t&&e.select()}}var UR=Lhe();function Lhe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=bR(e,t),e.unshift(t)},remove(t){var n;e=bR(e,t),(n=e[0])==null||n.resume()}}}function bR(e,t){const n=[...e],i=n.indexOf(t);return i!==-1&&n.splice(i,1),n}function Dhe(e){return e.filter(t=>t.tagName!=="A")}var yd=globalThis!=null&&globalThis.document?L.useLayoutEffect:()=>{},Nhe=ZZ.useId||(()=>{}),Ohe=0;function rT(e){const[t,n]=L.useState(Nhe());return yd(()=>{n(i=>i??String(Ohe++))},[e]),e||(t?`radix-${t}`:"")}const Phe=["top","right","bottom","left"],Gc=Math.min,$r=Math.max,O6=Math.round,GU=Math.floor,Xo=e=>({x:e,y:e}),Fhe={left:"right",right:"left",bottom:"top",top:"bottom"},Bhe={start:"end",end:"start"};function hv(e,t,n){return $r(e,Gc(t,n))}function fl(e,t){return typeof e=="function"?e(t):e}function hl(e){return e.split("-")[0]}function Tg(e){return e.split("-")[1]}function sT(e){return e==="x"?"y":"x"}function oT(e){return e==="y"?"height":"width"}function Xc(e){return["top","bottom"].includes(hl(e))?"y":"x"}function aT(e){return sT(Xc(e))}function zhe(e,t,n){n===void 0&&(n=!1);const i=Tg(e),r=aT(e),s=oT(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=P6(o)),[o,P6(o)]}function Hhe(e){const t=P6(e);return[gv(e),t,gv(t)]}function gv(e){return e.replace(/start|end/g,t=>Bhe[t])}function Vhe(e,t,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?r:i:t?i:r;case"left":case"right":return t?s:o;default:return[]}}function $he(e,t,n,i){const r=Tg(e);let s=Vhe(hl(e),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),t&&(s=s.concat(s.map(gv)))),s}function P6(e){return e.replace(/left|right|bottom|top/g,t=>Fhe[t])}function Ghe(e){return{top:0,right:0,bottom:0,left:0,...e}}function e$(e){return typeof e!="number"?Ghe(e):{top:e,right:e,bottom:e,left:e}}function F6(e){const{x:t,y:n,width:i,height:r}=e;return{width:i,height:r,top:n,left:t,right:t+i,bottom:n+r,x:t,y:n}}function yR(e,t,n){let{reference:i,floating:r}=e;const s=Xc(t),o=aT(t),a=oT(o),l=hl(t),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(Tg(t)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Xhe=async(e,t,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=yR(c,i,l),f=i,h={},m=0;for(let p=0;p<a.length;p++){const{name:U,fn:b}=a[p],{x:y,y:w,data:v,reset:I}=await b({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:e,floating:t}});u=y??u,d=w??d,h={...h,[U]:{...h[U],...v}},I&&m<=50&&(m++,typeof I=="object"&&(I.placement&&(f=I.placement),I.rects&&(c=I.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:r}):I.rects),{x:u,y:d}=yR(c,f,l)),p=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function w0(e,t){var n;t===void 0&&(t={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=fl(t,e),m=e$(h),U=a[f?d==="floating"?"reference":"floating":d],b=F6(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(U)))==null||n?U:U.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},I=F6(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(b.top-I.top+m.top)/v.y,bottom:(I.bottom-b.bottom+m.bottom)/v.y,left:(b.left-I.left+m.left)/v.x,right:(I.right-b.right+m.right)/v.x}}const jhe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=fl(e,t)||{};if(c==null)return{};const d=e$(u),f={x:n,y:i},h=aT(r),m=oT(h),p=await o.getDimensions(c),U=h==="y",b=U?"top":"left",y=U?"bottom":"right",w=U?"clientHeight":"clientWidth",v=s.reference[m]+s.reference[h]-f[h]-s.floating[m],I=f[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=x?x[w]:0;(!_||!await(o.isElement==null?void 0:o.isElement(x)))&&(_=a.floating[w]||s.floating[m]);const T=v/2-I/2,A=_/2-p[m]/2-1,C=Gc(d[b],A),k=Gc(d[y],A),P=C,D=_-p[m]-k,j=_/2-p[m]/2+T,G=hv(P,j,D),B=!l.arrow&&Tg(r)!=null&&j!==G&&s.reference[m]/2-(j<P?C:k)-p[m]/2<0,H=B?j<P?j-P:j-D:0;return{[h]:f[h]+H,data:{[h]:G,centerOffset:j-G-H,...B&&{alignmentOffset:H}},reset:B}}}),Yhe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...U}=fl(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=hl(r),y=Xc(a),w=hl(a)===a,v=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=f||(w||!p?[P6(a)]:Hhe(a)),x=m!=="none";!f&&x&&I.push(...$he(a,p,m,v));const _=[a,...I],T=await w0(t,U),A=[];let C=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&A.push(T[b]),d){const j=zhe(r,o,v);A.push(T[j[0]],T[j[1]])}if(C=[...C,{placement:r,overflows:A}],!A.every(j=>j<=0)){var k,P;const j=(((k=s.flip)==null?void 0:k.index)||0)+1,G=_[j];if(G)return{data:{index:j,overflows:C},reset:{placement:G}};let B=(P=C.filter(H=>H.overflows[0]<=0).sort((H,$)=>H.overflows[1]-$.overflows[1])[0])==null?void 0:P.placement;if(!B)switch(h){case"bestFit":{var D;const H=(D=C.filter($=>{if(x){const X=Xc($.placement);return X===y||X==="y"}return!0}).map($=>[$.placement,$.overflows.filter(X=>X>0).reduce((X,W)=>X+W,0)]).sort(($,X)=>$[1]-X[1])[0])==null?void 0:D[0];H&&(B=H);break}case"initialPlacement":B=a;break}if(r!==B)return{reset:{placement:B}}}return{}}}};function ER(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vR(e){return Phe.some(t=>e[t]>=0)}const Whe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...r}=fl(e,t);switch(i){case"referenceHidden":{const s=await w0(t,{...r,elementContext:"reference"}),o=ER(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vR(o)}}}case"escaped":{const s=await w0(t,{...r,altBoundary:!0}),o=ER(s,n.floating);return{data:{escapedOffsets:o,escaped:vR(o)}}}default:return{}}}}};async function Khe(e,t){const{placement:n,platform:i,elements:r}=e,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=hl(n),a=Tg(n),l=Xc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=fl(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Zhe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=t,l=await Khe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},qhe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:r}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:U=>{let{x:b,y}=U;return{x:b,y}}},...l}=fl(e,t),c={x:n,y:i},u=await w0(t,l),d=Xc(hl(r)),f=sT(d);let h=c[f],m=c[d];if(s){const U=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=h+u[U],w=h-u[b];h=hv(y,h,w)}if(o){const U=d==="y"?"top":"left",b=d==="y"?"bottom":"right",y=m+u[U],w=m-u[b];m=hv(y,m,w)}const p=a.fn({...t,[f]:h,[d]:m});return{...p,data:{x:p.x-n,y:p.y-i,enabled:{[f]:s,[d]:o}}}}}},Qhe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=fl(e,t),u={x:n,y:i},d=Xc(r),f=sT(d);let h=u[f],m=u[d];const p=fl(a,t),U=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const w=f==="y"?"height":"width",v=s.reference[f]-s.floating[w]+U.mainAxis,I=s.reference[f]+s.reference[w]-U.mainAxis;h<v?h=v:h>I&&(h=I)}if(c){var b,y;const w=f==="y"?"width":"height",v=["top","left"].includes(hl(r)),I=s.reference[d]-s.floating[w]+(v&&((b=o.offset)==null?void 0:b[d])||0)+(v?0:U.crossAxis),x=s.reference[d]+s.reference[w]+(v?0:((y=o.offset)==null?void 0:y[d])||0)-(v?U.crossAxis:0);m<I?m=I:m>x&&(m=x)}return{[f]:h,[d]:m}}}},Jhe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:r,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=fl(e,t),u=await w0(t,c),d=hl(r),f=Tg(r),h=Xc(r)==="y",{width:m,height:p}=s.floating;let U,b;d==="top"||d==="bottom"?(U=d,b=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(b=d,U=f==="end"?"top":"bottom");const y=p-u.top-u.bottom,w=m-u.left-u.right,v=Gc(p-u[U],y),I=Gc(m-u[b],w),x=!t.middlewareData.shift;let _=v,T=I;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(_=y),x&&!f){const C=$r(u.left,0),k=$r(u.right,0),P=$r(u.top,0),D=$r(u.bottom,0);h?T=m-2*(C!==0||k!==0?C+k:$r(u.left,u.right)):_=p-2*(P!==0||D!==0?P+D:$r(u.top,u.bottom))}await l({...t,availableWidth:T,availableHeight:_});const A=await o.getDimensions(a.floating);return m!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function wy(){return typeof window<"u"}function Ig(e){return t$(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ca(e){var t;return(t=(t$(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function t$(e){return wy()?e instanceof Node||e instanceof rs(e).Node:!1}function fo(e){return wy()?e instanceof Element||e instanceof rs(e).Element:!1}function na(e){return wy()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function wR(e){return!wy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}function Dp(e){const{overflow:t,overflowX:n,overflowY:i,display:r}=ho(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(r)}function ege(e){return["table","td","th"].includes(Ig(e))}function _y(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function lT(e){const t=cT(),n=fo(e)?ho(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function tge(e){let t=jc(e);for(;na(t)&&!Yh(t);){if(lT(t))return t;if(_y(t))return null;t=jc(t)}return null}function cT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yh(e){return["html","body","#document"].includes(Ig(e))}function ho(e){return rs(e).getComputedStyle(e)}function Ty(e){return fo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function jc(e){if(Ig(e)==="html")return e;const t=e.assignedSlot||e.parentNode||wR(e)&&e.host||ca(e);return wR(t)?t.host:t}function n$(e){const t=jc(e);return Yh(t)?e.ownerDocument?e.ownerDocument.body:e.body:na(t)&&Dp(t)?t:n$(t)}function _0(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const r=n$(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),o=rs(r);if(s){const a=mv(o);return t.concat(o,o.visualViewport||[],Dp(r)?r:[],a&&n?_0(a):[])}return t.concat(r,_0(r,[],n))}function mv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function i$(e){const t=ho(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const r=na(e),s=r?e.offsetWidth:n,o=r?e.offsetHeight:i,a=O6(n)!==s||O6(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function uT(e){return fo(e)?e:e.contextElement}function mh(e){const t=uT(e);if(!na(t))return Xo(1);const n=t.getBoundingClientRect(),{width:i,height:r,$:s}=i$(t);let o=(s?O6(n.width):n.width)/i,a=(s?O6(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const nge=Xo(0);function r$(e){const t=rs(e);return!cT()||!t.visualViewport?nge:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ige(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==rs(e)?!1:t}function Ed(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=uT(e);let o=Xo(1);t&&(i?fo(i)&&(o=mh(i)):o=mh(e));const a=ige(s,n,i)?r$(s):Xo(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=rs(s),h=i&&fo(i)?rs(i):i;let m=f,p=mv(m);for(;p&&i&&h!==m;){const U=mh(p),b=p.getBoundingClientRect(),y=ho(p),w=b.left+(p.clientLeft+parseFloat(y.paddingLeft))*U.x,v=b.top+(p.clientTop+parseFloat(y.paddingTop))*U.y;l*=U.x,c*=U.y,u*=U.x,d*=U.y,l+=w,c+=v,m=rs(p),p=mv(m)}}return F6({width:u,height:d,x:l,y:c})}function dT(e,t){const n=Ty(e).scrollLeft;return t?t.left+n:Ed(ca(e)).left+n}function s$(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=i.left+t.scrollLeft-(n?0:dT(e,i)),s=i.top+t.scrollTop;return{x:r,y:s}}function rge(e){let{elements:t,rect:n,offsetParent:i,strategy:r}=e;const s=r==="fixed",o=ca(i),a=t?_y(t.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Xo(1);const u=Xo(0),d=na(i);if((d||!d&&!s)&&((Ig(i)!=="body"||Dp(o))&&(l=Ty(i)),na(i))){const h=Ed(i);c=mh(i),u.x=h.x+i.clientLeft,u.y=h.y+i.clientTop}const f=o&&!d&&!s?s$(o,l,!0):Xo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function sge(e){return Array.from(e.getClientRects())}function oge(e){const t=ca(e),n=Ty(e),i=e.ownerDocument.body,r=$r(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),s=$r(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+dT(e);const a=-n.scrollTop;return ho(i).direction==="rtl"&&(o+=$r(t.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function age(e,t){const n=rs(e),i=ca(e),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=cT();(!c||c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function lge(e,t){const n=Ed(e,!0,t==="fixed"),i=n.top+e.clientTop,r=n.left+e.clientLeft,s=na(e)?mh(e):Xo(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function _R(e,t,n){let i;if(t==="viewport")i=age(e,n);else if(t==="document")i=oge(ca(e));else if(fo(t))i=lge(t,n);else{const r=r$(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return F6(i)}function o$(e,t){const n=jc(e);return n===t||!fo(n)||Yh(n)?!1:ho(n).position==="fixed"||o$(n,t)}function cge(e,t){const n=t.get(e);if(n)return n;let i=_0(e,[],!1).filter(a=>fo(a)&&Ig(a)!=="body"),r=null;const s=ho(e).position==="fixed";let o=s?jc(e):e;for(;fo(o)&&!Yh(o);){const a=ho(o),l=lT(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Dp(o)&&!l&&o$(e,o))?i=i.filter(u=>u!==o):r=a,o=jc(o)}return t.set(e,i),i}function uge(e){let{element:t,boundary:n,rootBoundary:i,strategy:r}=e;const o=[...n==="clippingAncestors"?_y(t)?[]:cge(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=_R(t,u,r);return c.top=$r(d.top,c.top),c.right=Gc(d.right,c.right),c.bottom=Gc(d.bottom,c.bottom),c.left=$r(d.left,c.left),c},_R(t,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dge(e){const{width:t,height:n}=i$(e);return{width:t,height:n}}function fge(e,t,n){const i=na(t),r=ca(t),s=n==="fixed",o=Ed(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Xo(0);if(i||!i&&!s)if((Ig(t)!=="body"||Dp(r))&&(a=Ty(t)),i){const f=Ed(t,!0,s,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else r&&(l.x=dT(r));const c=r&&!i&&!s?s$(r,a):Xo(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function t3(e){return ho(e).position==="static"}function TR(e,t){if(!na(e)||ho(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ca(e)===n&&(n=n.ownerDocument.body),n}function a$(e,t){const n=rs(e);if(_y(e))return n;if(!na(e)){let r=jc(e);for(;r&&!Yh(r);){if(fo(r)&&!t3(r))return r;r=jc(r)}return n}let i=TR(e,t);for(;i&&ege(i)&&t3(i);)i=TR(i,t);return i&&Yh(i)&&t3(i)&&!lT(i)?n:i||tge(e)||n}const hge=async function(e){const t=this.getOffsetParent||a$,n=this.getDimensions,i=await n(e.floating);return{reference:fge(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function gge(e){return ho(e).direction==="rtl"}const mge={convertOffsetParentRelativeRectToViewportRelativeRect:rge,getDocumentElement:ca,getClippingRect:uge,getOffsetParent:a$,getElementRects:hge,getClientRects:sge,getDimensions:dge,getScale:mh,isElement:fo,isRTL:gge};function l$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pge(e,t){let n=null,i;const r=ca(e);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||t(),!f||!h)return;const m=GU(d),p=GU(r.clientWidth-(u+f)),U=GU(r.clientHeight-(d+h)),b=GU(u),w={rootMargin:-m+"px "+-p+"px "+-U+"px "+-b+"px",threshold:$r(0,Gc(1,l))||1};let v=!0;function I(x){const _=x[0].intersectionRatio;if(_!==l){if(!v)return o();_?o(!1,_):i=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!l$(c,e.getBoundingClientRect())&&o(),v=!1}try{n=new IntersectionObserver(I,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(I,w)}n.observe(e)}return o(!0),s}function Uge(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=uT(e),u=r||s?[...c?_0(c):[],..._0(t)]:[];u.forEach(b=>{r&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=c&&a?pge(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(b=>{let[y]=b;y&&y.target===c&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),c&&!l&&h.observe(c),h.observe(t));let m,p=l?Ed(e):null;l&&U();function U(){const b=Ed(e);p&&!l$(p,b)&&n(),p=b,m=requestAnimationFrame(U)}return n(),()=>{var b;u.forEach(y=>{r&&y.removeEventListener("scroll",n),s&&y.removeEventListener("resize",n)}),d==null||d(),(b=h)==null||b.disconnect(),h=null,l&&cancelAnimationFrame(m)}}const bge=Zhe,yge=qhe,Ege=Yhe,vge=Jhe,wge=Whe,IR=jhe,_ge=Qhe,Tge=(e,t,n)=>{const i=new Map,r={platform:mge,...n},s={...r.platform,_c:i};return Xhe(e,t,{...r,platform:s})};var j2=typeof document<"u"?L.useLayoutEffect:L.useEffect;function B6(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,i,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(i=n;i--!==0;)if(!B6(e[i],t[i]))return!1;return!0}if(r=Object.keys(e),n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&e.$$typeof)&&!B6(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function c$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function SR(e,t){const n=c$(e);return Math.round(t*n)/n}function n3(e){const t=L.useRef(e);return j2(()=>{t.current=e}),t}function Ige(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=L.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=L.useState(i);B6(f,i)||h(i);const[m,p]=L.useState(null),[U,b]=L.useState(null),y=L.useCallback($=>{$!==x.current&&(x.current=$,p($))},[]),w=L.useCallback($=>{$!==_.current&&(_.current=$,b($))},[]),v=s||m,I=o||U,x=L.useRef(null),_=L.useRef(null),T=L.useRef(u),A=l!=null,C=n3(l),k=n3(r),P=n3(c),D=L.useCallback(()=>{if(!x.current||!_.current)return;const $={placement:t,strategy:n,middleware:f};k.current&&($.platform=k.current),Tge(x.current,_.current,$).then(X=>{const W={...X,isPositioned:P.current!==!1};j.current&&!B6(T.current,W)&&(T.current=W,mi.flushSync(()=>{d(W)}))})},[f,t,n,k,P]);j2(()=>{c===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[c]);const j=L.useRef(!1);j2(()=>(j.current=!0,()=>{j.current=!1}),[]),j2(()=>{if(v&&(x.current=v),I&&(_.current=I),v&&I){if(C.current)return C.current(v,I,D);D()}},[v,I,D,C,A]);const G=L.useMemo(()=>({reference:x,floating:_,setReference:y,setFloating:w}),[y,w]),B=L.useMemo(()=>({reference:v,floating:I}),[v,I]),H=L.useMemo(()=>{const $={position:n,left:0,top:0};if(!B.floating)return $;const X=SR(B.floating,u.x),W=SR(B.floating,u.y);return a?{...$,transform:"translate("+X+"px, "+W+"px)",...c$(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:W}},[n,a,B.floating,u.x,u.y]);return L.useMemo(()=>({...u,update:D,refs:G,elements:B,floatingStyles:H}),[u,D,G,B,H])}const Sge=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:i,padding:r}=typeof e=="function"?e(n):e;return i&&t(i)?i.current!=null?IR({element:i.current,padding:r}).fn(n):{}:i?IR({element:i,padding:r}).fn(n):{}}}},xge=(e,t)=>({...bge(e),options:[e,t]}),Cge=(e,t)=>({...yge(e),options:[e,t]}),Age=(e,t)=>({..._ge(e),options:[e,t]}),Mge=(e,t)=>({...Ege(e),options:[e,t]}),Rge=(e,t)=>({...vge(e),options:[e,t]}),kge=(e,t)=>({...wge(e),options:[e,t]}),Lge=(e,t)=>({...Sge(e),options:[e,t]});var Dge="Arrow",u$=L.forwardRef((e,t)=>{const{children:n,width:i=10,height:r=5,...s}=e;return g(yr.svg,{...s,ref:t,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g("polygon",{points:"0,0 30,0 15,10"})})});u$.displayName=Dge;var Nge=u$;function Oge(e){const[t,n]=L.useState(void 0);return yd(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=e.offsetWidth,a=e.offsetHeight;n({width:o,height:a})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}var fT="Popper",[d$,f$]=Lp(fT),[Pge,h$]=d$(fT),g$=e=>{const{__scopePopper:t,children:n}=e,[i,r]=L.useState(null);return g(Pge,{scope:t,anchor:i,onAnchorChange:r,children:n})};g$.displayName=fT;var m$="PopperAnchor",p$=L.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:i,...r}=e,s=h$(m$,n),o=L.useRef(null),a=uo(t,o);return L.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g(yr.div,{...r,ref:a})});p$.displayName=m$;var hT="PopperContent",[Fge,Bge]=d$(hT),U$=L.forwardRef((e,t)=>{var Ve,wt,Ot,Ye,ut,$t;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:m,...p}=e,U=h$(hT,n),[b,y]=L.useState(null),w=uo(t,li=>y(li)),[v,I]=L.useState(null),x=Oge(v),_=(x==null?void 0:x.width)??0,T=(x==null?void 0:x.height)??0,A=i+(s!=="center"?"-"+s:""),C=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(c)?c:[c],P=k.length>0,D={padding:C,boundary:k.filter(Hge),altBoundary:P},{refs:j,floatingStyles:G,placement:B,isPositioned:H,middlewareData:$}=Ige({strategy:"fixed",placement:A,whileElementsMounted:(...li)=>Uge(...li,{animationFrame:h==="always"}),elements:{reference:U.anchor},middleware:[xge({mainAxis:r+T,alignmentAxis:o}),l&&Cge({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Age():void 0,...D}),l&&Mge({...D}),Rge({...D,apply:({elements:li,rects:xl,availableWidth:Pg,availableHeight:Wp})=>{const{width:EE,height:vE}=xl.reference,uu=li.floating.style;uu.setProperty("--radix-popper-available-width",`${Pg}px`),uu.setProperty("--radix-popper-available-height",`${Wp}px`),uu.setProperty("--radix-popper-anchor-width",`${EE}px`),uu.setProperty("--radix-popper-anchor-height",`${vE}px`)}}),v&&Lge({element:v,padding:a}),Vge({arrowWidth:_,arrowHeight:T}),f&&kge({strategy:"referenceHidden",...D})]}),[X,W]=E$(B),Q=dl(m);yd(()=>{H&&(Q==null||Q())},[H,Q]);const oe=(Ve=$.arrow)==null?void 0:Ve.x,ne=(wt=$.arrow)==null?void 0:wt.y,ie=((Ot=$.arrow)==null?void 0:Ot.centerOffset)!==0,[me,Re]=L.useState();return yd(()=>{b&&Re(window.getComputedStyle(b).zIndex)},[b]),g("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:H?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(Ye=$.transformOrigin)==null?void 0:Ye.x,(ut=$.transformOrigin)==null?void 0:ut.y].join(" "),...(($t=$.hide)==null?void 0:$t.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g(Fge,{scope:n,placedSide:X,onArrowChange:I,arrowX:oe,arrowY:ne,shouldHideArrow:ie,children:g(yr.div,{"data-side":X,"data-align":W,...p,ref:w,style:{...p.style,animation:H?void 0:"none"}})})})});U$.displayName=hT;var b$="PopperArrow",zge={top:"bottom",right:"left",bottom:"top",left:"right"},y$=L.forwardRef(function(t,n){const{__scopePopper:i,...r}=t,s=Bge(b$,i),o=zge[s.placedSide];return g("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:g(Nge,{...r,ref:n,style:{...r.style,display:"block"}})})});y$.displayName=b$;function Hge(e){return e!==null}var Vge=e=>({name:"transformOrigin",options:e,fn(t){var U,b,y;const{placement:n,rects:i,middlewareData:r}=t,o=((U=r.arrow)==null?void 0:U.centerOffset)!==0,a=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[c,u]=E$(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((b=r.arrow)==null?void 0:b.x)??0)+a/2,h=(((y=r.arrow)==null?void 0:y.y)??0)+l/2;let m="",p="";return c==="bottom"?(m=o?d:`${f}px`,p=`${-l}px`):c==="top"?(m=o?d:`${f}px`,p=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,p=o?d:`${h}px`):c==="left"&&(m=`${i.floating.width+l}px`,p=o?d:`${h}px`),{data:{x:m,y:p}}}});function E$(e){const[t,n="center"]=e.split("-");return[t,n]}var $ge=g$,v$=p$,Gge=U$,Xge=y$,jge="Portal",w$=L.forwardRef((e,t)=>{var a;const{container:n,...i}=e,[r,s]=L.useState(!1);yd(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?tq.createPortal(g(yr.div,{...i,ref:t}),o):null});w$.displayName=jge;function Yge(e,t){return L.useReducer((n,i)=>t[n][i]??n,e)}var Iy=e=>{const{present:t,children:n}=e,i=Wge(t),r=typeof n=="function"?n({present:i.isPresent}):L.Children.only(n),s=uo(i.ref,Kge(r));return typeof n=="function"||i.isPresent?L.cloneElement(r,{ref:s}):null};Iy.displayName="Presence";function Wge(e){const[t,n]=L.useState(),i=L.useRef({}),r=L.useRef(e),s=L.useRef("none"),o=e?"mounted":"unmounted",[a,l]=Yge(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return L.useEffect(()=>{const c=XU(i.current);s.current=a==="mounted"?c:"none"},[a]),yd(()=>{const c=i.current,u=r.current;if(u!==e){const f=s.current,h=XU(c);e?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,l]),yd(()=>{if(t){let c;const u=t.ownerDocument.defaultView??window,d=h=>{const p=XU(i.current).includes(h.animationName);if(h.target===t&&p&&(l("ANIMATION_END"),!r.current)){const U=t.style.animationFillMode;t.style.animationFillMode="forwards",c=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=U)})}},f=h=>{h.target===t&&(s.current=XU(i.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(c),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:L.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function XU(e){return(e==null?void 0:e.animationName)||"none"}function Kge(e){var i,r;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function gT({prop:e,defaultProp:t,onChange:n=()=>{}}){const[i,r]=Zge({defaultProp:t,onChange:n}),s=e!==void 0,o=s?e:i,a=dl(n),l=L.useCallback(c=>{if(s){const d=typeof c=="function"?c(e):c;d!==e&&a(d)}else r(c)},[s,e,r,a]);return[o,l]}function Zge({defaultProp:e,onChange:t}){const n=L.useState(e),[i]=n,r=L.useRef(i),s=dl(t);return L.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}var qge=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},of=new WeakMap,jU=new WeakMap,YU={},i3=0,_$=function(e){return e&&(e.host||_$(e.parentNode))},Qge=function(e,t){return t.map(function(n){if(e.contains(n))return n;var i=_$(n);return i&&e.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Jge=function(e,t,n,i){var r=Qge(t,Array.isArray(e)?e:[e]);YU[n]||(YU[n]=new WeakMap);var s=YU[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(i),m=h!==null&&h!=="false",p=(of.get(f)||0)+1,U=(s.get(f)||0)+1;of.set(f,p),s.set(f,U),o.push(f),p===1&&m&&jU.set(f,!0),U===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(b){console.error("aria-hidden: cannot operate on ",f,b)}})};return u(t),a.clear(),i3++,function(){o.forEach(function(d){var f=of.get(d)-1,h=s.get(d)-1;of.set(d,f),s.set(d,h),f||(jU.has(d)||d.removeAttribute(i),jU.delete(d)),h||d.removeAttribute(n)}),i3--,i3||(of=new WeakMap,of=new WeakMap,jU=new WeakMap,YU={})}},eme=function(e,t,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=qge(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Jge(i,r,n,"aria-hidden")):function(){return null}},Lo=function(){return Lo=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Lo.apply(this,arguments)};function T$(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function tme(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,s;i<r;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}var Y2="right-scroll-bar-position",W2="width-before-scroll-bar",nme="with-scroll-bars-hidden",ime="--removed-body-scroll-bar-size";function r3(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function rme(e,t){var n=L.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=t,n.facade}var sme=typeof window<"u"?L.useLayoutEffect:L.useEffect,xR=new WeakMap;function ome(e,t){var n=rme(null,function(i){return e.forEach(function(r){return r3(r,i)})});return sme(function(){var i=xR.get(n);if(i){var r=new Set(i),s=new Set(e),o=n.current;r.forEach(function(a){s.has(a)||r3(a,null)}),s.forEach(function(a){r.has(a)||r3(a,o)})}xR.set(n,e)},[e]),n}function ame(e){return e}function lme(e,t){t===void 0&&(t=ame);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function cme(e){e===void 0&&(e={});var t=lme(null);return t.options=Lo({async:!0,ssr:!1},e),t}var I$=function(e){var t=e.sideCar,n=T$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return L.createElement(i,Lo({},n))};I$.isSideCarExport=!0;function ume(e,t){return e.useMedium(t),I$}var S$=cme(),s3=function(){},Sy=L.forwardRef(function(e,t){var n=L.useRef(null),i=L.useState({onScrollCapture:s3,onWheelCapture:s3,onTouchMoveCapture:s3}),r=i[0],s=i[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,U=e.as,b=U===void 0?"div":U,y=e.gapMode,w=T$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),v=f,I=ome([n,t]),x=Lo(Lo({},w),r);return L.createElement(L.Fragment,null,u&&L.createElement(v,{sideCar:S$,removeScrollBar:c,shards:d,noIsolation:h,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?L.cloneElement(L.Children.only(a),Lo(Lo({},x),{ref:I})):L.createElement(b,Lo({},x,{className:l,ref:I}),a))});Sy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sy.classNames={fullWidth:W2,zeroRight:Y2};var dme=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fme(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=dme();return t&&e.setAttribute("nonce",t),e}function hme(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function gme(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mme=function(){var e=0,t=null;return{add:function(n){e==0&&(t=fme())&&(hme(t,n),gme(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},pme=function(){var e=mme();return function(t,n){L.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},x$=function(){var e=pme(),t=function(n){var i=n.styles,r=n.dynamic;return e(i,r),null};return t},Ume={left:0,top:0,right:0,gap:0},o3=function(e){return parseInt(e||"",10)||0},bme=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],r=t[e==="padding"?"paddingRight":"marginRight"];return[o3(n),o3(i),o3(r)]},yme=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ume;var t=bme(e),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-n+t[2]-t[0])}},Eme=x$(),ph="data-scroll-locked",vme=function(e,t,n,i){var r=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(nme,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(ph,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Y2,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(W2,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(Y2," .").concat(Y2,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(W2," .").concat(W2,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ph,`] {
    `).concat(ime,": ").concat(a,`px;
  }
`)},CR=function(){var e=parseInt(document.body.getAttribute(ph)||"0",10);return isFinite(e)?e:0},wme=function(){L.useEffect(function(){return document.body.setAttribute(ph,(CR()+1).toString()),function(){var e=CR()-1;e<=0?document.body.removeAttribute(ph):document.body.setAttribute(ph,e.toString())}},[])},_me=function(e){var t=e.noRelative,n=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;wme();var s=L.useMemo(function(){return yme(r)},[r]);return L.createElement(Eme,{styles:vme(s,!t,r,n?"":"!important")})},pv=!1;if(typeof window<"u")try{var WU=Object.defineProperty({},"passive",{get:function(){return pv=!0,!0}});window.addEventListener("test",WU,WU),window.removeEventListener("test",WU,WU)}catch{pv=!1}var af=pv?{passive:!1}:!1,Tme=function(e){return e.tagName==="TEXTAREA"},C$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Tme(e)&&n[t]==="visible")},Ime=function(e){return C$(e,"overflowY")},Sme=function(e){return C$(e,"overflowX")},AR=function(e,t){var n=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=A$(e,i);if(r){var s=M$(e,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},xme=function(e){var t=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;return[t,n,i]},Cme=function(e){var t=e.scrollLeft,n=e.scrollWidth,i=e.clientWidth;return[t,n,i]},A$=function(e,t){return e==="v"?Ime(t):Sme(t)},M$=function(e,t){return e==="v"?xme(t):Cme(t)},Ame=function(e,t){return e==="h"&&t==="rtl"?-1:1},Mme=function(e,t,n,i,r){var s=Ame(e,window.getComputedStyle(t).direction),o=s*i,a=n.target,l=t.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=M$(e,a),m=h[0],p=h[1],U=h[2],b=p-U-s*m;(m||b)&&A$(e,a)&&(d+=b,f+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},KU=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},MR=function(e){return[e.deltaX,e.deltaY]},RR=function(e){return e&&"current"in e?e.current:e},Rme=function(e,t){return e[0]===t[0]&&e[1]===t[1]},kme=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Lme=0,lf=[];function Dme(e){var t=L.useRef([]),n=L.useRef([0,0]),i=L.useRef(),r=L.useState(Lme++)[0],s=L.useState(x$)[0],o=L.useRef(e);L.useEffect(function(){o.current=e},[e]),L.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var p=tme([e.lockRef.current],(e.shards||[]).map(RR),!0).filter(Boolean);return p.forEach(function(U){return U.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),p.forEach(function(U){return U.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var a=L.useCallback(function(p,U){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=KU(p),y=n.current,w="deltaX"in p?p.deltaX:y[0]-b[0],v="deltaY"in p?p.deltaY:y[1]-b[1],I,x=p.target,_=Math.abs(w)>Math.abs(v)?"h":"v";if("touches"in p&&_==="h"&&x.type==="range")return!1;var T=AR(_,x);if(!T)return!0;if(T?I=_:(I=_==="v"?"h":"v",T=AR(_,x)),!T)return!1;if(!i.current&&"changedTouches"in p&&(w||v)&&(i.current=I),!I)return!0;var A=i.current||I;return Mme(A,U,p,A==="h"?w:v)},[]),l=L.useCallback(function(p){var U=p;if(!(!lf.length||lf[lf.length-1]!==s)){var b="deltaY"in U?MR(U):KU(U),y=t.current.filter(function(I){return I.name===U.type&&(I.target===U.target||U.target===I.shadowParent)&&Rme(I.delta,b)})[0];if(y&&y.should){U.cancelable&&U.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(RR).filter(Boolean).filter(function(I){return I.contains(U.target)}),v=w.length>0?a(U,w[0]):!o.current.noIsolation;v&&U.cancelable&&U.preventDefault()}}},[]),c=L.useCallback(function(p,U,b,y){var w={name:p,delta:U,target:b,should:y,shadowParent:Nme(b)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(v){return v!==w})},1)},[]),u=L.useCallback(function(p){n.current=KU(p),i.current=void 0},[]),d=L.useCallback(function(p){c(p.type,MR(p),p.target,a(p,e.lockRef.current))},[]),f=L.useCallback(function(p){c(p.type,KU(p),p.target,a(p,e.lockRef.current))},[]);L.useEffect(function(){return lf.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,af),document.addEventListener("touchmove",l,af),document.addEventListener("touchstart",u,af),function(){lf=lf.filter(function(p){return p!==s}),document.removeEventListener("wheel",l,af),document.removeEventListener("touchmove",l,af),document.removeEventListener("touchstart",u,af)}},[]);var h=e.removeScrollBar,m=e.inert;return L.createElement(L.Fragment,null,m?L.createElement(s,{styles:kme(r)}):null,h?L.createElement(_me,{gapMode:e.gapMode}):null)}function Nme(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ome=ume(S$,Dme);var R$=L.forwardRef(function(e,t){return L.createElement(Sy,Lo({},e,{ref:t,sideCar:Ome}))});R$.classNames=Sy.classNames;var mT="Popover",[k$,dAe]=Lp(mT,[f$]),Np=f$(),[Pme,lu]=k$(mT),L$=e=>{const{__scopePopover:t,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=e,a=Np(t),l=L.useRef(null),[c,u]=L.useState(!1),[d=!1,f]=gT({prop:i,defaultProp:r,onChange:s});return g($ge,{...a,children:g(Pme,{scope:t,contentId:rT(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:L.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:L.useCallback(()=>u(!0),[]),onCustomAnchorRemove:L.useCallback(()=>u(!1),[]),modal:o,children:n})})};L$.displayName=mT;var D$="PopoverAnchor",Fme=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=lu(D$,n),s=Np(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return L.useEffect(()=>(o(),()=>a()),[o,a]),g(v$,{...s,...i,ref:t})});Fme.displayName=D$;var N$="PopoverTrigger",O$=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=lu(N$,n),s=Np(n),o=uo(t,r.triggerRef),a=g(yr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":V$(r.open),...i,ref:o,onClick:Li(e.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:g(v$,{asChild:!0,...s,children:a})});O$.displayName=N$;var pT="PopoverPortal",[Bme,zme]=k$(pT,{forceMount:void 0}),P$=e=>{const{__scopePopover:t,forceMount:n,children:i,container:r}=e,s=lu(pT,t);return g(Bme,{scope:t,forceMount:n,children:g(Iy,{present:n||s.open,children:g(w$,{asChild:!0,container:r,children:i})})})};P$.displayName=pT;var Wh="PopoverContent",F$=L.forwardRef((e,t)=>{const n=zme(Wh,e.__scopePopover),{forceMount:i=n.forceMount,...r}=e,s=lu(Wh,e.__scopePopover);return g(Iy,{present:i||s.open,children:s.modal?g(Hme,{...r,ref:t}):g(Vme,{...r,ref:t})})});F$.displayName=Wh;var Hme=L.forwardRef((e,t)=>{const n=lu(Wh,e.__scopePopover),i=L.useRef(null),r=uo(t,i),s=L.useRef(!1);return L.useEffect(()=>{const o=i.current;if(o)return eme(o)},[]),g(R$,{as:v0,allowPinchZoom:!0,children:g(B$,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Li(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Li(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Li(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Vme=L.forwardRef((e,t)=>{const n=lu(Wh,e.__scopePopover),i=L.useRef(!1),r=L.useRef(!1);return g(B$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=e.onInteractOutside)==null||l.call(e,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),B$=L.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=e,f=lu(Wh,n),h=Np(n);return xhe(),g(QV,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:g(ZV,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:g(Gge,{"data-state":V$(f.open),role:"dialog",id:f.contentId,...h,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),z$="PopoverClose",$me=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=lu(z$,n);return g(yr.button,{type:"button",...i,ref:t,onClick:Li(e.onClick,()=>r.onOpenChange(!1))})});$me.displayName=z$;var Gme="PopoverArrow",H$=L.forwardRef((e,t)=>{const{__scopePopover:n,...i}=e,r=Np(n);return g(Xge,{...r,...i,ref:t})});H$.displayName=Gme;function V$(e){return e?"open":"closed"}var Tl=L$,Il=O$,Xme=P$,xy=F$,$$=H$;const G$=()=>g("div",{style:{width:1,height:"1rem",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),X$=ue.createContext(null),ai=()=>ue.useContext(X$),j$=e=>{const[t,n]=L.useState(null),i=Nn(),{theme:r}=ai(),{container:s}=Dr();return L.useLayoutEffect(()=>{var o;t&&(t.className="",t.classList.add("excalidraw",...((o=e==null?void 0:e.className)==null?void 0:o.split(/\s+/))||[]),t.classList.toggle("excalidraw--mobile",i.formFactor==="phone"),t.classList.toggle("theme--dark",r===ke.DARK))},[t,r,i.formFactor,e==null?void 0:e.className]),L.useLayoutEffect(()=>{const o=e!=null&&e.parentSelector?s==null?void 0:s.querySelector(e.parentSelector):document.body;if(!o)return;const a=document.createElement("div");return o.appendChild(a),n(a),()=>{o.removeChild(a)}},[s,e==null?void 0:e.parentSelector]),t};function UT(e,t,n){L.useEffect(()=>{function i(r){const s=r;if(!e.current)return;const o=n==null?void 0:n(s,e.current);if(o===!0)return;if(o===!1)return t(s);e.current.contains(s.target)||!document.documentElement.contains(s.target)||s.target.closest("[data-radix-portal]")||s.target===document.documentElement&&document.body.style.pointerEvents==="none"||s.target.closest("[data-prevent-outside-click]")||t(s)}return document.addEventListener(te.POINTER_DOWN,i),document.addEventListener(te.TOUCH_START,i),()=>{document.removeEventListener(te.POINTER_DOWN,i),document.removeEventListener(te.TOUCH_START,i)}},[e,t,n])}const Cy=e=>{const t=L.useRef(e);return Object.assign(t.current,e),t.current},Ay=Wt(null),jme=({onCancel:e,onChange:t,onSelect:n,colorPickerType:i})=>{const r=j$({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),s=ai(),o=sE(),a=po(),l=Ge(o,s),c=Cy({app:a,onCancel:e,onChange:t,onSelect:n,selectedElements:l}),{container:u}=Dr();L.useEffect(()=>{const f=d.current;if(!f||!a.canvas||!r)return;let h=!1;const m=a.canvas.getContext("2d"),p=({clientX:x,clientY:_})=>{const T=m.getImageData((x-s.offsetLeft)*window.devicePixelRatio,(_-s.offsetTop)*window.devicePixelRatio,1,1).data;return wre(T[0],T[1],T[2])},U=({clientX:x,clientY:_,altKey:T})=>{f.style.top=`${_+20}px`,f.style.left=`${x+20}px`;const A=p({clientX:x,clientY:_});h&&c.onChange(i,A,c.selectedElements,{altKey:T}),f.style.background=A},b=()=>{c.onCancel()},y=(x,_)=>{c.onSelect(x,_)},w=x=>{h=!0,x.stopImmediatePropagation()},v=x=>{h=!1,u==null||u.focus(),x.stopImmediatePropagation(),x.preventDefault(),y(p(x),x)},I=x=>{x.key===V.ESCAPE&&(x.preventDefault(),x.stopImmediatePropagation(),b())};return r.tabIndex=-1,r.focus(),U({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),r.addEventListener(te.KEYDOWN,I),r.addEventListener(te.POINTER_DOWN,w),r.addEventListener(te.POINTER_UP,v),window.addEventListener("pointermove",U,{passive:!0}),window.addEventListener(te.BLUR,b),()=>{h=!1,r.removeEventListener(te.KEYDOWN,I),r.removeEventListener(te.POINTER_DOWN,w),r.removeEventListener(te.POINTER_UP,v),window.removeEventListener("pointermove",U),window.removeEventListener(te.BLUR,b)}},[c,a.canvas,r,i,u,s.offsetLeft,s.offsetTop]);const d=L.useRef(null);return UT(d,()=>{e()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),r?mi.createPortal(g("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),r):null},Zr=ue.forwardRef(({children:e,padding:t,className:n,style:i},r)=>g("div",{className:ce("Island",n),style:{"--padding":t,...i},ref:r,children:e})),Sg=ue.forwardRef(({className:e,container:t,children:n,style:i,onClose:r,onKeyDown:s,onFocusOutside:o,onPointerLeave:a,onPointerDownOutside:l,preventAutoFocusOnTouch:c=!1},u)=>{const d=Nn(),f=d.formFactor==="phone"&&!d.isLandscape;return g(Xme,{container:t,children:N(xy,{ref:u,className:ce("focus-visible-none",e),"data-prevent-outside-click":!0,side:f?"bottom":"right",align:f?"center":"start",alignOffset:-16,sideOffset:20,collisionBoundary:t??void 0,style:{zIndex:"var(--zIndex-ui-styles-popup)",marginLeft:d.formFactor==="phone"?"0.5rem":void 0},onPointerLeave:a,onKeyDown:s,onFocusOutside:o,onPointerDownOutside:l,onOpenAutoFocus:h=>{c&&d.isTouchScreen&&h.preventDefault()},onCloseAutoFocus:h=>{h.stopPropagation(),h.preventDefault(),t&&!Dse(document.activeElement)&&t.focus(),r()},children:[g(Zr,{padding:3,style:i,children:n}),g($$,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})}),My=()=>document.querySelector(".excalidraw-wysiwyg"),bT=()=>{const e=My();return e?{start:e.selectionStart,end:e.selectionEnd}:null},yT=e=>{setTimeout(()=>{const t=My();t&&(t.focus(),e&&(t.selectionStart=e.start,t.selectionEnd=e.end))},0)},Ry=(e,t,n,i)=>{t&&i&&i();const r=t&&n?bT():null;e(),t&&n&&yT(r)},Yme=()=>{const[e,t]=L.useState(null),n=L.useCallback(()=>{const s=bT();t(s)},[]),i=L.useCallback(()=>{setTimeout(()=>{const s=My();s&&(s.focus(),e&&(s.selectionStart=e.start,s.selectionEnd=e.end,t(null)))},0)},[e]),r=L.useCallback(()=>{t(null)},[]);return{saveCaretPosition:n,restoreCaretPosition:i,clearSavedPosition:r,hasSavedPosition:!!e}},Wme=(e=100)=>{const t=My();if(t){const n=t.onblur;t.onblur=null,setTimeout(()=>{t.onblur=n},e)}},ky=({palette:e,color:t})=>{if(!t)return null;for(const[n,i]of Object.entries(e))if(Array.isArray(i)){const r=i.indexOf(t);if(r>-1)return{colorName:n,shade:r}}else if(i===t)return{colorName:n,shade:null};return null},Uv=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),Y$=({color:e,palette:t})=>!Object.values(t).flat().includes(e),Kme=(e,t,n)=>{const i={elementBackground:"backgroundColor",elementStroke:"strokeColor"},r=e.filter(o=>{if(o.isDeleted)return!1;const a=o[i[t]];return Y$({color:a,palette:n})}),s=new Map;return r.forEach(o=>{const a=o[i[t]];s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)}),[...s.entries()].sort((o,a)=>a[1]-o[1]).map(o=>o[0]).slice(0,Ure)},xg=Wt(null),kR=(e,t,n)=>(e*299+t*587+n*114)/1e3,z6=(e,t=160)=>{if(!e)return!0;if(e==="transparent")return!1;if(!e.startsWith("#")){const s=document.createElement("div");if(s.style.color=e,s.style.color){s.style.position="absolute",s.style.visibility="hidden",s.style.width="0",s.style.height="0",document.body.appendChild(s);const o=getComputedStyle(s).color;document.body.removeChild(s);const a=o.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),c=parseInt(a[1]),u=parseInt(a[2]);return kR(l,c,u)<t}return!0}const n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return kR(n,i,r)<t},Zme=({color:e,onChange:t,label:n,colorPickerType:i,placeholder:r})=>{const s=Nn(),[o,a]=L.useState(e),[l,c]=dn(xg);L.useEffect(()=>{a(e)},[e]);const u=L.useCallback(p=>{const U=p.toLowerCase(),b=r1e(U);b&&t(b),a(U)},[t]),d=L.useRef(null),f=L.useRef(null);L.useEffect(()=>{d.current&&d.current.focus()},[l]);const[h,m]=dn(Ay);return L.useEffect(()=>()=>{m(null)},[m]),N("div",{className:"color-picker__input-label",children:[g("div",{className:"color-picker__input-hash",children:"#"}),g("input",{ref:l==="hex"?d:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":n,onChange:p=>{u(p.target.value)},value:(o||"").replace(/^#/,""),onBlur:()=>{a(e)},tabIndex:-1,onFocus:()=>c("hex"),onKeyDown:p=>{var U;p.key!==V.TAB&&(p.key===V.ESCAPE&&((U=f.current)==null||U.focus()),p.stopPropagation())},placeholder:r}),s.formFactor!=="phone"&&N(fe,{children:[g("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),g("div",{ref:f,className:ce("excalidraw-eye-dropper-trigger",{selected:h}),onClick:()=>m(p=>p?null:{keepOpenOnAlt:!1,onSelect:U=>t(U),colorPickerType:i}),title:`${R("labels.eyeDropper")}  ${V.I.toLocaleUpperCase()} or ${J("Alt")} `,children:xfe})]})]})},ET=({color:e,keyLabel:t,isShade:n=!1})=>N("div",{className:"color-picker__button__hotkey-label",style:{color:z6(e)?"#fff":"#000"},children:[n&&"",t]}),qme=({colors:e,color:t,onChange:n,label:i})=>{const[r,s]=dn(xg),o=L.useRef(null);return L.useEffect(()=>{o.current&&o.current.focus()},[t,r]),g("div",{className:"color-picker-content--default",children:e.map((a,l)=>N("button",{ref:t===a?o:void 0,tabIndex:-1,type:"button",className:ce("color-picker__button color-picker__button--large has-outline",{active:t===a,"is-transparent":a==="transparent"||!a}),onClick:()=>{n(a),s("custom")},title:a,"aria-label":i,style:{"--swatch-color":a},children:[g("div",{className:"color-picker__button-outline"}),g(ET,{color:a,keyLabel:l+1})]},l))})},Qme=({palette:e,color:t,onChange:n,activeShade:i,showHotKey:r=!0})=>{const s=ky({color:t,palette:e}),[o,a]=dn(xg),l=L.useRef(null);return L.useEffect(()=>{l.current&&o==="baseColors"&&l.current.focus()},[s==null?void 0:s.colorName,o]),g("div",{className:"color-picker-content--default",children:Object.entries(e).map(([c,u],d)=>{const f=(Array.isArray(u)?u[i]:u)||"transparent",h=Uv[d],m=R(`colors.${c.replace(/\d+/,"")}`,null,"");return N("button",{ref:(s==null?void 0:s.colorName)===c?l:void 0,tabIndex:-1,type:"button",className:ce("color-picker__button color-picker__button--large has-outline",{active:(s==null?void 0:s.colorName)===c,"is-transparent":f==="transparent"||!1}),onClick:()=>{n(f),a("baseColors")},title:`${m}${f.startsWith("#")?` ${f}`:""}  ${h}`,"aria-label":`${m}  ${h}`,style:{"--swatch-color":f},"data-testid":`color-${c}`,children:[g("div",{className:"color-picker__button-outline"}),r&&g(ET,{color:f,keyLabel:h})]},c)})})},K2=({children:e})=>g("div",{className:"color-picker__heading",children:e}),Jme=({color:e,onChange:t,palette:n,showHotKey:i})=>{const r=ky({color:e||"transparent",palette:n}),[s,o]=dn(xg),a=L.useRef(null);if(L.useEffect(()=>{a.current&&s==="shades"&&a.current.focus()},[r,s]),r){const{colorName:l,shade:c}=r,u=n[l];if(Array.isArray(u))return g("div",{className:"color-picker-content--default shades",children:u.map((d,f)=>N("button",{ref:f===c&&s==="shades"?a:void 0,tabIndex:-1,type:"button",className:ce("color-picker__button color-picker__button--large has-outline",{active:f===c}),"aria-label":"Shade",title:`${l} - ${f+1}`,style:d?{"--swatch-color":d}:void 0,onClick:()=>{t(d),o("shades")},children:[g("div",{className:"color-picker__button-outline"}),i&&g(ET,{color:d,keyLabel:f+1,isShade:!0})]},f))})}return N("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[g("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),g("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:R("colorPicker.noShades")})]})},a3=(e,t,n)=>{const i=Math.ceil(n/yf);switch(t=t??-1,e){case"ArrowLeft":{const r=t-1;return r<0?n-1:r}case"ArrowRight":return(t+1)%n;case"ArrowDown":{const r=t+yf;return r>=n?t%yf:r}case"ArrowUp":{const r=t-yf,s=r<0?yf*i+r:r;return s>=n?void 0:s}}},e1e=({e,colorObj:t,onChange:n,palette:i,customColors:r,setActiveColorPickerSection:s,activeShade:o})=>{if((t==null?void 0:t.shade)!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(e.code)&&e.shiftKey){const a=Number(e.code.slice(-1))-1;return n(i[t.colorName][a]),s("shades"),!0}if(["1","2","3","4","5"].includes(e.key)&&r[Number(e.key)-1])return n(r[Number(e.key)-1]),s("custom"),!0;if(Uv.includes(e.key)){const a=Uv.indexOf(e.key),l=Object.keys(i)[a],c=i[l],u=Array.isArray(c)?c[o]:c;return n(u),s("baseColors"),!0}return!1},t1e=({event:e,activeColorPickerSection:t,palette:n,color:i,onChange:r,customColors:s,setActiveColorPickerSection:o,updateData:a,activeShade:l,onEyeDropperToggle:c,onEscape:u})=>{if(e[V.CTRL_OR_CMD])return!1;if(e.key===V.ESCAPE)return u(e),!0;if(e.key===V.ALT)return c(!0),!0;if(e.key===V.I)return c(),!0;const d=ky({color:i,palette:n});if(e.key===V.TAB){const f={custom:!!s.length,baseColors:!0,shades:(d==null?void 0:d.shade)!=null,hex:!0},h=Object.entries(f).reduce((y,[w,v])=>(v&&y.push(w),y),[]),m=h.indexOf(t),p=e.shiftKey?-1:1,U=m+p>h.length-1?0:m+p<0?h.length-1:m+p,b=h[U];return b&&o(b),b==="custom"?r(s[0]):b==="baseColors"&&(Object.entries(n).find(([w,v])=>Array.isArray(v)?v.includes(i):v===i?w:null)||r(je.black)),e.preventDefault(),e.stopPropagation(),!0}if(e1e({e,colorObj:d,onChange:r,palette:n,customColors:s,setActiveColorPickerSection:o,activeShade:l}))return!0;if(t==="shades"&&d){const{shade:f}=d,h=a3(e.key,f,yf);if(h!==void 0)return r(n[d.colorName][h]),!0}if(t==="baseColors"&&d){const{colorName:f}=d,h=Object.keys(n),m=h.indexOf(f),p=a3(e.key,m,h.length);if(p!==void 0){const U=h[p],b=n[U];return r(Array.isArray(b)?b[l]:b),!0}}if(t==="custom"){const f=i!=null?s.indexOf(i):0,h=a3(e.key,f,s.length);if(h!==void 0){const m=s[h];return r(m),!0}}return!1},n1e=ue.forwardRef(({color:e,onChange:t,type:n,elements:i,palette:r,updateData:s,children:o,showTitle:a,onEyeDropperToggle:l,onEscape:c,showHotKey:u=!0},d)=>{const f=a?n==="elementStroke"?R("labels.stroke"):n==="elementBackground"?R("labels.background"):null:null,[h]=ue.useState(()=>n==="canvasBackground"?[]:Kme(i,n,r)),[m,p]=dn(xg),U=ky({color:e,palette:r});L.useEffect(()=>{if(!m){const v=!!e&&Y$({color:e,palette:r}),I=v&&!h.includes(e);p(I?null:v?"custom":(U==null?void 0:U.shade)!=null?"shades":"baseColors")}},[m,e,r,p,U,h]);const[b,y]=L.useState((U==null?void 0:U.shade)??(n==="elementBackground"?Nm:Dm));L.useEffect(()=>{(U==null?void 0:U.shade)!=null&&y(U.shade);const v=I=>{I.key===V.ALT&&l(!1)};return document.addEventListener(te.KEYUP,v,{capture:!0}),()=>{document.removeEventListener(te.KEYUP,v,{capture:!0})}},[U,l]);const w=ue.useRef(null);return L.useImperativeHandle(d,()=>w.current),L.useEffect(()=>{var v;(v=w==null?void 0:w.current)==null||v.focus()},[]),g("div",{role:"dialog","aria-modal":"true","aria-label":R("labels.colorPicker"),children:N("div",{ref:w,onKeyDown:v=>{t1e({event:v,activeColorPickerSection:m,palette:r,color:e,onChange:t,onEyeDropperToggle:l,customColors:h,setActiveColorPickerSection:p,updateData:s,activeShade:b,onEscape:c})&&(v.preventDefault(),v.stopPropagation())},className:"color-picker-content properties-content",tabIndex:-1,children:[f&&g("div",{className:"color-picker__title",children:f}),!!h.length&&N("div",{children:[g(K2,{children:R("colorPicker.mostUsedCustomColors")}),g(qme,{colors:h,color:e,label:R("colorPicker.mostUsedCustomColors"),onChange:t})]}),N("div",{children:[g(K2,{children:R("colorPicker.colors")}),g(Qme,{color:e,palette:r,onChange:t,activeShade:b,showHotKey:u})]}),N("div",{children:[g(K2,{children:R("colorPicker.shades")}),g(Jme,{color:e,onChange:t,palette:r,showHotKey:u})]}),o]})})}),i1e=({onChange:e,type:t,activeColor:n,topPicks:i})=>{let r;return t==="elementStroke"&&(r=rB),t==="elementBackground"&&(r=sB),t==="canvasBackground"&&(r=oB),i&&(r=i),r?g("div",{className:"color-picker__top-picks",children:r.map(s=>g("button",{className:ce("color-picker__button",{active:s===n,"is-transparent":s==="transparent"||!s,"has-outline":!z6(s,E4)}),style:{"--swatch-color":s},type:"button",title:s,onClick:()=>e(s),"data-testid":`color-top-pick-${s}`,children:g("div",{className:"color-picker__button-outline"})},s))}):(console.error("Invalid type for TopPicks"),null)},LR=e=>{const t=new Option().style;return t.color=e,!!t.color},r1e=e=>Sr(e)?e:LR(`#${e}`)?`#${e}`:LR(e)?e:null,s1e=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=je,updateData:o,getOpenPopup:a,appState:l})=>{const{container:c}=Dr(),u=ua(),d=u!=="full",f=u==="mobile",[,h]=dn(xg),[m,p]=dn(Ay),U=N("div",{children:[g(K2,{children:R("colorPicker.hexCode")}),g(Zme,{color:t||"",label:i,onChange:w=>{n(w)},colorPickerType:e,placeholder:R("colorPicker.color")})]}),b=L.useRef(null),y=()=>{var w;(w=b.current)==null||w.focus()};return g(Sg,{container:c,style:{maxWidth:"13rem"},preventAutoFocusOnTouch:!!l.editingTextElement,onFocusOutside:w=>{ka(w.target)||y(),w.preventDefault()},onPointerDownOutside:w=>{m&&w.preventDefault()},onClose:()=>{a()===e&&o({openPopup:null}),h(null),l.editingTextElement&&setTimeout(()=>{const w=document.querySelector(".excalidraw-wysiwyg");w&&w.focus()},0)},children:s?g(n1e,{ref:b,palette:s,color:t,onChange:w=>{const v=l.editingTextElement?bT():null;n(w),l.editingTextElement&&v&&yT(v)},onEyeDropperToggle:w=>{p(v=>w?(v=v||{keepOpenOnAlt:!0,onSelect:n,colorPickerType:e},v.keepOpenOnAlt=!0,v):w===!1||v?null:{keepOpenOnAlt:!1,onSelect:n,colorPickerType:e})},onEscape:w=>{m?p(null):o({openPopup:null})},type:e,elements:r,updateData:o,showTitle:d,showHotKey:!f,children:U}):U})},o1e=({label:e,color:t,type:n,mode:i="background",onToggle:r,editingTextElement:s})=>{const o=ua(),a=o!=="full",l=o==="mobile",c=u=>{u.preventDefault(),u.stopPropagation(),s&&Wme(),r()};return N(Il,{type:"button",className:ce("color-picker__button active-color properties-trigger",{"is-transparent":!t||t==="transparent","has-outline":!t||!z6(t,E4),"compact-sizing":a,"mobile-border":l}),"aria-label":e,style:t?{"--swatch-color":t}:void 0,title:R(n==="elementStroke"?"labels.showStroke":"labels.showBackground"),"data-openpopup":n,onClick:c,children:[g("div",{className:"color-picker__button-outline",children:!t&&Cde}),a&&t&&i==="stroke"&&g("div",{className:"color-picker__button-background",children:g("span",{style:{color:t&&z6(t,E4)?"#fff":"#111"},children:Zfe})})]})},vT=({type:e,color:t,onChange:n,label:i,elements:r,palette:s=je,topPicks:o,updateData:a,appState:l})=>{const c=L.useRef(l.openPopup);L.useEffect(()=>{c.current=l.openPopup},[l.openPopup]);const d=ua()!=="full";return g("div",{children:N("div",{role:"dialog","aria-modal":"true",className:ce("color-picker-container",{"color-picker-container--no-top-picks":d}),children:[!d&&g(i1e,{activeColor:t,onChange:n,type:e,topPicks:o}),!d&&g(G$,{}),N(Tl,{open:l.openPopup===e,onOpenChange:f=>{f&&a({openPopup:e})},children:[g(o1e,{color:t,label:i,type:e,mode:e==="elementStroke"?"stroke":"background",editingTextElement:!!l.editingTextElement,onToggle:()=>{l.openPopup===e?a({openPopup:null}):l.openPopup?a({openPopup:e}):a({openPopup:e})}}),l.openPopup===e&&g(s1e,{type:e,color:t,onChange:n,label:i,elements:r,palette:s,updateData:a,getOpenPopup:()=>c.current,appState:l})]})]})})},a1e=""+new URL("../fonts/CascadiaCode/CascadiaCode-Regular.woff2",import.meta.url).href,l1e=[{uri:a1e}],c1e=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-279a7b317d12eb88de06167bd672b4b4.woff2",import.meta.url).href,u1e=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-6e066e8de2ac57ea9283adb9c24d7f0c.woff2",import.meta.url).href,d1e=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-dc6a8806fa96795d7b3be5026f989a17.woff2",import.meta.url).href,f1e=""+new URL("../fonts/ComicShanns/ComicShanns-Regular-fcb0fc02dcbee4c9846b3e2508668039.woff2",import.meta.url).href,h1e=[{uri:c1e,descriptors:{unicodeRange:"U+20-7e,U+a1-a6,U+a8,U+ab-ac,U+af-b1,U+b4,U+b8,U+bb-bc,U+bf-cf,U+d1-d7,U+d9-de,U+e0-ef,U+f1-f7,U+f9-ff,U+131,U+152-153,U+2c6,U+2da,U+2dc,U+2013-2014,U+2018-201a,U+201c-201d,U+2020-2022,U+2026,U+2039-203a,U+2044,U+20ac,U+2191,U+2193,U+2212"}},{uri:f1e,descriptors:{unicodeRange:"U+100-10f,U+112-125,U+128-130,U+134-137,U+139-13c,U+141-148,U+14c-151,U+154-161,U+164-165,U+168-17f,U+1bf,U+1f7,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+a75b"}},{uri:d1e,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+315,U+2190,U+2192,U+2200,U+2203-2204,U+2264-2265,U+f6c3"}},{uri:u1e,descriptors:{unicodeRange:"U+3bb"}}],g1e=[{uri:z9}];class m1e{constructor(t){F(this,"instance");F(this,"debounceTerminate");this.instance=new Worker(t,{type:"module"})}}class wT{constructor(t,n){F(this,"idleWorkers",new Set);F(this,"workerUrl");F(this,"workerTTL");this.workerUrl=t,this.workerTTL=n.ttl||1e3}static create(t,n={}){if(!t)throw new XV;if(!import.meta.url||t.toString()===import.meta.url)throw new jV;return new wT(t,n)}async postMessage(t,n){let i;const r=Array.from(this.idleWorkers).shift();return r?(this.idleWorkers.delete(r),i=r):i=await this.createWorker(),new Promise((s,o)=>{i.instance.onmessage=this.onMessageHandler(i,s),i.instance.onerror=this.onErrorHandler(i,o),i.instance.postMessage(t,n),i.debounceTerminate(()=>o(new Error(`Active worker did not respond for ${this.workerTTL}ms!`)))})}async clear(){for(const t of this.idleWorkers)t.debounceTerminate.cancel(),t.instance.terminate();this.idleWorkers.clear()}async createWorker(){const t=new m1e(this.workerUrl);return t.debounceTerminate=sl(n=>{t.instance.terminate(),this.idleWorkers.has(t)?(this.idleWorkers.delete(t),console.debug("Job finished! Idle worker has been released from the pool.")):n?n():console.error("Worker has been terminated!")},this.workerTTL),t}onMessageHandler(t,n){return i=>{t.debounceTerminate(),this.idleWorkers.add(t),n(i.data)}}onErrorHandler(t,n){return i=>{t.debounceTerminate(()=>n(i)),t.debounceTerminate.flush(),this.clear()}}}let DR=typeof Worker<"u";const p1e=async(e,t)=>{const{Commands:n,subsetToBase64:i,toBase64:r}=await b1e();return DR?Bc(async()=>{try{const s=await y1e(),o=e.slice(0),a=await s.postMessage({command:n.Subset,arrayBuffer:o,codePoints:t},{transfer:[o]});return r(a)}catch(s){return DR=!1,Wse()&&(s instanceof XV||s instanceof jV)||console.error("Failed to use workers for subsetting, falling back to the main thread.",s),i(e,t)}}):i(e,t)};let l3=null,c3=null;const U1e=async()=>(l3||(l3=Ee(()=>import("./subset-worker.chunk-CVR6pt27.js"),__vite__mapDeps([0,1]),import.meta.url)),l3),b1e=async()=>(c3||(c3=Ee(()=>import("./subset-shared.chunk-D3ioWSie.js"),__vite__mapDeps([]),import.meta.url)),c3);let u3=null;const y1e=()=>(u3||(u3=Bc(async()=>{const{WorkerUrl:e}=await U1e();return wT.create(e)})),u3);var d3={};const Zf=class Zf{constructor(t,n,i){F(this,"urls");F(this,"fontFace");this.urls=Zf.createUrls(n);const r=this.urls.map(s=>`url(${s}) ${Zf.getFormat(s)}`).join(", ");this.fontFace=new FontFace(t,r,{display:"swap",style:"normal",weight:"400",...i})}toCSS(t){if(!this.getUnicodeRangeRegex().test(t))return;const n=Array.from(t).map(i=>i.codePointAt(0));return this.getContent(n).then(i=>`@font-face { font-family: ${this.fontFace.family}; src: url(${i}); }`)}async getContent(t){let n=0;const i=[];for(;n<this.urls.length;){const r=this.urls[n];try{const s=await this.fetchFont(r);return await p1e(s,t)}catch(s){i.push(`"${r.toString()}" returned error "${s}"`)}n++}return console.error(`Failed to fetch font family "${this.fontFace.family}"`,JSON.stringify(i,void 0,2)),this.urls.length?this.urls[this.urls.length-1].toString():""}fetchFont(t){return Bc(async()=>{const n=await fetch(t,{cache:"force-cache",headers:{Accept:"font/woff2"}});if(!n.ok){const r=t instanceof URL?t.toString():"dataurl";throw new Error(`Failed to fetch "${r}": ${n.statusText}`)}return await n.arrayBuffer()})}getUnicodeRangeRegex(){const t=this.fontFace.unicodeRange.split(/,\s*/).map(n=>{const[i,r]=n.replace("U+","").split("-");return r?`\\u{${i}}-\\u{${r}}`:`\\u{${i}}`}).join("");return new RegExp(`[${t}]`,"u")}static createUrls(t){if(t.startsWith("data"))return[t];if(t.startsWith(z9))return[];if(t.startsWith("http"))return[new URL(t)];const n=t.replace(/^\/+/,""),i=[];if(typeof window.EXCALIDRAW_ASSET_PATH=="string"){const r=this.normalizeBaseUrl(window.EXCALIDRAW_ASSET_PATH);i.push(new URL(n,r))}else Array.isArray(window.EXCALIDRAW_ASSET_PATH)&&window.EXCALIDRAW_ASSET_PATH.forEach(r=>{const s=this.normalizeBaseUrl(r);i.push(new URL(n,s))});return i.push(new URL(n,Zf.ASSETS_FALLBACK_URL)),i}static getFormat(t){if(!(t instanceof URL))return"";try{const n=new URL(t).pathname.split(".");return n.length===1?"":`format('${n.pop()}')`}catch{return""}}static normalizeBaseUrl(t){var i;let n=t;return/^\.?\//.test(n)&&(n=new URL(n.replace(/^\.?\/+/,""),(i=window==null?void 0:window.location)==null?void 0:i.origin).toString()),n=`${n.replace(/\/+$/,"")}/`,n}};F(Zf,"ASSETS_FALLBACK_URL",`https://esm.sh/${d3.PKG_NAME?`${d3.PKG_NAME}@${d3.PKG_VERSION}`:"@excalidraw/excalidraw"}/dist/prod/`);let bv=Zf;const E1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-349fac6ca4700ffec595a7150a0d1e1d.woff2",import.meta.url).href,v1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-3f2c5db56cc93c5a6873b1361d730c16.woff2",import.meta.url).href,w1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-41b173a47b57366892116a575a43e2b6.woff2",import.meta.url).href,_1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-623ccf21b21ef6b3a0d87738f77eb071.woff2",import.meta.url).href,T1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-a88b72a24fb54c9f94e3b5fdaa7481c9.woff2",import.meta.url).href,I1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-b9dcf9d2e50a1eaf42fc664b50a3fd0d.woff2",import.meta.url).href,S1e=""+new URL("../fonts/Excalifont/Excalifont-Regular-be310b9bcd4f1a43f571c46df7809174.woff2",import.meta.url).href,x1e=[{uri:T1e,descriptors:{unicodeRange:"U+20-7e,U+a0-a3,U+a5-a6,U+a8-ab,U+ad-b1,U+b4,U+b6-b8,U+ba-ff,U+131,U+152-153,U+2bc,U+2c6,U+2da,U+2dc,U+304,U+308,U+2013-2014,U+2018-201a,U+201c-201e,U+2020,U+2022,U+2024-2026,U+2030,U+2039-203a,U+20ac,U+2122,U+2212"}},{uri:S1e,descriptors:{unicodeRange:"U+100-130,U+132-137,U+139-149,U+14c-151,U+154-17e,U+192,U+1fc-1ff,U+218-21b,U+237,U+1e80-1e85,U+1ef2-1ef3,U+2113"}},{uri:I1e,descriptors:{unicodeRange:"U+400-45f,U+490-491,U+2116"}},{uri:w1e,descriptors:{unicodeRange:"U+37e,U+384-38a,U+38c,U+38e-393,U+395-3a1,U+3a3-3a8,U+3aa-3cf,U+3d7"}},{uri:v1e,descriptors:{unicodeRange:"U+2c7,U+2d8-2d9,U+2db,U+2dd,U+302,U+306-307,U+30a-30c,U+326-328,U+212e,U+2211,U+fb01-fb02"}},{uri:E1e,descriptors:{unicodeRange:"U+462-463,U+472-475,U+4d8-4d9,U+4e2-4e3,U+4e6-4e9,U+4ee-4ef"}},{uri:_1e,descriptors:{unicodeRange:"U+300-301,U+303"}}],C1e=[{uri:z9}],A1e=""+new URL("../fonts/LiberationSans/LiberationSans-Regular.woff2",import.meta.url).href,M1e=[{uri:A1e}],R1e=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYE98RXi4EwSsbg.woff2",import.meta.url).href,k1e=""+new URL("../fonts/Lilita/Lilita-Regular-i7dPIFZ9Zz-WBtRtedDbYEF8RXi4EwQ.woff2",import.meta.url).href,L1e=[{uri:R1e,descriptors:{unicodeRange:xu.LATIN_EXT}},{uri:k1e,descriptors:{unicodeRange:xu.LATIN}}],D1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTA3j6zbXWjgevT5.woff2",import.meta.url).href,N1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTQ3j6zbXWjgeg.woff2",import.meta.url).href,O1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTk3j6zbXWjgevT5.woff2",import.meta.url).href,P1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTo3j6zbXWjgevT5.woff2",import.meta.url).href,F1e=""+new URL("../fonts/Nunito/Nunito-Regular-XRXI3I6Li01BKofiOc5wtlZ2di8HDIkhdTs3j6zbXWjgevT5.woff2",import.meta.url).href,B1e=[{uri:O1e,descriptors:{unicodeRange:xu.CYRILIC_EXT,weight:"500"}},{uri:D1e,descriptors:{unicodeRange:xu.CYRILIC,weight:"500"}},{uri:F1e,descriptors:{unicodeRange:xu.VIETNAMESE,weight:"500"}},{uri:P1e,descriptors:{unicodeRange:xu.LATIN_EXT,weight:"500"}},{uri:N1e,descriptors:{unicodeRange:xu.LATIN,weight:"500"}}],z1e=""+new URL("../fonts/Virgil/Virgil-Regular.woff2",import.meta.url).href,H1e=[{uri:z1e}],V1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-019d66dcad46dc156b162d267f981c20.woff2",import.meta.url).href,$1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-04b718e5623574919c8b0dea5f301444.woff2",import.meta.url).href,G1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-069e77aac84590e2e991d0a0176d34f2.woff2",import.meta.url).href,X1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-06c77b8c66e51ed6c63ccb502dd8b8af.woff2",import.meta.url).href,j1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-08e0dc436ad0ad61ba5558db0674d762.woff2",import.meta.url).href,Y1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-093b9ef39a46ceae95a1df18a0a3a326.woff2",import.meta.url).href,W1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-095c169f3314805276f603a362766abd.woff2",import.meta.url).href,K1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-09850c4077f3fffe707905872e0e2460.woff2",import.meta.url).href,Z1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-41521fade99856108931b4768b1b2648.woff2",import.meta.url).href,q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-544fc28abe2c5c30e62383fd4dac255f.woff2",import.meta.url).href,Q1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a3089806700d379f11827ee9843b6b.woff2",import.meta.url).href,J1e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7eb9fffd1aa890d07d0f88cc82e6cfe4.woff2",import.meta.url).href,e0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6fe5c5973cc06f74b2387a631ea36b88.woff2",import.meta.url).href,t0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a4c34be6d42152e64b0df90bc4607f64.woff2",import.meta.url).href,n0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b96d9226ce77ec94ceca043d712182e6.woff2",import.meta.url).href,i0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6ae5b42180ad70b971c91e7eefb8eba2.woff2",import.meta.url).href,r0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c69f61a4ab18d0488c8d1fc12e7028e8.woff2",import.meta.url).href,s0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cb17fc3db95f6d139afc9d31a8e93293.woff2",import.meta.url).href,o0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e3fcf5180fd466c8915c4e8069491054.woff2",import.meta.url).href,a0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c1f94158256bb1f3bf665b053d895af9.woff2",import.meta.url).href,l0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7197d6fda6cba7c3874c53d6381ca239.woff2",import.meta.url).href,c0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70c2eb8d64e71a42a834eb857ea9df51.woff2",import.meta.url).href,u0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a004ddfcb26e67bd6e678c8ed19e25ce.woff2",import.meta.url).href,d0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e4bde7e9c7f84cd34d8a845e384c746.woff2",import.meta.url).href,f0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23686f7f29da6e8008c36dd3a80c83d6.woff2",import.meta.url).href,h0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-69c09cc5fa3e55c74fc4821f76909cc3.woff2",import.meta.url).href,g0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-25b7f38e18f035f96cb5e547bd2bd08c.woff2",import.meta.url).href,m0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ba3de316d63c7e339987b16f41a0b879.woff2",import.meta.url).href,p0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-12b52b58eb3df36804b9a654ec9ee194.woff2",import.meta.url).href,U0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b1220a3c61f85cc0408deedb4c5f57a2.woff2",import.meta.url).href,b0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4535823663ad81405188a528d8f2b1a2.woff2",import.meta.url).href,y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3eaa538115d76932653c21d8dc28f207.woff2",import.meta.url).href,E0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7e929f262f30c8ee78bf398150b1a7cd.woff2",import.meta.url).href,v0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-73e309718fd16cea44b4d54a33581811.woff2",import.meta.url).href,w0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9eb5a99df4e76ac3363453ac9ca288b1.woff2",import.meta.url).href,_0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e63ed8162808a9e425ed80a8bc79114.woff2",import.meta.url).href,T0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c8b71798409ccc126ee264a00aadcf21.woff2",import.meta.url).href,I0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-11c345711937f0ba4b8f7b6b919c8440.woff2",import.meta.url).href,S0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e480d9c614742d05f0e78f274f1e69e6.woff2",import.meta.url).href,x0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95429962233afd82db1c27df1500a28c.woff2",import.meta.url).href,C0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2cf96d082d35ea3d8106851223ad0d16.woff2",import.meta.url).href,A0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2d43040e86ff03ba677f6f9c04cd0805.woff2",import.meta.url).href,M0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2a26d20a23b00898ce82f09d2ee47c3f.woff2",import.meta.url).href,R0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a365e82ed54697a52f27adcea1315fe8.woff2",import.meta.url).href,k0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e4bca6cfa53e499cae0a6be4894a90e9.woff2",import.meta.url).href,L0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e51ef413167c6e14e0c0fdcc585f2fc9.woff2",import.meta.url).href,D0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e5f453bb04da18eed01675eeebd88bf8.woff2",import.meta.url).href,N0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e656f091b9dc4709722c9f4b84d3c797.woff2",import.meta.url).href,O0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f0f13b5c60e0af5553bd359f5513be1b.woff2",import.meta.url).href,P0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f5d079153c99a25b9be5b8583c4cc8a7.woff2",import.meta.url).href,F0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-10a7ae9a371830a80c3d844acf1c02d7.woff2",import.meta.url).href,B0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-60a41c7e1c68f22424e6d22df544bc82.woff2",import.meta.url).href,z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ab2bed91166a9dca83a5ebfbe2a7f38.woff2",import.meta.url).href,H0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-670ba603758d94268e8606f240a42e12.woff2",import.meta.url).href,V0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-15dc6d811c9cd078f9086a740d5a1038.woff2",import.meta.url).href,$0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8c2f33cee3993174f7e87c28e4bf42ee.woff2",import.meta.url).href,G0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-761d05e3cd968cf574166867998ef06a.woff2",import.meta.url).href,X0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-642b26e2e5f5fb780b51b593dbc8c851.woff2",import.meta.url).href,j0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5572b3513ba8df57a3d5d7303ee6b11b.woff2",import.meta.url).href,Y0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3c9de2ae0ea4bc91a510942dfa4be8d2.woff2",import.meta.url).href,W0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-671a2c20b1eb9e4ef8a192833940e319.woff2",import.meta.url).href,K0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4dc6d5f188d5c96d44815cd1e81aa885.woff2",import.meta.url).href,Z0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ce4884f96f11589608b76b726a755803.woff2",import.meta.url).href,q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8f476c4c99813d57cbe6eca4727388ad.woff2",import.meta.url).href,Q0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5935a5775af3d5c6307ac667bd9ae74e.woff2",import.meta.url).href,J0e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79f007c1c6d07557120982951ea67998.woff2",import.meta.url).href,epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bafff7a14c27403dcc6cf1432e8ea836.woff2",import.meta.url).href,tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-543fa46ace099a7099dad69123399400.woff2",import.meta.url).href,npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ddc14ed3eb0c3e46364317dfc0144a3.woff2",import.meta.url).href,ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0fa55a080fcd0f9dc2e0b0058b793df8.woff2",import.meta.url).href,rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-66493ba5a8367f2928812f446f47b56a.woff2",import.meta.url).href,spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-57862b464a55b18c7bf234ce22907d73.woff2",import.meta.url).href,ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8d3bcabb847b56243b16afe62adaaf21.woff2",import.meta.url).href,ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b77e8ebfb2367ab2662396a60e7d320.woff2",import.meta.url).href,lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0b5d723fdc4e249c140f0909e87d03b4.woff2",import.meta.url).href,cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cdbce89e82cc1ab53a2decbf5819278f.woff2",import.meta.url).href,upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-739bc1a567439c7cffcd1614644593d2.woff2",import.meta.url).href,dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72252d73220fa3cd856677888cee1635.woff2",import.meta.url).href,fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf6ff4e0f491ca0cf3038187a997b9b4.woff2",import.meta.url).href,hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9cfb2a77a4e45025105ad29a1748b90d.woff2",import.meta.url).href,gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-450da755d5bcb70906e1295e559b9602.woff2",import.meta.url).href,mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0986d134c05864f5025962eef9f994a0.woff2",import.meta.url).href,ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1ee544f0f1dac422545c505baa788992.woff2",import.meta.url).href,Upe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4806e761d750087c2d734fc64596eaff.woff2",import.meta.url).href,bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-33432927cd87d40cfe393c7482bf221f.woff2",import.meta.url).href,ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-be549ab72f0719d606a5c01e2c0219b6.woff2",import.meta.url).href,Epe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b5c1596551c256e0e9cf02028595b092.woff2",import.meta.url).href,vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cf2cc71752631e579e35b0e423bf2638.woff2",import.meta.url).href,wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6f3256af8454371776bc46670d33cc65.woff2",import.meta.url).href,_pe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23f228f3999c01983860012330e4be08.woff2",import.meta.url).href,Tpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-21430ee05a1248901da8d0de08744d47.woff2",import.meta.url).href,Ipe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5330a2119a716e4e7224ed108b085dac.woff2",import.meta.url).href,Spe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cd145ce4a0ea18469358df53c207bc1b.woff2",import.meta.url).href,xpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-36925dfe329a45086cbb7fc5c20d45ac.woff2",import.meta.url).href,Cpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4bfaa8ffa64c5ee560aa2daba7c9cbd3.woff2",import.meta.url).href,Ape=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-112c051027b2d766c19a519f6ee1f4f7.woff2",import.meta.url).href,Mpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5b0ed6971aaab9c8ad563230bd5471a7.woff2",import.meta.url).href,Rpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-98f2ad84457de7f3740d9920b8fa8667.woff2",import.meta.url).href,kpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-733171b4ffcd17ea1fe1c0ba627173bf.woff2",import.meta.url).href,Lpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-684d65f1793cac449dde5d59cb3c47fb.woff2",import.meta.url).href,Dpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cbaaefaaf326668277aa24dfa93c4d28.woff2",import.meta.url).href,Npe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-58fd02350d0bc52cf1ca3bb32ce9766e.woff2",import.meta.url).href,Ope=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7ccce86603f80a099ddb0cb21d4ae3e3.woff2",import.meta.url).href,Ppe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3717077e38f98d89eae729b6c14e56dc.woff2",import.meta.url).href,Fpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dbea1af6dcd9860be40c3d18254338f5.woff2",import.meta.url).href,Bpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a0fdb40036e87b40aa08dd30584cb85.woff2",import.meta.url).href,zpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f626226ba1272e832aea87bafd9720e.woff2",import.meta.url).href,Hpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-938d90c10ff8c20386af7f242c05d6b0.woff2",import.meta.url).href,Vpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6d128682ee29e471486354d486a1b90.woff2",import.meta.url).href,$pe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9d81066dd2b337c938df6e90380a00dc.woff2",import.meta.url).href,Gpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20e7bf72fa05de9adf7dbcc7bf51dde6.woff2",import.meta.url).href,Xpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4095eb84ef3874e2600247bee0b04026.woff2",import.meta.url).href,jpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4ee10ae43505e2e0bc62656ced49c0fa.woff2",import.meta.url).href,Ype=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7494dc504ae00ee9cd0505f990f88c5d.woff2",import.meta.url).href,Wpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8de5b863cb50dfefdd07cb11c774d579.woff2",import.meta.url).href,Kpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3e1f8f654357353bf0e04ba5c34b5f7f.woff2",import.meta.url).href,Zpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2e33e8dc771ef5e1d9127d60a6b73679.woff2",import.meta.url).href,qpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-173945821411c09f70c95f98d590e697.woff2",import.meta.url).href,Qpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b358f7a51ece39a3247942b1feabdb29.woff2",import.meta.url).href,Jpe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-23ad2d71b280f00b1363b95b7bea94eb.woff2",import.meta.url).href,eUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5882ffa04f32584d26109137e2da4352.woff2",import.meta.url).href,tUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a203b91dad570bf05a58c3c3ddb529bf.woff2",import.meta.url).href,nUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-bd77e3c7f9e0b072d96af37f73d1aa32.woff2",import.meta.url).href,iUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a45d991244d4c7140217e1e5f5ca4f4.woff2",import.meta.url).href,rUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f56414bf9bced67990def8660e306759.woff2",import.meta.url).href,sUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-583d166e56ba0de4b77eabb47ef67839.woff2",import.meta.url).href,oUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7f855356ab893b0d2b9c1c83b8116f0e.woff2",import.meta.url).href,aUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b57aaedfd8ebdf3931f25119dc6a5eb2.woff2",import.meta.url).href,lUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b6fd38ca30869792244804b04bc058da.woff2",import.meta.url).href,cUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-452225341522a7942f0f6aab1a5c91a3.woff2",import.meta.url).href,uUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-866fa7613df6b3fd272bcfd4530c0bb9.woff2",import.meta.url).href,dUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-52a84a22fd1369bffeaf21da2d6158dc.woff2",import.meta.url).href,fUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-829615148e6357d826b9242eb7fbbd1e.woff2",import.meta.url).href,hUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c99eda15fc26a2941579560f76c3a5cf.woff2",import.meta.url).href,gUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-395c35dd584b56b0789f58a0559beaf1.woff2",import.meta.url).href,mUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-203b0e569e3b14aac86a003dc3fa523e.woff2",import.meta.url).href,pUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51a0e808bbc8361236ac521a119758a3.woff2",import.meta.url).href,UUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-6e092f71c1e634059ada0e52abadce67.woff2",import.meta.url).href,bUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0f7fb1e0d5015bb1371343153ecf7ce3.woff2",import.meta.url).href,yUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d0cf73942fea1c74edbdf0b3011f4656.woff2",import.meta.url).href,EUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-968cffdc8ee679da094e77ebf50f58ef.woff2",import.meta.url).href,vUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7a07ddc0f0c0f5f4a9bad6ee3dda66b5.woff2",import.meta.url).href,wUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ec181b795ac1fb5a50d700b6e996d745.woff2",import.meta.url).href,_Ue=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-cfb211578629b7e8153b37240de6a9d5.woff2",import.meta.url).href,TUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-59e9ff77b0efaf684bc09274fb6908c9.woff2",import.meta.url).href,IUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2adbc89c11e65905393d3dfc468b9d5b.woff2",import.meta.url).href,SUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-70e811fd7994e61f408c923de6ddd078.woff2",import.meta.url).href,xUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c4a687ac4f0c2766eefc9f77ed99cddf.woff2",import.meta.url).href,CUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-51502f1206be09c565f1547c406e9558.woff2",import.meta.url).href,AUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1fdc0c67ed57263a80fd108c1f6ccf24.woff2",import.meta.url).href,MUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e11567fd2accf9957cd0d3c2be937d87.woff2",import.meta.url).href,RUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-20cc1bbf50e7efb442756cb605672c1f.woff2",import.meta.url).href,kUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5d2898fbc097a7e24c6f38d80587621e.woff2",import.meta.url).href,LUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ac9ceb44437becc3e9c4dbfebab7fc2d.woff2",import.meta.url).href,DUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c16ed9740b85badf16e86ea782a3062f.woff2",import.meta.url).href,NUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa0d470430e6391eca720c7cfa44446f.woff2",import.meta.url).href,OUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f2b54d4e7be0eaefe1c2c56836fa5368.woff2",import.meta.url).href,PUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-99a16ef6a64934d5781933dbd9c46b2e.woff2",import.meta.url).href,FUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-c40533fdf4cc57177b12803598af7e59.woff2",import.meta.url).href,BUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-91ddb2969bf2d31ba02ad82998d1314c.woff2",import.meta.url).href,zUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-774d4f764a1299da5d28ec2f2ffe0d69.woff2",import.meta.url).href,HUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-7718fe60986d8b42b1be9c5ace5ccf25.woff2",import.meta.url).href,VUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-aa5c9ca6cf4fba00433b7aa3fa10671a.woff2",import.meta.url).href,$Ue=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4f50e5136e136527280bc902c5817561.woff2",import.meta.url).href,GUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a0ca5df4258213d7fc9fce80f65ce760.woff2",import.meta.url).href,XUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d2666cbed13462c5dc36fa2f15c202ca.woff2",import.meta.url).href,jUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1e6fd68f1f3902ce48ce8c69df385622.woff2",import.meta.url).href,YUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-87599f94b6cc129d505b375798d0d751.woff2",import.meta.url).href,WUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13ae07ed2e272d26d59bc0691cd7117a.woff2",import.meta.url).href,KUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-353f33792a8f60dc69323ddf635a269e.woff2",import.meta.url).href,ZUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-0facdf1ea213ba40261022f5d5ed4493.woff2",import.meta.url).href,qUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f6032fc06eb20480f096199713f70885.woff2",import.meta.url).href,QUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-f8ee5d36068a42b51d0e4a1116cfcec1.woff2",import.meta.url).href,JUe=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-79d494361ae093b69e74ee9dbe65bfd4.woff2",import.meta.url).href,e2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-74e2263a91439c25b91d5132ce9f4d62.woff2",import.meta.url).href,t2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-ee8bae97908d5147b423f77ad0d3c1bb.woff2",import.meta.url).href,n2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56467a5c8840c4d23a60b2f935114848.woff2",import.meta.url).href,i2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-145aa02cdd91946e67dc934e1acffe75.woff2",import.meta.url).href,r2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-54acdfc2166ad7fcbd074f75fd4a56ba.woff2",import.meta.url).href,s2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-29cec36cd205b211da97acabaa62f055.woff2",import.meta.url).href,o2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3756e81d3e149cf6099163ee79944fec.woff2",import.meta.url).href,a2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-8e9f97f01034820170065b2921b4fb5e.woff2",import.meta.url).href,l2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-13d2887ec8ee73c43acdabc52a05af7b.woff2",import.meta.url).href,c2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-72536a3d71b694a0d53dd90ddceae41e.woff2",import.meta.url).href,u2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-603aefd23e350ba7eb124273e3c9bcf1.woff2",import.meta.url).href,d2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9544732d2e62d1a429674f8ee41b5d3a.woff2",import.meta.url).href,f2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-d3716376641d615e2995605b29bca7b6.woff2",import.meta.url).href,h2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a1ce3117cfe90c48e8fb4a9a00f694d.woff2",import.meta.url).href,g2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-b7d203b051eff504ff59ddca7576b6a9.woff2",import.meta.url).href,m2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4a38cc3e9cf104e69ba246d37f8cf135.woff2",import.meta.url).href,p2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-982b630266d87db93d2539affb1275c6.woff2",import.meta.url).href,U2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-9592bfc861f07bcb8d75c196b370e548.woff2",import.meta.url).href,b2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a7accba310e821da5505f71c03b76bdb.woff2",import.meta.url).href,y2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-dac48066b5883d8b4551fc584f0c2a3e.woff2",import.meta.url).href,E2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-a1f916d6039285c4ffb900cd654e418f.woff2",import.meta.url).href,v2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-95bfd249da4902577b4b7d76ebdd0b44.woff2",import.meta.url).href,w2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-93fc8f28a33234bcadf1527cafabd502.woff2",import.meta.url).href,_2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-903bb6865f3452e2fda42e3a25547bc5.woff2",import.meta.url).href,T2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-4aca6a43e59aceee2166b0c7e4e85ef1.woff2",import.meta.url).href,I2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24476a126f129212beb33f66853ea151.woff2",import.meta.url).href,S2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-1b611157cd46bb184d4fa4dae2d6a2b8.woff2",import.meta.url).href,x2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-56a32a7689abd0326e57c10c6c069bb4.woff2",import.meta.url).href,C2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-3cc70dbb64df5b21f1326cc24dee2195.woff2",import.meta.url).href,A2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-e2ead7ea7da0437f085f42ffc05f8d13.woff2",import.meta.url).href,M2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-97f7f48ce90c9429bf32ae51469db74d.woff2",import.meta.url).href,R2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-24a21c1e4449222e8d1898d69ff3a404.woff2",import.meta.url).href,k2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-726303e0774b4e678bff8c2deb6ca603.woff2",import.meta.url).href,L2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-5a7fac4b8b23a6e4e5ba0c9bf1756c91.woff2",import.meta.url).href,D2e=""+new URL("../fonts/Xiaolai/Xiaolai-Regular-2b7441d46298788ac94e610ffcc709b6.woff2",import.meta.url).href,N2e=[{uri:K1e,descriptors:{unicodeRange:"U+f9b8-fa6d,U+fe32,U+fe45-fe4f,U+ff02-ff0b,U+ff0d-ff1e,U+ff20-ff2a"}},{uri:J1e,descriptors:{unicodeRange:"U+20dd-20de,U+25ef,U+ff2b-ffbe,U+ffc2-ffc7,U+ffca-ffcf,U+ffd2-ffd7,U+ffda-ffdc,U+ffe0-ffe6,U+ffe8-ffee"}},{uri:Q1e,descriptors:{unicodeRange:"U+d7eb-d7fb,U+f900-f9b7"}},{uri:e0e,descriptors:{unicodeRange:"U+d6f2-d7a3,U+d7b0-d7c6,U+d7cb-d7ea"}},{uri:n0e,descriptors:{unicodeRange:"U+d609-d6f1"}},{uri:i0e,descriptors:{unicodeRange:"U+d520-d608"}},{uri:t0e,descriptors:{unicodeRange:"U+d437-d51f"}},{uri:r0e,descriptors:{unicodeRange:"U+d34e-d436"}},{uri:o0e,descriptors:{unicodeRange:"U+d265-d34d"}},{uri:a0e,descriptors:{unicodeRange:"U+d17c-d264"}},{uri:q1e,descriptors:{unicodeRange:"U+d093-d17b"}},{uri:l0e,descriptors:{unicodeRange:"U+cfaa-d092"}},{uri:c0e,descriptors:{unicodeRange:"U+cec1-cfa9"}},{uri:G1e,descriptors:{unicodeRange:"U+cdd8-cec0"}},{uri:Z1e,descriptors:{unicodeRange:"U+ccf1-cdd7"}},{uri:u0e,descriptors:{unicodeRange:"U+cc08-ccf0"}},{uri:$1e,descriptors:{unicodeRange:"U+cb43-cc07"}},{uri:d0e,descriptors:{unicodeRange:"U+ca83-cb42"}},{uri:f0e,descriptors:{unicodeRange:"U+c9a1-ca82"}},{uri:h0e,descriptors:{unicodeRange:"U+c8b8-c9a0"}},{uri:g0e,descriptors:{unicodeRange:"U+c7cf-c8b7"}},{uri:m0e,descriptors:{unicodeRange:"U+c6e6-c7ce"}},{uri:p0e,descriptors:{unicodeRange:"U+c5fd-c6e5"}},{uri:U0e,descriptors:{unicodeRange:"U+c514-c5fc"}},{uri:b0e,descriptors:{unicodeRange:"U+c42b-c513"}},{uri:y0e,descriptors:{unicodeRange:"U+c341-c34e,U+c350-c42a"}},{uri:E0e,descriptors:{unicodeRange:"U+c258-c340"}},{uri:v0e,descriptors:{unicodeRange:"U+c16f-c257"}},{uri:w0e,descriptors:{unicodeRange:"U+c086-c16e"}},{uri:_0e,descriptors:{unicodeRange:"U+bf9d-c085"}},{uri:s0e,descriptors:{unicodeRange:"U+beb4-bf9c"}},{uri:T0e,descriptors:{unicodeRange:"U+bdcb-beb3"}},{uri:I0e,descriptors:{unicodeRange:"U+bce2-bdca"}},{uri:S0e,descriptors:{unicodeRange:"U+bbf9-bce1"}},{uri:x0e,descriptors:{unicodeRange:"U+bb10-bbf8"}},{uri:C0e,descriptors:{unicodeRange:"U+ba27-bb0f"}},{uri:A0e,descriptors:{unicodeRange:"U+b93e-ba26"}},{uri:M0e,descriptors:{unicodeRange:"U+b855-b93d"}},{uri:R0e,descriptors:{unicodeRange:"U+b76c-b854"}},{uri:P0e,descriptors:{unicodeRange:"U+b683-b76b"}},{uri:F0e,descriptors:{unicodeRange:"U+b59a-b682"}},{uri:k0e,descriptors:{unicodeRange:"U+b4b1-b599"}},{uri:B0e,descriptors:{unicodeRange:"U+11fb-11ff,U+b3cd-b4b0"}},{uri:z0e,descriptors:{unicodeRange:"U+11e6-11fa,U+b2f9-b3cc"}},{uri:H0e,descriptors:{unicodeRange:"U+11d1-11e5,U+b225-b2f8"}},{uri:N0e,descriptors:{unicodeRange:"U+11bc-11d0,U+b151-b224"}},{uri:V0e,descriptors:{unicodeRange:"U+11a7-11bb,U+b07d-b150"}},{uri:O0e,descriptors:{unicodeRange:"U+1191-11a6,U+afaa-b07c"}},{uri:$0e,descriptors:{unicodeRange:"U+117c-1190,U+aed6-afa9"}},{uri:G0e,descriptors:{unicodeRange:"U+1167-117b,U+ae02-aed5"}},{uri:X0e,descriptors:{unicodeRange:"U+1152-115e,U+1160-1166,U+ad2d-ae01"}},{uri:j0e,descriptors:{unicodeRange:"U+113d-1151,U+ac59-ad2c"}},{uri:Y0e,descriptors:{unicodeRange:"U+1100-113c,U+9f95-9f98,U+9f9c-9f9e,U+9fa1-9fce,U+9fd0,U+a960-a97c,U+ac00-ac58"}},{uri:W0e,descriptors:{unicodeRange:"U+9771-9772,U+9775,U+9777-977b,U+977d-9784,U+9786-978a,U+978c,U+978e-9790,U+9793,U+9795-9797,U+9799-979f,U+97a1-97a2,U+97a4-97aa,U+97ac,U+97ae,U+97b0-97b1,U+97b3,U+97b5-97e5,U+97e8,U+97ee-97f2,U+97f4,U+97f7-982d"}},{uri:K0e,descriptors:{unicodeRange:"U+9491,U+9496,U+9498,U+94c7,U+94cf,U+94d3-94d4,U+94da,U+94e6,U+94fb,U+951c,U+9520,U+9527,U+9533,U+953d,U+9543,U+9548,U+954b,U+9555,U+955a,U+9560,U+956e,U+9574-9575,U+9577-957e,U+9580-95e7,U+95ec,U+95ff,U+9607,U+9613,U+9618,U+961b,U+961e,U+9620,U+9623-9629,U+962b-962d,U+962f-9630,U+9637-963a,U+963e,U+9641,U+9643,U+964a,U+964e-964f,U+9651-9653,U+9656-965a,U+965c-965e,U+9660,U+9663,U+9665-9666,U+966b,U+966d-9671,U+9673,U+9678-9684,U+9687,U+9689-968a,U+968c,U+968e,U+9691-9693"}},{uri:Z0e,descriptors:{unicodeRange:"U+923c-9273,U+9275-928d,U+928f-92ad,U+92af-92c7,U+92c9-92ee"}},{uri:q0e,descriptors:{unicodeRange:"U+9159,U+915b-915c,U+915f-9160,U+9166-9168,U+916b,U+916d,U+9173,U+917a-917c,U+9180-9184,U+9186,U+9188,U+918a,U+918e-918f,U+9193-9199,U+919c-91a1,U+91a4-91a9,U+91ab-91ac,U+91b0-91b3,U+91b6-91b9,U+91bb-91c6,U+91c8,U+91cb,U+91d0,U+91d2-91db,U+91dd-923b"}},{uri:Q0e,descriptors:{unicodeRange:"U+902b-902c,U+9030-9034,U+9037,U+9039-903a,U+903d,U+903f-9040,U+9043,U+9045-9046,U+9048-904c,U+904e,U+9054-9056,U+9059-905a,U+905c-9061,U+9064,U+9066-9067,U+9069-906c,U+906f-9073,U+9076-907c,U+907e,U+9081,U+9084-9087,U+9089-908a,U+908c-9090,U+9092,U+9094,U+9096,U+9098,U+909a,U+909c,U+909e-90a0,U+90a4-90a5,U+90a7-90a9,U+90ab,U+90ad,U+90b2,U+90b7,U+90bc-90bd,U+90bf-90c0,U+90c2-90c3,U+90c6,U+90c8-90c9,U+90cb-90cd,U+90d2,U+90d4-90d6,U+90d8-90da,U+90de-90e0,U+90e3-90e5,U+90e9-90ea,U+90ec,U+90ee,U+90f0-90f3,U+90f5-90f7,U+90f9-90fc,U+90ff-9101,U+9103,U+9105-9118,U+911a-911d,U+911f-9121,U+9124-912e,U+9130,U+9132-9138,U+913a-9142,U+9144-9145,U+9147-9148,U+9151,U+9153-9156,U+9158"}},{uri:J0e,descriptors:{unicodeRange:"U+8f03-8f65,U+8f6a,U+8f80,U+8f8c,U+8f92,U+8f9d,U+8fa0-8fa2,U+8fa4-8fa7,U+8faa,U+8fac-8faf,U+8fb2-8fb5,U+8fb7-8fb8,U+8fba-8fbc,U+8fbf-8fc0,U+8fc3,U+8fc6,U+8fc9-8fcd,U+8fcf,U+8fd2,U+8fd6-8fd7,U+8fda,U+8fe0-8fe1,U+8fe3,U+8fe7,U+8fec,U+8fef,U+8ff1-8ff2,U+8ff4-8ff6,U+8ffa-8ffc,U+8ffe-8fff,U+9007-9008,U+900c,U+900e,U+9013,U+9015,U+9018-9019,U+901c,U+9023-9025,U+9027-902a"}},{uri:epe,descriptors:{unicodeRange:"U+8d03-8d1c,U+8d20,U+8d51-8d52,U+8d57,U+8d5f,U+8d65,U+8d68-8d6a,U+8d6c,U+8d6e-8d6f,U+8d71-8d72,U+8d78-8d80,U+8d82-8d83,U+8d86-8d89,U+8d8c-8d90,U+8d92-8d93,U+8d95-8d9e,U+8da0-8da2,U+8da4-8db0,U+8db2,U+8db6-8db7,U+8db9,U+8dbb,U+8dbd,U+8dc0-8dc2,U+8dc5,U+8dc7-8dca,U+8dcd,U+8dd0,U+8dd2-8dd5,U+8dd8-8dd9,U+8ddc,U+8de0-8de2,U+8de5-8de7,U+8de9,U+8ded-8dee,U+8df0-8df2,U+8df4,U+8df6,U+8dfc,U+8dfe-8e04,U+8e06-8e08,U+8e0b,U+8e0d-8e0e,U+8e10-8e13,U+8e15-8e1c,U+8e20-8e21,U+8e24-8e28,U+8e2b,U+8e2d,U+8e30,U+8e32-8e34,U+8e36-8e38,U+8e3b-8e3c,U+8e3e-8e3f,U+8e43,U+8e45-8e46"}},{uri:tpe,descriptors:{unicodeRange:"U+8bea,U+8c09,U+8c1e,U+8c38-8c40,U+8c42-8c45,U+8c48,U+8c4a-8c4b,U+8c4d-8c54,U+8c56-8c59,U+8c5b-8c60,U+8c63-8c69,U+8c6c-8c72,U+8c74-8c77,U+8c7b-8c81,U+8c83-8c84,U+8c86-8c88,U+8c8b,U+8c8d-8c93,U+8c95-8c97,U+8c99-8d02"}},{uri:npe,descriptors:{unicodeRange:"U+8a64-8a78,U+8a7a-8a88,U+8a8b-8a92,U+8a94-8b06,U+8b08-8b1b"}},{uri:ipe,descriptors:{unicodeRange:"U+8987-89c0,U+89c3,U+89cd,U+89d3-89d5,U+89d7-89d9,U+89db,U+89dd,U+89df-89e2,U+89e4,U+89e7-89ea,U+89ec-89ee,U+89f0-89f2,U+89f4-89ff,U+8a01-8a06,U+8a08-8a3d,U+8a3f-8a47,U+8a49-8a63"}},{uri:rpe,descriptors:{unicodeRange:"U+87e3-87e4,U+87e6-87e9,U+87eb-87ed,U+87ef-87f8,U+87fa-87fd,U+87ff-8802,U+8804-8809,U+880b-8812,U+8814,U+8817-881a,U+881c-8820,U+8823-8831,U+8833-8838,U+883a-883b,U+883d-883f,U+8841-8843,U+8846-884b,U+884e-8853,U+8855-8856,U+8858,U+885a-8860,U+8866-8867,U+886a,U+886d,U+886f,U+8871,U+8873-8876,U+8878-887c,U+8880,U+8883,U+8886-8887,U+8889-888a,U+888c,U+888e-8891,U+8893-8895,U+8897-889b,U+889d-88a1,U+88a3,U+88a5-88aa,U+88ac,U+88ae-88b0,U+88b2-88b6,U+88b8-88bb"}},{uri:spe,descriptors:{unicodeRange:"U+86e7-86e8,U+86ea-86ec,U+86ef,U+86f5-86f7,U+86fa-86fd,U+86ff,U+8701,U+8704-8706,U+870b-870c,U+870e-8711,U+8714,U+8716,U+8719,U+871b,U+871d,U+871f-8720,U+8724,U+8726-8728,U+872a-872d,U+872f-8730,U+8732-8733,U+8735-8736,U+8738-873a,U+873c-873d,U+8740-8746,U+874a-874b,U+874d,U+874f-8752,U+8754-8756,U+8758,U+875a-875f,U+8761-8762,U+8766-876d,U+876f,U+8771-8773,U+8775,U+8777-877a,U+877f-8781,U+8784,U+8786-8787,U+8789-878a,U+878c,U+878e-8792,U+8794-8796,U+8798-879e,U+87a0-87a7,U+87a9-87aa,U+87ae,U+87b0-87b2,U+87b4,U+87b6-87b9,U+87bb-87bc,U+87be-87bf,U+87c1-87c5,U+87c7-87c9,U+87cc-87d0,U+87d4-87da,U+87dc-87df,U+87e1-87e2"}},{uri:ope,descriptors:{unicodeRange:"U+8604,U+8606-8610,U+8612-8615,U+8617-8626,U+8628,U+862a-8637,U+8639-863b,U+863d-864c,U+8652-8653,U+8655-8659,U+865b-865d,U+865f-8661,U+8663-866a,U+866d,U+866f-8670,U+8672-8678,U+8683-8689,U+868e-8692,U+8694,U+8696-869b,U+869e-86a2,U+86a5-86a6,U+86ab,U+86ad-86ae,U+86b2-86b3,U+86b7-86b9,U+86bb-86bf,U+86c1-86c3,U+86c5,U+86c8,U+86cc-86cd,U+86d2-86d3,U+86d5-86d7,U+86da,U+86dc-86dd,U+86e0-86e3,U+86e5-86e6"}},{uri:ape,descriptors:{unicodeRange:"U+8456,U+8458,U+845d-8460,U+8462,U+8464-8468,U+846a,U+846e-8470,U+8472,U+8474,U+8477,U+8479,U+847b-8481,U+8483-8486,U+848a,U+848d,U+848f-8496,U+8498,U+849a-849b,U+849d-84a0,U+84a2-84ae,U+84b0-84b1,U+84b3,U+84b5-84b7,U+84bb-84bc,U+84be,U+84c0,U+84c2-84c3,U+84c5-84c8,U+84cb-84cc,U+84ce-84cf,U+84d2,U+84d4-84d5,U+84d7-84dc,U+84de,U+84e1-84e2,U+84e4,U+84e7-84eb,U+84ed-84ef,U+84f1-84fb,U+84fd-84fe,U+8500-850b,U+850d-8510,U+8512,U+8514-8516,U+8518-8519,U+851b-851e,U+8520,U+8522-852a,U+852d-8536,U+853e-8542,U+8544-8547,U+854b-854f"}},{uri:lpe,descriptors:{unicodeRange:"U+82c2-82c3,U+82c5-82c6,U+82c9,U+82d0,U+82d6,U+82d9-82da,U+82dd,U+82e2,U+82e7-82ea,U+82ec-82ee,U+82f0,U+82f2-82f3,U+82f5-82f6,U+82f8,U+82fa,U+82fc-8300,U+830a-830b,U+830d,U+8310,U+8312-8313,U+8316,U+8318-8319,U+831d-8326,U+8329-832a,U+832e,U+8330,U+8332,U+8337,U+833b,U+833d-833f,U+8341-8342,U+8344-8345,U+8348,U+834a-834e,U+8353,U+8355-8359,U+835d,U+8362,U+8370-8376,U+8379-837a,U+837e-8384,U+8387-8388,U+838a-838d,U+838f-8391,U+8394-8397,U+8399-839a,U+839d,U+839f,U+83a1-83a7,U+83ac-83af,U+83b5,U+83bb,U+83be-83bf,U+83c2-83c4,U+83c6,U+83c8-83c9,U+83cb,U+83cd-83ce,U+83d0-83d3,U+83d5,U+83d7,U+83d9-83db,U+83de,U+83e2-83e4,U+83e6-83e8,U+83eb-83ef,U+83f3-83f7,U+83fa-83fc,U+83fe-8400,U+8402,U+8405,U+8407-840a,U+8410,U+8412-8417,U+8419-841b,U+841e-8423,U+8429-8430,U+8432-8437,U+8439-843b,U+843e-8445,U+8447-8450,U+8452-8455"}},{uri:cpe,descriptors:{unicodeRange:"U+81a4-81a5,U+81a7,U+81a9,U+81ab-81b2,U+81b4-81b9,U+81bc-81bf,U+81c4-81c5,U+81c7-81c9,U+81cb,U+81cd-81e2,U+81e4-81e6,U+81e8-81e9,U+81eb,U+81ee-81f2,U+81f5-81fa,U+81fd,U+81ff,U+8203,U+8207-820b,U+820e-820f,U+8211,U+8213,U+8215-821a,U+821d,U+8220,U+8224-8227,U+8229,U+822e,U+8232,U+823a,U+823c-823d,U+823f-8243,U+8245-8246,U+8248,U+824a,U+824c-824e,U+8250-8257,U+8259,U+825b-825e,U+8260-8267,U+8269-826d,U+8271,U+8275-8278,U+827b-827c,U+8280-8281,U+8283,U+8285-8287,U+8289,U+828c,U+8290,U+8293-8296,U+829a-829b,U+829e,U+82a0,U+82a2-82a3,U+82a7,U+82b2,U+82b5-82b6,U+82ba-82bc,U+82bf-82c0"}},{uri:upe,descriptors:{unicodeRange:"U+8059,U+805b-8068,U+806b-8070,U+8072-807e,U+8081-8082,U+8085,U+8088,U+808a,U+808d-8092,U+8094-8095,U+8097,U+8099,U+809e,U+80a3,U+80a6-80a8,U+80ac,U+80b0,U+80b3,U+80b5-80b6,U+80b8-80b9,U+80bb,U+80c5,U+80c7-80cb,U+80cf-80d5,U+80d8,U+80df-80e0,U+80e2-80e3,U+80e6,U+80ee,U+80f5,U+80f7,U+80f9,U+80fb,U+80fe-8101,U+8103-8105,U+8107-8108,U+810b-810c,U+8115,U+8117,U+8119,U+811b-811d,U+811f-812b,U+812d-812e,U+8130,U+8133-8135,U+8137,U+8139-813d,U+813f-8145,U+8147,U+8149,U+814d-814f,U+8152,U+8156-8158,U+815b-815f,U+8161-8164,U+8166,U+8168,U+816a-816c,U+816f,U+8172-8173,U+8175-8178,U+8181,U+8183-8187,U+8189,U+818b-818e,U+8190,U+8192-8197,U+8199-819a,U+819e-81a2"}},{uri:dpe,descriptors:{unicodeRange:"U+7f3c-7f41,U+7f43,U+7f46-7f4f,U+7f52-7f53,U+7f56,U+7f59,U+7f5b-7f5e,U+7f60,U+7f63-7f67,U+7f6b-7f6d,U+7f6f-7f70,U+7f73,U+7f75-7f78,U+7f7a-7f7d,U+7f7f-7f80,U+7f82-7f89,U+7f8b,U+7f8d,U+7f8f-7f93,U+7f95-7f99,U+7f9b-7f9c,U+7fa0,U+7fa2-7fa3,U+7fa5-7fa6,U+7fa8-7fae,U+7fb1,U+7fb3-7fb7,U+7fba-7fbb,U+7fbe,U+7fc0,U+7fc2-7fc4,U+7fc6-7fc9,U+7fcb,U+7fcd,U+7fcf-7fd3,U+7fd6-7fd7,U+7fd9-7fde,U+7fe2-7fe4,U+7fe7-7fe8,U+7fea-7fed,U+7fef,U+7ff2,U+7ff4-7ffa,U+7ffd-7fff,U+8002,U+8007-800a,U+800e-800f,U+8011,U+8013,U+801a-801b,U+801d-801f,U+8021,U+8023-8024,U+802b-8030,U+8032,U+8034,U+8039-803a,U+803c,U+803e,U+8040-8041,U+8044-8045,U+8047-8049,U+804e-8051,U+8053,U+8055-8057"}},{uri:j1e,descriptors:{unicodeRange:"U+7cd8,U+7cda-7cdb,U+7cdd-7cde,U+7ce1-7ce7,U+7ce9-7cee,U+7cf0-7cf7,U+7cf9-7cfa,U+7cfc-7d09,U+7d0b-7d1f,U+7d21,U+7d23-7d26,U+7d28-7d2a,U+7d2c-7d2e,U+7d30-7d6d,U+7d6f-7d76,U+7d78-7d94"}},{uri:fpe,descriptors:{unicodeRange:"U+7afe,U+7b00-7b02,U+7b05,U+7b07,U+7b09,U+7b0c-7b0e,U+7b10,U+7b12-7b13,U+7b16-7b18,U+7b1a,U+7b1c-7b1d,U+7b1f,U+7b21-7b23,U+7b27,U+7b29,U+7b2d,U+7b2f-7b30,U+7b32,U+7b34-7b37,U+7b39,U+7b3b,U+7b3d,U+7b3f-7b44,U+7b46,U+7b48,U+7b4a,U+7b4d-7b4e,U+7b53,U+7b55,U+7b57,U+7b59,U+7b5c,U+7b5e-7b5f,U+7b61,U+7b63-7b6d,U+7b6f-7b70,U+7b73-7b74,U+7b76,U+7b78,U+7b7a,U+7b7c-7b7d,U+7b7f,U+7b81-7b84,U+7b86-7b8c,U+7b8e-7b8f,U+7b91-7b93,U+7b96,U+7b98-7b9b,U+7b9e-7ba0,U+7ba3-7ba5,U+7bae-7bb0,U+7bb2-7bb3,U+7bb5-7bb7,U+7bb9-7bc0,U+7bc2-7bc5,U+7bc8-7bcb,U+7bcd-7bd0,U+7bd2,U+7bd4-7bd8,U+7bdb-7bdc,U+7bde-7be0,U+7be2-7be4,U+7be7-7be9,U+7beb-7bed,U+7bef-7bf0,U+7bf2-7bf6,U+7bf8-7bfb,U+7bfd,U+7bff-7c06,U+7c08-7c0a,U+7c0d-7c0e,U+7c10-7c13"}},{uri:hpe,descriptors:{unicodeRange:"U+7a10-7a13,U+7a15-7a16,U+7a18-7a19,U+7a1b-7a1d,U+7a1f,U+7a21-7a22,U+7a24-7a32,U+7a34-7a36,U+7a38,U+7a3a,U+7a3e,U+7a40-7a45,U+7a47-7a50,U+7a52-7a56,U+7a58-7a6f,U+7a71-7a73,U+7a75,U+7a7b-7a7e,U+7a82,U+7a85,U+7a87,U+7a89-7a8c,U+7a8e-7a90,U+7a93-7a94,U+7a99-7a9b,U+7a9e,U+7aa1-7aa4,U+7aa7,U+7aa9-7aab,U+7aae-7ab2,U+7ab4-7abe,U+7ac0-7aca,U+7acc-7ad5,U+7ad7-7ad8,U+7ada-7add,U+7ae1-7ae2,U+7ae4,U+7ae7-7aec,U+7aee,U+7af0-7af8,U+7afb-7afc"}},{uri:gpe,descriptors:{unicodeRange:"U+790d-7912,U+7914-791d,U+791f-7923,U+7925-7933,U+7935-7939,U+793d,U+793f,U+7942-7945,U+7947,U+794a-7952,U+7954-7955,U+7958-7959,U+7961,U+7963-7964,U+7966,U+7969-796c,U+796e,U+7970-7976,U+7979,U+797b-797f,U+7982-7983,U+7986-7989,U+798b-798e,U+7990-7999,U+799b-79a6,U+79a8-79b2,U+79b4-79b8,U+79bc,U+79bf,U+79c2,U+79c4-79c5,U+79c7-79c8,U+79ca,U+79cc,U+79ce-79d0,U+79d3-79d4,U+79d6-79d7,U+79d9-79de,U+79e0-79e2,U+79e5,U+79e8,U+79ea,U+79ec,U+79ee,U+79f1-79f7,U+79f9-79fa,U+79fc,U+79fe-79ff,U+7a01,U+7a04-7a05,U+7a07-7a0a,U+7a0c,U+7a0f"}},{uri:mpe,descriptors:{unicodeRange:"U+77d8-77da,U+77dd-77e1,U+77e4,U+77e6,U+77e8,U+77ea,U+77ef-77f2,U+77f4-77f5,U+77f7,U+77f9-77fc,U+7803-7808,U+780a-780b,U+780e-7810,U+7813,U+7815,U+7819,U+781b,U+781e,U+7820-7822,U+7824,U+7828,U+782a-782b,U+782e-782f,U+7831-7833,U+7835-7836,U+783d,U+783f,U+7841-7844,U+7846,U+7848-784b,U+784d,U+784f,U+7851,U+7853-7854,U+7858-785c,U+785e-7869,U+786f-7876,U+7878-787b,U+787d-7886,U+7888,U+788a-788b,U+788f-7890,U+7892,U+7894-7896,U+7899,U+789d-789e,U+78a0,U+78a2,U+78a4,U+78a6,U+78a8-78af,U+78b5-78b8,U+78ba-78bd,U+78bf-78c0,U+78c2-78c4,U+78c6-78c8,U+78cc-78cf,U+78d1-78d3,U+78d6-78d8,U+78da-78e7,U+78e9-78eb,U+78ed-78f1,U+78f3,U+78f5-78f6,U+78f8-78f9,U+78fb-7900,U+7902-7904,U+7906-790c"}},{uri:ppe,descriptors:{unicodeRange:"U+76af-76b0,U+76b3,U+76b5-76be,U+76c0-76c1,U+76c3-76c4,U+76c7,U+76c9,U+76cb-76cc,U+76d3,U+76d5,U+76d9-76da,U+76dc-76de,U+76e0-76e4,U+76e6-76ed,U+76f0,U+76f3,U+76f5-76f7,U+76fa-76fb,U+76fd,U+76ff-7703,U+7705-7706,U+770a,U+770c,U+770e-7718,U+771b-771e,U+7721,U+7723-7725,U+7727,U+772a-772c,U+772e,U+7730-7734,U+7739,U+773b,U+773d-773f,U+7742,U+7744-7746,U+7748-774f,U+7752-7759,U+775c-7760,U+7764,U+7767,U+7769-776a,U+776d-7778,U+777a-777c,U+7781-7783,U+7786-778b,U+778f-7790,U+7793-779e,U+77a1,U+77a3-77a4,U+77a6,U+77a8,U+77ab,U+77ad-77af,U+77b1-77b2,U+77b4,U+77b6-77ba,U+77bc,U+77be,U+77c0-77cc,U+77ce-77d6"}},{uri:Upe,descriptors:{unicodeRange:"U+7589-758a,U+758c-758e,U+7590,U+7593,U+7595,U+7598,U+759b-759c,U+759e,U+75a2,U+75a6-75aa,U+75ad,U+75b6-75b7,U+75ba-75bb,U+75bf-75c1,U+75c6,U+75cb-75cc,U+75ce-75d1,U+75d3,U+75d7,U+75d9-75da,U+75dc-75dd,U+75df-75e1,U+75e5,U+75e9,U+75ec-75ef,U+75f2-75f3,U+75f5-75f8,U+75fa-75fb,U+75fd-75fe,U+7602,U+7604,U+7606-7609,U+760b,U+760d-760f,U+7611-7614,U+7616,U+761a,U+761c-761e,U+7621,U+7623,U+7627-7628,U+762c,U+762e-762f,U+7631-7632,U+7636-7637,U+7639-763b,U+763d,U+7641-7642,U+7644-764b,U+764e-7653,U+7655,U+7657-765b,U+765d,U+765f-7662,U+7664-766a,U+766c-766e,U+7670-7677,U+7679-767a,U+767c,U+767f-7681,U+7683,U+7685,U+7689-768a,U+768c-768d,U+768f-7690,U+7692,U+7694-7695,U+7697-7698,U+769a-76a3,U+76a5-76ad"}},{uri:bpe,descriptors:{unicodeRange:"U+7492-749b,U+749d,U+749f-74a6,U+74aa-74b9,U+74bb-74d1,U+74d3-74db,U+74dd,U+74df,U+74e1,U+74e5,U+74e7-74ed,U+74f0-74f3,U+74f5,U+74f8-74fe,U+7500-7503,U+7505-750c,U+750e,U+7510,U+7512,U+7514-7517,U+751b,U+751d-751e,U+7520-7524,U+7526-7527,U+752a,U+752e,U+7534,U+7536,U+7539,U+753c-753d,U+753f,U+7541-7544,U+7546-7547,U+7549-754a,U+754d,U+7550-7553,U+7555-7558,U+755d-7564,U+7567-7569,U+756b-7571,U+7573,U+7575-7577,U+757a-757e,U+7580-7582,U+7584-7585,U+7587-7588"}},{uri:ype,descriptors:{unicodeRange:"U+7372-737d,U+737f-7383,U+7385-7386,U+7388,U+738a,U+738c-738d,U+738f-7390,U+7392-7395,U+7397-739a,U+739c-739e,U+73a0-73a1,U+73a3-73a8,U+73aa,U+73ac-73ad,U+73b1,U+73b4-73b6,U+73b8-73b9,U+73bc-73bf,U+73c1,U+73c3-73c7,U+73cb-73cc,U+73ce,U+73d2-73d8,U+73da-73dd,U+73df,U+73e1-73e4,U+73e6,U+73e8,U+73ea-73ec,U+73ee-73f1,U+73f3-7402,U+7404,U+7407-7408,U+740b-740e,U+7411-7419,U+741c-7421,U+7423-7424,U+7427,U+7429,U+742b,U+742d,U+742f,U+7431-7432,U+7437-743b,U+743d-7440,U+7442-7454,U+7456,U+7458,U+745d,U+7460-746c,U+746e-746f,U+7471-7475,U+7478-747d,U+747f,U+7482,U+7484-7486,U+7488-748a,U+748c-748d,U+748f,U+7491"}},{uri:V1e,descriptors:{unicodeRange:"U+7054-705d,U+705f-706a,U+706e,U+7071-7074,U+7077,U+7079-707b,U+707d,U+7081-7084,U+7086-7088,U+708b-708d,U+708f-7091,U+7093,U+7097-7098,U+709a-709b,U+709e-70aa,U+70b0,U+70b2,U+70b4-70b6,U+70ba,U+70be-70bf,U+70c4-70c7,U+70c9,U+70cb-70d7,U+70da,U+70dc-70de,U+70e0-70e3,U+70e5,U+70ea,U+70ee,U+70f0-70f6,U+70f8,U+70fa-70fc,U+70fe-7108,U+710b-710f,U+7111-7112,U+7114,U+7117,U+711b-7125,U+7127-712e,U+7132-7135,U+7137-7144,U+7146-7149,U+714b,U+714d,U+714f-715b,U+715d,U+715f-7163,U+7165,U+7169-716d,U+716f-7171,U+7174-7177"}},{uri:Epe,descriptors:{unicodeRange:"U+722e-722f,U+7232-7234,U+723a,U+723c,U+723e,U+7240-7246,U+7249-724b,U+724e-7251,U+7253-7255,U+7257-7258,U+725a,U+725c,U+725e,U+7260,U+7263-7265,U+7268,U+726a-726d,U+7270-7271,U+7273-7274,U+7276-7278,U+727b-727d,U+7282-7283,U+7285-7289,U+728c,U+728e,U+7290-7291,U+7293-729e,U+72a0-72ab,U+72ae,U+72b1-72b3,U+72b5,U+72ba-72c0,U+72c5-72c7,U+72c9-72cc,U+72cf,U+72d1,U+72d3-72d6,U+72d8,U+72da-72dd,U+72df,U+72e2-72e7,U+72ea-72eb,U+72f5-72f6,U+72f9,U+72fd-7300,U+7302,U+7304-7309,U+730b-730d,U+730f-7312,U+7314,U+7318-731a,U+731f-7320,U+7323-7324,U+7326-7328,U+732d,U+732f-7330,U+7332-7333,U+7335-7336,U+733a-733d,U+7340-734c,U+734e-734f,U+7351,U+7353-7356,U+7358-735f,U+7361-736b,U+736e,U+7370-7371"}},{uri:D0e,descriptors:{unicodeRange:"U+6ec5-6ec6,U+6ec8-6eca,U+6ecc-6ece,U+6ed0,U+6ed2,U+6ed6,U+6ed8-6ed9,U+6edb-6edd,U+6ee3,U+6ee7,U+6eea-6ef3,U+6ef5-6ef8,U+6efa-6f01,U+6f03-6f05,U+6f07-6f08,U+6f0a-6f0e,U+6f10-6f12,U+6f16-6f1f,U+6f21-6f23,U+6f25-6f28,U+6f2c,U+6f2e,U+6f30,U+6f32,U+6f34-6f35,U+6f37-6f3d,U+6f3f-6f45,U+6f48-6f4a,U+6f4c,U+6f4e-6f57,U+6f59-6f5b,U+6f5d,U+6f5f-6f61,U+6f63-6f65,U+6f67-6f6c,U+6f6f-6f71,U+6f73,U+6f75-6f77,U+6f79,U+6f7b,U+6f7d-6f83,U+6f85-6f87,U+6f8a-6f8b,U+6f8f-6f9b,U+6f9d-6fa0,U+6fa2-6fa6,U+6fa8-6fb1"}},{uri:vpe,descriptors:{unicodeRange:"U+6d73,U+6d75-6d76,U+6d79-6d7b,U+6d7d-6d81,U+6d83-6d84,U+6d86-6d87,U+6d8a-6d8b,U+6d8d,U+6d8f-6d90,U+6d92,U+6d96-6d9a,U+6d9c,U+6da2,U+6da5,U+6dac-6dad,U+6db0-6db1,U+6db3-6db4,U+6db6-6db7,U+6db9-6dbe,U+6dc1-6dc3,U+6dc8-6dca,U+6dcd-6dd0,U+6dd2-6dd5,U+6dd7,U+6dda-6ddc,U+6ddf,U+6de2-6de3,U+6de5,U+6de7-6dea,U+6ded,U+6def-6df0,U+6df2,U+6df4-6df6,U+6df8,U+6dfa,U+6dfd-6e04,U+6e06-6e09,U+6e0b,U+6e0f,U+6e12-6e13,U+6e15,U+6e18-6e19,U+6e1b-6e1c,U+6e1e-6e1f,U+6e22,U+6e26-6e28,U+6e2a,U+6e2c,U+6e2e,U+6e30-6e31,U+6e33,U+6e35-6e37,U+6e39,U+6e3b-6e42,U+6e45-6e4c,U+6e4f-6e52,U+6e55,U+6e57,U+6e59-6e5a,U+6e5c-6e5e,U+6e60-6e6a,U+6e6c-6e6d,U+6e6f-6e7d,U+6e80-6e82,U+6e84,U+6e87-6e88,U+6e8a-6e8e,U+6e91-6e97,U+6e99-6e9b,U+6e9d-6e9e,U+6ea0-6ea1,U+6ea3-6ea4,U+6ea6,U+6ea8-6ea9,U+6eab-6eae,U+6eb0,U+6eb3,U+6eb5,U+6eb8-6eb9,U+6ebc,U+6ebe-6ec0,U+6ec3-6ec4"}},{uri:wpe,descriptors:{unicodeRange:"U+6bbb-6bbe,U+6bc0,U+6bc3-6bc4,U+6bc6-6bca,U+6bcc,U+6bce,U+6bd0-6bd1,U+6bd8,U+6bda,U+6bdc-6be0,U+6be2-6be9,U+6bec-6bee,U+6bf0-6bf2,U+6bf4,U+6bf6-6bf8,U+6bfa-6bfc,U+6bfe-6c04,U+6c08-6c0c,U+6c0e,U+6c12,U+6c17,U+6c1c-6c1e,U+6c20,U+6c23,U+6c25,U+6c2b-6c2d,U+6c31,U+6c33,U+6c36-6c37,U+6c39-6c3c,U+6c3e-6c3f,U+6c43-6c45,U+6c48,U+6c4b-6c4f,U+6c51-6c53,U+6c56,U+6c58-6c5a,U+6c62-6c63,U+6c65-6c67,U+6c6b-6c6f,U+6c71,U+6c73,U+6c75,U+6c77-6c78,U+6c7a-6c7c,U+6c7f-6c80,U+6c84,U+6c87,U+6c8a-6c8b,U+6c8d-6c8e,U+6c91-6c92,U+6c95-6c98,U+6c9a,U+6c9c-6c9e,U+6ca0,U+6ca2,U+6ca8,U+6cac,U+6caf-6cb0,U+6cb4-6cb7,U+6cba,U+6cc0-6cc3,U+6cc6-6cc8,U+6ccb,U+6ccd-6ccf,U+6cd1-6cd2,U+6cd8-6cda,U+6cdc-6cdd,U+6cdf,U+6ce4,U+6ce6-6ce7,U+6ce9,U+6cec-6ced,U+6cf2,U+6cf4,U+6cf9,U+6cff-6d00,U+6d02-6d03,U+6d05-6d06,U+6d08-6d0a,U+6d0d,U+6d0f-6d11,U+6d13-6d16,U+6d18,U+6d1c-6d1d,U+6d1f-6d24,U+6d26,U+6d28-6d29,U+6d2c-6d2d,U+6d2f-6d30,U+6d34,U+6d36-6d38,U+6d3a,U+6d3f-6d40,U+6d42,U+6d44,U+6d49,U+6d4c,U+6d50,U+6d55-6d58,U+6d5b,U+6d5d,U+6d5f,U+6d61-6d62,U+6d64-6d65,U+6d67-6d68,U+6d6b-6d6d,U+6d70-6d72"}},{uri:_pe,descriptors:{unicodeRange:"U+6967-696a,U+696c-696d,U+696f-6970,U+6972-6976,U+697a-697b,U+697d-697f,U+6981,U+6983,U+6985,U+698a-698c,U+698e-6993,U+6996-6997,U+6999-699a,U+699d-69a6,U+69a9-69aa,U+69ac,U+69ae-69b0,U+69b2-69b3,U+69b5-69b6,U+69b8-69ba,U+69bc-69c0,U+69c2-69c9,U+69cb,U+69cd,U+69cf,U+69d1-69d3,U+69d5-69da,U+69dc-69de,U+69e1-69ec,U+69ee-69f1,U+69f3-69fc,U+69fe,U+6a00-6a09,U+6a0b-6a16,U+6a19-6a1e,U+6a20,U+6a22-6a27,U+6a29,U+6a2b-6a2e,U+6a30,U+6a32-6a34,U+6a36-6a3c,U+6a3f-6a43,U+6a45-6a46,U+6a48-6a4a"}},{uri:Tpe,descriptors:{unicodeRange:"U+6830-6831,U+6834-6836,U+683a-683b,U+683f,U+6847,U+684b,U+684d,U+684f,U+6852,U+6856-685f,U+686a,U+686c-6873,U+6875,U+6878-6880,U+6882,U+6884,U+6887-688e,U+6890-6892,U+6894-6896,U+6898-68a1,U+68a3-68a5,U+68a9-68ac,U+68ae,U+68b1-68b2,U+68b4,U+68b6-68bf,U+68c1,U+68c3-68c8,U+68ca,U+68cc,U+68ce-68d1,U+68d3-68d4,U+68d6-68d7,U+68d9,U+68db-68df,U+68e1-68e2,U+68e4-68ed,U+68ef,U+68f2-68f4,U+68f6-68f8,U+68fb,U+68fd-6900,U+6902-6904,U+6906-690a,U+690c,U+690f,U+6911,U+6913-691e,U+6921-6923,U+6925-692c,U+692e-692f,U+6931-6933,U+6935-6938,U+693a-693c,U+693e,U+6940-6941,U+6943-6953,U+6955-6956,U+6958-6959,U+695b-695c,U+695f,U+6961-6962,U+6964-6965"}},{uri:Ipe,descriptors:{unicodeRange:"U+66b8,U+66ba-66bd,U+66bf-66d8,U+66da,U+66de-66e5,U+66e7-66e8,U+66ea-66ef,U+66f1,U+66f5-66f6,U+66f8,U+66fa-66fb,U+66fd,U+6701-6707,U+670c,U+670e-670f,U+6711-6713,U+6716,U+6718-671a,U+671c,U+671e,U+6720-6725,U+6727,U+6729,U+672e,U+6730,U+6732-6733,U+6736-6739,U+673b-673c,U+673e-673f,U+6741,U+6744-6745,U+6747,U+674a-674b,U+674d,U+6752,U+6754-6755,U+6757-675b,U+675d,U+6762-6764,U+6766-6767,U+676b-676c,U+676e,U+6771,U+6774,U+6776,U+6778-677b,U+677d,U+6780,U+6782-6783,U+6785-6786,U+6788,U+678a,U+678c-678f,U+6791-6794,U+6796,U+6799,U+679b,U+679f-67a1,U+67a4,U+67a6,U+67a9,U+67ac,U+67ae,U+67b1-67b2,U+67b4,U+67b9-67c0,U+67c2,U+67c5-67ce,U+67d5-67d7,U+67db,U+67df,U+67e1,U+67e3-67e4,U+67e6-67e8,U+67ea-67eb,U+67ed-67ee,U+67f2,U+67f5-67fc,U+67fe,U+6801-6804,U+6806,U+680d,U+6810,U+6812,U+6814-6815,U+6818-681c,U+681e-6820,U+6822-6828,U+682b-682f"}},{uri:Spe,descriptors:{unicodeRange:"U+6569-656a,U+656d-656f,U+6571,U+6573,U+6575-6576,U+6578-6586,U+6588-658a,U+658d-658f,U+6592,U+6594-6596,U+6598,U+659a,U+659d-659e,U+65a0,U+65a2-65a3,U+65a6,U+65a8,U+65aa,U+65ac,U+65ae,U+65b1-65b8,U+65ba-65bb,U+65be-65c0,U+65c2,U+65c7-65ca,U+65cd,U+65d0-65d1,U+65d3-65d5,U+65d8-65df,U+65e1,U+65e3-65e4,U+65ea-65eb,U+65f2-65f5,U+65f8-65f9,U+65fb-65ff,U+6601,U+6604-6605,U+6607-6609,U+660b,U+660d,U+6610-6612,U+6616-6618,U+661a-661c,U+661e,U+6621-6624,U+6626,U+6629-662c,U+662e,U+6630,U+6632-6633,U+6637-663b,U+663d,U+663f-6640,U+6642,U+6644-664a,U+664d-664e,U+6650-6651,U+6658-6659,U+665b-665e,U+6660,U+6662-6663,U+6665,U+6667,U+6669-666d,U+6671-6673,U+6675,U+6678-6679,U+667b-667d,U+667f-6681,U+6683,U+6685-6686,U+6688-668b,U+668d-6690,U+6692-6695,U+6698-669c,U+669e-66a6,U+66a9-66ad,U+66af-66b3,U+66b5-66b7"}},{uri:xpe,descriptors:{unicodeRange:"U+5f30,U+5f32-5f38,U+5f3b,U+5f3d-5f3f,U+5f41-5f4f,U+5f51,U+5f54,U+5f59-5f5c,U+5f5e-5f60,U+5f63,U+5f65,U+5f67-5f68,U+5f6b,U+5f6e-5f6f,U+5f72,U+5f74-5f76,U+5f78,U+5f7a,U+5f7d-5f7f,U+5f83,U+5f86,U+5f8d-5f8f,U+5f91,U+5f93-5f94,U+5f96,U+5f9a-5f9b,U+5f9d-5fa0,U+5fa2-5fa7,U+5fa9,U+5fab-5fac,U+5faf-5fb4,U+5fb6,U+5fb8-5fbb,U+5fbe-5fc2,U+5fc7-5fc8,U+5fca-5fcb,U+5fce,U+5fd3-5fd5,U+5fda-5fdc,U+5fde-5fdf,U+5fe2-5fe3,U+5fe5-5fe6,U+5fe8-5fe9,U+5fec,U+5fef-5ff0,U+5ff2-5ff4,U+5ff6-5ff7,U+5ff9-5ffa,U+5ffc,U+6007-6009,U+600b-600c,U+6010-6011,U+6013,U+6017-6018,U+601a,U+601e-601f,U+6022-6024,U+602c-602e,U+6030-6034,U+6036-603a,U+603d-603e,U+6040,U+6044-604a,U+604c,U+604e-604f,U+6051,U+6053-6054,U+6056-6058,U+605b-605c,U+605e-6061,U+6065-6066,U+606e,U+6071-6072,U+6074-6075,U+6077,U+607e,U+6080-6082,U+6085-6088,U+608a-608b,U+608e-6091,U+6093,U+6095,U+6097-6099,U+609c,U+609e,U+60a1-60a2,U+60a4-60a5,U+60a7,U+60a9-60aa,U+60ae,U+60b0,U+60b3,U+60b5-60b7,U+60b9-60ba,U+60bd-60c4,U+60c7-60c9,U+60cc"}},{uri:Cpe,descriptors:{unicodeRange:"U+635a-635d,U+6360,U+6364-6366,U+6368,U+636a-636c,U+636f-6370,U+6372-6375,U+6378-6379,U+637c-637f,U+6381,U+6383-6386,U+638b,U+638d,U+6391,U+6393-6395,U+6397,U+6399-639f,U+63a1,U+63a4,U+63a6,U+63ab,U+63af,U+63b1-63b2,U+63b5-63b6,U+63b9,U+63bb,U+63bd,U+63bf-63c3,U+63c5,U+63c7-63c8,U+63ca-63cc,U+63d1,U+63d3-63d5,U+63d7-63dd,U+63df,U+63e2,U+63e4-63e8,U+63eb-63ec,U+63ee-63f1,U+63f3,U+63f5,U+63f7,U+63f9-63fc,U+63fe,U+6403-6404,U+6406-640a,U+640d-640e,U+6411-6412,U+6415-641a,U+641d,U+641f,U+6422-6425,U+6427-6429,U+642b,U+642e-6433,U+6435-6439,U+643b-643c,U+643e,U+6440,U+6442-6443,U+6449,U+644b-6451,U+6453,U+6455-6457,U+6459-645d,U+645f-6466,U+6468,U+646a-646c,U+646e-6477,U+647b-6481,U+6483,U+6486,U+6488-648f"}},{uri:Ape,descriptors:{unicodeRange:"U+61c5-61c7,U+61c9,U+61cc-61d0,U+61d3,U+61d5-61e5,U+61e7-61f4,U+61f6-61fe,U+6200-6205,U+6207,U+6209,U+6213-6214,U+6219,U+621c-621e,U+6220,U+6223,U+6226-6229,U+622b,U+622d,U+622f-6232,U+6235-6236,U+6238-623c,U+6242,U+6244-6246,U+624a,U+624f-6250,U+6255-6257,U+6259-625a,U+625c-6262,U+6264-6265,U+6268,U+6271-6272,U+6274-6275,U+6277-6278,U+627a-627b,U+627d,U+6281-6283,U+6285-6288,U+628b-6290,U+6294,U+6299,U+629c-629e,U+62a3,U+62a6-62a7,U+62a9-62aa,U+62ad-62b0,U+62b2-62b4,U+62b6-62b8,U+62ba,U+62be,U+62c0-62c1,U+62c3,U+62cb,U+62cf,U+62d1,U+62d5,U+62dd-62de,U+62e0-62e1,U+62e4,U+62ea-62eb,U+62f0,U+62f2,U+62f5,U+62f8-62fb,U+6300,U+6303-6306,U+630a-630d,U+630f-6310,U+6312-6315,U+6317-6319,U+631c,U+6326-6327,U+6329,U+632c-632e,U+6330-6331,U+6333-6338,U+633b-633c,U+633e-6341,U+6344,U+6347-6348,U+634a,U+6351-6354,U+6356-6359"}},{uri:Mpe,descriptors:{unicodeRange:"U+5dd0-5dda,U+5ddc,U+5ddf-5de0,U+5de3-5de4,U+5dea,U+5dec-5ded,U+5df0,U+5df5-5df6,U+5df8-5dfc,U+5dff-5e00,U+5e04,U+5e07,U+5e09-5e0b,U+5e0d-5e0e,U+5e12-5e13,U+5e17,U+5e1e-5e25,U+5e28-5e2c,U+5e2f-5e30,U+5e32-5e36,U+5e39-5e3a,U+5e3e-5e41,U+5e43,U+5e46-5e4b,U+5e4d-5e53,U+5e56-5e5a,U+5e5c-5e5d,U+5e5f-5e60,U+5e63-5e71,U+5e75,U+5e77,U+5e79,U+5e7e,U+5e81-5e83,U+5e85,U+5e88-5e89,U+5e8c-5e8e,U+5e92,U+5e98,U+5e9b,U+5e9d,U+5ea1-5ea4,U+5ea8-5eac,U+5eae-5eb2,U+5eb4,U+5eba-5ebd,U+5ebf-5ec8,U+5ecb-5ed0,U+5ed4-5ed5,U+5ed7-5eda,U+5edc-5ee7,U+5ee9,U+5eeb-5ef3,U+5ef5,U+5ef8-5ef9,U+5efb-5efd,U+5f05-5f07,U+5f09,U+5f0c-5f0e,U+5f10,U+5f12,U+5f14,U+5f16,U+5f19-5f1a,U+5f1c-5f1e,U+5f21-5f24,U+5f28,U+5f2b-5f2c,U+5f2e"}},{uri:Rpe,descriptors:{unicodeRange:"U+60cd-60d0,U+60d2-60d4,U+60d6-60d7,U+60d9,U+60db,U+60de,U+60e1-60e5,U+60ea,U+60f1-60f2,U+60f5,U+60f7-60f8,U+60fb-60ff,U+6102-6105,U+6107,U+610a-610c,U+6110-6114,U+6116-6119,U+611b-611e,U+6121-6122,U+6125,U+6128-612a,U+612c-613e,U+6140-6147,U+6149,U+614b,U+614d,U+614f-6150,U+6152-6154,U+6156-615c,U+615e-6161,U+6163-6166,U+6169-616f,U+6171-6174,U+6176,U+6178-618a,U+618c-618d,U+618f-6193,U+6195-619c,U+619e-61a6,U+61aa-61ab,U+61ad-61b6,U+61b8-61bd,U+61bf-61c1,U+61c3-61c4"}},{uri:kpe,descriptors:{unicodeRange:"U+5cf4-5cfa,U+5cfc-5d01,U+5d04-5d05,U+5d08-5d0d,U+5d0f-5d13,U+5d15,U+5d17-5d1a,U+5d1c-5d1d,U+5d1f-5d23,U+5d25,U+5d28,U+5d2a-5d2c,U+5d2f-5d33,U+5d35-5d3c,U+5d3f-5d46,U+5d48-5d49,U+5d4d-5d57,U+5d59-5d5a,U+5d5c,U+5d5e-5d68,U+5d6a,U+5d6d-5d6e,U+5d70-5d73,U+5d75-5d81,U+5d83-5d98,U+5d9a-5d9c,U+5d9e-5db6,U+5db8-5dc4,U+5dc6-5dcc,U+5dce-5dcf"}},{uri:Lpe,descriptors:{unicodeRange:"U+5b52,U+5b56,U+5b5e,U+5b60-5b61,U+5b67-5b68,U+5b6b,U+5b6d-5b6f,U+5b72,U+5b74,U+5b76-5b79,U+5b7b-5b7c,U+5b7e-5b7f,U+5b82,U+5b86,U+5b8a,U+5b8d-5b8e,U+5b90-5b92,U+5b94,U+5b96,U+5b9f,U+5ba7-5ba9,U+5bac-5baf,U+5bb1-5bb2,U+5bb7,U+5bba-5bbc,U+5bc0-5bc1,U+5bc3,U+5bc8-5bcb,U+5bcd-5bcf,U+5bd1,U+5bd4-5bdc,U+5be0,U+5be2-5be3,U+5be6-5be7,U+5be9-5bed,U+5bef,U+5bf1-5bf7,U+5bfd-5bfe,U+5c00,U+5c02-5c03,U+5c05,U+5c07-5c08,U+5c0b-5c0e,U+5c10,U+5c12-5c13,U+5c17,U+5c19,U+5c1b,U+5c1e-5c21,U+5c23,U+5c26,U+5c28-5c2b,U+5c2d-5c30,U+5c32-5c33,U+5c35-5c37,U+5c43-5c44,U+5c46-5c47,U+5c4c-5c4d,U+5c52-5c54,U+5c56-5c58,U+5c5a-5c5d,U+5c5f,U+5c62,U+5c64,U+5c67-5c6d,U+5c70,U+5c72-5c78,U+5c7b-5c7e,U+5c80,U+5c83-5c87,U+5c89-5c8b,U+5c8e-5c8f,U+5c92-5c93,U+5c95,U+5c9d-5ca1,U+5ca4-5ca8,U+5caa,U+5cae-5cb0,U+5cb2,U+5cb4,U+5cb6,U+5cb9-5cbc,U+5cbe,U+5cc0,U+5cc2-5cc3,U+5cc5-5cca,U+5ccc-5cd1,U+5cd3-5cd8,U+5cda-5ce0,U+5ce2-5ce3,U+5ce7,U+5ce9,U+5ceb-5cec,U+5cee-5cef,U+5cf1-5cf3"}},{uri:Dpe,descriptors:{unicodeRange:"U+593b,U+593d-5940,U+5943,U+5945-5946,U+594a,U+594c-594d,U+5950,U+5952-5953,U+5959,U+595b-595f,U+5961,U+5963-5964,U+5966-5972,U+5975,U+5977,U+597a-597c,U+597e-5980,U+5985,U+5989,U+598b-598c,U+598e-5991,U+5994-5995,U+5998,U+599a-599d,U+599f-59a2,U+59a6-59a7,U+59ac-59ad,U+59b0-59b1,U+59b3-59b8,U+59ba,U+59bc-59bd,U+59bf-59c5,U+59c7-59c9,U+59cc-59cf,U+59d5-59d6,U+59d9,U+59db,U+59de-59e2,U+59e4,U+59e6-59e7,U+59e9-59eb,U+59ed-59f8,U+59fa,U+59fc-59fe,U+5a00,U+5a02,U+5a0a-5a0b,U+5a0d-5a10,U+5a12,U+5a14-5a17,U+5a19-5a1b,U+5a1d-5a1e,U+5a21-5a22,U+5a24,U+5a26-5a28,U+5a2a-5a30,U+5a33,U+5a35,U+5a37-5a3b,U+5a3d-5a3f,U+5a41-5a45,U+5a47-5a48,U+5a4b-5a54,U+5a56-5a59,U+5a5b-5a61,U+5a63-5a66,U+5a68-5a69,U+5a6b-5a73,U+5a78-5a79,U+5a7b-5a7e,U+5a80-5a90"}},{uri:Npe,descriptors:{unicodeRange:"U+5a91,U+5a93-5a99,U+5a9c-5aa9,U+5aab-5ab1,U+5ab4,U+5ab6-5ab7,U+5ab9-5abd,U+5abf-5ac0,U+5ac3-5ac8,U+5aca-5acb,U+5acd-5ad1,U+5ad3,U+5ad5,U+5ad7,U+5ad9-5adb,U+5add-5adf,U+5ae2,U+5ae4-5ae5,U+5ae7-5ae8,U+5aea,U+5aec-5af0,U+5af2-5b08,U+5b0a-5b15,U+5b18-5b31,U+5b33,U+5b35-5b36,U+5b38-5b3f,U+5b41-5b4f"}},{uri:Ope,descriptors:{unicodeRange:"U+5843,U+5845-584b,U+584e-5850,U+5852-5853,U+5855-5857,U+5859-585d,U+585f-5864,U+5866-586a,U+586d-587d,U+587f,U+5882,U+5884,U+5886-5888,U+588a-5891,U+5894-5898,U+589b-589d,U+58a0-58a7,U+58aa-58bb,U+58bd-58c0,U+58c2-58c4,U+58c6-58d0,U+58d2-58d4,U+58d6-58e3,U+58e5-58ea,U+58ed,U+58ef,U+58f1-58f2,U+58f4-58f5,U+58f7-58f8,U+58fa-5901,U+5903,U+5905-5906,U+5908-590c,U+590e,U+5910-5913,U+5917-5918,U+591b,U+591d-591e,U+5920-5923,U+5926,U+5928,U+592c,U+5930,U+5932-5933,U+5935-5936"}},{uri:Ppe,descriptors:{unicodeRange:"U+56d0-56d3,U+56d5-56d6,U+56d8-56d9,U+56dc,U+56e3,U+56e5-56ea,U+56ec,U+56ee-56ef,U+56f2-56f3,U+56f6-56f8,U+56fb-56fc,U+5700-5702,U+5705,U+5707,U+570b-571b,U+571d-571e,U+5720-5722,U+5724-5727,U+572b,U+5731-5732,U+5734-5738,U+573c-573d,U+573f,U+5741,U+5743-5746,U+5748-5749,U+574b,U+5752-5756,U+5758-5759,U+5762-5763,U+5765,U+5767,U+576c,U+576e,U+5770-5772,U+5774-5775,U+5778-577a,U+577d-5781,U+5787-578a,U+578d-5791,U+5794-579a,U+579c-579f,U+57a5,U+57a8,U+57aa,U+57ac,U+57af-57b1,U+57b3,U+57b5-57b7,U+57b9-57c1,U+57c4-57ca,U+57cc-57cd,U+57d0-57d1,U+57d3,U+57d6-57d7,U+57db-57dc,U+57de,U+57e1-57e3,U+57e5-57ec,U+57ee,U+57f0-57f3,U+57f5-57f7,U+57fb-57fc,U+57fe-57ff,U+5801,U+5803-5805,U+5808-580a,U+580c,U+580e-5810,U+5812-5814,U+5816-5818,U+581a-581d,U+581f,U+5822-5823,U+5825-5829,U+582b-582f,U+5831-5834,U+5836-5842"}},{uri:Fpe,descriptors:{unicodeRange:"U+55f9-55fc,U+55ff,U+5602-5607,U+560a-560b,U+560d,U+5610-5617,U+5619-561a,U+561c-561d,U+5620-5622,U+5625-5626,U+5628-562b,U+562e-5630,U+5633,U+5635,U+5637-5638,U+563a,U+563c-563e,U+5640-564b,U+564f-5653,U+5655-5656,U+565a-565b,U+565d-5661,U+5663,U+5665-5667,U+566d-5670,U+5672-5675,U+5677-567a,U+567d-5684,U+5687-568d,U+5690-5692,U+5694-56a2,U+56a4-56ae,U+56b0-56b6,U+56b8-56bb,U+56bd-56c9,U+56cb-56cf"}},{uri:Bpe,descriptors:{unicodeRange:"U+5286-5287,U+5289-528f,U+5291-5292,U+5294-529a,U+529c,U+52a4-52a7,U+52ae-52b0,U+52b4-52bd,U+52c0-52c2,U+52c4-52c6,U+52c8,U+52ca,U+52cc-52cf,U+52d1,U+52d3-52d5,U+52d7,U+52d9-52de,U+52e0-52e3,U+52e5-52ef,U+52f1-52f8,U+52fb-52fd,U+5301-5304,U+5307,U+5309-530c,U+530e,U+5311-5314,U+5318,U+531b-531c,U+531e-531f,U+5322,U+5324-5325,U+5327-5329,U+532b-532d,U+532f-5338,U+533c-533d,U+5340,U+5342,U+5344,U+5346,U+534b-534d,U+5350,U+5354,U+5358-5359,U+535b,U+535d,U+5365,U+5368,U+536a,U+536c-536d,U+5372,U+5376,U+5379,U+537b-537e,U+5380-5381,U+5383,U+5387-5388,U+538a,U+538e-5394,U+5396-5397,U+5399,U+539b-539c,U+539e,U+53a0-53a1,U+53a4,U+53a7,U+53aa-53ad,U+53af-53b5,U+53b7-53ba,U+53bc-53be,U+53c0,U+53c3-53c7,U+53ce-53d0,U+53d2-53d3,U+53d5,U+53da,U+53dc-53de,U+53e1-53e2,U+53e7,U+53f4,U+53fa,U+53fe-5400,U+5402,U+5405,U+5407,U+540b,U+5414,U+5418-541a,U+541c,U+5422,U+5424-5425,U+542a,U+5430,U+5433,U+5436-5437,U+543a"}},{uri:zpe,descriptors:{unicodeRange:"U+5101-5105,U+5108-510a,U+510c-5111,U+5113-5120,U+5122-513e,U+5142,U+5147,U+514a,U+514c,U+514e-5150,U+5152-5153,U+5157-5159,U+515b,U+515d-5161,U+5163-5164,U+5166-5167,U+5169-516a,U+516f,U+5172,U+517a,U+517e-517f,U+5183-5184,U+5186-5187,U+518a-518b,U+518e-5191,U+5193-5194,U+5198,U+519a,U+519d-519f,U+51a1,U+51a3,U+51a6-51aa,U+51ad-51ae,U+51b4,U+51b8-51ba,U+51be-51bf,U+51c1-51c3,U+51c5,U+51c8,U+51ca,U+51cd-51ce,U+51d0,U+51d2-51da,U+51dc,U+51de-51df,U+51e2-51e3,U+51e5-51ea,U+51ec,U+51ee,U+51f1-51f2,U+51f4,U+51f7,U+51fe,U+5204-5205,U+5209,U+520b-520c,U+520f-5210,U+5213-5215,U+521c,U+521e-521f,U+5221-5223,U+5225-5227,U+522a,U+522c,U+522f,U+5231-5232,U+5234-5235,U+523c,U+523e,U+5244-5249,U+524b,U+524e-524f,U+5252-5253,U+5255,U+5257-525b,U+525d,U+525f-5260,U+5262-5264,U+5266,U+5268,U+526b-526e,U+5270-5271,U+5273-527c,U+527e,U+5280,U+5283-5285"}},{uri:Hpe,descriptors:{unicodeRange:"U+543d,U+543f,U+5441-5442,U+5444-5445,U+5447,U+5449,U+544c-544f,U+5451,U+545a,U+545d-5461,U+5463,U+5465,U+5467,U+5469-5470,U+5474,U+5479-547a,U+547e-547f,U+5481,U+5483,U+5485,U+5487-548a,U+548d,U+5491,U+5493,U+5497-5498,U+549c,U+549e-54a2,U+54a5,U+54ae,U+54b0,U+54b2,U+54b5-54b7,U+54b9-54ba,U+54bc,U+54be,U+54c3,U+54c5,U+54ca-54cb,U+54d6,U+54d8,U+54db,U+54e0-54e4,U+54eb-54ec,U+54ef-54f1,U+54f4-54f9,U+54fb,U+54fe,U+5500,U+5502-5505,U+5508,U+550a-550e,U+5512-5513,U+5515-551a,U+551c-551f,U+5521,U+5525-5526,U+5528-5529,U+552b,U+552d,U+5532,U+5534-5536,U+5538-553b,U+553d,U+5540,U+5542,U+5545,U+5547-5548,U+554b-554f,U+5551-5554,U+5557-555b,U+555d-5560,U+5562-5563,U+5568-5569,U+556b,U+556f-5574,U+5579-557a,U+557d,U+557f,U+5585-5586,U+558c-558e,U+5590,U+5592-5593,U+5595-5597,U+559a-559b,U+559e,U+55a0-55a6,U+55a8-55b0,U+55b2,U+55b4,U+55b6,U+55b8,U+55ba,U+55bc,U+55bf-55c3,U+55c6-55c8,U+55ca-55cb,U+55ce-55d0,U+55d5,U+55d7-55db,U+55de,U+55e0,U+55e2,U+55e7,U+55e9,U+55ed-55ee,U+55f0-55f1,U+55f4,U+55f6,U+55f8"}},{uri:Vpe,descriptors:{unicodeRange:"U+4fe0,U+4fe2,U+4fe4-4fe5,U+4fe7,U+4feb-4fec,U+4ff0,U+4ff2,U+4ff4-4ff7,U+4ff9,U+4ffb-4ffd,U+4fff-500b,U+500e,U+5010-5011,U+5013,U+5015-5017,U+501b,U+501d-501e,U+5020,U+5022-5024,U+5027,U+502b,U+502f-5039,U+503b,U+503d,U+503f-5042,U+5044-5046,U+5049-504b,U+504d,U+5050-5054,U+5056-5059,U+505b,U+505d-5064,U+5066-506b,U+506d-5075,U+5078-507a,U+507c-507d,U+5081-5084,U+5086-5087,U+5089-508c,U+508e-50a2,U+50a4,U+50a6,U+50aa-50ab,U+50ad-50b1,U+50b3-50b9,U+50bc-50ce,U+50d0-50d5,U+50d7-50d9,U+50db-50e5,U+50e8-50eb,U+50ef-50f2,U+50f4,U+50f6-50fa,U+50fc-5100"}},{uri:L0e,descriptors:{unicodeRange:"U+49d5-4a77"}},{uri:$pe,descriptors:{unicodeRange:"U+4dac-4dad,U+4daf-4db5,U+4e02,U+4e04-4e06,U+4e0f,U+4e12,U+4e17,U+4e1f-4e21,U+4e23,U+4e26,U+4e29,U+4e2e-4e2f,U+4e31,U+4e33,U+4e35,U+4e37,U+4e3c,U+4e40-4e42,U+4e44,U+4e46,U+4e4a,U+4e51,U+4e55,U+4e57,U+4e5a-4e5b,U+4e62-4e65,U+4e67-4e68,U+4e6a-4e6f,U+4e72,U+4e74-4e7d,U+4e7f-4e85,U+4e87,U+4e8a,U+4e90,U+4e96-4e97,U+4e99,U+4e9c-4e9e,U+4ea3,U+4eaa,U+4eaf-4eb1,U+4eb4,U+4eb6-4eb9,U+4ebc-4ebe,U+4ec8,U+4ecc,U+4ecf-4ed0,U+4ed2,U+4eda-4edc,U+4ee0,U+4ee2,U+4ee6-4ee7,U+4ee9,U+4eed-4eef,U+4ef1,U+4ef4,U+4ef8-4efa,U+4efc,U+4efe,U+4f00,U+4f02-4f08,U+4f0b-4f0c,U+4f12-4f16,U+4f1c-4f1d,U+4f21,U+4f23,U+4f28-4f29,U+4f2c-4f2e,U+4f31,U+4f33,U+4f35,U+4f37,U+4f39,U+4f3b,U+4f3e-4f42,U+4f44-4f45,U+4f47-4f4c,U+4f52,U+4f54,U+4f56,U+4f61-4f62,U+4f66,U+4f68,U+4f6a-4f6b,U+4f6d-4f6e,U+4f71-4f72,U+4f75,U+4f77-4f7a,U+4f7d,U+4f80-4f82,U+4f85-4f87,U+4f8a,U+4f8c,U+4f8e,U+4f90,U+4f92-4f93,U+4f95-4f96,U+4f98-4f9a,U+4f9c,U+4f9e-4f9f,U+4fa1-4fa2,U+4fa4,U+4fab,U+4fad,U+4fb0-4fb4,U+4fb6-4fbe,U+4fc0-4fc2,U+4fc6-4fc9,U+4fcb-4fcd,U+4fd2-4fd6,U+4fd9,U+4fdb"}},{uri:Gpe,descriptors:{unicodeRange:"U+4933-49d4"}},{uri:Xpe,descriptors:{unicodeRange:"U+487a-4932"}},{uri:jpe,descriptors:{unicodeRange:"U+47d2-4879,U+2ce7c,U+2ce88,U+2ce93"}},{uri:Ype,descriptors:{unicodeRange:"U+4756-47d1,U+2ca02,U+2ca0e,U+2ca7d,U+2caa9,U+2cb29,U+2cb2e,U+2cb31,U+2cb38-2cb39,U+2cb3f,U+2cb41,U+2cb4e,U+2cb5a,U+2cb64,U+2cb69,U+2cb6c,U+2cb6f,U+2cb76,U+2cb78,U+2cb7c,U+2cbb1,U+2cbbf-2cbc0,U+2cbce,U+2cc5f,U+2ccf5-2ccf6,U+2ccfd,U+2ccff,U+2cd02-2cd03,U+2cd0a,U+2cd8b,U+2cd8d,U+2cd8f-2cd90,U+2cd9f-2cda0,U+2cda8,U+2cdad-2cdae,U+2cdd5,U+2ce18,U+2ce1a,U+2ce23,U+2ce26,U+2ce2a"}},{uri:Wpe,descriptors:{unicodeRange:"U+46c3-4755,U+2c488,U+2c494,U+2c497,U+2c542,U+2c613,U+2c618,U+2c621,U+2c629,U+2c62b-2c62d,U+2c62f,U+2c642,U+2c64a-2c64b,U+2c72c,U+2c72f,U+2c79f,U+2c7c1,U+2c7fd,U+2c8d9,U+2c8de,U+2c8e1,U+2c8f3,U+2c907,U+2c90a,U+2c91d"}},{uri:Kpe,descriptors:{unicodeRange:"U+4629-46c2,U+2bdf7,U+2be29,U+2c029-2c02a,U+2c0a9,U+2c0ca,U+2c1d5,U+2c1d9,U+2c1f9,U+2c27c,U+2c288,U+2c2a4,U+2c317,U+2c35b,U+2c361,U+2c364"}},{uri:Zpe,descriptors:{unicodeRange:"U+458e-4628,U+2b7a9,U+2b7c5,U+2b7e6,U+2b7f9,U+2b806,U+2b80a,U+2b81c,U+2b8b8,U+2bac7,U+2bb5f,U+2bb62,U+2bb7c,U+2bb83,U+2bc1b,U+2bd77,U+2bd87"}},{uri:qpe,descriptors:{unicodeRange:"U+4449-4511,U+2afa2,U+2b127-2b128,U+2b137-2b138,U+2b1ed"}},{uri:Qpe,descriptors:{unicodeRange:"U+439b-4448,U+2a437,U+2a5f1,U+2a602,U+2a61a,U+2a6b2,U+2a7dd,U+2a8fb,U+2a917,U+2aa30,U+2aa36,U+2aa58"}},{uri:Jpe,descriptors:{unicodeRange:"U+4275-430d,U+298c6,U+29a72,U+29d98,U+29ddb,U+29e15,U+29e3d,U+29e49"}},{uri:eUe,descriptors:{unicodeRange:"U+4132-41de,U+28bef,U+28c47,U+28c4f,U+28c51,U+28c54,U+28d10,U+28d71,U+28dfb,U+28e1f,U+28e36,U+28e89,U+28e99,U+28eeb,U+28f32,U+28ff8,U+292a0"}},{uri:tUe,descriptors:{unicodeRange:"U+41df-4274,U+292b1,U+29490,U+295cf,U+2967f,U+296f0,U+29719,U+29750"}},{uri:nUe,descriptors:{unicodeRange:"U+408e-4131,U+285c8-285c9,U+28678,U+28695,U+286d7,U+286fa,U+287e0,U+28946,U+28949,U+2896b,U+28987-28988,U+289ba-289bb,U+28a1e,U+28a29,U+28a43,U+28a71,U+28a99,U+28acd,U+28add,U+28ae4,U+28b49,U+28bc1"}},{uri:iUe,descriptors:{unicodeRange:"U+3e83-3f2f,U+27139,U+273da-273db,U+273fe,U+27410,U+27449,U+27614-27615,U+27631,U+27684,U+27693,U+2770e,U+27723,U+27752"}},{uri:rUe,descriptors:{unicodeRange:"U+3f30-3fdb,U+27985,U+27a84,U+27bb3,U+27bbe,U+27bc7,U+27cb8,U+27da0,U+27e10"}},{uri:sUe,descriptors:{unicodeRange:"U+3fdc-408d,U+27fb7,U+27ff9,U+2808a,U+280bb,U+2815d,U+28277,U+28282,U+282e2,U+282f3,U+283cd,U+28408,U+2840c,U+28455,U+28468,U+2856b"}},{uri:oUe,descriptors:{unicodeRange:"U+3dd2-3e82,U+26a58,U+26a8c,U+26ab7,U+26aff,U+26b5c,U+26c21,U+26c29,U+26c73,U+26cdd,U+26e40,U+26e65,U+26f94,U+26ff6-26ff8,U+270f4,U+2710d"}},{uri:aUe,descriptors:{unicodeRange:"U+3d34-3dd1,U+2648d,U+26676,U+2667e,U+266b0,U+2671d,U+2677c,U+267cc,U+268dd,U+268ea,U+26951,U+2696f,U+269dd,U+269fa,U+26a1e"}},{uri:lUe,descriptors:{unicodeRange:"U+3c76-3d33,U+25d0a,U+25da1,U+25e2e,U+25e56,U+25e62,U+25e65,U+25ec2,U+25ed7-25ed8,U+25ee8,U+25f23,U+25f5c,U+25fd4,U+25fe0,U+25ffb,U+2600c,U+26017,U+26060,U+260ed,U+26221,U+26270,U+26286,U+2634c,U+26402"}},{uri:cUe,descriptors:{unicodeRange:"U+3bda-3c75,U+25771,U+257a9,U+257b4,U+259c4,U+259d4,U+25ae3-25ae4,U+25af1,U+25bb2,U+25c14,U+25c4b,U+25c64"}},{uri:uUe,descriptors:{unicodeRange:"U+3b25-3bd9,U+2504a,U+25055,U+25122,U+2512b,U+251a9,U+251cd,U+251e5,U+2521e,U+2524c,U+2542e,U+2548e,U+254d9,U+2550e,U+25532,U+25562,U+255a7-255a8"}},{uri:dUe,descriptors:{unicodeRange:"U+3a6b-3b24,U+24896,U+249db,U+24a4d,U+24a7d,U+24ac9,U+24b56,U+24b6f,U+24c16,U+24d14,U+24dea,U+24e0e,U+24e37,U+24e6a,U+24e8b,U+24eaa"}},{uri:fUe,descriptors:{unicodeRange:"U+39a9-3a6a,U+24096,U+24103,U+241ac,U+241c6,U+241fe,U+243bc,U+243f8,U+244d3,U+24629,U+246a5,U+247f1"}},{uri:hUe,descriptors:{unicodeRange:"U+38e3-39a8,U+23a98,U+23c7f,U+23c97-23c98,U+23cfe,U+23d00,U+23d0e,U+23d40,U+23dd3,U+23df9-23dfa,U+23e23,U+23f7e"}},{uri:gUe,descriptors:{unicodeRange:"U+3760-382a,U+22ab8,U+22b43,U+22b46,U+22b4f-22b50,U+22ba6,U+22bca,U+22c1d,U+22c24,U+22c55,U+22d4c,U+22de1"}},{uri:mUe,descriptors:{unicodeRange:"U+382b-38e2,U+231b6,U+231c3-231c4,U+231f5,U+23350,U+23372,U+233d0,U+233d2-233d3,U+233d5,U+233da,U+233df,U+233e4,U+2344a-2344b,U+23451,U+23465,U+234e4,U+2355a,U+23594,U+235c4,U+235cb,U+23638-2363a,U+23647,U+2370c,U+2371c,U+2373f,U+23763-23764,U+237e7,U+237ff,U+23824,U+2383d"}},{uri:pUe,descriptors:{unicodeRange:"U+3698-375f,U+22218,U+2231e,U+223ad,U+224dc,U+226f3,U+2285b,U+228ab,U+2298f"}},{uri:UUe,descriptors:{unicodeRange:"U+35e6-3697,U+21c56,U+21cde,U+21d2d,U+21d45,U+21d62,U+21d78,U+21d92,U+21d9c,U+21da1,U+21db7,U+21de0,U+21e33-21e34,U+21f1e,U+21f76,U+21ffa,U+2217b"}},{uri:bUe,descriptors:{unicodeRange:"U+3444-350e,U+20ad3,U+20b1d,U+20b9f,U+20c41,U+20cbf,U+20cd0,U+20d45,U+20de1,U+20e64,U+20e6d,U+20e95,U+20e9d,U+20ea2,U+20f5f,U+210c1,U+21201,U+2123d,U+21255,U+21274,U+2127b"}},{uri:yUe,descriptors:{unicodeRange:"U+350f-35e5,U+212d7,U+212e4,U+212fd,U+2131b,U+21336,U+21344,U+2139a,U+213c4,U+21413,U+2146d-2146e,U+215d7,U+21647,U+216b4,U+21706,U+21742,U+218bd,U+219c3"}},{uri:EUe,descriptors:{unicodeRange:"U+336d-3443,U+2032b,U+20371,U+20381,U+203f9,U+2044a,U+20509,U+20547,U+205d6,U+20628,U+20676,U+2074f,U+20779,U+20807,U+2083a,U+20895,U+208b9,U+2097c,U+2099d"}},{uri:vUe,descriptors:{unicodeRange:"U+328b-336c,U+2000b,U+20089,U+200a2,U+200a4,U+20164,U+201a2,U+20213"}},{uri:wUe,descriptors:{unicodeRange:"U+3192-31ba,U+31c0-31e3,U+31f0-321e,U+3220-328a,U+1f250-1f251"}},{uri:_Ue,descriptors:{unicodeRange:"U+2f74-2fd5,U+3000,U+3003-3007,U+3012-3013,U+3018-301c,U+3020-3029,U+302f-303f,U+3041-3096,U+3099-30a1"}},{uri:TUe,descriptors:{unicodeRange:"U+30a2-30ff,U+3105-312f,U+3131-318e,U+3190-3191"}},{uri:IUe,descriptors:{unicodeRange:"U+4e36,U+4ea0,U+4f74,U+4f91,U+4f94,U+4fc5,U+507e,U+50ed,U+5182,U+51f5,U+525e,U+5282,U+52f9,U+5326,U+537a,U+53a3,U+5423,U+5459,U+54b4,U+54d9,U+55c9,U+57f4,U+580b,U+5902,U+5925,U+5a08,U+5ab5,U+5b84,U+5be4,U+5c22,U+5cb5,U+5cbd,U+5d3e,U+5e31,U+5e5e,U+5e80,U+5ee8,U+5f82,U+5fc9,U+5fed,U+600a,U+605d,U+609b,U+609d,U+60dd,U+6243,U+6322,U+63ce,U+640c,U+643f,U+6445,U+64d7,U+6534,U+6549,U+656b,U+6603,U+674c,U+680a,U+6864,U+69d4,U+6a65,U+6c2a,U+6c46,U+6c5c,U+6d0e,U+6d48,U+6e2b,U+6eb2,U+6eb7,U+6f89,U+706c,U+70b1,U+7113,U+71d4,U+727f,U+72f3,U+7303,U+7321,U+736c,U+736f,U+74a9,U+74de,U+750d,U+7513,U+7592,U+75c4,U+7605,U+760a,U+761b,U+7625,U+762d,U+7643,U+7707,U+7747,U+77b5,U+7839,U+784e,U+78a5,U+7924,U+793b,U+798a,U+7a03,U+7a06,U+7a78,U+7a80,U+7aad,U+7ba8,U+7be5,U+7cc8,U+7ec1,U+7f0b,U+7f0f,U+7f12,U+7f68,U+7f9d,U+8025,U+809c,U+80ad,U+80b7,U+80e8,U+811e,U+8204,U+8223,U+822d,U+823b,U+824b,U+825a,U+827d,U+827f,U+828f,U+82c8,U+8307,U+831b,U+8347,U+837d,U+839b,U+83a9,U+83f9,U+84b9,U+8579,U+864d,U+867f,U+86b0,U+86d1,U+86d8,U+86f2,U+8764,U+8770,U+8788,U+8797,U+87ac-87ad,U+87b5,U+881b,U+8844,U+88bc,U+88fc,U+8930,U+89cf,U+89d6,U+8ba0,U+8bd4,U+8c02,U+8c2b,U+8c85,U+8e23,U+8f81-8f82,U+8fd5,U+90b6,U+90db,U+914e,U+9164,U+91ad,U+943e,U+94b7-94b8,U+94eb,U+950d,U+9514,U+9516,U+9518,U+9529,U+9538,U+953f,U+954e,U+955f,U+95fc,U+9667,U+96b3,U+9792,U+97b2,U+98a1,U+9969,U+9987,U+9998,U+9a80,U+9a92,U+9a96,U+9adf,U+9cb4,U+9cbd,U+9cd0,U+9cd4,U+9e31,U+9e3a,U+9e71,U+9ee5,U+9eea,U+9ef9,U+9fa0"}},{uri:SUe,descriptors:{unicodeRange:"U+4e0c,U+4e28,U+4e3f,U+4ec2,U+502e,U+50ba,U+5155,U+5181,U+522d,U+5281,U+5290,U+5369,U+53b6,U+54d5,U+54dc,U+54ff,U+552a,U+553c,U+5588,U+55b5,U+5686,U+570a,U+5776,U+5786,U+57a4,U+5820,U+5865,U+58bc,U+5b32,U+5b65,U+5c1c,U+5c66,U+5c6e,U+5c8d,U+5ddb,U+5f2a,U+5f50,U+5f61,U+6067,U+614a,U+615d,U+619d,U+61d4,U+620b,U+6224-6225,U+6343,U+63ad,U+63f2,U+640b,U+6420,U+6434,U+6496,U+64d0,U+6509,U+652e,U+67a8,U+6833,U+6844,U+684a,U+6920,U+6957,U+6971,U+6a8e,U+6a91,U+6aa0,U+6b43,U+6bea,U+6bf5,U+6c15,U+6cd0,U+6ee0,U+6f24,U+6f2d,U+70c0,U+721d,U+728b,U+72c3,U+72e8,U+730a,U+7338-7339,U+734d,U+746d,U+752f,U+754e,U+770d,U+7735,U+778d,U+77a2,U+77e7,U+7857,U+786d,U+78c9,U+78f2,U+791e,U+7953,U+7b58,U+7b9d,U+7bda,U+7cd7,U+7f32-7f33,U+8022,U+8028-8029,U+8035,U+804d,U+8080,U+80c2,U+80e9,U+80ec,U+80f2,U+810e,U+8221,U+8274,U+82b0,U+82e0,U+83b0,U+8487-8488,U+848e,U+84cd,U+84d0,U+8539,U+857a,U+85a8,U+85b7,U+867c,U+871e,U+8723,U+877e,U+878b,U+8793,U+8803,U+88d2,U+8966,U+89cc,U+89eb,U+8b26,U+8c8a,U+8c98,U+8d33,U+8d47,U+8d55,U+8dbc,U+8e40,U+8e94,U+8f77,U+8f79,U+9058,U+91a2,U+91b5,U+928e,U+9494,U+94b6,U+94de,U+94f4,U+94f9,U+950a,U+950e,U+951e,U+952b,U+953c,U+953e,U+9544,U+9561,U+9564,U+9569,U+95f6,U+9603,U+960d,U+963d,U+9674,U+9794,U+97ab,U+98a5,U+9a9f,U+9ab1,U+9ad1,U+9b0f,U+9b2f,U+9c92,U+9c95,U+9cba,U+9cbc,U+9cc6,U+9ccb,U+9cd8,U+9e32,U+9e38,U+9e5b,U+9e7e,U+9eb4,U+9efb-9efc,U+9f3d"}},{uri:xUe,descriptors:{unicodeRange:"U+2e3b,U+2e80-2e99,U+2e9b-2ef3,U+2f00-2f73,U+ffffd"}},{uri:CUe,descriptors:{unicodeRange:"U+4e69,U+4f1b,U+4f67,U+4f7e,U+4fdc,U+50e6,U+5196,U+5202,U+5233,U+523f,U+52a2,U+536e,U+5476,U+54ad,U+54cf,U+5537,U+561e,U+56dd,U+56df,U+5709,U+572c,U+57cf,U+57f8,U+580d,U+5881,U+589a,U+5941,U+59b2,U+5c25,U+5d24,U+5d74,U+5e42,U+5e8b,U+5eb3,U+5ed2,U+5fad,U+6003,U+603c,U+6083,U+6100,U+6126,U+6206,U+62ca,U+638e,U+63b4,U+6426,U+646d,U+6535,U+65c4,U+66db,U+6715,U+6769,U+6798,U+67c3,U+6861,U+698d,U+69ca,U+69ed,U+69f2,U+69ff,U+6a18,U+6b39,U+6bb3,U+6c0d,U+6cb2,U+6cd6,U+6cf7,U+6cfa,U+6d33,U+6e16,U+6e53-6e54,U+6ebb,U+6fb6,U+709d,U+72ad,U+72f7,U+72fb,U+7313,U+739f,U+74ba,U+754b,U+755b,U+758b,U+75ac,U+75d6,U+7617,U+7635,U+7640,U+76a4,U+76b2,U+775a,U+77bd,U+781f,U+79b3,U+7b2b,U+7b31,U+7b3e,U+7b6e,U+7b9c,U+7c0b,U+7c9e,U+7cc1,U+7ce8,U+7ea5,U+7f21,U+7f27,U+7f74,U+7fb0,U+8031,U+8071,U+80ea,U+8114,U+8160,U+81a6,U+81c1,U+829f,U+82a4,U+82fb,U+831a,U+8333,U+836c,U+83b6,U+83f8,U+8411,U+841c,U+8489,U+848c,U+85a4,U+8627,U+8629,U+866e,U+86b5,U+872e,U+8731,U+877b,U+877d,U+87ea,U+8813,U+8816,U+8864,U+88ce,U+88e5,U+897b,U+89cb,U+89f3,U+8bfc,U+8c35,U+8d46,U+8d4d,U+8dba,U+8e3a,U+8f75,U+8f7e,U+8fd3,U+9161,U+9179,U+917e,U+91a3,U+94ac,U+94d7,U+94e5,U+952a,U+952c,U+9545,U+9565,U+9568,U+956a,U+961d,U+96e0,U+972a,U+9730,U+989f,U+98e7,U+990d,U+9967,U+9993,U+9aa3,U+9ac0,U+9ae1,U+9aeb,U+9af9,U+9c86,U+9c8b,U+9ca0-9ca1,U+9ca3,U+9ce2,U+9e48,U+9e6a,U+9e87,U+9ee2,U+9ee9,U+9f17,U+9f19,U+9f2c,U+9f80"}},{uri:AUe,descriptors:{unicodeRange:"U+4ef3,U+50d6,U+50ec,U+51ab,U+51b1,U+52d6,U+54a9,U+54da,U+55be,U+55cd,U+564d,U+572f,U+574c,U+576b,U+57d8,U+57fd,U+5844,U+59d2,U+5ae0,U+5b16,U+5b37,U+5b5b,U+5b80,U+5d1e,U+5d6b,U+5efe,U+5f11,U+5f56,U+5f58,U+5f73,U+5f8c,U+5fc4,U+5fe4,U+602b,U+6106,U+610d,U+63de,U+63f8,U+641b,U+64e4,U+6634,U+676a,U+67b5,U+681d,U+6883,U+69b1,U+69e0,U+6b37,U+6b9b,U+6d7c,U+6ed7,U+6f36,U+6f72,U+6f8c,U+7035,U+7039,U+7173,U+7178,U+7228,U+728f,U+72b4,U+72ef,U+72f4,U+7331,U+7481,U+74e0,U+7540,U+75c3,U+75e6,U+763c,U+764d,U+76cd,U+7704,U+7743,U+7780,U+7847,U+786a,U+78b9,U+7962,U+7a02,U+7aac,U+7ab3,U+7b0a,U+7b4c,U+7b7b,U+7bfc,U+7c0f,U+7c16,U+7c40,U+7ca2,U+7cc7,U+7cf8,U+7d77,U+7e3b,U+7ea1,U+7ea9,U+7ef2,U+7f02,U+7f07,U+7f0c,U+7f23,U+7f2f,U+7fbc,U+8016,U+8020,U+812c,U+8136,U+8182,U+822f,U+8233,U+825f,U+8268,U+8284,U+8288,U+8291,U+8308,U+8311,U+835b,U+836d,U+83dd,U+8406,U+840f,U+845c,U+84b4,U+84e3,U+850c,U+855e,U+863c,U+86ba,U+86c4,U+86de,U+86f1,U+873e,U+87bd,U+87db,U+880a,U+883c,U+887f,U+88f0,U+890a,U+892b,U+895e,U+89ef,U+8a48,U+8bdc,U+8c18,U+8c33,U+8c94,U+8db1,U+8dcf,U+8dd6,U+8de3,U+8e6f,U+8e90,U+8f7a,U+8fb6,U+902d,U+90be,U+91af,U+936a,U+948b,U+94d8,U+9513,U+953a,U+956c,U+963c,U+9654,U+966c,U+9688,U+97b4,U+996b,U+9a75,U+9a7a,U+9aba,U+9aed,U+9b08,U+9b43,U+9c8e,U+9c94,U+9c9a,U+9e2b,U+9e36,U+9e4b,U+9e4e,U+9e55,U+9e63,U+9e68-9e69,U+9ebd,U+9ec9,U+9f0d,U+9f37,U+9f51"}},{uri:MUe,descriptors:{unicodeRange:"U+50a7,U+5240,U+5261,U+52ac,U+531a,U+5363,U+5432,U+5452,U+5456,U+5472,U+5478,U+553f,U+5575,U+5581,U+55cc,U+55fe,U+5601,U+572e,U+57d2,U+57ef,U+581e,U+5924,U+5981,U+5997,U+59a3,U+5aaa,U+5ab8,U+5b34,U+5d5d,U+5def,U+5e11,U+5e91,U+5ed1,U+5ef4,U+5f40,U+600d,U+6019,U+601b,U+605a,U+6092,U+60ab,U+6217,U+623d,U+6369,U+65d2,U+6661,U+670a,U+6753,U+67a7,U+6855,U+68f9,U+6939,U+696e,U+6980,U+6a7c,U+6aab,U+6b82,U+6bf3,U+6bf9,U+6c05,U+6c19-6c1a,U+6ca9,U+6cf6,U+6d1a,U+6dab,U+6f74,U+7085,U+7198,U+71b5,U+7256,U+725d,U+727e,U+72fa,U+7322,U+738e,U+73e5,U+750f,U+755a,U+7594,U+75b3,U+760c,U+7615,U+7630,U+763f,U+77ec,U+7817,U+78a1,U+78d9,U+7905,U+7b2a,U+7b2e,U+7b62,U+7b85,U+7bcc,U+7bea,U+7c26,U+7c74,U+7c9c-7c9d,U+7e47,U+7e9b,U+7e9f,U+7ee0,U+7ee8,U+7ef1,U+7f01,U+7f11,U+7f17,U+7f36,U+7f7e,U+7fee,U+802a,U+80cd,U+8112,U+8169,U+8234,U+8279,U+8298,U+82ca,U+82d8,U+82e1,U+83c0,U+83d4,U+83df,U+8401,U+8451,U+845a,U+8476,U+8478,U+84ba,U+84bd,U+84e0,U+851f,U+8548,U+8556,U+8585,U+868d,U+86e9,U+86f4,U+86f8,U+8765,U+8785,U+87ab,U+87ee,U+8832,U+8872,U+88b7,U+88e2-88e3,U+89da,U+8bce,U+8bd3,U+8bd6,U+8bf9,U+8c16,U+8c73,U+8d5c,U+8dde,U+8f6d,U+8f94,U+8fe8,U+9011,U+915e,U+9185,U+918c,U+94ab,U+94d1,U+94f3,U+9515,U+951d,U+9558,U+9567,U+96ce,U+96e9,U+9785,U+9878,U+987c,U+9883,U+98d1,U+9954,U+9963,U+9a93,U+9ac1,U+9acc,U+9b1f,U+9b49,U+9b4d,U+9b51,U+9ca7,U+9cae,U+9cce,U+9cd3,U+9e37,U+9e39,U+9e41,U+9e46,U+9f22,U+9f2f,U+9f39,U+9f85"}},{uri:RUe,descriptors:{unicodeRange:"U+4e5c,U+4edf,U+4f25,U+4f32,U+4f5e,U+4f76,U+4faa,U+4fe6,U+5028,U+5048,U+5250,U+535f,U+538d,U+53c1,U+5412,U+5443,U+54d4,U+54dd,U+5541,U+5550,U+5577,U+55dd,U+55f3,U+560f,U+562c,U+5657-5658,U+5664,U+56af,U+575c,U+577c,U+57b2,U+57da,U+5800,U+5a62,U+5aeb,U+5c3b,U+5ca3,U+5d26,U+5d9d,U+5f01,U+5fb5,U+5fdd,U+5ff8,U+6029,U+6041,U+6079,U+60b1,U+6222,U+629f,U+6332,U+63bc,U+63e0,U+6485,U+65ab,U+65c3,U+65c6,U+668c,U+669d,U+66be,U+67fd,U+6800,U+68fc,U+690b,U+6924,U+6978,U+69a7,U+6a3e,U+6a50,U+6a5b,U+6a97,U+6b24,U+6b8d,U+6baa,U+6c10,U+6c54,U+6ceb,U+6d04,U+6d4d,U+6eb1,U+6ebd,U+7110,U+71b3,U+71f9,U+7230,U+728d,U+7292,U+72b8,U+72d2,U+7360,U+73a2,U+7511,U+75a0,U+75c8,U+779f,U+7826,U+7877,U+7a39,U+7aa8,U+7ae6,U+7b04,U+7b0f,U+7baa,U+7bac,U+7c1f,U+7ccd,U+7ecb,U+7ed4,U+7ed7,U+7efb,U+7f0d,U+7f5f,U+7faf,U+7fd5,U+7fe5,U+8027,U+80bc,U+80dd,U+80fc,U+8132,U+815a,U+8167,U+816d,U+81ca,U+8228,U+82a1,U+82a9,U+82ab,U+82cc,U+8351,U+8368,U+83b8,U+83d8,U+83ea,U+83f0,U+8497,U+84c1,U+858f,U+85ff,U+867b,U+86a8-86a9,U+870a,U+8722,U+876e,U+877c,U+87e5,U+8888,U+88df,U+8919,U+8bcc,U+8bdf,U+8be8,U+8bee,U+8c20,U+8c2f,U+8d36,U+8df8,U+8e05,U+8e2f,U+8f9a,U+9021,U+908b,U+90b4,U+90ba,U+90d0,U+90eb,U+90fe,U+91aa,U+933e,U+9486-9487,U+948d,U+9490,U+94ad,U+94bd,U+94d6,U+94d9,U+9507,U+9546,U+955e,U+956b,U+95e9,U+9604,U+960b,U+9612,U+9615,U+9617,U+96b9,U+989a-989b,U+989e,U+9a78,U+9a7d,U+9aa0,U+9aa2,U+9ac2,U+9b23,U+9b3b,U+9c82,U+9cca,U+9cd9,U+9e28,U+9e5a,U+9e5e,U+9e6c,U+9efe,U+9f0b"}},{uri:kUe,descriptors:{unicodeRange:"U+4e47,U+4e8d,U+4f65,U+4f89,U+50ee,U+520e,U+5416,U+5454,U+54bb,U+54c2,U+54d3,U+54de,U+5591,U+55e5,U+560c,U+566b,U+5769,U+578c,U+5793,U+57e4,U+5889,U+593c,U+59ab,U+5ad4,U+5ad8,U+5af1,U+5b53,U+5ba5,U+5c59,U+5c63,U+5d5b,U+5e0f,U+5e14,U+5edb,U+5fbc,U+6004,U+60ad,U+610e,U+61b7,U+624c,U+634c,U+647a,U+64ba,U+65f0,U+6600,U+66f7,U+67e2,U+67f0,U+680c,U+686b,U+6874,U+691f,U+6989,U+6a17,U+6b81,U+6b84,U+6c06-6c07,U+6c3d,U+6d07,U+6d27,U+6d2b,U+6d91,U+6e6b,U+6e8f,U+6fde,U+70bb,U+723b,U+726e,U+72b0,U+72ce,U+72f2,U+7301,U+731e,U+737e,U+7477,U+748e,U+74ff,U+7633,U+7654,U+771a,U+7726,U+7765,U+7768,U+781c,U+7829,U+78d4,U+7913,U+7957,U+79d5,U+79eb,U+7a70,U+7a86,U+7b25,U+7b38,U+7b47,U+7b72,U+7ba6-7ba7,U+7dae,U+7ee1,U+7efe,U+7f26,U+7f31,U+7f35,U+801c,U+8043,U+809f,U+80ab,U+80d7,U+8118,U+8188,U+81cc,U+823e,U+8244,U+824f,U+82b4,U+82c1,U+82e4,U+82f4,U+8306,U+833a,U+835c,U+839c,U+83b3,U+83bc,U+846d,U+867a,U+868b,U+8734,U+87ca,U+886e,U+887e,U+88a2,U+88c9,U+8921,U+8bb5,U+8bf3,U+8c04,U+8c17,U+8c1d,U+8c25,U+8c36,U+8c55,U+8c78,U+8d3d,U+8d40,U+8d59,U+8d67,U+8d91,U+8dbf,U+8deb-8dec,U+8dfd,U+8e14,U+8e41,U+8f8e,U+900b,U+9044,U+9062,U+90cf,U+9123,U+9146,U+9162,U+9172,U+918d,U+9190,U+92c8,U+93ca,U+948c,U+94aa,U+94b2,U+94c8,U+94ca,U+94d5,U+94df,U+94e9-94ea,U+94f7,U+94fc-94fd,U+951b,U+954f,U+9554,U+9559,U+9566,U+9571-9572,U+95f1,U+9608,U+960f,U+97af,U+988f,U+98d5,U+992e,U+9955,U+9ab0,U+9b32,U+9c90,U+9c9e,U+9ca5,U+9ca9,U+9cad,U+9cb1,U+9cc3,U+9e47,U+9ee7,U+9f87"}},{uri:LUe,descriptors:{unicodeRange:"U+4e93,U+4ec4,U+4ef5,U+4f27,U+4f7b,U+4fe3,U+5080,U+5121,U+51eb,U+5208,U+52f0,U+53f5,U+5453,U+5466,U+54a6,U+54bf,U+54d0,U+5533,U+5549,U+5556,U+556d,U+558f,U+55f2,U+55f5,U+5627,U+567b,U+56d4,U+571c,U+5739,U+57b4,U+5807,U+58c5,U+59a4,U+59af,U+59d8,U+5a09,U+5a0c,U+5a4a,U+5ad2,U+5b6c,U+5ca2,U+5cac,U+5d03,U+5d6c,U+5db7,U+5ebe,U+5f2d,U+5fea,U+6042,U+6120,U+6175,U+6221,U+623e,U+6339,U+638a,U+643d,U+64b8,U+64e2,U+66e9,U+67b3,U+67c1,U+67d2,U+6832,U+6877,U+68f0,U+6934,U+6966,U+6987,U+6998,U+69c1,U+69ce,U+6a3d,U+6a84,U+6aa9,U+6b87,U+6bd6,U+6c16,U+6c18,U+6cd4,U+6cee,U+6de0,U+6e0c,U+6ecf,U+6f4b,U+70b7,U+7168,U+72d9,U+7352,U+73b3,U+73d0,U+7441,U+74d2,U+75a5,U+75e7-75e8,U+7610,U+7619,U+765e,U+772d,U+7812,U+782c,U+784c,U+7850,U+7856,U+789b,U+78f4,U+7a51,U+7b15,U+7b1e,U+7b24,U+7b5a,U+7bb8,U+7bc1,U+7bd9,U+7ed0,U+7ee6,U+7efa,U+7f1b,U+7f1f,U+7f22,U+7f45,U+7f71,U+7fa7,U+7fbf,U+7ff3,U+8052,U+80b1,U+80db,U+80f4,U+81bb,U+81ec,U+8202,U+8210,U+8249,U+828a,U+828e,U+82e3,U+8315,U+8369,U+8378,U+83a8,U+83aa,U+83b4,U+83e1,U+84fc,U+8538,U+853b,U+859c,U+85ae,U+86b4,U+86c9,U+86cf,U+8725,U+879f,U+87b3,U+887d,U+88fe,U+8a8a,U+8ba7,U+8c07,U+8c14,U+8c30,U+8c47,U+8db5,U+8dd7,U+8e1f,U+8e69,U+8e70,U+8e85,U+8f78,U+8f87,U+8f8b,U+8f8f,U+90c4,U+9143,U+917d,U+948f,U+94cd,U+94d2,U+94ef,U+954a,U+9609-960a,U+96d2,U+9708,U+9765,U+97ea,U+9880,U+98a7,U+996c,U+9980,U+9991,U+9a88,U+9ab6,U+9afb,U+9b47,U+9c87,U+9c9b,U+9cb5,U+9cc7,U+9e2c,U+9e42,U+9e58,U+9ecd,U+9ecf,U+9f8a,U+9f8c"}},{uri:DUe,descriptors:{unicodeRange:"U+4ebb,U+4edd,U+4fa9,U+502c,U+50a5,U+51c7,U+51fc,U+523d,U+5241,U+530f,U+5464,U+549d,U+54a3,U+5514,U+5527,U+555c,U+556e,U+5576,U+55b1,U+55b9,U+55eb,U+5624,U+564c,U+5671,U+5685,U+568f,U+56d7,U+56e1,U+57a1,U+57d9,U+5942,U+5a67,U+5c50,U+5c7a,U+5c98,U+5d06,U+5d27,U+5d6f,U+5df3,U+5dfd,U+5e19,U+5ea0,U+5eb9,U+5eea,U+5ffe,U+600f,U+606b,U+6215,U+622c,U+6266,U+62bb,U+62bf,U+6308,U+6387,U+63b8,U+63c4,U+63c6,U+63f6,U+6441,U+6555,U+659b,U+6677,U+66a7,U+6775,U+678b,U+679e,U+6840,U+6849,U+6860,U+68c2,U+6910,U+6a28,U+6a2f,U+6a79,U+6b92-6b93,U+6bc2,U+6bfd,U+6c29,U+6c32,U+6c86,U+6cc5,U+6d0c,U+6d60,U+6da0,U+6ddd,U+6e86,U+6ed3,U+6edf,U+6fb9,U+6fd1,U+6fef,U+7023,U+7080,U+70ca,U+712f,U+7145,U+7284,U+732c,U+73c8,U+73d9,U+740a,U+7457,U+7596,U+759d,U+75a3,U+75d8,U+75e3-75e4,U+75ff,U+7622,U+7688,U+76b4,U+76e5,U+7818,U+7887,U+789a,U+78b2,U+7b08,U+7b33,U+7c2a,U+7ccc,U+7ea8,U+7ec0,U+7fe6,U+8012,U+8084,U+8093,U+80e4,U+80ef,U+8297,U+82a8,U+82be,U+8331,U+8366,U+83c5,U+83fd,U+8473,U+84a1,U+84ca,U+84d1,U+857b,U+85c1,U+85d3,U+8605,U+8662,U+86aa,U+86b1,U+86d4,U+86ed,U+86f3,U+8709,U+8748,U+874c,U+8763,U+89c7,U+89de,U+89e5,U+8a3e,U+8ba6,U+8c00,U+8c21,U+8c49,U+8c7a,U+8d30,U+8df9,U+8e51,U+8e59,U+8f6b,U+8f73,U+8ff3,U+9016,U+9026,U+902f,U+9099,U+909b,U+90c7,U+914a,U+91ae,U+91ba,U+9495,U+94a3,U+94af,U+94ba,U+94bf,U+94cc,U+94e1,U+94f0,U+9531,U+955d,U+95f3,U+9697,U+96bc,U+975b,U+977c,U+98a2,U+998a,U+9994-9995,U+9a9b,U+9ab7,U+9ac5,U+9c91,U+9ccf,U+9cd5,U+9e29,U+9edc,U+9edf,U+9f83,U+9f88-9f89"}},{uri:NUe,descriptors:{unicodeRange:"U+4ee8,U+4f22,U+4f43,U+4f57,U+4f5d,U+4f6f,U+4ff8,U+502d,U+507b,U+5345,U+53df,U+53fb,U+544b,U+5482,U+54a7,U+54cc,U+550f,U+5544,U+5555,U+5594,U+55e8,U+55ec,U+55ef,U+564e,U+56f9,U+5704,U+576d,U+5785,U+57ad,U+5914,U+5958,U+599e,U+59aa,U+59be,U+5a06,U+5abe,U+5ae1,U+5b40,U+5bee,U+5cbf,U+5cc4,U+5ccb,U+5d47,U+603f,U+6078,U+607d,U+607f,U+608c,U+609a,U+60fa,U+61ff,U+621b,U+622e,U+626a,U+6371,U+63ae,U+63cd,U+63d6,U+6410,U+6414,U+6421,U+6448,U+64d8,U+6710,U+6748,U+6772,U+680e,U+6954,U+69ab,U+6c68,U+6c8f,U+6ca4,U+6d2e,U+6e4e,U+6e98,U+6fe0,U+7094,U+70e9,U+7116,U+7119,U+723f,U+73c9,U+74e4,U+753e,U+7548,U+75bd,U+75cd,U+7618,U+7634,U+76c5,U+76f1,U+7708,U+7719,U+777e,U+7791,U+77b3,U+7823,U+7827,U+7830,U+7889,U+7893,U+7949,U+795c,U+79e3,U+7a14,U+7a88,U+7a95,U+7aa0,U+7afd,U+7b90,U+7bd1,U+7bfe,U+7da6,U+7ec2,U+7eef,U+7f03-7f04,U+7f08,U+7f58,U+7f61,U+7f9f,U+8174,U+8200,U+828d,U+82c4,U+82d5,U+82dc,U+82f7,U+832d,U+835a,U+840b,U+8438,U+852b,U+869d,U+86ac,U+86d0,U+86f0,U+8782,U+87a8,U+87d1-87d2,U+87e0,U+8839,U+8913,U+891b,U+8934,U+8941,U+89ca,U+89ce,U+8a07,U+8ba3,U+8bc5,U+8bcb,U+8bdb,U+8c11,U+8c15,U+8c29,U+8c32,U+8dc4,U+8dce,U+8ddb,U+8dfa,U+8e09,U+8e1d,U+8e39,U+8e42,U+8e49,U+8e4b,U+8e8f,U+8f71-8f72,U+9004,U+9036,U+9097,U+90dc,U+90e2,U+90e6,U+90ef,U+9104,U+919a,U+91b4,U+938f,U+9497,U+950f,U+9557,U+9562-9563,U+9573,U+9606,U+9649,U+972d,U+973e,U+97a3,U+97eb,U+988c,U+9894,U+98a6,U+9974,U+9977,U+997d,U+9a90,U+9a9d,U+9aef,U+9ca2,U+9ccd,U+9cdf,U+9e20,U+9e4c,U+9e6b,U+9f3e"}},{uri:OUe,descriptors:{unicodeRange:"U+4ede,U+4ee1,U+4eeb,U+4fda,U+4ffe,U+5025,U+506c,U+50f3,U+5106,U+520d,U+525c,U+52ad,U+530d,U+5310,U+539d,U+53a9,U+53fc,U+5421,U+5477,U+54e7,U+551b,U+5530,U+557e,U+5599,U+55c4,U+55d1,U+55d4,U+55df,U+55e4,U+55ea,U+5623,U+562d,U+5654,U+56eb,U+56f5,U+57a7,U+57d5,U+57dd,U+584d,U+5880,U+58ec,U+59dd,U+5a32,U+5a55,U+5a75,U+5b51,U+5b71,U+5b73,U+5cd2,U+5ce4,U+5e5b,U+5e96,U+5fd2,U+607b,U+61d1,U+634b,U+636d,U+63b3,U+63ff,U+64c0,U+661d,U+6657,U+66dc,U+67a5,U+6841,U+6867,U+6901,U+699b,U+6a47,U+6b46,U+6c21,U+6c24,U+6c35,U+6c4a,U+6c94,U+6ca3,U+6d39,U+6d63,U+6d6f,U+6d94,U+705e,U+71e7,U+726f,U+72cd,U+72de,U+72f0,U+7325,U+7350,U+7391,U+741a,U+757f,U+7583,U+75b1,U+75b4,U+75b8,U+75c2,U+75f1,U+766f,U+7699,U+7751,U+789c,U+7a17,U+7be6,U+7cb2,U+7ea3,U+7eb0,U+7ebe,U+7eeb,U+7f25,U+7f2c,U+7fb8,U+8026,U+8037,U+8153,U+8171,U+8191,U+8214,U+821b,U+8222,U+826e,U+82eb,U+830c,U+8314,U+8334,U+83d6,U+8418,U+843c,U+84ff,U+8564,U+8572,U+8616,U+866c,U+8693,U+86a3,U+86a7,U+86af,U+86b6,U+86c6,U+86ca,U+8708,U+870d,U+8759,U+8760,U+87af,U+87c6,U+8869,U+88c6,U+89d0,U+8b07,U+8baa-8bab,U+8bc2,U+8be4,U+8bf0,U+8c2a,U+8c62,U+8c89,U+8d49,U+8d6d,U+8d84,U+8d94,U+8db8,U+8dc6,U+8e2e,U+8e3d,U+8e47,U+8e7f,U+9005,U+9051,U+907d,U+9082,U+9088,U+90b0,U+90d3,U+9150,U+949c,U+94a4,U+94b9,U+94cb,U+94e0,U+9509,U+9512,U+951f,U+9534,U+9552-9553,U+965f,U+96b0,U+9791,U+9889,U+9990,U+9a9c,U+9aa7,U+9c88,U+9cb2-9cb3,U+9cb6-9cb7,U+9cc5,U+9cdc,U+9e22,U+9e2a,U+9e57,U+9e67,U+9e73,U+9e82,U+9eb8,U+9ee0,U+9f9b"}},{uri:PUe,descriptors:{unicodeRange:"U+4eb5,U+4f09,U+4f5a,U+4f8f,U+4fce,U+4fdf,U+4fea,U+4ff3,U+500c,U+500f,U+504e,U+5088,U+52be,U+5420,U+5457,U+5499,U+549b,U+54c6,U+54d2,U+558b,U+559f,U+55bd,U+55d6,U+565c,U+567c,U+568e,U+5768,U+577b,U+57a9,U+57ed,U+59f9,U+5a11,U+5a40,U+5ae6,U+5b6a,U+5b93,U+5bb8,U+5c15,U+5c99,U+5c9c,U+5cc1,U+5d2e,U+5d4b,U+5d99,U+5e54,U+5e61,U+5fcf-5fd1,U+6002,U+6006,U+6014,U+60af,U+60c6,U+60da,U+60f4,U+621f,U+62c8,U+631b,U+631e,U+63e9,U+64b5,U+655d,U+6619,U+6635,U+6641,U+67ad,U+67b0,U+67b7,U+67e9,U+684e,U+688f,U+695d,U+696b,U+69b7,U+6a58,U+6c26,U+6d35,U+6d43,U+6d9e,U+6dd9,U+6dec,U+6e11,U+6e6e,U+6e9f,U+6ec2,U+6ee2,U+6ef9,U+6f09,U+6f66,U+6f8d,U+6fc2,U+6fc9,U+729f,U+72c8,U+73de,U+7430,U+7566,U+7579,U+75c9,U+75e2,U+75fc,U+762a,U+7638,U+7678,U+76c2,U+76f9,U+778c,U+77cd,U+77dc,U+7800,U+781d,U+782d,U+783b-783c,U+78a3,U+78ec,U+7980,U+7a23,U+7b95,U+7bdd,U+7c0c,U+7c41,U+7c91,U+7cb3,U+7cc5,U+7ecc,U+7f19,U+7fca,U+8006,U+8069,U+807f,U+80bd,U+80ed,U+814b,U+8198,U+82cb,U+82d2,U+834f,U+8360,U+847a,U+84d6,U+84e5,U+8537,U+85d0,U+8671,U+86a4,U+86ce,U+86f9,U+8703,U+8707,U+8737,U+873b,U+8815,U+8936,U+8bc3,U+8bcf,U+8bd2,U+8bd8,U+8be9,U+8c0c,U+8c0f,U+8c4c,U+8d45,U+8d5d,U+8d73,U+8e31,U+8e6d,U+8e76,U+8fe4,U+9041,U+90d7,U+9169,U+92ae,U+94a1,U+94c4,U+94c9,U+94db,U+94e7,U+9503,U+9506,U+9517,U+9528,U+9537,U+9542,U+9549,U+95fe,U+9616,U+961a,U+96c9,U+96f3,U+9701,U+970e,U+9739,U+9753,U+9798,U+98d2-98d3,U+98d9-98da,U+9968,U+996f,U+9984,U+9997,U+9acb,U+9b03,U+9c85,U+9ca8,U+9cab,U+9e49,U+9e51,U+9e66,U+9f10"}},{uri:FUe,descriptors:{unicodeRange:"U+4e15,U+4e1e,U+4e2b,U+4eb3,U+4ec9,U+4f0e,U+4f64,U+501c,U+50a9,U+510b,U+51a2,U+51bc,U+527d,U+52d0,U+53fd,U+5429,U+542e,U+5486,U+54af,U+5506,U+5511,U+5522,U+552c,U+556c,U+55b3,U+55d2,U+55e6,U+55fd,U+561f,U+5639,U+5659,U+5662,U+5693,U+572a,U+5892,U+598a,U+5992,U+59a9,U+5a20,U+5ae3,U+5b17,U+5b7d,U+5d34,U+5d3d,U+5d4a,U+5d82,U+5e1a-5e1b,U+5ea5,U+5f0b,U+5f77,U+5fd6,U+5fff,U+6026,U+6035,U+6063,U+60b4,U+60bb,U+60ee,U+612b,U+6194,U+61ca,U+61e6,U+61f5,U+620a,U+6248,U+62a1,U+62d7,U+6376,U+637b,U+652b,U+65bc,U+65cc,U+65ce,U+65d6,U+664c,U+665f,U+6666,U+6684,U+66b9,U+6773,U+6777,U+6787,U+67de,U+6845,U+693d,U+6994,U+6a35,U+6d54,U+6d5c,U+6d8e,U+6dd6,U+6eb4,U+6f2a,U+6f78,U+704f,U+70ec,U+7118,U+714a,U+7172,U+71b9,U+724d,U+728a,U+7337,U+733e,U+7396,U+73b7,U+73cf,U+7428,U+742c,U+742e,U+74ee,U+74f4,U+7525,U+753a,U+7572,U+75d4,U+765c,U+768e,U+7762,U+777d,U+77fd,U+7825,U+7837,U+78b4,U+795f,U+79ed,U+7a1e,U+7b06,U+7b20,U+7ba9,U+7bab,U+7c7c,U+7cbd,U+7cdc,U+7ec9,U+7ef6,U+7f30,U+7f42,U+7f44,U+7f54,U+7f94,U+8004,U+800b,U+8019,U+809b,U+80ae,U+80c4,U+80f1,U+8146,U+816e,U+817c,U+81c0,U+81fc,U+81fe,U+822b,U+830f,U+832f,U+8340,U+8365,U+8385,U+8392,U+83a0,U+8424,U+84af,U+869c,U+8713,U+8717-8718,U+87c0,U+87cb,U+87fe,U+8821,U+8902,U+89d1,U+8bb9,U+8c12,U+8d32,U+8d53,U+8df7,U+8e7c,U+8f7c,U+8f95,U+8fab,U+9052,U+905b,U+9095,U+909d,U+90c5,U+911e,U+9122,U+916a,U+919b,U+948e,U+9492,U+949a,U+94b5,U+94bc,U+94c6,U+94f1,U+9502,U+9511,U+9536,U+956f-9570,U+9602,U+9621,U+9631,U+998b,U+99a5,U+9a81,U+9a9e,U+9ebe,U+9f8b"}},{uri:BUe,descriptors:{unicodeRange:"U+4f2b,U+4f3d,U+4fac,U+5043,U+5055,U+5140,U+5156,U+51cb,U+5243,U+531d,U+536f,U+53a5,U+53ae,U+53f1,U+541d,U+5431,U+547b,U+5492,U+5494,U+54a4,U+54aa,U+54ce,U+54fd,U+5509,U+5520,U+553e,U+557b,U+55c5,U+55e1,U+55f7,U+5608,U+5636,U+563b,U+5773,U+57a0,U+5811,U+587e,U+58d5,U+59e3,U+5a29,U+5a6a,U+5a76,U+5a7a,U+5ac9,U+5b62,U+5b95,U+5c49,U+5c8c,U+5cab,U+5cb7,U+5d02,U+5d58,U+5e44,U+5e7a,U+5eff,U+5f29,U+5f89,U+5f9c,U+5fa8,U+6005,U+6043,U+60b8,U+60d8,U+60ec,U+60f0,U+6115,U+618e,U+630e,U+637a,U+6390,U+63ac,U+63b0,U+64de,U+6525,U+6538,U+65ee-65ef,U+6631,U+6636,U+6654,U+677c,U+67b8,U+67d8,U+683e,U+6886,U+68b5,U+692d,U+6963,U+6979,U+6988,U+6b59,U+6b9a,U+6c69,U+6c74,U+6cae,U+6ce0,U+6cef,U+6d95,U+6dc5,U+6dde,U+6de6,U+6dfc,U+6ea7,U+6f15,U+6f29,U+7096,U+70c3,U+7131,U+715c,U+7166,U+7266,U+7317,U+731d,U+7329,U+73e9,U+7425,U+7455,U+7490,U+74ef,U+7519,U+75b5,U+75b9,U+75de,U+7656,U+7663,U+7691,U+7729,U+77fe,U+783e,U+787c,U+795a,U+7a79,U+7abf,U+7b3a,U+7b4f,U+7b60,U+7b75,U+7b8d,U+7bb4,U+7bd3,U+7be1,U+7cbc,U+7edb,U+7f1c,U+7f8c,U+7fb2,U+7fb9,U+7fce,U+7ff1,U+810d,U+81c6,U+82a5,U+82aa,U+82de,U+8317,U+8343,U+835e,U+8364,U+836a,U+853a,U+8543,U+854a,U+8559,U+8568,U+85b0,U+85b9,U+864f,U+86e4,U+8715,U+8845,U+8884,U+88e8,U+88f1,U+8983,U+8be1,U+8c1f,U+8c27,U+8c5a,U+8c82,U+8d58,U+8dbe,U+8f98,U+9035,U+9074,U+90a1,U+9149,U+9157,U+93d6,U+949d,U+94c2,U+94e3-94e4,U+95eb,U+95f0,U+9611,U+9619,U+9642,U+968d,U+9706,U+970f,U+97ed,U+988a,U+9893,U+98e8,U+9a77,U+9a87,U+9aa1,U+9abc,U+9cdd,U+9e2f,U+9e33,U+9e44,U+9e5c,U+9e9d,U+9edd"}},{uri:zUe,descriptors:{unicodeRange:"U+4f58,U+4f6c,U+4f70,U+4fd0,U+5014,U+51bd,U+524c,U+5315,U+5323,U+535e,U+540f,U+542d,U+545b,U+548e,U+549a,U+54ab,U+54fc,U+5567,U+556a,U+5600,U+5618,U+563f,U+5669,U+56f1,U+56ff,U+573b,U+574d,U+579b,U+57b8,U+57c2,U+586c,U+58f9,U+595a,U+598d,U+5993,U+5996,U+59d7,U+5b7a,U+5ba6,U+5c4e,U+5c96,U+5ce5,U+5eb6,U+5f08,U+5f99,U+602f,U+6059,U+606c,U+607a,U+60ed,U+61a9,U+620c,U+6249,U+62a8,U+62c4,U+62ed,U+62fd,U+6342,U+6345,U+6396,U+63a3,U+6402,U+6413,U+642a,U+6487,U+64a9,U+64ac,U+64ae,U+64b7,U+659f,U+65a1,U+667e,U+66f3,U+67e0,U+69db,U+69df,U+6aac,U+6b86,U+6c50,U+6c5e,U+6c76,U+6c85,U+6c8c,U+6cde,U+6d19,U+6d52,U+6da7,U+6db8,U+6e1a,U+6e25,U+6e4d,U+6e5f,U+6ec1,U+6f31,U+6f7a,U+6fa7,U+6fe1,U+701b,U+70ab,U+70f7,U+717d,U+71a8,U+7252,U+72c4,U+72e1,U+7315,U+736d,U+73ae,U+73c0,U+73c2,U+740f,U+75a4,U+7600-7601,U+768b,U+76bf,U+76d4,U+7728,U+772f,U+776c,U+77a0,U+77b0,U+77f8,U+783a,U+78d0,U+78fa,U+7977,U+7a37,U+7a92,U+7afa,U+7b71,U+7b94,U+7cef,U+7f28,U+7fe1,U+808b,U+80e5,U+80eb,U+8110,U+8113,U+812f,U+814c,U+81c3,U+8235,U+82d4,U+8309,U+83c1,U+8431,U+8469,U+84bf,U+84d3,U+84df,U+84e6,U+8511,U+8638,U+86c0,U+86db,U+86fe,U+8757,U+8822,U+8882,U+8885,U+8892,U+88f3,U+892a,U+8ba5,U+8bd9,U+8be0,U+8be7,U+8bfd,U+8c1a,U+8d4a,U+8d4e,U+8d66,U+8dda,U+8e0c,U+8e52,U+8e74,U+8e87,U+8f76,U+8fc2,U+8fe6,U+900d,U+9068,U+90ac,U+90b3,U+90b8,U+90e7,U+9119,U+9131,U+915a,U+916e,U+94b4,U+94d0,U+94e2,U+94ec,U+94ff,U+9522,U+9535,U+9556,U+965b,U+96f9,U+9774,U+9981,U+998d,U+998f,U+9a6e,U+9a7f,U+9a8a,U+9b13,U+9c9f,U+9e3e,U+9e43,U+9e6d,U+9e8b,U+9e92,U+9edb,U+9eef"}},{uri:HUe,descriptors:{unicodeRange:"U+4e10,U+4e56,U+4e98,U+4ec3,U+4f3a,U+4f5f,U+4f88,U+4f97,U+4fa5,U+4fe8,U+504c,U+5197,U+52fa,U+5364,U+53e8,U+5406,U+543c,U+545c,U+5471,U+5480,U+5495,U+54b3,U+54df,U+54e6,U+54ee,U+557c,U+5583,U+55dc,U+55e3,U+566c,U+592f,U+5944,U+5983,U+59ca,U+59e5,U+5a13,U+5a7f,U+5b09,U+5bd0,U+5e4c,U+5eb5,U+5f1b,U+5f3c,U+608d,U+60cb,U+61a7,U+61ac,U+61cb,U+6233,U+62a0,U+62e7,U+62ee,U+62f4,U+62f7,U+634e,U+6382,U+63c9,U+63ea,U+6400,U+645e,U+6482,U+6556,U+6593,U+6615,U+664f,U+66e6,U+672d,U+675e,U+67da,U+6805,U+6808,U+6868,U+68a2,U+695e,U+69ad,U+6a80,U+6a90,U+6b83,U+6be1,U+6c30,U+6cad,U+6cb1,U+6cf1,U+6d31,U+6d93,U+6dae,U+6dbf,U+6dc6-6dc7,U+6e0d,U+6e32,U+6e3a,U+6e85,U+6eba,U+6f3e,U+6f5e,U+6f7c,U+6fee,U+71ee,U+722a,U+72b7,U+72e9,U+73ba,U+73d1,U+7409,U+7435-7436,U+7459-745a,U+747e,U+7487,U+74e2,U+7504,U+752c-752d,U+7599,U+759f,U+75a1,U+75ca,U+75f0,U+761f,U+7629,U+777f,U+7785,U+77a5,U+77bf,U+78d5,U+7934,U+7940,U+79a7,U+7b19,U+7c38,U+7c95,U+7cb1,U+7ce0,U+7eca,U+7ef7,U+7f2b,U+7f81,U+7fcc,U+8046,U+8148,U+8165,U+819b,U+81ba,U+828b,U+82ae,U+82b7,U+82d3,U+8301,U+830e,U+831c,U+8338,U+837c,U+8393,U+8398,U+83ba,U+83e0,U+83e9,U+853c,U+8654,U+86df,U+8712,U+873f,U+874e,U+8783,U+8859,U+88a4,U+8925,U+8bb7,U+8bff,U+8c19,U+8c1b,U+8c24,U+8c2c,U+8d61,U+8db4,U+8e6c,U+8f8a,U+8fe5,U+8ff8,U+901e,U+90f4,U+912f,U+9163,U+9170,U+91dc,U+949b,U+94a8,U+94b3,U+94c0,U+94e8,U+9525,U+9530,U+9539,U+954c-954d,U+9550,U+955b,U+962a,U+9685,U+96cc,U+9776,U+988d,U+9975,U+9985,U+9a6f,U+9aa5,U+9ab8,U+9c7f,U+9ca4,U+9cb8,U+9e25,U+9e35,U+9e4a"}},{uri:VUe,descriptors:{unicodeRange:"U+4ea2,U+4ea5,U+4f36,U+4f84,U+4f8d,U+501a,U+5029,U+516e,U+51a5,U+51c4,U+51f8,U+5201,U+527f,U+5321,U+5352,U+5366,U+53e9,U+54c7,U+5632,U+5676,U+56b7,U+56bc,U+56da,U+56e4,U+5703,U+5729,U+5742,U+57a2-57a3,U+5815,U+58d1,U+5919,U+592d,U+5955,U+5a05,U+5a25,U+5a34,U+5b70,U+5b75,U+5bdd,U+5bf0,U+5c41,U+5c79,U+5c91,U+5c94,U+5ce6,U+5ced,U+5d69,U+5dc5,U+5e16,U+5e27,U+5f27,U+5f95,U+5ffb,U+6020,U+604d,U+6055,U+60e6,U+60eb,U+6123,U+618b,U+61a8,U+620d,U+62c7,U+62ce,U+62d9,U+631f,U+634d,U+6452,U+6479,U+64ce,U+64d2,U+655b,U+660a,U+6726,U+67c4,U+6809,U+6853,U+68e3,U+68f1,U+68fa,U+693f,U+6942,U+6995,U+69a8,U+69b4,U+6a71,U+6b89,U+6bcb,U+6bd3,U+6bd9,U+6c40,U+6cf8,U+6cfe,U+6d85,U+6da3,U+6daa,U+6e0e,U+6e43-6e44,U+6f88,U+7078,U+7099,U+70bd,U+70d9,U+70fd,U+7109,U+7184,U+7239,U+733f,U+73f2,U+748b,U+749c,U+749e,U+759a,U+75d2,U+75eb,U+7620,U+766b,U+7693,U+76cf,U+7738,U+773a,U+776b,U+778e,U+77aa,U+7852,U+78be,U+7948,U+795b,U+7960,U+796f,U+79ba,U+7a20,U+7a96,U+7aa5,U+7b03,U+7b28,U+7b50,U+7b77,U+7bc6,U+7bf1,U+7c27,U+7d0a,U+7ead,U+7ec5,U+7ee2,U+7ef0,U+7efd,U+7f0e,U+7f2e,U+7f79,U+7f9a,U+8098,U+80da,U+80e7,U+80f0,U+80f3,U+80fa,U+818a,U+81e7,U+8237-8238,U+8299,U+82b8,U+82ce,U+837b,U+83bd,U+83cf,U+8426,U+8475,U+85c9,U+85d5,U+85dc,U+85e9,U+871a,U+8747,U+8749,U+888d,U+8910,U+891a,U+8bb4,U+8be3,U+8bec,U+8bf2,U+8c06,U+8c0d,U+8d31,U+8d48,U+8de4,U+8e1e,U+8e4a,U+8e66,U+8f84,U+8f97,U+9083,U+90e1,U+9165,U+91c9,U+94b0,U+94f5,U+9504,U+9532,U+956d,U+95f5,U+95fa,U+9668,U+9698,U+96bd,U+9704,U+9773,U+9890,U+996a,U+997a,U+9a74,U+9a8b,U+9cc4,U+9ccc"}},{uri:$Ue,descriptors:{unicodeRange:"U+4ea8,U+4f1e,U+4f51,U+4f63,U+4f7c,U+4f83,U+4fa0,U+4fd1,U+4ffa,U+5018,U+5026,U+508d,U+50bb,U+50f5,U+50fb,U+5162,U+5319,U+5320,U+538c,U+5413,U+541f,U+5475,U+54bd,U+54d1,U+5589,U+5598,U+575f,U+57ae,U+57e0,U+5937,U+5974,U+5978,U+59ae,U+5a1f,U+5a49,U+5ab3,U+5b99,U+5b9b,U+5ba0,U+5be1,U+5be5,U+5c09,U+5c27,U+5de2,U+5e9a,U+5f26,U+5f8a,U+5f98,U+6021,U+606d,U+60bc,U+60d5,U+60e7,U+611a,U+614c,U+6254,U+626f,U+6292,U+6296,U+62b9,U+62e2,U+631a,U+631d,U+6320,U+6346,U+63ba,U+6467,U+64bc,U+658b,U+663c,U+6643,U+6652,U+6656,U+6687,U+66d9,U+66dd,U+66f0,U+673d,U+67ab,U+6816-6817,U+68a7,U+68ad,U+68cd,U+68e0,U+6986,U+69fd,U+6b47,U+6bd7,U+6c1f,U+6c2e-6c2f,U+6cbe,U+6de4,U+6e1d,U+6e83,U+6e9c,U+6ed4-6ed5,U+6f4d,U+70f9,U+7130,U+716e,U+718f,U+71ac,U+71e5,U+72fc,U+731c,U+7334,U+73ca,U+7422,U+7426,U+745f,U+7470,U+75af,U+75f4,U+762b,U+763e,U+7696,U+7737,U+7741,U+77a7,U+77bb,U+77ee,U+785d,U+788c,U+78ca,U+7901,U+796d,U+7985,U+79fd,U+7a3c,U+7a57,U+7a74,U+7b5b,U+7caa,U+7cb9,U+7cd5,U+7eac,U+7eb6,U+7ed1,U+7ee5,U+7f20,U+7f2a,U+7f38,U+7f69,U+7fa1,U+8018,U+8038,U+803f,U+804b,U+80a2,U+80be,U+80d6,U+817a,U+81fb,U+820c,U+82ad,U+82af,U+82bd,U+8327,U+8354,U+835f,U+8367,U+836b,U+840c,U+841d,U+8471,U+849c,U+84b2,U+84c9,U+8517,U+851a,U+8549,U+8681,U+8721,U+8776,U+88d9,U+88f9,U+89c5,U+8c1c,U+8c34,U+8d81,U+8d9f,U+8e0a,U+8e72,U+8eb2,U+8fed,U+901b,U+902e,U+906e,U+9091,U+90aa,U+90af,U+915d,U+9171,U+946b,U+9489,U+9499,U+94a5,U+9508,U+9524,U+952d,U+9551,U+9576,U+95f7,U+9600,U+96b6,U+96c0,U+9756,U+97f6,U+98a0,U+98a4,U+997f,U+9a73,U+9a86,U+9ad3,U+9e3d,U+9ed4"}},{uri:Y1e,descriptors:{unicodeRange:"U+4e4d,U+4e5e,U+4ec7,U+4ed5,U+50da,U+50e7,U+515c,U+51a4,U+51ff,U+5203,U+5254,U+5300,U+533e,U+5375,U+53ee,U+5435,U+543b,U+5455,U+548b,U+548f,U+54d7,U+54fa,U+5578,U+5587,U+55a7,U+560e,U+5760,U+576f,U+5777,U+5830,U+58a9,U+5962,U+59e8,U+5a07,U+5a23,U+5a3c,U+5b5a,U+5bb5,U+5bc5,U+5bde,U+5c7f,U+5cb1,U+5ce8,U+5cea,U+5d29,U+5d4c,U+5e18,U+5f57,U+5f5d,U+5f87,U+5ff1,U+6016,U+601c,U+6064,U+6177,U+61d2,U+625b,U+62e3,U+62f1,U+634f,U+63a0,U+6401,U+6405,U+6495,U+64c2,U+6512,U+6577,U+6590,U+65a7,U+65a9,U+65f7,U+6627,U+6655,U+6714,U+6795,U+67d1,U+67ff,U+68b3,U+68d5,U+68d8,U+6930,U+6960,U+6977,U+69bb,U+69d0,U+6a31,U+6b7c,U+6bb4,U+6c22,U+6c72,U+6c79,U+6c7e,U+6c81,U+6c93,U+6ca5,U+6cbc,U+6ce3,U+6cfb,U+6d3c,U+6da9,U+6df3,U+6e2d,U+6eaf,U+6ec7,U+6f13,U+6f33,U+6f62,U+6fa1,U+7011,U+707c,U+708a,U+70c1,U+70d8,U+70eb,U+711a,U+7194,U+7281,U+7316,U+7357,U+7384,U+7405,U+742a,U+745b,U+7574,U+7578,U+75ea,U+7682,U+7792,U+77d7,U+77e9,U+77eb,U+77f6,U+780c,U+78c5,U+7941,U+79e4,U+7a1a,U+7a9c,U+7ad6,U+7b5d,U+7bf7,U+7c07,U+7c3f,U+7c9f,U+7ca5,U+7cdf,U+7e82,U+7eab,U+7ece,U+7eda,U+7f09,U+7f15,U+7f9e,U+7fdf,U+7fe9,U+803b,U+803d,U+80aa,U+80b4,U+813e,U+8155,U+817b,U+819d,U+821c,U+82b9,U+82df,U+82ef,U+8304,U+83b9,U+8446,U+853d,U+85af,U+85fb,U+8650,U+865e,U+86d9,U+86ee,U+8700,U+8862,U+889c,U+88d4,U+88f8,U+895f,U+8a79,U+8bb3,U+8bb6,U+8bc0,U+8beb,U+8bf5,U+8c23,U+8c79,U+8d1e,U+8dcb,U+8e29,U+8e44,U+8e81,U+8eac,U+8eaf,U+8f8d,U+9050,U+90f8,U+914b,U+948a,U+94be,U+94ee,U+950c,U+9540,U+962e,U+9647,U+9661,U+9699,U+96cf,U+9716,U+9761,U+97a0,U+97e7,U+9a7c,U+9a8f,U+9ae6,U+9cd6,U+9e26"}},{uri:GUe,descriptors:{unicodeRange:"U+4fa3,U+4fae,U+4fd8,U+4fef,U+50a3,U+5189,U+5195,U+51db,U+51f3,U+51f9,U+5220,U+5228,U+5288,U+52ff,U+532e,U+533f,U+5351,U+53db,U+53ed,U+5450,U+5484,U+5490,U+54c9,U+54e9,U+5501,U+5507,U+5543,U+55d3,U+56a3,U+575e,U+589f,U+5984,U+59ec,U+5a04,U+5a36,U+5a77,U+5a9a-5a9b,U+5ab2,U+5ac2,U+5ad6,U+5bc7,U+5c2c,U+5c34,U+5c51,U+5cd9,U+5d0e,U+5deb,U+5e3c,U+5e87,U+5ed3,U+5f13,U+5f64,U+5fe1,U+606a,U+6096,U+60df,U+60f6,U+60f9,U+6151,U+620e,U+6241,U+6252,U+6273,U+627c,U+6289,U+62c2,U+62cc,U+62ef,U+6361,U+6363,U+63b7,U+63e3,U+6518,U+66ae,U+6756,U+6789,U+6813,U+6829,U+6862,U+6866,U+6893,U+6897,U+690e,U+6984,U+69cc,U+6a1f,U+6a44,U+6a59,U+6ba1,U+6c13,U+6c90,U+6ca6,U+6cbd,U+6ccc,U+6cd3,U+6cd7,U+6d4a,U+6d4f,U+6d5a,U+6d9f,U+6da1,U+6dcc,U+6ea5,U+6ee4,U+6ee6,U+6f2f,U+6f8e,U+701a,U+7095,U+709c,U+70af,U+70db,U+70e8,U+714e,U+715e,U+71a0,U+71ce,U+7235,U+7280,U+72d0,U+72f8,U+73ab,U+7410,U+745c,U+7480,U+74a7-74a8,U+74e3,U+75ae,U+75f9,U+76b1,U+76ce,U+7736,U+77e2-77e3,U+781a,U+789f,U+797a,U+79be,U+79c3,U+79c6,U+79f8,U+7a8d,U+7a98,U+7aa6,U+7aff,U+7b1b,U+7cd9,U+7d6e,U+7ede,U+7eee,U+7f00,U+7f24,U+7f2d,U+7fd8,U+800d,U+8116,U+8151,U+81b3,U+8205,U+82c7,U+82db,U+832c,U+8335,U+8339,U+8386,U+846b,U+8587,U+8611,U+8682,U+868a,U+868c,U+8774,U+88d8,U+88f4,U+8912,U+8b6c,U+8bbd,U+8c0e,U+8c41,U+8d26,U+8d3b-8d3c,U+8d50,U+8dea,U+8e35,U+8f99,U+8fe2,U+8fe9,U+9017,U+914c,U+916f,U+9175-9176,U+918b,U+94a0,U+94ae,U+94ce,U+94f2,U+951a,U+952f,U+9541,U+9640,U+9672,U+968b,U+96cd,U+96ef,U+9713,U+97ec,U+9885,U+9992,U+9a6d,U+9a79,U+9a85,U+9cbb,U+9cd7,U+9cde,U+9e93,U+9f9f"}},{uri:XUe,descriptors:{unicodeRange:"U+4e11,U+4ed7,U+4fcf,U+4fe9,U+4fed,U+50ac,U+50b2,U+5112,U+5180,U+5188,U+51f6,U+522e,U+5265,U+52cb,U+52df,U+5349,U+5367,U+5378,U+537f,U+5395,U+5398,U+53d4,U+543e,U+5440,U+5446,U+54b8,U+5565-5566,U+5580,U+55bb,U+56ca,U+572d,U+573e,U+574e,U+5782-5784,U+58f3,U+5938-5939,U+5948,U+594e,U+5a1c,U+5a74,U+5ae9,U+5b55,U+5b5c,U+5bb0,U+5bd3,U+5bf8,U+5c3f,U+5d14,U+5d2d,U+5df7,U+5dfe,U+5e05-5e06,U+5e1c,U+5e62,U+5e7b,U+5e7d,U+5ed6,U+5f2f,U+5f66,U+5f6c,U+5fa1,U+604b,U+609f,U+60a6,U+60e8,U+6101,U+6124,U+6127,U+6148,U+61be,U+6247,U+62d8,U+62da,U+633d,U+635e,U+6367,U+6380,U+638f,U+63a9,U+63fd,U+641c,U+64e6,U+655e,U+6572,U+6591,U+65a5,U+6691,U+6735,U+67a2-67a3,U+67ef,U+680b,U+6876,U+6905,U+6a0a,U+6a61,U+6b79,U+6bb7,U+6bbf,U+6c41,U+6c55,U+6c83,U+6c9b,U+6ca7,U+6cfc,U+6d46,U+6d51,U+6d74,U+6d9d,U+6daf,U+6dc0,U+6deb,U+6e17,U+6e24,U+6e89,U+6ea2,U+6ef4,U+6f6d,U+707f,U+70b3,U+70e4,U+70ef,U+710a,U+722c,U+725f,U+7261,U+72ee,U+72f1,U+730e,U+732b,U+7433,U+7538,U+75bc,U+7624,U+7709,U+7750,U+7779,U+7802,U+7898,U+78a7,U+78b1,U+78cb,U+78f7,U+7984,U+7a83,U+7aed,U+7b3c,U+7b4b,U+7c92,U+7c98,U+7ca4,U+7eb9,U+7ee3,U+7ef3,U+7ef5,U+7f05,U+7f55,U+7f62,U+7fc1,U+7fd4,U+7fe0,U+8042,U+806a,U+80a0,U+80a4,U+80c3,U+8102,U+8106,U+814a,U+8154,U+8247,U+8258,U+82cd,U+8328,U+832b,U+8389,U+83ca,U+845b,U+846c,U+84b8,U+8574,U+859b,U+8680,U+8695,U+86c7,U+8702,U+886c,U+8896,U+88b1,U+88e4,U+8bc8,U+8c10,U+8c26,U+8c28,U+8c2d,U+8d4c,U+8d63,U+8f67,U+8f74,U+8fc4,U+9006,U+9063,U+90a2,U+90b1,U+90c1,U+9177,U+9189,U+9493,U+949e,U+94fe,U+9610,U+961c,U+96a7,U+96fe,U+978d,U+97f5,U+9888,U+997c,U+9a84,U+9b3c,U+9b44-9b45,U+9b54,U+9e64,U+9f0e,U+9f9a"}},{uri:jUe,descriptors:{unicodeRange:"U+4e19,U+4e38,U+4e53,U+4e7e,U+4e9f,U+4ec6,U+4f50,U+4fde,U+502a,U+5154,U+517d,U+51d1,U+51f0,U+5239,U+5256,U+52c9,U+52fe,U+5308,U+532a,U+535c,U+5384,U+53a2,U+53a8,U+53c9,U+53e0,U+5496,U+54ac,U+54c0,U+54c4,U+54e8,U+5561,U+5582,U+561b,U+5631,U+566a,U+5764,U+576a,U+5792,U+57ab,U+584c,U+5885,U+58f6,U+59a8,U+5acc,U+5bc2,U+5c38-5c39,U+5c60,U+5c6f,U+5c82,U+5c90,U+5d16,U+5dcd,U+5e37,U+5e90,U+5eb8,U+5f6a,U+5fcc,U+6012,U+6068,U+6073,U+607c,U+6094,U+6109,U+621a,U+626e,U+6284,U+62d0,U+62e6,U+62fe,U+6321,U+6328,U+632b,U+6349,U+6454,U+65ed,U+660f,U+6674,U+66a8,U+6749,U+674f,U+6760,U+67af,U+6850,U+6854,U+6869,U+68a8,U+68d2,U+68f5,U+6912,U+6b49,U+6b6a,U+6bef,U+6c28,U+6c5d,U+6c82,U+6cab,U+6cb8,U+6cc4,U+6cf5,U+6d47,U+6d78,U+6da4,U+6dc4,U+6dcb,U+6df9,U+6e0a,U+6e23,U+6e5b,U+6eb6,U+6f06,U+6f47,U+6f84,U+6f9c,U+6fd2,U+7076,U+70ac,U+7199,U+723d,U+72ac,U+72ed,U+7476,U+7529,U+752b,U+754f,U+7554,U+75d5,U+7626,U+76ef,U+7720,U+7766,U+7784,U+77ac,U+780d,U+7838,U+7845,U+786b,U+78b3,U+7978,U+79b9,U+79c9,U+79e7,U+7a3d,U+7a84,U+7a9f,U+7b0b,U+7b52,U+7c7d,U+7f1a,U+7fc5,U+7ff0,U+804a,U+8086-8087,U+808c,U+809a,U+80ba,U+810a,U+8180,U+818f,U+81c2,U+81ed,U+8231,U+8292,U+829c,U+82a6,U+82d1,U+8346,U+838e,U+839e,U+83c7,U+83f1,U+8403,U+840e,U+8513,U+857e,U+85e4,U+867e,U+871c,U+87ba,U+87f9,U+884d,U+8944,U+8a93,U+8c05,U+8d2c,U+8d2e,U+8d42-8d43,U+8dfb,U+8e22,U+8eba,U+8f69,U+8f9c,U+8fa3,U+8fa8,U+8fb1,U+900a,U+9038,U+903b,U+9042,U+904f,U+90b5,U+90dd,U+9102,U+9187,U+94a7,U+94c5,U+9523,U+95f8,U+95fd,U+960e,U+964b-964c,U+96c1,U+9709,U+971c,U+97ad,U+9882,U+9965,U+9976,U+9988,U+99a8,U+9a82,U+9a9a,U+9b41,U+9c8d,U+9e45,U+9e70,U+9e9f,U+9f3b,U+9f7f"}},{uri:YUe,descriptors:{unicodeRange:"U+4e08,U+4e18,U+4e1b,U+4e22,U+4e27,U+4e32,U+4e52,U+4e73,U+4ead,U+4ed4,U+4ed9,U+4ef0,U+4fa6,U+5076,U+5179,U+51bb,U+51c9,U+51ef,U+51fd,U+524a,U+526a,U+529d,U+52ab,U+5306,U+5339,U+53d9,U+540a,U+5410,U+541e,U+5439,U+54b1,U+54ed,U+5564,U+558a,U+55b7,U+5634,U+574a,U+5751,U+57a6,U+57cb,U+57d4,U+5824,U+582a,U+5835,U+5858,U+5893,U+58e4,U+5951,U+5986,U+59da,U+59fb,U+59ff,U+5a03,U+5a46,U+5ac1,U+5b5d,U+5bfa,U+5c18,U+5c3a,U+5c48,U+5c4f,U+5c61,U+5cb3,U+5d1b,U+5e15,U+5e3d,U+5e99,U+5e9e,U+5eca,U+5f0a,U+5f17-5f18,U+5f25,U+5f7c,U+5fcd,U+6028,U+60a0,U+60ac,U+60d1,U+614e,U+6155,U+6168,U+61c8,U+6208,U+6212,U+6251,U+629a-629b,U+62ab-62ac,U+62fc,U+6323,U+632a,U+63d2,U+643a,U+6491-6492,U+649e,U+64b0,U+64c5,U+659c,U+6614,U+662d,U+6664,U+6670,U+6676,U+6746,U+67cf,U+67d4,U+682a,U+6843,U+6846,U+68da,U+6b3a,U+6b67,U+6c27,U+6c5b,U+6c64,U+6c70,U+6caa,U+6cca,U+6ce1,U+6d12,U+6d45,U+6dd1,U+6dd8,U+6e34,U+6e7f,U+6ee5,U+6f02,U+7092,U+70c2,U+70e6,U+7115,U+7237,U+7272,U+727a,U+72c2,U+739b,U+73b2,U+743c,U+751c,U+758f,U+75b2,U+7686,U+76c6,U+76d2,U+76fc,U+775b,U+77a9,U+7816,U+788e,U+7897,U+78b0,U+79bd,U+7a0d,U+7a91,U+7a9d,U+7ae3,U+7bad,U+7cca,U+7d2b,U+7eb1,U+7f06,U+7f14,U+7f1d,U+7f50,U+7ffc,U+8036,U+80bf,U+80c1,U+80ce,U+80f8,U+8109,U+810f,U+8170,U+8179,U+819c,U+821f,U+8230,U+8236,U+8273,U+829d,U+82f9,U+8305,U+8350,U+83b2,U+83cc,U+8404,U+840d,U+8427,U+8482,U+8679,U+8854,U+886b,U+8bbc,U+8be6,U+8c31,U+8c6b,U+8d4b,U+8dcc,U+8e2a,U+8e48,U+8f90,U+8fb0,U+9022,U+903c,U+903e,U+9065,U+916c,U+917f,U+94a9,U+94c3,U+94dd,U+94ed,U+9510,U+953b,U+96c7,U+970d,U+9738,U+9877,U+987d,U+989c,U+98d8,U+9a70,U+9a91,U+9aa4,U+9b42,U+9b4f,U+9e2d,U+9e3f,U+9e7f,U+9f20"}},{uri:X1e,descriptors:{unicodeRange:"U+4e59,U+4ed3,U+4f0f,U+4f38,U+4f69,U+4fa7,U+4faf,U+4ff1,U+5077,U+5085,U+5144,U+5151,U+51af,U+51b6,U+51cc,U+523a,U+5251,U+5269,U+5272,U+52d8,U+5353,U+5389,U+53f9,U+5401,U+5415,U+541b,U+54f2,U+5524,U+554a,U+559d,U+5609,U+5740,U+575d,U+5806,U+5821,U+586b,U+5915,U+594f,U+5960,U+5999,U+59a5,U+59b9,U+59c6,U+59d1,U+59dc,U+5b5f,U+5b64,U+5b87,U+5bb4,U+5bbf,U+5c16,U+5c1d,U+5c3e,U+5c9a,U+5ca9,U+5cad,U+5cfb,U+5de1,U+5de7,U+5de9,U+5ef7,U+5f04,U+5f70,U+5f79,U+5fc6,U+602a,U+6050,U+6052,U+6070,U+6084,U+60b2,U+60dc,U+60e9,U+6167,U+6170,U+61c2,U+6270,U+6291,U+62b1,U+62bc,U+62dc,U+62df,U+62f3,U+6324,U+633a,U+6377,U+6398,U+63cf,U+640f,U+642c-642d,U+6458,U+6478,U+6500,U+654c,U+6566,U+658c,U+65c1,U+65cb,U+65e8,U+65ec,U+6696-6697,U+6734,U+679a,U+679d,U+67dc,U+67f3-67f4,U+680f,U+683d,U+684c,U+68af,U+699c,U+6bc1,U+6c0f,U+6c1b,U+6c57,U+6c6a,U+6d3d,U+6d6e,U+6d82,U+6db5,U+6dee,U+6e58,U+6eaa,U+6ecb,U+6ede,U+6ee9,U+6f0f,U+6f20,U+6f58,U+704c,U+7070,U+70b8,U+718a,U+7238,U+7262,U+7275,U+72b9,U+72d7,U+72e0,U+741b,U+7434,U+7483,U+74f6-74f7,U+75ab,U+764c,U+7761,U+7855,U+7891,U+78c1,U+79d2,U+7a00,U+7a3b,U+7c97,U+7ea4,U+7eb2,U+7ed2,U+7eea,U+7ef8,U+7f18,U+7fbd,U+8000,U+8010,U+8096,U+809d,U+80a9,U+817f,U+81e3,U+8206,U+8212,U+82ac,U+8302,U+8361,U+8377,U+83f2,U+8461,U+848b,U+84ec,U+8521,U+85aa,U+8870,U+8877,U+8881,U+888b,U+88ad,U+88c2,U+8986,U+8bd1,U+8bf1,U+8d24,U+8d2a,U+8d3e-8d3f,U+8d41,U+8d56,U+8d64,U+8d6b,U+8e0f,U+8f70,U+8f85,U+8f88,U+8fa9,U+9003,U+901d,U+90b9,U+90ce,U+94a6,U+94f8,U+9505,U+95ea,U+95ef,U+95f2,U+95f9,U+9601,U+9605,U+9634,U+966a,U+9677,U+9690,U+9694,U+96d5,U+971e,U+9896-9897,U+9972,U+9a71,U+9a76,U+9a7e,U+9e1f,U+9e23"}},{uri:WUe,descriptors:{unicodeRange:"U+4e01,U+4e43,U+4ea6,U+4ef2,U+4eff,U+4f26,U+4f2a,U+4f2f,U+4f5b,U+4fa8,U+4fca,U+4fd7,U+5021,U+504f,U+5141,U+51c0,U+51dd,U+51e4,U+51ed,U+5200,U+5237,U+5427,U+5448,U+54a8,U+5706,U+5708,U+5723,U+575b,U+57c3,U+5899,U+58a8,U+58c1,U+5976,U+5988,U+59bb,U+59d0,U+59d3,U+5a18,U+5a31,U+5a92,U+5b54,U+5b85,U+5baa-5bab,U+5bc4,U+5bd2,U+5be8,U+5bff,U+5c65,U+5d07,U+5e1d,U+5e78,U+5e7c,U+5f03,U+5f1f,U+5f39,U+5f6d,U+5f92,U+5faa,U+5fbd,U+5fe7,U+5ffd,U+60a8,U+60ef,U+6108,U+6162,U+622a,U+6234,U+626b,U+626d,U+62c6,U+62d2,U+62d4,U+62d6,U+62e8,U+6316,U+6355,U+63ed,U+6447,U+64a4,U+65f1,U+6606,U+6628,U+664b,U+6668,U+6682,U+66f9,U+66fc,U+66ff,U+6717,U+6740,U+676d,U+67aa,U+67ec,U+67f1,U+6842,U+6851,U+695a,U+6982,U+6a2a,U+6b20,U+6b23,U+6b32,U+6b96,U+6bc5,U+6beb,U+6c60,U+6c9f,U+6cea,U+6cf3,U+6d1e,U+6d53,U+6d66,U+6d69,U+6d8c,U+6d9b,U+6db2,U+6de1,U+6dfb,U+6e14,U+6ed1,U+6eda,U+6ee8,U+6f2b,U+706d,U+7089,U+708e,U+70ad-70ae,U+70e7,U+7126,U+714c,U+71c3,U+71d5,U+7206,U+7259,U+731b,U+73a9,U+73bb,U+74dc,U+7532,U+7545,U+755c,U+75c7,U+7687,U+76d7,U+76f2,U+788d,U+78e8,U+79e6,U+79e9,U+7a3f,U+7a46,U+7a97,U+7af9,U+7bee,U+7c4d,U+7c89,U+7cd6,U+7eb5,U+7ebd,U+7ed8,U+8017,U+8033,U+80c0,U+80de,U+80f6,U+8138,U+817e,U+81a8,U+820d,U+827e,U+82b3,U+82d7,U+83b1,U+84c4,U+84dd,U+8584,U+864e,U+865a,U+866b,U+86cb,U+88d5,U+89e6,U+8bca,U+8bde,U+8bfa,U+8c0a,U+8c37,U+8c46,U+8c6a,U+8c8c,U+8d1d,U+8d29,U+8d4f,U+8d54,U+8d5a,U+8d60,U+8d62,U+8f7f,U+8f96,U+8f9e-8f9f,U+8fc1,U+8fdf,U+8fea,U+8ff7,U+9012,U+906d,U+9075,U+90a6,U+90bb,U+90ca,U+9178,U+9192,U+91ca,U+94bb,U+94dc,U+94fa,U+9501,U+950b,U+9521,U+955c,U+963b,U+9655,U+9675-9676,U+9887,U+9891,U+9971,U+9a97,U+9ece,U+9ed8"}},{uri:KUe,descriptors:{unicodeRange:"U+4e1d,U+4e39,U+4e4c,U+4e4f,U+4e54,U+4e58,U+4e95,U+4ea1,U+4eab,U+4eae,U+4ec1,U+4f10,U+4f19,U+4f30,U+4f34,U+4fb5,U+503e,U+518c,U+5192,U+51a0,U+51ac,U+51b0,U+51e1,U+5211,U+5242,U+52a3,U+52b2,U+52c3,U+52c7,U+52d2,U+52e4,U+5377,U+539a,U+53a6,U+53e5,U+5417,U+5510,U+552f,U+5531,U+574f-5750,U+5761,U+5851,U+5854,U+58ee,U+593a,U+5949,U+5954,U+5a5a,U+5b8b,U+5bbd,U+5c04,U+5c0a,U+5c4b,U+5ce1,U+5cf0,U+5e10,U+5e8a,U+5e9f,U+5ec9,U+5f31,U+5f84,U+5fd8-5fd9,U+5fe0,U+6015,U+6062,U+6069,U+6076,U+6089,U+60a3,U+60ca,U+620f,U+624e,U+6263,U+6298,U+62a2,U+62bd,U+6311,U+6350,U+6389,U+638c,U+63f4,U+6446,U+644a,U+6469,U+64cd,U+654f,U+6562,U+656c,U+65d7,U+65e6,U+65fa,U+660c,U+6653,U+66b4,U+670b,U+672b,U+676f-6770,U+6881,U+6885,U+68a6,U+68cb,U+68ee,U+6b8a,U+6c88-6c89,U+6cc9,U+6ce5,U+6d01,U+6d17,U+6d1b,U+6d59,U+6d6a,U+6da8,U+6df7,U+6e10,U+6e20-6e21,U+6f5c,U+706f,U+70bc,U+719f,U+7267,U+732a,U+73cd,U+7518,U+756a,U+7586,U+7591,U+75db,U+76c8,U+76d0,U+76d6,U+76d8,U+76df,U+76fe,U+77db,U+7801,U+786c,U+795d,U+7965,U+79cb,U+7a77,U+7a7f,U+7aef,U+7b11,U+7bb1,U+7bc7,U+7ea0,U+7eaf,U+7ed5,U+7edc,U+7f13,U+7f29,U+7f34,U+7f8a,U+7ffb,U+8015,U+8058,U+805a,U+8083,U+80af,U+80c6,U+80cc,U+811a,U+8150,U+82e5,U+8336,U+8352,U+83ab,U+8428,U+8463,U+852c,U+8861,U+89c8,U+8bcd,U+8bd7,U+8bda,U+8be2,U+8bef,U+8bf8,U+8c0b,U+8c13,U+8d34,U+8d3a,U+8d74,U+8d76,U+8da3,U+8dd1,U+8ddd,U+8ddf,U+8df3,U+8f68,U+8f6f,U+8f7d,U+8f91,U+8f9b,U+8fbd,U+8fc8,U+8fd4,U+8feb,U+8ff9,U+900f,U+9057,U+907f-9080,U+90d1,U+90ed,U+91ce,U+9519,U+9526,U+95ed,U+9614,U+9635,U+9644,U+9686,U+96c5,U+96ea,U+9707,U+9732,U+9759,U+978b,U+9876,U+9881,U+9910,U+996e,U+9970,U+9c81,U+9e21,U+9ebb,U+9f84"}},{uri:ZUe,descriptors:{unicodeRange:"U+4e3d,U+4e4e,U+4e71,U+4e8f,U+4ed8,U+4eea,U+4f0a,U+4f0d,U+4f11,U+4f1f,U+4f24,U+4f3c,U+4f73,U+4fc4,U+500d,U+5012,U+501f,U+503a,U+505c,U+507f,U+50a8,U+514d,U+5178,U+517c,U+51b2,U+51b7,U+520a,U+5238,U+523b,U+52b1,U+535a,U+5371,U+5385,U+53eb-53ec,U+53f3,U+53f6,U+5409,U+542b,U+542f,U+5434,U+5462,U+5473,U+547c,U+54c8,U+54ea,U+56fa,U+5733,U+5757,U+5766,U+5802,U+585e,U+590f,U+591c,U+591f,U+5947,U+594b,U+5987,U+5a01,U+5b59,U+5b63,U+5b88,U+5b97,U+5b9c,U+5bbe,U+5bfb,U+5c01,U+5c1a,U+5c24,U+5c3c,U+5c97,U+5c9b,U+5cb8,U+5de6,U+5e01,U+5e2e,U+5e45,U+5e55,U+5e84,U+5ef6,U+5f02,U+5f52,U+5f69,U+5f7b,U+5f90,U+5fae,U+6000,U+600e,U+6025,U+60e0,U+6276,U+6297,U+62b5,U+62cd,U+62d3,U+62e5,U+62e9,U+62ff,U+6302,U+632f,U+63e1,U+6444,U+64ad,U+653b,U+6551,U+6563,U+65a4,U+65e7,U+6620,U+667a,U+66f2,U+671d,U+6731,U+6742,U+675f,U+6768,U+677e-677f,U+6790,U+67b6,U+67d3,U+6863,U+68b0,U+68c9,U+690d,U+6b8b,U+6bcd,U+6bd2,U+6bd5,U+6c38,U+6c61,U+6cbf,U+6cdb,U+6cf0,U+6d2a,U+6d89,U+6da6,U+6f6e,U+6fb3,U+7075,U+707e,U+70df,U+7164,U+7236,U+725b,U+7389,U+73e0,U+745e,U+74e6,U+751a,U+7537,U+75be,U+76ae,U+76db,U+793c,U+7956,U+7981,U+79d8,U+79df,U+79fb,U+7adf,U+7ae5,U+7b14,U+7b26,U+7b54,U+7b79,U+7d2f,U+7eb8,U+7eba,U+7ec6,U+7ee9,U+7eff,U+7f5a,U+7f6a,U+7f72,U+8089,U+80a5,U+80e1,U+8111,U+8131,U+821e,U+822c,U+8270,U+8499,U+8651,U+867d,U+8840,U+8857,U+8863,U+88c1,U+89c9,U+89d2,U+8a89,U+8bed,U+8bfe,U+8c01,U+8c22,U+8d21,U+8d25,U+8d2f,U+8d5e,U+8d75,U+8d8b,U+8dc3,U+8de8,U+8df5,U+8f6e,U+8f86,U+8f89,U+8fc5,U+8ff0,U+8ffd,U+9014,U+904d,U+90ae,U+9274,U+949f,U+952e,U+969c,U+96c4,U+96e8,U+96f6-96f7,U+97e9,U+987f,U+996d,U+9a7b,U+9aa8,U+9c7c,U+9c9c,U+9e4f,U+9f13,U+9f50"}},{uri:QUe,descriptors:{unicodeRange:"U+4e13,U+4e16,U+4e1c,U+4e24,U+4e3e,U+4e49,U+4e61,U+4e66,U+4e89,U+4e8c,U+4e94,U+4e9b,U+4ea4,U+4eac,U+4ebf,U+4eca,U+4ef6-4ef7,U+4efb,U+4f18,U+4f20,U+4f46,U+4f7f,U+4fe1,U+503c,U+505a,U+5146,U+5148,U+515a,U+5171,U+5177,U+519b,U+51b3,U+51c6,U+51e0,U+5212,U+521b,U+522b,U+529e,U+52bf,U+534e-534f,U+5355,U+5357,U+5382,U+539f,U+53bb,U+53bf,U+53c2,U+53c8,U+53ca,U+53d6-53d8,U+53e3,U+53ea,U+53f0,U+540d,U+5411,U+56db,U+56de,U+56e0,U+56e2,U+578b,U+57ce,U+57fa,U+589e,U+5904,U+5934,U+5982,U+5b89,U+5b8c,U+5bfc,U+5c06,U+5c11,U+5c40,U+5c71,U+5e38,U+5e72,U+5e76,U+5e7f,U+5e94,U+5e9c,U+5f0f,U+5f15,U+5f20,U+5f3a,U+5f62,U+5f88,U+5fc5,U+5fd7,U+5feb,U+601d,U+6027,U+60c5,U+60f3,U+610f,U+6216,U+6218,U+624b,U+624d,U+6279,U+628a,U+6295,U+6301,U+6307,U+636e,U+63a5,U+63a8,U+652f,U+6536,U+653e,U+6548,U+6559,U+6570,U+65bd,U+65e0,U+6602,U+660e,U+6613,U+66f4,U+6700,U+670d,U+671f,U+672f,U+6743,U+674e,U+6751,U+6761,U+6784,U+6797,U+679c,U+67e5,U+6807,U+6837,U+683c,U+6b21,U+6b63-6b65,U+6bcf,U+6bd4,U+6c42,U+6c5f,U+6ca1,U+6cbb,U+6d3b,U+6d41,U+6d88,U+6df1,U+70b9,U+7136,U+7269,U+7279,U+7531,U+754c,U+767e,U+76ca,U+76f8,U+770b,U+7740,U+7814,U+79ef,U+7a0b,U+7a0e,U+7a76,U+7b80,U+7cbe,U+7cfb,U+7e41,U+7ea7,U+7ec4,U+7ec7,U+7ed3,U+7ed9,U+7edf,U+7f8e,U+8001,U+804c,U+8054,U+80b2,U+81f3,U+8425,U+8868,U+88ab,U+897f,U+89c1-89c2,U+89c4,U+89c6,U+89e3,U+8ba1,U+8ba4,U+8bae,U+8bb0,U+8bba,U+8bc1,U+8c03,U+8d28,U+8d39,U+8def,U+8f66,U+8f6c,U+8fd0-8fd1,U+9020,U+9053,U+90a3,U+90fd,U+91cc,U+9500,U+9547,U+95e8,U+95f4,U+961f,U+9645,U+9662,U+96be,U+96c6,U+9700,U+9769,U+97e6,U+9875,U+9879,U+9886,U+9898,U+98ce,U+9996,U+2b5af,U+2cc56,U+2e9f5,U+30edd-30ede"}},{uri:JUe,descriptors:{unicodeRange:"U+4e03,U+4e30,U+4e34,U+4e45,U+4e60,U+4e70,U+4e88,U+4e91-4e92,U+4ea9,U+4eb2,U+4ec0,U+4ecb,U+4ecd,U+4ee4,U+4fee,U+5019,U+5047,U+50cf,U+5145,U+516d,U+5170,U+5175,U+5199,U+51cf,U+51fb,U+521a,U+5224,U+5267,U+52aa,U+5347-5348,U+534a,U+5356,U+5361,U+536b,U+5370,U+538b,U+53e4,U+53e6,U+5403,U+5426,U+5428,U+542c,U+5438,U+5668,U+56ed,U+56f4,U+56fe,U+57df,U+592a,U+5957,U+5b69,U+5b81,U+5b8f,U+5b98,U+5b9d,U+5ba1,U+5ba4,U+5bb3,U+5bc6,U+5bdf,U+5c3d,U+5c5e,U+5c81,U+5ddd,U+5de8,U+5dee,U+5e0c,U+5e86,U+5e8f,U+5e93,U+5e95,U+5e97,U+5ea7,U+5ead,U+5eb7,U+5f55,U+5f81,U+5f85,U+5ff5,U+6001,U+613f,U+6258,U+6267,U+6269,U+626c,U+627e,U+62db,U+62ec,U+6325,U+635f,U+6362,U+6388,U+6392,U+63a2,U+63a7,U+63aa,U+641e,U+6545,U+6597,U+65e2,U+65e9,U+661f,U+665a,U+666e-666f,U+66fe,U+6728,U+67d0,U+6811,U+6838,U+6865,U+697c,U+6b22,U+6b27,U+6b4c,U+6b62,U+6b66,U+6b7b,U+6bdb,U+6c47,U+6c49,U+6c7d,U+6c99,U+6cfd,U+6d0b,U+6d25,U+6d32,U+6d3e,U+6d4b,U+6e29,U+6e56,U+6e7e,U+6f14,U+6fc0,U+706b,U+70c8,U+7247,U+72af,U+72b6,U+72ec,U+732e,U+73ed,U+7403,U+7533,U+753b,U+7559,U+7565,U+7597,U+767b,U+773c,U+7763,U+77ed,U+77ff,U+7968,U+798f,U+79bb,U+79c0-79c1,U+7ad9,U+7ae0,U+7b51,U+7b7e,U+7cae,U+7d22,U+7ea2,U+7eb3,U+7eb7,U+7ec3,U+7ec8,U+7ecd,U+7edd,U+7efc,U+7f16,U+7f3a,U+7f51,U+7f57,U+7f6e,U+80dc,U+822a,U+8239,U+826f,U+82cf,U+82e6,U+8349,U+8363,U+83dc,U+8457,U+85cf,U+878d,U+8865,U+8a00,U+8b66,U+8ba2,U+8ba8,U+8bad,U+8bb2,U+8bc9,U+8bd5,U+8bfb,U+8d2b,U+8d35,U+8d37,U+8f7b,U+8f93,U+8fce,U+8fdd,U+9000-9002,U+9010,U+9047,U+9093,U+9152,U+9488,U+94a2,U+9633,U+9636,U+963f,U+9646,U+9648,U+964d,U+9664,U+9669,U+9760,U+97f3,U+987a,U+987e,U+9884,U+98de,U+9986,U+9ed1"}},{uri:e2e,descriptors:{unicodeRange:"U+4e14,U+4e25,U+4e48,U+4e50,U+4e5d,U+4e9a,U+4ec5,U+4efd,U+4f17,U+4f4e-4f4f,U+4f55,U+4f59,U+4f60,U+4f8b,U+4f9b,U+4f9d,U+4fbf,U+4fc3,U+5065,U+513f,U+5149,U+514b,U+516b,U+5174,U+517b,U+518d,U+51b5,U+5207,U+5217-5219,U+521d,U+526f,U+529f,U+52a9,U+52b3,U+5305,U+533b,U+5343,U+5360,U+5373-5374,U+5386,U+53cb-53cd,U+53f2,U+53f7,U+544a,U+5468,U+547d,U+54cd,U+552e,U+5584,U+56f0,U+571f,U+5747,U+575a,U+57f9,U+5883,U+58eb,U+58f0,U+5907,U+590d,U+592e,U+5931,U+5956,U+5965,U+5973,U+5979,U+59cb,U+5b57-5b58,U+5b83,U+5ba2-5ba3,U+5bb9,U+5bcc,U+5c42,U+5c45,U+5c4a,U+5dde,U+5df1,U+5df4,U+5e03,U+5e08,U+5e26,U+5e2d,U+5f71,U+5f80,U+5f8b,U+5fb7,U+606f,U+611f,U+6237,U+623f,U+6253,U+627f,U+6293,U+62a4,U+62c5,U+62c9,U+6309,U+6574,U+6599,U+65ad,U+65af,U+65c5,U+65cf,U+6625,U+663e,U+671b,U+672a,U+6750,U+6781,U+6821,U+6839,U+6848,U+68c0,U+6a21,U+6b3e,U+6bb5,U+6c14,U+6cb3,U+6cb9,U+6ce8,U+6e05,U+6e2f,U+6e38,U+6e90,U+6ee1,U+70ed,U+7167,U+7231,U+7248,U+724c,U+7387,U+738b,U+73af,U+7530,U+75c5,U+767d,U+76d1,U+76f4,U+771f,U+77e5,U+77f3,U+7834,U+7840,U+786e,U+793a,U+795e,U+79f0,U+7a33,U+7a7a,U+7a81,U+7ade,U+7b56,U+7b97,U+7c73,U+7c7b,U+7d20,U+7d27,U+7ea6,U+7eaa,U+7ebf,U+7ee7,U+7eed,U+7ef4,U+7fa4,U+8003,U+80a1,U+81f4,U+8272,U+827a,U+8282,U+82b1,U+82f1,U+8303,U+836f,U+83b7,U+843d,U+88c5,U+8ba9,U+8baf,U+8bb8,U+8bbf,U+8bc4,U+8bc6,U+8bdd,U+8be5,U+8bf7,U+8c08,U+8c61,U+8d1f,U+8d22-8d23,U+8d27,U+8d2d,U+8d38,U+8d5b,U+8d70,U+8d85,U+8d8a,U+8db3,U+8eab,U+8f83,U+8fb9,U+8fdc,U+8fde,U+9009,U+901f,U+914d,U+91c7,U+94b1,U+94c1,U+94f6,U+95fb,U+9632,U+9650,U+968f,U+9752,U+975e,U+987b,U+989d,U+98df,U+9999,U+9a6c,U+9a8c,U+9ec4,U+9feb-9fec"}},{uri:t2e,descriptors:{unicodeRange:"U+98fb-990c,U+990e-990f,U+9911-992d,U+992f-9953,U+9956-9962,U+9964,U+9966,U+9973,U+9978-9979,U+997b,U+997e,U+9982-9983,U+9989,U+998c,U+998e,U+999a-99a4,U+99a6-99a7,U+99a9-99c8"}},{uri:n2e,descriptors:{unicodeRange:"U+8e4c-8e50,U+8e53-8e58,U+8e5a-8e65,U+8e67-8e68,U+8e6a-8e6b,U+8e6e,U+8e71,U+8e73,U+8e75,U+8e77-8e7b,U+8e7d-8e7e,U+8e80,U+8e82-8e84,U+8e86,U+8e88-8e8e,U+8e91-8e93,U+8e95-8e9b,U+8e9d,U+8e9f-8eaa,U+8ead-8eae,U+8eb0-8eb1,U+8eb3-8eb9,U+8ebb-8ecd,U+8ecf-8f02"}},{uri:i2e,descriptors:{unicodeRange:"U+2e3a,U+3001-3002,U+3008-3011,U+3014-3017,U+301d-301f,U+4dae,U+4e00,U+4e07,U+4e09-4e0b,U+4e0d-4e0e,U+4e1a,U+4e2a,U+4e2d,U+4e3a-4e3b,U+4e4b,U+4e5f,U+4e86,U+4e8b,U+4e8e,U+4ea7,U+4eba,U+4ece,U+4ed1,U+4ed6,U+4ee3,U+4ee5,U+4eec,U+4f01,U+4f1a,U+4f4d,U+4f53,U+4f5c,U+4fdd,U+5143,U+5165,U+5168,U+516c,U+5173,U+5176,U+5185,U+519c,U+51fa,U+5206,U+5229,U+5230,U+5236,U+524d,U+529b,U+52a0-52a1,U+52a8,U+5316-5317,U+533a,U+5341,U+5362,U+53d1,U+53ef,U+53f8,U+5404,U+5408,U+540c,U+540e,U+5458,U+548c,U+54c1,U+54e5,U+5546,U+559c,U+56fd,U+5728,U+5730,U+573a,U+5916,U+591a,U+5927,U+5929,U+592b,U+597d,U+59d4,U+5b50,U+5b66,U+5b9a,U+5b9e,U+5bb6,U+5bf9,U+5c0f,U+5c14,U+5c31,U+5c55,U+5de5,U+5df2,U+5e02,U+5e73-5e74,U+5ea6,U+5efa,U+5f00,U+5f53,U+5f97,U+5fc3,U+603b,U+6210-6211,U+6240,U+6280,U+62a5,U+63d0,U+6539,U+653f,U+6587,U+65b0,U+65b9,U+65e5,U+65f6,U+662f,U+6708-6709,U+672c,U+673a,U+675c,U+6765,U+6c11,U+6c34,U+6cd5,U+6ce2,U+6d4e,U+6d77,U+73b0,U+7406,U+751f,U+7528,U+7535,U+7684,U+76ee,U+793e,U+79cd,U+79d1,U+7acb,U+7b2c,U+7b49,U+7ba1,U+7ecf,U+8005,U+800c,U+80fd,U+81ea,U+884c,U+8981,U+8bbe,U+8bf4,U+8d44,U+8d77,U+8fbe,U+8fc7,U+8fd8-8fd9,U+8fdb,U+901a,U+90e8,U+91cd,U+91cf,U+91d1,U+9485,U+957f,U+95ee,U+9762,U+9ad8,U+9ea6,U+9f99,U+9fcf,U+9fd4,U+9fed,U+fe10-fe19,U+fe30-fe31,U+fe33-fe44,U+ff01,U+ff0c,U+ff1f,U+2b4e7,U+2b7f7,U+2b7fc,U+2cb2d,U+2cb3b,U+2cb4a,U+2cb5b,U+2cb73"}},{uri:r2e,descriptors:{unicodeRange:"U+6490,U+6493-6494,U+6497-6498,U+649a-649d,U+649f-64a3,U+64a5-64a8,U+64aa-64ab,U+64af,U+64b1-64b4,U+64b6,U+64b9,U+64bb,U+64bd-64bf,U+64c1,U+64c3-64c4,U+64c6-64cc,U+64cf,U+64d1,U+64d3-64d6,U+64d9-64dd,U+64df-64e1,U+64e3,U+64e5,U+64e7-64ff,U+6501-6508,U+650a-6511,U+6513-6517,U+6519-6524,U+6526-652a,U+652c-652d,U+6530-6533,U+6537,U+653a,U+653c-653d,U+6540-6544,U+6546-6547,U+654a-654b,U+654d-654e,U+6550,U+6552-6554,U+6557-6558,U+655a,U+655c,U+655f-6561,U+6564-6565,U+6567-6568"}},{uri:s2e,descriptors:{unicodeRange:"U+9695-9696,U+969a-969b,U+969d-96a6,U+96a8-96af,U+96b1-96b2,U+96b4-96b5,U+96b7-96b8,U+96ba-96bb,U+96bf,U+96c2-96c3,U+96c8,U+96ca-96cb,U+96d0-96d1,U+96d3-96d4,U+96d6-96df,U+96e1-96e7,U+96eb-96ee,U+96f0-96f2,U+96f4-96f5,U+96f8,U+96fa-96fd,U+96ff,U+9702-9703,U+9705,U+970a-970c,U+9710-9712,U+9714-9715,U+9717-971b,U+971d,U+971f-9729,U+972b-972c,U+972e-972f,U+9731,U+9733-9737,U+973a-973d,U+973f-9751,U+9754-9755,U+9757-9758,U+975a,U+975c-975d,U+975f,U+9763-9764,U+9766-9768,U+976a-9770"}},{uri:o2e,descriptors:{unicodeRange:"U+6af0-6b1f,U+6b25-6b26,U+6b28-6b31,U+6b33-6b36,U+6b38,U+6b3b-6b3d,U+6b3f-6b42,U+6b44-6b45,U+6b48,U+6b4a-6b4b,U+6b4d-6b58,U+6b5a-6b61,U+6b68-6b69,U+6b6b-6b78,U+6b7a,U+6b7d-6b80,U+6b85,U+6b88,U+6b8c,U+6b8e-6b91,U+6b94-6b95,U+6b97-6b99,U+6b9c-6ba0,U+6ba2-6ba9,U+6bab-6bb2,U+6bb6,U+6bb8-6bba"}},{uri:a2e,descriptors:{unicodeRange:"U+430e-439a,U+29e8a,U+29ec4,U+29edb,U+29ee9,U+29f7e,U+29f83,U+29f8c,U+29fce,U+2a01a,U+2a02f,U+2a082,U+2a0f9,U+2a190,U+2a38c"}},{uri:l2e,descriptors:{unicodeRange:"U+92ef-933d,U+933f-9369,U+936b-9388"}},{uri:c2e,descriptors:{unicodeRange:"U+4512-458d,U+2b300,U+2b363,U+2b36f,U+2b372,U+2b37d,U+2b404,U+2b410,U+2b413,U+2b461,U+2b4ef,U+2b4f6,U+2b4f9,U+2b50d-2b50e,U+2b536,U+2b5ae,U+2b5b3,U+2b5e7,U+2b5f4,U+2b61c-2b61d,U+2b626-2b628,U+2b62a,U+2b62c,U+2b695-2b696,U+2b6ad,U+2b6ed"}},{uri:u2e,descriptors:{unicodeRange:"U+88bd-88c0,U+88c3-88c4,U+88c7-88c8,U+88ca-88cd,U+88cf-88d1,U+88d3,U+88d6-88d7,U+88da-88de,U+88e0-88e1,U+88e6-88e7,U+88e9-88ef,U+88f2,U+88f5-88f7,U+88fa-88fb,U+88fd,U+88ff-8901,U+8903-8909,U+890b-890f,U+8911,U+8914-8918,U+891c-8920,U+8922-8924,U+8926-8929,U+892c-892f,U+8931-8933,U+8935,U+8937-8940,U+8942-8943,U+8945-895d,U+8960-8965,U+8967-897a,U+897c-897e,U+8980,U+8982,U+8984-8985"}},{uri:W1e,descriptors:{unicodeRange:"U+4b0b-4ba0"}},{uri:d2e,descriptors:{unicodeRange:"U+7179,U+717b-717c,U+717e-7183,U+7185-7189,U+718b-718e,U+7190-7193,U+7195-7197,U+719a-719e,U+71a1-71a7,U+71a9-71ab,U+71ad-71b2,U+71b4,U+71b6-71b8,U+71ba-71c2,U+71c4-71cd,U+71cf-71d3,U+71d6-71df,U+71e1-71e4,U+71e6,U+71e8-71ed,U+71ef-71f8,U+71fa-7205,U+7207-721c,U+721e-7227,U+7229,U+722b,U+722d"}},{uri:f2e,descriptors:{unicodeRange:"U+982e-9874,U+988b,U+988e,U+9892,U+9895,U+9899,U+98a3,U+98a8-98cd,U+98cf-98d0,U+98d4,U+98d6-98d7,U+98db-98dd,U+98e0-98e6,U+98e9-98fa"}},{uri:h2e,descriptors:{unicodeRange:"U+7c14-7c15,U+7c17-7c1e,U+7c20-7c25,U+7c28-7c29,U+7c2b-7c37,U+7c39-7c3e,U+7c42-7c4c,U+7c4e-7c72,U+7c75-7c7a,U+7c7e-7c88,U+7c8a-7c90,U+7c93-7c94,U+7c96,U+7c99-7c9b,U+7ca0-7ca1,U+7ca3,U+7ca6-7ca9,U+7cab-7cad,U+7caf-7cb0,U+7cb4-7cb8,U+7cba-7cbb,U+7cbf-7cc0,U+7cc2-7cc4,U+7cc6,U+7cc9,U+7ccb,U+7cce-7cd4"}},{uri:g2e,descriptors:{unicodeRange:"U+7d95-7da5,U+7da7-7dad,U+7daf-7e2a"}},{uri:m2e,descriptors:{unicodeRange:"U+4a78-4b0a"}},{uri:p2e,descriptors:{unicodeRange:"U+9b30-9b31,U+9b33-9b3a,U+9b3d-9b40,U+9b46,U+9b4a-9b4c,U+9b4e,U+9b50,U+9b52-9b53,U+9b55-9bcf"}},{uri:U2e,descriptors:{unicodeRange:"U+6a4b-6a4f,U+6a51-6a57,U+6a5a,U+6a5c-6a60,U+6a62-6a64,U+6a66-6a70,U+6a72-6a78,U+6a7a-6a7b,U+6a7d-6a7f,U+6a81-6a83,U+6a85-6a8d,U+6a8f,U+6a92-6a96,U+6a98-6a9f,U+6aa1-6aa8,U+6aaa,U+6aad-6aef"}},{uri:b2e,descriptors:{unicodeRange:"U+99c9-9a53"}},{uri:y2e,descriptors:{unicodeRange:"U+8550-8555,U+8557-8558,U+855a-855d,U+855f-8563,U+8565-8567,U+8569-8571,U+8573,U+8575-8578,U+857c-857d,U+857f-8583,U+8586,U+8588-858e,U+8590-859a,U+859d-85a3,U+85a5-85a7,U+85a9,U+85ab-85ad,U+85b1-85b6,U+85b8,U+85ba-85c0,U+85c2-85c8,U+85ca-85ce,U+85d1-85d2,U+85d4,U+85d6-85db,U+85dd-85e3,U+85e5-85e8,U+85ea-85fa,U+85fc-85fe,U+8600-8603"}},{uri:E2e,descriptors:{unicodeRange:"U+6fb2,U+6fb4-6fb5,U+6fb7-6fb8,U+6fba-6fbf,U+6fc1,U+6fc3-6fc8,U+6fca-6fd0,U+6fd3-6fdd,U+6fdf,U+6fe2-6fed,U+6ff0-7010,U+7012-7019,U+701c-7022,U+7024-7034,U+7036-7038,U+703a-704b,U+704d-704e,U+7050-7053"}},{uri:v2e,descriptors:{unicodeRange:"U+4ba1-4c2c"}},{uri:w2e,descriptors:{unicodeRange:"U+9a54-9a6b,U+9a72,U+9a83,U+9a89,U+9a8d-9a8e,U+9a94-9a95,U+9a99,U+9aa6,U+9aa9-9aaf,U+9ab2-9ab5,U+9ab9,U+9abb,U+9abd-9abf,U+9ac3-9ac4,U+9ac6-9aca,U+9acd-9ad0,U+9ad2,U+9ad4-9ad7,U+9ad9-9ade,U+9ae0,U+9ae2-9ae5,U+9ae7-9aea,U+9aec,U+9aee,U+9af0-9af8,U+9afa,U+9afc-9b02,U+9b04-9b07,U+9b09-9b0e,U+9b10-9b12,U+9b14-9b1e,U+9b20-9b22,U+9b24-9b2e"}},{uri:_2e,descriptors:{unicodeRange:"U+9d1a-9da1"}},{uri:T2e,descriptors:{unicodeRange:"U+9e13-9e1e,U+9e24,U+9e27,U+9e2e,U+9e30,U+9e34,U+9e3b-9e3c,U+9e40,U+9e4d,U+9e50,U+9e52-9e54,U+9e56,U+9e59,U+9e5d,U+9e5f-9e62,U+9e65,U+9e6e-9e6f,U+9e72,U+9e74-9e7d,U+9e80-9e81,U+9e83-9e86,U+9e89-9e8a,U+9e8c-9e91,U+9e94-9e9c,U+9e9e,U+9ea0-9ea5,U+9ea7-9eb3,U+9eb5-9eb7,U+9eb9-9eba,U+9ebc,U+9ebf-9ec3,U+9ec5-9ec8,U+9eca-9ecc,U+9ed0,U+9ed2-9ed3,U+9ed5-9ed7,U+9ed9-9eda,U+9ede,U+9ee1,U+9ee3-9ee4,U+9ee6,U+9ee8,U+9eeb-9eee,U+9ef0-9ef8"}},{uri:I2e,descriptors:{unicodeRange:"U+8b1c-8b25,U+8b27-8b65,U+8b67-8b6b,U+8b6d-8b9f,U+8bac,U+8bb1,U+8bbb,U+8bc7,U+8bd0"}},{uri:S2e,descriptors:{unicodeRange:"U+4cad-4d2f"}},{uri:x2e,descriptors:{unicodeRange:"U+9c4b-9c7b,U+9c7d-9c7e,U+9c80,U+9c83-9c84,U+9c89-9c8a,U+9c8c,U+9c8f,U+9c93,U+9c96-9c99,U+9c9d,U+9caa,U+9cac,U+9caf,U+9cb9,U+9cbe-9cc2,U+9cc8-9cc9,U+9cd1-9cd2,U+9cda-9cdb,U+9ce0-9ce1,U+9ce3-9d19"}},{uri:C2e,descriptors:{unicodeRange:"U+9389-938e,U+9390-93c9,U+93cb-93d5,U+93d7-9410"}},{uri:qUe,descriptors:{unicodeRange:"U+20a0-20b5,U+20b9-20ba,U+20bc-20bd,U+4e2c,U+5107,U+5216,U+5293,U+54f3,U+5523,U+5819,U+5adc,U+5c88,U+5e3b,U+5fee,U+62f6,U+63be,U+6484,U+6499,U+67d9,U+67dd,U+6d5e,U+6f46,U+717a,U+71e0,U+72c1,U+73e7,U+75b0,U+7603,U+7722,U+7809,U+7811,U+7946,U+7967,U+799a,U+7b45,U+7ba2,U+8014,U+80d9,U+8159,U+817d,U+81a3,U+81aa,U+8201,U+833c,U+836e,U+83e5,U+8459,U+84f0,U+8729,U+8753,U+87d3,U+89dc,U+8bf6,U+8c2e,U+8e2c,U+8e9c,U+8e9e,U+8ece,U+8fee,U+9139,U+914f,U+9174,U+9191,U+960c,U+9622,U+9a98,U+9b48,U+9ca6,U+9cb0,U+9da2-9e12,U+9e88,U+9f44,U+9f86"}},{uri:A2e,descriptors:{unicodeRange:"U+9bd0-9c4a"}},{uri:M2e,descriptors:{unicodeRange:"U+4c2d-4cac"}},{uri:R2e,descriptors:{unicodeRange:"U+4d30-4dab"}},{uri:k2e,descriptors:{unicodeRange:"U+9411-943d,U+943f-946a,U+946c-9484"}},{uri:L2e,descriptors:{unicodeRange:"U+9efa,U+9efd,U+9eff-9f0a,U+9f0c,U+9f0f,U+9f11-9f12,U+9f14-9f16,U+9f18,U+9f1a-9f1f,U+9f21,U+9f23-9f2b,U+9f2d-9f2e,U+9f30-9f36,U+9f38,U+9f3a,U+9f3c,U+9f3f-9f43,U+9f45-9f4f,U+9f52-9f7e,U+9f81-9f82,U+9f8d-9f94"}},{uri:D2e,descriptors:{unicodeRange:"U+7e2b-7e3a,U+7e3c-7e40,U+7e42-7e46,U+7e48-7e81,U+7e83-7e9a,U+7e9c-7e9e,U+7eae,U+7eb4,U+7ebb-7ebc,U+7ed6,U+7ee4,U+7eec,U+7ef9,U+7f0a,U+7f10,U+7f1e,U+7f37,U+7f39,U+7f3b"}}],Qe=class Qe{constructor(t){F(this,"scene");F(this,"getSceneFamilies",()=>Qe.getUniqueFamilies(this.scene.getNonDeletedElements()));F(this,"onLoaded",t=>{let n=!0;for(const s of t){const o=`${s.family}-${s.style}-${s.weight}-${s.unicodeRange}`;Qe.loadedFontsCache.has(o)||(Qe.loadedFontsCache.add(o),n=!1)}if(n)return;let i=!1;const r=this.scene.getNonDeletedElementsMap();for(const s of this.scene.getNonDeletedElements())if(ge(s)){i=!0,qt.delete(s),Tp.clearCache(pt(s));const o=Yn(s,r);o&&qt.delete(o)}i&&this.scene.triggerUpdate()});F(this,"loadSceneFonts",async()=>{const t=this.getSceneFamilies(),n=Qe.getCharsPerFamily(this.scene.getNonDeletedElements());return Qe.loadFontFaces(t,n)});this.scene=t}static get registered(){return Qe._registered?Qe._initialized||(Qe._registered=new Map([...Qe.init().entries(),...Qe._registered.entries()])):Qe._registered=Qe.init(),Qe._registered}get registered(){return Qe.registered}static async generateFontFaceDeclarations(t){const n=Qe.getUniqueFamilies(t),i=Qe.getCharsPerFamily(t),r=n.find(l=>fB(l).includes(Bf));if(r){const l=Qe.getCharacters(i,r);if(vae(l)){const c=zf[Bf];i[c]=new Set(l),n.unshift(zf[Bf])}}const s=Qe.fontFacesStylesGenerator(n,i),o=3,a=await new SA(s,o).all();return Array.from(new Set(a))}static async loadFontFaces(t,n){for(const{fontFaces:o,metadata:a}of Qe.registered.values())if(!a.local)for(const{fontFace:l}of o)window.document.fonts.has(l)||window.document.fonts.add(l);const i=Qe.fontFacesLoader(t,n),r=10;return(await new SA(i,r).all()).flat().filter(Boolean)}static*fontFacesLoader(t,n){for(const[i,r]of t.entries()){const s=pt({fontFamily:r,fontSize:16}),o=Qe.getCharacters(n,r);window.document.fonts.check(s,o)||(yield Bc(async()=>{var a;try{const l=await window.document.fonts.load(s,o);return[i,l]}catch(l){console.error(`Failed to load font "${s}" from urls "${(a=Qe.registered.get(r))==null?void 0:a.fontFaces.map(c=>c.urls)}"`,l)}}))}}static*fontFacesStylesGenerator(t,n){for(const[i,r]of t.entries()){const{fontFaces:s,metadata:o}=Qe.registered.get(r)??{};if(!Array.isArray(s)){console.error(`Couldn't find registered fonts for font-family "${r}"`,Qe.registered);continue}if(!(o!=null&&o.local))for(const[a,l]of s.entries())yield Bc(async()=>{try{const c=Qe.getCharacters(n,r),u=await l.toCSS(c);return u?[i*1e4+a,u]:void 0}catch(c){console.error(`Couldn't transform font-face to css for family "${l.fontFace.family}"`,c)}})}}static register(t,n,...i){const r=tt[t]??zf[t];return this.registered.get(r)||this.registered.set(r,{metadata:n,fontFaces:i.map(({uri:o,descriptors:a})=>new bv(t,o,a))}),this.registered}static init(){const t={registered:new Map},n=(i,...r)=>{const s=tt[i]??zf[i],o=Oh[s]??Oh[tt.Excalifont];Qe.register.call(t,i,o,...r)};return n("Cascadia",...l1e),n("Comic Shanns",...h1e),n("Excalifont",...x1e),n("Helvetica",...C1e),n("Liberation Sans",...M1e),n("Lilita One",...L1e),n("Nunito",...B1e),n("Virgil",...H1e),n(Bf,...N2e),n(o0,...g1e),Qe._initialized=!0,t.registered}static getUniqueFamilies(t){return Array.from(t.reduce((n,i)=>(ge(i)&&n.add(i.fontFamily),n),new Set))}static getCharsPerFamily(t){const n={};for(const i of t)if(ge(i))for(const r of i.originalText)n[i.fontFamily]||(n[i.fontFamily]=new Set),n[i.fontFamily].add(r);return n}static getCharacters(t,n){return t[n]?Array.from(t[n]).join(""):""}static getAllFamilies(){return Array.from(Qe.registered.keys())}};F(Qe,"loadedFontsCache",new Set),F(Qe,"_registered"),F(Qe,"_initialized",!1),F(Qe,"loadElementsFonts",async t=>{const n=Qe.getUniqueFamilies(t),i=Qe.getCharsPerFamily(t);return Qe.loadFontFaces(n,i)});let Ja=Qe;const W$=ue.forwardRef(({className:e,placeholder:t,onChange:n},i)=>N("div",{className:ce("QuickSearch__wrapper",e),children:[bd,g("input",{ref:i,className:"QuickSearch__input",type:"text",placeholder:t,onChange:r=>n(r.target.value.trim().toLowerCase())})]})),K$=({className:e,placeholder:t,children:n})=>{const i=!L.Children.count(n);return g("div",{className:ce("ScrollableList__wrapper",e),role:"menu",children:i?g("div",{className:"empty",children:t}):n})},H6=({children:e,className:t="",style:n,title:i})=>N("div",{className:`dropdown-menu-group ${t}`,style:n,children:[i&&g("p",{className:"dropdown-menu-group-title",children:i}),e]});H6.displayName="DropdownMenuGroup";const Z$=({children:e,...t})=>g("span",{...t,style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",...t.style},children:e}),q$=({textStyle:e,icon:t,shortcut:n,children:i})=>{const r=Nn();return N(fe,{children:[t&&g("div",{className:"dropdown-menu-item__icon",children:t}),g("div",{style:e,className:"dropdown-menu-item__text",children:g(Z$,{children:i})}),n&&r.formFactor!=="phone"&&g("div",{className:"dropdown-menu-item__shortcut",children:n})]})},Q$=ue.createContext({}),J$=(e="",t=!1,n=!1)=>`dropdown-menu-item dropdown-menu-item-base ${e}
  ${t?"dropdown-menu-item--selected":""} ${n?"dropdown-menu-item--hovered":""}`.trim(),eG=(e,t)=>{const n=L.useContext(Q$);return ry(e,i=>{var s;const r=new CustomEvent(te.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(r),r.defaultPrevented||(s=n.onSelect)==null||s.call(n,r)})},Lr=({icon:e,value:t,order:n,children:i,shortcut:r,className:s,hovered:o,selected:a,textStyle:l,onSelect:c,onClick:u,...d})=>{const f=eG(u,c),h=L.useRef(null);return L.useEffect(()=>{var m,p;o&&(n===0?(m=h.current)==null||m.scrollIntoView({block:"end"}):(p=h.current)==null||p.scrollIntoView({block:"nearest"}))},[o,n]),g("button",{...d,ref:h,value:t,onClick:f,className:J$(s,a,o),title:d.title??d["aria-label"],children:g(q$,{textStyle:l,icon:e,shortcut:r,children:i})})};Lr.displayName="DropdownMenuItem";const zm={GREEN:"green",RED:"red",BLUE:"blue"},_T=({type:e=zm.BLUE,children:t})=>{const{theme:n}=Hp(),i={display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace",border:n===ke.LIGHT?"1.5px solid white":"none"};switch(e){case zm.GREEN:Object.assign(i,{backgroundColor:"var(--background-color-badge)",color:"var(--color-badge)"});break;case zm.RED:Object.assign(i,{backgroundColor:"pink",color:"darkred"});break;case zm.BLUE:default:Object.assign(i,{background:"var(--color-promo)",color:"var(--color-surface-lowest)"})}return g("div",{className:"DropDownMenuItemBadge",style:i,children:t})};_T.displayName="DropdownMenuItemBadge";Lr.Badge=_T;const O2e=({event:e,inputRef:t,hoveredFont:n,filteredFonts:i,onClose:r,onSelect:s,onHover:o})=>{var a,l,c;if(!e[V.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===V.F)return(a=t.current)==null||a.focus(),!0;if(e.key===V.ESCAPE)return r(),!0;if(e.key===V.ENTER)return n!=null&&n.value&&s(n.value),!0;if(e.key===V.ARROW_DOWN)return n!=null&&n.next?o(n.next.value):(l=i[0])!=null&&l.value&&o(i[0].value),!0;if(e.key===V.ARROW_UP)return n!=null&&n.prev?o(n.prev.value):(c=i[i.length-1])!=null&&c.value&&o(i[i.length-1].value),!0},P2e=e=>{switch(e){case tt.Excalifont:case tt.Virgil:return Rp;case tt.Nunito:case tt.Helvetica:return av;case tt["Lilita One"]:return hfe;case tt["Comic Shanns"]:case tt.Cascadia:return PV;default:return av}},F2e=ue.memo(({selectedFontFamily:e,hoveredFontFamily:t,onSelect:n,onHover:i,onLeave:r,onOpen:s,onClose:o})=>{const{container:a}=Dr(),l=po(),{fonts:c}=l,{showDeprecatedFonts:u}=zp(),d=ua(),[f,h]=L.useState(""),m=L.useRef(null),p=L.useMemo(()=>Array.from(Ja.registered.entries()).filter(([k,{metadata:P}])=>!P.private&&!P.fallback).map(([k,{metadata:P,fontFaces:D}])=>{var G,B;const j={value:k,icon:P2e(k),text:((B=(G=D[0])==null?void 0:G.fontFace)==null?void 0:B.family)??"Unknown"};return P.deprecated&&Object.assign(j,{deprecated:P.deprecated,badge:{type:zm.RED,placeholder:R("fontList.badge.old")}}),j}).sort((k,P)=>k.text.toLowerCase()>P.text.toLowerCase()?1:-1),[]),U=L.useMemo(()=>new Set(c.getSceneFamilies()),[e]),b=L.useMemo(()=>p.filter(k=>U.has(k.value)),[p,U]),y=L.useMemo(()=>p.filter(k=>!U.has(k.value)&&(u||!k.deprecated)),[p,U,u]),w=L.useMemo(()=>Xse([...b,...y].filter(k=>{var P;return(P=k.text)==null?void 0:P.toLowerCase().includes(f)})),[b,y,f]),v=L.useMemo(()=>{var P;let k;return t?k=w.find(D=>D.value===t):e&&(k=w.find(D=>D.value===e)),!k&&f&&((P=w[0])!=null&&P.value?i(w[0].value):r()),k},[t,e,f,w,i,r]),I=L.useCallback(k=>{let P=null;if(l.state.editingTextElement){const D=document.querySelector(".excalidraw-wysiwyg");D&&(P={start:D.selectionStart,end:D.selectionEnd})}n(k),l.state.editingTextElement&&P&&setTimeout(()=>{const D=document.querySelector(".excalidraw-wysiwyg");D&&P&&(D.focus(),D.selectionStart=P.start,D.selectionEnd=P.end)},0)},[n,l.state.editingTextElement]),x=L.useCallback(k=>{O2e({event:k,inputRef:m,hoveredFont:v,filteredFonts:w,onSelect:I,onHover:i,onClose:o})&&(k.preventDefault(),k.stopPropagation())},[v,w,I,i,o]);L.useEffect(()=>(s(),()=>{o()}),[]);const _=L.useMemo(()=>w.filter(k=>U.has(k.value)),[w,U]),T=L.useMemo(()=>w.filter(k=>!U.has(k.value)),[w,U]),A=(k,P)=>N(Lr,{icon:k.icon,value:k.value,order:P,textStyle:{fontFamily:Up({fontFamily:k.value})},hovered:k.value===(v==null?void 0:v.value),selected:k.value===e,tabIndex:k.value===e?0:-1,onClick:D=>{I(Number(D.currentTarget.value))},onMouseMove:()=>{(v==null?void 0:v.value)!==k.value&&i(k.value)},children:[k.text,k.badge&&g(_T,{type:k.badge.type,children:k.badge.placeholder})]},k.value),C=[];return _.length&&C.push(g(H6,{title:R("fontList.sceneFonts"),children:_.map(A)},"group_1")),T.length&&C.push(g(H6,{title:R("fontList.availableFonts"),children:T.map((k,P)=>A(k,P+_.length))},"group_2")),N(Sg,{className:"properties-content",container:a,style:{width:"15rem"},onClose:()=>{o(),l.state.editingTextElement&&setTimeout(()=>{const k=document.querySelector(".excalidraw-wysiwyg");k&&k.focus()},0)},onPointerLeave:r,onKeyDown:x,preventAutoFocusOnTouch:!!l.state.editingTextElement,children:[d==="full"&&g(W$,{ref:m,placeholder:R("quickSearch.placeholder"),onChange:sl(h,20)}),g(K$,{className:"dropdown-menu fonts manual-hover",placeholder:R("fontList.empty"),children:C.length?C:null})]})},(e,t)=>e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),B2e=({selectedFontFamily:e,isOpened:t=!1,compactMode:n=!1})=>{const i=xn(),r=n?{...mp,width:"2rem",height:"2rem"}:{};return g(Il,{asChild:!0,children:g("div",{"data-openpopup":"fontFamily",className:"properties-trigger",children:g(iT,{standalone:!0,icon:gh,title:R("labels.showFonts"),className:"properties-trigger",testId:"font-family-show-fonts",active:t,onClick:()=>{i(s=>({openPopup:s.openPopup==="fontFamily"?null:s.openPopup}))},style:{border:"none",...r}})})})},tG=[{value:tt.Excalifont,icon:Rp,text:R("labels.handDrawn"),testId:"font-family-hand-drawn"},{value:tt.Nunito,icon:av,text:R("labels.normal"),testId:"font-family-normal"},{value:tt["Comic Shanns"],icon:PV,text:R("labels.code"),testId:"font-family-code"}];new Set(tG.map(e=>e.value));const z2e=ue.memo(({isOpened:e,selectedFontFamily:t,hoveredFontFamily:n,onSelect:i,onHover:r,onLeave:s,onPopupChange:o,compactMode:a=!1})=>{const l=L.useMemo(()=>tG,[]),c=L.useCallback(u=>{u&&i(u)},[i]);return N("div",{role:"dialog","aria-modal":"true",className:ce("FontPicker__container",{"FontPicker__container--compact":a}),children:[!a&&g("div",{className:"buttonList",children:g(la,{type:"button",options:l,value:t,onClick:c})}),!a&&g(G$,{}),N(Tl,{open:e,onOpenChange:o,children:[g(B2e,{selectedFontFamily:t,isOpened:e,compactMode:a}),e&&g(F2e,{selectedFontFamily:t,hoveredFontFamily:n,onSelect:c,onHover:r,onLeave:s,onOpen:()=>o(!0),onClose:()=>o(!1)})]})]})},(e,t)=>e.isOpened===t.isOpened&&e.selectedFontFamily===t.selectedFontFamily&&e.hoveredFontFamily===t.hoveredFontFamily),Ly=({className:e,icon:t,size:n="1em"})=>g("span",{className:e,style:{width:n,height:"100%",margin:"0 0.5ex 0 0.5ex",display:"inline-flex",lineHeight:0,verticalAlign:"middle",flex:"0 0 auto"},children:t}),yv=({label:e,open:t,openTrigger:n,children:i,className:r,showCollapsedIcon:s=!0})=>N(fe,{children:[N("div",{style:{cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},className:r,onClick:n,children:[e,s&&g(Ly,{icon:t?Yfe:$V})]}),t&&g("div",{style:{display:"flex",flexDirection:"column"},children:i})]}),H2e=Wt(!1);function V2e({options:e,value:t,label:n,onChange:i,onClose:r,numberOfOptionsToAlwaysShow:s=e.length}){const o=Nn(),{container:a}=Dr(),l=p=>{const U=e.find(b=>b.keyBinding===p.key.toLowerCase());if(!(p.metaKey||p.altKey||p.ctrlKey)&&U)i(U.value),p.preventDefault();else if(p.key===V.TAB){const b=e.findIndex(w=>w.value===t),y=p.shiftKey?(e.length+b-1)%e.length:(b+1)%e.length;i(e[y].value)}else if(Om(p.key)){const b=b0().rtl,y=e.findIndex(w=>w.value===t);if(y!==-1){const w=e.length;let v=y;switch(p.key){case(b?V.ARROW_LEFT:V.ARROW_RIGHT):v=(y+1)%w;break;case(b?V.ARROW_RIGHT:V.ARROW_LEFT):v=(w+y-1)%w;break;case V.ARROW_DOWN:{v=(y+(s??1))%w;break}case V.ARROW_UP:{v=(w+y-(s??1))%w;break}}i(e[v].value)}p.preventDefault()}else(p.key===V.ESCAPE||p.key===V.ENTER)&&(p.preventDefault(),r());p.nativeEvent.stopImmediatePropagation(),p.stopPropagation()},[c,u]=dn(H2e),d=ue.useMemo(()=>e.slice(0,s),[e,s]),f=ue.useMemo(()=>e.slice(s),[e,s]);L.useEffect(()=>{d.some(p=>p.value===t)||u(!0)},[t,d,u]);const h=p=>g("div",{className:"picker-content",children:p.map((U,b)=>N("button",{type:"button",className:ce("picker-option",{active:t===U.value}),onClick:y=>{i(U.value)},title:`${U.text} ${U.keyBinding&&` ${U.keyBinding.toUpperCase()}`}`,"aria-label":U.text||"none","aria-keyshortcuts":U.keyBinding||void 0,ref:y=>{t===U.value&&setTimeout(()=>{y==null||y.focus()},0)},children:[U.icon,U.keyBinding&&g("span",{className:"picker-keybinding",children:U.keyBinding})]},U.text))}),m=o.formFactor==="phone";return g(xy,{side:m?"right":"bottom",align:"start",sideOffset:m?8:12,style:{zIndex:"var(--zIndex-ui-styles-popup)"},onKeyDown:l,collisionBoundary:a??void 0,children:N("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":n,children:[h(d),f.length>0&&g(yv,{label:R("labels.more_options"),open:c,openTrigger:()=>{u(p=>!p)},className:"picker-collapsible",children:h(f)})]})})}function NR({value:e,label:t,options:n,onChange:i,group:r="",numberOfOptionsToAlwaysShow:s}){var c;const[o,a]=ue.useState(!1),l=ue.useRef(null);return g("div",{children:N(Tl,{open:o,onOpenChange:u=>a(u),children:[g(Il,{name:r,type:"button","aria-label":t,onClick:()=>a(!o),ref:l,className:o?"active":"",children:(c=n.find(u=>u.value===e))==null?void 0:c.icon}),o&&g(V2e,{options:n,value:e,label:t,onChange:i,onClose:()=>{a(!1)},numberOfOptionsToAlwaysShow:s})]})})}const $2e=({updateData:e,app:t,testId:n})=>{const i=ue.useRef(null),r=ue.useRef(null),s=t.scene.getSelectedElements(t.state);let o=!0;const a=s.at(0),c=s.reduce((u,d)=>(u!=null&&u!==d.opacity&&(o=!1),u==null||u>d.opacity?d.opacity:u),(a==null?void 0:a.opacity)??null)??t.state.currentItemOpacity;return L.useEffect(()=>{if(i.current&&r.current){const u=i.current,d=r.current,f=u.offsetWidth,h=15,m=c/100*(f-h)+h/2;d.style.left=`${m}px`,u.style.background=`linear-gradient(to right, var(--color-slider-track) 0%, var(--color-slider-track) ${c}%, var(--button-bg) ${c}%, var(--button-bg) 100%)`}},[c]),N("label",{className:"control-label",children:[R("labels.opacity"),N("div",{className:"range-wrapper",children:[g("input",{style:{"--color-slider-track":o?void 0:"var(--button-bg)"},ref:i,type:"range",min:"0",max:"100",step:"10",onChange:u=>{e(+u.target.value)},value:c,className:"range-input","data-testid":n}),g("div",{className:"value-bubble",ref:r,children:c!==0?c:null}),g("div",{className:"zero-label",children:"0"})]})]})},nG=.1,Cg=e=>{const t=p1(e.editorInterface);return{stylesPanelMode:t,isCompact:t!=="full",isMobile:t==="mobile"}},pr=(e,t,n,i=!1)=>{const r=ve(Ge(e,t,{includeBoundTextElement:i}));return e.map(s=>{var o;return r.get(s.id)||s.id===((o=t.editingTextElement)==null?void 0:o.id)?n(s):s})},Ur=function(e,t,n,i,r){const s=t.state.editingTextElement,o=Yt(e);let a=null;if(s&&(a=n(s)),!a)if(Wn(o,t.state)){const c=t.scene.getSelectedElements(t.state),u=i===!0?c:c.filter(d=>i(d));a=XB(u,n)??(typeof r=="function"?r(!0):r)}else a=typeof r=="function"?r(!1):r;return a},G2e=(e,t,n)=>Lt(t)||!t.autoResize?t:n.mutateElement(t,{x:e.textAlign==="left"?e.x:e.x+(e.width-t.width)/(e.textAlign==="center"?2:1),y:e.y+(e.height-t.height)/2}),TT=(e,t,n,i,r)=>{const s=new Set,o=pr(e,t,a=>{if(ge(a)){const l=i(a);s.add(l);let c=Ie(a,{fontSize:l});return Qi(c,n.scene.getContainerElement(a),n.scene),c=G2e(a,c,n.scene),c}return a},!0);return Ge(e,t,{includeBoundTextElement:!0}).forEach(a=>{ge(a)&&fr(a,n.scene)}),{elements:o,appState:{...t,currentItemFontSize:s.size===1?[...s][0]:r??t.currentItemFontSize},captureUpdate:K.IMMEDIATELY}};de({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(e,t,n)=>({...n.currentItemStrokeColor&&{elements:pr(e,t,i=>F4(i.type)?Ie(i,{strokeColor:n.currentItemStrokeColor}):i,!0)},appState:{...t,...n},captureUpdate:n.currentItemStrokeColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>{const{stylesPanelMode:s}=Cg(i);return N(fe,{children:[s==="full"&&g("h3",{"aria-hidden":"true",children:R("labels.stroke")}),g(vT,{topPicks:rB,palette:yre,type:"elementStroke",label:R("labels.stroke"),color:Ur(e,i,o=>o.strokeColor,!0,o=>o?null:t.currentItemStrokeColor),onChange:o=>n({currentItemStrokeColor:o}),elements:e,appState:t,updateData:n})]})}});de({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(e,t,n,i)=>{if(!n.currentItemBackgroundColor)return{appState:{...t,...n},captureUpdate:K.EVENTUALLY};let r;const s=i.scene.getSelectedElements(t);if(!Sr(n.currentItemBackgroundColor)&&s.every(a=>nn(a)&&oz(a.points))){const a=ve(s);r=e.map(l=>a.has(l.id)&&nn(l)?Ie(l,{backgroundColor:n.currentItemBackgroundColor,...I_(l,!0)}):l)}else r=pr(e,t,a=>Ie(a,{backgroundColor:n.currentItemBackgroundColor}));return{elements:r,appState:{...t,...n},captureUpdate:K.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>{const{stylesPanelMode:s}=Cg(i);return N(fe,{children:[s==="full"&&g("h3",{"aria-hidden":"true",children:R("labels.background")}),g(vT,{topPicks:sB,palette:Ere,type:"elementBackground",label:R("labels.background"),color:Ur(e,i,o=>o.backgroundColor,!0,o=>o?null:t.currentItemBackgroundColor),onChange:o=>n({currentItemBackgroundColor:o}),elements:e,appState:t,updateData:n})]})}});de({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(e,t,n,i)=>(Je("element","changeFillStyle",`${n} (${i.editorInterface.formFactor==="phone"?"mobile":"desktop"})`),{elements:pr(e,t,r=>Ie(r,{fillStyle:n})),appState:{...t,currentItemFillStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=Ge(e,t),s=r.length>0&&r.every(o=>o.fillStyle==="zigzag");return N("fieldset",{children:[g("legend",{children:R("labels.fill")}),g("div",{className:"buttonList",children:g(la,{type:"button",options:[{value:"hachure",text:`${R(s?"labels.zigzag":"labels.hachure")} (${J("Alt-Click")})`,icon:s?Bde:zde,active:s?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:R("labels.crossHatch"),icon:Hde,testId:"fill-cross-hatch"},{value:"solid",text:R("labels.solid"),icon:Vde,testId:"fill-solid"}],value:Ur(e,i,o=>o.fillStyle,o=>o.hasOwnProperty("fillStyle"),o=>o?null:t.currentItemFillStyle),onClick:(o,a)=>{const l=a.altKey&&o==="hachure"&&r.every(c=>c.fillStyle==="hachure")?"zigzag":o;n(l)}})})]})}});de({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(e,t,n)=>({elements:pr(e,t,i=>Ie(i,{strokeWidth:n})),appState:{...t,currentItemStrokeWidth:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>N("fieldset",{children:[g("legend",{children:R("labels.strokeWidth")}),g("div",{className:"buttonList",children:g(la,{group:"stroke-width",options:[{value:M8.thin,text:R("labels.thin"),icon:OV,testId:"strokeWidth-thin"},{value:M8.bold,text:R("labels.bold"),icon:$de,testId:"strokeWidth-bold"},{value:M8.extraBold,text:R("labels.extraBold"),icon:Gde,testId:"strokeWidth-extraBold"}],value:Ur(e,i,s=>s.strokeWidth,s=>s.hasOwnProperty("strokeWidth"),s=>s?null:t.currentItemStrokeWidth),onChange:s=>n(s)})})]})});de({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(e,t,n)=>({elements:pr(e,t,i=>Ie(i,{seed:Ps(),roughness:n})),appState:{...t,currentItemRoughness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>N("fieldset",{children:[g("legend",{children:R("labels.sloppiness")}),g("div",{className:"buttonList",children:g(la,{group:"sloppiness",options:[{value:0,text:R("labels.architect"),icon:Yde},{value:1,text:R("labels.artist"),icon:Wde},{value:2,text:R("labels.cartoonist"),icon:Kde}],value:Ur(e,i,s=>s.roughness,s=>s.hasOwnProperty("roughness"),s=>s?null:t.currentItemRoughness),onChange:s=>n(s)})})]})});de({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(e,t,n)=>({elements:pr(e,t,i=>Ie(i,{strokeStyle:n})),appState:{...t,currentItemStrokeStyle:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>N("fieldset",{children:[g("legend",{children:R("labels.strokeStyle")}),g("div",{className:"buttonList",children:g(la,{group:"strokeStyle",options:[{value:"solid",text:R("labels.strokeStyle_solid"),icon:OV},{value:"dashed",text:R("labels.strokeStyle_dashed"),icon:Xde},{value:"dotted",text:R("labels.strokeStyle_dotted"),icon:jde}],value:Ur(e,i,s=>s.strokeStyle,s=>s.hasOwnProperty("strokeStyle"),s=>s?null:t.currentItemStrokeStyle),onChange:s=>n(s)})})]})});de({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(e,t,n)=>({elements:pr(e,t,i=>Ie(i,{opacity:n}),!0),appState:{...t,currentItemOpacity:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({app:e,updateData:t})=>g($2e,{updateData:t,app:e,testId:"opacity"})});de({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(e,t,n,i)=>TT(e,t,i,()=>n,n),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>{const{isCompact:s}=Cg(i);return N("fieldset",{children:[g("legend",{children:R("labels.fontSize")}),g("div",{className:"buttonList",children:g(la,{group:"font-size",options:[{value:16,text:R("labels.small"),icon:cfe,testId:"fontSize-small"},{value:20,text:R("labels.medium"),icon:ufe,testId:"fontSize-medium"},{value:28,text:R("labels.large"),icon:dfe,testId:"fontSize-large"},{value:36,text:R("labels.veryLarge"),icon:ffe,testId:"fontSize-veryLarge"}],value:Ur(e,i,o=>{if(ge(o))return o.fontSize;const a=Le(o,i.scene.getNonDeletedElementsMap());return a?a.fontSize:null},o=>ge(o)||Le(o,i.scene.getNonDeletedElementsMap())!==null,o=>o?null:t.currentItemFontSize||_l),onChange:o=>{Ry(()=>n(o),s,!!t.editingTextElement,r==null?void 0:r.onPreventClose)}})})]})}});const OR=de({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:vy,trackEvent:!1,perform:(e,t,n,i)=>TT(e,t,i,r=>Math.round(1/(1+nG)*r.fontSize)),keyTest:e=>e[V.CTRL_OR_CMD]&&e.shiftKey&&(e.key===V.CHEVRON_LEFT||e.key===V.COMMA)}),PR=de({name:"increaseFontSize",label:"labels.increaseFontSize",icon:vy,trackEvent:!1,perform:(e,t,n,i)=>TT(e,t,i,r=>Math.round(r.fontSize*(1+nG))),keyTest:e=>e[V.CTRL_OR_CMD]&&e.shiftKey&&(e.key===V.CHEVRON_RIGHT||e.key===V.PERIOD)});de({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(e,t,n,i)=>{var m;const{cachedElements:r,resetAll:s,resetContainers:o,...a}=n;if(s)return{elements:pr(e,t,U=>{const b=r==null?void 0:r.get(U.id);return b?Ie(U,{...b}):U},!0),appState:{...t,...a},captureUpdate:K.NEVER};const{currentItemFontFamily:l,currentHoveredFontFamily:c}=n;let u=K.EVENTUALLY,d,f=!1;if(l)d=l,u=K.IMMEDIATELY;else if(c){d=c,u=K.EVENTUALLY;const p=Ge(e,t,{includeBoundTextElement:!0}).filter(U=>ge(U));if(p.length>200)f=!0;else{let U=0,b=0;for(;U<p.length&&b<5e3;){const y=p[U];b+=(y==null?void 0:y.originalText.length)||0,U++}b>5e3&&(f=!0)}}const h={appState:{...t,...a},captureUpdate:u};if(d&&!f){const p=new Map;let U=new Set,b=!1;const y=Array.from(Ja.loadedFontsCache.values()),w=(m=Object.entries(tt).find(([x,_])=>_===d))==null?void 0:m[0];c&&w&&y.some(x=>x.startsWith(w))&&(b=!0),Object.assign(h,{elements:pr(e,t,x=>{if(ge(x)&&(x.fontFamily!==d||l)){const _=Ie(x,{fontFamily:d,lineHeight:Fc(d)}),T=(r==null?void 0:r.get(x.containerId||""))||{},A=i.scene.getContainerElement(x);return o&&A&&T&&i.scene.mutateElement(A,{...T}),b||(U=new Set([...U,...Array.from(_.originalText)])),p.set(_,A),_}return x},!0)});const v=`10px ${Up({fontFamily:d})}`,I=Array.from(U.values()).join();if(b||window.document.fonts.check(v,I))for(const[x,_]of p)Qi(x,_,i.scene);else window.document.fonts.load(v,I).then(x=>{for(const[_,T]of p){const A=i.scene.getElement(_.id),C=T?i.scene.getElement(T.id):null;A&&Qi(A,C,i.scene)}i.fonts.onLoaded(x)})}return h},PanelComponent:({elements:e,appState:t,app:n,updateData:i})=>{const r=L.useRef(new Map),s=L.useRef(null),[o,a]=L.useState({}),l=L.useRef(!0),{stylesPanelMode:c,isCompact:u}=Cg(n),d=L.useMemo(()=>{var h;const f=(m,p)=>Ur(m,n,U=>{if(ge(U))return U.fontFamily;const b=Le(U,p);return b?b.fontFamily:null},U=>ge(U)||Le(U,p)!==null,U=>U?null:t.currentItemFontFamily||nu);return o.openPopup==="fontFamily"&&t.openPopup==="fontFamily"?f(Array.from(((h=r.current)==null?void 0:h.values())??[]),r.current):!o.openPopup&&t.openPopup!=="fontFamily"?f(e,n.scene.getNonDeletedElementsMap()):s.current},[o.openPopup,t,e,n]);return L.useEffect(()=>{s.current=d},[d]),L.useEffect(()=>{Object.keys(o).length&&(i(o),a({}))},[o]),L.useEffect(()=>(l.current=!1,()=>{l.current=!0}),[]),N(fe,{children:[c==="full"&&g("legend",{children:R("labels.fontFamily")}),g(z2e,{isOpened:t.openPopup==="fontFamily",selectedFontFamily:d,hoveredFontFamily:t.currentHoveredFontFamily,compactMode:c!=="full",onSelect:f=>{Ry(()=>{a({openPopup:null,currentHoveredFontFamily:null,currentItemFontFamily:f}),r.current.clear()},u,!!t.editingTextElement)},onHover:f=>{a({currentHoveredFontFamily:f,cachedElements:new Map(r.current),resetContainers:!0})},onLeave:()=>{a({currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0})},onPopupChange:f=>{if(f){r.current.clear();const{editingTextElement:h}=t;if((h==null?void 0:h.type)==="text"){const m=n.scene.getElement(h.id);r.current.set(h.id,Ie(m||h,{},!0))}else{const m=Ge(e,t,{includeBoundTextElement:!0});for(const p of m)r.current.set(p.id,Ie(p,{},!0))}a({...o,openPopup:"fontFamily"})}else{const h={currentHoveredFontFamily:null,cachedElements:new Map(r.current),resetAll:!0};a({...h}),r.current.clear(),u&&t.editingTextElement&&yT(null)}}})]})}});de({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(e,t,n,i)=>({elements:pr(e,t,r=>{if(ge(r)){const s=Ie(r,{textAlign:n});return Qi(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t,currentItemTextAlign:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>{const s=i.scene.getNonDeletedElementsMap(),{isCompact:o}=Cg(i);return N("fieldset",{children:[g("legend",{children:R("labels.textAlign")}),g("div",{className:"buttonList",children:g(la,{group:"text-align",options:[{value:"left",text:R("labels.left"),icon:gfe,testId:"align-left"},{value:"center",text:R("labels.center"),icon:mfe,testId:"align-horizontal-center"},{value:"right",text:R("labels.right"),icon:pfe,testId:"align-right"}],value:Ur(e,i,a=>{if(ge(a))return a.textAlign;const l=Le(a,s);return l?l.textAlign:null},a=>ge(a)||Le(a,s)!==null,a=>a?null:t.currentItemTextAlign),onChange:a=>{Ry(()=>n(a),o,!!t.editingTextElement,r==null?void 0:r.onPreventClose)}})})]})}});de({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:pr(e,t,r=>{if(ge(r)){const s=Ie(r,{verticalAlign:n});return Qi(s,i.scene.getContainerElement(r),i.scene),s}return r},!0),appState:{...t},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,data:r})=>{const{isCompact:s}=Cg(i);return g("fieldset",{children:g("div",{className:"buttonList",children:g(la,{group:"text-align",options:[{value:Wr.TOP,text:R("labels.alignTop"),icon:g(Ufe,{theme:t.theme}),testId:"align-top"},{value:Wr.MIDDLE,text:R("labels.centerVertically"),icon:g(yfe,{theme:t.theme}),testId:"align-middle"},{value:Wr.BOTTOM,text:R("labels.alignBottom"),icon:g(bfe,{theme:t.theme}),testId:"align-bottom"}],value:Ur(e,i,o=>{if(ge(o)&&o.containerId)return o.verticalAlign;const a=Le(o,i.scene.getNonDeletedElementsMap());return a?a.verticalAlign:null},o=>ge(o)||Le(o,i.scene.getNonDeletedElementsMap())!==null,o=>o?null:Wr.MIDDLE),onChange:o=>{Ry(()=>n(o),s,!!t.editingTextElement,r==null?void 0:r.onPreventClose)}})})})}});de({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(e,t,n)=>({elements:pr(e,t,i=>pe(i)?i:Ie(i,{roundness:n==="round"?{type:Hd(i.type)?yn.ADAPTIVE_RADIUS:yn.PROPORTIONAL_RADIUS}:null})),appState:{...t,currentItemRoundness:n},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i,renderAction:r})=>{const o=uy(Yt(e),t).some(a=>{var l;return((l=a.roundness)==null?void 0:l.type)===yn.LEGACY});return N("fieldset",{children:[g("legend",{children:R("labels.edges")}),N("div",{className:"buttonList",children:[g(la,{group:"edges",options:[{value:"sharp",text:R("labels.sharp"),icon:Zde},{value:"round",text:R("labels.round"),icon:qde}],value:Ur(e,i,a=>o?null:a.roundness?"round":"sharp",a=>!Ce(a)&&a.hasOwnProperty("roundness"),a=>a?null:t.currentItemRoundness),onChange:a=>n(a)}),r("togglePolygon")]})]})}});const FR=e=>[{value:null,text:R("labels.arrowhead_none"),keyBinding:"q",icon:Qde},{value:"arrow",text:R("labels.arrowhead_arrow"),keyBinding:"w",icon:g(ov,{flip:e})},{value:"triangle",text:R("labels.arrowhead_triangle"),icon:g(nfe,{flip:e}),keyBinding:"e"},{value:"triangle_outline",text:R("labels.arrowhead_triangle_outline"),icon:g(ife,{flip:e}),keyBinding:"r"},{value:"circle",text:R("labels.arrowhead_circle"),keyBinding:"a",icon:g(Jde,{flip:e})},{value:"circle_outline",text:R("labels.arrowhead_circle_outline"),keyBinding:"s",icon:g(efe,{flip:e})},{value:"diamond",text:R("labels.arrowhead_diamond"),icon:g(rfe,{flip:e}),keyBinding:"d"},{value:"diamond_outline",text:R("labels.arrowhead_diamond_outline"),icon:g(sfe,{flip:e}),keyBinding:"f"},{value:"bar",text:R("labels.arrowhead_bar"),keyBinding:"z",icon:g(tfe,{flip:e})},{value:"crowfoot_one",text:R("labels.arrowhead_crowfoot_one"),icon:g(afe,{flip:e}),keyBinding:"x"},{value:"crowfoot_many",text:R("labels.arrowhead_crowfoot_many"),icon:g(ofe,{flip:e}),keyBinding:"c"},{value:"crowfoot_one_or_many",text:R("labels.arrowhead_crowfoot_one_or_many"),icon:g(lfe,{flip:e}),keyBinding:"v"}];de({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(e,t,n)=>({elements:pr(e,t,i=>{if(xe(i)){const{position:r,type:s}=n;if(r==="start")return Ie(i,{startArrowhead:s});if(r==="end")return Ie(i,{endArrowhead:s})}return i}),appState:{...t,[n.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:n.type},captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>{const r=b0().rtl;return N("fieldset",{children:[g("legend",{children:R("labels.arrowheads")}),N("div",{className:"iconSelectList buttonList",children:[g(NR,{label:"arrowhead_start",options:FR(!r),value:Ur(e,i,s=>xe(s)&&T6(s.type)?s.startArrowhead:t.currentItemStartArrowhead,!0,t.currentItemStartArrowhead),onChange:s=>n({position:"start",type:s}),numberOfOptionsToAlwaysShow:4}),g(NR,{label:"arrowhead_end",group:"arrowheads",options:FR(!!r),value:Ur(e,i,s=>xe(s)&&T6(s.type)?s.endArrowhead:t.currentItemEndArrowhead,!0,t.currentItemEndArrowhead),onChange:s=>n({position:"end",type:s}),numberOfOptionsToAlwaysShow:4})]})]})}});de({name:"changeArrowProperties",label:"Change arrow properties",trackEvent:!1,perform:(e,t,n,i)=>!1,PanelComponent:({elements:e,appState:t,updateData:n,app:i,renderAction:r})=>N("div",{className:"selected-shape-actions",children:[r("changeArrowhead"),r("changeArrowType")]})});de({name:"changeArrowType",label:"Change arrow types",trackEvent:!1,perform:(e,t,n,i)=>{var a;const r=pr(e,t,l=>{if(!Ce(l))return l;let c=Ie(l,{roundness:n===fi.round?{type:yn.PROPORTIONAL_RADIUS}:null,elbowed:n===fi.elbow,points:n===fi.elbow||l.elbowed?[l.points[0],l.points[l.points.length-1]]:l.points});if(pe(c)){c.fixedSegments=null;const u=i.scene.getNonDeletedElementsMap();i.dismissLinearEditor();const d=Ue.getPointAtIndexGlobalCoordinates(c,0,u),f=Ue.getPointAtIndexGlobalCoordinates(c,-1,u),h=c.startBinding&&u.get(c.startBinding.elementId),m=c.endBinding&&u.get(c.endBinding.elementId),p=h&&c.startBinding?{...c.startBinding,...m6(c,h,"start",u)}:null,U=m&&c.endBinding?{...c.endBinding,...m6(c,m,"end",u)}:null;c={...c,startBinding:p,endBinding:U,...Eg(c,u,{points:[d,f].map(b=>S(b[0]-c.x,b[1]-c.y)),startBinding:p,endBinding:U,fixedSegments:null})}}else{const u=i.scene.getNonDeletedElementsMap();if(c.startBinding){const d=u.get(c.startBinding.elementId);d&&ea(c,d,"start",i.scene)}if(c.endBinding){const d=u.get(c.endBinding.elementId);d&&ea(c,d,"end",i.scene)}}return c}),s={...t,currentItemArrowType:n},o=(a=t.selectedLinearElement)==null?void 0:a.elementId;if(o){const l=r.find(c=>c.id===o);l&&(s.selectedLinearElement=new Ue(l,ve(e)))}return{elements:r,appState:s,captureUpdate:K.IMMEDIATELY}},PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>N("fieldset",{children:[g("legend",{children:R("labels.arrowtypes")}),g("div",{className:"buttonList",children:g(la,{group:"arrowtypes",options:[{value:fi.sharp,text:R("labels.arrowtype_sharp"),icon:eT,testId:"sharp-arrow"},{value:fi.round,text:R("labels.arrowtype_round"),icon:nT,testId:"round-arrow"},{value:fi.elbow,text:R("labels.arrowtype_elbowed"),icon:tT,testId:"elbow-arrow"}],value:Ur(e,i,r=>Ce(r)?r.elbowed?fi.elbow:r.roundness?fi.round:fi.sharp:null,r=>Ce(r),r=>r?null:t.currentItemArrowType),onChange:r=>n(r)})})]})});const X2e=B9.includes(devicePixelRatio)?devicePixelRatio:1,ia=()=>({showWelcomeScreen:!1,theme:ke.LIGHT,collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:mn.backgroundColor,currentItemEndArrowhead:"arrow",currentItemFillStyle:mn.fillStyle,currentItemFontFamily:nu,currentItemFontSize:_l,currentItemOpacity:mn.opacity,currentItemRoughness:mn.roughness,currentItemStartArrowhead:null,currentItemStrokeColor:mn.strokeColor,currentItemRoundness:"round",currentItemArrowType:fi.round,currentItemStrokeStyle:mn.strokeStyle,currentItemStrokeWidth:mn.strokeWidth,currentItemTextAlign:gp,currentHoveredFontFamily:null,cursorButton:"up",activeEmbeddable:null,newElement:null,editingTextElement:null,editingGroupId:null,activeTool:{type:"selection",customType:null,locked:mn.locked,fromSelection:!1,lastActiveTool:null},preferredSelectionTool:{type:"selection",initialized:!1},penMode:!1,penDetected:!1,errorMessage:null,exportBackground:!0,exportScale:X2e,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:Kb,gridStep:gB,gridModeEnabled:!1,isBindingEnabled:!0,defaultSidebarDockedPreference:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:null,contextMenu:null,openMenu:null,openPopup:null,openSidebar:null,openDialog:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},hoveredElementIds:{},selectedGroupIds:{},selectedElementsAreBeingDragged:!1,selectionElement:null,shouldCacheIgnoreZoom:!1,stats:{open:!1,panels:Hf.generalStats|Hf.elementProperties},startBoundElement:null,suggestedBindings:[],frameRendering:{enabled:!0,clip:!0,name:!0,outline:!0},frameToHighlight:null,editingFrame:null,elementsToHighlight:null,toast:null,viewBackgroundColor:je.white,zenModeEnabled:!1,zoom:{value:1},viewModeEnabled:!1,showHyperlinkPopup:!1,selectedLinearElement:null,snapLines:[],originSnapOffset:{x:0,y:0},objectsSnapModeEnabled:!1,userToFollow:null,followedBy:new Set,isCropping:!1,croppingElementId:null,searchMatches:null,lockedMultiSelections:{},activeLockedId:null}),j2e=(e=>e)({showWelcomeScreen:{browser:!0,export:!1,server:!1},theme:{browser:!0,export:!1,server:!1},collaborators:{browser:!1,export:!1,server:!1},currentChartType:{browser:!0,export:!1,server:!1},currentItemBackgroundColor:{browser:!0,export:!1,server:!1},currentItemEndArrowhead:{browser:!0,export:!1,server:!1},currentItemFillStyle:{browser:!0,export:!1,server:!1},currentItemFontFamily:{browser:!0,export:!1,server:!1},currentItemFontSize:{browser:!0,export:!1,server:!1},currentItemRoundness:{browser:!0,export:!1,server:!1},currentItemArrowType:{browser:!0,export:!1,server:!1},currentItemOpacity:{browser:!0,export:!1,server:!1},currentItemRoughness:{browser:!0,export:!1,server:!1},currentItemStartArrowhead:{browser:!0,export:!1,server:!1},currentItemStrokeColor:{browser:!0,export:!1,server:!1},currentItemStrokeStyle:{browser:!0,export:!1,server:!1},currentItemStrokeWidth:{browser:!0,export:!1,server:!1},currentItemTextAlign:{browser:!0,export:!1,server:!1},currentHoveredFontFamily:{browser:!1,export:!1,server:!1},cursorButton:{browser:!0,export:!1,server:!1},activeEmbeddable:{browser:!1,export:!1,server:!1},newElement:{browser:!1,export:!1,server:!1},editingTextElement:{browser:!1,export:!1,server:!1},editingGroupId:{browser:!0,export:!1,server:!1},activeTool:{browser:!0,export:!1,server:!1},preferredSelectionTool:{browser:!0,export:!1,server:!1},penMode:{browser:!0,export:!1,server:!1},penDetected:{browser:!0,export:!1,server:!1},errorMessage:{browser:!1,export:!1,server:!1},exportBackground:{browser:!0,export:!1,server:!1},exportEmbedScene:{browser:!0,export:!1,server:!1},exportScale:{browser:!0,export:!1,server:!1},exportWithDarkMode:{browser:!0,export:!1,server:!1},fileHandle:{browser:!1,export:!1,server:!1},gridSize:{browser:!0,export:!0,server:!0},gridStep:{browser:!0,export:!0,server:!0},gridModeEnabled:{browser:!0,export:!0,server:!0},height:{browser:!1,export:!1,server:!1},isBindingEnabled:{browser:!1,export:!1,server:!1},defaultSidebarDockedPreference:{browser:!0,export:!1,server:!1},isLoading:{browser:!1,export:!1,server:!1},isResizing:{browser:!1,export:!1,server:!1},isRotating:{browser:!1,export:!1,server:!1},lastPointerDownWith:{browser:!0,export:!1,server:!1},multiElement:{browser:!1,export:!1,server:!1},name:{browser:!0,export:!1,server:!1},offsetLeft:{browser:!1,export:!1,server:!1},offsetTop:{browser:!1,export:!1,server:!1},contextMenu:{browser:!1,export:!1,server:!1},openMenu:{browser:!0,export:!1,server:!1},openPopup:{browser:!1,export:!1,server:!1},openSidebar:{browser:!0,export:!1,server:!1},openDialog:{browser:!1,export:!1,server:!1},pasteDialog:{browser:!1,export:!1,server:!1},previousSelectedElementIds:{browser:!0,export:!1,server:!1},resizingElement:{browser:!1,export:!1,server:!1},scrolledOutside:{browser:!0,export:!1,server:!1},scrollX:{browser:!0,export:!1,server:!1},scrollY:{browser:!0,export:!1,server:!1},selectedElementIds:{browser:!0,export:!1,server:!1},hoveredElementIds:{browser:!1,export:!1,server:!1},selectedGroupIds:{browser:!0,export:!1,server:!1},selectedElementsAreBeingDragged:{browser:!1,export:!1,server:!1},selectionElement:{browser:!1,export:!1,server:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1,server:!1},stats:{browser:!0,export:!1,server:!1},startBoundElement:{browser:!1,export:!1,server:!1},suggestedBindings:{browser:!1,export:!1,server:!1},frameRendering:{browser:!1,export:!1,server:!1},frameToHighlight:{browser:!1,export:!1,server:!1},editingFrame:{browser:!1,export:!1,server:!1},elementsToHighlight:{browser:!1,export:!1,server:!1},toast:{browser:!1,export:!1,server:!1},viewBackgroundColor:{browser:!0,export:!0,server:!0},width:{browser:!1,export:!1,server:!1},zenModeEnabled:{browser:!0,export:!1,server:!1},zoom:{browser:!0,export:!1,server:!1},viewModeEnabled:{browser:!1,export:!1,server:!1},showHyperlinkPopup:{browser:!1,export:!1,server:!1},selectedLinearElement:{browser:!0,export:!1,server:!1},snapLines:{browser:!1,export:!1,server:!1},originSnapOffset:{browser:!1,export:!1,server:!1},objectsSnapModeEnabled:{browser:!0,export:!1,server:!1},userToFollow:{browser:!1,export:!1,server:!1},followedBy:{browser:!1,export:!1,server:!1},isCropping:{browser:!1,export:!1,server:!1},croppingElementId:{browser:!1,export:!1,server:!1},searchMatches:{browser:!1,export:!1,server:!1},lockedMultiSelections:{browser:!0,export:!0,server:!0},activeLockedId:{browser:!1,export:!1,server:!1}}),IT=(e,t)=>{const n={};for(const i of Object.keys(e)){const r=j2e[i];if(r!=null&&r[t]){const s=e[i];n[i]=s}}return n},iG=e=>IT(e,"browser"),rG=e=>IT(e,"export"),Y2e=e=>IT(e,"server"),Ao=({activeTool:e})=>e.type==="eraser",Kh=({activeTool:e})=>e.type==="hand",C1=()=>{const e=document.querySelector(".excalidraw-tooltip");if(e)return e;const t=document.createElement("div");return document.body.appendChild(t),t.classList.add("excalidraw-tooltip"),t},sG=(e,t,n="bottom")=>{const i=e.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight,o=5;let a=t.left+t.width/2-i.width/2;a<0?a=o:a+i.width>=r&&(a=r-i.width-o);let l;n==="bottom"?(l=t.top+t.height+o,l+i.height>=s&&(l=t.top-i.height-o)):(l=t.top-i.height-o,l<0&&(l=t.top+t.height+o)),Object.assign(e.style,{top:`${l}px`,left:`${a}px`})},W2e=(e,t,n,i)=>{t.classList.add("excalidraw-tooltip--visible"),t.style.minWidth=i?"50ch":"10ch",t.style.maxWidth=i?"50ch":"15ch",t.textContent=n;const r=e.getBoundingClientRect();sG(t,r)},gl=({children:e,label:t,long:n=!1,style:i,disabled:r})=>(L.useEffect(()=>()=>C1().classList.remove("excalidraw-tooltip--visible"),[]),r?null:g("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:s=>W2e(s.currentTarget,C1(),t,n),onPointerLeave:()=>C1().classList.remove("excalidraw-tooltip--visible"),style:i,children:e})),oG='<svg viewBox="0 0 24 24" stroke-width="1" width="28" height="28" xmlns="http://www.w3.org/2000/svg">',K2e='<path d="M6.164 11.755a5.314 5.314 0 0 1-4.932-5.298 5.314 5.314 0 0 1 5.311-5.311 5.314 5.314 0 0 1 5.307 5.113l8.773 8.773a3.322 3.322 0 0 1 0 4.696l-.895.895a3.322 3.322 0 0 1-4.696 0l-8.868-8.868Z" style="fill:#fff"/>',aG='<path stroke="#1b1b1f" fill="#fff" d="m7.868 11.113 7.773 7.774a2.359 2.359 0 0 0 1.667.691 2.368 2.368 0 0 0 2.357-2.358c0-.625-.248-1.225-.69-1.667L11.201 7.78 9.558 9.469l-1.69 1.643v.001Zm10.273 3.606-3.333 3.333m-3.25-6.583 2 2m-7-7 3 3M3.664 3.625l1 1M2.529 6.922l1.407-.144m5.735-2.932-1.118.866M4.285 9.823l.758-1.194m1.863-6.207-.13 1.408"/>',Z2e=`data:${Te.svg},${encodeURIComponent(`${oG}${aG}</svg>`)}`,q2e=`data:${Te.svg},${encodeURIComponent(`${oG}${K2e}${aG}</svg>`)}`,_o=e=>{e&&(e.style.cursor="")},Dt=(e,t)=>{e&&(e.style.cursor=t)};let yo,BR;const lG=(e,t)=>{const i=()=>{const r=t===ke.DARK;yo=document.createElement("canvas"),yo.theme=t,yo.height=20,yo.width=20;const s=yo.getContext("2d");s.lineWidth=1,s.beginPath(),s.arc(yo.width/2,yo.height/2,5,0,2*Math.PI),s.fillStyle=r?yi.black:yi.white,s.fill(),s.strokeStyle=r?yi.white:yi.black,s.stroke(),BR=yo.toDataURL(Te.svg)};(!yo||yo.theme!==t)&&i(),Dt(e,`url(${BR}) ${20/2} ${20/2}, auto`)},To=(e,t)=>{if(e)if(t.activeTool.type==="selection")_o(e);else if(Kh(t))e.style.cursor=Ct.GRAB;else if(Ao(t))lG(e,t.theme);else if(t.activeTool.type==="laser"){const n=t.theme===ke.LIGHT?Z2e:q2e;e.style.cursor=`url(${n}), auto`}else["image","custom"].includes(t.activeTool.type)?t.activeTool.type!=="image"&&(e.style.cursor=Ct.AUTO):e.style.cursor=Ct.CROSSHAIR},Pu=({viewportX:e,viewportY:t,nextZoom:n},i)=>{const r=e-i.offsetLeft,s=t-i.offsetTop,o=i.zoom.value,a=i.scrollX+(r-r/o),l=i.scrollY+(s-s/o),c=-(r-r/n),u=-(s-s/n);return{scrollX:a+c,scrollY:l+u,zoom:{value:n}}};de({name:"changeViewBackgroundColor",label:"labels.canvasBackground",trackEvent:!1,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.changeViewBackgroundColor&&!t.viewModeEnabled,perform:(e,t,n)=>({appState:{...t,...n},captureUpdate:n.viewBackgroundColor?K.IMMEDIATELY:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n,appProps:i,data:r})=>g(vT,{palette:null,topPicks:oB,label:R("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:s=>n({viewBackgroundColor:s}),"data-testid":"canvas-background-picker",elements:e,appState:t,updateData:n})});const A1=de({name:"clearCanvas",label:"labels.clearCanvas",icon:$c,trackEvent:{category:"canvas"},predicate:(e,t,n,i)=>{var r;return!!i.props.UIOptions.canvasActions.clearCanvas&&!t.viewModeEnabled&&((r=t.openDialog)==null?void 0:r.name)!=="elementLinkSelector"},perform:(e,t,n,i)=>(i.imageCache.clear(),{elements:e.map(r=>Ie(r,{isDeleted:!0})),appState:{...ia(),files:{},theme:t.theme,penMode:t.penMode,penDetected:t.penDetected,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,gridStep:t.gridStep,gridModeEnabled:t.gridModeEnabled,stats:t.stats,pasteDialog:t.pasteDialog,activeTool:t.activeTool.type==="image"?{...t.activeTool,type:i.state.preferredSelectionTool.type}:t.activeTool},captureUpdate:K.IMMEDIATELY})}),zR=de({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:XM,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Pu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Va(t.zoom.value+J5)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Xe,{type:"button",className:"zoom-in-button zoom-button",icon:XM,title:`${R("buttons.zoomIn")}  ${J("CtrlOrCmd++")}`,"aria-label":R("buttons.zoomIn"),disabled:t.zoom.value>=P9,onClick:()=>{e(null)}}),keyTest:e=>(e.code===it.EQUAL||e.code===it.NUM_ADD)&&(e[V.CTRL_OR_CMD]||e.shiftKey)}),HR=de({name:"zoomOut",label:"buttons.zoomOut",icon:jM,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Pu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Va(t.zoom.value-J5)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(Xe,{type:"button",className:"zoom-out-button zoom-button",icon:jM,title:`${R("buttons.zoomOut")}  ${J("CtrlOrCmd+-")}`,"aria-label":R("buttons.zoomOut"),disabled:t.zoom.value<=O9,onClick:()=>{e(null)}}),keyTest:e=>(e.code===it.MINUS||e.code===it.NUM_SUBTRACT)&&(e[V.CTRL_OR_CMD]||e.shiftKey)}),VR=de({name:"resetZoom",label:"buttons.resetZoom",icon:wde,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>({appState:{...t,...Pu({viewportX:t.width/2+t.offsetLeft,viewportY:t.height/2+t.offsetTop,nextZoom:Va(1)},t),userToFollow:null},captureUpdate:K.EVENTUALLY}),PanelComponent:({updateData:e,appState:t})=>g(gl,{label:R("buttons.resetZoom"),style:{height:"100%"},children:N(Xe,{type:"button",className:"reset-zoom-button zoom-button",title:R("buttons.resetZoom"),"aria-label":R("buttons.resetZoom"),onClick:()=>{e(null)},children:[(t.zoom.value*100).toFixed(0),"%"]})}),keyTest:e=>(e.code===it.ZERO||e.code===it.NUM_ZERO)&&(e[V.CTRL_OR_CMD]||e.shiftKey)}),Q2e=(e,t,n=1)=>{const[i,r,s,o]=e,a=s-i,l=t.width/a,c=o-r,u=t.height/c,f=Math.min(l,u)*Ze(n,.1,1);return Math.min(f,1)},cG=({bounds:e,appState:t,canvasOffsets:n,fitToViewport:i=!1,viewportZoomFactor:r=1,minZoom:s=-1/0,maxZoom:o=1/0})=>{r=Ze(r,O9,P9);const[a,l,c,u]=e,d=(a+c)/2,f=(l+u)/2,h=(n==null?void 0:n.left)??0,m=(n==null?void 0:n.top)??0,p=(n==null?void 0:n.right)??0,U=(n==null?void 0:n.bottom)??0,b=t.width-h-p,y=t.height-m-U;let w;if(i){const x=c-a,_=u-l;w=Math.min(b/x,y/_)*r}else w=Q2e(e,{width:b,height:y},r);const v=Va(Ze(hse(w,J5,"floor"),s,o)),I=IV({scenePoint:{x:d,y:f},viewportDimensions:{width:t.width,height:t.height},offsets:n,zoom:{value:v}});return{appState:{...t,scrollX:I.scrollX,scrollY:I.scrollY,zoom:{value:v}},captureUpdate:K.EVENTUALLY}},Dy=({canvasOffsets:e,targetElements:t,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})=>{const a=nt(Yt(t));return cG({canvasOffsets:e,bounds:a,appState:n,fitToViewport:i,viewportZoomFactor:r,minZoom:s,maxZoom:o})};de({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:J_,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return Dy({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===it.TWO&&e.shiftKey&&!e.altKey&&!e[V.CTRL_OR_CMD]});de({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:J_,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return Dy({targetElements:r.length?r:e,appState:{...t,userToFollow:null},fitToViewport:!0,canvasOffsets:i.getEditorUIOffsets()})},keyTest:e=>e.code===it.THREE&&e.shiftKey&&!e.altKey&&!e[V.CTRL_OR_CMD]});de({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:J_,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n,i)=>Dy({targetElements:e,appState:{...t,userToFollow:null},fitToViewport:!1,canvasOffsets:i.getEditorUIOffsets()}),keyTest:e=>e.code===it.ONE&&e.shiftKey&&!e.altKey&&!e[V.CTRL_OR_CMD]});const V6=de({name:"toggleTheme",label:(e,t)=>t.theme===ke.DARK?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:e=>e.theme===ke.LIGHT?rv:sv,viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t,n)=>({appState:{...t,theme:n||(t.theme===ke.LIGHT?ke.DARK:ke.LIGHT)},captureUpdate:K.EVENTUALLY}),keyTest:e=>e.altKey&&e.shiftKey&&e.code===it.D,predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.toggleTheme});de({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(e,t,n,i)=>{let r;return Ao(t)?r=tn(t,{...t.activeTool.lastActiveTool||{type:i.state.preferredSelectionTool.type},lastActiveToolBeforeEraser:null}):r=tn(t,{type:"eraser",lastActiveToolBeforeEraser:t.activeTool}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.key===V.E});de({name:"toggleLassoTool",label:"toolBar.lasso",icon:x1,trackEvent:{category:"toolbar"},predicate:(e,t,n,i)=>i.state.preferredSelectionTool.type!=="lasso",perform:(e,t,n,i)=>{let r;return t.activeTool.type!=="lasso"?(r=tn(t,{type:"lasso",fromSelection:!1}),Dt(i.interactiveCanvas,Ct.CROSSHAIR)):r=tn(t,{type:"selection"}),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.NEVER}}});const J2e=de({name:"toggleHandTool",label:"toolBar.hand",trackEvent:{category:"toolbar"},icon:BV,viewMode:!1,perform:(e,t,n,i)=>{let r;return Kh(t)?r=tn(t,{...t.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(r=tn(t,{type:"hand",lastActiveToolBeforeEraser:t.activeTool}),Dt(i.interactiveCanvas,Ct.GRAB)),{appState:{...t,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:r},captureUpdate:K.IMMEDIATELY}},keyTest:e=>!e.altKey&&!e[V.CTRL_OR_CMD]&&e.key===V.H});de({name:"setEmbeddableAsActiveTool",trackEvent:{category:"toolbar"},target:"Tool",label:"toolBar.embeddable",perform:(e,t,n,i)=>{const r=tn(t,{type:"embeddable"});return To(i.canvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:tn(t,{type:"embeddable"})},captureUpdate:K.EVENTUALLY}}});const Vs=de({name:"finalize",label:"",trackEvent:!1,perform:(e,t,n,i)=>{var h,m;const{interactiveCanvas:r,focusContainer:s,scene:o}=i,{event:a,sceneCoords:l}=n??{},c=o.getNonDeletedElementsMap();if(a&&t.selectedLinearElement){const p=Ue.handlePointerUp(a,t.selectedLinearElement,t,i.scene),{startBindingElement:U,endBindingElement:b}=p,y=i.scene.getElement(p.elementId);if(Ha(y)&&h6(y,U,b,i.scene),p!==t.selectedLinearElement){let w=e;return y&&Qa(y)&&(w=w.map(v=>v.id===y.id?Ie(v,{isDeleted:!0}):v)),{elements:w,appState:{selectedLinearElement:{...p,selectedPointsIndices:null},suggestedBindings:[]},captureUpdate:K.IMMEDIATELY}}}if((h=t.selectedLinearElement)!=null&&h.isEditing){const{elementId:p,startBindingElement:U,endBindingElement:b}=t.selectedLinearElement,y=Ue.getElement(p,c);if(y)return Ha(y)&&h6(y,U,b,o),nn(y)&&!D4(y.points)&&o.mutateElement(y,{polygon:!1}),{elements:y.points.length<2||Qa(y)?e.map(w=>w.id===y.id?Ie(w,{isDeleted:!0}):w):void 0,appState:{...t,cursorButton:"up",selectedLinearElement:new Ue(y,ve(c),!1)},captureUpdate:K.IMMEDIATELY}}let u=e;window.document.activeElement instanceof HTMLElement&&s();let d=null;if(t.multiElement)d=t.multiElement;else if(((m=t.newElement)==null?void 0:m.type)==="freedraw"||Ha(t.newElement))d=t.newElement;else if(Object.keys(t.selectedElementIds).length===1){const p=c.get(Object.keys(t.selectedElementIds)[0]);p&&(d=p)}if(d){if(t.multiElement&&d.type!=="freedraw"){const{points:p,lastCommittedPoint:U}=d;(!U||p[p.length-1]!==U)&&o.mutateElement(d,{points:d.points.slice(0,-1)})}if(d&&Qa(d)&&(u=u.map(p=>p.id===(d==null?void 0:d.id)?Ie(p,{isDeleted:!0}):p)),xe(d)||qi(d)){const p=qo(d.points,t.zoom.value);if(p&&(nn(d)||qi(d))){const U=d.points,b=U[0],y=U.map((w,v)=>v===U.length-1?S(b[0],b[1]):w);nn(d)?o.mutateElement(d,{points:y,polygon:!0}):o.mutateElement(d,{points:y})}if(nn(d)&&!D4(d.points)&&o.mutateElement(d,{polygon:!1}),Ha(d)&&!p&&d.points.length>1&&Ju(t)){const U=l??Wa(Ue.getPointAtIndexGlobalCoordinates(d,-1,ve(e)));ale(d,t,U,o)}}}(!t.activeTool.locked&&t.activeTool.type!=="freedraw"||!d)&&_o(r);let f;return t.activeTool.type==="eraser"?f=tn(t,{...t.activeTool.lastActiveTool||{type:i.state.preferredSelectionTool.type},lastActiveToolBeforeEraser:null}):f=tn(t,{type:i.state.preferredSelectionTool.type}),{elements:u,appState:{...t,cursorButton:"up",activeTool:(t.activeTool.locked||t.activeTool.type==="freedraw")&&d?t.activeTool:f,activeEmbeddable:null,newElement:null,selectionElement:null,multiElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:d&&!t.activeTool.locked&&t.activeTool.type!=="freedraw"?{...t.selectedElementIds,[d.id]:!0}:t.selectedElementIds,selectedLinearElement:d&&xe(d)?new Ue(d,ve(u)):t.selectedLinearElement},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t)=>{var n;return e.key===V.ESCAPE&&(((n=t.selectedLinearElement)==null?void 0:n.isEditing)||!t.newElement&&t.multiElement===null)||(e.key===V.ESCAPE||e.key===V.ENTER)&&t.multiElement!==null},PanelComponent:({appState:e,updateData:t,data:n})=>g(Xe,{type:"button",icon:Mde,title:R("buttons.done"),"aria-label":R("buttons.done"),onClick:t,visible:e.multiElement!=null,size:(n==null?void 0:n.size)||"medium",style:{pointerEvents:"all"}})}),ST=({children:e,checked:t,onChange:n,className:i})=>N("div",{className:ce("Checkbox",i,{"is-checked":t}),onClick:r=>{n(!t,r),r.currentTarget.querySelector(".Checkbox-box").focus()},children:[g("button",{type:"button",className:"Checkbox-box",role:"checkbox","aria-checked":t,children:Ide}),g("div",{className:"Checkbox-label",children:e})]}),ebe=e=>{const t=e.title||(e.value===ke.DARK?R("buttons.lightMode"):R("buttons.darkMode"));return g(Xe,{type:"icon",icon:e.value===ke.LIGHT?$R.MOON:$R.SUN,title:t,"aria-label":t,onClick:()=>e.onChange(e.value===ke.DARK?ke.LIGHT:ke.DARK),"data-testid":"toggle-dark-mode"})},$R={SUN:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:g("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:g("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})},tbe=e=>{const{id:t}=Dr(),[n,i]=L.useState(e.value),r=o=>{e.ignoreFocus||$se(o.target);const a=o.target.value;a!==e.value&&e.onChange(a)},s=o=>{if(o.key===V.ENTER){if(o.preventDefault(),o.nativeEvent.isComposing||o.keyCode===229)return;o.currentTarget.blur()}};return N("div",{className:"ProjectName",children:[g("label",{className:"ProjectName-label",htmlFor:"filename",children:`${e.label}:`}),g("input",{type:"text",className:"TextInput",onBlur:r,onKeyDown:s,id:`${t}-filename`,value:n,onChange:o=>i(o.target.value)})]})};/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const nbe=4,GR=0,XR=1,ibe=2;function Ag(e){let t=e.length;for(;--t>=0;)e[t]=0}const rbe=0,uG=1,sbe=2,obe=3,abe=258,xT=29,Op=256,T0=Op+1+xT,Uh=30,CT=19,dG=2*T0+1,Fu=15,f3=16,lbe=7,AT=256,fG=16,hG=17,gG=18,Ev=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Z2=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),cbe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),mG=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ube=512,Ta=new Array((T0+2)*2);Ag(Ta);const M1=new Array(Uh*2);Ag(M1);const I0=new Array(ube);Ag(I0);const S0=new Array(abe-obe+1);Ag(S0);const MT=new Array(xT);Ag(MT);const $6=new Array(Uh);Ag($6);function h3(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let pG,UG,bG;function g3(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const yG=e=>e<256?I0[e]:I0[256+(e>>>7)],x0=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},xr=(e,t,n)=>{e.bi_valid>f3-n?(e.bi_buf|=t<<e.bi_valid&65535,x0(e,e.bi_buf),e.bi_buf=t>>f3-e.bi_valid,e.bi_valid+=n-f3):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Do=(e,t,n)=>{xr(e,n[t*2],n[t*2+1])},EG=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},dbe=e=>{e.bi_valid===16?(x0(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},fbe=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,f,h,m,p=0;for(f=0;f<=Fu;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<dG;c++)u=e.heap[c],f=n[n[u*2+1]*2+1]+1,f>l&&(f=l,p++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),m=n[u*2],e.opt_len+=m*(f+h),s&&(e.static_len+=m*(r[u*2+1]+h)));if(p!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},vG=(e,t,n)=>{const i=new Array(Fu+1);let r=0,s,o;for(s=1;s<=Fu;s++)i[s]=r=r+n[s-1]<<1;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=EG(i[a]++,a))}},hbe=()=>{let e,t,n,i,r;const s=new Array(Fu+1);for(n=0,i=0;i<xT-1;i++)for(MT[i]=n,e=0;e<1<<Ev[i];e++)S0[n++]=i;for(S0[n-1]=i,r=0,i=0;i<16;i++)for($6[i]=r,e=0;e<1<<Z2[i];e++)I0[r++]=i;for(r>>=7;i<Uh;i++)for($6[i]=r<<7,e=0;e<1<<Z2[i]-7;e++)I0[256+r++]=i;for(t=0;t<=Fu;t++)s[t]=0;for(e=0;e<=143;)Ta[e*2+1]=8,e++,s[8]++;for(;e<=255;)Ta[e*2+1]=9,e++,s[9]++;for(;e<=279;)Ta[e*2+1]=7,e++,s[7]++;for(;e<=287;)Ta[e*2+1]=8,e++,s[8]++;for(vG(Ta,T0+1,s),e=0;e<Uh;e++)M1[e*2+1]=5,M1[e*2]=EG(e,5);pG=new h3(Ta,Ev,Op+1,T0,Fu),UG=new h3(M1,Z2,0,Uh,Fu),bG=new h3(new Array(0),cbe,0,CT,lbe)},wG=e=>{let t;for(t=0;t<T0;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Uh;t++)e.dyn_dtree[t*2]=0;for(t=0;t<CT;t++)e.bl_tree[t*2]=0;e.dyn_ltree[AT*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},_G=e=>{e.bi_valid>8?x0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},gbe=(e,t,n,i)=>{_G(e),x0(e,n),x0(e,~n),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},jR=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},m3=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&jR(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!jR(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},YR=(e,t,n)=>{let i,r,s=0,o,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+s*2]<<8|e.pending_buf[e.d_buf+s*2+1],r=e.pending_buf[e.l_buf+s],s++,i===0?Do(e,r,t):(o=S0[r],Do(e,o+Op+1,t),a=Ev[o],a!==0&&(r-=MT[o],xr(e,r,a)),i--,o=yG(i),Do(e,o,n),a=Z2[o],a!==0&&(i-=$6[o],xr(e,i,a)));while(s<e.last_lit);Do(e,AT,t)},vv=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,l=-1,c;for(e.heap_len=0,e.heap_max=dG,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)m3(e,n,o);c=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m3(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[c*2]=n[o*2]+n[a*2],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=c,e.heap[1]=c++,m3(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],fbe(e,t),vG(n,l,e.bl_count)},WR=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)&&(a<c?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[fG*2]++):a<=10?e.bl_tree[hG*2]++:e.bl_tree[gG*2]++,a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4))},KR=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,l=7,c=4;for(o===0&&(l=138,c=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<l&&s===o)){if(a<c)do Do(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Do(e,s,e.bl_tree),a--),Do(e,fG,e.bl_tree),xr(e,a-3,2)):a<=10?(Do(e,hG,e.bl_tree),xr(e,a-3,3)):(Do(e,gG,e.bl_tree),xr(e,a-11,7));a=0,r=s,o===0?(l=138,c=3):s===o?(l=6,c=3):(l=7,c=4)}},mbe=e=>{let t;for(WR(e,e.dyn_ltree,e.l_desc.max_code),WR(e,e.dyn_dtree,e.d_desc.max_code),vv(e,e.bl_desc),t=CT-1;t>=3&&e.bl_tree[mG[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},pbe=(e,t,n,i)=>{let r;for(xr(e,t-257,5),xr(e,n-1,5),xr(e,i-4,4),r=0;r<i;r++)xr(e,e.bl_tree[mG[r]*2+1],3);KR(e,e.dyn_ltree,t-1),KR(e,e.dyn_dtree,n-1)},Ube=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return GR;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return XR;for(n=32;n<Op;n++)if(e.dyn_ltree[n*2]!==0)return XR;return GR};let ZR=!1;const bbe=e=>{ZR||(hbe(),ZR=!0),e.l_desc=new g3(e.dyn_ltree,pG),e.d_desc=new g3(e.dyn_dtree,UG),e.bl_desc=new g3(e.bl_tree,bG),e.bi_buf=0,e.bi_valid=0,wG(e)},TG=(e,t,n,i)=>{xr(e,(rbe<<1)+(i?1:0),3),gbe(e,t,n)},ybe=e=>{xr(e,uG<<1,3),Do(e,AT,Ta),dbe(e)},Ebe=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===ibe&&(e.strm.data_type=Ube(e)),vv(e,e.l_desc),vv(e,e.d_desc),o=mbe(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?TG(e,t,n,i):e.strategy===nbe||s===r?(xr(e,(uG<<1)+(i?1:0),3),YR(e,Ta,M1)):(xr(e,(sbe<<1)+(i?1:0),3),pbe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),YR(e,e.dyn_ltree,e.dyn_dtree)),wG(e),i&&_G(e)},vbe=(e,t,n)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(S0[n]+Op+1)*2]++,e.dyn_dtree[yG(t)*2]++),e.last_lit===e.lit_bufsize-1);var wbe=bbe,_be=TG,Tbe=Ebe,Ibe=vbe,Sbe=ybe,xbe={_tr_init:wbe,_tr_stored_block:_be,_tr_flush_block:Tbe,_tr_tally:Ibe,_tr_align:Sbe};const Cbe=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var C0=Cbe;const Abe=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},Mbe=new Uint32Array(Abe()),Rbe=(e,t,n,i)=>{const r=Mbe,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var di=Rbe,vd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ny={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:kbe,_tr_stored_block:Lbe,_tr_flush_block:Dbe,_tr_tally:_c,_tr_align:Nbe}=xbe,{Z_NO_FLUSH:Gd,Z_PARTIAL_FLUSH:Obe,Z_FULL_FLUSH:Pbe,Z_FINISH:Tc,Z_BLOCK:qR,Z_OK:No,Z_STREAM_END:QR,Z_STREAM_ERROR:Rs,Z_DATA_ERROR:Fbe,Z_BUF_ERROR:p3,Z_DEFAULT_COMPRESSION:Bbe,Z_FILTERED:zbe,Z_HUFFMAN_ONLY:ZU,Z_RLE:Hbe,Z_FIXED:Vbe,Z_DEFAULT_STRATEGY:$be,Z_UNKNOWN:Gbe,Z_DEFLATED:Oy}=Ny,Xbe=9,jbe=15,Ybe=8,Wbe=29,Kbe=256,wv=Kbe+1+Wbe,Zbe=30,qbe=19,Qbe=2*wv+1,Jbe=15,lt=3,ac=258,so=ac+lt+1,e6e=32,Py=42,_v=69,q2=73,Q2=91,J2=103,Bu=113,Hm=666,ti=1,Pp=2,wd=3,Mg=4,t6e=3,lc=(e,t)=>(e.msg=vd[t],t),JR=e=>(e<<1)-(e>4?9:0),nc=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let n6e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Ic=n6e;const Vl=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},ki=(e,t)=>{Dbe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Vl(e.strm)},Tt=(e,t)=>{e.pending_buf[e.pending++]=t},mm=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},i6e=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=C0(e.adler,t,r,n):e.state.wrap===2&&(e.adler=di(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},IG=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-so?e.strstart-(e.w_size-so):0,c=e.window,u=e.w_mask,d=e.prev,f=e.strstart+ac;let h=c[i+o-1],m=c[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+o]!==m||c[r+o-1]!==h||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f);if(s=ac-(f-i),i=f-ac,s>o){if(e.match_start=t,o=s,s>=a)break;h=c[i+o-1],m=c[i+o]}}while((t=d[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},_d=e=>{const t=e.w_size;let n,i,r,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-so)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);s+=t}if(e.strm.avail_in===0)break;if(i=i6e(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=i,e.lookahead+e.insert>=lt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Ic(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Ic(e,e.ins_h,e.window[o+lt-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<lt)););}while(e.lookahead<so&&e.strm.avail_in!==0)},r6e=(e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_d(e),e.lookahead===0&&t===Gd)return ti;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,ki(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-so&&(ki(e,!1),e.strm.avail_out===0))return ti}return e.insert=0,t===Tc?(ki(e,!0),e.strm.avail_out===0?wd:Mg):(e.strstart>e.block_start&&(ki(e,!1),e.strm.avail_out===0),ti)},U3=(e,t)=>{let n,i;for(;;){if(e.lookahead<so){if(_d(e),e.lookahead<so&&t===Gd)return ti;if(e.lookahead===0)break}if(n=0,e.lookahead>=lt&&(e.ins_h=Ic(e,e.ins_h,e.window[e.strstart+lt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-so&&(e.match_length=IG(e,n)),e.match_length>=lt)if(i=_c(e,e.strstart-e.match_start,e.match_length-lt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=lt){e.match_length--;do e.strstart++,e.ins_h=Ic(e,e.ins_h,e.window[e.strstart+lt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ic(e,e.ins_h,e.window[e.strstart+1]);else i=_c(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ki(e,!1),e.strm.avail_out===0))return ti}return e.insert=e.strstart<lt-1?e.strstart:lt-1,t===Tc?(ki(e,!0),e.strm.avail_out===0?wd:Mg):e.last_lit&&(ki(e,!1),e.strm.avail_out===0)?ti:Pp},cf=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<so){if(_d(e),e.lookahead<so&&t===Gd)return ti;if(e.lookahead===0)break}if(n=0,e.lookahead>=lt&&(e.ins_h=Ic(e,e.ins_h,e.window[e.strstart+lt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=lt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-so&&(e.match_length=IG(e,n),e.match_length<=5&&(e.strategy===zbe||e.match_length===lt&&e.strstart-e.match_start>4096)&&(e.match_length=lt-1)),e.prev_length>=lt&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-lt,i=_c(e,e.strstart-1-e.prev_match,e.prev_length-lt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=Ic(e,e.ins_h,e.window[e.strstart+lt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=lt-1,e.strstart++,i&&(ki(e,!1),e.strm.avail_out===0))return ti}else if(e.match_available){if(i=_c(e,0,e.window[e.strstart-1]),i&&ki(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ti}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=_c(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<lt-1?e.strstart:lt-1,t===Tc?(ki(e,!0),e.strm.avail_out===0?wd:Mg):e.last_lit&&(ki(e,!1),e.strm.avail_out===0)?ti:Pp},s6e=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=ac){if(_d(e),e.lookahead<=ac&&t===Gd)return ti;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=lt&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+ac;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=ac-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=lt?(n=_c(e,1,e.match_length-lt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=_c(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ki(e,!1),e.strm.avail_out===0))return ti}return e.insert=0,t===Tc?(ki(e,!0),e.strm.avail_out===0?wd:Mg):e.last_lit&&(ki(e,!1),e.strm.avail_out===0)?ti:Pp},o6e=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(_d(e),e.lookahead===0)){if(t===Gd)return ti;break}if(e.match_length=0,n=_c(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ki(e,!1),e.strm.avail_out===0))return ti}return e.insert=0,t===Tc?(ki(e,!0),e.strm.avail_out===0?wd:Mg):e.last_lit&&(ki(e,!1),e.strm.avail_out===0)?ti:Pp};function Eo(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const Vm=[new Eo(0,0,0,0,r6e),new Eo(4,4,8,4,U3),new Eo(4,5,16,8,U3),new Eo(4,6,32,32,U3),new Eo(4,4,16,16,cf),new Eo(8,16,32,32,cf),new Eo(8,16,128,128,cf),new Eo(8,32,128,256,cf),new Eo(32,128,258,1024,cf),new Eo(32,258,258,4096,cf)],a6e=e=>{e.window_size=2*e.w_size,nc(e.head),e.max_lazy_match=Vm[e.level].max_lazy,e.good_match=Vm[e.level].good_length,e.nice_match=Vm[e.level].nice_length,e.max_chain_length=Vm[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=lt-1,e.match_available=0,e.ins_h=0};function l6e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Oy,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Qbe*2),this.dyn_dtree=new Uint16Array((2*Zbe+1)*2),this.bl_tree=new Uint16Array((2*qbe+1)*2),nc(this.dyn_ltree),nc(this.dyn_dtree),nc(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Jbe+1),this.heap=new Uint16Array(2*wv+1),nc(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*wv+1),nc(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const SG=e=>{if(!e||!e.state)return lc(e,Rs);e.total_in=e.total_out=0,e.data_type=Gbe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Py:Bu,e.adler=t.wrap===2?0:1,t.last_flush=Gd,kbe(t),No},xG=e=>{const t=SG(e);return t===No&&a6e(e.state),t},c6e=(e,t)=>!e||!e.state||e.state.wrap!==2?Rs:(e.state.gzhead=t,No),CG=(e,t,n,i,r,s)=>{if(!e)return Rs;let o=1;if(t===Bbe&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>Xbe||n!==Oy||i<8||i>15||t<0||t>9||s<0||s>Vbe)return lc(e,Rs);i===8&&(i=9);const a=new l6e;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+lt-1)/lt),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=n,xG(e)},u6e=(e,t)=>CG(e,t,Oy,jbe,Ybe,$be),d6e=(e,t)=>{let n,i;if(!e||!e.state||t>qR||t<0)return e?lc(e,Rs):Rs;const r=e.state;if(!e.output||!e.input&&e.avail_in!==0||r.status===Hm&&t!==Tc)return lc(e,e.avail_out===0?p3:Rs);r.strm=e;const s=r.last_flush;if(r.last_flush=t,r.status===Py)if(r.wrap===2)e.adler=0,Tt(r,31),Tt(r,139),Tt(r,8),r.gzhead?(Tt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Tt(r,r.gzhead.time&255),Tt(r,r.gzhead.time>>8&255),Tt(r,r.gzhead.time>>16&255),Tt(r,r.gzhead.time>>24&255),Tt(r,r.level===9?2:r.strategy>=ZU||r.level<2?4:0),Tt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Tt(r,r.gzhead.extra.length&255),Tt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=di(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=_v):(Tt(r,0),Tt(r,0),Tt(r,0),Tt(r,0),Tt(r,0),Tt(r,r.level===9?2:r.strategy>=ZU||r.level<2?4:0),Tt(r,t6e),r.status=Bu);else{let o=Oy+(r.w_bits-8<<4)<<8,a=-1;r.strategy>=ZU||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,o|=a<<6,r.strstart!==0&&(o|=e6e),o+=31-o%31,r.status=Bu,mm(r,o),r.strstart!==0&&(mm(r,e.adler>>>16),mm(r,e.adler&65535)),e.adler=1}if(r.status===_v)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(r.gzhead.extra.length&65535)&&!(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=di(e.adler,r.pending_buf,r.pending-n,n)),Vl(e),n=r.pending,r.pending===r.pending_buf_size));)Tt(r,r.gzhead.extra[r.gzindex]&255),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=di(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=q2)}else r.status=q2;if(r.status===q2)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=di(e.adler,r.pending_buf,r.pending-n,n)),Vl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.name.length?i=r.gzhead.name.charCodeAt(r.gzindex++)&255:i=0,Tt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=di(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.gzindex=0,r.status=Q2)}else r.status=Q2;if(r.status===Q2)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=di(e.adler,r.pending_buf,r.pending-n,n)),Vl(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}r.gzindex<r.gzhead.comment.length?i=r.gzhead.comment.charCodeAt(r.gzindex++)&255:i=0,Tt(r,i)}while(i!==0);r.gzhead.hcrc&&r.pending>n&&(e.adler=di(e.adler,r.pending_buf,r.pending-n,n)),i===0&&(r.status=J2)}else r.status=J2;if(r.status===J2&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Vl(e),r.pending+2<=r.pending_buf_size&&(Tt(r,e.adler&255),Tt(r,e.adler>>8&255),e.adler=0,r.status=Bu)):r.status=Bu),r.pending!==0){if(Vl(e),e.avail_out===0)return r.last_flush=-1,No}else if(e.avail_in===0&&JR(t)<=JR(s)&&t!==Tc)return lc(e,p3);if(r.status===Hm&&e.avail_in!==0)return lc(e,p3);if(e.avail_in!==0||r.lookahead!==0||t!==Gd&&r.status!==Hm){let o=r.strategy===ZU?o6e(r,t):r.strategy===Hbe?s6e(r,t):Vm[r.level].func(r,t);if((o===wd||o===Mg)&&(r.status=Hm),o===ti||o===wd)return e.avail_out===0&&(r.last_flush=-1),No;if(o===Pp&&(t===Obe?Nbe(r):t!==qR&&(Lbe(r,0,0,!1),t===Pbe&&(nc(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Vl(e),e.avail_out===0))return r.last_flush=-1,No}return t!==Tc?No:r.wrap<=0?QR:(r.wrap===2?(Tt(r,e.adler&255),Tt(r,e.adler>>8&255),Tt(r,e.adler>>16&255),Tt(r,e.adler>>24&255),Tt(r,e.total_in&255),Tt(r,e.total_in>>8&255),Tt(r,e.total_in>>16&255),Tt(r,e.total_in>>24&255)):(mm(r,e.adler>>>16),mm(r,e.adler&65535)),Vl(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?No:QR)},f6e=e=>{if(!e||!e.state)return Rs;const t=e.state.status;return t!==Py&&t!==_v&&t!==q2&&t!==Q2&&t!==J2&&t!==Bu&&t!==Hm?lc(e,Rs):(e.state=null,t===Bu?lc(e,Fbe):No)},h6e=(e,t)=>{let n=t.length;if(!e||!e.state)return Rs;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==Py||i.lookahead)return Rs;if(r===1&&(e.adler=C0(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(nc(i.head),i.strstart=0,i.block_start=0,i.insert=0);let l=new Uint8Array(i.w_size);l.set(t.subarray(n-i.w_size,n),0),t=l,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,_d(i);i.lookahead>=lt;){let l=i.strstart,c=i.lookahead-(lt-1);do i.ins_h=Ic(i,i.ins_h,i.window[l+lt-1]),i.prev[l&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=l,l++;while(--c);i.strstart=l,i.lookahead=lt-1,_d(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=lt-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,No};var g6e=u6e,m6e=CG,p6e=xG,U6e=SG,b6e=c6e,y6e=d6e,E6e=f6e,v6e=h6e,w6e="pako deflate (from Nodeca project)",R1={deflateInit:g6e,deflateInit2:m6e,deflateReset:p6e,deflateResetKeep:U6e,deflateSetHeader:b6e,deflate:y6e,deflateEnd:E6e,deflateSetDictionary:v6e,deflateInfo:w6e};const _6e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var T6e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)_6e(n,i)&&(e[i]=n[i])}}return e},I6e=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},Fy={assign:T6e,flattenChunks:I6e};let AG=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{AG=!1}const A0=new Uint8Array(256);for(let e=0;e<256;e++)A0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;A0[254]=A0[254]=1;var S6e=e=>{let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const x6e=(e,t)=>{if(t<65534&&e.subarray&&AG)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var C6e=(e,t)=>{let n,i;const r=t||e.length,s=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){s[i++]=o;continue}let a=A0[o];if(a>4){s[i++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return x6e(s,i)},A6e=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+A0[e[n]]>t?n:t},M0={string2buf:S6e,buf2string:C6e,utf8border:A6e};function M6e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var MG=M6e;const RG=Object.prototype.toString,{Z_NO_FLUSH:R6e,Z_SYNC_FLUSH:k6e,Z_FULL_FLUSH:L6e,Z_FINISH:D6e,Z_OK:G6,Z_STREAM_END:N6e,Z_DEFAULT_COMPRESSION:O6e,Z_DEFAULT_STRATEGY:P6e,Z_DEFLATED:F6e}=Ny;function By(e){this.options=Fy.assign({level:O6e,method:F6e,chunkSize:16384,windowBits:15,memLevel:8,strategy:P6e},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new MG,this.strm.avail_out=0;let n=R1.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==G6)throw new Error(vd[n]);if(t.header&&R1.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=M0.string2buf(t.dictionary):RG.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=R1.deflateSetDictionary(this.strm,i),n!==G6)throw new Error(vd[n]);this._dict_set=!0}}By.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?D6e:R6e,typeof e=="string"?n.input=M0.string2buf(e):RG.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===k6e||s===L6e)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=R1.deflate(n,s),r===N6e)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=R1.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===G6;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};By.prototype.onData=function(e){this.chunks.push(e)};By.prototype.onEnd=function(e){e===G6&&(this.result=Fy.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function B6e(e,t){const n=new By(t);if(n.push(e,!0),n.err)throw n.msg||vd[n.err];return n.result}var z6e=B6e,H6e={deflate:z6e};const qU=30,V6e=12;var $6e=function(t,n){let i,r,s,o,a,l,c,u,d,f,h,m,p,U,b,y,w,v,I,x,_,T,A,C;const k=t.state;i=t.next_in,A=t.input,r=i+(t.avail_in-5),s=t.next_out,C=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),l=k.dmax,c=k.wsize,u=k.whave,d=k.wnext,f=k.window,h=k.hold,m=k.bits,p=k.lencode,U=k.distcode,b=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{m<15&&(h+=A[i++]<<m,m+=8,h+=A[i++]<<m,m+=8),w=p[h&b];t:for(;;){if(v=w>>>24,h>>>=v,m-=v,v=w>>>16&255,v===0)C[s++]=w&65535;else if(v&16){I=w&65535,v&=15,v&&(m<v&&(h+=A[i++]<<m,m+=8),I+=h&(1<<v)-1,h>>>=v,m-=v),m<15&&(h+=A[i++]<<m,m+=8,h+=A[i++]<<m,m+=8),w=U[h&y];n:for(;;){if(v=w>>>24,h>>>=v,m-=v,v=w>>>16&255,v&16){if(x=w&65535,v&=15,m<v&&(h+=A[i++]<<m,m+=8,m<v&&(h+=A[i++]<<m,m+=8)),x+=h&(1<<v)-1,x>l){t.msg="invalid distance too far back",k.mode=qU;break e}if(h>>>=v,m-=v,v=s-o,x>v){if(v=x-v,v>u&&k.sane){t.msg="invalid distance too far back",k.mode=qU;break e}if(_=0,T=f,d===0){if(_+=c-v,v<I){I-=v;do C[s++]=f[_++];while(--v);_=s-x,T=C}}else if(d<v){if(_+=c+d-v,v-=d,v<I){I-=v;do C[s++]=f[_++];while(--v);if(_=0,d<I){v=d,I-=v;do C[s++]=f[_++];while(--v);_=s-x,T=C}}}else if(_+=d-v,v<I){I-=v;do C[s++]=f[_++];while(--v);_=s-x,T=C}for(;I>2;)C[s++]=T[_++],C[s++]=T[_++],C[s++]=T[_++],I-=3;I&&(C[s++]=T[_++],I>1&&(C[s++]=T[_++]))}else{_=s-x;do C[s++]=C[_++],C[s++]=C[_++],C[s++]=C[_++],I-=3;while(I>2);I&&(C[s++]=C[_++],I>1&&(C[s++]=C[_++]))}}else if(v&64){t.msg="invalid distance code",k.mode=qU;break e}else{w=U[(w&65535)+(h&(1<<v)-1)];continue n}break}}else if(v&64)if(v&32){k.mode=V6e;break e}else{t.msg="invalid literal/length code",k.mode=qU;break e}else{w=p[(w&65535)+(h&(1<<v)-1)];continue t}break}}while(i<r&&s<a);I=m>>3,i-=I,m-=I<<3,h&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),k.hold=h,k.bits=m};const uf=15,ek=852,tk=592,nk=0,b3=1,ik=2,G6e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),X6e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),j6e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Y6e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),W6e=(e,t,n,i,r,s,o,a)=>{const l=a.bits;let c=0,u=0,d=0,f=0,h=0,m=0,p=0,U=0,b=0,y=0,w,v,I,x,_,T=null,A=0,C;const k=new Uint16Array(uf+1),P=new Uint16Array(uf+1);let D=null,j=0,G,B,H;for(c=0;c<=uf;c++)k[c]=0;for(u=0;u<i;u++)k[t[n+u]]++;for(h=l,f=uf;f>=1&&k[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&k[d]===0;d++);for(h<d&&(h=d),U=1,c=1;c<=uf;c++)if(U<<=1,U-=k[c],U<0)return-1;if(U>0&&(e===nk||f!==1))return-1;for(P[1]=0,c=1;c<uf;c++)P[c+1]=P[c]+k[c];for(u=0;u<i;u++)t[n+u]!==0&&(o[P[t[n+u]]++]=u);if(e===nk?(T=D=o,C=19):e===b3?(T=G6e,A-=257,D=X6e,j-=257,C=256):(T=j6e,D=Y6e,C=-1),y=0,u=0,c=d,_=s,m=h,p=0,I=-1,b=1<<h,x=b-1,e===b3&&b>ek||e===ik&&b>tk)return 1;for(;;){G=c-p,o[u]<C?(B=0,H=o[u]):o[u]>C?(B=D[j+o[u]],H=T[A+o[u]]):(B=96,H=0),w=1<<c-p,v=1<<m,d=v;do v-=w,r[_+(y>>p)+v]=G<<24|B<<16|H|0;while(v!==0);for(w=1<<c-1;y&w;)w>>=1;if(w!==0?(y&=w-1,y+=w):y=0,u++,--k[c]===0){if(c===f)break;c=t[n+o[u]]}if(c>h&&(y&x)!==I){for(p===0&&(p=h),_+=d,m=c-p,U=1<<m;m+p<f&&(U-=k[m+p],!(U<=0));)m++,U<<=1;if(b+=1<<m,e===b3&&b>ek||e===ik&&b>tk)return 1;I=y&x,r[I]=h<<24|m<<16|_-s|0}}return y!==0&&(r[_+y]=c-p<<24|64<<16|0),a.bits=h,0};var k1=W6e;const K6e=0,kG=1,LG=2,{Z_FINISH:rk,Z_BLOCK:Z6e,Z_TREES:QU,Z_OK:Td,Z_STREAM_END:q6e,Z_NEED_DICT:Q6e,Z_STREAM_ERROR:Fs,Z_DATA_ERROR:DG,Z_MEM_ERROR:NG,Z_BUF_ERROR:J6e,Z_DEFLATED:sk}=Ny,OG=1,ok=2,ak=3,lk=4,ck=5,uk=6,dk=7,fk=8,hk=9,gk=10,X6=11,ya=12,y3=13,mk=14,E3=15,pk=16,Uk=17,bk=18,yk=19,JU=20,e2=21,Ek=22,vk=23,wk=24,_k=25,Tk=26,v3=27,Ik=28,Sk=29,on=30,PG=31,e5e=32,t5e=852,n5e=592,i5e=15,r5e=i5e,xk=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function s5e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const FG=e=>{if(!e||!e.state)return Fs;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=OG,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(t5e),t.distcode=t.distdyn=new Int32Array(n5e),t.sane=1,t.back=-1,Td},BG=e=>{if(!e||!e.state)return Fs;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,FG(e)},zG=(e,t)=>{let n;if(!e||!e.state)return Fs;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Fs:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,BG(e))},HG=(e,t)=>{if(!e)return Fs;const n=new s5e;e.state=n,n.window=null;const i=zG(e,t);return i!==Td&&(e.state=null),i},o5e=e=>HG(e,r5e);let Ck=!0,w3,_3;const a5e=e=>{if(Ck){w3=new Int32Array(512),_3=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(k1(kG,e.lens,0,288,w3,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;k1(LG,e.lens,0,32,_3,0,e.work,{bits:5}),Ck=!1}e.lencode=w3,e.lenbits=9,e.distcode=_3,e.distbits=5},VG=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},l5e=(e,t)=>{let n,i,r,s,o,a,l,c,u,d,f,h,m,p,U=0,b,y,w,v,I,x,_,T;const A=new Uint8Array(4);let C,k;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Fs;n=e.state,n.mode===ya&&(n.mode=y3),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,T=Td;e:for(;;)switch(n.mode){case OG:if(n.wrap===0){n.mode=y3;break}for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,A[0]=c&255,A[1]=c>>>8&255,n.check=di(n.check,A,2,0),c=0,u=0,n.mode=ok;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=on;break}if((c&15)!==sk){e.msg="unknown compression method",n.mode=on;break}if(c>>>=4,u-=4,_=(c&15)+8,n.wbits===0)n.wbits=_;else if(_>n.wbits){e.msg="invalid window size",n.mode=on;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=c&512?gk:ya,c=0,u=0;break;case ok:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==sk){e.msg="unknown compression method",n.mode=on;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=on;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=di(n.check,A,2,0)),c=0,u=0,n.mode=ak;case ak:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,n.check=di(n.check,A,4,0)),c=0,u=0,n.mode=lk;case lk:for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=di(n.check,A,2,0)),c=0,u=0,n.mode=ck;case ck:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(A[0]=c&255,A[1]=c>>>8&255,n.check=di(n.check,A,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=uk;case uk:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),_)),n.flags&512&&(n.check=di(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=dk;case dk:if(n.flags&2048){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=di(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=fk;case fk:if(n.flags&4096){if(a===0)break e;h=0;do _=i[s+h++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_));while(_&&h<a);if(n.flags&512&&(n.check=di(n.check,i,h,s)),a-=h,s+=h,_)break e}else n.head&&(n.head.comment=null);n.mode=hk;case hk:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=on;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ya;break;case gk:for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}e.adler=n.check=xk(c),c=0,u=0,n.mode=X6;case X6:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,Q6e;e.adler=n.check=1,n.mode=ya;case ya:if(t===Z6e||t===QU)break e;case y3:if(n.last){c>>>=u&7,u-=u&7,n.mode=v3;break}for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=mk;break;case 1:if(a5e(n),n.mode=JU,t===QU){c>>>=2,u-=2;break e}break;case 2:n.mode=Uk;break;case 3:e.msg="invalid block type",n.mode=on}c>>>=2,u-=2;break;case mk:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=on;break}if(n.length=c&65535,c=0,u=0,n.mode=E3,t===QU)break e;case E3:n.mode=pk;case pk:if(h=n.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,l-=h,o+=h,n.length-=h;break}n.mode=ya;break;case Uk:for(;u<14;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=on;break}n.have=0,n.mode=bk;case bk:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.lens[P[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},T=k1(K6e,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid code lengths set",n.mode=on;break}n.have=0,n.mode=yk;case yk:for(;n.have<n.nlen+n.ndist;){for(;U=n.lencode[c&(1<<n.lenbits)-1],b=U>>>24,y=U>>>16&255,w=U&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(w<16)c>>>=b,u-=b,n.lens[n.have++]=w;else{if(w===16){for(k=b+2;u<k;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c>>>=b,u-=b,n.have===0){e.msg="invalid bit length repeat",n.mode=on;break}_=n.lens[n.have-1],h=3+(c&3),c>>>=2,u-=2}else if(w===17){for(k=b+3;u<k;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,_=0,h=3+(c&7),c>>>=3,u-=3}else{for(k=b+7;u<k;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=b,u-=b,_=0,h=11+(c&127),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=on;break}for(;h--;)n.lens[n.have++]=_}}if(n.mode===on)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=on;break}if(n.lenbits=9,C={bits:n.lenbits},T=k1(kG,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid literal/lengths set",n.mode=on;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},T=k1(LG,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,T){e.msg="invalid distances set",n.mode=on;break}if(n.mode=JU,t===QU)break e;case JU:n.mode=e2;case e2:if(a>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,$6e(e,f),o=e.next_out,r=e.output,l=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===ya&&(n.back=-1);break}for(n.back=0;U=n.lencode[c&(1<<n.lenbits)-1],b=U>>>24,y=U>>>16&255,w=U&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(y&&!(y&240)){for(v=b,I=y,x=w;U=n.lencode[x+((c&(1<<v+I)-1)>>v)],b=U>>>24,y=U>>>16&255,w=U&65535,!(v+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=b,u-=b,n.back+=b,n.length=w,y===0){n.mode=Tk;break}if(y&32){n.back=-1,n.mode=ya;break}if(y&64){e.msg="invalid literal/length code",n.mode=on;break}n.extra=y&15,n.mode=Ek;case Ek:if(n.extra){for(k=n.extra;u<k;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=vk;case vk:for(;U=n.distcode[c&(1<<n.distbits)-1],b=U>>>24,y=U>>>16&255,w=U&65535,!(b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(!(y&240)){for(v=b,I=y,x=w;U=n.distcode[x+((c&(1<<v+I)-1)>>v)],b=U>>>24,y=U>>>16&255,w=U&65535,!(v+b<=u);){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}c>>>=v,u-=v,n.back+=v}if(c>>>=b,u-=b,n.back+=b,y&64){e.msg="invalid distance code",n.mode=on;break}n.offset=w,n.extra=y&15,n.mode=wk;case wk:if(n.extra){for(k=n.extra;u<k;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=on;break}n.mode=_k;case _k:if(l===0)break e;if(h=f-l,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=on;break}h>n.wnext?(h-=n.wnext,m=n.wsize-h):m=n.wnext-h,h>n.length&&(h=n.length),p=n.window}else p=r,m=o-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do r[o++]=p[m++];while(--h);n.length===0&&(n.mode=e2);break;case Tk:if(l===0)break e;r[o++]=n.length,l--,n.mode=e2;break;case v3:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[s++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?di(n.check,r,f,o-f):C0(n.check,r,f,o-f)),f=l,(n.flags?c:xk(c))!==n.check){e.msg="incorrect data check",n.mode=on;break}c=0,u=0}n.mode=Ik;case Ik:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[s++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=on;break}c=0,u=0}n.mode=Sk;case Sk:T=q6e;break e;case on:T=DG;break e;case PG:return NG;case e5e:default:return Fs}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<on&&(n.mode<v3||t!==rk))&&VG(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?di(n.check,r,f,e.next_out-f):C0(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ya?128:0)+(n.mode===JU||n.mode===E3?256:0),(d===0&&f===0||t===rk)&&T===Td&&(T=J6e),T},c5e=e=>{if(!e||!e.state)return Fs;let t=e.state;return t.window&&(t.window=null),e.state=null,Td},u5e=(e,t)=>{if(!e||!e.state)return Fs;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Td):Fs},d5e=(e,t)=>{const n=t.length;let i,r,s;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==X6)?Fs:i.mode===X6&&(r=1,r=C0(r,t,n,0),r!==i.check)?DG:(s=VG(e,t,n,n),s?(i.mode=PG,NG):(i.havedict=1,Td))};var f5e=BG,h5e=zG,g5e=FG,m5e=o5e,p5e=HG,U5e=l5e,b5e=c5e,y5e=u5e,E5e=d5e,v5e="pako inflate (from Nodeca project)",Ia={inflateReset:f5e,inflateReset2:h5e,inflateResetKeep:g5e,inflateInit:m5e,inflateInit2:p5e,inflate:U5e,inflateEnd:b5e,inflateGetHeader:y5e,inflateSetDictionary:E5e,inflateInfo:v5e};function w5e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var _5e=w5e;const $G=Object.prototype.toString,{Z_NO_FLUSH:T5e,Z_FINISH:I5e,Z_OK:R0,Z_STREAM_END:T3,Z_NEED_DICT:I3,Z_STREAM_ERROR:S5e,Z_DATA_ERROR:Ak,Z_MEM_ERROR:x5e}=Ny;function zy(e){this.options=Fy.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new MG,this.strm.avail_out=0;let n=Ia.inflateInit2(this.strm,t.windowBits);if(n!==R0)throw new Error(vd[n]);if(this.header=new _5e,Ia.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=M0.string2buf(t.dictionary):$G.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ia.inflateSetDictionary(this.strm,t.dictionary),n!==R0)))throw new Error(vd[n])}zy.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?I5e:T5e,$G.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=Ia.inflate(n,o),s===I3&&r&&(s=Ia.inflateSetDictionary(n,r),s===R0?s=Ia.inflate(n,o):s===Ak&&(s=I3));n.avail_in>0&&s===T3&&n.state.wrap>0&&e[n.next_in]!==0;)Ia.inflateReset(n),s=Ia.inflate(n,o);switch(s){case S5e:case Ak:case I3:case x5e:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===T3))if(this.options.to==="string"){let l=M0.utf8border(n.output,n.next_out),c=n.next_out-l,u=M0.buf2string(n.output,l);n.next_out=c,n.avail_out=i-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===R0&&a===0)){if(s===T3)return s=Ia.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};zy.prototype.onData=function(e){this.chunks.push(e)};zy.prototype.onEnd=function(e){e===R0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fy.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function C5e(e,t){const n=new zy(t);if(n.push(e),n.err)throw n.msg||vd[n.err];return n.result}var A5e=C5e,M5e={inflate:A5e};const{deflate:R5e}=H6e,{inflate:k5e}=M5e;var GG=R5e,XG=k5e;const eb=12,L5e=()=>{const e=new Uint8Array(eb);return window.crypto.getRandomValues(e)},RT=async e=>{const t=await window.crypto.subtle.generateKey({name:"AES-GCM",length:mB},!0,["encrypt","decrypt"]);return e==="cryptoKey"?t:(await window.crypto.subtle.exportKey("jwk",t)).k},jG=(e,t)=>window.crypto.subtle.importKey("jwk",{alg:"A128GCM",ext:!0,k:e,key_ops:["encrypt","decrypt"],kty:"oct"},{name:"AES-GCM",length:mB},!1,[t]),Hy=async(e,t)=>{const n=typeof e=="string"?await jG(e,"encrypt"):e,i=L5e(),r=typeof t=="string"?new TextEncoder().encode(t):t instanceof Uint8Array?t:t instanceof Blob?await Fp(t):t;return{encryptedBuffer:await window.crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,r),iv:i}},k0=async(e,t,n)=>{const i=await jG(n,"decrypt");return window.crypto.subtle.decrypt({name:"AES-GCM",iv:e},i,t)},j6=e=>{const t=typeof e=="string"?new TextEncoder().encode(e):e instanceof Uint8Array?e:new Uint8Array(e);let n="";for(const i of t)n+=String.fromCharCode(i);return n},YG=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t},WG=e=>new TextDecoder("utf-8").decode(YG(e)),KG=(e,t=!1)=>t?window.btoa(e):window.btoa(j6(e)),ZG=(e,t=!1)=>t?window.atob(e):WG(window.atob(e)),Mk=e=>window.atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(4-e.length%4)%4,"=")),qG=({text:e,compress:t})=>{let n;if(t!==!1)try{n=j6(GG(e))}catch(i){console.error("encode: cannot deflate",i)}return{version:"1",encoding:"bstring",compressed:!!n,encoded:n||j6(e)}},QG=e=>{let t;switch(e.encoding){case"bstring":t=e.compressed?e.encoded:WG(e.encoded);break;default:throw new Error(`decode: unknown encoding "${e.encoding}"`)}return e.compressed?XG(new Uint8Array(YG(t)),{to:"string"}):t},JG=1,tb=4,bh=4,S3={1:8,2:16,4:32};function Y6(e,t,n,i){if(i!=null){if(i>Math.pow(2,S3[t])-1)throw new Error(`attempting to set value higher than the allocated bytes (value: ${i}, bytes: ${t})`);const s=`setUint${S3[t]}`;return new DataView(e.buffer)[s](n,i),e}const r=`getUint${S3[t]}`;return new DataView(e.buffer)[r](n)}const Rk=(...e)=>{const t=new Uint8Array(tb+bh*e.length+e.reduce((i,r)=>i+r.byteLength,0));let n=0;Y6(t,tb,n,JG),n+=tb;for(const i of e)Y6(t,bh,n,i.byteLength),n+=bh,t.set(i,n),n+=i.byteLength;return t},kk=e=>{const t=[];let n=0;const i=Y6(e,bh,n);if(i>JG)throw new Error(`invalid version ${i}`);for(n+=tb;;){const r=Y6(e,bh,n);if(n+=bh,t.push(e.slice(n,n+r)),n+=r,n>=e.byteLength)break}return t},D5e=async(e,t)=>{const{encryptedBuffer:n,iv:i}=await Hy(t,GG(e));return{iv:i,buffer:new Uint8Array(n)}},eX=async(e,t)=>{const n={version:2,compression:"pako@1",encryption:"AES-GCM"},i=new TextEncoder().encode(JSON.stringify(n)),r=new TextEncoder().encode(JSON.stringify(t.metadata||null)),{iv:s,buffer:o}=await D5e(Rk(r,e),t.encryptionKey);return Rk(i,s,o)},N5e=async(e,t,n,i)=>(t=new Uint8Array(await k0(e,t,n)),i?XG(t):t),tX=async(e,t)=>{const[n,i,r]=kk(e),s=JSON.parse(new TextDecoder().decode(n));try{const[o,a]=kk(await N5e(i,r,t.decryptionKey,!!s.compression));return{metadata:JSON.parse(new TextDecoder().decode(o)),data:a}}catch(o){throw console.error("Error during decompressing and decrypting the file.",s),o}},Xd=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}else if("showOpenFilePicker"in self)return"showOpenFilePicker";return!1})(),O5e=Xd?Ee(()=>import("./file-open-002ab408-DIuFHtCF.js"),__vite__mapDeps([]),import.meta.url):Ee(()=>import("./file-open-7c801643-684qeFg4.js"),__vite__mapDeps([]),import.meta.url);async function P5e(...e){return(await O5e).default(...e)}Xd?Ee(()=>import("./directory-open-4ed118d0-BzWybGaI.js"),__vite__mapDeps([]),import.meta.url):Ee(()=>import("./directory-open-01563666-DWU9wJ6I.js"),__vite__mapDeps([]),import.meta.url);const F5e=Xd?Ee(()=>import("./file-save-745eba88-Bb9F9Kg7.js"),__vite__mapDeps([]),import.meta.url):Ee(()=>import("./file-save-3189631c-x92wctJd.js"),__vite__mapDeps([]),import.meta.url);async function B5e(...e){return(await F5e).default(...e)}const Lk=5e3,kT=async e=>{var r,s;const t=(r=e.extensions)==null?void 0:r.reduce((o,a)=>(o.push(Te[a]),o),[]),n=(s=e.extensions)==null?void 0:s.reduce((o,a)=>a==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${a}`),[]),i=await P5e({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1,legacySetup:(o,a,l)=>{const c=sl(a,Lk),u=()=>{d(),document.addEventListener(te.KEYUP,c),document.addEventListener(te.POINTER_UP,c),c()},d=()=>{var h;if((h=l.files)!=null&&h.length){const m=e.multiple?[...l.files]:l.files[0];o(m)}};requestAnimationFrame(()=>{window.addEventListener(te.FOCUS,u)});const f=window.setInterval(()=>{d()},Lk);return h=>{clearInterval(f),c.cancel(),window.removeEventListener(te.FOCUS,u),document.removeEventListener(te.KEYUP,c),document.removeEventListener(te.POINTER_UP,c),h&&(console.warn("Opening the file was canceled (legacy-fs)."),h(new jh))}}});return Array.isArray(i)?await Promise.all(i.map(o=>N0(o))):await N0(i)},W6=(e,t)=>B5e(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`],mimeTypes:t.mimeTypes},t.fileHandle),z5e=(e,t)=>{const n={};for(const i of e)!i.isDeleted&&"fileId"in i&&i.fileId&&t[i.fileId]&&(n[i.fileId]=t[i.fileId]);return n},Rg=(e,t,n,i)=>{const r={type:Cs.excalidraw,version:ey.excalidraw,source:N9(),elements:i==="local"?IH(e):Xue(e),appState:i==="local"?rG(t):Y2e(t),files:i==="local"?z5e(e,n):void 0};return JSON.stringify(r,null,2)},nX=async(e,t,n,i=t.name||bB)=>{const r=Rg(e,t,n,"local"),s=new Blob([r],{type:Te.excalidraw});return{fileHandle:await W6(s,{name:i,extension:"excalidraw",description:"Excalidraw file",fileHandle:OT(t.fileHandle)?null:t.fileHandle})}},H5e=async(e,t)=>{const n=await kT({description:"Excalidraw files"});return PT(n,e,t,n.handle)},V5e=e=>(e==null?void 0:e.type)===Cs.excalidraw&&(!e.elements||Array.isArray(e.elements)&&(!e.appState||typeof e.appState=="object")),iX=e=>typeof e=="object"&&e&&e.type===Cs.excalidrawLibrary&&(e.version===1||e.version===2),$5e=e=>{const t={type:Cs.excalidrawLibrary,version:ey.excalidrawLibrary,source:N9(),libraryItems:e};return JSON.stringify(t,null,2)},G5e=async e=>{const t=$5e(e);await W6(new Blob([t],{type:Te.excalidrawlib}),{name:"library",extension:"excalidrawlib",description:"Excalidraw library file"})},X5e=12,rX=document.createElement("img");rX.src=`data:${Te.svg}, ${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#1971c2" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>')}`;const sX=document.createElement("img");sX.src=`data:${Te.svg}, ${encodeURIComponent('<svg  xmlns="http://www.w3.org/2000/svg"  width="16"  height="16"  viewBox="0 0 24 24"  fill="none"  stroke="#1971c2"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-big-right-line"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-6v-6h6z" /><path d="M3 9v6" /></svg>')}`;const LT=([e,t,n,i],r,s)=>{const o=X5e,a=s.zoom.value>1?s.zoom.value:1,l=o/a,c=o/a,u=o/a,d=(e+n)/2,f=(t+i)/2,h=(o-8)/(2*a),m=4/a,p=n+m-h,U=t-m-u+h,[b,y]=q(S(p+l/2,U+c/2),S(d,f),r);return[b-l/2,y-c/2,l,c]},oX=(e,t,n,[i,r])=>{const s=4/n.zoom.value,[o,a,l,c]=He(e,t),[u,d,f,h]=LT([o,a,l,c],e.angle,n);return i>u-s&&i<u+s+f&&r>d-s&&r<d+h+s},x3=(e,t,n,[i,r],s)=>!e.link||n.selectedElementIds[e.id]?!1:!s&&n.viewModeEnabled&&ay(S(i,r),e,t)?!0:oX(e,t,n,S(i,r)),Vy=(e,t,n,i,r,s=!0)=>{e.beginPath(),e.arc(t,n,i,0,Math.PI*2),s&&e.fill(),r&&e.stroke()},$y=(e,t)=>[e.width/t,e.height/t],Gy=({canvas:e,scale:t,normalizedWidth:n,normalizedHeight:i,theme:r,isExporting:s,viewBackgroundColor:o})=>{const a=e.getContext("2d");return a.setTransform(1,0,0,1,0,0),a.scale(t,t),s&&r===ke.DARK&&(a.filter=F9),typeof o=="string"?((o==="transparent"||o.length===5||o.length===9||/(hsla|rgba)\(/.test(o))&&a.clearRect(0,0,n,i),a.save(),a.fillStyle=o,a.fillRect(0,0,n,i),a.restore()):a.clearRect(0,0,n,i),a};function Nl(e,t,n=.5){const i=vse(t,n);if(i)for(let r=0;r<i.length-1;r++){const[[s,o],[a,l]]=i[r];e.quadraticCurveTo(s,o,a,l)}}function Ol(e,t,n=.5){const i=G9(t,n);if(i)for(let r=0;r<i.length;r++){const[[s,o],[a,l],[c,u]]=i[r];e.bezierCurveTo(s,o,a,l,c,u)}}const j5e=(e,t,n,i)=>{const[r,s]=q(S(t.x,t.y),oi(t,n),t.angle);e.save(),e.translate(r,s),e.rotate(t.angle);let o=dr(Math.min(t.width,t.height),t);o===0&&(o=.01),e.beginPath();{const a=Ll(S(0,0+o),S(0,0),S(0+o,0),i),l=Ll(S(t.width-o,0),S(t.width,0),S(t.width,o),i),c=Ll(S(t.width,t.height-o),S(t.width,t.height),S(t.width-o,t.height),i),u=Ll(S(o,t.height),S(0,t.height),S(0,t.height-o),i);e.moveTo(a[a.length-1][0],a[a.length-1][1]),e.lineTo(l[0][0],l[0][1]),Nl(e,l),e.lineTo(c[0][0],c[0][1]),Nl(e,c),e.lineTo(u[0][0],u[0][1]),Nl(e,u),e.lineTo(a[0][0],a[0][1]),Nl(e,a)}{const a=Ll(S(0+o,0),S(0,0),S(0,0+o),-5),l=Ll(S(t.width,o),S(t.width,0),S(t.width-o,0),-5),c=Ll(S(t.width-o,t.height),S(t.width,t.height),S(t.width,t.height-o),-5),u=Ll(S(0,t.height-o),S(0,t.height),S(o,t.height),-5);e.moveTo(a[a.length-1][0],a[a.length-1][1]),e.lineTo(u[0][0],u[0][1]),Nl(e,u),e.lineTo(c[0][0],c[0][1]),Nl(e,c),e.lineTo(l[0][0],l[0][1]),Nl(e,l),e.lineTo(a[0][0],a[0][1]),Nl(e,a)}e.closePath(),e.fill(),e.restore()},Y5e=(e,t,n,i,r,s)=>{e.beginPath(),e.ellipse(i,r,t/2,n/2,s,0,Math.PI*2),e.stroke()},Xy=(e,t,n,i,r,s,o,a,l=!1,c=0)=>{e.save(),e.translate(s,o),e.rotate(a),l&&e.fillRect(t-s,n-o,i,r),c&&e.roundRect?(e.beginPath(),e.roundRect(t-s,n-o,i,r,c),e.stroke(),e.closePath()):e.strokeRect(t-s,n-o,i,r),e.restore()},W5e=(e,t,n,i)=>{const[r,s]=q(S(n.x,n.y),oi(n,i),n.angle);e.save(),e.translate(r,s),e.rotate(n.angle);{e.beginPath();const[o,a,l,c,u,d,f,h]=S6(n),m=n.roundness?dr(Math.abs(o-f),n):(o-f)*.01,p=n.roundness?dr(Math.abs(c-a),n):(c-a)*.01,U=wo(Hn(S(o-m,a+p),S(o,a),S(o,a),S(o+m,a+p)),t),b=wo(Hn(S(l-m,c-p),S(l,c),S(l,c),S(l-m,c+p)),t),y=wo(Hn(S(u+m,d-p),S(u,d),S(u,d),S(u-m,d-p)),t),w=wo(Hn(S(f+m,h+p),S(f,h),S(f,h),S(f+m,h-p)),t);e.moveTo(U[U.length-1][0],U[U.length-1][1]),e.lineTo(b[1][0],b[1][1]),Ol(e,b),e.lineTo(y[1][0],y[1][1]),Ol(e,y),e.lineTo(w[1][0],w[1][1]),Ol(e,w),e.lineTo(U[1][0],U[1][1]),Ol(e,U)}{const[o,a,l,c,u,d,f,h]=S6(n),m=n.roundness?dr(Math.abs(o-f),n):(o-f)*.01,p=n.roundness?dr(Math.abs(c-a),n):(c-a)*.01,U=wo(Hn(S(o+m,a+p),S(o,a),S(o,a),S(o-m,a+p)),-5),b=wo(Hn(S(l-m,c+p),S(l,c),S(l,c),S(l-m,c-p)),-5),y=wo(Hn(S(u-m,d-p),S(u,d),S(u,d),S(u+m,d-p)),-5),w=wo(Hn(S(f+m,h-p),S(f,h),S(f,h),S(f+m,h+p)),-5);e.moveTo(U[U.length-1][0],U[U.length-1][1]),e.lineTo(w[1][0],w[1][1]),Ol(e,w),e.lineTo(y[1][0],y[1][1]),Ol(e,y),e.lineTo(b[1][0],b[1][1]),Ol(e,b),e.lineTo(U[1][0],U[1][1]),Ol(e,U)}e.closePath(),e.fill(),e.restore()},t2={Bold:"#dddddd",Regular:"#e5e5e5"},K5e=(e,t,n,i,r,s,o,a)=>{const l=i%t-t,c=r%t-t,u=t*s.value,d=1/s.value;e.save(),s.value===1&&e.translate(l%1?0:.5,c%1?0:.5);for(let f=l;f<l+o+t*2;f+=t){const h=n>1&&Math.round(f-i)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?t2.Bold:t2.Regular,e.moveTo(f,c-t),e.lineTo(f,Math.ceil(c+a+t*2)),e.stroke()}for(let f=c;f<c+a+t*2;f+=t){const h=n>1&&Math.round(f-r)%(n*t)===0;if(!h&&u<10)continue;const m=Math.min(1/s.value,h?4:1);e.lineWidth=m;const p=[m*3,d+(m+d)];e.beginPath(),e.setLineDash(h?[]:p),e.strokeStyle=h?t2.Bold:t2.Regular,e.moveTo(l-t,f),e.lineTo(Math.ceil(l+o+t*2),f),e.stroke()}e.restore()},Tv=(e,t,n,i)=>{t.translate(e.x+i.scrollX,e.y+i.scrollY),t.beginPath(),t.roundRect?t.roundRect(0,0,e.width,e.height,Ht.radius/i.zoom.value):t.rect(0,0,e.width,e.height),t.clip(),t.translate(-(e.x+i.scrollX),-(e.y+i.scrollY))},Dk={regularLink:null,elementLink:null},Nk=(e,t,n,i)=>{if(e.link&&!n.selectedElementIds[e.id]){const[r,s,o,a]=He(e,i),[l,c,u,d]=LT([r,s,o,a],e.angle,n),f=l+u/2,h=c+d/2;t.save(),t.translate(n.scrollX+f,n.scrollY+h),t.rotate(e.angle);const m=uh(e.link)?"elementLink":"regularLink";let p=Dk[m];if(!p||p.zoom!==n.zoom.value){p=Object.assign(document.createElement("canvas"),{zoom:n.zoom.value}),p.width=u*window.devicePixelRatio*n.zoom.value,p.height=d*window.devicePixelRatio*n.zoom.value,Dk[m]=p;const U=p.getContext("2d");U.scale(window.devicePixelRatio*n.zoom.value,window.devicePixelRatio*n.zoom.value),U.fillStyle=n.viewBackgroundColor||"#fff",U.fillRect(0,0,u,d),m==="elementLink"?U.drawImage(sX,0,0,u,d):U.drawImage(rX,0,0,u,d),U.restore()}t.drawImage(p,l-f,c-h,u,d),t.restore()}},aX=({canvas:e,rc:t,elementsMap:n,allElementsMap:i,visibleElements:r,scale:s,appState:o,renderConfig:a})=>{var p;if(e===null)return;const{renderGrid:l=!0,isExporting:c}=a,[u,d]=$y(e,s),f=Gy({canvas:e,scale:s,normalizedWidth:u,normalizedHeight:d,theme:o.theme,isExporting:c,viewBackgroundColor:o.viewBackgroundColor});f.scale(o.zoom.value,o.zoom.value),l&&K5e(f,o.gridSize,o.gridStep,o.scrollX,o.scrollY,o.zoom,u/o.zoom.value,d/o.zoom.value);const h=new Set;r.forEach(U=>{U.groupIds.length>0&&o.frameToHighlight&&o.selectedElementIds[U.id]&&(zc(U,o.frameToHighlight,n)||U.groupIds.find(b=>h.has(b)))&&U.groupIds.forEach(b=>h.add(b))});const m=new Map;r.filter(U=>!vs(U)).forEach(U=>{var b;try{const y=U.frameId||((b=o.frameToHighlight)==null?void 0:b.id);if(ge(U)&&U.containerId&&n.has(U.containerId))return;if(f.save(),y&&o.frameRendering.enabled&&o.frameRendering.clip){const v=y6(U,n,o);v&&O4(U,v,o,n,m)&&Tv(v,f,a,o),Tu(U,n,i,t,f,a,o)}else Tu(U,n,i,t,f,a,o);const w=Le(U,n);w&&Tu(w,n,i,t,f,a,o),f.restore(),c||Nk(U,f,o,n)}catch(y){console.error(y,U.id,U.x,U.y,U.width,U.height)}}),r.filter(U=>vs(U)).forEach(U=>{var b;try{const y=()=>{if(Tu(U,n,i,t,f,a,o),vs(U)&&(c||or(U)&&a.embedsValidationStatus.get(U.id)!==!0)&&U.width&&U.height){const v=cH(U);Tu(v,n,i,t,f,a,o)}c||Nk(U,f,o,n)};if((U.frameId||((b=o.frameToHighlight)==null?void 0:b.id))&&o.frameRendering.enabled&&o.frameRendering.clip){f.save();const v=y6(U,n,o);v&&O4(U,v,o,n,m)&&Tv(v,f,a,o),y(),f.restore()}else y()}catch(y){console.error(y)}}),(p=a.pendingFlowchartNodes)==null||p.forEach(U=>{try{Tu(U,n,i,t,f,a,o)}catch(b){console.error(b)}})},lX=bp(e=>{aX(e)},{trailing:!0}),cX=(e,t)=>{if(t){lX(e);return}aX(e)},pm=(e,t,n)=>{const i={sets:t.sets,shape:t.shape,options:{...t.options,fixedDecimalPlaceDigits:n}};return e.draw(i)},Um=(e,t,n,i,r)=>{if(!i.enabled||!i.clip)return null;const s=Ar(e,r);if(s){const o=t.ownerDocument.createElementNS(st,"g");return o.setAttributeNS(st,"clip-path",`url(#${s.id})`),n.forEach(a=>o.appendChild(a)),o}return null},nb=(e,t,n,i,r,s,o,a)=>{var w;const l={x:s,y:o},[c,u,d,f]=He(e,t);let h=(d-c)/2-(e.x-c),m=(f-u)/2-(e.y-u);if(ge(e)){const v=Yn(e,t);if(Ce(v)){const[I,x,_,T]=He(v,t),A=Ue.getBoundTextElementPosition(v,e,t);h=(_-I)/2-(A.x-I),m=(T-x)/2-(A.y-x),s=s+A.x-e.x,o=o+A.y-e.y}}const p=180*e.angle/Math.PI;let U=i;if(e.link){const v=i.ownerDocument.createElementNS(st,"a");v.setAttribute("href",ns(e.link)),U.appendChild(v),U=v}const b=(v,I)=>{U.appendChild(v)},y=(((w=Ar(e,t))==null?void 0:w.opacity)??100)*e.opacity/1e4;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":{const v=qt.generateElementShape(e,null),I=pm(n,v,sm);y!==1&&(I.setAttribute("stroke-opacity",`${y}`),I.setAttribute("fill-opacity",`${y}`)),I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const x=Um(e,U,[I],a.frameRendering,t);b(x||I);break}case"iframe":case"embeddable":{const v=qt.generateElementShape(e,a),I=pm(n,v,sm),x=e.opacity/100;x!==1&&(I.setAttribute("stroke-opacity",`${x}`),I.setAttribute("fill-opacity",`${x}`)),I.setAttribute("stroke-linecap","round"),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),b(I);const _=cH(e);nb(_,t,n,U,r,_.x+l.x-e.x,_.y+l.y-e.y,a);const T=pm(n,v,sm);for(T.setAttribute("stroke-linecap","round"),T.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);T.firstChild;)T.removeChild(T.firstChild);const A=dr(Math.min(e.width,e.height),e),C=Yf(K9(e.link||""));if(a.renderEmbeddables===!1||(C==null?void 0:C.type)==="document"){const k=i.ownerDocument.createElementNS(st,"a");k.setAttribute("href",ns(e.link||"")),k.setAttribute("target","_blank"),k.setAttribute("rel","noopener noreferrer"),k.style.borderRadius=`${A}px`,T.appendChild(k)}else{const k=i.ownerDocument.createElementNS(st,"foreignObject");k.style.width=`${e.width}px`,k.style.height=`${e.height}px`,k.style.border="none";const P=k.ownerDocument.createElementNS(st,"div");P.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),P.style.width="100%",P.style.height="100%";const D=P.ownerDocument.createElement("iframe");D.src=(C==null?void 0:C.link)??"",D.style.width="100%",D.style.height="100%",D.style.border="none",D.style.borderRadius=`${A}px`,D.style.top="0",D.style.left="0",D.allowFullscreen=!0,P.appendChild(D),k.appendChild(P),T.appendChild(k)}b(T);break}case"line":case"arrow":{const v=Le(e,t),I=i.ownerDocument.createElementNS(st,"mask");if(v){I.setAttribute("id",`mask-${e.id}`);const A=i.ownerDocument.createElementNS(st,"rect");s=s||0,o=o||0,A.setAttribute("x","0"),A.setAttribute("y","0"),A.setAttribute("fill","#fff"),A.setAttribute("width",`${e.width+100+s}`),A.setAttribute("height",`${e.height+100+o}`),I.appendChild(A);const C=i.ownerDocument.createElementNS(st,"rect"),k=Ue.getBoundTextElementPosition(e,v,t),P=s+k.x-e.x,D=o+k.y-e.y;C.setAttribute("x",P.toString()),C.setAttribute("y",D.toString()),C.setAttribute("fill","#000"),C.setAttribute("width",`${v.width}`),C.setAttribute("height",`${v.height}`),C.setAttribute("opacity","1"),I.appendChild(C)}const x=i.ownerDocument.createElementNS(st,"g");v&&x.setAttribute("mask",`url(#mask-${e.id})`),x.setAttribute("stroke-linecap","round"),qt.generateElementShape(e,a).forEach(A=>{const C=pm(n,A,sm);y!==1&&(C.setAttribute("stroke-opacity",`${y}`),C.setAttribute("fill-opacity",`${y}`)),C.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),e.type==="line"&&qo(e.points)&&e.backgroundColor!=="transparent"&&C.setAttribute("fill-rule","evenodd"),x.appendChild(C)});const T=Um(e,U,[x,I],a.frameRendering,t);T?(b(T),U.appendChild(T)):(b(x),U.append(I));break}case"freedraw":{const v=qt.generateElementShape(e,a),I=v?pm(n,v,sm):i.ownerDocument.createElementNS(st,"g");y!==1&&(I.setAttribute("stroke-opacity",`${y}`),I.setAttribute("fill-opacity",`${y}`)),I.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),I.setAttribute("stroke","none");const x=i.ownerDocument.createElementNS(st,"path");x.setAttribute("fill",e.strokeColor),x.setAttribute("d",Xz(e)),I.appendChild(x);const _=Um(e,U,[I],a.frameRendering,t);b(_||I);break}case"image":{const v=Math.round(e.width),I=Math.round(e.height),x=Ln(e)&&r[e.fileId];if(x){const{reuseImages:_=!0}=a;let T=`image-${x.id}`,A=e.width,C=e.height;e.crop&&({width:A,height:C}=ll(e),T=`image-crop-${x.id}-${P_(`${A}x${C}`)}`),_||(T=`image-${e.id}`);let k=i.querySelector(`#${T}`);if(!k){k=i.ownerDocument.createElementNS(st,"symbol"),k.id=T;const X=i.ownerDocument.createElementNS(st,"image");X.setAttribute("href",x.dataURL),X.setAttribute("preserveAspectRatio","none"),e.crop||!_?(X.setAttribute("width",`${A}`),X.setAttribute("height",`${C}`)):(X.setAttribute("width","100%"),X.setAttribute("height","100%")),k.appendChild(X),(U.querySelector("defs")||U).prepend(k)}const P=i.ownerDocument.createElementNS(st,"use");P.setAttribute("href",`#${T}`),a.exportWithDarkMode&&x.mimeType!==Te.svg&&P.setAttribute("filter",Pz);let D=0,j=0;if(e.crop){const{width:X,height:W}=ll(e);D=e.crop.x/(e.crop.naturalWidth/X),j=e.crop.y/(e.crop.naturalHeight/W)}const G=h+D,B=m+j;P.setAttribute("width",`${v+D}`),P.setAttribute("height",`${I+j}`),P.setAttribute("opacity",`${y}`),(e.scale[0]!==1||e.scale[1]!==1)&&P.setAttribute("transform",`translate(${G} ${B}) scale(${e.scale[0]} ${e.scale[1]}) translate(${-G} ${-B})`);const H=i.ownerDocument.createElementNS(st,"g");if(e.crop){const X=i.ownerDocument.createElementNS(st,"mask");X.setAttribute("id",`mask-image-crop-${e.id}`),X.setAttribute("fill","#fff");const W=i.ownerDocument.createElementNS(st,"rect");W.setAttribute("x",`${D}`),W.setAttribute("y",`${j}`),W.setAttribute("width",`${v}`),W.setAttribute("height",`${I}`),X.appendChild(W),U.appendChild(X),H.setAttribute("mask",`url(#${X.id})`)}if(H.appendChild(P),H.setAttribute("transform",`translate(${s-D} ${o-j}) rotate(${p} ${G} ${B})`),e.roundness){const X=i.ownerDocument.createElementNS(st,"clipPath");X.id=`image-clipPath-${e.id}`;const W=i.ownerDocument.createElementNS(st,"rect"),Q=dr(Math.min(e.width,e.height),e);W.setAttribute("width",`${e.width}`),W.setAttribute("height",`${e.height}`),W.setAttribute("rx",`${Q}`),W.setAttribute("ry",`${Q}`),X.appendChild(W),b(X),H.setAttributeNS(st,"clip-path",`url(#${X.id})`)}const $=Um(e,U,[H],a.frameRendering,t);b($||H)}break}case"frame":case"magicframe":{if(a.frameRendering.enabled&&a.frameRendering.outline){const v=document.createElementNS(st,"rect");v.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`),v.setAttribute("width",`${e.width}px`),v.setAttribute("height",`${e.height}px`),v.setAttribute("rx",Ht.radius.toString()),v.setAttribute("ry",Ht.radius.toString()),v.setAttribute("fill","none"),v.setAttribute("stroke",Ht.strokeColor),v.setAttribute("stroke-width",Ht.strokeWidth.toString()),b(v)}break}default:if(ge(e)){const v=i.ownerDocument.createElementNS(st,"g");y!==1&&(v.setAttribute("stroke-opacity",`${y}`),v.setAttribute("fill-opacity",`${y}`)),v.setAttribute("transform",`translate(${s||0} ${o||0}) rotate(${p} ${h} ${m})`);const I=e.text.replace(/\r\n?/g,`
`).split(`
`),x=_p(e.fontSize,e.lineHeight),_=e.textAlign==="center"?e.width/2:e.textAlign==="right"?e.width:0,T=EB(e.fontFamily,e.fontSize,x),A=PB(e.text)?"rtl":"ltr",C=e.textAlign==="center"?"middle":e.textAlign==="right"||A==="rtl"?"end":"start";for(let P=0;P<I.length;P++){const D=i.ownerDocument.createElementNS(st,"text");D.textContent=I[P],D.setAttribute("x",`${_}`),D.setAttribute("y",`${P*x+T}`),D.setAttribute("font-family",Up(e)),D.setAttribute("font-size",`${e.fontSize}px`),D.setAttribute("fill",e.strokeColor),D.setAttribute("text-anchor",C),D.setAttribute("style","white-space: pre;"),D.setAttribute("direction",A),D.setAttribute("dominant-baseline","alphabetic"),v.appendChild(D)}const k=Um(e,U,[v],a.frameRendering,t);b(k||v)}else throw new Error(`Unimplemented type ${e.type}`)}},Z5e=(e,t,n,i,r,s)=>{i&&(e.filter(o=>!vs(o)).forEach(o=>{if(!o.isDeleted){if(ge(o)&&o.containerId&&t.has(o.containerId))return;try{nb(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s);const a=Le(o,t);a&&nb(a,t,n,i,r,a.x+s.offsetX,a.y+s.offsetY,s)}catch(a){console.error(a)}}}),e.filter(o=>vs(o)).forEach(o=>{if(!o.isDeleted)try{nb(o,t,n,i,r,o.x+s.offsetX,o.y+s.offsetY,s)}catch(a){console.error(a)}}))},q5e=(e,t)=>{if(e.width<=t)return e;const i=document.createElement("canvas").getContext("2d");i.font=pt({fontFamily:e.fontFamily,fontSize:e.fontSize});let r=e.text;if(i.measureText(r).width>t)for(let o=r.length;o>0;o--){const a=`${r.slice(0,o)}...`;if(i.measureText(a).width<=t){r=a;break}}return Ie(e,{text:r,width:t})},Q5e=(e,t)=>{const n=[];for(const i of e){if(we(i)){let r=as({x:i.x,y:i.y-Ht.nameOffsetY,fontFamily:tt.Helvetica,fontSize:Ht.nameFontSize,lineHeight:Ht.nameLineHeight,strokeColor:t.exportWithDarkMode?Ht.nameColorDarkTheme:Ht.nameColorLightTheme,text:Nz(i)});r.y-=r.height,r=q5e(r,i.width),n.push(r)}n.push(i)}return n},uX=(e,t)=>(t=t||ia().frameRendering,{enabled:e?!0:t.enabled,outline:e?!1:t.outline,name:e?!1:t.name,clip:e?!0:t.clip}),dX=({elements:e,exportingFrame:t,frameRendering:n,exportWithDarkMode:i})=>{let r;return t?r=T_(e,t):n.enabled&&n.name?r=Q5e(e,{exportWithDarkMode:i}):r=e,r},K6=async(e,t,n,{exportBackground:i,exportPadding:r=bg,viewBackgroundColor:s,exportingFrame:o},a=(c,u)=>{const d=document.createElement("canvas");return d.width=c*t.exportScale,d.height=u*t.exportScale,{canvas:d,scale:t.exportScale}},l=async()=>{await Ja.loadElementsFonts(e)})=>{await l();const c=uX(o??null,t.frameRendering??null);o&&(c.clip=!1);const u=dX({elements:e,exportingFrame:o,exportWithDarkMode:t.exportWithDarkMode,frameRendering:c});o&&(r=0);const[d,f,h,m]=NT(o?[o]:w_(u),r),{canvas:p,scale:U=1}=a(h,m),b=ia(),{imageCache:y}=await fH({imageCache:new Map,fileIds:hH(u).map(w=>w.fileId),files:n});return cX({canvas:p,rc:iu.canvas(p),elementsMap:Zo(ve(u)),allElementsMap:Zo(ve(ou(e))),visibleElements:u,scale:U,appState:{...t,frameRendering:c,viewBackgroundColor:i?s:null,scrollX:-d+r,scrollY:-f+r,zoom:b.zoom,shouldCacheIgnoreZoom:!1,theme:t.exportWithDarkMode?ke.DARK:ke.LIGHT},renderConfig:{canvasBackgroundColor:s,imageCache:y,renderGrid:!1,isExporting:!0,embedsValidationStatus:new Map,elementsPendingErasure:new Set,pendingFlowchartNodes:null}}),p},$m=e=>document.createComment(` ${e} `),DT=async(e,t,n,i)=>{const r=uX((i==null?void 0:i.exportingFrame)??null,t.frameRendering??null);let{exportPadding:s=bg,exportWithDarkMode:o=!1,viewBackgroundColor:a,exportScale:l=1,exportEmbedScene:c}=t;const{exportingFrame:u=null}=i||{},d=dX({elements:e,exportingFrame:u,exportWithDarkMode:o,frameRendering:r});u&&(s=0);const[f,h,m,p]=NT(u?[u]:w_(d),s),U=-f+s,b=-h+s,y=document.createElementNS(st,"svg");y.setAttribute("version","1.1"),y.setAttribute("xmlns",st),y.setAttribute("viewBox",`0 0 ${m} ${p}`),y.setAttribute("width",`${m*l}`),y.setAttribute("height",`${p*l}`),o&&y.setAttribute("filter",F9);const w=y.ownerDocument.createElementNS(st,"defs"),v=y.ownerDocument.createElementNS(st,"metadata");if(y.appendChild($m("svg-source:excalidraw")),y.appendChild(v),y.appendChild(w),c)try{J5e({metadataElement:v,payload:Rg(e,t,n||{},"local")})}catch(k){console.error(k)}const I=v_(e);if(I.length){const k=ve(e);for(const P of I){const D=y.ownerDocument.createElementNS(st,"clipPath");D.setAttribute("id",P.id);const[j,G,B,H]=He(P,k),$=(B-j)/2-(P.x-j),X=(H-G)/2-(P.y-G),W=y.ownerDocument.createElementNS(st,"rect");W.setAttribute("transform",`translate(${P.x+U} ${P.y+b}) rotate(${P.angle} ${$} ${X})`),W.setAttribute("width",`${P.width}`),W.setAttribute("height",`${P.height}`),u||(W.setAttribute("rx",`${Ht.radius}`),W.setAttribute("ry",`${Ht.radius}`)),D.appendChild(W),w.appendChild(D)}}const x=i!=null&&i.skipInliningFonts?[]:await Ja.generateFontFaceDeclarations(e),_=`
      `,T=y.ownerDocument.createElementNS(st,"style");if(T.classList.add("style-fonts"),T.appendChild(document.createTextNode(`${_}${x.join(_)}`)),w.appendChild(T),t.exportBackground&&a){const k=y.ownerDocument.createElementNS(st,"rect");k.setAttribute("x","0"),k.setAttribute("y","0"),k.setAttribute("width",`${m}`),k.setAttribute("height",`${p}`),k.setAttribute("fill",a),y.appendChild(k)}const A=iu.svg(y),C=(i==null?void 0:i.renderEmbeddables)??!1;return Z5e(d,Zo(ve(d)),A,y,n||{},{offsetX:U,offsetY:b,isExporting:!0,exportWithDarkMode:o,renderEmbeddables:C,frameRendering:r,canvasBackgroundColor:a,embedsValidationStatus:C?new Map(d.filter(k=>we(k)).map(k=>[k.id,!0])):new Map,reuseImages:(i==null?void 0:i.reuseImages)??!0}),y},J5e=({payload:e,metadataElement:t})=>{const n=KG(JSON.stringify(qG({text:e})),!0);t.appendChild($m(`payload-type:${Te.excalidraw}`)),t.appendChild($m("payload-version:2")),t.appendChild($m("payload-start")),t.appendChild(document.createTextNode(n)),t.appendChild($m("payload-end"))},eye=({svg:e})=>{if(e.includes(`payload-type:${Te.excalidraw}`)){const t=e.match(/<!-- payload-start -->\s*(.+?)\s*<!-- payload-end -->/);if(!t)throw new Error("INVALID");const n=e.match(/<!-- payload-version:(\d+) -->/),r=((n==null?void 0:n[1])||"1")!=="1";try{const s=ZG(t[1],r),o=JSON.parse(s);if(!("encoded"in o)){if("type"in o&&o.type===Cs.excalidraw)return s;throw new Error("FAILED")}return QG(o)}catch(s){throw console.error(s),new Error("FAILED")}}throw new Error("INVALID")},NT=(e,t)=>{const[n,i,r,s]=nt(e),o=Gi(n,r)+t*2,a=Gi(i,s)+t*2;return[n,i,o,a]},tye=(e,t,n)=>{const[,,i,r]=NT(e,t).map(s=>Math.trunc(s*n));return[i,r]},nye={selection:!0,lasso:!0,text:!0,rectangle:!0,diamond:!0,ellipse:!0,line:!0,image:!0,arrow:!0,freedraw:!0,eraser:!1,custom:!0,frame:!0,embeddable:!0,hand:!0,laser:!1,magicframe:!1},iye=e=>Object.keys(tt).includes(e)?tt[e]:nu,df=(e,t)=>{if(!t)return null;const n=t.focus||0;return pe(e)?Bh(t)?{...t,focus:n,fixedPoint:ly(t.fixedPoint??[0,0])}:null:{...t,focus:n}},Pl=(e,t)=>{const n={type:t.type||e.type,version:e.version||1,versionNonce:e.versionNonce??0,index:e.index??null,isDeleted:e.isDeleted??!1,id:e.id||mr(),fillStyle:e.fillStyle||mn.fillStyle,strokeWidth:e.strokeWidth||mn.strokeWidth,strokeStyle:e.strokeStyle??mn.strokeStyle,roughness:e.roughness??mn.roughness,opacity:e.opacity==null?mn.opacity:e.opacity,angle:e.angle||0,x:t.x??e.x??0,y:t.y??e.y??0,strokeColor:e.strokeColor||mn.strokeColor,backgroundColor:e.backgroundColor||mn.backgroundColor,width:e.width||0,height:e.height||0,seed:e.seed??1,groupIds:e.groupIds??[],frameId:e.frameId??null,roundness:e.roundness?e.roundness:e.strokeSharpness==="round"?{type:Hd(e.type)?yn.LEGACY:yn.PROPORTIONAL_RADIUS}:null,boundElements:e.boundElementIds?e.boundElementIds.map(r=>({type:"arrow",id:r})):e.boundElements??[],updated:e.updated??yg(),link:e.link?ns(e.link):null,locked:e.locked??!1};("customData"in e||"customData"in t)&&(n.customData="customData"in t?t.customData:e.customData);const i={...e,...n,...Zz(n),...t};return delete i.strokeSharpness,delete i.boundElementIds,i},rye=(e,t)=>{var n;switch(e={...e},e.type){case"text":delete e.rawText;let i=e.fontSize,r=e.fontFamily;if("font"in e){const[f,h]=e.font.split(" ");i=parseFloat(f),r=iye(h)}const s=typeof e.text=="string"&&e.text||"",o=e.lineHeight||(e.height?Uae(e):Fc(e.fontFamily));return e=Pl(e,{fontSize:i,fontFamily:r,text:s,textAlign:e.textAlign||gp,verticalAlign:e.verticalAlign||Yb,containerId:e.containerId??null,originalText:e.originalText||s,autoResize:e.autoResize??!0,lineHeight:o}),t!=null&&t.deleteInvisibleElements&&!s&&!e.isDeleted&&(e={...e,originalText:s,isDeleted:!0},e=Da(e)),e;case"freedraw":return Pl(e,{points:e.points,lastCommittedPoint:null,simulatePressure:e.simulatePressure,pressures:e.pressures});case"image":return Pl(e,{status:e.status||"pending",fileId:e.fileId,scale:e.scale||[1,1],crop:e.crop??null});case"line":case"draw":const{startArrowhead:a=null,endArrowhead:l=null}=e;let c=e.x,u=e.y,d=!Array.isArray(e.points)||e.points.length<2?[S(0,0),S(e.width,e.height)]:e.points;return(d[0][0]!==0||d[0][1]!==0)&&({points:d,x:c,y:u}=Ue.getNormalizeElementPointsAndCoords(e)),Pl(e,{type:e.type==="draw"?"line":e.type,startBinding:df(e,e.startBinding),endBinding:df(e,e.endBinding),lastCommittedPoint:null,startArrowhead:a,endArrowhead:l,points:d,x:c,y:u,...nn(e)?{polygon:D4(e.points)?e.polygon??!1:!1}:{},...Ph(d)});case"arrow":{const{startArrowhead:f=null,endArrowhead:h="arrow"}=e;let m=e.x,p=e.y,U=!Array.isArray(e.points)||e.points.length<2?[S(0,0),S(e.width,e.height)]:e.points;(U[0][0]!==0||U[0][1]!==0)&&({points:U,x:m,y:p}=Ue.getNormalizeElementPointsAndCoords(e));const b={type:e.type,startBinding:df(e,e.startBinding),endBinding:df(e,e.endBinding),lastCommittedPoint:null,startArrowhead:f,endArrowhead:h,points:U,x:m,y:p,elbowed:e.elbowed,...Ph(U)};return pe(e)?Pl(e,{...b,elbowed:!0,startBinding:df(e,e.startBinding),endBinding:df(e,e.endBinding),fixedSegments:(n=e.fixedSegments)!=null&&n.length&&b.points.length>=4?e.fixedSegments:null,startIsSpecial:e.startIsSpecial,endIsSpecial:e.endIsSpecial}):Pl(e,b)}case"ellipse":case"rectangle":case"diamond":case"iframe":case"embeddable":return Pl(e,{});case"magicframe":case"frame":return Pl(e,{name:e.name??null})}return null},sye=(e,t)=>{if(e.boundElements){const n=e.boundElements.slice(),i=new Set;e.boundElements=n.reduce((r,s)=>{const o=t.get(s.id);if(o&&!i.has(s.id)){if(i.add(s.id),o.isDeleted)return r;r.push(s),ge(o)&&!o.containerId&&(o.containerId=e.id)}return r},[])}},oye=(e,t)=>{const n=e.containerId?t.get(e.containerId):null;if(e.angle=Ce(n)?0:(n==null?void 0:n.angle)??0,!n){e.containerId=null;return}if(!e.isDeleted&&n.boundElements&&!n.boundElements.find(i=>i.id===e.id)){const i=(n.boundElements||(n.boundElements=[])).slice();i.push({type:"text",id:e.id}),n.boundElements=i}},aye=(e,t)=>{e.frameId&&(t.get(e.frameId)||(e.frameId=null))},Id=(e,t,n)=>{const i=new Set,r=t?ve(t):null,s=ou((e||[]).reduce((a,l)=>{if(l.type==="selection")return a;let c=rye(l,{deleteInvisibleElements:n==null?void 0:n.deleteInvisibleElements});if(c){const u=r==null?void 0:r.get(l.id),d=(n==null?void 0:n.deleteInvisibleElements)&&Qa(l);(d||u&&u.version>c.version)&&(c=Da(c,u==null?void 0:u.version)),d&&(c={...c,isDeleted:!0}),i.has(c.id)&&(c={...c,id:mr()}),i.add(c.id),a.push(c)}return a},[]));if(!(n!=null&&n.repairBindings))return s;const o=ve(s);for(const a of s)a.frameId&&aye(a,o),ge(a)&&a.containerId?oye(a,o):a.boundElements&&sye(a,o),n.refreshDimensions&&ge(a)&&Object.assign(a,aH(a,Yn(a,o),o)),xe(a)&&(a.startBinding&&(!o.has(a.startBinding.elementId)||!Ce(a))&&(a.startBinding=null),a.endBinding&&(!o.has(a.endBinding.elementId)||!Ce(a))&&(a.endBinding=null));return s.map(a=>{if(pe(a)&&!rz(a)&&!yz(a.points))return{...a,...Eg(a,o,{points:[S(0,0),a.points[a.points.length-1]]}),index:a.index};if(pe(a)&&a.startBinding&&a.endBinding&&a.startBinding.elementId===a.endBinding.elementId&&a.points.length>1&&a.points.some(([l,c])=>Math.abs(l)>1e6||Math.abs(c)>1e6)){console.error("Fixing self-bound elbow arrow",a.id);const l=o.get(a.startBinding.elementId);return l?{...a,x:l.x+l.width/2,y:l.y-5,width:l.width,height:l.height,points:[S(0,0),S(0,-10),S(l.width/2+5,-10),S(l.width/2+5,l.height/2+5)]}:(console.error("Bound element not found",a.startBinding.elementId),a)}return a})},lye=(e,t,n)=>{const i=t[e];return i!==void 0?i:n[e]},Ok={isSidebarDocked:(e,t)=>["defaultSidebarDockedPreference",e.isSidebarDocked??lye("defaultSidebarDockedPreference",e,t)]},fX=(e,t)=>{var r;e=e||{};const n=ia(),i={};for(const s of Object.keys(Ok))if(s in e){const[o,a]=Ok[s](e,n);i[o]=a}for(const[s,o]of Object.entries(n)){const a=e[s],l=t?t[s]:void 0;i[s]=a!==void 0?a:l!==void 0?l:o}return{...i,cursorButton:(t==null?void 0:t.cursorButton)||"up",penDetected:(t==null?void 0:t.penDetected)??(e.penMode?e.penDetected??!1:!1),activeTool:{...tn(n,i.activeTool.type&&nye[i.activeTool.type]?i.activeTool:{type:"selection"}),lastActiveTool:null,locked:i.activeTool.locked??!1},zoom:{value:Va(b1(e.zoom)?e.zoom:((r=e.zoom)==null?void 0:r.value)??n.zoom.value)},openSidebar:typeof e.openSidebar=="string"?{name:As.name}:i.openSidebar,gridSize:dde(b1(e.gridSize)?e.gridSize:Kb),gridStep:SV(b1(e.gridStep)?e.gridStep:gB),editingFrame:null}},Sd=(e,t,n,i)=>({elements:Id(e==null?void 0:e.elements,n,i),appState:fX(e==null?void 0:e.appState,t||null),files:(e==null?void 0:e.files)||{}}),Pk=e=>{const t=Id(Yt(e.elements),null);return t.length?{...e,elements:t}:null},jy=(e=[],t)=>{const n=[];for(const i of e)if(Array.isArray(i)){const r=Pk({status:t,elements:i,id:mr(),created:Date.now()});r&&n.push(r)}else{const r=i,s=Pk({...r,id:r.id||mr(),status:r.status||t,created:r.created||Date.now()});s&&n.push(s)}return n},hX=async e=>{let t;if(e.type===Te.png)try{return await(await Ee(()=>Promise.resolve().then(()=>GX),void 0,import.meta.url)).decodePngMetadata(e)}catch(n){throw n.message==="INVALID"?new Ou("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Ou("Error: cannot restore image")}else if("text"in Blob?t=await e.text():t=await new Promise(n=>{const i=new FileReader;i.readAsText(e,"utf8"),i.onloadend=()=>{i.readyState===FileReader.DONE&&n(i.result)}}),e.type===Te.svg)try{return eye({svg:t})}catch(n){throw n.message==="INVALID"?new Ou("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):new Ou("Error: cannot restore image")}return t},gX=e=>{var t;return e&&((t=e.name.match(/\.(json|excalidraw|png|svg)$/))==null?void 0:t[1])||null},cye=e=>e==="png"||e==="svg",OT=e=>{const t=gX(e);return t==="png"||t==="svg"},mX=e=>!!e&&Object.values(Nh).includes(e),L0=e=>{const{type:t}=e||{};return mX(t)},pX=async(e,t,n,i)=>{const r=await hX(e);let s;try{try{s=JSON.parse(r)}catch(o){throw L0(e)?new Ou("Image doesn't contain scene","IMAGE_NOT_CONTAINS_SCENE_DATA"):o}if(V5e(s))return{type:Te.excalidraw,data:Sd({elements:IH(s.elements||[]),appState:{theme:t==null?void 0:t.theme,fileHandle:i||e.handle||null,...rG(s.appState||{}),...t?y0(s.elements||[],t):{}},files:s.files},t,n,{repairBindings:!0,refreshDimensions:!1,deleteInvisibleElements:!0})};if(iX(s))return{type:Te.excalidrawlib,data:s};throw new Error("Error: invalid file")}catch(o){throw o instanceof Ou?o:new Error("Error: invalid file")}},PT=async(e,t,n,i)=>{const r=await pX(e,t,n,i);if(r.type!==Te.excalidraw)throw new Error("Error: invalid file");return r.data},UX=(e,t="unpublished")=>{const n=JSON.parse(e);if(!iX(n))throw new Error("Invalid library");const i=n.libraryItems||n.library;return jy(i,t)},uye=async(e,t="unpublished")=>UX(await hX(e),t),D0=async e=>new Promise(async(t,n)=>{try{Ep(e)&&(e=await e),e.toBlob(i=>{if(!i)return n(new nhe("Error: Canvas too big","CANVAS_POSSIBLY_TOO_BIG"));t(i)})}catch(i){n(i)}}),dye=async e=>{try{const t=await window.crypto.subtle.digest("SHA-1",await Fp(e));return zB(new Uint8Array(t))}catch(t){return console.error(t),CH(40)}},bX=async e=>new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{const r=i.result;t(r)},i.onerror=r=>n(r),i.readAsDataURL(e)}),fye=(e,t)=>`data:${t};base64,${KG(j6(e),!0)}`,hye=e=>ZG(e.slice(e.indexOf(",")+1)),yX=async(e,t)=>{if(e.type===Te.svg)return e;const[n,i]=await Promise.all([Ee(()=>import("./pica-DxF4wvw4.js").then(s=>s.p),__vite__mapDeps([2,3]),import.meta.url).then(s=>s.default),Ee(()=>import("./image-blob-reduce.esm-B6b2_-a4.js"),__vite__mapDeps([]),import.meta.url).then(s=>s.default)]),r=i({pica:n({features:["js","wasm"]})});if(t.outputType){const{outputType:s}=t;r._create_blob=function(o){return this.pica.toBlob(o.out_canvas,s,.8).then(a=>(o.out_blob=a,o))}}if(!L0(e))throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"});return new File([await r.toBlob(e,{max:t.maxWidthOrHeight,alpha:!0})],e.name,{type:t.outputType||e.type})},Fk=(e,t="")=>new File([new TextEncoder().encode(e)],t,{type:Te.svg}),gye=async(e,t="")=>{let n;try{n=await fetch(e)}catch{throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"})}if(!n.ok)throw new Error("Error: failed to fetch image",{cause:"FETCH_ERROR"});const i=await n.blob();if(i.type&&L0(i)){const r=t||i.name||"";return new File([i],r,{type:i.type})}throw new Error("Error: unsupported file type",{cause:"UNSUPPORTED"})},mye=async e=>{var t,n;if(Xd)try{return await(e instanceof DataTransferItem?e:(n=(t=e.dataTransfer)==null?void 0:t.items)==null?void 0:n[0]).getAsFileSystemHandle()||null}catch(i){return console.warn(i.name,i.message),null}return null},pye=async e=>{let t=null;const n=[...new Uint8Array(await Fp(e.slice(0,15)))].join(" "),i={png:/^137 80 78 71 13 10 26 10\b/,jpg:/^255 216 255\b/,gif:/^71 73 70 56 57 97\b/,webp:/^82 73 70 70 \d+ \d+ \d+ \d+ 87 69 66 80 86 80 56\b/};for(const r of Object.keys(i))if(n.match(i[r])){t=Te[r];break}return t||e.type||null},ib=(e,t,n)=>new File([e],n||"",{type:t}),Bk=Symbol("fileNormalized"),N0=async e=>{var t,n,i;if(e[Bk])return e;if((t=e==null?void 0:e.name)!=null&&t.endsWith(".excalidrawlib"))e=ib(e,Te.excalidrawlib,e.name);else if((n=e==null?void 0:e.name)!=null&&n.endsWith(".excalidraw"))e=ib(e,Te.excalidraw,e.name);else if(!e.type||(i=e.type)!=null&&i.startsWith("image/")){const r=await pye(e);r&&r!==e.type&&(e=ib(e,r,e.name))}return e[Bk]=!0,e},Fp=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=r=>{var s;if(!((s=r.target)!=null&&s.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(r.target.result)},i.readAsArrayBuffer(e)}),Qs=32,Ft=12,Sc=256,EX=50,Mu="NOT_SPREADSHEET",O0="VALID_SPREADSHEET",Gm=e=>{const t=/^([-+]?)[$]?([-+]?)([\d.,]+)[%]?$/.exec(e);return t?parseFloat(`${(t[1]||t[2])+t[3]}`.replace(/,/g,"")):null},C3=(e,t)=>e.slice(1).every(n=>Gm(n[t])!==null),zk=e=>{const t=e[0].length;if(t>2)return{type:Mu,reason:"More than 2 columns"};if(t===1){if(!C3(e,0))return{type:Mu,reason:"Value is not numeric"};const l=Gm(e[0][0])===null,c=(l?e.slice(1):e).map(u=>Gm(u[0]));return c.length<2?{type:Mu,reason:"Less than two rows"}:{type:O0,spreadsheet:{title:l?e[0][0]:null,labels:null,values:c}}}const n=C3(e,0),i=C3(e,1);if(!n&&!i)return{type:Mu,reason:"Value is not numeric"};const[r,s]=i?[0,1]:[1,0],o=Gm(e[0][s])===null,a=o?e.slice(1):e;return a.length<2?{type:Mu,reason:"Less than 2 rows"}:{type:O0,spreadsheet:{title:o?e[0][s]:null,labels:a.map(l=>l[r]),values:a.map(l=>Gm(l[s]))}}},Uye=e=>{const t=[];for(let n=0;n<e[0].length;n++){const i=[];for(let r=0;r<e.length;r++)i.push(e[r][n]);t.push(i)}return t},bye=e=>{let t=e.trim().split(`
`).map(s=>s.trim().split("	"));if(t.length&&t[0].length!==2&&(t=e.trim().split(`
`).map(s=>s.trim().split(","))),t.length===0)return{type:Mu,reason:"No values"};const n=t[0].length;if(!t.every(s=>s.length===n))return{type:Mu,reason:"All rows don't have same number of columns"};const r=zk(t);if(r.type!==O0){const s=zk(Uye(t));if(s.type===O0)return s}return r},Z6=vre(bre),oo={fillStyle:"hachure",fontFamily:nu,fontSize:_l,opacity:100,roughness:1,strokeColor:je.black,roundness:null,strokeStyle:"solid",strokeWidth:1,verticalAlign:Wr.MIDDLE,locked:!1},vX=e=>{const t=(Qs+Ft)*e.values.length+Ft,n=Sc+Ft*2;return{chartWidth:t,chartHeight:n}},yye=(e,t,n,i,r)=>{var s;return((s=e.labels)==null?void 0:s.map((o,a)=>as({groupIds:[i],backgroundColor:r,...oo,text:o.length>8?`${o.slice(0,5)}...`:o,x:t+a*(Qs+Ft)+Ft*2,y:n+Ft/2,width:Qs,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"})))||[]},Eye=(e,t,n,i,r)=>{const s=as({groupIds:[i],backgroundColor:r,...oo,x:t-Ft,y:n-Ft,text:"0",textAlign:"right"}),o=as({groupIds:[i],backgroundColor:r,...oo,x:t-Ft,y:n-Sc-s.height/2,text:Math.max(...e.values).toLocaleString(),textAlign:"right"});return[s,o]},vye=(e,t,n,i,r)=>{const{chartWidth:s,chartHeight:o}=vX(e),a=wc({backgroundColor:r,groupIds:[i],...oo,type:"line",x:t,y:n,width:s,points:[S(0,0),S(s,0)]}),l=wc({backgroundColor:r,groupIds:[i],...oo,type:"line",x:t,y:n,height:o,points:[S(0,0),S(0,-280)]}),c=wc({backgroundColor:r,groupIds:[i],...oo,type:"line",x:t,y:n-Sc-Ft,strokeStyle:"dotted",width:s,opacity:EX,points:[S(0,0),S(s,0)]});return[a,l,c]},wX=(e,t,n,i,r,s)=>{const{chartWidth:o}=vX(e),a=e.title?as({backgroundColor:r,groupIds:[i],...oo,text:e.title,x:t+o/2,y:n-Sc-Ft*2-_l,roundness:null,textAlign:"center"}):null;return[...a?[a]:[],...yye(e,t,n,i,r),...Eye(e,t,n,i,r),...vye(e,t,n,i,r)]},wye=(e,t,n)=>{const i=Math.max(...e.values),r=mr(),s=Z6[Math.floor(Math.random()*Z6.length)];return[...e.values.map((a,l)=>{const c=a/i*Sc;return ta({backgroundColor:s,groupIds:[r],...oo,type:"rectangle",x:t+l*(Qs+Ft)+Ft,y:n-c-Ft,width:Qs,height:c})}),...wX(e,t,n,r,s)]},_ye=(e,t,n)=>{const i=Math.max(...e.values),r=mr(),s=Z6[Math.floor(Math.random()*Z6.length)];let o=0;const a=[];for(const p of e.values){const U=o*(Qs+Ft),b=-(p/i)*Sc;a.push([U,b]),o++}const l=Math.max(...a.map(p=>p[0])),c=Math.max(...a.map(p=>p[1])),u=Math.min(...a.map(p=>p[0])),d=Math.min(...a.map(p=>p[1])),f=wc({backgroundColor:s,groupIds:[r],...oo,type:"line",x:t+Ft+Qs/2,y:n-Ft,height:c-d,width:l-u,strokeWidth:2,points:a}),h=e.values.map((p,U)=>{const b=U*(Qs+Ft)+Ft/2,y=-(p/i)*Sc+Ft/2;return ta({backgroundColor:s,groupIds:[r],...oo,fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+b+Qs/2,y:n+y-Ft*2,width:Ft,height:Ft})}),m=e.values.map((p,U)=>{const b=U*(Qs+Ft)+Ft/2,y=p/i*Sc+Ft/2+Ft;return wc({backgroundColor:s,groupIds:[r],...oo,type:"line",x:t+b+Qs/2+Ft/2,y:n-y,height:y,strokeStyle:"dotted",opacity:EX,points:[S(0,0),S(0,y)]})});return[...wX(e,t,n,r,s),f,...m,...h]},Tye=(e,t,n,i)=>e==="line"?_ye(t,n,i):wye(t,n,i),FT="clipboard"in navigator&&"writeText"in navigator.clipboard,BT="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,Iye=e=>!!([Cs.excalidraw,Cs.excalidrawClipboard,Cs.excalidrawClipboardWithAPI].includes(e==null?void 0:e.type)&&Array.isArray(e.elements)),Sye=({types:e,files:t})=>{var i,r,s,o,a;!e&&!t&&console.warn("createPasteEvent: no types or files provided");const n=new ClipboardEvent(te.PASTE,{clipboardData:new DataTransfer});if(e)for(const[l,c]of Object.entries(e)){if(typeof c!="string"){t=t||[],t.push(c),(i=n.clipboardData)==null||i.items.add(c);continue}try{if((r=n.clipboardData)==null||r.items.add(c,l),((s=n.clipboardData)==null?void 0:s.getData(l))!==c)throw new Error(`Failed to set "${l}" as clipboardData item`)}catch(u){throw new Error(u.message)}}if(t){let l=-1;for(const c of t){l++;try{if((o=n.clipboardData)==null||o.items.add(c),((a=n.clipboardData)==null?void 0:a.files[l])!==c)throw new Error(`Failed to set file "${c.name}" as clipboardData item`)}catch(u){throw new Error(u.message)}}}return n},xye=({elements:e,files:t})=>{const n=ve(e),i=new Set(e.filter(a=>we(a)));let r=!1;const s=e.reduce((a,l)=>(Ln(l)&&(r=!0,t&&t[l.fileId]&&(a[l.fileId]=t[l.fileId])),a),{});r&&!t&&console.warn("copyToClipboard: attempting to file element(s) without providing associated `files` object.");const o={type:Cs.excalidrawClipboard,elements:e.map(a=>{if(Ar(a,n)&&!i.has(Ar(a,n))){const l=Vc(a);return _i(l,n,{frameId:null}),l}return a}),files:t?s:void 0};return JSON.stringify(o)},Cye=async(e,t,n)=>{await cu(xye({elements:e,files:t}),n)},Aye=e=>{const t=bye(e);return t.type===O0?{spreadsheet:t.spreadsheet}:null};function _X(e){var n;let t=[];for(const i of e.childNodes)if(i.nodeType===3){const r=(n=i.textContent)==null?void 0:n.trim();r&&t.push({type:"text",value:r})}else if(i instanceof HTMLImageElement){const r=i.getAttribute("src");r&&r.startsWith("http")&&t.push({type:"imageUrl",value:r})}else t=t.concat(_X(i));return t}const Mye=e=>{const t=e.value;try{const n=new DOMParser().parseFromString(t,Te.html),i=_X(n.body);if(i.length)return{type:"mixedContent",value:i}}catch(n){console.error(`error in parseHTMLFromPaste: ${n.message}`)}return null},Rye=async()=>{var n,i,r,s;const e={};let t;try{t=await((n=navigator.clipboard)==null?void 0:n.read())}catch(o){try{if((i=navigator.clipboard)!=null&&i.readText){console.warn(`navigator.clipboard.readText() failed (${o.message}). Failling back to navigator.clipboard.read()`);const a=await((r=navigator.clipboard)==null?void 0:r.readText());if(a)return{[Te.text]:a}}}catch(a){if((s=navigator.clipboard)!=null&&s.read)console.warn(`navigator.clipboard.readText() failed (${a.message}). Failling back to navigator.clipboard.read()`);else{if(a.name==="DataError")return console.warn(`navigator.clipboard.read() error, clipboard is probably empty: ${a.message}`),e;throw a}}throw o}for(const o of t)for(const a of o.types)if(VB(Lre,a))try{if(a===Te.text||a===Te.html)e[a]=await(await o.getType(a)).text();else if(mX(a)){const l=await o.getType(a),c=ib(l,a,void 0);e[a]=c}else throw new to(`Unsupported clipboard type: ${a}`)}catch(l){console.warn(l instanceof to?l.message:`Cannot retrieve ${a} from clipboardItem: ${l.message}`)}return Object.keys(e).length===0&&console.warn("No clipboard data found from clipboard.read()."),e},kye=async(e,t=!1)=>{try{const n=e.findByType(Te.html),i=!t&&n&&Mye(n);return i?i.value.every(r=>r.type==="text")?{type:"text",value:e.getData(Te.text)??i.value.map(r=>r.value).join(`
`).trim()}:i:{type:"text",value:(e.getData(Te.text)||"").trim()}}catch{return{type:"text",value:""}}},Lye=function(e){return this.find(t=>t.type===e)||null},Dye=function(e){const t=this.find(n=>n.type===e);return(t==null?void 0:t.value)??null},Nye=function(){return this.filter(e=>e.kind==="file")},Iv=async e=>{var i,r;let t;Bye(e)?t=(i=e.clipboardData)==null?void 0:i.items:t=(r=e.dataTransfer)==null?void 0:r.items;const n=(await Promise.all(Array.from(t||[]).map(async s=>{var o;if(s.kind==="file"){let a=s.getAsFile();if(a){const l=await mye(s);return a=await N0(a),{type:a.type,kind:"file",file:a,fileHandle:l}}}else if(s.kind==="string"){const{type:a}=s;let l;return"clipboardData"in e&&e.clipboardData?l=(o=e.clipboardData)==null?void 0:o.getData(a):l=await new Promise(c=>{s.getAsString(u=>c(u))}),{type:a,kind:"string",value:l}}return null}))).filter(s=>s!=null);return Object.assign(n,{findByType:Lye,getData:Dye,getFiles:Nye})},Oye=async(e,t=!1)=>{const n=await kye(e,t);if(n.type==="mixedContent")return{mixedContent:n.value};try{const i=!t&&Aye(n.value);if(i)return i}catch(i){console.error(i)}try{const i=JSON.parse(n.value),r=i.type===Cs.excalidrawClipboardWithAPI;if(Iye(i))return{elements:i.elements,files:i.files,text:t?JSON.stringify(i.elements,null,2):void 0,programmaticAPI:r}}catch{}return{text:n.value}},Pye=async e=>{try{await navigator.clipboard.write([new window.ClipboardItem({[Te.png]:e})])}catch(t){if(Ep(e))await navigator.clipboard.write([new window.ClipboardItem({[Te.png]:await e})]);else throw t}},cu=async(e,t)=>{var n,i;if(FT)try{await navigator.clipboard.writeText(e||"");return}catch(r){console.error(r)}try{if(t){if((n=t.clipboardData)==null||n.setData(Te.text,e||""),((i=t.clipboardData)==null?void 0:i.getData(Te.text))!==e)throw new Error("Failed to setData on clipboardEvent");return}}catch(r){console.error(r)}if(!Fye(e))throw new Error("Error copying to clipboard.")},Fye=e=>{e||(e=" ");const t=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;n.style.top=`${i}px`,n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);let r=!1;try{n.select(),n.setSelectionRange(0,n.value.length),r=document.execCommand("copy")}catch(s){console.error(s)}return n.remove(),r},Bye=e=>e.type===te.PASTE||e.type===te.COPY||e.type===te.CUT,Yy=(e,{selectedElementIds:t},n)=>{e=Yt(e);const i=n&&Wn(e,{selectedElementIds:t});let r=null,s=i?Ge(e,{selectedElementIds:t},{includeBoundTextElement:!0}):e;return i&&(s.length===1&&we(s[0])?(r=s[0],s=T_(e,r)):s.length>1&&(s=Ge(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:r,exportedElements:Ka(s)}},Wy=async(e,t,n,i,{exportBackground:r,exportPadding:s=bg,viewBackgroundColor:o,name:a=n.name||bB,fileHandle:l=null,exportingFrame:c=null})=>{if(t.length===0)throw new Error(R("alerts.cannotExportEmptyCanvas"));if(e==="svg"||e==="clipboard-svg"){const d=DT(t,{exportBackground:r,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:o,exportPadding:s,exportScale:n.exportScale,exportEmbedScene:n.exportEmbedScene&&e==="svg"},i,{exportingFrame:c});if(e==="svg")return W6(d.then(f=>new Blob([Hre+f.outerHTML],{type:Te.svg})),{description:"Export to SVG",name:a,extension:n.exportEmbedScene?"excalidraw.svg":"svg",mimeTypes:[Nh.svg],fileHandle:l});if(e==="clipboard-svg"){const f=await d.then(h=>h.outerHTML);try{await cu(f)}catch{throw new Error(R("errors.copyToSystemClipboardFailed"))}return}}const u=K6(t,n,i,{exportBackground:r,viewBackgroundColor:o,exportPadding:s,exportingFrame:c});if(e==="png"){let d=D0(u);return n.exportEmbedScene&&(d=d.then(f=>Ee(()=>Promise.resolve().then(()=>GX),void 0,import.meta.url).then(({encodePngMetadata:h})=>h({blob:f,metadata:Rg(t,n,i,"local")})))),W6(d,{description:"Export to PNG",name:a,extension:n.exportEmbedScene?"excalidraw.png":"png",mimeTypes:[Nh.png],fileHandle:l})}else if(e==="clipboard")try{const d=D0(u);await Pye(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(R("canvasError.canvasTooBig")):l0&&d.name==="TypeError"?new Error(`${R("alerts.couldNotCopyToClipboard")}

${R("hints.firefox_clipboard_write")}`):new Error(R("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")},zye=async(e,t,n,i)=>{const{exportBackground:r,viewBackgroundColor:s,fileHandle:o}=t,a=gX(o);if(!o||!cye(a))throw new Error("fileHandle should exist and should be of type svg or png when resaving");t={...t,exportEmbedScene:!0};const{exportedElements:l,exportingFrame:c}=Yy(e,t,!1);return await Wy(a,l,t,n,{exportBackground:r,viewBackgroundColor:s,name:i,fileHandle:o,exportingFrame:c}),{fileHandle:o}},Hye=de({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(e,t,n)=>({appState:{...t,name:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t,appProps:n,data:i,app:r})=>g(tbe,{label:R("labels.fileTitle"),value:r.getName(),onChange:s=>t(s),ignoreFocus:(i==null?void 0:i.ignoreFocus)??!1})}),Vye=de({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(e,t,n)=>({appState:{...t,exportScale:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Yt(e),s=Wn(i,t)?Ge(i,t):i;return g(fe,{children:B9.map(o=>{const[a,l]=tye(s,bg,o),c=`${R("imageExportDialog.label.scale")} ${o}x (${a}x${l})`;return g(Xe,{size:"small",type:"radio",icon:`${o}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:o===t.exportScale,onChange:()=>n(o)},o)})})}}),$ye=de({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(e,t,n)=>({appState:{...t,exportBackground:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g(ST,{checked:e.exportBackground,onChange:n=>t(n),children:R("imageExportDialog.label.withBackground")})}),TX=de({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(e,t,n)=>({appState:{...t,exportEmbedScene:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>N(ST,{checked:e.exportEmbedScene,onChange:n=>t(n),children:[R("imageExportDialog.label.embedScene"),g(gl,{label:R("imageExportDialog.tooltip.embedScene"),long:!0,children:g("div",{className:"excalidraw-tooltip-icon",children:Rde})})]})}),q6=de({name:"saveToActiveFile",label:"buttons.save",icon:Ey,trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.saveToActiveFile&&!!t.fileHandle&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{const r=!!t.fileHandle;try{const{fileHandle:s}=OT(t.fileHandle)?await zye(e,t,i.files,i.getName()):await nX(e,t,i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,fileHandle:s,toast:r?{message:s!=null&&s.name?R("toast.fileSavedToFilename").replace("{filename}",`"${s.name}"`):R("toast.fileSaved")}:null}}}catch(s){return(s==null?void 0:s.name)!=="AbortError"?console.error(s):console.warn(s),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===V.S&&e[V.CTRL_OR_CMD]&&!e.shiftKey}),IX=de({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:Ey,viewMode:!0,trackEvent:{category:"export"},perform:async(e,t,n,i)=>{try{const{fileHandle:r}=await nX(e,{...t,fileHandle:null},i.files,i.getName());return{captureUpdate:K.EVENTUALLY,appState:{...t,openDialog:null,fileHandle:r,toast:{message:R("toast.fileSaved")}}}}catch(r){return(r==null?void 0:r.name)!=="AbortError"?console.error(r):console.warn(r),{captureUpdate:K.EVENTUALLY}}},keyTest:e=>e.key===V.S&&e.shiftKey&&e[V.CTRL_OR_CMD],PanelComponent:({updateData:e})=>g(Xe,{type:"button",icon:xde,title:R("buttons.saveAs"),"aria-label":R("buttons.saveAs"),showAriaLabel:Nn().formFactor==="phone",hidden:!Xd,onClick:()=>e(null),"data-testid":"save-as-button"})}),Sv=de({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(e,t,n,i)=>!!i.props.UIOptions.canvasActions.loadScene&&!t.viewModeEnabled,perform:async(e,t,n,i)=>{try{const{elements:r,appState:s,files:o}=await H5e(t,e);return{elements:r,appState:s,files:o,captureUpdate:K.IMMEDIATELY}}catch(r){return(r==null?void 0:r.name)==="AbortError"?(console.warn(r),!1):{elements:e,appState:{...t,errorMessage:r.message},files:i.files,captureUpdate:K.EVENTUALLY}}},keyTest:e=>e[V.CTRL_OR_CMD]&&e.key===V.O}),Gye=de({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(e,t,n)=>({appState:{...t,exportWithDarkMode:n},captureUpdate:K.EVENTUALLY}),PanelComponent:({appState:e,updateData:t})=>g("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:g(ebe,{value:e.exportWithDarkMode?ke.DARK:ke.LIGHT,onChange:n=>{t(n===ke.DARK)},title:R("imageExportDialog.label.darkMode")})})});let SX="{}";const Xye=de({name:"copyStyles",label:"labels.copyStyles",icon:zV,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=[],s=e.find(o=>t.selectedElementIds[o.id]);if(r.push(s),s&&Di(s)){const o=Le(s,i.scene.getNonDeletedElementsMap());r.push(o)}return s&&(SX=JSON.stringify(r)),{appState:{...t,toast:{message:R("toast.copyStyles")}},captureUpdate:K.EVENTUALLY}},keyTest:e=>e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.C}),jye=de({name:"pasteStyles",label:"labels.pasteStyles",icon:zV,trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=JSON.parse(SX),s=r[0],o=r[1];if(!iz(s))return{elements:e,captureUpdate:K.EVENTUALLY};const a=Ge(e,t,{includeBoundTextElement:!0}),l=a.map(c=>c.id);return{elements:e.map(c=>{if(l.includes(c.id)){let u=s;if(ge(c)&&c.containerId&&(u=o),!u)return c;let d=Ie(c,{backgroundColor:u==null?void 0:u.backgroundColor,strokeWidth:u==null?void 0:u.strokeWidth,strokeColor:u==null?void 0:u.strokeColor,strokeStyle:u==null?void 0:u.strokeStyle,fillStyle:u==null?void 0:u.fillStyle,opacity:u==null?void 0:u.opacity,roughness:u==null?void 0:u.roughness,roundness:u.roundness?hae(u.roundness.type,c)?u.roundness:gae(c):null});if(ge(d)){const f=u.fontSize||_l,h=u.fontFamily||nu;d=Ie(d,{fontSize:f,fontFamily:h,textAlign:u.textAlign||gp,lineHeight:u.lineHeight||Fc(h)});let m=null;d.containerId&&(m=a.find(p=>ge(d)&&p.id===d.containerId)||null),Qi(d,m,i.scene)}return d.type==="arrow"&&Ce(u)&&(d=Ie(d,{startArrowhead:u.startArrowhead,endArrowhead:u.endArrowhead})),we(c)&&(d=Ie(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),captureUpdate:K.IMMEDIATELY}},keyTest:e=>e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.V}),zT=de({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:Tde,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(e,t,n,{focusContainer:i})=>{var r,s;return((r=t.openDialog)==null?void 0:r.name)==="help"&&i(),{appState:{...t,openDialog:((s=t.openDialog)==null?void 0:s.name)==="help"?null:{name:"help"},openMenu:null,openPopup:null},captureUpdate:K.EVENTUALLY}},keyTest:e=>e.key===V.QUESTION_MARK}),Yye=e=>{if(e.length>=2){const t=e[0].groupIds;for(const n of t)if(e.reduce((i,r)=>i&&h0(r,n),!0))return!0}return!1},Hk=(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});return i.length>=2&&!Yye(i)&&!Oz(i)},Wye=de({name:"group",label:"labels.group",icon:e=>g(oR,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=w_(i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}));if(r.length<2)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};const s=vc(t);if(s.length===1){const U=s[0],b=new Set(At(e,U).map(v=>v.id)),y=new Set(r.map(v=>v.id));if(new Set([...Array.from(b),...Array.from(y)]).size===b.size)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY}}let o=[...e];new Set(r.map(U=>U.frameId)).size>1&&Vle(r).forEach((b,y)=>{dy(b,i.scene.getNonDeletedElementsMap())});const l=mr(),c=ve(r);o=o.map(U=>c.get(U.id)?Ie(U,{groupIds:Ole(U.groupIds,l,t.editingGroupId)}):U);const u=At(o,l),d=u[u.length-1],f=o.lastIndexOf(d),h=o.slice(f+1),m=o.slice(0,f).filter(U=>!h0(U,l)),p=lo([...m,...u,...h],ve(u));return{appState:{...t,...xz(l,{...t,selectedGroupIds:{}},Yt(o))},elements:p,captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>Hk(e,t,i),keyTest:e=>!e.shiftKey&&e[V.CTRL_OR_CMD]&&e.key===V.G,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Hk(e,t,i),type:"button",icon:g(oR,{theme:t.theme}),onClick:()=>n(null),title:`${R("labels.group")}  ${J("CtrlOrCmd+G")}`,"aria-label":R("labels.group"),visible:Wn(Yt(e),t)})}),Kye=de({name:"ungroup",label:"labels.ungroup",icon:e=>g(aR,{theme:e.theme}),trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=vc(t),s=ve(e);if(r.length===0)return{appState:t,elements:e,captureUpdate:K.EVENTUALLY};let o=[...e];const a=[];o=o.map(f=>{Lt(f)&&a.push(f.id);const h=Ple(f.groupIds,t.selectedGroupIds);return h.length===f.groupIds.length?f:Ie(f,{groupIds:h})});const l=Si(t,Yt(o),t,null),c=i.scene.getSelectedElements(t),u=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return v_(e).filter(f=>u.has(f.id)).forEach(f=>{f&&(o=wg(o,Go(o,f,t,s),f,i))}),l.selectedElementIds=Object.entries(l.selectedElementIds).reduce((f,[h,m])=>(m&&!a.includes(h)&&(f[h]=!0),f),{}),{appState:{...t,...l},elements:o,captureUpdate:K.IMMEDIATELY}},keyTest:e=>e.shiftKey&&e[V.CTRL_OR_CMD]&&e.key===V.G.toUpperCase(),predicate:(e,t)=>vc(t).length>0,PanelComponent:({elements:e,appState:t,updateData:n})=>g(Xe,{type:"button",hidden:vc(t).length===0,icon:g(aR,{theme:t.theme}),onClick:()=>n(null),title:`${R("labels.ungroup")}  ${J("CtrlOrCmd+Shift+G")}`,"aria-label":R("labels.ungroup"),visible:Wn(Yt(e),t)})}),xX=(e,t,n,i,r,s,o)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.quadraticCurveTo(t+i,n,t+i,n+s),e.lineTo(t+i,n+r-s),e.quadraticCurveTo(t+i,n+r,t+i-s,n+r),e.lineTo(t+s,n+r),e.quadraticCurveTo(t,n+r,t,n+r-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fill(),o&&(e.strokeStyle=o),e.stroke()};function Zye(e){let t=0;if(e.length===0)return t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);t=(t<<5)-t+i}return t}const Ky=(e,t)=>`hsl(${Math.abs(Zye((t==null?void 0:t.id)||e))%37*10}, 100%, 83%)`,qye=e=>{var n;const t=(n=e==null?void 0:e.trim())==null?void 0:n.codePointAt(0);return(t?String.fromCodePoint(t):"?").toUpperCase()},Qye=({context:e,renderConfig:t,appState:n,normalizedWidth:i,normalizedHeight:r})=>{for(const[s,o]of t.remotePointerViewportCoords){let{x:a,y:l}=o;const c=n.collaborators.get(s);a-=n.offsetLeft,l-=n.offsetTop;const u=11,d=14,f=a<0||a>i-u||l<0||l>r-d;a=Math.max(a,0),a=Math.min(a,i-u),l=Math.max(l,0),l=Math.min(l,r-d);const h=Ky(s,c);e.save(),e.strokeStyle=h,e.fillStyle=h;const m=t.remotePointerUserStates.get(s),p=f||m===Du.IDLE||m===Du.AWAY;p&&(e.globalAlpha=.3),t.remotePointerButton.get(s)==="down"&&(e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=3,e.strokeStyle="#ffffff88",e.stroke(),e.closePath(),e.beginPath(),e.arc(a,l,15,0,2*Math.PI,!1),e.lineWidth=1,e.strokeStyle=h,e.stroke(),e.closePath());const U=n.theme===ke.DARK?"#2f6330":Rre,b=c==null?void 0:c.isSpeaking;b&&(e.fillStyle=U,e.strokeStyle=U,e.lineWidth=10,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill()),e.fillStyle=DU,e.strokeStyle=DU,e.lineWidth=6,e.lineJoin="round",e.beginPath(),e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.stroke(),e.fill(),e.fillStyle=h,e.strokeStyle=h,e.lineWidth=2,e.lineJoin="round",e.beginPath(),p?(e.moveTo(a-1,l-1),e.lineTo(a-1,l+15),e.lineTo(a+5,l+10),e.lineTo(a+12,l+9),e.closePath(),e.fill()):(e.moveTo(a,l),e.lineTo(a+0,l+14),e.lineTo(a+4,l+9),e.lineTo(a+11,l+8),e.closePath(),e.fill(),e.stroke());const y=t.remotePointerUsernames.get(s)||"";if(!f&&y){e.font="600 12px sans-serif";const w=(b?a+0:a)+u/2,v=(b?l+0:l)+d+2,I=5,x=3,_=e.measureText(y),T=_.actualBoundingBoxDescent+_.actualBoundingBoxAscent,A=Math.max(T,12),C=w-1,k=v-1,P=_.width+2+I*2+2,D=A+2+x*2+2;if(e.roundRect?(e.beginPath(),e.roundRect(C,k,P,D,8),e.fillStyle=h,e.fill(),e.strokeStyle=DU,e.stroke(),b&&(e.beginPath(),e.roundRect(C-2,k-2,P+4,D+4,8),e.strokeStyle=U,e.stroke())):xX(e,C,k,P,D,8,DU),e.fillStyle=Mre,e.fillText(y,w+I+1,v+x+_.actualBoundingBoxAscent+Math.floor((A-T)/2)+2),b){e.fillStyle=U;const j=8,G=8,B=5;e.fillRect(C+P+G,k+(D/2-j/2),2,j),e.fillRect(C+P+G+B,k+(D/2-j*2/2),2,j*2),e.fillRect(C+P+G+B*2,k+(D/2-j/2),2,j)}}e.restore(),e.closePath()}},Vk=({color:e,onClick:t,name:n,src:i,className:r})=>{const s=qye(n),[o,a]=L.useState(!1),l=!o&&i,c=l?void 0:{background:e};return g("div",{className:ce("Avatar",r),style:c,onClick:t,children:l?g("img",{className:"Avatar-img",src:i,alt:s,referrerPolicy:"no-referrer",onError:()=>a(!0)}):s})};de({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(e,t,n)=>{var i;return!n.socketId||((i=t.userToFollow)==null?void 0:i.socketId)===n.socketId||n.isCurrentUser?{appState:{...t,userToFollow:null},captureUpdate:K.EVENTUALLY}:{appState:{...t,userToFollow:{socketId:n.socketId,username:n.username||""},openMenu:t.openMenu==="canvas"?null:t.openMenu},captureUpdate:K.EVENTUALLY}},PanelComponent:({updateData:e,data:t,appState:n})=>{const{socketId:i,collaborator:r,withName:s,isBeingFollowed:o}=t,a=Ky(i,r),l=ce({"is-followed":o,"is-current-user":r.isCurrentUser===!0,"is-speaking":r.isSpeaking,"is-in-call":r.isInCall,"is-muted":r.isMuted}),c=r.isInCall?r.isSpeaking?N("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:R("userList.hint.isSpeaking"),children:[g("div",{}),g("div",{}),g("div",{})]}):r.isMuted?g("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:R("userList.hint.micMuted"),children:Dfe}):g("div",{title:R("userList.hint.inCall"),children:Lfe}):null;return s?N("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${l}`,style:{"--avatar-size":"1.5rem"},onClick:()=>e(r),children:[g(Vk,{color:a,onClick:()=>{},name:r.username||"",src:r.avatarUrl,className:l}),g("div",{className:"UserList__collaborator-name",children:r.username}),N("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[o&&g("div",{className:"UserList__collaborator-status-icon-is-followed",title:R("userList.hint.followStatus"),children:Q_}),c]})]}):N("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${l}`,children:[g(Vk,{color:a,onClick:()=>{e(r)},name:r.username||"",src:r.avatarUrl,className:l}),c&&g("div",{className:"UserList__collaborator-status-icon",children:c})]})}});const Jye=de({name:"addToLibrary",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(const s of UB)if(r.some(o=>o.type===s))return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:R(`errors.libraryElementTypeError.${s}`)}};return i.library.getLatestLibrary().then(s=>i.library.setLibrary([{id:mr(),status:"unpublished",elements:r.map(Vc),created:Date.now()},...s])).then(()=>({captureUpdate:K.EVENTUALLY,appState:{...t,toast:{message:R("toast.addedToLibrary")}}})).catch(s=>({captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:s.message}}))},label:"labels.addToLibrary"}),Rr=(e,t)=>{const n=t.scene.getSelectedElements(e);return cy(n,t.scene.getNonDeletedElementsMap(),e).length>1&&!n.some(i=>we(i))},kg=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=pce(r,i,n.scene,t),o=ve(s);return Gh(e.map(a=>o.get(a.id)||a),t,n)};de({name:"alignTop",label:"labels.alignTop",icon:eR,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Rr(t,i),perform:(e,t,n,i)=>({appState:t,elements:kg(e,t,i,{position:"start",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[V.CTRL_OR_CMD]&&e.shiftKey&&e.key===V.ARROW_UP,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Rr(t,i),type:"button",icon:eR,onClick:()=>n(null),title:`${R("labels.alignTop")}  ${J("CtrlOrCmd+Shift+Up")}`,"aria-label":R("labels.alignTop"),visible:Wn(Yt(e),t)})});de({name:"alignBottom",label:"labels.alignBottom",icon:tR,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Rr(t,i),perform:(e,t,n,i)=>({appState:t,elements:kg(e,t,i,{position:"end",axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[V.CTRL_OR_CMD]&&e.shiftKey&&e.key===V.ARROW_DOWN,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Rr(t,i),type:"button",icon:tR,onClick:()=>n(null),title:`${R("labels.alignBottom")}  ${J("CtrlOrCmd+Shift+Down")}`,"aria-label":R("labels.alignBottom"),visible:Wn(Yt(e),t)})});de({name:"alignLeft",label:"labels.alignLeft",icon:nR,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Rr(t,i),perform:(e,t,n,i)=>({appState:t,elements:kg(e,t,i,{position:"start",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[V.CTRL_OR_CMD]&&e.shiftKey&&e.key===V.ARROW_LEFT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Rr(t,i),type:"button",icon:nR,onClick:()=>n(null),title:`${R("labels.alignLeft")}  ${J("CtrlOrCmd+Shift+Left")}`,"aria-label":R("labels.alignLeft"),visible:Wn(Yt(e),t)})});de({name:"alignRight",label:"labels.alignRight",icon:iR,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Rr(t,i),perform:(e,t,n,i)=>({appState:t,elements:kg(e,t,i,{position:"end",axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>e[V.CTRL_OR_CMD]&&e.shiftKey&&e.key===V.ARROW_RIGHT,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Rr(t,i),type:"button",icon:iR,onClick:()=>n(null),title:`${R("labels.alignRight")}  ${J("CtrlOrCmd+Shift+Right")}`,"aria-label":R("labels.alignRight"),visible:Wn(Yt(e),t)})});de({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:rR,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Rr(t,i),perform:(e,t,n,i)=>({appState:t,elements:kg(e,t,i,{position:"center",axis:"y"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Rr(t,i),type:"button",icon:rR,onClick:()=>n(null),title:R("labels.centerVertically"),"aria-label":R("labels.centerVertically"),visible:Wn(Yt(e),t)})});de({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:sR,trackEvent:{category:"element"},predicate:(e,t,n,i)=>Rr(t,i),perform:(e,t,n,i)=>({appState:t,elements:kg(e,t,i,{position:"center",axis:"x"}),captureUpdate:K.IMMEDIATELY}),PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!Rr(t,i),type:"button",icon:sR,onClick:()=>n(null),title:R("labels.centerHorizontally"),"aria-label":R("labels.centerHorizontally"),visible:Wn(Yt(e),t)})});const CX=(e,t)=>{const n=t.scene.getSelectedElements(e);return cy(n,t.scene.getNonDeletedElementsMap(),e).length>2&&!n.some(i=>we(i))},AX=(e,t,n,i)=>{const r=n.scene.getSelectedElements(t),s=Zce(r,n.scene.getNonDeletedElementsMap(),i,t),o=ve(s);return Gh(e.map(a=>o.get(a.id)||a),t,n)};de({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:AX(e,t,i,{axis:"x"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.H,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!CX(t,i),type:"button",icon:Ode,onClick:()=>n(null),title:`${R("labels.distributeHorizontally")}  ${J("Alt+H")}`,"aria-label":R("labels.distributeHorizontally"),visible:Wn(Yt(e),t)})});de({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(e,t,n,i)=>({appState:t,elements:AX(e,t,i,{axis:"y"}),captureUpdate:K.IMMEDIATELY}),keyTest:e=>!e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.V,PanelComponent:({elements:e,appState:t,updateData:n,app:i})=>g(Xe,{hidden:!CX(t,i),type:"button",icon:Pde,onClick:()=>n(null),title:`${R("labels.distributeVertically")}  ${J("Alt+V")}`,"aria-label":R("labels.distributeVertically"),visible:Wn(Yt(e),t)})});const eEe=de({name:"flipHorizontal",label:"labels.flipHorizontal",icon:Ffe,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Gh(MX(e,i.scene.getNonDeletedElementsMap(),t,"horizontal",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===it.H}),tEe=de({name:"flipVertical",label:"labels.flipVertical",icon:Pfe,trackEvent:{category:"element"},perform:(e,t,n,i)=>({elements:Gh(MX(e,i.scene.getNonDeletedElementsMap(),t,"vertical",i),t,i),appState:t,captureUpdate:K.IMMEDIATELY}),keyTest:e=>e.shiftKey&&e.code===it.V&&!e[V.CTRL_OR_CMD]}),MX=(e,t,n,i,r)=>{const s=Ge(Yt(e),n,{includeBoundTextElement:!0,includeElementsInFrames:!0}),o=nEe(s,t,n,i,r),a=ve(o);return e.map(l=>a.get(l.id)||l)},nEe=(e,t,n,i,r)=>{if(e.every(h=>Ce(h)&&(h.startBinding||h.endBinding)))return e.map(h=>{const m=h;return Ie(m,{startArrowhead:m.endArrowhead,endArrowhead:m.startArrowhead})});const{midX:s,midY:o}=Ms(e);gH(e,t,"nw",r.scene,new Map(Array.from(t.values()).map(h=>[h.id,Vc(h)])),{flipByX:i==="horizontal",flipByY:i==="vertical",shouldResizeFromCenter:!0,shouldMaintainAspectRatio:!0}),g6(e.filter(xe),Ju(n),[],r.scene,n.zoom);const{elbowArrows:a,otherElements:l}=e.reduce((h,m)=>pe(m)?{...h,elbowArrows:h.elbowArrows.concat(m)}:{...h,otherElements:h.otherElements.concat(m)},{elbowArrows:[],otherElements:[]}),{midX:c,midY:u}=Ms(e),[d,f]=[s-c,o-u];return l.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),a.forEach(h=>r.scene.mutateElement(h,{x:h.x+d,y:h.y+f})),e},rb=de({name:"copy",label:"labels.copy",icon:iv,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await Cye(r,i.files,n)}catch(s){return{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:s.message}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),$k=de({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(e,t,n,i)=>{let r;try{r=await Rye()}catch(s){return s.name==="AbortError"||s.name==="NotAllowedError"?!1:(console.error(`actionPaste ${s.name}: ${s.message}`),l0?{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:R("hints.firefox_clipboard_write")}}:{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:R("errors.asyncPasteFailedOnRead")}})}try{i.pasteFromClipboard(Sye({types:r}))}catch(s){return console.error(s),{captureUpdate:K.EVENTUALLY,appState:{...t,errorMessage:R("errors.asyncPasteFailedOnParse")}}}return{captureUpdate:K.EVENTUALLY}},keyTest:void 0}),Gk=de({name:"cut",label:"labels.cut",icon:vfe,trackEvent:{category:"element"},perform:(e,t,n,i)=>(rb.perform(e,t,n,i),YV.perform(e,t,null,i)),keyTest:e=>e[V.CTRL_OR_CMD]&&e.key===V.X}),Xk=de({name:"copyAsSvg",label:"labels.copyAsSvg",icon:Bfe,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const{exportedElements:r,exportingFrame:s}=Yy(e,t,!0);try{await Wy("clipboard-svg",r,t,i.files,{...t,exportingFrame:s,name:i.getName()});const o=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});return{appState:{toast:{message:R("toast.copyToClipboardAsSvg",{exportSelection:o.length?R("toast.selection"):R("toast.canvas"),exportColorScheme:t.exportWithDarkMode?R("buttons.darkMode"):R("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(o){return console.error(o),{appState:{errorMessage:o.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>FT&&e.length>0,keywords:["svg","clipboard","copy"]}),jk=de({name:"copyAsPng",label:"labels.copyAsPng",icon:zfe,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{if(!i.canvas)return{captureUpdate:K.EVENTUALLY};const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:s,exportingFrame:o}=Yy(e,t,!0);try{return await Wy("clipboard",s,t,i.files,{...t,exportingFrame:o,name:i.getName()}),{appState:{...t,toast:{message:R("toast.copyToClipboardAsPng",{exportSelection:r.length?R("toast.selection"):R("toast.canvas"),exportColorScheme:t.exportWithDarkMode?R("buttons.darkMode"):R("buttons.lightMode")})}},captureUpdate:K.EVENTUALLY}}catch(a){return console.error(a),{appState:{...t,errorMessage:a.message},captureUpdate:K.EVENTUALLY}}},predicate:e=>BT&&e.length>0,keyTest:e=>e.code===it.C&&e.altKey&&e.shiftKey,keywords:["png","clipboard","copy"]}),Yk=de({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0});try{cu(hz(r))}catch{throw new Error(R("errors.copyToSystemClipboardFailed"))}return{captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>FT&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0}).some(ge),keywords:["text","clipboard","copy"]}),Wk=de({name:"gridMode",icon:Xfe,keywords:["snap"],label:"labels.toggleGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:e=>e.gridModeEnabled},perform(e,t){return{appState:{...t,gridModeEnabled:!this.checked(t),objectsSnapModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[V.CTRL_OR_CMD]&&e.code===it.QUOTE}),xv=de({name:"zenMode",label:"buttons.zenMode",icon:Vfe,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.zenModeEnabled},perform(e,t){return{appState:{...t,zenModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.zenModeEnabled,predicate:(e,t,n,i)=>i.editorInterface.formFactor!=="phone"&&typeof n.zenModeEnabled>"u",keyTest:e=>!e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.Z}),iEe=de({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:Hfe,viewMode:!1,trackEvent:{category:"canvas",predicate:e=>!e.objectsSnapModeEnabled},perform(e,t){return{appState:{...t,objectsSnapModeEnabled:!this.checked(t),gridModeEnabled:!1},captureUpdate:K.EVENTUALLY}},checked:e=>e.objectsSnapModeEnabled,predicate:(e,t,n)=>typeof n.objectsSnapModeEnabled>"u",keyTest:e=>!e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.S}),Cv=de({name:"stats",label:"stats.fullTitle",icon:Ofe,viewMode:!0,trackEvent:{category:"menu"},keywords:["edit","attributes","customize"],perform(e,t){return{appState:{...t,stats:{...t.stats,open:!this.checked(t)}},captureUpdate:K.EVENTUALLY}},checked:e=>e.stats.open,keyTest:e=>!e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.SLASH}),rEe=de({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>i.scene.getSelectedElements(t).some(s=>Di(s)),perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=i.scene.getNonDeletedElementsMap();return r.forEach(o=>{var l;const a=Le(o,s);if(a){const{width:c,height:u}=jn(a.originalText,pt(a),a.lineHeight),d=mae(o.id);az(o.id);const{x:f,y:h}=su(o,a,s);i.scene.mutateElement(a,{containerId:null,width:c,height:u,text:a.originalText,x:f,y:h}),i.scene.mutateElement(o,{boundElements:(l=o.boundElements)==null?void 0:l.filter(m=>m.id!==a.id),height:d||o.height})}}),{elements:e,appState:t,captureUpdate:K.IMMEDIATELY}}}),sEe=de({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);if(r.length===2){const s=ge(r[0])||ge(r[1]);let o;if(Qu(r[0])?o=r[0]:Qu(r[1])&&(o=r[1]),s&&o&&Le(o,i.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);let s,o;ge(r[0])&&Qu(r[1])?(s=r[0],o=r[1]):(s=r[1],o=r[0]),i.scene.mutateElement(s,{containerId:o.id,verticalAlign:Wr.MIDDLE,textAlign:a0.CENTER,autoResize:!0,angle:Ce(o)?0:(o==null?void 0:o.angle)??0}),i.scene.mutateElement(o,{boundElements:(o.boundElements||[]).concat({type:"text",id:s.id})});const a=o.height;return Qi(s,o,i.scene),u6(o.id,a),{elements:oEe(e,o,s),appState:{...t,selectedElementIds:{[o.id]:!0}},captureUpdate:K.IMMEDIATELY}}}),oEe=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===n.id);i.splice(r,1);const s=i.findIndex(o=>o.id===t.id);return i.splice(s+1,0,n),lo(i,ve([t,n])),i},aEe=(e,t,n)=>{const i=e.slice(),r=i.findIndex(o=>o.id===t.id);i.splice(r,1);const s=i.findIndex(o=>o.id===n.id);return i.splice(s,0,t),lo(i,ve([t,n])),i},lEe=de({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t),s=r.some(o=>ge(o)&&!Lt(o));return r.length>0&&s},perform:(e,t,n,i)=>{var a;const r=i.scene.getSelectedElements(t);let s=e.slice();const o={};for(const l of r)if(ge(l)&&!Lt(l)){const c=ta({type:"rectangle",backgroundColor:t.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:t.currentItemFillStyle,strokeColor:t.currentItemStrokeColor,roughness:t.currentItemRoughness,strokeWidth:t.currentItemStrokeWidth,strokeStyle:t.currentItemStrokeStyle,roundness:t.currentItemRoundness==="round"?{type:Hd("rectangle")?yn.ADAPTIVE_RADIUS:yn.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-$n,y:l.y-$n,width:pd(l.width,"rectangle"),height:pd(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if((a=l.boundElements)!=null&&a.length){const u=l.boundElements.filter(f=>f.type==="arrow").map(f=>f.id);s.filter(f=>u.includes(f.id)).forEach(f=>{let h=f.startBinding,m=f.endBinding;(h==null?void 0:h.elementId)===l.id&&(h={...h,elementId:c.id}),(m==null?void 0:m.elementId)===l.id&&(m={...m,elementId:c.id}),(h||m)&&i.scene.mutateElement(f,{startBinding:h,endBinding:m})})}i.scene.mutateElement(l,{containerId:c.id,verticalAlign:Wr.MIDDLE,boundElements:null,textAlign:a0.CENTER,autoResize:!0}),Qi(l,c,i.scene),s=aEe([...s,c],c,l),o[c.id]=!0}return{elements:s,appState:{...t,selectedElementIds:o},captureUpdate:K.IMMEDIATELY}}}),HT=380,cEe=42,Av=5,RX=85,uEe=500;let Mv=!1;const n2=new Map,dEe=({element:e,scene:t,setAppState:n,onLinkOpen:i,setToast:r,updateEmbedValidationStatus:s})=>{const o=t.getNonDeletedElementsMap(),a=Hp(),l=zp(),c=Nn(),u=e.link||"",[d,f]=L.useState(u),h=L.useRef(null),m=a.showHyperlinkPopup==="editor",p=L.useCallback(()=>{var I;if(!h.current)return;const v=ns(h.current.value)||null;if(!e.link&&v&&Je("hyperlink","create"),or(e)){if(((I=a.activeEmbeddable)==null?void 0:I.element)===e&&n({activeEmbeddable:null}),!v){t.mutateElement(e,{link:null}),s(e,!1);return}if(!V2(v,l.validateEmbeddable))v&&r({message:R("toast.unableToEmbed"),closable:!0}),e.link&&n2.set(e.id,e.link),t.mutateElement(e,{link:v}),s(e,!1);else{const{width:x,height:_}=e,T=Yf(v);(T==null?void 0:T.error)instanceof URIError&&r({message:R("toast.unrecognizedLinkFormat"),closable:!0});const A=T?T.intrinsicSize.w/T.intrinsicSize.h:1,C=n2.get(e.id)!==e.link;t.mutateElement(e,{...C?{width:(T==null?void 0:T.type)==="video"?x>_?x:_*A:x,height:(T==null?void 0:T.type)==="video"&&x>_?x/A:_}:{},link:v}),s(e,!0),n2.has(e.id)&&n2.delete(e.id)}}else t.mutateElement(e,{link:v})},[e,t,r,l.validateEmbeddable,a.activeEmbeddable,n,s]);L.useLayoutEffect(()=>()=>{p()},[p]),L.useEffect(()=>{m&&(h!=null&&h.current)&&!(c.formFactor==="phone"||c.isTouchScreen)&&h.current.select()},[m,c.formFactor,c.isTouchScreen]),L.useEffect(()=>{let v=null;const I=x=>{if(m)return;v&&clearTimeout(v),gEe(e,o,a,S(x.clientX,x.clientY))&&(v=window.setTimeout(()=>{n({showHyperlinkPopup:!1})},uEe))};return window.addEventListener(te.POINTER_MOVE,I,!1),()=>{window.removeEventListener(te.POINTER_MOVE,I,!1),v&&clearTimeout(v)}},[a,e,m,n,o]);const U=L.useCallback(()=>{Je("hyperlink","delete"),t.mutateElement(e,{link:null}),n({showHyperlinkPopup:!1})},[n,e,t]),b=()=>{Je("hyperlink","edit","popup-ui"),n({showHyperlinkPopup:"editor"})},{x:y,y:w}=kX(e,a,o);return a.contextMenu||a.selectedElementsAreBeingDragged||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:N("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${w}px`,left:`${y}px`,width:HT,padding:Av},children:[m?g("input",{className:ce("excalidraw-hyperlinkContainer-input"),placeholder:R("labels.link.hint"),ref:h,value:d,onChange:v=>f(v.target.value),autoFocus:!0,onKeyDown:v=>{v.stopPropagation(),v[V.CTRL_OR_CMD]&&v.key===V.K&&v.preventDefault(),(v.key===V.ENTER||v.key===V.ESCAPE)&&(p(),n({showHyperlinkPopup:"info"}))}}):e.link?g("a",{href:ns(e.link||""),className:"excalidraw-hyperlinkContainer-link",target:YB(e.link)?"_self":"_blank",onClick:v=>{if(e.link&&i){const I=HB(te.EXCALIDRAW_LINK,v.nativeEvent);i({...e,link:ns(e.link)},I),I.defaultPrevented&&v.preventDefault()}},rel:"noopener noreferrer",children:e.link}):g("div",{className:"excalidraw-hyperlinkContainer-link",children:R("labels.link.empty")}),N("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!m&&g(Xe,{type:"button",title:R("buttons.edit"),"aria-label":R("buttons.edit"),label:R("buttons.edit"),onClick:b,className:"excalidraw-hyperlinkContainer--edit",icon:Rp}),g(Xe,{type:"button",title:R("labels.linkToElement"),"aria-label":R("labels.linkToElement"),label:R("labels.linkToElement"),onClick:()=>{n({openDialog:{name:"elementLinkSelector",sourceElementId:e.id}})},icon:GV}),u&&!or(e)&&g(Xe,{type:"button",title:R("buttons.remove"),"aria-label":R("buttons.remove"),label:R("buttons.remove"),onClick:U,className:"excalidraw-hyperlinkContainer--remove",icon:$c})]})]})},kX=(e,t,n)=>{const[i,r]=He(e,n),{x:s,y:o}=Kr({sceneX:i+e.width/2,sceneY:r},t),a=s-t.offsetLeft-HT/2,l=o-t.offsetTop-RX;return{x:a,y:l}},Kk=(e,t)=>{var r;const n=Ge(e,t);return or(n[0])?"labels.link.editEmbed":(r=n[0])!=null&&r.link?"labels.link.edit":"labels.link.create"};let L1=null;const fEe=(e,t,n)=>{L1&&clearTimeout(L1),L1=window.setTimeout(()=>hEe(e,t,n),Bre)},hEe=(e,t,n)=>{if(!e.link)return;const i=C1();i.classList.add("excalidraw-tooltip--visible"),i.style.maxWidth="20rem",i.textContent=uh(e.link)?R("labels.link.goToElement"):e.link;const[r,s,o,a]=He(e,n),[l,c,u,d]=LT([r,s,o,a],e.angle,t),f=Kr({sceneX:l,sceneY:c},t);sG(i,{left:f.x,top:f.y,width:u,height:d},"top"),Je("hyperlink","tooltip","link-icon"),Mv=!0},Zk=()=>{L1&&clearTimeout(L1),Mv&&(Mv=!1,C1().classList.remove("excalidraw-tooltip--visible"))},gEe=(e,t,n,[i,r])=>{const{x:s,y:o}=Nt({clientX:i,clientY:r},n),a=15/n.zoom.value;if(ay(S(s,o),e,t))return!1;const[l,c,u]=He(e,t);if(s>=l&&s<=u&&o>=c-RX&&o<=c)return!1;const{x:d,y:f}=kX(e,n,t);return!(i>=d-a&&i<=d+HT+Av*2+a&&r>=f-a&&r<=f+a+Av*2+cEe)},LX=de({name:"hyperlink",label:(e,t)=>Kk(e,t),icon:D6,perform:(e,t)=>t.showHyperlinkPopup==="editor"?!1:{elements:e,appState:{...t,showHyperlinkPopup:"editor",openMenu:null},captureUpdate:K.IMMEDIATELY},trackEvent:{category:"hyperlink",action:"click"},keyTest:e=>e[V.CTRL_OR_CMD]&&e.key===V.K,predicate:(e,t)=>Ge(e,t).length===1,PanelComponent:({elements:e,appState:t,updateData:n})=>{const i=Ge(e,t);return g(Xe,{type:"button",icon:D6,"aria-label":R(Kk(e,t)),title:`${or(e[0])?R("labels.link.labelEmbed"):R("labels.link.label")} - ${J("CtrlOrCmd+K")}`,onClick:()=>n(null),selected:i.length===1&&!!i[0].link})}}),A3=e=>e.every(t=>!t.locked),DX=de({name:"toggleElementLock",label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1});return A3(i)?"labels.elementLock.lock":"labels.elementLock.unlock"},icon:(e,t)=>{const n=Ge(t,e);return A3(n)?H_:by},trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return r.length>0&&!r.some(s=>s.locked&&s.frameId)},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!r.length)return!1;const s=A3(r),o=ve(r),a=r.length>1&&p_(r),c=r.length===1||a?null:mr();let u={...t.lockedMultiSelections};if(s)u={...t.lockedMultiSelections,...c?{[c]:!0}:{}};else if(a){const b=r[0].groupIds.at(-1);delete u[b]}const d=e.map(b=>{if(!o.has(b.id))return b;let y=b.groupIds;return s?c&&(y=[...y,c]):y=y.filter(w=>!t.lockedMultiSelections[w]),Ie(b,{locked:s,groupIds:y.length!==b.groupIds.length?y:b.groupIds})}),f=ve(d),h=s?{}:Object.fromEntries(r.map(b=>[b.id,!0])),m=r.map(b=>f.get(b.id)||b),p=s?{}:Cp(m,t),U=s?c||(a?r[0].groupIds.at(-1):r[0].id):null;return{elements:d,appState:{...t,selectedElementIds:h,selectedGroupIds:p,selectedLinearElement:s?null:t.selectedLinearElement,lockedMultiSelections:u,activeLockedId:U},captureUpdate:K.IMMEDIATELY}},keyTest:(e,t,n,i)=>e.key.toLocaleLowerCase()===V.L&&e[V.CTRL_OR_CMD]&&e.shiftKey&&i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}).length>0}),mEe=de({name:"unlockAllElements",trackEvent:{category:"canvas"},viewMode:!1,icon:by,predicate:(e,t)=>Ge(e,t).length===0&&e.some(i=>i.locked),perform:(e,t)=>{const n=e.filter(o=>o.locked),i=e.map(o=>{if(o.locked){const a=o.groupIds.filter(l=>!t.lockedMultiSelections[l]);return Ie(o,{locked:!1,groupIds:o.groupIds.length!==a.length?a:o.groupIds})}return o}),r=ve(i),s=n.map(o=>r.get(o.id)||o);return{elements:i,appState:{...t,selectedElementIds:Object.fromEntries(n.map(o=>[o.id,!0])),selectedGroupIds:Cp(s,t),lockedMultiSelections:{},activeLockedId:null},captureUpdate:K.IMMEDIATELY}},label:"labels.elementLock.unlockAll"});var NX={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(i,r){return r.filter(function(s){return n.test(i,s)})},n.test=function(i,r){return n.match(i,r)!==null},n.match=function(i,r,s){s=s||{};var o=0,a=[],l=r.length,c=0,u=0,d=s.pre||"",f=s.post||"",h=s.caseSensitive&&r||r.toLowerCase(),m;i=s.caseSensitive&&i||i.toLowerCase();for(var p=0;p<l;p++)m=r[p],h[p]===i[o]?(m=d+m+f,o+=1,u+=1+u):u=0,c+=u,a[a.length]=m;return o===i.length?(c=h===i?1/0:c,{rendered:a.join(""),score:c}):null},n.filter=function(i,r,s){return!r||r.length===0?[]:typeof i!="string"?r:(s=s||{},r.reduce(function(o,a,l,c){var u=a;s.extract&&(u=s.extract(a));var d=n.match(i,u,s);return d!=null&&(o[o.length]={string:d.rendered,score:d.score,index:l,original:a}),o},[]).sort(function(o,a){var l=a.score-o.score;return l||o.index-a.index}))}})()})(NX);var pEe=NX.exports;const UEe=El(pEe),bEe=8,yEe=10,Xm=["rectangle","diamond","ellipse"],jm=["line","sharpArrow","curvedArrow","elbowArrow"],EEe=new Set(Xm),vEe=new Set(jm),Zh=e=>EEe.has(e),Q6=e=>e==="arrow"||vEe.has(e),Sa=Wt(null),P0=new Map,F0=new Map,wEe=({app:e})=>{const t=e.scene.getSelectedElements(e.state),n=L.useRef(null);return L.useEffect(()=>{if(t.length===0){e.updateEditorAtom(Sa,null);return}const i=Zy(t);i&&!n.current?n.current=i:(n.current&&!i||n.current&&i!==n.current)&&(e.updateEditorAtom(Sa,null),n.current=null)},[t,e]),L.useEffect(()=>()=>{P0.clear(),F0.clear()},[]),g(_Ee,{app:e,elements:t})},_Ee=({app:e,elements:t})=>{const n=Zy(t),i=L.useMemo(()=>n==="generic"?FX(t):[],[n,t]),r=L.useMemo(()=>n==="linear"?kv(t):[],[n,t]),s=n==="generic"?i.every(d=>d.type===i[0].type):n==="linear"?r.every(d=>ah(d)===ah(r[0])):!1,[o,a]=L.useState({x:0,y:0}),l=L.useRef(""),c=L.useRef(null);L.useEffect(()=>{const d=[...i,...r].sort((U,b)=>U.id.localeCompare(b.id)),f=`
      ${e.state.scrollX}${e.state.scrollY}${e.state.offsetTop}${e.state.offsetLeft}${e.state.zoom.value}${d.map(U=>U.id).join(",")}`;if(f===l.current)return;l.current=f;let h;if(d.length===1){const[U,,,b,y,w]=He(d[0],e.scene.getNonDeletedElementsMap());h=q(S(U,b),S(y,w),d[0].angle)}else{const{minX:U,maxY:b}=Ms(d);h=S(U,b)}const{x:m,y:p}=Kr({sceneX:h[0],sceneY:h[1]},e.state);a({x:m,y:p})},[i,r,e.scene,e.state]),L.useEffect(()=>{for(const d of r){const f=Rv(d.id,CEe(d));F0.has(f)||F0.set(f,d)}},[r]),L.useEffect(()=>{for(const d of i)if(!P0.has(d.id)){const f=Le(d,e.scene.getNonDeletedElementsMap());f&&P0.set(d.id,{fontSize:f.fontSize})}},[i,e.scene]);const u=n==="linear"?[["line",X_],["sharpArrow",eT],["curvedArrow",nT],["elbowArrow",tT]]:n==="generic"?[["rectangle",V_],["diamond",$_],["ellipse",G_]]:[];return g("div",{ref:c,tabIndex:-1,style:{position:"absolute",top:`${o.y+(yEe+8)*e.state.zoom.value-e.state.offsetTop}px`,left:`${o.x-e.state.offsetLeft-bEe}px`,zIndex:2},className:gr.CONVERT_ELEMENT_TYPE_POPUP,children:u.map(([d,f])=>{const h=s&&(n==="generic"&&i[0].type===d||n==="linear"&&ah(r[0])===d);return g(Xe,{className:"Shape",type:"radio",icon:f,checked:h,name:"convertElementType-option",title:d,keyBindingLabel:"","aria-label":d,"data-testid":`toolbar-${d}`,onChange:()=>{var m;e.state.activeTool.type!==d&&Je("convertElementType",d,"ui"),OX(e,{conversionType:n,nextType:d}),(m=c.current)==null||m.focus()}},`${t[0].id}${t[0].version}_${d}`)})})},TEe=(e,t,n)=>{const i=Jo(e,t),r=Sp(e,t),s=ru(t.text,pt(t),i);let o=jn(s,pt(t),t.lineHeight),a=t.fontSize;for(;(o.width>i||o.height>r)&&a>0;){a-=1;const l={...t,fontSize:a};o=jn(t.text,pt(l),t.lineHeight)}_i(t,n.getNonDeletedElementsMap(),{fontSize:a,width:o.width,height:o.height}),Qi(t,e,n)},OX=(e,{conversionType:t,nextType:n,direction:i="right"})=>{var a;if(!t)return!1;const r=e.scene.getSelectedElements(e.state),s=r.reduce((l,c)=>({...l,[c.id]:!0}),{}),o=i==="right"?1:-1;if(t==="generic"){const l=FX(r),u=l.every(d=>d.type===l[0].type)?Xm.indexOf(l[0].type):-1;if(n=n??Xm[(u+Xm.length+o)%Xm.length],n&&Zh(n)){const d={};for(const h of l){const m=Qk(h,n,e);d[m.id]=m}const f=[];for(const h of e.scene.getElementsIncludingDeleted())d[h.id]?f.push(d[h.id]):f.push(h);e.scene.replaceAllElements(f);for(const h of Object.values(d)){const m=Le(h,e.scene.getNonDeletedElementsMap());m&&(P0.get(h.id)&&_i(m,e.scene.getNonDeletedElementsMap(),{fontSize:((a=P0.get(h.id))==null?void 0:a.fontSize)??m.fontSize}),TEe(h,m,e.scene))}e.setState(h=>({selectedElementIds:s,activeTool:tn(h,{type:"selection"})}))}}if(t==="linear"){const l=kv(r);if(!n){const u=XB(l,ah),d=u?jm.indexOf(u):-1;n=jm[(d+jm.length+o)%jm.length]}if(Q6(n)){const u=[],d=e.scene.getElementsMapIncludingDeleted();for(const f of l){const h=F0.get(Rv(f.id,n));if(h&&ah(h)===n)d.set(h.id,h),u.push(h);else{const m=Qk(f,n,e);d.set(m.id,m),u.push(m)}}e.scene.replaceAllElements(d);for(const f of u)if(xe(f))if(pe(f)){const h=IEe(f);if(h.length<2)continue;const m=[];for(let U=1;U<h.length-2;U++)m.push({start:h[U],end:h[U+1],index:U+1});const p=Eg(f,e.scene.getNonDeletedElementsMap(),{points:h,fixedSegments:m});_i(f,e.scene.getNonDeletedElementsMap(),{...p,endArrowhead:"arrow"})}else{const h=Hse(["line","sharpArrow","curvedArrow"],m=>F0.get(Rv(f.id,m)));if(h){const m=h.points;e.scene.mutateElement(f,{points:m})}}}const c=kv(e.scene.getSelectedElements(e.state));e.setState(u=>({selectedElementIds:s,selectedLinearElement:c.length===1?new Ue(c[0],e.scene.getNonDeletedElementsMap()):null,activeTool:tn(u,{type:"selection"})}))}return!0},Zy=e=>{if(e.length===0)return null;let t=!1;for(const n of e){if(Zh(n.type))return"generic";PX(n)&&(t=!0)}return t?"linear":null},PX=e=>xe(e)&&(!Ce(e)||!rz(e)&&!Di(e)),Rv=(e,t)=>`${e}:${t}`,FX=e=>e.filter(t=>Zh(t.type)),kv=e=>e.filter(t=>PX(t)),i2=20,wf=(e,t)=>e[0]===t[0],M3=(e,t)=>e[1]===t[1],qk=(e,t)=>wf(e,t)?Math.abs(e[1]-t[1]):Math.abs(e[0]-t[0]),IEe=e=>{const t=[e.points[0]],n=SEe(e.points);for(let s=1;s<n.length;++s){const o=t[t.length-1],a=[...n[s]];Math.abs(a[0]-o[0])<i2?a[0]=o[0]:Math.abs(a[1]-o[1])<i2&&(a[1]=o[1]),wf(o,a)||M3(o,a)||t.push(S(o[0],a[1])),t.push(a)}const i=[t[0]];for(let s=1;s<t.length-1;++s)wf(t[s-1],t[s])&&wf(t[s],t[s+1])||M3(t[s-1],t[s])&&M3(t[s],t[s+1])||i.push(t[s]);i.push(t[t.length-1]);const r=[i[0]];for(let s=1;s<i.length-1;++s){const o=r[r.length-1],a=i[s],l=i[s+1],c=wf(o,a),u=wf(a,l);if(c!==u){const d=qk(o,a),f=qk(a,l);if(d<i2||f<i2){if(f<d)c?l[0]=o[0]:l[1]=o[1];else if(u)for(let h=r.length-1;h>=0&&r[h][0]===o[0];--h)r[h][0]=a[0];else for(let h=r.length-1;h>=0&&r[h][1]===o[1];--h)r[h][1]=a[1];continue}}r.push(a)}return r.push(i[i.length-1]),r},SEe=e=>{if(e.length===0)return[];const t=[e[0]];for(let n=1;n<e.length;n++){const[i,r]=t[t.length-1],[s,o]=e[n];(i!==s||r!==o)&&t.push(e[n])}return t},Qk=(e,t,n)=>{if(!xEe(e.type,t)||e.type===t)return e;if(qt.delete(e),Zh(t)){const i=Da(ta({...e,type:t,roundness:t==="diamond"&&e.roundness?{type:Hd(t)?yn.ADAPTIVE_RADIUS:yn.PROPORTIONAL_RADIUS}:e.roundness}));return d0(i,n.scene),i}if(Q6(t))switch(t){case"line":return Da(wc({...e,type:"line"}));case"sharpArrow":return Da(dh({...e,type:"arrow",elbowed:!1,roundness:null,startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"curvedArrow":return Da(dh({...e,type:"arrow",elbowed:!1,roundness:{type:yn.PROPORTIONAL_RADIUS},startArrowhead:n.state.currentItemStartArrowhead,endArrowhead:n.state.currentItemEndArrowhead}));case"elbowArrow":return Da(dh({...e,type:"arrow",elbowed:!0,fixedSegments:null,roundness:null}))}return Ko(t,`unhandled conversion type: ${t}`),e},xEe=(e,t)=>!!(Zh(e)&&Zh(t)||Q6(e)&&Q6(t)),CEe=e=>xe(e)?ah(e):e.type,AEe=de({name:"toggleShapeSwitch",label:"labels.shapeSwitch",icon:()=>null,viewMode:!0,trackEvent:{category:"shape_switch",action:"toggle"},keywords:["change","switch","swap"],perform(e,t,n,i){return Xr.set(Sa,{type:"panel"}),{captureUpdate:K.NEVER}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>Zy(e)!==null}),BX=de({name:"copyElementLink",label:"labels.copyElementLink",icon:kp,trackEvent:{category:"element"},perform:async(e,t,n,i)=>{const r=Ge(e,t);try{if(window.location){const s=sH(r,t);return s?(await cu(i.props.generateLinkForSelection?i.props.generateLinkForSelection(s.id,s.type):rH(s.id,s.type)),{appState:{toast:{message:R("toast.elementLinkCopied"),closable:!0}},captureUpdate:K.EVENTUALLY}):{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}}}catch(s){console.error(s)}return{appState:t,elements:e,app:i,captureUpdate:K.EVENTUALLY}},predicate:(e,t)=>M6(Ge(e,t))}),MEe=de({name:"linkToElement",label:"labels.linkToElement",icon:GV,perform:(e,t,n,i)=>{const r=Ge(e,t);return r.length!==1||!M6(r)?{elements:e,appState:t,app:i,captureUpdate:K.EVENTUALLY}:{appState:{...t,openDialog:{name:"elementLinkSelector",sourceElementId:Ge(e,t)[0].id}},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{var s;const r=Ge(e,t);return((s=t.openDialog)==null?void 0:s.name)!=="elementLinkSelector"&&r.length===1&&M6(r)},trackEvent:!1}),REe={toggleTheme:[J("Shift+Alt+D")],saveScene:[J("CtrlOrCmd+S")],loadScene:[J("CtrlOrCmd+O")],clearCanvas:[J("CtrlOrCmd+Delete")],imageExport:[J("CtrlOrCmd+Shift+E")],commandPalette:[J("CtrlOrCmd+/"),J("CtrlOrCmd+Shift+P")],cut:[J("CtrlOrCmd+X")],copy:[J("CtrlOrCmd+C")],paste:[J("CtrlOrCmd+V")],copyStyles:[J("CtrlOrCmd+Alt+C")],pasteStyles:[J("CtrlOrCmd+Alt+V")],selectAll:[J("CtrlOrCmd+A")],deleteSelectedElements:[J("Delete")],duplicateSelection:[J("CtrlOrCmd+D"),J(`Alt+${R("helpDialog.drag")}`)],sendBackward:[J("CtrlOrCmd+[")],bringForward:[J("CtrlOrCmd+]")],sendToBack:[J(ao?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[J(ao?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[J("Shift+Alt+C")],group:[J("CtrlOrCmd+G")],ungroup:[J("CtrlOrCmd+Shift+G")],gridMode:[J("CtrlOrCmd+'")],zenMode:[J("Alt+Z")],objectsSnapMode:[J("Alt+S")],stats:[J("Alt+/")],addToLibrary:[],flipHorizontal:[J("Shift+H")],flipVertical:[J("Shift+V")],viewMode:[J("Alt+R")],hyperlink:[J("CtrlOrCmd+K")],toggleElementLock:[J("CtrlOrCmd+Shift+L")],resetZoom:[J("CtrlOrCmd+0")],zoomOut:[J("CtrlOrCmd+-")],zoomIn:[J("CtrlOrCmd++")],zoomToFitSelection:[J("Shift+3")],zoomToFit:[J("Shift+1")],zoomToFitSelectionInViewport:[J("Shift+2")],toggleEraserTool:[J("E")],toggleHandTool:[J("H")],setFrameAsActiveTool:[J("F")],saveFileToDisk:[J("CtrlOrCmd+S")],saveToActiveFile:[J("CtrlOrCmd+S")],toggleShortcuts:[J("?")],searchMenu:[J("CtrlOrCmd+F")],wrapSelectionInFrame:[]},Zi=(e,t=0)=>{const n=REe[e];return n&&n.length>0?n[t]||n[0]:""},kEe="\\u0300-\\u036f",LEe="\\ufe20-\\ufe2f",DEe="\\u20d0-\\u20ff",NEe=kEe+LEe+DEe,OEe=`[${NEe}]`,PEe=RegExp(OEe,"g"),FEe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,BEe={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"E",:"e",:"T",:"t",:"s",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"I",:"i",:"E",:"e",:"n",:"s"},D1=e=>e.replace(FEe,t=>BEe[t]||t).replace(PEe,""),zX=()=>{const[e,t]=L.useState(null),n=L.useCallback(i=>t(i),[]);return[e,n]};var qy={},zEe=HEe;function HEe(e,t){if(e=String(e),t=String(t),!/^[\x00-\xFF]+$/.test(e)||!/^[\x00-\xFF]+$/.test(t))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(e.length>=80)throw new Error('Keyword "'+e+'" is longer than the 79-character limit imposed by the PNG specification');for(var n=e.length+t.length+1,i=new Uint8Array(n),r=0,s,o=0;o<e.length;o++){if(!(s=e.charCodeAt(o)))throw new Error("0x00 character is not permitted in tEXt keywords");i[r++]=s}i[r++]=0;for(var a=0;a<t.length;a++){if(!(s=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt content");i[r++]=s}return{name:"tEXt",data:i}}var VEe=$Ee;function $Ee(e){e.data&&e.name&&(e=e.data);for(var t=!0,n="",i="",r=0;r<e.length;r++){var s=e[r];if(t)s?i+=String.fromCharCode(s):t=!1;else if(s)n+=String.fromCharCode(s);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:i,text:n}}qy.encode=zEe;qy.decode=VEe;var GEe=function(e,t,n){var i=[],r=e.length;if(r===0)return i;var s=t<0?Math.max(0,t+r):t||0;for(n!==void 0&&(r=n<0?n+r:n);r-- >s;)i[r-s]=e[r];return i},VT={};(function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="0.3.0";function n(){for(var c=0,u=new Array(256),d=0;d!=256;++d)c=d,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,c=c&1?-306674912^c>>>1:c>>>1,u[d]=c;return typeof Int32Array<"u"?new Int32Array(u):u}var i=n(),r=typeof Buffer<"u";function s(c){if(c.length>32768&&r)return a(new Buffer(c));for(var u=-1,d=c.length-1,f=0;f<d;)u=i[(u^c.charCodeAt(f++))&255]^u>>>8,u=i[(u^c.charCodeAt(f++))&255]^u>>>8;return f===d&&(u=u>>>8^i[(u^c.charCodeAt(f))&255]),u^-1}function o(c){if(c.length>1e4)return a(c);for(var u=-1,d=0,f=c.length-3;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+3;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function a(c){for(var u=-1,d=0,f=c.length-7;d<f;)u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255],u=u>>>8^i[(u^c[d++])&255];for(;d<f+7;)u=u>>>8^i[(u^c[d++])&255];return u^-1}function l(c){for(var u=-1,d=0,f=c.length,h,m;d<f;)h=c.charCodeAt(d++),h<128?u=u>>>8^i[(u^h)&255]:h<2048?(u=u>>>8^i[(u^(192|h>>6&31))&255],u=u>>>8^i[(u^(128|h&63))&255]):h>=55296&&h<57344?(h=(h&1023)+64,m=c.charCodeAt(d++)&1023,u=u>>>8^i[(u^(240|h>>8&7))&255],u=u>>>8^i[(u^(128|h>>2&63))&255],u=u>>>8^i[(u^(128|m>>6&15|h&3))&255],u=u>>>8^i[(u^(128|m&63))&255]):(u=u>>>8^i[(u^(224|h>>12&15))&255],u=u>>>8^i[(u^(128|h>>6&63))&255],u=u>>>8^i[(u^(128|h&63))&255]);return u^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})})(VT);var XEe=GEe,jEe=VT,YEe=ZEe,Io=new Uint8Array(4),WEe=new Int32Array(Io.buffer),KEe=new Uint32Array(Io.buffer);function ZEe(e){var t=8,n=t,i;for(i=0;i<e.length;i++)t+=e[i].data.length,t+=12;var r=new Uint8Array(t);for(r[0]=137,r[1]=80,r[2]=78,r[3]=71,r[4]=13,r[5]=10,r[6]=26,r[7]=10,i=0;i<e.length;i++){var s=e[i],o=s.name,a=s.data,l=a.length,c=[o.charCodeAt(0),o.charCodeAt(1),o.charCodeAt(2),o.charCodeAt(3)];KEe[0]=l,r[n++]=Io[3],r[n++]=Io[2],r[n++]=Io[1],r[n++]=Io[0],r[n++]=c[0],r[n++]=c[1],r[n++]=c[2],r[n++]=c[3];for(var u=0;u<l;)r[n++]=a[u++];var d=c.concat(XEe(a)),f=jEe.buf(d);WEe[0]=f,r[n++]=Io[3],r[n++]=Io[2],r[n++]=Io[1],r[n++]=Io[0]}return r}const qEe=El(YEe);var QEe=VT,JEe=n8e,So=new Uint8Array(4),e8e=new Int32Array(So.buffer),t8e=new Uint32Array(So.buffer);function n8e(e){if(e[0]!==137)throw new Error("Invalid .png file header");if(e[1]!==80)throw new Error("Invalid .png file header");if(e[2]!==78)throw new Error("Invalid .png file header");if(e[3]!==71)throw new Error("Invalid .png file header");if(e[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(e[6]!==26)throw new Error("Invalid .png file header");if(e[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var t=!1,n=[],i=8;i<e.length;){So[3]=e[i++],So[2]=e[i++],So[1]=e[i++],So[0]=e[i++];var r=t8e[0]+4,s=new Uint8Array(r);s[0]=e[i++],s[1]=e[i++],s[2]=e[i++],s[3]=e[i++];var o=String.fromCharCode(s[0])+String.fromCharCode(s[1])+String.fromCharCode(s[2])+String.fromCharCode(s[3]);if(!n.length&&o!=="IHDR")throw new Error("IHDR header missing");if(o==="IEND"){t=!0,n.push({name:o,data:new Uint8Array(0)});break}for(var a=4;a<r;a++)s[a]=e[i++];So[3]=e[i++],So[2]=e[i++],So[1]=e[i++],So[0]=e[i++];var l=e8e[0],c=QEe.buf(s);if(c!==l)throw new Error("CRC values for "+o+" header do not match, PNG file is likely corrupted");var u=new Uint8Array(s.buffer.slice(4));n.push({name:o,data:u})}if(!t)throw new Error(".png file ended prematurely: no IEND header was found");return n}const HX=El(JEe),VX=async e=>{const n=HX(new Uint8Array(await Fp(e))).find(i=>i.name==="tEXt");return n?qy.decode(n.data):null},$X=async({blob:e,metadata:t})=>{const n=HX(new Uint8Array(await Fp(e))),i=qy.encode(Te.excalidraw,JSON.stringify(qG({text:t,compress:!0})));return n.splice(-1,0,i),new Blob([qEe(n)],{type:Te.png})},i8e=async e=>{const t=await VX(e);if((t==null?void 0:t.keyword)===Te.excalidraw)try{const n=JSON.parse(t.text);if(!("encoded"in n)){if("type"in n&&n.type===Cs.excalidraw)return t.text;throw new Error("FAILED")}return QG(n)}catch(n){throw console.error(n),new Error("FAILED")}throw new Error("INVALID")},GX=Object.freeze(Object.defineProperty({__proto__:null,decodePngMetadata:i8e,encodePngMetadata:$X,getTEXtChunk:VX},Symbol.toStringTag,{value:"Module"})),Qy=({elements:e,appState:t,files:n,maxWidthOrHeight:i,getDimensions:r,exportPadding:s,exportingFrame:o})=>{const{elements:a,appState:l}=Sd({elements:e,appState:t},null,null,{deleteInvisibleElements:!0}),{exportBackground:c,viewBackgroundColor:u}=l;return K6(a,{...l,offsetTop:0,offsetLeft:0,width:0,height:0},n||{},{exportBackground:c,exportPadding:s,viewBackgroundColor:u,exportingFrame:o},(d,f)=>{const h=document.createElement("canvas");if(i){typeof r=="function"&&console.warn("`getDimensions()` is ignored when `maxWidthOrHeight` is supplied.");const p=Math.max(d,f),U=i<p?i/p:(t==null?void 0:t.exportScale)??1;return h.width=d*U,h.height=f*U,{canvas:h,scale:U}}const m=(r==null?void 0:r(d,f))||{width:d,height:f};return h.width=m.width,h.height=m.height,{canvas:h,scale:m.scale??1}})},r8e=async e=>{var r;let{mimeType:t=Te.png,quality:n}=e;t===Te.png&&typeof n=="number"&&console.warn(`"quality" will be ignored for "${Te.png}" mimeType`),t==="image/jpg"&&(t=Te.jpg),t===Te.jpg&&!((r=e.appState)!=null&&r.exportBackground)&&(console.warn(`Defaulting "exportBackground" to "true" for "${Te.jpg}" mimeType`),e={...e,appState:{...e.appState,exportBackground:!0}});const i=await Qy(e);return n=n||(/image\/jpe?g/.test(t)?.92:.8),new Promise((s,o)=>{i.toBlob(async a=>{var l;if(!a)return o(new Error("couldn't export to blob"));a&&t===Te.png&&((l=e.appState)!=null&&l.exportEmbedScene)&&(a=await $X({blob:a,metadata:Rg(e.elements,e.appState,e.files||{},"local")})),s(a)},t,n)})},XX=async({elements:e,appState:t=ia(),files:n={},exportPadding:i,renderEmbeddables:r,exportingFrame:s,skipInliningFonts:o,reuseImages:a})=>{const{elements:l,appState:c}=Sd({elements:e,appState:t},null,null,{deleteInvisibleElements:!0}),u={...c,exportPadding:i};return DT(l,u,n,{exportingFrame:s,renderEmbeddables:r,skipInliningFonts:o,reuseImages:a})},jX=Wt(new Map),Jk=async e=>await XX({elements:e,appState:{exportBackground:!1,viewBackgroundColor:je.white},files:null,renderEmbeddables:!1,skipInliningFonts:!0}),YX=(e,t,n,i)=>{const[r,s]=L.useState();return L.useEffect(()=>{if(t)if(e){const o=n.get(e);o?s(o):(async()=>{var l;const a=await Jk(t);(l=a.querySelector(".style-fonts"))==null||l.remove(),a&&(n.set(e,a),s(a))})()}else(async()=>{const o=await Jk(t);s(o)})()},[e,t,n,s]),L.useEffect(()=>{const o=i.current;if(o)return r&&(o.innerHTML=r.outerHTML),()=>{o.innerHTML=""}},[r,i]),r},$T=()=>{const[e]=dn(jX);return{clearLibraryCache:()=>e.clear(),deleteItemsFromLibraryCache:i=>{i.forEach(r=>e.delete(r))},svgCache:e}},s8e=["excalidraw.com","raw.githubusercontent.com/excalidraw/excalidraw-libraries"],WX=new Ys,qh=Wt({status:"loaded",isInitialized:!1,libraryItems:[]}),bm=e=>Ka(e),o8e=(e,t)=>!e.find(n=>n.elements.length!==t.elements.length?!1:n.elements.every((i,r)=>i.id===t.elements[r].id&&i.versionNonce===t.elements[r].versionNonce)),a8e=(e,t)=>{const n=[];for(const i of t)o8e(e,i)&&n.push(i);return[...n,...e]},KX=(e,t)=>{const n=ve(t),i={deletedItems:new Map,addedItems:new Map,updatedItems:new Map};for(const s of e)n.has(s.id)||i.deletedItems.set(s.id,s);const r=ve(e);for(const s of t){const o=r.get(s.id);o?Dv(o)!==Dv(s)&&i.updatedItems.set(s.id,s):i.addedItems.set(s.id,s)}return i};class l8e{constructor(t){this.currLibraryItems=[],this.prevLibraryItems=bm(this.currLibraryItems),this.updateQueue=[],this.getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1],this.notifyListeners=()=>{var n,i;if(this.updateQueue.length>0)Xr.set(qh,r=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:r.isInitialized}));else{Xr.set(qh,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{const r=this.prevLibraryItems;this.prevLibraryItems=bm(this.currLibraryItems);const s=bm(this.currLibraryItems);(i=(n=this.app.props).onLibraryChange)==null||i.call(n,s),WX.trigger(KX(r,s),s)}catch(r){console.error(r)}}},this.destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Xr.set(jX,new Map)},this.resetLibrary=()=>this.setLibrary([]),this.getLatestLibrary=()=>new Promise(async n=>{try{const i=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?n(this.getLatestLibrary()):n(bm(i))}catch{return n(this.currLibraryItems)}}),this.updateLibrary=async({libraryItems:n,prompt:i=!1,merge:r=!1,openLibraryMenu:s=!1,defaultStatus:o="unpublished"})=>(s&&this.app.setState({openSidebar:{name:As.name,tab:Zb}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{const c=await(typeof n=="function"&&!(n instanceof Blob)?n(this.currLibraryItems):n);let u;c instanceof Blob?u=await uye(c,o):u=jy(c,o),!i||window.confirm(R("alerts.confirmAddLibrary",{numShapes:u.length}))?(i&&this.app.focusContainer(),a(r?a8e(this.currLibraryItems,u):u)):l(new jh)}catch(c){l(c)}}))),this.setLibrary=n=>{const i=new Promise(async(r,s)=>{try{await this.getLastUpdateTask(),typeof n=="function"&&(n=n(this.currLibraryItems)),this.currLibraryItems=bm(await n),r(this.currLibraryItems)}catch(o){s(o)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==i),this.notifyListeners()});return this.updateQueue.push(i),this.notifyListeners(),i},this.app=t}}const GT=e=>{const n=Math.ceil(Math.sqrt(e.length)),i=[],r=h=>e.slice(h*n,h*n+n).reduce((p,U)=>{const{height:b}=Ms(U.elements);return Math.max(p,b)},0),s=h=>{let m=0,p=0,U=0;for(const b of e){if(m%n===0&&(p=0),p===h){const{width:y}=Ms(b.elements);U=Math.max(U,y)}m++,p++}return U};let o=0,a=0,l=0,c=0,u=0,d=0,f=0;for(const h of e){u&&u%n===0&&(a+=l+50,o=0,d=0,f++),d===0&&(l=r(f)),c=s(d);const{minX:m,minY:p,width:U,height:b}=Ms(h.elements),y=(c-U)/2,w=(l-b)/2;i.push(...h.elements.map(v=>({...v,x:v.x+o+y-m,y:v.y+a+w-p}))),o+=c+50,u++,d++}return i},c8e=(e,t=s8e)=>{if(typeof t=="function"?t(e):t.some(n=>{const i=new URL(`https://${n.replace(/^https?:\/\//,"")}`),{hostname:r,pathname:s}=new URL(e);return new RegExp(`(^|\\.)${i.hostname}$`).test(r)&&new RegExp(`^${i.pathname.replace(/\/+$/,"")}(/+|$)`).test(s)}))return!0;throw new Error(`Invalid or disallowed library URL: "${e}"`)},Lv=()=>{const e=new URLSearchParams(window.location.hash.slice(1)).get(w4.addLibrary)||new URLSearchParams(window.location.search).get(v4.addLibrary),t=e?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return e?{libraryUrl:e,idToken:t}:null},Kl=class Kl{static async getLibraryItems(t,n,i=!0){const r=()=>new Promise(async(s,o)=>{try{const a=await t.load({source:n});s(jy((a==null?void 0:a.libraryItems)||[],"published"))}catch(a){o(a)}});return i?Kl.queue.push(r):r()}constructor(t){this.adapter=t}getLibraryItems(t){return Kl.getLibraryItems(this.adapter,t,!1)}};Kl.queue=new Wre,Kl.run=async(t,n)=>{const i=new Kl(t);return Kl.queue.push(()=>n(i))};let yh=Kl,N1=0,J6=0;const Dv=e=>`${e.id}:${e.name||""}:${TH(e.elements)}`,Nv=e=>P_(e.map(t=>Dv(t)).sort().join()),eL=async(e,t)=>{try{return J6++,await yh.run(e,async n=>{const i=ve(await n.getLibraryItems("save"));for(const[a]of t.deletedItems)i.delete(a);const r=[];for(const[a,l]of t.addedItems)i.has(a)?i.set(a,l):r.push(l);if(t.updatedItems)for(const[a,l]of t.updatedItems)i.set(a,l);const s=r.concat(Array.from(i.values())),o=Nv(s);return o!==N1&&await e.save({libraryItems:s}),N1=o,s})}finally{J6--}},u8e=e=>{const{excalidrawAPI:t}=e,n=L.useRef(e);n.current=e;const i=L.useRef(!1);L.useEffect(()=>{if(!t)return;i.current=!1;const r=async({libraryUrl:a,idToken:l})=>{const c=new Promise(async(d,f)=>{try{a=decodeURIComponent(a),a=K9(a),c8e(a,n.current.validateLibraryUrl);const m=await(await fetch(a)).blob();d(m)}catch(h){f(h)}}),u=l!==t.id;await(u&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await t.updateLibrary({libraryItems:c,prompt:u,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw t.updateScene({appState:{errorMessage:d.message}}),d}finally{if(window.location.hash.includes(w4.addLibrary)){const d=new URLSearchParams(window.location.hash.slice(1));d.delete(w4.addLibrary),window.history.replaceState({},Ec,`#${d.toString()}`)}else if(window.location.search.includes(v4.addLibrary)){const d=new URLSearchParams(window.location.search);d.delete(v4.addLibrary),window.history.replaceState({},Ec,`?${d.toString()}`)}}},s=a=>{a.preventDefault();const l=Lv();l&&(a.stopImmediatePropagation(),window.history.replaceState({},"",a.oldURL),r(l))},o=Lv();if(o&&r(o),"getInitialLibraryItems"in n.current&&n.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(n.current.getInitialLibraryItems()).then(a=>{t.updateLibrary({libraryItems:a,merge:!0})}).catch(a=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${a==null?void 0:a.message}`)})),"adapter"in n.current&&n.current.adapter){const a=n.current.adapter,l=n.current.migrationAdapter,c=iy();l?c.resolve(Bc(l.load).then(async u=>{let d=null;try{if(!u)return yh.getLibraryItems(a,"load");d=jy(u.libraryItems||[],"published");const f=await eL(a,KX([],d));try{await l.clear()}catch(h){console.error(`couldn't delete legacy library data: ${h.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(u=>(console.error(`error during library migration: ${u.message}`),yh.getLibraryItems(a,"load")))):c.resolve(Bc(yh.getLibraryItems,a,"load")),t.updateLibrary({libraryItems:c.then(u=>{const d=u||[];return N1=Nv(d),d}),merge:!0}).finally(()=>{i.current=!0})}return window.addEventListener(te.HASHCHANGE,s),()=>{window.removeEventListener(te.HASHCHANGE,s)}},[t]),L.useEffect(()=>{const r=WX.on(async(o,a)=>{const l=i.current,c="adapter"in n.current&&n.current.adapter||null;try{c&&N1!==Nv(a)&&await eL(c,o)}catch(u){console.error(`couldn't persist library update: ${u.message}`,o),l&&n.current.excalidrawAPI&&n.current.excalidrawAPI.updateScene({appState:{errorMessage:R("errors.saveLibraryError")}})}}),s=o=>{J6&&j9(o)};return window.addEventListener(te.BEFORE_UNLOAD,s),()=>{window.removeEventListener(te.BEFORE_UNLOAD,s),r(),N1=0,J6=0}},[])},d8e=({theme:e,id:t,libraryReturnUrl:n})=>{const i=n||window.location.origin+window.location.pathname;return g("a",{className:"library-menu-browse-button",href:`https://libraries.excalidraw.com?target=${window.name||"_blank"}&referrer=${i}&useHash=true&token=${t}&theme=${e}&version=${ey.excalidrawLibrary}`,target:"_excalidraw_libraries",children:R("labels.libraries")})},ZX=({libraryReturnUrl:e,theme:t,id:n,style:i,children:r,className:s})=>N("div",{className:ce("library-menu-control-buttons",s),style:i,children:[g(d8e,{id:n,libraryReturnUrl:e,theme:t}),r]}),f8e=Wt(0),h8e=e=>{const[t,n]=dn(f8e);return L.useEffect(()=>{const{current:i}=e;if(!i)return;const r=Fo(()=>{const{scrollTop:s}=i;n(s)},200);return i.addEventListener("scroll",r),()=>{r.cancel(),i.removeEventListener("scroll",r)}},[e,n]),t},Qh=({label:e,onClick:t,className:n,children:i,actionType:r,type:s="button",isLoading:o,...a})=>{const l=r?`Dialog__action-button--${r}`:"";return N("button",{className:ce("Dialog__action-button",l,n),type:s,"aria-label":e,onClick:t,...a,children:[i&&g("div",{style:o?{visibility:"hidden"}:{},children:i}),g("div",{style:o?{visibility:"hidden"}:{},children:e}),o&&g("div",{style:{position:"absolute",inset:0},children:g(ul,{})})]})},qX=e=>{const{onConfirm:t,onCancel:n,children:i,confirmText:r=R("buttons.confirm"),cancelText:s=R("buttons.cancel"),className:o="",...a}=e,l=xn(),c=py(XT),{container:u}=Dr();return N(ls,{onCloseRequest:n,size:"small",...a,className:`confirm-dialog ${o}`,children:[i,N("div",{className:"confirm-dialog-buttons",children:[g(Qh,{label:s,onClick:()=>{l({openMenu:null}),c(!1),mi.flushSync(()=>{n()}),u==null||u.focus()}}),g(Qh,{label:r,onClick:()=>{l({openMenu:null}),c(!1),mi.flushSync(()=>{t()}),u==null||u.focus()},actionType:"danger"})]})]})};class td{static has(t){try{return!!window.localStorage.getItem(t)}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),!1}}static get(t){try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.warn(`localStorage.getItem error: ${n.message}`),null}}}F(td,"set",(t,n)=>{try{return window.localStorage.setItem(t,JSON.stringify(n)),!0}catch(i){return console.warn(`localStorage.setItem error: ${i.message}`),!1}}),F(td,"delete",t=>{try{window.localStorage.removeItem(t)}catch(n){console.warn(`localStorage.removeItem error: ${n.message}`)}});const g8e=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,m8e=/{{([\w-]+)}}/,p8e=/<([\w-]+)>/,U8e=/<\/([\w-]+)>/,b8e=(e,t)=>{const n=[{name:"",children:[]}];return e.split(g8e).filter(Boolean).forEach(i=>{const r=i.match(p8e),s=i.match(U8e),o=i.match(m8e);if(r!==null){const a=r[1];t.hasOwnProperty(a)?n.push({name:a,children:[]}):console.warn(`Trans: missed to pass in prop ${a} for interpolating ${e}`)}else if(s!==null)if(s[1]===n[n.length-1].name){const l=n.pop(),c=ue.createElement(ue.Fragment,{},...l.children),u=t[l.name];typeof u=="function"&&n[n.length-1].children.push(u(c))}else console.warn(`Trans: unexpected end tag ${i} for interpolating ${e}`);else if(o!==null){const a=o[1];t.hasOwnProperty(a)?n[n.length-1].children.push(t[a]):console.warn(`Trans: key ${a} not in props for interpolating ${e}`)}else n[n.length-1].children.push(i)}),n.length!==1&&console.warn(`Trans: stack not empty for interpolating ${e}`),n[0].children},Cr=({i18nKey:e,children:t,...n})=>{const{t:i}=fn();return ue.createElement(ue.Fragment,{},...b8e(i(e),n))},y8e=async e=>{const i=Math.round(8),r=Math.max(Math.round(128/64),2),s=Pse(e,6),o=document.createElement("canvas");o.width=s[0].length*128+(s[0].length+1)*(i*2)-i*2,o.height=s.length*128+(s.length+1)*(i*2)-i*2;const a=o.getContext("2d");a.fillStyle=yi.white,a.fillRect(0,0,o.width,o.height);for(const[l,c]of e.entries()){const u=await Qy({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=u,h=Math.floor(l/6)*(128+i*2),m=l%6*(128+i*2);a.drawImage(u,m+(128-d)/2+i,h+(128-f)/2+i),a.lineWidth=r,a.strokeStyle=yi.gray[4],a.strokeRect(m+i/2,h+i/2,128+i,128+i)}return await yX(new File([await D0(o)],"preview",{type:Te.png}),{outputType:Te.jpg,maxWidthOrHeight:5e3})},E8e=({libItem:e,appState:t,index:n,onChange:i,onRemove:r})=>{const s=L.useRef(null),o=L.useRef(null);return L.useEffect(()=>{const a=s.current;a&&(async()=>{const l=await XX({elements:e.elements,appState:{...t,viewBackgroundColor:yi.white,exportBackground:!0},files:null,skipInliningFonts:!0});a.innerHTML=l.outerHTML})()},[e.elements,t]),N("div",{className:"single-library-item",children:[e.status==="published"&&g("span",{className:"single-library-item-status",children:R("labels.statusPublished")}),g("div",{ref:s,className:"single-library-item__svg"}),g(Xe,{"aria-label":R("buttons.remove"),type:"button",icon:au,className:"single-library-item--remove",onClick:r.bind(null,e.id),title:R("buttons.remove")}),N("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[N("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[N("div",{style:{padding:"0.5em 0"},children:[g("span",{style:{fontWeight:500,color:yi.gray[6]},children:R("publishDialog.itemName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",ref:o,style:{width:"80%",padding:"0.2rem"},defaultValue:e.name,placeholder:"Item name",onChange:a=>{i(a.target.value,n)}})]}),g("span",{className:"error",children:e.error})]})]})},v8e=({onClose:e,libraryItems:t,appState:n,onSuccess:i,onError:r,updateItemsInStorage:s,onRemove:o})=>{const[a,l]=L.useState({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,u]=L.useState(!1);L.useEffect(()=>{const w=td.get(m1.PUBLISH_LIBRARY);w&&l(w)},[]);const[d,f]=L.useState(t.slice());L.useEffect(()=>{f(t.slice())},[t]);const h=w=>{l({...a,[w.target.name]:w.target.value})},m=async w=>{w.preventDefault(),u(!0);const v=[];let I=!1;if(d.forEach(k=>{let P="";k.name||(P=R("publishDialog.errors.required"),I=!0),v.push({...k,error:P})}),I){f(v),u(!1);return}const x=await y8e(d),_={type:Cs.excalidrawLibrary,version:ey.excalidrawLibrary,source:N9(),libraryItems:d},T=JSON.stringify(_,null,2),A=new Blob([T],{type:"application/json"}),C=new FormData;C.append("excalidrawLib",A),C.append("previewImage",x),C.append("previewImageType",x.type),C.append("title",a.name),C.append("authorName",a.authorName),C.append("githubHandle",a.githubHandle),C.append("name",a.name),C.append("description",a.description),C.append("twitterHandle",a.twitterHandle),C.append("website",a.website),fetch("https://us-central1-excalidraw-room-persistence.cloudfunctions.net/libraries/submit",{method:"post",body:C}).then(k=>k.ok?k.json().then(({url:P})=>{td.delete(m1.PUBLISH_LIBRARY),i({url:P,authorName:a.authorName,items:d})}):k.json().catch(()=>{throw new Error(k.statusText||"something went wrong")}).then(P=>{throw new Error(P.message||k.statusText||"something went wrong")}),k=>{console.error(k),r(k),u(!1)}).catch(k=>{console.error(k),r(k),u(!1)})},p=()=>{const w=[];return d.forEach((v,I)=>{w.push(g("div",{className:"single-library-item-wrapper",children:g(E8e,{libItem:v,appState:n,index:I,onChange:(x,_)=>{const T=d.slice();T[_].name=x,f(T)},onRemove:o})},I))}),g("div",{className:"selected-library-items",children:w})},U=L.useCallback(()=>{s(d),td.set(m1.PUBLISH_LIBRARY,a),e()},[d,e,s,a]),b=!!t.length,y=t.some(w=>w.status==="published");return g(ls,{onCloseRequest:U,title:R("publishDialog.title"),className:"publish-library",children:b?N("form",{onSubmit:m,children:[g("div",{className:"publish-library-note",children:g(Cr,{i18nKey:"publishDialog.noteDescription",link:w=>g("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener",children:w})})}),g("span",{className:"publish-library-note",children:g(Cr,{i18nKey:"publishDialog.noteGuidelines",link:w=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:w})})}),g("div",{className:"publish-library-note",children:R("publishDialog.noteItems")}),y&&g("span",{className:"publish-library-note publish-library-warning",children:R("publishDialog.republishWarning")}),p(),N("div",{className:"publish-library__fields",children:[N("label",{children:[N("div",{children:[g("span",{children:R("publishDialog.libraryName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"name",required:!0,value:a.name,onChange:h,placeholder:R("publishDialog.placeholder.libraryName")})]}),N("label",{style:{alignItems:"flex-start"},children:[N("div",{children:[g("span",{children:R("publishDialog.libraryDesc")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("textarea",{name:"description",rows:4,required:!0,value:a.description,onChange:h,placeholder:R("publishDialog.placeholder.libraryDesc")})]}),N("label",{children:[N("div",{children:[g("span",{children:R("publishDialog.authorName")}),g("span",{"aria-hidden":"true",className:"required",children:"*"})]}),g("input",{type:"text",name:"authorName",required:!0,value:a.authorName,onChange:h,placeholder:R("publishDialog.placeholder.authorName")})]}),N("label",{children:[g("span",{children:R("publishDialog.githubUsername")}),g("input",{type:"text",name:"githubHandle",value:a.githubHandle,onChange:h,placeholder:R("publishDialog.placeholder.githubHandle")})]}),N("label",{children:[g("span",{children:R("publishDialog.twitterUsername")}),g("input",{type:"text",name:"twitterHandle",value:a.twitterHandle,onChange:h,placeholder:R("publishDialog.placeholder.twitterHandle")})]}),N("label",{children:[g("span",{children:R("publishDialog.website")}),g("input",{type:"text",name:"website",pattern:"https?://.+",title:R("publishDialog.errors.website"),value:a.website,onChange:h,placeholder:R("publishDialog.placeholder.website")})]}),g("span",{className:"publish-library-note",children:g(Cr,{i18nKey:"publishDialog.noteLicense",link:w=>g("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:w})})})]}),N("div",{className:"publish-library__buttons",children:[g(Qh,{label:R("buttons.saveLibNames"),onClick:U,"data-testid":"cancel-clear-canvas-button"}),g(Qh,{type:"submit",label:R("buttons.submit"),actionType:"primary",isLoading:c})]})]}):g("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:R("publishDialog.atleastOneLibItem")})})},w8e=L.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:ce("Stack Stack_horizontal",r),style:{"--gap":t,alignItems:n,justifyContent:i,...s},ref:o,children:e})),_8e=L.forwardRef(({children:e,gap:t,align:n,justifyContent:i,className:r,style:s},o)=>g("div",{className:ce("Stack Stack_vertical",r),style:{"--gap":t,justifyItems:n,justifyContent:i,...s},ref:o,children:e})),$a={Row:w8e,Col:_8e},QX=({children:e,onClickOutside:t,className:n="",onSelect:i,style:r,placement:s="bottom"})=>{const o=Nn(),a=L.useRef(null),l=Cy({onClickOutside:t});UT(a,u=>{var d,f,h;(f=(d=a.current)==null?void 0:d.closest(".dropdown-menu-container"))!=null&&f.contains(u.target)||(h=l.onClickOutside)==null||h.call(l)}),L.useEffect(()=>{const u=f=>{var h;f.key===V.ESCAPE&&(f.stopImmediatePropagation(),(h=l.onClickOutside)==null||h.call(l))},d={capture:!0};return document.addEventListener(te.KEYDOWN,u,d),()=>{document.removeEventListener(te.KEYDOWN,u,d)}},[l]);const c=ce(`dropdown-menu ${n}`,{"dropdown-menu--mobile":o.formFactor==="phone","dropdown-menu--placement-top":s==="top"}).trim();return g(Q$.Provider,{value:{onSelect:i},children:g("div",{ref:a,className:c,style:r,"data-testid":"dropdown-menu",children:o.formFactor==="phone"?g($a.Col,{className:"dropdown-menu-container",children:e}):g(Zr,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:e})})})};QX.displayName="DropdownMenuContent";const T8e=({children:e,className:t="",selected:n,...i})=>g("div",{...i,className:`dropdown-menu-item-base dropdown-menu-item-custom ${t} ${n?"dropdown-menu-item--selected":""}`.trim(),children:e}),O1=({icon:e,shortcut:t,href:n,children:i,onSelect:r,className:s="",selected:o,rel:a="noopener",...l})=>{const c=eG(l.onClick,r);return g("a",{...l,href:n,target:"_blank",rel:a||"noopener",className:J$(s,o),title:l.title??l["aria-label"],onClick:c,children:g(q$,{icon:e,shortcut:t,children:i})})};O1.displayName="DropdownMenuItemLink";const JX=()=>g("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0",flex:"0 0 auto"}});JX.displayName="DropdownMenuSeparator";const ej=({className:e="",children:t,onToggle:n,title:i,...r})=>{const s=Nn(),o=ce(`dropdown-menu-button ${e}`,"zen-mode-transition",{"dropdown-menu-button--mobile":s.formFactor==="phone"}).trim();return g("button",{className:o,onClick:n,type:"button","data-testid":"dropdown-menu-button",title:i,...r,children:t})};ej.displayName="DropdownMenuTrigger";const I8e=e=>{const t=ue.Children.toArray(e).find(n=>ue.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuTrigger");return t||null},S8e=e=>{const t=ue.Children.toArray(e).find(n=>ue.isValidElement(n)&&typeof n.type!="string"&&(n==null?void 0:n.type.displayName)&&n.type.displayName==="DropdownMenuContent");return t||null},ze=({children:e,open:t,placement:n})=>{const i=I8e(e),r=S8e(e),s=r&&ue.isValidElement(r)?ue.cloneElement(r,{placement:n}):r;return N("div",{className:"dropdown-menu-container",style:{display:"contents"},children:[i,t&&s]})};ze.Trigger=ej;ze.Content=QX;ze.Item=Lr;ze.ItemLink=O1;ze.ItemCustom=T8e;ze.Group=H6;ze.Separator=JX;ze.displayName="DropdownMenu";const x8e=(e,t)=>e.filter(n=>t.includes(n.id)),C8e=({setAppState:e,selectedItems:t,library:n,onRemoveFromLibrary:i,resetLibrary:r,onSelectItems:s,appState:o,className:a})=>{const[l]=dn(qh),[c,u]=dn(XT),d=()=>{const C=t.length?R("alerts.removeItemsFromsLibrary",{count:t.length}):R("alerts.resetLibrary"),k=t.length?R("confirmDialog.removeItemsFromLib"):R("confirmDialog.resetLibrary");return g(qX,{onConfirm:()=>{t.length?i():r(),h(!1)},onCancel:()=>{h(!1)},title:k,children:g("p",{children:C})})},[f,h]=L.useState(!1),m=!!t.length,p=m?l.libraryItems.filter(C=>t.includes(C.id)):l.libraryItems,U=R(m?"buttons.remove":"buttons.resetLibrary"),[b,y]=L.useState(!1),[w,v]=L.useState(null),I=L.useCallback(()=>N(ls,{onCloseRequest:()=>v(null),title:R("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[g("p",{children:g(Cr,{i18nKey:"publishSuccessDialog.content",authorName:w.authorName,link:C=>g("a",{href:w==null?void 0:w.url,target:"_blank",rel:"noopener noreferrer",children:C})})}),g(Xe,{type:"button",title:R("buttons.close"),"aria-label":R("buttons.close"),label:R("buttons.close"),onClick:()=>v(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[v,w]),x=(C,k)=>{y(!1),v({url:C.url,authorName:C.authorName});const P=k.slice();P.forEach(D=>{t.includes(D.id)&&(D.status="published")}),n.setLibrary(P)},_=async()=>{try{await n.updateLibrary({libraryItems:kT({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(C){if((C==null?void 0:C.name)==="AbortError"){console.warn(C);return}e({errorMessage:R("errors.importLibraryError")})}},T=async()=>{const C=m?p:await n.getLatestLibrary();G5e(C).catch(FB).catch(k=>{e({errorMessage:k.message})})},A=()=>N(ze,{open:c,children:[g(ze.Trigger,{onToggle:()=>u(!c),children:hde}),N(ze.Content,{onClickOutside:()=>u(!1),onSelect:()=>u(!1),className:"library-menu",children:[!m&&g(ze.Item,{onSelect:_,icon:W_,"data-testid":"lib-dropdown--load",children:R("buttons.load")}),!!p.length&&g(ze.Item,{onSelect:T,icon:Ey,"data-testid":"lib-dropdown--export",children:R("buttons.export")}),m&&g(ze.Item,{icon:Efe,onSelect:()=>y(!0),"data-testid":"lib-dropdown--remove",children:R("buttons.publishLibrary")}),!!p.length&&g(ze.Item,{onSelect:()=>h(!0),icon:$c,children:U})]})]});return N("div",{className:ce("library-menu-dropdown-container",a),children:[A(),t.length>0&&g("div",{className:"library-actions-counter",children:t.length}),f&&d(),b&&g(v8e,{onClose:()=>y(!1),libraryItems:x8e(l.libraryItems,t),appState:o,onSuccess:C=>x(C,l.libraryItems),onError:C=>window.alert(C),updateItemsInStorage:()=>n.setLibrary(l.libraryItems),onRemove:C=>s(t.filter(k=>k!==C))}),w&&I()]})},A8e=({selectedItems:e,onSelectItems:t,className:n})=>{const{library:i}=po(),{clearLibraryCache:r,deleteItemsFromLibraryCache:s}=$T(),o=ai(),a=xn(),[l]=dn(qh),c=async d=>{const f=d.filter(h=>!e.includes(h.id));i.setLibrary(f).catch(()=>{a({errorMessage:R("alerts.errorRemovingFromLibrary")})}),s(e),t([])};return g(C8e,{appState:o,setAppState:a,selectedItems:e,onSelectItems:t,library:i,onRemoveFromLibrary:()=>c(l.libraryItems),resetLibrary:()=>{i.resetLibrary(),r()},className:n})};function M8e(){return[!1,L.useCallback(t=>t(),[])]}const R8e=ue.useTransition||M8e,k8e=L.memo(({id:e,elements:t,isPending:n,onClick:i,selected:r,onToggle:s,onDrag:o,svgCache:a})=>{const l=L.useRef(null),c=YX(e,t,a,l),[u,d]=L.useState(!1),f=Nn().formFactor==="phone",h=n&&g("div",{className:"library-unit__adder",children:fde});return N("div",{className:ce("library-unit",{"library-unit__active":t,"library-unit--hover":t&&u,"library-unit--selected":r,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[g("div",{className:ce("library-unit__dragger",{"library-unit__pulse":!!n}),ref:l,draggable:!!t,onClick:t||n?m=>{e&&m.shiftKey?s(e,m):i(e)}:void 0,onDragStart:m=>{if(!e){m.preventDefault();return}d(!1),o(e,m)}}),h,e&&t&&(u||f||r)&&g(ST,{checked:r,onChange:(m,p)=>s(e,p),className:"library-unit__checkbox"})]})}),L8e=()=>g("div",{className:"library-unit library-unit--skeleton"}),R3=({children:e})=>g("div",{className:"library-menu-items-container__grid",children:e}),r2=L.memo(({items:e,onItemSelectToggle:t,onItemDrag:n,isItemSelected:i,onClick:r,svgCache:s,itemsRenderedPerBatch:o})=>{const[,a]=R8e(),[l,c]=L.useState(0);return L.useEffect(()=>{l<e.length&&a(()=>{c(l+o)})},[l,e.length,a,o]),g(fe,{children:e.map((u,d)=>d<l?g(k8e,{elements:u==null?void 0:u.elements,isPending:!(u!=null&&u.id)&&!!(u!=null&&u.elements),onClick:r,svgCache:s,id:u==null?void 0:u.id,selected:i(u.id),onToggle:t,onDrag:n},(u==null?void 0:u.id)??d):g(L8e,{},d))})}),ml=({type:e="button",onSelect:t,selected:n,children:i,className:r="",...s})=>g("button",{onClick:ry(s.onClick,o=>{t()}),type:e,className:ce("excalidraw-button",r,{selected:n}),...s,children:i}),xd=L.forwardRef(({onChange:e,label:t,fullWidth:n,placeholder:i,readonly:r,selectOnRender:s,onKeyDown:o,isRedacted:a=!1,icon:l,className:c,type:u,...d},f)=>{const h=L.useRef(null);L.useImperativeHandle(f,()=>h.current),L.useLayoutEffect(()=>{var U,b;s&&((U=h.current)==null||U.focus(),(b=h.current)==null||b.select())},[s]);const[m,p]=L.useState(!1);return N("div",{className:ce("ExcTextField",c,{"ExcTextField--fullWidth":n,"ExcTextField--hasIcon":!!l}),onClick:()=>{var U;(U=h.current)==null||U.focus()},children:[l,t&&g("div",{className:"ExcTextField__label",children:t}),N("div",{className:ce("ExcTextField__input",{"ExcTextField__input--readonly":r}),children:[g("input",{className:ce({"is-redacted":"value"in d&&d.value&&a&&!m}),readOnly:r,value:"value"in d?d.value:void 0,defaultValue:"defaultValue"in d?d.defaultValue:void 0,placeholder:i,ref:h,onChange:U=>e==null?void 0:e(U.target.value),onKeyDown:o,type:u}),a&&g(ml,{onSelect:()=>p(!m),style:{border:0,userSelect:"none"},children:m?Afe:Q_})]})]})}),D8e=17,N8e=64;function O8e({isLoading:e,libraryItems:t,onAddToLibrary:n,onInsertLibraryItems:i,pendingElements:r,theme:s,id:o,libraryReturnUrl:a,onSelectItems:l,selectedItems:c}){const u=Nn(),d=L.useRef(null),f=h8e(d);L.useEffect(()=>{var H;f>0&&((H=d.current)==null||H.scrollTo(0,f))},[]);const{svgCache:h}=$T(),[m,p]=L.useState(null),[U,b]=L.useState(""),y=!t.length&&!r.length,w=!y&&!!U.trim(),v=L.useMemo(()=>{const H=D1(U.trim().toLowerCase());return H?t.filter($=>{const X=$.name||"";return X.trim()&&D1(X.toLowerCase()).includes(H)}):[]},[t,U]),I=L.useMemo(()=>t.filter(H=>H.status!=="published"),[t]),x=L.useMemo(()=>t.filter(H=>H.status==="published"),[t]),_=L.useCallback((H,$)=>{const X=!c.includes(H),W=[...I,...x];if(X){if($.shiftKey&&m){const Q=W.findIndex(Ve=>Ve.id===m),oe=W.findIndex(Ve=>Ve.id===H);if(Q===-1||oe===-1){l([...c,H]);return}const ne=ve(c),ie=Math.min(Q,oe),me=Math.max(Q,oe),Re=W.reduce((Ve,wt,Ot)=>((Ot>=ie&&Ot<=me||ne.has(wt.id))&&Ve.push(wt.id),Ve),[]);l(Re)}else l([...c,H]);p(H)}else p(null),l(c.filter(Q=>Q!==H))},[m,l,x,c,I]);L.useEffect(()=>{c.length||p(null)},[c]);const T=L.useCallback(H=>{let $;return c.includes(H)?$=t.filter(X=>c.includes(X.id)):$=t.filter(X=>X.id===H),$.map(X=>({...X,elements:_1({type:"everything",elements:X.elements,randomizeSeed:!0}).duplicatedElements}))},[t,c]),A=L.useCallback((H,$)=>{const X={itemIds:c.includes(H)?c:[H]};$.dataTransfer.setData(Te.excalidrawlibIds,JSON.stringify(X))},[c]),C=L.useCallback(H=>H?c.includes(H):!1,[c]),k=L.useCallback(()=>{n(r)},[r,n]),P=L.useCallback(H=>{H&&i(T(H))},[T,i]),D=h.size>=(v.length?v:t).length?N8e:D8e,j=L.useRef(null);L.useEffect(()=>{Nse(()=>{var H;(H=j.current)==null||H.focus()})},[]);const G=!w&&N(fe,{children:[!y&&g("div",{className:"library-menu-items-container__header",children:R("labels.personalLib")}),!r.length&&!I.length?N("div",{className:"library-menu-items__no-items",children:[!x.length&&g("div",{className:"library-menu-items__no-items__label",children:R("library.noItems")}),g("div",{className:"library-menu-items__no-items__hint",children:x.length>0?R("library.hint_emptyPrivateLibrary"):R("library.hint_emptyLibrary")})]}):N(R3,{children:[r.length>0&&g(r2,{itemsRenderedPerBatch:D,items:[{id:null,elements:r}],onItemSelectToggle:_,onItemDrag:A,onClick:k,isItemSelected:C,svgCache:h}),g(r2,{itemsRenderedPerBatch:D,items:I,onItemSelectToggle:_,onItemDrag:A,onClick:P,isItemSelected:C,svgCache:h})]}),x.length>0&&g("div",{className:"library-menu-items-container__header",style:{marginTop:"0.75rem"},children:R("labels.excalidrawLib")}),x.length>0&&g(R3,{children:g(r2,{itemsRenderedPerBatch:D,items:x,onItemSelectToggle:_,onItemDrag:A,onClick:P,isItemSelected:C,svgCache:h})})]}),B=w&&N(fe,{children:[N("div",{className:"library-menu-items-container__header",children:[R("library.search.heading"),!e&&N("div",{className:"library-menu-items-container__header__hint",style:{cursor:"pointer"},onPointerDown:H=>H.preventDefault(),onClick:H=>{b("")},children:[g("kbd",{children:"esc"})," to clear"]})]}),v.length>0?g(R3,{children:g(r2,{itemsRenderedPerBatch:D,items:v,onItemSelectToggle:_,onItemDrag:A,onClick:P,isItemSelected:C,svgCache:h})}):N("div",{className:"library-menu-items__no-items",children:[g("div",{className:"library-menu-items__no-items__hint",children:R("library.search.noResults")}),g(ml,{onPointerDown:H=>H.preventDefault(),onSelect:()=>{b("")},style:{width:"auto",marginTop:"1rem"},children:R("library.search.clearSearch")})]})]});return N("div",{className:"library-menu-items-container",style:r.length||I.length||x.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[N("div",{className:"library-menu-items-header",children:[!y&&g(xd,{ref:j,type:"search",className:ce("library-menu-items-container__search",{hideCancelButton:u.formFactor!=="phone"}),placeholder:R("library.search.inputPlaceholder"),value:U,onChange:H=>b(H)}),g(A8e,{selectedItems:c,onSelectItems:l,className:"library-menu-dropdown-container--in-heading"})]}),N($a.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:x.length>0?1:"0 1 auto",margin:y?"auto":0},ref:d,children:[e&&g("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:g(ul,{})}),G,B,y&&g(ZX,{style:{padding:"16px 0",width:"100%"},id:o,libraryReturnUrl:a,theme:s})]})]})}const XT=Wt(!1),tL=({children:e})=>g("div",{className:"layer-ui__library",children:e}),P8e=L.memo(({onInsertLibraryItems:e,pendingElements:t,onAddToLibrary:n,setAppState:i,libraryReturnUrl:r,library:s,id:o,theme:a,selectedItems:l,onSelectItems:c})=>{const[u]=dn(qh),d=L.useCallback(m=>{(async(U,b)=>{Je("element","addToLibrary","ui");for(const w of UB)if(U.some(v=>v.type===w))return i({errorMessage:R(`errors.libraryElementTypeError.${w}`)});const y=[{status:"unpublished",elements:U,id:mr(),created:Date.now()},...b];n(),s.setLibrary(y).catch(()=>{i({errorMessage:R("alerts.errorAddingToLibrary")})})})(m,u.libraryItems)},[n,s,i,u.libraryItems]),f=L.useMemo(()=>u.libraryItems,[u]);if(u.status==="loading"&&!u.isInitialized)return g(tL,{children:g("div",{className:"layer-ui__library-message",children:N("div",{children:[g(ul,{size:"2em"}),g("span",{children:R("labels.libraryLoadingMessage")})]})})});const h=u.libraryItems.length>0||t.length>0;return N(tL,{children:[g(O8e,{isLoading:u.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:e,pendingElements:t,id:o,libraryReturnUrl:r,theme:a,onSelectItems:c,selectedItems:l}),h&&g(ZX,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:o,libraryReturnUrl:r,theme:a})]})}),k3=(e,t)=>({elements:e,pending:Ge(e,{selectedElementIds:t},{includeBoundTextElement:!0,includeElementsInFrames:!0}),selectedElementIds:t}),F8e=(e,t)=>{const n=sE(),[i,r]=L.useState(()=>k3(n,e.selectedElementIds)),s=L.useRef(new Map);return L.useEffect(()=>{for(const o of i.pending)s.current.set(o.id,o.version)},[i.pending]),L.useEffect(()=>{t.state.cursorButton==="up"&&t.state.activeTool.type==="selection"&&r(o=>{var l;if(!Ki(o.selectedElementIds,e.selectedElementIds))return s.current.clear(),k3(n,e.selectedElementIds);const a=t.scene.getNonDeletedElementsMap();for(const c of Object.keys(e.selectedElementIds)){const u=(l=a.get(c))==null?void 0:l.version;if(u&&u!==s.current.get(c))return k3(n,e.selectedElementIds)}return o})},[t,t.state.cursorButton,t.state.activeTool.type,e.selectedElementIds,n]),i.pending},B8e=L.memo(()=>{const e=po(),{onInsertElements:t}=e,n=zp(),i=ai(),r=xn(),[s,o]=L.useState([]),a=L.useMemo(()=>e.library,[e.library]),l=F8e(i,e);L.useEffect(()=>en(document,te.KEYDOWN,d=>{if(d.key===V.ESCAPE&&d.target instanceof HTMLElement){const f=d.target;if(f.closest(`.${gr.SIDEBAR}`))s.length>0?(d.stopPropagation(),o([])):ka(f)&&f instanceof HTMLInputElement&&!f.value&&(d.stopPropagation(),r({openSidebar:null}),e.focusContainer());else if(s.length>0){const{x:h,y:m}=e.lastViewportPosition,p=document.elementFromPoint(h,m);p!=null&&p.closest(`.${gr.SIDEBAR}`)&&(d.stopPropagation(),o([]))}}},{capture:!0}),[s,r,e]);const c=L.useCallback(d=>{t(GT(d)),e.focusContainer()},[t,e]),u=L.useCallback(()=>{r({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[r]);return g(P8e,{pendingElements:l,onInsertLibraryItems:c,onAddToLibrary:u,setAppState:r,libraryReturnUrl:n.libraryReturnUrl,library:a,id:e.id,theme:i.theme,selectedItems:s,onSelectItems:o})}),z8e=e=>{const{closeOnClickOutside:t=!0}=e,n=j$({className:"excalidraw-modal-container"}),i=L.useRef(document.body.classList.contains("excalidraw-animations-disabled"));if(!n)return null;const r=s=>{s.key===V.ESCAPE&&(s.nativeEvent.stopImmediatePropagation(),s.stopPropagation(),e.onCloseRequest())};return mi.createPortal(N("div",{className:ce("Modal",e.className,{"animations-disabled":i.current}),role:"dialog","aria-modal":"true",onKeyDown:r,"aria-labelledby":e.labelledBy,"data-prevent-outside-click":!0,children:[g("div",{className:"Modal__background",onClick:t?e.onCloseRequest:void 0}),g("div",{className:"Modal__content",style:{"--max-width":`${e.maxWidth}px`},tabIndex:0,children:e.children})]}),n)};function H8e(e){if(e&&typeof e=="number")return e;switch(e){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}const ls=e=>{const[t,n]=zX(),[i]=L.useState(document.activeElement),{id:r}=Dr(),s=Nn().formFactor==="phone";L.useEffect(()=>{if(!t)return;const c=x4(t);setTimeout(()=>{c.length>0&&e.autofocus!==!1&&(c[1]||c[0]).focus()});const u=d=>{if(d.key===V.TAB){const f=x4(t),{activeElement:h}=document,m=f.findIndex(p=>p===h);m===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):m===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return t.addEventListener("keydown",u),()=>t.removeEventListener("keydown",u)},[t,e.autofocus]);const o=xn(),a=py(XT),l=()=>{o({openMenu:null}),a(!1),i.focus(),e.onCloseRequest()};return g(z8e,{className:ce("Dialog",e.className,{"Dialog--fullscreen":s}),labelledBy:"dialog-title",maxWidth:H8e(e.size),onCloseRequest:l,closeOnClickOutside:e.closeOnClickOutside,children:N(Zr,{ref:n,children:[e.title&&g("h2",{id:`${r}-dialog-title`,className:"Dialog__title",children:g("span",{className:"Dialog__titleContent",children:e.title})}),s&&g("button",{className:"Dialog__close",onClick:l,title:R("buttons.close"),"aria-label":R("buttons.close"),type:"button",children:au}),g("div",{className:"Dialog__content",children:e.children})]})})},Ov=[{icon:yy,value:"selection",key:V.V,numericKey:V[1],fillable:!0},{icon:V_,value:"rectangle",key:V.R,numericKey:V[2],fillable:!0},{icon:$_,value:"diamond",key:V.D,numericKey:V[3],fillable:!0},{icon:G_,value:"ellipse",key:V.O,numericKey:V[4],fillable:!0},{icon:AV,value:"arrow",key:V.A,numericKey:V[5],fillable:!0},{icon:X_,value:"line",key:V.L,numericKey:V[6],fillable:!0},{icon:Rp,value:"freedraw",key:[V.P,V.X],numericKey:V[7],fillable:!1},{icon:gh,value:"text",key:V.T,numericKey:V[8],fillable:!1},{icon:G2,value:"image",key:null,numericKey:V[9],fillable:!1},{icon:MV,value:"eraser",key:V.E,numericKey:V[0],fillable:!1}],tj=e=>e.state.preferredSelectionTool.type==="lasso"?[{value:"lasso",icon:yy,key:V.V,numericKey:V[1],fillable:!0},...Ov.slice(1)]:Ov,V8e=(e,t)=>{const n=tj(t).find((i,r)=>i.numericKey!=null&&e===i.numericKey.toString()||i.key&&(typeof i.key=="string"?i.key===e:i.key.includes(e)));return(n==null?void 0:n.value)||null};var $8e={};const nL=e=>{let t;const n=new Set,i=(u,d)=>{const f=typeof u=="function"?u(t):u;if(!Object.is(f,t)){const h=t;t=d??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(m=>m(t,h))}},r=()=>t,l={setState:i,getState:r,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{($8e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(i,r,l);return l},G8e=e=>e?nL(e):nL;var nj={exports:{}},ij={},rj={exports:{}},sj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh=L;function X8e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var j8e=typeof Object.is=="function"?Object.is:X8e,Y8e=Jh.useState,W8e=Jh.useEffect,K8e=Jh.useLayoutEffect,Z8e=Jh.useDebugValue;function q8e(e,t){var n=t(),i=Y8e({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return K8e(function(){r.value=n,r.getSnapshot=t,L3(r)&&s({inst:r})},[e,n,t]),W8e(function(){return L3(r)&&s({inst:r}),e(function(){L3(r)&&s({inst:r})})},[e]),Z8e(n),n}function L3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!j8e(e,n)}catch{return!0}}function Q8e(e,t){return t()}var J8e=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q8e:q8e;sj.useSyncExternalStore=Jh.useSyncExternalStore!==void 0?Jh.useSyncExternalStore:J8e;rj.exports=sj;var e3e=rj.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=L,t3e=e3e;function n3e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var i3e=typeof Object.is=="function"?Object.is:n3e,r3e=t3e.useSyncExternalStore,s3e=Jy.useRef,o3e=Jy.useEffect,a3e=Jy.useMemo,l3e=Jy.useDebugValue;ij.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=s3e(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=a3e(function(){function l(h){if(!c){if(c=!0,u=h,h=i(h),r!==void 0&&o.hasValue){var m=o.value;if(r(m,h))return d=m}return d=h}if(m=d,i3e(u,h))return m;var p=i(h);return r!==void 0&&r(m,p)?(u=h,m):(u=h,d=p)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,i,r]);var a=r3e(e,s[0],s[1]);return o3e(function(){o.hasValue=!0,o.value=a},[a]),l3e(a),a};nj.exports=ij;var c3e=nj.exports;const u3e=El(c3e);var oj={};const{useDebugValue:d3e}=ue,{useSyncExternalStoreWithSelector:f3e}=u3e;let iL=!1;const h3e=e=>e;function g3e(e,t=h3e,n){(oj?"production":void 0)!=="production"&&n&&!iL&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),iL=!0);const i=f3e(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return d3e(i),i}const rL=e=>{(oj?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?G8e(e):e,n=(i,r)=>g3e(t,i,r);return Object.assign(n,t),n},m3e=e=>e?rL(e):rL;var sL,oL;const aL=typeof window<"u"&&((sL=window.document)!=null&&sL.createElement||((oL=window.navigator)==null?void 0:oL.product)==="ReactNative")?ue.useLayoutEffect:ue.useEffect;function vo(){const e=m3e(t=>({current:new Array,version:0,set:t}));return{In:({children:t})=>{const n=e(r=>r.set),i=e(r=>r.version);return aL(()=>{n(r=>({version:r.version+1}))},[]),aL(()=>(n(({current:r})=>({current:[...r,t]})),()=>n(({current:r})=>({current:r.filter(s=>s!==t)}))),[t,i]),null},Out:()=>{const t=e(n=>n.current);return ue.createElement(ue.Fragment,null,t)}}}const aj=ue.createContext(null),er=()=>ue.useContext(aj),p3e=DH(),U3e=()=>ue.useMemo(()=>({MainMenuTunnel:vo(),WelcomeScreenMenuHintTunnel:vo(),WelcomeScreenToolbarHintTunnel:vo(),WelcomeScreenHelpHintTunnel:vo(),WelcomeScreenCenterTunnel:vo(),FooterCenterTunnel:vo(),DefaultSidebarTriggerTunnel:vo(),DefaultSidebarTabTriggersTunnel:vo(),OverwriteConfirmDialogTunnel:vo(),TTDDialogTriggerTunnel:vo(),tunnelsJotai:p3e}),[]),Pv=de({name:"viewMode",label:"labels.viewMode",icon:Q_,viewMode:!0,trackEvent:{category:"canvas",predicate:e=>!e.viewModeEnabled},perform(e,t){return{appState:{...t,viewModeEnabled:!this.checked(t)},captureUpdate:K.EVENTUALLY}},checked:e=>e.viewModeEnabled,predicate:(e,t,n)=>typeof n.viewModeEnabled>"u",keyTest:e=>!e[V.CTRL_OR_CMD]&&e.altKey&&e.code===it.R}),sb=({app:e,options:t,activeTool:n,defaultOption:i,className:r="Shape",namePrefix:s,title:o,"data-testid":a,onToolChange:l,displayedOption:c,fillable:u=!1})=>{const[d,f]=L.useState(!1),h=n.type,m=c.type===h,p=32/2+10,{container:U}=Dr();return!t.some(b=>b.type===h)&&d&&f(!1),L.useEffect(()=>{const b=e.onPointerDownEmitter.on(()=>{f(!1)});return()=>b==null?void 0:b()},[e]),N(Tl,{open:d,children:[g(Il,{asChild:!0,children:g(Xe,{className:ce(r,{fillable:u,active:t.some(b=>b.type===n.type)}),type:"radio",icon:c.icon,checked:m,name:"editor-current-shape",title:o,"aria-label":o,"data-testid":a,onPointerDown:()=>{f(b=>!b),l(i)}})}),g(xy,{className:"tool-popover-content",sideOffset:p,collisionBoundary:U??void 0,children:t.map(({type:b,icon:y,title:w})=>g(Xe,{className:ce(r,{active:h===b}),type:"radio",icon:y,checked:h===b,name:`${s}-option`,title:w||Rt(b),keyBindingLabel:"","aria-label":w||Rt(b),"data-testid":`toolbar-${b}`,onChange:()=>{e.state.activeTool.type!==b&&Je("toolbar",b,"ui"),e.setActiveTool({type:b}),l==null||l(b)}},b))})]})},jT=ce([gr.SHAPE_ACTIONS_THEME_SCOPE,"properties-content"]),eE=(e,t)=>{var i;let n=((i=t[0])==null?void 0:i.type)||null;for(const r of t)if(r.type!==n){n=null;break}return F4(e.activeTool.type)&&n!=="image"&&n!=="frame"&&n!=="magicframe"||t.some(r=>F4(r.type))},tE=(e,t)=>Hc(e.activeTool.type)||t.some(n=>Hc(n.type)),b3e=({appState:e,elementsMap:t,renderAction:n,app:i})=>{var m;const r=uy(t,e);let s=!1;r.length===2&&(Di(r[0])||Di(r[1]))&&(s=!0);const o=!!(e.editingTextElement||e.newElement),a=Nn(),l=document.documentElement.getAttribute("dir")==="rtl",c=Hc(e.activeTool.type)&&!Sr(e.currentItemBackgroundColor)||r.some(p=>Hc(p.type)&&!Sr(p.backgroundColor)),u=r.length===1||s,d=!((m=e.selectedLinearElement)!=null&&m.isEditing)&&r.length===1&&xe(r[0])&&!pe(r[0]),f=!e.croppingElementId&&r.length===1&&Et(r[0]),h=!s&&Rr(e,i);return N("div",{className:"selected-shape-actions",children:[g("div",{children:eE(e,r)&&n("changeStrokeColor")}),tE(e,r)&&g("div",{children:n("changeBackgroundColor")}),c&&n("changeFillStyle"),(v6(e.activeTool.type)||r.some(p=>v6(p.type)))&&n("changeStrokeWidth"),(e.activeTool.type==="freedraw"||r.some(p=>p.type==="freedraw"))&&n("changeStrokeShape"),(w6(e.activeTool.type)||r.some(p=>w6(p.type)))&&N(fe,{children:[n("changeStrokeStyle"),n("changeSloppiness")]}),(g0(e.activeTool.type)||r.some(p=>g0(p.type)))&&g(fe,{children:n("changeRoundness")}),(_6(e.activeTool.type)||r.some(p=>_6(p.type)))&&g(fe,{children:n("changeArrowType")}),(e.activeTool.type==="text"||r.some(ge))&&N(fe,{children:[n("changeFontFamily"),n("changeFontSize"),(e.activeTool.type==="text"||fz(r,t))&&n("changeTextAlign")]}),dz(r,t)&&n("changeVerticalAlign"),(T6(e.activeTool.type)||r.some(p=>T6(p.type)))&&g(fe,{children:n("changeArrowhead")}),n("changeOpacity"),N("fieldset",{children:[g("legend",{children:R("labels.layers")}),N("div",{className:"buttonList",children:[n("sendToBack"),n("sendBackward"),n("bringForward"),n("bringToFront")]})]}),h&&!s&&N("fieldset",{children:[g("legend",{children:R("labels.align")}),N("div",{className:"buttonList",children:[l?N(fe,{children:[n("alignRight"),n("alignHorizontallyCentered"),n("alignLeft")]}):N(fe,{children:[n("alignLeft"),n("alignHorizontallyCentered"),n("alignRight")]}),r.length>2&&n("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),N("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[n("alignTop"),n("alignVerticallyCentered"),n("alignBottom"),r.length>2&&n("distributeVertically")]})]})]}),!o&&r.length>0&&N("fieldset",{children:[g("legend",{children:R("labels.actions")}),N("div",{className:"buttonList",children:[a.formFactor!=="phone"&&n("duplicateSelection"),a.formFactor!=="phone"&&n("deleteSelectedElements"),n("group"),n("ungroup"),u&&n("hyperlink"),f&&n("cropEditor"),d&&n("toggleLinearEditor")]})]})]})},lj=({appState:e,renderAction:t,setAppState:n,targetElements:i,container:r})=>{const s=Hc(e.activeTool.type)&&!Sr(e.currentItemBackgroundColor)||i.some(l=>Hc(l.type)&&!Sr(l.backgroundColor)),o=i.length>0||e.activeTool.type!=="selection"&&e.activeTool.type!=="eraser"&&e.activeTool.type!=="hand"&&e.activeTool.type!=="laser"&&e.activeTool.type!=="lasso",a=e.openPopup==="compactStrokeStyles";return o?g("div",{className:"compact-action-item",children:N(Tl,{open:a,onOpenChange:l=>{n(l?{openPopup:"compactStrokeStyles"}:{openPopup:null})},children:[g(Il,{asChild:!0,children:g("button",{type:"button",className:ce("compact-action-button properties-trigger",{active:a}),title:R("labels.stroke"),onClick:l=>{l.preventDefault(),l.stopPropagation(),n({openPopup:a?null:"compactStrokeStyles"})},children:Kfe})}),a&&g(Sg,{className:jT,container:r,style:{maxWidth:"13rem"},onClose:()=>{},children:N("div",{className:"selected-shape-actions",children:[s&&t("changeFillStyle"),(v6(e.activeTool.type)||i.some(l=>v6(l.type)))&&t("changeStrokeWidth"),(w6(e.activeTool.type)||i.some(l=>w6(l.type)))&&N(fe,{children:[t("changeStrokeStyle"),t("changeSloppiness")]}),(g0(e.activeTool.type)||i.some(l=>g0(l.type)))&&t("changeRoundness"),t("changeOpacity")]})})]})}):null},cj=({appState:e,renderAction:t,setAppState:n,targetElements:i,container:r,app:s})=>{const o=_6(e.activeTool.type)||i.some(l=>_6(l.type)),a=e.openPopup==="compactArrowProperties";return o?g("div",{className:"compact-action-item",children:N(Tl,{open:a,onOpenChange:l=>{n(l?{openPopup:"compactArrowProperties"}:{openPopup:null})},children:[g(Il,{asChild:!0,children:g("button",{type:"button",className:ce("compact-action-button properties-trigger",{active:a}),title:R("labels.arrowtypes"),onClick:l=>{l.preventDefault(),l.stopPropagation(),n({openPopup:a?null:"compactArrowProperties"})},children:(()=>{const l=Ur(i,s,c=>Ce(c)?c.elbowed?"elbow":c.roundness?"round":"sharp":null,c=>Ce(c),c=>c?null:e.currentItemArrowType);return l==="elbow"?tT:l==="round"?nT:eT})()})}),a&&g(Sg,{container:r,className:"properties-content",style:{maxWidth:"13rem"},onClose:()=>{},children:t("changeArrowProperties")})]})}):null},uj=({appState:e,renderAction:t,setAppState:n,targetElements:i,container:r,elementsMap:s})=>{const{saveCaretPosition:o,restoreCaretPosition:a}=Yme(),l=e.openPopup==="compactTextProperties";return g("div",{className:"compact-action-item",children:N(Tl,{open:l,onOpenChange:c=>{c?(e.editingTextElement&&o(),n({openPopup:"compactTextProperties"})):(n({openPopup:null}),e.editingTextElement&&a())},children:[g(Il,{asChild:!0,children:g("button",{type:"button",className:ce("compact-action-button properties-trigger",{active:l}),title:R("labels.textAlign"),onClick:c=>{c.preventDefault(),c.stopPropagation(),l?n({openPopup:null}):(e.editingTextElement&&o(),n({openPopup:"compactTextProperties"}))},children:vde})}),e.openPopup==="compactTextProperties"&&g(Sg,{className:jT,container:r,style:{maxWidth:"13rem"},preventAutoFocusOnTouch:!!e.editingTextElement,onClose:()=>{e.editingTextElement&&a()},children:N("div",{className:"selected-shape-actions",children:[(e.activeTool.type==="text"||i.some(ge))&&t("changeFontSize"),(e.activeTool.type==="text"||fz(i,s))&&t("changeTextAlign"),dz(i,s)&&t("changeVerticalAlign")]})})]})})},dj=({appState:e,renderAction:t,targetElements:n,setAppState:i,container:r,app:s,showDuplicate:o,showDelete:a})=>{const l=!!(e.editingTextElement||e.newElement),c=!e.croppingElementId&&n.length===1&&Et(n[0]),u=n.length===1,d=Rr(e,s);let f=!1;n.length===2&&(Di(n[0])||Di(n[1]))&&(f=!0);const h=document.documentElement.getAttribute("dir")==="rtl",m=e.openPopup==="compactOtherProperties";return l||n.length===0?null:g("div",{className:"compact-action-item",children:N(Tl,{open:m,onOpenChange:p=>{i(p?{openPopup:"compactOtherProperties"}:{openPopup:null})},children:[g(Il,{asChild:!0,children:g("button",{type:"button",className:ce("compact-action-button properties-trigger",{active:m}),title:R("labels.actions"),onClick:p=>{p.preventDefault(),p.stopPropagation(),i({openPopup:m?null:"compactOtherProperties"})},children:gde})}),m&&g(Sg,{className:jT,container:r,style:{maxWidth:"12rem",justifyContent:"center",alignItems:"center"},onClose:()=>{},children:N("div",{className:"selected-shape-actions",children:[N("fieldset",{children:[g("legend",{children:R("labels.layers")}),N("div",{className:"buttonList",children:[t("sendToBack"),t("sendBackward"),t("bringForward"),t("bringToFront")]})]}),d&&!f&&N("fieldset",{children:[g("legend",{children:R("labels.align")}),N("div",{className:"buttonList",children:[h?N(fe,{children:[t("alignRight"),t("alignHorizontallyCentered"),t("alignLeft")]}):N(fe,{children:[t("alignLeft"),t("alignHorizontallyCentered"),t("alignRight")]}),n.length>2&&t("distributeHorizontally"),g("div",{style:{flexBasis:"100%",height:0}}),N("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[t("alignTop"),t("alignVerticallyCentered"),t("alignBottom"),n.length>2&&t("distributeVertically")]})]})]}),N("fieldset",{children:[g("legend",{children:R("labels.actions")}),N("div",{className:"buttonList",children:[t("group"),t("ungroup"),u&&t("hyperlink"),c&&t("cropEditor"),o&&t("duplicateSelection"),a&&t("deleteSelectedElements")]})]})]})})]})})},y3e=({appState:e,renderAction:t,targetElements:n})=>{var r;return!((r=e.selectedLinearElement)!=null&&r.isEditing)&&n.length===1&&xe(n[0])&&!pe(n[0])?g("div",{className:"compact-action-item",children:t("toggleLinearEditor")}):null},E3e=({appState:e,elementsMap:t,renderAction:n,app:i,setAppState:r})=>{var c;const s=uy(t,e),{container:o}=Dr(),a=!!(e.editingTextElement||e.newElement),l=!((c=e.selectedLinearElement)!=null&&c.isEditing)&&s.length===1&&xe(s[0])&&!pe(s[0]);return N("div",{className:"compact-shape-actions",children:[eE(e,s)&&g("div",{className:ce("compact-action-item"),children:n("changeStrokeColor")}),tE(e,s)&&g("div",{className:"compact-action-item",children:n("changeBackgroundColor")}),g(lj,{appState:e,renderAction:n,setAppState:r,targetElements:s,container:o}),g(cj,{appState:e,renderAction:n,setAppState:r,targetElements:s,container:o,app:i}),l&&g("div",{className:"compact-action-item",children:n("toggleLinearEditor")}),(e.activeTool.type==="text"||s.some(ge))&&N(fe,{children:[g("div",{className:"compact-action-item",children:n("changeFontFamily")}),g(uj,{appState:e,renderAction:n,setAppState:r,targetElements:s,container:o,elementsMap:t})]}),!a&&s.length>0&&g("div",{className:"compact-action-item",children:n("duplicateSelection")}),!a&&s.length>0&&g("div",{className:"compact-action-item",children:n("deleteSelectedElements")}),g(dj,{appState:e,renderAction:n,targetElements:s,setAppState:r,container:o,app:i})]})},v3e=({appState:e,elementsMap:t,renderAction:n,app:i,setAppState:r})=>{var U,b;const s=uy(t,e),{container:o}=Dr(),a=L.useRef(null),l=((b=(U=a.current)==null?void 0:U.getBoundingClientRect())==null?void 0:b.width)??0,c=9,u=6,d=32,f=c*d+(c-1)*u,h=d+u,m=l>=f+h,p=l>=f+2*h;return N(Zr,{className:"compact-shape-actions mobile-shape-actions",style:{flexDirection:"row",boxShadow:"none",padding:0,zIndex:2,backgroundColor:"transparent",height:d*1.35,marginBottom:4,alignItems:"center",gap:u,pointerEvents:"none"},ref:a,children:[N("div",{style:{display:"flex",flexDirection:"row",gap:u,flex:1},children:[eE(e,s)&&g("div",{className:ce("compact-action-item"),children:n("changeStrokeColor")}),tE(e,s)&&g("div",{className:"compact-action-item",children:n("changeBackgroundColor")}),g(lj,{appState:e,renderAction:n,setAppState:r,targetElements:s,container:o}),g(cj,{appState:e,renderAction:n,setAppState:r,targetElements:s,container:o,app:i}),g(y3e,{appState:e,renderAction:n,targetElements:s}),(e.activeTool.type==="text"||s.some(ge))&&N(fe,{children:[g("div",{className:"compact-action-item",children:n("changeFontFamily")}),g(uj,{appState:e,renderAction:n,setAppState:r,targetElements:s,container:o,elementsMap:t})]}),g(dj,{appState:e,renderAction:n,targetElements:s,setAppState:r,container:o,app:i,showDuplicate:!p,showDelete:!m})]}),N("div",{style:{display:"flex",flexDirection:"row",gap:u},children:[g("div",{className:"compact-action-item",children:n("undo")}),g("div",{className:"compact-action-item",children:n("redo")}),p&&g("div",{className:"compact-action-item",children:n("duplicateSelection")}),m&&g("div",{className:"compact-action-item",children:n("deleteSelectedElements")})]})]})},w3e=({activeTool:e,setAppState:t,app:n,UIOptions:i})=>{const[r,s]=L.useState(!1),o=ua(),a=o==="full",l=o==="compact",c=[{type:"selection",icon:yy,title:Rt(R("toolBar.selection"))},{type:"lasso",icon:x1,title:Rt(R("toolBar.lasso"))}],u=e.type==="frame",d=e.type==="laser",f=a&&e.type==="lasso"&&n.state.preferredSelectionTool.type!=="lasso",h=e.type==="embeddable",{TTDDialogTriggerTunnel:m}=er();return N(fe,{children:[tj(n).map(({value:p,icon:U,key:b,numericKey:y,fillable:w},v)=>{var T;if(((T=i.tools)==null?void 0:T[p])===!1)return null;const I=R(`toolBar.${p}`),x=b&&Rt(typeof b=="string"?b:b[0]),_=x?`${x} ${R("helpDialog.or")} ${y}`:`${y}`;return(p==="selection"||p==="lasso")&&l?g(sb,{app:n,options:c,activeTool:e,defaultOption:n.state.preferredSelectionTool.type,namePrefix:"selectionType",title:Rt(R("toolBar.selection")),"data-testid":"toolbar-selection",onToolChange:A=>{(A==="selection"||A==="lasso")&&(n.setActiveTool({type:A}),t({preferredSelectionTool:{type:A,initialized:!0}}))},displayedOption:c.find(A=>A.type===n.state.preferredSelectionTool.type)||c[0],fillable:e.type==="selection"},"selection-popover"):g(Xe,{className:ce("Shape",{fillable:w}),type:"radio",icon:U,checked:e.type===p,name:"editor-current-shape",title:`${Rt(I)}  ${_}`,keyBindingLabel:y||x,"aria-label":Rt(I),"aria-keyshortcuts":_,"data-testid":`toolbar-${p}`,onPointerDown:({pointerType:A})=>{!n.state.penDetected&&A==="pen"&&n.togglePenMode(!0),p==="selection"&&(n.state.activeTool.type==="selection"?n.setActiveTool({type:"lasso"}):n.setActiveTool({type:"selection"}))},onChange:({pointerType:A})=>{n.state.activeTool.type!==p&&Je("toolbar",p,"ui"),p==="image"?n.setActiveTool({type:p}):n.setActiveTool({type:p})}},p)}),g("div",{className:"App-toolbar__divider"}),N(ze,{open:r,children:[g(ze.Trigger,{className:ce("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":u||h||f||d&&!n.props.isCollaborating}),onToggle:()=>{s(!r),t({openMenu:null,openPopup:null})},title:R("toolBar.extraTools"),children:u?ed:h?L6:d&&!n.props.isCollaborating?E0:f?x1:lv}),N(ze.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[g(ze.Item,{onSelect:()=>n.setActiveTool({type:"frame"}),icon:ed,shortcut:V.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:u,children:R("toolBar.frame")}),g(ze.Item,{onSelect:()=>n.setActiveTool({type:"embeddable"}),icon:L6,"data-testid":"toolbar-embeddable",selected:h,children:R("toolBar.embeddable")}),g(ze.Item,{onSelect:()=>n.setActiveTool({type:"laser"}),icon:E0,"data-testid":"toolbar-laser",selected:d,shortcut:V.K.toLocaleUpperCase(),children:R("toolBar.laser")}),a&&g(ze.Item,{onSelect:()=>n.setActiveTool({type:"lasso"}),icon:x1,"data-testid":"toolbar-lasso",selected:f,children:R("toolBar.lasso")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),n.props.aiEnabled!==!1&&g(m.Out,{}),g(ze.Item,{onSelect:()=>n.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:q_,"data-testid":"toolbar-embeddable",children:R("toolBar.mermaidToExcalidraw")}),n.props.aiEnabled!==!1&&n.plugins.diagramToCode&&N(ze.Item,{onSelect:()=>n.onMagicframeToolSelect(),icon:N6,"data-testid":"toolbar-magicframe",children:[R("toolBar.magicframe"),g(ze.Item.Badge,{children:"AI"})]})]})]})]})},_3e=({renderAction:e,zoom:t})=>g($a.Col,{gap:1,className:gr.ZOOM_ACTIONS,children:N($a.Row,{align:"center",children:[e("zoomOut"),e("resetZoom"),e("zoomIn")]})}),T3e=({renderAction:e,className:t})=>N("div",{className:`undo-redo-buttons ${t}`,children:[g("div",{className:"undo-button-container",children:g(gl,{label:R("buttons.undo"),children:e("undo")})}),g("div",{className:"redo-button-container",children:N(gl,{label:R("buttons.redo"),children:[" ",e("redo")]})})]}),I3e=({actionManager:e,showExitZenModeBtn:t})=>g("button",{type:"button",className:ce("disable-zen-mode",{"disable-zen-mode--visible":t}),onClick:()=>e.executeAction(xv),children:R("buttons.exitZenMode")}),S3e=({actionManager:e})=>g("button",{type:"button",className:"disable-view-mode",onClick:()=>e.executeAction(Pv),children:qfe}),lL=e=>{const t=L.useRef({userFn:e});return t.current.userFn=e,t.current.stableFn||(t.current.stableFn=(...n)=>t.current.userFn(...n)),t.current.stableFn},nE=Wt(null),x3e=()=>{const[e,t]=dn(nE),n=Nr();return e&&e==="clearCanvas"?g(qX,{onConfirm:()=>{n.executeAction(A1),t(null)},onCancel:()=>t(null),title:R("clearCanvasDialog.title"),children:N("p",{className:"clear-canvas__content",children:[" ",R("alerts.clearReset")]})}):null},C3e={...V6,category:"App",label:"Toggle theme",perform:({actionManager:e})=>{e.executeAction(V6,"commandPalette")}},A3e=Object.freeze(Object.defineProperty({__proto__:null,toggleTheme:C3e},Symbol.toStringTag,{value:"Module"})),M3e=Wt(null),ot={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},cL=e=>{switch(e){case ot.app:return 1;case ot.export:return 2;case ot.editor:return 3;case ot.tools:return 4;case ot.elements:return 5;case ot.links:return 6;default:return 10}},ob=({shortcut:e,className:t,children:n})=>{const i=e.replace("++","+$").split("+");return N("div",{className:ce("shortcut",t),children:[i.map((r,s)=>g("div",{className:"shortcut-wrapper",children:g("div",{className:"shortcut-key",children:r==="$"?"+":r})},r)),g("div",{className:"shortcut-desc",children:n})]})},fj=e=>!e.altKey&&e[V.CTRL_OR_CMD]&&(e.shiftKey&&e.key.toLowerCase()===V.P||e.key===V.SLASH),uL=Object.assign(e=>{var i;const t=ai(),n=xn();return L.useEffect(()=>{const r=s=>{fj(s)&&(s.preventDefault(),s.stopPropagation(),n(o=>{var l;const a=((l=o.openDialog)==null?void 0:l.name)==="commandPalette"?null:{name:"commandPalette"};return a&&Je("command_palette","open","shortcut"),{openDialog:a}}))};return window.addEventListener(te.KEYDOWN,r,{capture:!0}),()=>window.removeEventListener(te.KEYDOWN,r,{capture:!0})},[n]),((i=t.openDialog)==null?void 0:i.name)!=="commandPalette"?null:g(R3e,{...e})},{defaultItems:A3e});function R3e({customCommandPaletteItems:e}){const t=po(),n=ai(),i=xn(),r=zp(),s=Nr(),[o,a]=dn(M3e),[l,c]=L.useState(null),u=L.useRef(null),d=Cy({uiAppState:n,customCommandPaletteItems:e,appProps:r}),[f]=dn(qh),h=L.useMemo(()=>{var T;return((T=f.libraryItems)==null?void 0:T.filter(A=>!!A.name).map(A=>({label:A.name,icon:g(k3e,{id:A.id,elements:A.elements}),category:"Library",order:cL("Library"),haystack:D1(A.name),perform:()=>{t.onInsertElements(GT([A]))}})))||[]},[t,f.libraryItems]);L.useEffect(()=>{const{uiAppState:T,customCommandPaletteItems:A,appProps:C}=d,k=G=>{let B="";return G.label&&(typeof G.label=="function"?B=R(G.label(t.scene.getNonDeletedElements(),T,t)):B=R(G.label)),B},P=G=>typeof G.icon=="function"?G.icon(T,t.scene.getNonDeletedElements()):G.icon;let D=[];const j=(G,B,H)=>{const $={label:k(G),icon:P(G),category:B,shortcut:Zi(G.name),keywords:G.keywords,predicate:G.predicate,viewMode:G.viewMode,perform:()=>{s.executeAction(G,"commandPalette")}};return H?H($,G):$};if(T&&t.scene&&s){const G=[s.actions.group,s.actions.ungroup,s.actions.cut,s.actions.copy,s.actions.deleteSelectedElements,s.actions.wrapSelectionInFrame,s.actions.copyStyles,s.actions.pasteStyles,s.actions.bringToFront,s.actions.bringForward,s.actions.sendBackward,s.actions.sendToBack,s.actions.alignTop,s.actions.alignBottom,s.actions.alignLeft,s.actions.alignRight,s.actions.alignVerticallyCentered,s.actions.alignHorizontallyCentered,s.actions.duplicateSelection,s.actions.flipHorizontal,s.actions.flipVertical,s.actions.zoomToFitSelection,s.actions.zoomToFitSelectionInViewport,s.actions.increaseFontSize,s.actions.decreaseFontSize,s.actions.toggleLinearEditor,s.actions.cropEditor,s.actions.togglePolygon,LX,BX,MEe].map(Q=>j(Q,ot.elements,(oe,ne)=>({...oe,predicate:ne.predicate?ne.predicate:(ie,me,Re,Ve)=>Ge(ie,me).length>0}))),B=[s.actions.toggleHandTool,s.actions.setFrameAsActiveTool,s.actions.toggleLassoTool].map(Q=>j(Q,ot.tools)),H=[s.actions.undo,s.actions.redo,s.actions.zoomIn,s.actions.zoomOut,s.actions.resetZoom,s.actions.zoomToFit,s.actions.zenMode,s.actions.viewMode,s.actions.gridMode,s.actions.objectsSnapMode,s.actions.toggleShortcuts,s.actions.selectAll,s.actions.toggleElementLock,s.actions.unlockAllElements,s.actions.stats].map(Q=>j(Q,ot.editor)),$=[s.actions.saveToActiveFile,s.actions.saveFileToDisk,s.actions.copyAsPng,s.actions.copyAsSvg].map(Q=>j(Q,ot.export));D=[...G,...H,{label:k(A1),icon:P(A1),shortcut:Zi(A1.name),category:ot.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Xr.set(nE,"clearCanvas")}},{label:R("buttons.exportImage"),category:ot.export,icon:LV,shortcut:Zi("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{i({openDialog:{name:"imageExport"}})}},...$];const X=[{label:R("toolBar.library"),category:ot.app,icon:CV,viewMode:!1,perform:()=>{T.openSidebar?i({openSidebar:null}):i({openSidebar:{name:As.name,tab:As.defaultTab}})}},{label:R("search.title"),category:ot.app,icon:bd,viewMode:!0,perform:()=>{s.executeAction(hj)}},{label:R("labels.shapeSwitch"),category:ot.elements,icon:cv,perform:()=>{s.executeAction(AEe)}},{label:R("labels.changeStroke"),keywords:["color","outline"],category:ot.elements,icon:q8,viewMode:!1,predicate:(Q,oe)=>{const ne=Ge(Q,oe);return ne.length>0&&eE(oe,ne)},perform:()=>{i(Q=>({openPopup:"elementStroke"}))}},{label:R("labels.changeBackground"),keywords:["color","fill"],icon:q8,category:ot.elements,viewMode:!1,predicate:(Q,oe)=>{const ne=Ge(Q,oe);return ne.length>0&&tE(oe,ne)},perform:()=>{i(Q=>({openPopup:"elementBackground"}))}},{label:R("labels.canvasBackground"),keywords:["color"],icon:q8,category:ot.editor,viewMode:!1,perform:()=>{i(Q=>({openMenu:Q.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...Ov.reduce((Q,oe)=>{var Ye;const{value:ne,icon:ie,key:me,numericKey:Re}=oe;if(((Ye=C.UIOptions.tools)==null?void 0:Ye[ne])===!1)return Q;const wt=me&&Rt(typeof me=="string"?me:me[0])||Re,Ot={label:R(`toolBar.${ne}`),category:ot.tools,shortcut:wt,icon:ie,keywords:["toolbar"],viewMode:!1,perform:({event:ut})=>{ne==="image"?t.setActiveTool({type:ne}):t.setActiveTool({type:ne})}};return Q.push(Ot),Q},[]),...B,{label:R("toolBar.lock"),category:ot.tools,icon:T.activeTool.locked?H_:by,shortcut:V.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{t.toggleLock()}},{label:`${R("labels.textToDiagram")}...`,category:ot.tools,icon:Rfe,viewMode:!1,predicate:C.aiEnabled,perform:()=>{i(Q=>({...Q,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${R("toolBar.mermaidToExcalidraw")}...`,category:ot.tools,icon:q_,viewMode:!1,predicate:C.aiEnabled,perform:()=>{i(Q=>({...Q,openDialog:{name:"ttd",tab:"mermaid"}}))}}],W=[...D,...X,...A||[]].map(Q=>{var oe;return{...Q,icon:Q.icon||cv,order:Q.order??cL(Q.category),haystack:`${D1(Q.label.toLocaleLowerCase())} ${((oe=Q.keywords)==null?void 0:oe.join(" "))||""}`}});c(W),a([...W,...h].find(Q=>Q.label===(o==null?void 0:o.label))??null)}},[d,t,s,c,o==null?void 0:o.label,a,i,h]);const[m,p]=L.useState(""),[U,b]=L.useState(null),[y,w]=L.useState({}),v=T=>{i({openDialog:null},T),p("")},I=(T,A)=>{var C;((C=n.openDialog)==null?void 0:C.name)==="commandPalette"&&(A.stopPropagation(),A.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),v(()=>{T.perform({actionManager:s,event:A}),a(T),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},x=lL(T=>T.viewMode===!1&&n.viewModeEnabled?!1:typeof T.predicate=="function"?T.predicate(t.scene.getNonDeletedElements(),n,r,t):T.predicate===void 0||T.predicate),_=lL(T=>{var P;const A=ka(T.target)||fj(T)||T.key===V.ESCAPE;if(A&&T.key!==V.ARROW_UP&&T.key!==V.ARROW_DOWN&&T.key!==V.ENTER)return;const C=Object.values(y).flat(),k=o&&!m&&x(o);if(T.key===V.ARROW_UP){T.preventDefault();const D=C.findIndex(B=>B.label===(U==null?void 0:U.label));if(k){if(D===0){b(o);return}if(U===o){const B=C[C.length-1];B&&b(B);return}}let j;D===-1?j=C.length-1:j=D===0?C.length-1:(D-1)%C.length;const G=C[j];G&&b(G);return}if(T.key===V.ARROW_DOWN){T.preventDefault();const D=C.findIndex(B=>B.label===(U==null?void 0:U.label));if(k){if(!U||D===C.length-1){b(o);return}if(U===o){const B=C[0];B&&b(B);return}}const j=(D+1)%C.length,G=C[j];G&&b(G);return}if(T.key===V.ENTER&&U&&setTimeout(()=>{I(U,T)}),!A){if(T.stopPropagation(),/^[a-zA-Z0-9]$/.test(T.key)){(P=u==null?void 0:u.current)==null||P.focus();return}T.preventDefault()}});return L.useEffect(()=>(window.addEventListener(te.KEYDOWN,_,{capture:!0}),()=>window.removeEventListener(te.KEYDOWN,_,{capture:!0})),[_]),L.useEffect(()=>{if(!l)return;const T=P=>{const D={};for(const j of P)D[j.category]?D[j.category].push(j):D[j.category]=[j];return D};let A=(m==null?void 0:m.length)>1?[...l.filter(x).sort((P,D)=>P.order-D.order),...h]:l.filter(x).sort((P,D)=>P.order-D.order);const C=!m&&o&&x(o);if(!m){w(T(C?A.filter(P=>P.label!==(o==null?void 0:o.label)):A)),b(C?o:A[0]||null);return}const k=D1(m.toLocaleLowerCase().replace(/[<>_| -]/g,""));A=UEe.filter(k,A,{extract:P=>P.haystack??""}).sort((P,D)=>D.score-P.score).map(P=>P.original),w(T(A)),b(A[0]??null)},[m,l,x,o,h]),N(ls,{onCloseRequest:()=>v(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[g(xd,{value:m,placeholder:R("commandPalette.search.placeholder"),onChange:T=>{p(T)},selectOnRender:!0,ref:u}),t.editorInterface.formFactor!=="phone"&&N("div",{className:"shortcuts-wrapper",children:[g(ob,{shortcut:"",children:R("commandPalette.shortcuts.select")}),g(ob,{shortcut:"",children:R("commandPalette.shortcuts.confirm")}),g(ob,{shortcut:J("Esc"),children:R("commandPalette.shortcuts.close")})]}),N("div",{className:"commands",children:[o&&!m&&N("div",{className:"command-category",children:[N("div",{className:"command-category-title",children:[R("commandPalette.recents"),g("div",{className:"icon",style:{marginLeft:"6px"},children:kfe})]}),g(dL,{command:o,isSelected:o.label===(U==null?void 0:U.label),onClick:T=>I(o,T),disabled:!x(o),onMouseMove:()=>b(o),showShortcut:t.editorInterface.formFactor!=="phone",appState:n})]}),Object.keys(y).length>0?Object.keys(y).map((T,A)=>N("div",{className:"command-category",children:[g("div",{className:"command-category-title",children:T}),y[T].map(C=>g(dL,{command:C,isSelected:C.label===(U==null?void 0:U.label),onClick:k=>I(C,k),onMouseMove:()=>b(C),showShortcut:t.editorInterface.formFactor!=="phone",appState:n,size:T==="Library"?"large":"small"},C.label))]},T)):l?N("div",{className:"no-match",children:[g("div",{className:"icon",children:bd})," ",R("commandPalette.search.noMatch")]}):null]})]})}const k3e=({id:e,elements:t})=>{const n=L.useRef(null),{svgCache:i}=$T();return YX(e,t,i,n),g("div",{className:"library-item-icon",ref:n})},dL=({command:e,isSelected:t,disabled:n,onMouseMove:i,onClick:r,showShortcut:s,appState:o,size:a="small"})=>{const l=()=>{};return N("div",{className:ce("command-item",{"item-selected":t,"item-disabled":n,"command-item-large":a==="large"}),ref:c=>{var u;t&&!n&&((u=c==null?void 0:c.scrollIntoView)==null||u.call(c,{block:"nearest"}))},onClick:n?l:r,onMouseMove:n?l:i,title:n?R("commandPalette.itemNotAvailable"):"",children:[N("div",{className:"name",children:[e.icon&&g(Ly,{className:"icon",size:"var(--icon-size, 1rem)",icon:typeof e.icon=="function"?e.icon(o):e.icon}),g(Z$,{children:e.label})]}),s&&e.shortcut&&g(ob,{shortcut:e.shortcut})]})},s2=de({name:"toggleLinearEditor",category:ot.elements,label:(e,t,n)=>{const i=n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds})[0];return(i==null?void 0:i.type)==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit"},keywords:["line"],trackEvent:{category:"element"},predicate:(e,t,n,i)=>{var s;const r=i.scene.getSelectedElements(t);return!!(!((s=t.selectedLinearElement)!=null&&s.isEditing)&&r.length===1&&xe(r[0])&&!pe(r[0]))},perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];gn(r,"No selected element found"),gn(t.selectedLinearElement,"No selected linear element found"),gn(r.id===t.selectedLinearElement.elementId,"Selected element ID and linear editor elementId does not match");const s={...t.selectedLinearElement,isEditing:!t.selectedLinearElement.isEditing};return{appState:{...t,selectedLinearElement:s},captureUpdate:K.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds})[0];if(!i)return null;const r=R(i.type==="arrow"?"labels.lineEditor.editArrow":"labels.lineEditor.edit");return g(Xe,{type:"button",icon:jfe,title:r,"aria-label":r,onClick:()=>t(null)})}});de({name:"togglePolygon",category:ot.elements,icon:GM,keywords:["loop"],label:(e,t,n)=>!n.scene.getSelectedElements({selectedElementIds:t.selectedElementIds}).some(s=>!nn(s)||!s.polygon)?"labels.polygon.breakPolygon":"labels.polygon.convertToPolygon",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds});return r.length>0&&r.every(s=>nn(s)&&s.points.length>=4)},perform(e,t,n,i){const r=i.scene.getSelectedElements(t);if(r.some(l=>!nn(l)))return!1;const s=r,o=s.some(l=>!l.polygon),a=ve(s);return{elements:e.map(l=>!a.has(l.id)||!nn(l)?l:Ie(l,{backgroundColor:o?l.backgroundColor:"transparent",...I_(l,o)})),appState:t,captureUpdate:K.IMMEDIATELY}},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=n.scene.getSelectedElements({selectedElementIds:e.selectedElementIds});if(i.length===0||i.some(o=>!nn(o)||!o.polygon||o.points.length<3))return null;const r=i.every(o=>nn(o)&&o.polygon),s=R(r?"labels.polygon.breakPolygon":"labels.polygon.convertToPolygon");return g(iT,{icon:GM,title:s,"aria-label":s,active:r,onClick:()=>t(null),style:{marginLeft:"auto"}})}});const hj=de({name:"searchMenu",icon:bd,keywords:["search","find"],label:"search.title",viewMode:!0,trackEvent:{category:"search_menu",action:"toggle",predicate:e=>e.gridModeEnabled},perform(e,t,n,i){var r,s;if(t.openDialog)return!1;if(((r=t.openSidebar)==null?void 0:r.name)===As.name&&t.openSidebar.tab===Zu){const o=(s=i.excalidrawContainerValue.container)==null?void 0:s.querySelector(`.${gr.SEARCH_MENU_INPUT_WRAPPER} input`);return o==null||o.focus(),o==null||o.select(),!1}return{appState:{...t,openSidebar:{name:As.name,tab:Zu},openDialog:null},captureUpdate:K.EVENTUALLY}},checked:e=>e.gridModeEnabled,predicate:(e,t,n)=>n.gridModeEnabled===void 0,keyTest:e=>e[V.CTRL_OR_CMD]&&e.key===V.F}),L3e=de({name:"cropEditor",label:"helpDialog.cropStart",icon:cR,viewMode:!0,trackEvent:{category:"menu"},keywords:["image","crop"],perform(e,t,n,i){const r=i.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!0})[0];return{appState:{...t,isCropping:!1,croppingElementId:r.id},captureUpdate:K.IMMEDIATELY}},predicate:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t);return!!(!t.croppingElementId&&r.length===1&&Et(r[0]))},PanelComponent:({appState:e,updateData:t,app:n})=>{const i=R("helpDialog.cropStart");return g(Xe,{type:"button",icon:cR,title:i,"aria-label":i,onClick:()=>t(null)})}}),gj=(e,t)=>{const n=t.scene.getSelectedElements(e);return n.length===1&&we(n[0])},D3e=de({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;if(we(r)){const s=is(Yt(e),r.id).filter(o=>!(o.type==="text"&&o.containerId));return{elements:e,appState:{...t,selectedElementIds:s.reduce((o,a)=>(o[a.id]=!0,o),{})},captureUpdate:K.IMMEDIATELY}}return{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>gj(t,i)}),N3e=de({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(e,t,n,i)=>{const r=i.scene.getSelectedElements(t).at(0)||null;return we(r)?{elements:Dz(e,r),appState:{...t,selectedElementIds:{[r.id]:!0}},captureUpdate:K.IMMEDIATELY}:{elements:e,appState:t,captureUpdate:K.EVENTUALLY}},predicate:(e,t,n,i)=>gj(t,i)});de({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(e,t)=>({elements:e,appState:{...t,frameRendering:{...t.frameRendering,enabled:!t.frameRendering.enabled}},captureUpdate:K.EVENTUALLY}),checked:e=>e.frameRendering.enabled});de({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:ed,viewMode:!1,perform:(e,t,n,i)=>{const r=tn(t,{type:"frame"});return To(i.interactiveCanvas,{...t,activeTool:r}),{elements:e,appState:{...t,activeTool:tn(t,{type:"frame"})},captureUpdate:K.EVENTUALLY}},keyTest:e=>!e[V.CTRL_OR_CMD]&&!e.shiftKey&&!e.altKey&&e.key.toLocaleLowerCase()===V.F});const O3e=de({name:"wrapSelectionInFrame",label:"labels.wrapSelectionInFrame",trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Ge(e,t);return r.length>0&&!r.some(s=>we(s))},perform:(e,t,n,i)=>{const r=Ge(e,t),s=i.scene.getNonDeletedElementsMap(),[o,a,l,c]=nt(r,s),u=16,d=k_({x:o-u,y:a-u,width:l-o+u*2,height:c-a+u*2});if(t.editingGroupId){const h=At(r,t.editingGroupId);for(const m of h){const p=m.groupIds.indexOf(t.editingGroupId);_i(m,s,{groupIds:m.groupIds.slice(0,p)})}}return{elements:w1([...i.scene.getElementsIncludingDeleted(),d],r,d,t),appState:{selectedElementIds:{[d.id]:!0}},captureUpdate:K.IMMEDIATELY}}});class o2 extends Ud{applyTo(t,n,i){const[r,s]=this.elements.applyTo(t,i.elements,{excludedProperties:new Set(["version","versionNonce"])}),[o,a]=this.appState.applyTo(n,r);return[r,o,s||a]}static calculate(t,n){return super.calculate(t,n)}static inverse(t){return super.inverse(t)}static applyLatestChanges(t,n,i,r){return super.applyLatestChanges(t,n,i,r)}}class e5{constructor(t=!0,n=!0){this.isUndoStackEmpty=t,this.isRedoStackEmpty=n}}class zu{constructor(t){F(this,"onHistoryChangedEmitter",new Ys);F(this,"undoStack",[]);F(this,"redoStack",[]);this.store=t}get isUndoStackEmpty(){return this.undoStack.length===0}get isRedoStackEmpty(){return this.redoStack.length===0}clear(){this.undoStack.length=0,this.redoStack.length=0}record(t){if(t.isEmpty()||t instanceof o2)return;const n=o2.inverse(t);this.undoStack.push(n),n.elements.isEmpty()||(this.redoStack.length=0),this.onHistoryChangedEmitter.trigger(new e5(this.isUndoStackEmpty,this.isRedoStackEmpty))}undo(t,n){return this.perform(t,n,()=>zu.pop(this.undoStack),i=>zu.push(this.redoStack,i))}redo(t,n){return this.perform(t,n,()=>zu.pop(this.redoStack),i=>zu.push(this.undoStack,i))}perform(t,n,i,r){try{let s=i();if(s===null)return;const o=K.IMMEDIATELY;let a=this.store.snapshot,l=t,c=n,u=!1;for(;s;){try{[l,c,u]=s.applyTo(l,c,a);const d=a.elements,f=a.maybeClone(o,l,c),h=lh.create(a,f),m=o2.applyLatestChanges(s,d,l);m.isEmpty()||(this.store.scheduleMicroAction({action:o,change:h,delta:m}),s=m),a=f}finally{r(s)}if(u)break;s=i()}return[l,c]}finally{this.onHistoryChangedEmitter.trigger(new e5(this.isUndoStackEmpty,this.isRedoStackEmpty))}}static pop(t){if(!t.length)return null;const n=t.pop();return n!==void 0?n:null}static push(t,n){const i=o2.inverse(n);return t.push(i)}}const mj=(e,t)=>{const[n,i]=L.useState(t);return L.useEffect(()=>{const r=e.on(s=>{i(s)});return()=>{r()}},[e]),n},pj=(e,t,n)=>{if(!t.multiElement&&!t.resizingElement&&!t.editingTextElement&&!t.newElement&&!t.selectedElementsAreBeingDragged&&!t.selectionElement&&!e.flowChartCreator.isCreatingChart){const i=n();if(!i)return{captureUpdate:K.EVENTUALLY};const[r,s]=i,o=M_(Array.from(r.values()));return{appState:s,elements:o,captureUpdate:K.NEVER}}return{captureUpdate:K.EVENTUALLY}},P3e=e=>({name:"undo",label:"buttons.undo",icon:WM,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>pj(r,n,()=>e.undo(ve(t),n)),keyTest:t=>t[V.CTRL_OR_CMD]&&_4(t,V.Z)&&!t.shiftKey,PanelComponent:({appState:t,updateData:n,data:i,app:r})=>{const{isUndoStackEmpty:s}=mj(e.onHistoryChangedEmitter,new e5(e.isUndoStackEmpty,e.isRedoStackEmpty)),o=ua()==="mobile";return g(Xe,{type:"button",icon:WM,"aria-label":R("buttons.undo"),onClick:n,size:(i==null?void 0:i.size)||"medium",disabled:s,"data-testid":"button-undo",style:{...o?mp:{}}})}}),F3e=e=>({name:"redo",label:"buttons.redo",icon:KM,trackEvent:{category:"history"},viewMode:!1,perform:(t,n,i,r)=>pj(r,n,()=>e.redo(ve(t),n)),keyTest:t=>t[V.CTRL_OR_CMD]&&t.shiftKey&&_4(t,V.Z)||_B&&t.ctrlKey&&!t.shiftKey&&_4(t,V.Y),PanelComponent:({appState:t,updateData:n,data:i,app:r})=>{const{isRedoStackEmpty:s}=mj(e.onHistoryChangedEmitter,new e5(e.isUndoStackEmpty,e.isRedoStackEmpty)),o=ua()==="mobile";return g(Xe,{type:"button",icon:KM,"aria-label":R("buttons.redo"),onClick:n,size:(i==null?void 0:i.size)||"medium",disabled:s,"data-testid":"button-redo",style:{...o?mp:{}}})}}),B3e=de({name:"autoResize",label:"labels.autoResize",icon:null,trackEvent:{category:"element"},predicate:(e,t,n,i)=>{const r=Ge(e,t);return r.length===1&&ge(r[0])&&!r[0].autoResize},perform:(e,t,n,i)=>{const r=Ge(e,t);return{appState:t,elements:e.map(s=>{if(s.id===r[0].id&&ge(s)){const o=jn(s.originalText,pt(s),s.lineHeight);return Ie(s,{autoResize:!0,width:o.width,height:o.height,text:s.originalText})}return s}),captureUpdate:K.IMMEDIATELY}}}),D3=(e,t,n,i,r,s)=>{if(e.trackEvent)try{typeof e.trackEvent=="object"&&(!e.trackEvent.predicate||e.trackEvent.predicate(n,i,s))&&Je(e.trackEvent.category,e.trackEvent.action||e.name,`${t} (${r.editorInterface.formFactor==="phone"?"mobile":"desktop"})`)}catch(o){console.error("error while logging action:",o)}};class z3e{constructor(t,n,i,r){F(this,"actions",{});F(this,"updater");F(this,"getAppState");F(this,"getElementsIncludingDeleted");F(this,"app");F(this,"renderAction",(t,n)=>{const i=this.app.props.UIOptions.canvasActions;if(this.actions[t]&&"PanelComponent"in this.actions[t]&&(!(t in i)||i[t])){const r=this.actions[t],s=r.PanelComponent;s.displayName="PanelComponent";const o=this.getElementsIncludingDeleted(),a=this.getAppState(),l=c=>{D3(r,"ui",a,o,this.app,c),this.updater(r.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return g(s,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:l,appProps:this.app.props,app:this.app,data:n,renderAction:this.renderAction})}return null});F(this,"isActionEnabled",t=>{const n=this.getElementsIncludingDeleted(),i=this.getAppState();return!t.predicate||t.predicate(n,i,this.app.props,this.app)});this.updater=s=>{if(Ep(s))s.then(o=>t(o));else return t(s)},this.getAppState=n,this.getElementsIncludingDeleted=i,this.app=r}registerAction(t){this.actions[t.name]=t}registerAll(t){t.forEach(n=>this.registerAction(n))}handleKeyDown(t){const n=this.app.props.UIOptions.canvasActions,i=Object.values(this.actions).sort((l,c)=>(c.keyPriority||0)-(l.keyPriority||0)).filter(l=>(l.name in n?n[l.name]:!0)&&l.keyTest&&l.keyTest(t,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(i.length!==1)return i.length>1&&console.warn("Canceling as multiple actions match this shortcut",i),!1;const r=i[0];if(this.getAppState().viewModeEnabled&&r.viewMode!==!0)return!1;const s=this.getElementsIncludingDeleted(),o=this.getAppState(),a=null;return D3(r,"keyboard",o,s,this.app,null),t.preventDefault(),t.stopPropagation(),this.updater(i[0].perform(s,o,a,this.app)),!0}executeAction(t,n="api",i=null){const r=this.getElementsIncludingDeleted(),s=this.getAppState();D3(t,n,s,r,this.app,i),this.updater(t.perform(r,s,i,this.app))}}class H3e{constructor(){F(this,"targets",new WeakMap);F(this,"rafIds",new WeakMap)}register(t,n){this.targets.set(t,{callback:n,stopped:!0})}start(t){const n=this.targets.get(t);n&&(this.rafIds.has(t)||(this.targets.set(t,{...n,stopped:!1}),this.scheduleFrame(t)))}stop(t){const n=this.targets.get(t);n&&!n.stopped&&this.targets.set(t,{...n,stopped:!0}),this.cancelFrame(t)}constructFrame(t){return n=>{const i=this.targets.get(t);if(!i)return;const r=this.onFrame(i,n);!i.stopped&&!r?this.scheduleFrame(t):this.cancelFrame(t)}}scheduleFrame(t){const n=requestAnimationFrame(this.constructFrame(t));this.rafIds.set(t,n)}cancelFrame(t){if(this.rafIds.has(t)){const n=this.rafIds.get(t);cancelAnimationFrame(n)}this.rafIds.delete(t)}onFrame(t,n){return t.callback(n)??!1}}const fL=e=>{const t=Array.from(e.values());return{x:gL(t,n=>n.x)/t.length,y:gL(t,n=>n.y)/t.length}},hL=([e,t])=>Math.hypot(e.x-t.x,e.y-t.y),gL=(e,t)=>e.reduce((n,i)=>n+t(i),0),V3e=8,mL=99999,iE=e=>V3e/e,rr=class rr{};F(rr,"referenceSnapPoints",null),F(rr,"visibleGaps",null),F(rr,"setReferenceSnapPoints",t=>{rr.referenceSnapPoints=t}),F(rr,"getReferenceSnapPoints",()=>rr.referenceSnapPoints),F(rr,"setVisibleGaps",t=>{rr.visibleGaps=t}),F(rr,"getVisibleGaps",()=>rr.visibleGaps),F(rr,"destroy",()=>{rr.referenceSnapPoints=null,rr.visibleGaps=null});let Ws=rr;const B0=e=>e.props.gridModeEnabled??e.state.gridModeEnabled,Yc=({event:e,app:t,selectedElements:n})=>{if(e){const i=t.state.activeTool.type==="lasso"&&t.state.selectedElementsAreBeingDragged;return(t.state.activeTool.type!=="lasso"||i)&&(t.state.objectsSnapModeEnabled&&!e[V.CTRL_OR_CMD]||!t.state.objectsSnapModeEnabled&&e[V.CTRL_OR_CMD]&&!B0(t))}return n.length===1&&n[0].type==="arrow"?!1:t.state.objectsSnapModeEnabled},$3e=(e,t,n=.01)=>Math.abs(e-t)<=n,z0=(e,t,{omitCenter:n,boundingBoxCorners:i,dragOffset:r}={omitCenter:!1,boundingBoxCorners:!1})=>{let s=[];if(e.length===1){const o=e[0];let[a,l,c,u,d,f]=He(o,t);r&&(a+=r.x,c+=r.x,d+=r.x,l+=r.y,u+=r.y,f+=r.y);const h=(c-a)/2,m=(u-l)/2;if((o.type==="diamond"||o.type==="ellipse")&&!i){const p=q(S(a,l+m),S(d,f),o.angle),U=q(S(a+h,l),S(d,f),o.angle),b=q(S(c,l+m),S(d,f),o.angle),y=q(S(a+h,u),S(d,f),o.angle),w=S(d,f);s=n?[p,U,b,y]:[p,U,b,y,w]}else{const p=q(S(a,l),S(d,f),o.angle),U=q(S(c,l),S(d,f),o.angle),b=q(S(a,u),S(d,f),o.angle),y=q(S(c,u),S(d,f),o.angle),w=S(d,f);s=n?[p,U,b,y]:[p,U,b,y,w]}}else if(e.length>1){const[o,a,l,c]=C_(e,r??{x:0,y:0}),u=l-o,d=c-a,f=S(o,a),h=S(l,a),m=S(o,c),p=S(l,c),U=S(o+u/2,a+d/2);s=n?[f,h,m,p]:[f,h,m,p,U]}return s.map(o=>S(ln(o[0]),ln(o[1])))},Uj=(e,t,n,i)=>Rz(e,t,n,i),G3e=(e,t,n,i)=>{const r=Uj(e,t,n,i),s=Mz(r,i).filter(d=>!(d.length===1&&Lt(d[0]))).map(d=>nt(d).map(f=>ln(f))),o=s.sort((d,f)=>d[0]-f[0]),a=[];let l=0;e:for(let d=0;d<o.length;d++){const f=o[d];for(let h=d+1;h<o.length;h++){if(++l>mL)break e;const m=o[h],[,p,U,b]=f,[y,w,,v]=m;U<y&&i6(Vi(p,b),Vi(w,v))&&a.push({startBounds:f,endBounds:m,startSide:[S(U,p),S(U,b)],endSide:[S(y,w),S(y,v)],length:y-U,overlap:r6(Vi(p,b),Vi(w,v))})}}const c=s.sort((d,f)=>d[1]-f[1]),u=[];l=0;e:for(let d=0;d<c.length;d++){const f=c[d];for(let h=d+1;h<c.length;h++){if(++l>mL)break e;const m=c[h],[p,,U,b]=f,[y,w,v]=m;b<w&&i6(Vi(p,U),Vi(y,v))&&u.push({startBounds:f,endBounds:m,startSide:[S(p,b),S(U,b)],endSide:[S(y,w),S(v,w)],length:w-b,overlap:r6(Vi(p,U),Vi(y,v))})}}return{horizontalGaps:a,verticalGaps:u}},pL=(e,t,n,i,r,s,o)=>{if(!Yc({app:n,event:i,selectedElements:e}))return[];if(e.length===0)return[];const a=Ws.getVisibleGaps();if(a){const{horizontalGaps:l,verticalGaps:c}=a,[u,d,f,h]=C_(e,t).map(U=>ln(U)),m=(u+f)/2,p=(d+h)/2;for(const U of l){if(!i6(Vi(d,h),U.overlap))continue;const b=U.startSide[0][0]+U.length/2,y=ln(b-m);if(U.length>f-u&&Math.abs(y)<=o.x){Math.abs(y)<o.x&&(r.length=0),o.x=Math.abs(y);const C={type:"gap",direction:"center_horizontal",gap:U,offset:y};r.push(C);continue}const[,,v]=U.endBounds,I=u-v,x=ln(U.length-I);if(Math.abs(x)<=o.x){Math.abs(x)<o.x&&(r.length=0),o.x=Math.abs(x);const C={type:"gap",direction:"side_right",gap:U,offset:x};r.push(C);continue}const[_,,,]=U.startBounds,T=_-f,A=ln(T-U.length);if(Math.abs(A)<=o.x){Math.abs(A)<o.x&&(r.length=0),o.x=Math.abs(A);const C={type:"gap",direction:"side_left",gap:U,offset:A};r.push(C);continue}}for(const U of c){if(!i6(Vi(u,f),U.overlap))continue;const b=U.startSide[0][1]+U.length/2,y=ln(b-p);if(U.length>h-d&&Math.abs(y)<=o.y){Math.abs(y)<o.y&&(s.length=0),o.y=Math.abs(y);const C={type:"gap",direction:"center_vertical",gap:U,offset:y};s.push(C);continue}const[,v,,]=U.startBounds,I=v-h,x=ln(I-U.length);if(Math.abs(x)<=o.y){Math.abs(x)<o.y&&(s.length=0),o.y=Math.abs(x);const C={type:"gap",direction:"side_top",gap:U,offset:x};s.push(C);continue}const[,,,_]=U.endBounds,T=ln(d-_),A=U.length-T;if(Math.abs(A)<=o.y){Math.abs(A)<o.y&&(s.length=0),o.y=Math.abs(A);const C={type:"gap",direction:"side_bottom",gap:U,offset:A};s.push(C);continue}}}},X3e=(e,t,n,i)=>{const r=Uj(e,t,n,i);return Mz(r,i).filter(s=>!(s.length===1&&Lt(s[0]))).flatMap(s=>z0(s,i))},eg=(e,t,n,i,r,s,o)=>{if(!Yc({app:n,event:i,selectedElements:e})||e.length===0&&t.length===0)return[];const a=Ws.getReferenceSnapPoints();if(a)for(const l of t)for(const c of a){const u=c[0]-l[0],d=c[1]-l[1];Math.abs(u)<=o.x&&(Math.abs(u)<o.x&&(r.length=0),r.push({type:"point",points:[l,c],offset:u}),o.x=Math.abs(u)),Math.abs(d)<=o.y&&(Math.abs(d)<o.y&&(s.length=0),s.push({type:"point",points:[l,c],offset:d}),o.y=Math.abs(d))}},j3e=(e,t,n,i,r)=>{var U,b;const s=n.state,o=Ge(e,s);if(!Yc({app:n,event:i,selectedElements:o})||o.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};t.x=ln(t.x),t.y=ln(t.y);const a=[],l=[],c=iE(s.zoom.value),u={x:c,y:c},d=z0(o,r,{dragOffset:t});eg(o,d,n,i,a,l,u),pL(o,t,n,i,a,l,u);const f={x:((U=a[0])==null?void 0:U.offset)??0,y:((b=l[0])==null?void 0:b.offset)??0};u.x=0,u.y=0,a.length=0,l.length=0;const h={x:ln(t.x+f.x),y:ln(t.y+f.y)};eg(o,z0(o,r,{dragOffset:h}),n,i,a,l,u),pL(o,h,n,i,a,l,u);const m=YT(a,l),p=W3e(o,h,[...a,...l].filter(y=>y.type==="gap"));return{snapOffset:f,snapLines:[...m,...p]}},ln=e=>Math.round(e*10**6)/10**6,UL=e=>{const t=new Map;for(const n of e){const i=n.join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},YT=(e,t)=>{const n={},i={};if(e.length>0){for(const r of e)if(r.type==="point"){const s=ln(r.points[0][0]);n[s]||(n[s]=[]),n[s].push(...r.points.map(o=>S(ln(o[0]),ln(o[1]))))}}if(t.length>0){for(const r of t)if(r.type==="point"){const s=ln(r.points[0][1]);i[s]||(i[s]=[]),i[s].push(...r.points.map(o=>S(ln(o[0]),ln(o[1]))))}}return Object.entries(n).map(([r,s])=>({type:"points",points:UL(s.map(o=>S(Number(r),o[1])).sort((o,a)=>o[1]-a[1]))})).concat(Object.entries(i).map(([r,s])=>({type:"points",points:UL(s.map(o=>S(o[0],Number(r))).sort((o,a)=>o[0]-a[0]))})))},Y3e=e=>{const t=new Map;for(const n of e){const i=n.points.flat().map(r=>[ln(r)]).join(",");t.has(i)||t.set(i,n)}return Array.from(t.values())},W3e=(e,t,n)=>{const[i,r,s,o]=C_(e,t),a=[];for(const l of n){const[c,u,d,f]=l.gap.startBounds,[h,m,p,U]=l.gap.endBounds,b=r6(Vi(r,o),l.gap.overlap),y=r6(Vi(i,s),l.gap.overlap);switch(l.direction){case"center_horizontal":{if(b){const w=(b[0]+b[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(l.gap.startSide[0][0],w),S(i,w)]},{type:"gap",direction:"horizontal",points:[S(s,w),S(l.gap.endSide[0][0],w)]})}break}case"center_vertical":{if(y){const w=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[S(w,l.gap.startSide[0][1]),S(w,r)]},{type:"gap",direction:"vertical",points:[S(w,o),S(w,l.gap.endSide[0][1])]})}break}case"side_right":{if(b){const w=(b[0]+b[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(d,w),S(h,w)]},{type:"gap",direction:"horizontal",points:[S(p,w),S(i,w)]})}break}case"side_left":{if(b){const w=(b[0]+b[1])/2;a.push({type:"gap",direction:"horizontal",points:[S(s,w),S(c,w)]},{type:"gap",direction:"horizontal",points:[S(d,w),S(h,w)]})}break}case"side_top":{if(y){const w=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[S(w,o),S(w,u)]},{type:"gap",direction:"vertical",points:[S(w,f),S(w,m)]})}break}case"side_bottom":{if(y){const w=(y[0]+y[1])/2;a.push({type:"gap",direction:"vertical",points:[S(w,f),S(w,m)]},{type:"gap",direction:"vertical",points:[S(w,U),S(w,r)]})}break}}}return Y3e(a.map(l=>({...l,points:l.points.map(c=>S(ln(c[0]),ln(c[1])))})))},bL=(e,t,n,i,r,s)=>{var x,_;if(!Yc({event:i,selectedElements:e,app:n})||e.length===0||e.length===1&&!$3e(e[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[o,a,l,c]=nt(t);s&&(s.includes("e")?l+=r.x:s.includes("w")&&(o+=r.x),s.includes("n")?a+=r.y:s.includes("s")&&(c+=r.y));const u=[];if(s)switch(s){case"e":{u.push(S(l,a),S(l,c));break}case"w":{u.push(S(o,a),S(o,c));break}case"n":{u.push(S(o,a),S(l,a));break}case"s":{u.push(S(o,c),S(l,c));break}case"ne":{u.push(S(l,a));break}case"nw":{u.push(S(o,a));break}case"se":{u.push(S(l,c));break}case"sw":{u.push(S(o,c));break}}const d=iE(n.state.zoom.value),f={x:d,y:d},h=[],m=[];eg(t,u,n,i,h,m,f);const p={x:((x=h[0])==null?void 0:x.offset)??0,y:((_=m[0])==null?void 0:_.offset)??0};f.x=0,f.y=0,h.length=0,m.length=0;const[U,b,y,w]=nt(e).map(T=>ln(T)),v=[S(U,b),S(U,w),S(y,b),S(y,w)];eg(e,v,n,i,h,m,f);const I=YT(h,m);return{snapOffset:p,snapLines:I}},K3e=(e,t,n,i,r,s)=>{var m,p;if(!Yc({event:n,selectedElements:[e],app:t}))return{snapOffset:{x:0,y:0},snapLines:[]};const o=[S(i.x+r.x,i.y+r.y)],a=iE(t.state.zoom.value),l={x:a,y:a},c=[],u=[];eg([e],o,t,n,c,u,l);const d={x:((m=c[0])==null?void 0:m.offset)??0,y:((p=u[0])==null?void 0:p.offset)??0};l.x=0,l.y=0,c.length=0,u.length=0;const f=z0([e],s,{boundingBoxCorners:!0,omitCenter:!0});eg([e],f,t,n,c,u,l);const h=YT(c,u);return{snapOffset:d,snapLines:h}},Z3e=(e,t,n,i,r)=>{if(!Yc({event:i,selectedElements:[],app:t}))return{originOffset:{x:0,y:0},snapLines:[]};const s=Rz(e,[],t.state,r),o=iE(t.state.zoom.value),a={x:o,y:o},l=[],c=[];for(const u of s){const d=z0([u],r);for(const f of d){const h=f[0]-n.x;Math.abs(h)<=Math.abs(a.x)&&(Math.abs(h)<Math.abs(a.x)&&(c.length=0),c.push({type:"pointer",points:[f,S(f[0],n.y)],direction:"vertical"}),a.x=h);const m=f[1]-n.y;Math.abs(m)<=Math.abs(a.y)&&(Math.abs(m)<Math.abs(a.y)&&(l.length=0),l.push({type:"pointer",points:[f,S(n.x,f[1])],direction:"horizontal"}),a.y=m)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-n.x:0,y:l.length>0?l[0].points[0][1]-n.y:0},snapLines:[...c,...l]}},q3e=e=>e===Qn.rectangle||e===Qn.ellipse||e===Qn.diamond||e===Qn.frame||e===Qn.magicframe||e===Qn.image||e===Qn.text,a2={width:100,height:0},cc=100,Q3e=(e,t,n)=>{const i=as({x:0,y:0,textAlign:a0.CENTER,verticalAlign:Wr.MIDDLE,...t,containerId:e.id,strokeColor:t.strokeColor||e.strokeColor});return Object.assign(e,{boundElements:(e.boundElements||[]).concat({type:"text",id:i.id})}),Qi(i,e,n),[e,i]},yL=(e,t,n,i,r)=>{let s,o;if(Object.assign(e,{startBinding:(e==null?void 0:e.startBinding)||null,endBinding:e.endBinding||null}),t){const u=(t==null?void 0:t.width)??cc,d=(t==null?void 0:t.height)??cc;let f;t.id&&(f=i.getElement(t.id),f||console.error(`No element for start binding with id ${t.id} found`));const h=t.x||e.x-u,m=t.y||e.y-d/2,p=f?f.type:t.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:t.type==="text"&&(U=t.text),U||console.error(`No text found for start binding text element for ${e.id}`),s=as({x:h,y:m,type:"text",...f,...t,text:U}),Object.assign(s,{x:t.x||e.x-s.width,y:t.y||e.y-s.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{s=ta({x:h,y:m,width:u,height:d,...f,...t,type:p});break}default:Ko(e,`Unhandled element start type "${t.type}"`,!0)}ea(e,s,"start",r)}}if(n){const u=(n==null?void 0:n.height)??cc,d=(n==null?void 0:n.width)??cc;let f;n.id&&(f=i.getElement(n.id),f||console.error(`No element for end binding with id ${n.id} found`));const h=n.x||e.x+e.width,m=n.y||e.y-u/2,p=f?f.type:n.type;if(p){if(p==="text"){let U="";f&&f.type==="text"?U=f.text:n.type==="text"&&(U=n.text),U||console.error(`No text found for end binding text element for ${e.id}`),o=as({x:h,y:m,type:"text",...f,...n,text:U}),Object.assign(o,{y:n.y||e.y-o.height/2})}else switch(p){case"rectangle":case"ellipse":case"diamond":{o=ta({x:h,y:m,width:d,height:u,...f,...n,type:p});break}default:Ko(e,`Unhandled element end type "${p}"`,!0)}ea(e,o,"end",r)}}if(e.points.length<2)return{linearElement:e,startBoundElement:s,endBoundElement:o};const a=e.points.length-1,l=.5,c=Ka(e.points);return e.points[a][0]>e.points[a-1][0]&&(c[0][0]=l,c[a][0]-=l),e.points[a][0]<e.points[a-1][0]&&(c[0][0]=-.5,c[a][0]+=l),e.points[a][1]>e.points[a-1][1]&&(c[0][1]=l,c[a][1]-=l),e.points[a][1]<e.points[a-1][1]&&(c[0][1]=-.5,c[a][1]+=l),Object.assign(e,Ue.getNormalizeElementPointsAndCoords({...e,points:c})),{linearElement:e,startBoundElement:s,endBoundElement:o}};class J3e{constructor(){F(this,"excalidrawElements",new Map);F(this,"add",t=>{t&&this.excalidrawElements.set(t.id,t)});F(this,"getElements",()=>ou(Array.from(this.excalidrawElements.values())));F(this,"getElementsMap",()=>Zo(ve(this.getElements())));F(this,"getElement",t=>this.excalidrawElements.get(t))}}const Fv=(e,t)=>{var l,c,u;if(!e)return[];const n=Ka(e),i=new J3e,r=new Map,s=new Map;for(const d of n){let f;const h=d.id;switch((t==null?void 0:t.regenerateIds)!==!1&&Object.assign(d,{id:mr()}),d.type){case"rectangle":case"ellipse":case"diamond":{const p=(l=d==null?void 0:d.label)!=null&&l.text&&d.width===void 0?0:(d==null?void 0:d.width)||cc,U=(c=d==null?void 0:d.label)!=null&&c.text&&d.height===void 0?0:(d==null?void 0:d.height)||cc;f=ta({...d,width:p,height:U});break}case"line":{const p=d.width||a2.width,U=d.height||a2.height;f=wc({width:p,height:U,points:[S(0,0),S(p,U)],...d});break}case"arrow":{const p=d.width||a2.width,U=d.height||a2.height;f=dh({width:p,height:U,endArrowhead:"arrow",points:[S(0,0),S(p,U)],...d,type:"arrow"}),Object.assign(f,Ph(f.points));break}case"text":{const p=(d==null?void 0:d.fontFamily)||nu,U=(d==null?void 0:d.fontSize)||_l,b=(d==null?void 0:d.lineHeight)||Fc(p),y=d.text??"",w=Hh(y),v=jn(w,pt({fontFamily:p,fontSize:U}),b);f=as({width:v.width,height:v.height,fontFamily:p,fontSize:U,...d});break}case"image":{f=lH({width:(d==null?void 0:d.width)||cc,height:(d==null?void 0:d.height)||cc,...d});break}case"frame":{f=k_({x:0,y:0,...d});break}case"magicframe":{f=G4({x:0,y:0,...d});break}case"freedraw":case"iframe":case"embeddable":{f=d;break}default:f=d,Ko(d,`Unhandled element type "${d.type}"`,!0)}i.getElement(f.id)?console.error(`Duplicate id found for ${f.id}`):(i.add(f),r.set(f.id,d),h&&s.set(h,f.id))}const o=i.getElementsMap(),a=new A6(o);for(const[d,f]of r){const h=i.getElement(d);switch(f.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if((u=f.label)!=null&&u.text){let[m,p]=Q3e(h,f==null?void 0:f.label,a);if(i.add(m),i.add(p),Ce(m)){const U=f.type==="arrow"?f==null?void 0:f.start:void 0,b=f.type==="arrow"?f==null?void 0:f.end:void 0;if(U&&U.id){const I=s.get(U.id);I&&Object.assign(U,{id:I})}if(b&&b.id){const I=s.get(b.id);I&&Object.assign(b,{id:I})}const{linearElement:y,startBoundElement:w,endBoundElement:v}=yL(m,U,b,i,a);m=y,i.add(y),i.add(w),i.add(v)}}else switch(f.type){case"arrow":{const{start:m,end:p}=f;if(m&&m.id){const w=s.get(m.id);Object.assign(m,{id:w})}if(p&&p.id){const w=s.get(p.id);Object.assign(p,{id:w})}const{linearElement:U,startBoundElement:b,endBoundElement:y}=yL(h,m,p,i,a);i.add(U),i.add(b),i.add(y);break}}break}}}for(const[d,f]of r){if(f.type!=="frame"&&f.type!=="magicframe")continue;const h=i.getElement(d);if(!h)throw new Error(`Excalidraw element with id ${d} doesn't exist`);const m=[];f.children.forEach(T=>{var k;const A=s.get(T);if(!A)throw new Error(`Element with ${T} wasn't mapped correctly`);const C=i.getElement(A);if(!C)throw new Error(`Frame element with id ${A} doesn't exist`);Object.assign(C,{frameId:h.id}),(k=C==null?void 0:C.boundElements)==null||k.forEach(P=>{const D=i.getElement(P.id);if(!D)throw new Error(`Bound element with id ${P.id} doesn't exist`);Object.assign(D,{frameId:h.id}),m.push(D)}),m.push(C)});let[p,U,b,y]=nt(m);const w=10;p=p-w,U=U-w,b=b+w,y=y+w;const v=(h==null?void 0:h.x)||p,I=(h==null?void 0:h.y)||U,x=(h==null?void 0:h.width)||b-p,_=(h==null?void 0:h.height)||y-U;Object.assign(h,{x:v,y:I,width:x,height:_})}return i.getElements()};class EL{constructor(t){F(this,"scene");F(this,"getRenderableElements",(()=>{const t=({elementsMap:i,zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l,height:c,width:u})=>{const d=[];for(const f of i.values())x6(f,u,c,{zoom:r,offsetLeft:s,offsetTop:o,scrollX:a,scrollY:l},i)&&d.push(f);return d},n=({elements:i,editingTextElement:r,newElementId:s})=>{const o=Zo(new Map);for(const a of i)s!==a.id&&(!r||r.type!=="text"||a.id!==r.id)&&o.set(a.id,a);return o};return Zse(({zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c,editingTextElement:u,newElementId:d,sceneNonce:f})=>{const h=this.scene.getNonDeletedElements(),m=n({elements:h,editingTextElement:u,newElementId:d}),p=t({elementsMap:m,zoom:i,offsetLeft:r,offsetTop:s,scrollX:o,scrollY:a,height:l,width:c});return{elementsMap:m,visibleElements:p}})})());this.scene=t}destroy(){lX.cancel(),this.getRenderableElements.clear()}}const e7e=5,t7e=(e,t,n)=>{const[i,r]=He(e,n),{x:s,y:o}=Kr({sceneX:i+e.width,sceneY:r},t),a=s-t.offsetLeft+10,l=o-t.offsetTop;return{x:a,y:l}},vL=({children:e,element:t,elementsMap:n})=>{const i=Hp();if(i.contextMenu||i.newElement||i.resizingElement||i.isRotating||i.openMenu||i.viewModeEnabled)return null;const{x:r,y:s}=t7e(t,i,n);return g("div",{className:"excalidraw-canvas-buttons",style:{top:`${s}px`,left:`${r}px`,padding:e7e},children:e})};function n7e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var i7e={};n7e(i7e,"LaserPointer",()=>n5);function vn([e,t,n],[i,r,s]){return[e+i,t+r,n+s]}function Ym([e,t,n],[i,r,s]){return[e-i,t-r,n-s]}function On([e,t,n],i){return[e*i,t*i,n*i]}function ff([e,t,n]){return[e/Math.sqrt(e**2+t**2),t/Math.sqrt(e**2+t**2),n]}function Bi([e,t,n],i){return[Math.cos(i)*e-Math.sin(i)*t,Math.sin(i)*e+Math.cos(i)*t,n]}function r7e(e,t,n){return vn(e,On(Ym(t,e),n))}function wL(e,t,n){return Math.atan2(n[1]-e[1],n[0]-e[0])-Math.atan2(t[1]-e[1],t[0]-e[0])}function _L(e){return Math.atan2(Math.sin(e),Math.cos(e))}function TL([e,t]){return Math.sqrt(e**2+t**2)}function Eh([e,t],[n,i]){return Math.sqrt((n-e)**2+(i-t)**2)}function s7e(e){if(e.length<2)return 0;let t=0;for(let n=1;n<=e.length-1;n++)t+=Eh(e[n-1],e[n]);return t+=Eh(e[e.length-2],e[e.length-1]),t}const o7e=(e,t,n)=>Math.max(t,Math.min(n,e));function a7e(e,t,n){const i=Eh(t,n);if(i===0)return Eh(e,t);const r=o7e(((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i**2,0,1),s=[t[0]+r*(n[0]-t[0]),t[1]+r*(n[1]-t[1]),e[2]];return Eh(s,e)}function t5(e,t){if(t===0||e.length<=2)return e;const n=e[0],i=e[e.length-1],[r,s]=e.reduce(([o,a],l,c)=>{const u=a7e(l,n,i);return u>o?[u,c]:[o,a]},[0,-1]);if(r>=t){const o=e[s];return[...t5([n,...e.slice(1,s),o],t).slice(0,-1),o,...t5([o,...e.slice(s,-1),i],t).slice(1)]}else return[n,i]}const Zl=class Zl{constructor(t){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},Zl.defaults,t)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(t){const n=this.originalPoints[this.originalPoints.length-1];if(!(n&&n[0]===t[0]&&n[1]===t[1])){if(this.originalPoints.push(t),this.isFresh){this.isFresh=!1,this.stablePoints.push(t);return}this.options.streamline>0&&(t=r7e(this.lastPoint,t,1-this.options.streamline)),this.tailPoints.push(t),s7e(this.tailPoints)>Zl.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(t,n,i,r,s){return(t??this.options.size)*this.options.sizeMapping({pressure:n,runningLength:s,currentIndex:i,totalLength:r})}getStrokeOutline(t){if(this.isFresh)return[];let n=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(n=t5(n,this.options.simplify));const i=n.length;if(i===0)return[];if(i===1){const _=n[0],T=this.getSize(t,_[2],0,i,0);if(T<.5)return[];const A=[];for(let C=0;C<=Math.PI*2;C+=Math.PI/16)A.push(vn(_,On(Bi([1,0,0],C),T)));return A.push(vn(_,On([1,0,0],this.getSize(t,_[2],0,i,0)))),A}if(i===2){const _=n[0],T=n[1],A=this.getSize(t,_[2],0,i,0),C=this.getSize(t,T[2],0,i,0);if(A<.5||C<.5)return[];const k=[],P=wL(_,[_[0],_[1]-100,_[2]],T);for(let D=P;D<=Math.PI+P;D+=Math.PI/16)k.push(vn(_,On(Bi([1,0,0],D),A)));for(let D=Math.PI+P;D<=Math.PI*2+P;D+=Math.PI/16)k.push(vn(T,On(Bi([1,0,0],D),C)));return k.push(k[0]),k}const r=[],s=[];let o=0,a=0,l=0,c=0;for(let _=1;_<i-1;_++){const T=n[_-1],A=n[_],C=n[_+1];let k=A[2];const P=Eh(T,A);c+=P,o=a+(P-a)*.2;const D=this.getSize(t,k,_,i,c);if(D===0){l=_+1;continue}const j=ff(Ym(T,A)),G=ff(Ym(C,A)),B=Bi(j,Math.PI/2),H=Bi(j,-Math.PI/2),$=Bi(G,Math.PI/2),X=Bi(G,-Math.PI/2),W=vn(A,On(B,D)),Q=vn(A,On(H,D)),oe=vn(A,On($,D)),ne=vn(A,On(X,D)),ie=vn(B,X),me=vn(H,$),Re=vn(A,On(TL(ie)===0?j:ff(ie),D)),Ve=vn(A,On(TL(me)===0?G:ff(me),D)),wt=_L(wL(A,T,C)),Ot=Zl.constants.cornerDetectionMaxAngle/180*Math.PI*Zl.constants.cornerDetectionVariance(o);if(Math.abs(wt)<Ot){const Ye=Math.abs(_L(Math.PI-wt));if(Ye===0)continue;if(wt<0){s.push(Q,Ve);for(let ut=0;ut<=Ye;ut+=Ye/4)r.push(vn(A,Bi(On(B,D),ut)));for(let ut=Ye;ut>=0;ut-=Ye/4)s.push(vn(A,Bi(On(B,D),ut)));s.push(Ve,oe)}else{r.push(W,Re);for(let ut=0;ut<=Ye;ut+=Ye/4)s.push(vn(A,Bi(On(B,-D),-ut)));for(let ut=Ye;ut>=0;ut-=Ye/4)r.push(vn(A,Bi(On(B,-D),-ut)));r.push(Re,ne)}}else r.push(Re),s.push(Ve);a=o}if(l>=i-2)if(this.options.keepHead){const _=n[i-1],T=[];for(let A=0;A<=Math.PI*2;A+=Math.PI/16)T.push(vn(_,On(Bi([1,0,0],A),this.options.size)));return T.push(vn(_,On([1,0,0],this.options.size))),T}else return[];const u=n[l],d=n[l+1],f=n[i-2],h=n[i-1],m=ff(Ym(d,u)),p=ff(Ym(f,h)),U=Bi(m,-Math.PI/2),b=Bi(p,Math.PI/2),y=this.getSize(t,u[2],0,i,0),w=[],v=this.options.keepHead?this.options.size:this.getSize(t,f[2],i-2,i,c),I=[];if(y>1){for(let _=0;_<=Math.PI;_+=Math.PI/16)w.unshift(vn(u,Bi(On(U,y),-_)));w.unshift(vn(u,On(U,-y)))}else w.push(u);for(let _=0;_<=Math.PI*3;_+=Math.PI/16)I.push(vn(h,Bi(On(b,-v),-_)));const x=[...w,...r,...I.reverse(),...s.reverse()];return w.length>0&&x.push(w[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?t5(x,this.options.simplify):x}};Zl.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1},Zl.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:t=>t>35?.5:1,maxTailLength:50};let n5=Zl;class i5{constructor(t,n,i){F(this,"currentTrail");F(this,"pastTrails",[]);F(this,"container");F(this,"trailElement");F(this,"trailAnimation");this.animationFrameHandler=t,this.app=n,this.options=i,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(st,"path"),this.options.animateTrail&&(this.trailAnimation=document.createElementNS(st,"animate"),this.trailAnimation.setAttribute("attributeName","stroke-dashoffset"),this.trailElement.setAttribute("stroke-dasharray","7 7"),this.trailElement.setAttribute("stroke-dashoffset","10"),this.trailAnimation.setAttribute("from","0"),this.trailAnimation.setAttribute("to","-14"),this.trailAnimation.setAttribute("dur","0.3s"),this.trailElement.appendChild(this.trailAnimation))}get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(t,n){if(this.currentTrail){const i=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[i-1][0]===t&&this.currentTrail.originalPoints[i-1][1]===n}return!1}start(t){t&&(this.container=t),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){var t;this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&((t=this.container)==null||t.removeChild(this.trailElement))}startPath(t,n){this.currentTrail=new n5(this.options),this.currentTrail.addPoint([t,n,performance.now()]),this.update()}addPointToPath(t,n){this.currentTrail&&(this.currentTrail.addPoint([t,n,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}getCurrentTrail(){return this.currentTrail}clearTrails(){this.pastTrails=[],this.currentTrail=void 0,this.update()}update(){this.start(),this.trailAnimation&&(this.trailAnimation.setAttribute("begin","indefinite"),this.trailAnimation.setAttribute("repeatCount","indefinite"))}onFrame(){const t=[];for(const i of this.pastTrails)t.push(this.drawTrail(i,this.app.state));if(this.currentTrail){const i=this.drawTrail(this.currentTrail,this.app.state);t.push(i)}this.pastTrails=this.pastTrails.filter(i=>i.getStrokeOutline().length!==0),t.length===0&&this.stop();const n=t.join(" ").trim();this.trailElement.setAttribute("d",n),this.trailAnimation?(this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this)),this.trailElement.setAttribute("stroke",(this.options.stroke??(()=>"black"))(this))):this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(t,n){const i=t.getStrokeOutline(t.options.size/n.zoom.value).map(([s,o])=>{const a=Kr({sceneX:s,sceneY:o},n);return[a.x,a.y]}),r=this.trailAnimation?i.slice(0,i.length/2):i;return qse(r,!0)}}class l7e{constructor(t,n){F(this,"localTrail");F(this,"collabTrails",new Map);F(this,"container");this.animationFrameHandler=t,this.app=n,this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new i5(t,n,{...this.getTrailOptions(),fill:()=>Sre})}getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:t=>{const r=Math.max(0,1-(performance.now()-t.pressure)/1e3),s=(50-Math.min(50,t.totalLength-t.currentIndex))/50;return Math.min(ol(s),ol(r))}}}startPath(t,n){this.localTrail.startPath(t,n)}addPointToPath(t,n){this.localTrail.addPointToPath(t,n)}endPath(){this.localTrail.endPath()}start(t){this.container=t,this.animationFrameHandler.start(this),this.localTrail.start(t)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(const[t,n]of this.app.state.collaborators.entries()){let i;this.collabTrails.has(t)?i=this.collabTrails.get(t):(i=new i5(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>{var r;return((r=n.pointer)==null?void 0:r.laserColor)||Ky(t,n)}}),i.start(this.container),this.collabTrails.set(t,i)),n.pointer&&n.pointer.tool==="laser"&&(n.button==="down"&&!i.hasCurrentTrail&&i.startPath(n.pointer.x,n.pointer.y),n.button==="down"&&i.hasCurrentTrail&&!i.hasLastPoint(n.pointer.x,n.pointer.y)&&i.addPointToPath(n.pointer.x,n.pointer.y),n.button==="up"&&i.hasCurrentTrail&&(i.addPointToPath(n.pointer.x,n.pointer.y),i.endPath()))}for(const t of this.collabTrails.keys())this.app.state.collaborators.has(t)||(this.collabTrails.get(t).stop(),this.collabTrails.delete(t))}}}const an=e=>t=>{mi.unstable_batchedUpdates(e,t)},N3=e=>bp(t=>{mi.unstable_batchedUpdates(e,t)}),r5=(()=>{let e;try{const n=L.version.split(".");e=Number(n[0])>17}catch{e=!1}let t=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?e?!0:(t||(t=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})(),c7e=(e,t,n,i,r,s)=>{const{zoom:o}=i,a=180*n/Math.PI;let l=e*(o.value-1)/2,c=t*(o.value-1)/2;return e>r&&o.value!==1&&(l=r*(o.value-1)/2),t>s&&o.value!==1&&(c=s*(o.value-1)/2),`translate(${l}px, ${c}px) scale(${o.value}) rotate(${a}deg)`},u7e=({id:e,onChange:t,onSubmit:n,getViewportCoords:i,element:r,canvas:s,excalidrawContainer:o,app:a,autoSelect:l=!0})=>{const c=(G,B)=>{if(!B.style.fontFamily||!B.style.fontSize)return!1;const H=B.style.fontFamily.replace(/"/g,"");return Up({fontFamily:G.fontFamily})!==H||`${G.fontSize}px`!==B.style.fontSize},u=()=>{const G=a.state,B=a.scene.getElement(e);if(!B)return;const{textAlign:H,verticalAlign:$}=B,X=a.scene.getNonDeletedElementsMap();if(B&&ge(B)){let W=B.x,Q=B.y;const oe=Yn(B,a.scene.getNonDeletedElementsMap());let ne=B.width,ie=B.height,me=B.width,Re=B.height;if(oe&&B.containerId){if(Ce(oe)){const li=Ue.getBoundTextElementPosition(oe,B,X);W=li.x,Q=li.y}const ut=c(B,d);let $t;if(ut?$t=u6(oe.id,oe.height):($t=zh[oe.id],$t||($t=u6(oe.id,oe.height))),me=Jo(oe,B),Re=Sp(oe,B),!Ce(oe)&&ie>Re){const li=pd(ie,oe.type);a.scene.mutateElement(oe,{height:li});return}else if(!Ce(oe)&&oe.height>$t.height&&ie<Re){const li=pd(ie,oe.type);a.scene.mutateElement(oe,{height:li})}else{const{x:li,y:xl}=su(oe,B,X);W=li,Q=xl}}const[Ve,wt]=i(W,Q);oe?ne+=.5:(me=(G.width-8-Ve)/G.zoom.value,ne=Math.min(ne,me)),ie*=1.05;const Ot=pt(B),Ye=(G.height-wt)/G.zoom.value;Object.assign(d.style,{font:Ot,lineHeight:B.lineHeight,width:`${ne}px`,height:`${ie}px`,left:`${Ve}px`,top:`${wt}px`,transform:c7e(ne,ie,kae(B,oe),G,me,Ye),textAlign:H,verticalAlign:$,color:B.strokeColor,opacity:B.opacity/100,filter:"var(--theme-filter)",maxHeight:`${Ye}px`}),d.scrollTop=0,a.scene.mutateElement(B,{x:W,y:Q})}},d=document.createElement("textarea");d.dir="auto",d.tabIndex=0,d.dataset.type="wysiwyg",d.wrap="off",d.classList.add("excalidraw-wysiwyg");let f="pre",h="normal";(Lt(r)||!r.autoResize)&&(f="pre-wrap",h="break-word"),Object.assign(d.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:h,whiteSpace:f,overflowWrap:"break-word",boxSizing:"content-box"}),d.value=r.originalText,u(),t&&(d.onpaste=async G=>{const B=(await Iv(G)).findByType(Te.text);if(!B)return;const H=Hh(B.value);if(!H)return;const $=Yn(r,a.scene.getNonDeletedElementsMap()),X=pt({fontSize:a.state.currentItemFontSize,fontFamily:a.state.currentItemFontFamily});if($){const W=Le($,a.scene.getNonDeletedElementsMap()),Q=ru(`${d.value}${H}`,X,Jo($,W)),oe=o_(Q,X);d.style.width=`${oe}px`}},d.oninput=()=>{const G=Hh(d.value);if(d.value!==G){const B=d.selectionStart;d.value=G,d.selectionStart=B,d.selectionEnd=B}t(d.value)}),d.onkeydown=G=>{if(!G.shiftKey&&zR.keyTest(G))G.preventDefault(),a.actionManager.executeAction(zR),u();else if(!G.shiftKey&&HR.keyTest(G))G.preventDefault(),a.actionManager.executeAction(HR),u();else if(!G.shiftKey&&VR.keyTest(G))G.preventDefault(),a.actionManager.executeAction(VR),u();else if(OR.keyTest(G))a.actionManager.executeAction(OR);else if(PR.keyTest(G))a.actionManager.executeAction(PR);else if(G.key===V.ESCAPE)G.preventDefault(),I=!0,x();else if(q6.keyTest(G))G.preventDefault(),x(),a.actionManager.executeAction(q6);else if(G.key===V.ENTER&&G[V.CTRL_OR_CMD]){if(G.preventDefault(),G.isComposing||G.keyCode===229)return;I=!0,x()}else if(G.key===V.TAB||G[V.CTRL_OR_CMD]&&(G.code===it.BRACKET_LEFT||G.code===it.BRACKET_RIGHT)){if(G.preventDefault(),G.isComposing)return;G.shiftKey||G.code===it.BRACKET_LEFT?y():b(),d.dispatchEvent(new Event("input"))}};const m=4,p=" ".repeat(m),U=new RegExp(`^ {1,${m}}`),b=()=>{const{selectionStart:G,selectionEnd:B}=d,H=w();let $=d.value;H.forEach(X=>{const W=$.slice(0,X),Q=$.slice(X);$=`${W}${p}${Q}`}),d.value=$,d.selectionStart=G+m,d.selectionEnd=B+m*H.length},y=()=>{const{selectionStart:G,selectionEnd:B}=d,H=w(),$=[];let X=d.value;H.forEach(W=>{const Q=X.slice(W,W+m).match(U);if(Q){const oe=X.slice(0,W),ne=X.slice(W+Q[0].length);X=`${oe}${ne}`,$.push(W)}}),d.value=X,$.length&&(G>$[$.length-1]?d.selectionStart=Math.max(G-m,$[$.length-1]):d.selectionStart=G,d.selectionEnd=Math.max(d.selectionStart,B-m*$.length))},w=()=>{let{selectionStart:G,selectionEnd:B,value:H}=d;const $=H.slice(0,G).match(/[^\n]*$/)[0].length;return G=G-$,H.slice(G,B).split(`
`).reduce((W,Q,oe,ne)=>W.concat(oe?W[oe-1]+ne[oe-1].length+1:G),[]).reverse()},v=G=>{G.target instanceof HTMLCanvasElement&&(G.preventDefault(),G.stopPropagation())};let I=!1;const x=()=>{var H;if(D)return;D=!0,_();const G=a.scene.getElement(r.id);if(!G)return;const B=Yn(G,a.scene.getNonDeletedElementsMap());if(B){if(d.value.trim()){const $=Qo(B);!$||$!==r.id?a.scene.mutateElement(B,{boundElements:(B.boundElements||[]).concat({type:"text",id:r.id})}):Ce(B)&&Da(B)}else a.scene.mutateElement(B,{boundElements:(H=B.boundElements)==null?void 0:H.filter($=>!ge($))});Qi(G,B,a.scene)}n({viaKeyboard:I,nextOriginalText:d.value})},_=()=>{d.onblur=null,d.oninput=null,d.onkeydown=null,j&&j.disconnect(),window.removeEventListener("resize",u),window.removeEventListener("wheel",v,!0),window.removeEventListener("pointerdown",C),window.removeEventListener("pointerup",T),window.removeEventListener("blur",x),window.removeEventListener("beforeunload",x),k(),P(),d.remove()},T=G=>{window.removeEventListener("pointerup",T);const B=G==null?void 0:G.target,H=B instanceof HTMLElement&&B.classList.contains("properties-trigger"),$=(B instanceof HTMLElement||B instanceof SVGElement)&&!!B.closest(".properties-content"),X=(B instanceof HTMLElement||B instanceof SVGElement)&&(!!B.closest(`.${gr.SHAPE_ACTIONS_MENU}`)||!!B.closest(".compact-shape-actions-island"));setTimeout(()=>{X||H||$||(d.onblur=x,d.focus())})},A=()=>{d.onblur=null,window.addEventListener("pointerup",T),window.addEventListener("blur",x)},C=G=>{const B=G==null?void 0:G.target;if(G.button===zl.WHEEL){B instanceof HTMLTextAreaElement&&(G.preventDefault(),a.handleCanvasPanUsingWheelOrSpaceDrag(G)),A();return}const H=B instanceof HTMLElement&&B.classList.contains("properties-trigger"),$=(B instanceof HTMLElement||B instanceof SVGElement)&&!!B.closest(".properties-content");(G.target instanceof HTMLElement||G.target instanceof SVGElement)&&(G.target.closest(`.${gr.SHAPE_ACTIONS_MENU}, .${gr.ZOOM_ACTIONS}`)||G.target.closest(".compact-shape-actions-island"))&&!ka(G.target)||H||$?A():G.target instanceof HTMLCanvasElement&&requestAnimationFrame(()=>{x()})},k=a.scene.onUpdate(()=>{var B;u(),!!((B=document.activeElement)!=null&&B.closest(".properties-content"))||d.focus()}),P=a.onScrollChangeEmitter.on(()=>{u()});let D=!1;l&&d.select(),T();let j=null;return s&&"ResizeObserver"in window?(j=new window.ResizeObserver(()=>{u()}),j.observe(s)):window.addEventListener("resize",u),d.onpointerdown=G=>G.stopPropagation(),requestAnimationFrame(()=>{window.addEventListener("pointerdown",C,{capture:!0})}),window.addEventListener("beforeunload",x),o==null||o.querySelector(".excalidraw-textEditorContainer").appendChild(d),x},$l=4,xo=6,d7e="rgba(0,0,0,0.3)",f7e=(e,t,n,i)=>{if(!e.size)return{horizontal:null,vertical:null};const[r,s,o,a]=nt(e),l=t/i.zoom.value,c=n/i.zoom.value,u={top:parseInt(PU("sat"))||0,bottom:parseInt(PU("sab"))||0,left:parseInt(PU("sal"))||0,right:parseInt(PU("sar"))||0},d=b0().rtl,f=-i.scrollX+u.left,h=-i.scrollY+u.top,m=f+l-u.right,p=h+c-u.bottom,U=Math.min(r,f),b=Math.min(s,h),y=Math.max(o,m),w=Math.max(a,p),v=o-r,I=a-s,x=y-U,_=w-b,T=Math.max($l*2,u.left+u.right)+xo*2,A=t*(l/x)-T,C=Math.max($l*2,u.top+u.bottom)+xo*2,k=n*(c/_)-C,P=x>v?x*i.zoom.value/(A+T):t/(A+T),D=_>I?_*i.zoom.value/(k+C):n/(k+C);return{horizontal:f===U&&m===y?null:{x:Math.max(u.left,$l)+xo+(f-U)/x*t,y:n-xo-Math.max($l,u.bottom),width:A,height:xo,deltaMultiplier:P},vertical:h===b&&p===w?null:{x:d?Math.max(u.left,$l):t-xo-Math.max(u.right,$l),y:Math.max(u.top,$l)+xo+(h-b)/_*n,width:xo,height:k,deltaMultiplier:D}}},IL=(e,t,n)=>{const[i,r]=[e.horizontal,e.vertical].map(o=>o!=null&&o.x<=t&&t<=o.x+o.width&&o.y<=n&&n<=o.y+o.height);return{isOverEither:i||r,isOverHorizontal:i,isOverVertical:r}},h7e=e=>{const t=["flowchart","graph","sequenceDiagram","classDiagram","stateDiagram","stateDiagram-v2","erDiagram","journey","gantt","pie","quadrantChart","requirementDiagram","gitGraph","C4Context","mindmap","timeline","zenuml","sankey","xychart","block"];return new RegExp(`^(?:%%{.*?}%%[\\s\\n]*)?\\b(?:${t.map(i=>`\\s*${i}(-beta)?`).join("|")})\\b`).test(e.trim())};function O3(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function g7e(e,t,n){const i=O3(t,n);if(i===0)return O3(e,t);let r=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/i;return r=Math.max(0,Math.min(1,r)),O3(e,m7e(t,n,r))}function m7e(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function p7e(e,t){return Bv(e,0,e.length,t)}function Bv(e,t,n,i,r){const s=r||[],o=e[t],a=e[n-1];let l=0,c=1;for(let u=t+1;u<n-1;++u){const d=g7e(e[u],o,a);d>l&&(l=d,c=u)}return Math.sqrt(l)>i?(Bv(e,t,c+1,i,s),Bv(e,c,n,i,s)):(s.length||s.push(o),s.push(a)),s}const U7e=e=>{const{lassoPath:t,elements:n,elementsMap:i,elementsSegments:r,intersectedElements:s,enclosedElements:o,simplifyDistance:a}=e;let l=t;a&&(l=p7e(t,a));const c=n.filter(f=>!f.locked);o.clear(),s.clear();const u=t.reduce((f,h)=>[Math.min(f[0],h[0]),Math.min(f[1],h[1]),Math.max(f[2],h[0]),Math.max(f[3],h[1])],[1/0,1/0,-1/0,-1/0]);for(const f of c){const h=si(f,i);Vd(u,h)&&!s.has(f.id)&&!o.has(f.id)&&(b7e(l,f,r)?o.add(f.id):y7e(l,f,i)&&s.add(f.id))}return{selectedElementIds:[...s,...o]}},b7e=(e,t,n)=>{const i=n6(e),r=n.get(t.id);return r?r.some(s=>s.some(o=>kB(o,i))):!1},y7e=(e,t,n)=>{const i=e.slice(1).map((s,o)=>Me(e[o],s)).concat([Me(e[e.length-1],e[0])]),r=Le(t,n);return i.some(s=>$o(t,n,s,0,!0).length>0||!!r&&$o({...r,...su(t,r,n)},n,s,0,!0).length>0)};class E7e extends i5{constructor(n,i){super(n,i,{animateTrail:!0,streamline:.4,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/(1/0)),l=(5e3-Math.min(5e3,r.totalLength-r.currentIndex))/5e3;return Math.min(ol(l),ol(a))},fill:()=>"rgba(105,101,219,0.05)",stroke:()=>"rgba(105,101,219)"});F(this,"intersectedElements",new Set);F(this,"enclosedElements",new Set);F(this,"elementsSegments",null);F(this,"canvasTranslate",null);F(this,"keepPreviousSelection",!1);F(this,"selectElementsFromIds",n=>{this.app.setState(i=>{const r=n.reduce((l,c)=>(l[c]=!0,l),{});if(this.keepPreviousSelection)for(const l of Object.keys(i.selectedElementIds))r[l]=!0;for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&ge(c)){const u=Yn(c,this.app.scene.getNonDeletedElementsMap());u&&(r[u.id]=!0,delete r[c.id])}}for(const[l]of Object.entries(r)){const c=this.app.scene.getNonDeletedElement(l);if(c&&we(c)){const u=is(this.app.scene.getNonDeletedElementsMap(),c.id);for(const d of u)delete r[d.id]}}const s=Si({editingGroupId:i.editingGroupId,selectedElementIds:r},this.app.scene.getNonDeletedElements(),i,this.app),o=[...Object.keys(s.selectedElementIds)],a=[...Object.keys(s.selectedGroupIds)];return{selectedElementIds:s.selectedElementIds,selectedGroupIds:s.selectedGroupIds,selectedLinearElement:o.length===1&&!a.length&&xe(this.app.scene.getNonDeletedElement(o[0]))?new Ue(this.app.scene.getNonDeletedElement(o[0]),this.app.scene.getNonDeletedElementsMap()):null}})});F(this,"addPointToPath",(n,i,r=!1)=>{super.addPointToPath(n,i),this.keepPreviousSelection=r,this.updateSelection()});F(this,"updateSelection",()=>{var r,s;const n=(s=(r=super.getCurrentTrail())==null?void 0:r.originalPoints)==null?void 0:s.map(o=>S(o[0],o[1])),i={scrollX:this.app.state.scrollX,scrollY:this.app.state.scrollY,zoom:this.app.state.zoom.value};if(!this.elementsSegments||!Ki(i,this.canvasTranslate??{})){this.canvasTranslate=i,this.elementsSegments=new Map;const o=ve(this.app.visibleElements);for(const a of this.app.visibleElements){const l=I6(a,o);this.elementsSegments.set(a.id,l)}}if(n){const{selectedElementIds:o}=U7e({lassoPath:n,elements:this.app.visibleElements,elementsMap:this.app.scene.getNonDeletedElementsMap(),elementsSegments:this.elementsSegments,intersectedElements:this.intersectedElements,enclosedElements:this.enclosedElements,simplifyDistance:5/this.app.state.zoom.value});this.selectElementsFromIds(o)}})}startPath(n,i,r=!1){this.endPath(),super.startPath(n,i),this.intersectedElements.clear(),this.enclosedElements.clear(),this.keepPreviousSelection=r,this.keepPreviousSelection||this.app.setState({selectedElementIds:{},selectedGroupIds:{},selectedLinearElement:null})}endPath(){super.endPath(),super.clearTrails(),this.intersectedElements.clear(),this.enclosedElements.clear(),this.elementsSegments=null}}class v7e extends i5{constructor(n,i){super(n,i,{streamline:.2,size:5,keepHead:!0,sizeMapping:r=>{const a=Math.max(0,1-(performance.now()-r.pressure)/200),l=(10-Math.min(10,r.totalLength-r.currentIndex))/10;return Math.min(ol(l),ol(a))},fill:()=>i.state.theme===ke.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});F(this,"elementsToErase",new Set);F(this,"groupsToErase",new Set)}startPath(n,i){this.endPath(),super.startPath(n,i),this.elementsToErase.clear()}addPointToPath(n,i,r=!1){return super.addPointToPath(n,i),this.updateElementsToBeErased(r)}updateElementsToBeErased(n){var a,l;const i=((l=(a=super.getCurrentTrail())==null?void 0:a.originalPoints)==null?void 0:l.map(c=>S(c[0],c[1])))||[];if(i.length<2)return[];const r=Me(i[i.length-1],i[i.length-2]),s=this.app.visibleElements.filter(c=>!c.locked),o=ve(s);for(const c of s)if(n&&this.elementsToErase.has(c.id)){if(SL(r,c,o,this.app.state.zoom.value)){const d=c.groupIds.at(-1);if(this.groupsToErase.has(d)){const f=At(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.delete(h.id);this.groupsToErase.delete(d)}if(Lt(c)&&this.elementsToErase.delete(c.containerId),Di(c)){const f=Qo(c);f&&this.elementsToErase.delete(f)}this.elementsToErase.delete(c.id)}}else if(!n&&!this.elementsToErase.has(c.id)&&SL(r,c,o,this.app.state.zoom.value)){const d=c.groupIds.at(-1);if(!this.groupsToErase.has(d)){const f=At(this.app.scene.getNonDeletedElementsMap(),d);for(const h of f)this.elementsToErase.add(h.id);this.groupsToErase.add(d)}if(Di(c)){const f=Qo(c);f&&this.elementsToErase.add(f)}Lt(c)&&this.elementsToErase.add(c.containerId),this.elementsToErase.add(c.id)}return Array.from(this.elementsToErase)}endPath(){super.endPath(),super.clearTrails(),this.elementsToErase.clear(),this.groupsToErase.clear()}}const SL=(e,t,n,i)=>{const r=e[1],s=qi(t)?15:t.strokeWidth/2,o=[Math.min(e[0][0],e[1][0])-s,Math.min(e[0][1],e[1][1])-s,Math.max(e[0][0],e[1][0])+s,Math.max(e[0][1],e[1][1])+s],a=si(t,n),l=[a[0]-s,a[1]-s,a[2]+s,a[3]+s];if(!Vd(o,l))return!1;if(d6(t)&&l_(r,t,n))return!0;if(qi(t)){const u=jz(t),d=Jle(t,u,n),f=Math.max(2.25,5/i);for(const m of d)if(IA(m,e)<=f)return!0;const h=T4(...u.map(([m,p])=>S(t.x+m,t.y+p)));return!!kB(e[0],h)}const c=Le(t,n);if(Ce(t)||nn(t)&&!t.polygon){const u=Math.max(t.strokeWidth,t.strokeWidth*2/i),d=I6(t,n);for(const f of d)if(IA(f,e)<=u)return!0;return!1}return $o(t,n,e,0,!0).length>0||!!c&&$o({...c,...su(t,c,n)},n,e,0,!0).length>0},w7e=()=>N("div",{"data-testid":"brave-measure-text-error",children:[g("p",{children:g(Cr,{i18nKey:"errors.brave_measure_text_error.line1",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(Cr,{i18nKey:"errors.brave_measure_text_error.line2",bold:e=>g("span",{style:{fontWeight:600},children:e})})}),g("p",{children:g(Cr,{i18nKey:"errors.brave_measure_text_error.line3",link:e=>g("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:e})})}),g("p",{children:g(Cr,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:e=>g("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:e}),discordLink:e=>N("a",{href:"https://discord.gg/UexuTaE",children:[e,"."]})})})]}),_7e=({children:e,left:t,top:n,onCloseRequest:i,fitInViewport:r=!1,offsetLeft:s=0,offsetTop:o=0,viewportWidth:a=window.innerWidth,viewportHeight:l=window.innerHeight,className:c})=>{const u=L.useRef(null);L.useEffect(()=>{const f=u.current;if(!f)return;f.contains(document.activeElement)||f.focus();const h=m=>{var p,U,b;if(m.key===V.TAB){const y=x4(f),{activeElement:w}=document,v=y.findIndex(I=>I===w);w===f?(m.shiftKey?(p=y[y.length-1])==null||p.focus():y[0].focus(),m.preventDefault(),m.stopImmediatePropagation()):v===0&&m.shiftKey?((U=y[y.length-1])==null||U.focus(),m.preventDefault(),m.stopImmediatePropagation()):v===y.length-1&&!m.shiftKey&&((b=y[0])==null||b.focus(),m.preventDefault(),m.stopImmediatePropagation())}};return f.addEventListener("keydown",h),()=>f.removeEventListener("keydown",h)},[]);const d=L.useRef(null);return L.useLayoutEffect(()=>{var f,h;if(r&&u.current&&n!=null&&t!=null){const m=u.current,{width:p,height:U}=m.getBoundingClientRect();if(((f=d.current)==null?void 0:f.top)===n&&((h=d.current)==null?void 0:h.left)===t)return;d.current={top:n,left:t},p>=a?(m.style.width=`${a}px`,m.style.left="0px",m.style.overflowX="scroll"):t+p-s>a?m.style.left=`${a-p-10}px`:m.style.left=`${t}px`,U>=l?(m.style.height=`${l-20}px`,m.style.top="10px",m.style.overflowY="scroll"):n+U-o>l?m.style.top=`${l-U}px`:m.style.top=`${n}px`}},[n,t,r,a,l,s,o]),L.useEffect(()=>{if(i){const f=h=>{var m;(m=u.current)!=null&&m.contains(h.target)||mi.unstable_batchedUpdates(()=>i(h))};return document.addEventListener("pointerdown",f,!1),()=>document.removeEventListener("pointerdown",f,!1)}},[i]),g("div",{className:ce("popover",c),ref:u,tabIndex:-1,children:e})},qn="separator",T7e=ue.memo(({actionManager:e,items:t,top:n,left:i,onClose:r})=>{const s=Hp(),o=sE(),a=t.reduce((l,c)=>(c&&(c===qn||!c.predicate||c.predicate(o,s,e.app.props,e.app))&&l.push(c),l),[]);return g(_7e,{onCloseRequest:()=>{r()},top:n,left:i,fitInViewport:!0,offsetLeft:s.offsetLeft,offsetTop:s.offsetTop,viewportWidth:s.width,viewportHeight:s.height,className:"context-menu-popover",children:g("ul",{className:"context-menu",onContextMenu:l=>l.preventDefault(),children:a.map((l,c)=>{var f;if(l===qn)return!a[c-1]||a[c-1]===qn?null:g("hr",{className:"context-menu-item-separator"},c);const u=l.name;let d="";return l.label&&(typeof l.label=="function"?d=R(l.label(o,s,e.app)):d=R(l.label)),g("li",{"data-testid":u,onClick:()=>{r(()=>{e.executeAction(l,"contextMenu")})},children:N("button",{type:"button",className:ce("context-menu-item",{dangerous:u==="deleteSelectedElements",checkmark:(f=l.checked)==null?void 0:f.call(l,s)}),children:[g("div",{className:"context-menu-item__label",children:d}),g("kbd",{className:"context-menu-item__shortcut",children:u?Zi(u):""})]})},c)})})})}),I7e=({height:e,width:t,userToFollow:n,onDisconnect:i})=>g("div",{className:"follow-mode",style:{width:t,height:e},children:N("div",{className:"follow-mode__badge",children:[N("div",{className:"follow-mode__badge__label",children:["Following"," ",g("span",{className:"follow-mode__badge__username",title:n.username,children:n.username})]}),g("button",{type:"button",onClick:i,className:"follow-mode__disconnect-btn",children:au})]})}),bj=({delay:e,theme:t})=>{const[n,i]=L.useState(!!e);return L.useEffect(()=>{if(!e)return;const r=setTimeout(()=>{i(!1)},e);return()=>clearTimeout(r)},[e]),n?null:N("div",{className:ce("LoadingMessage",{"LoadingMessage--dark":t===ke.DARK}),children:[g("div",{children:g(ul,{})}),g("div",{className:"LoadingMessage-text",children:R("labels.loadingScene")})]})},S7e="medium",xL={CHECKED:H_,UNCHECKED:by},x7e=e=>N("label",{className:ce("ToolIcon ToolIcon__lock",`ToolIcon_size_${S7e}`,{"is-mobile":e.isMobile}),title:`${e.title}  Q`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-lock"}),g("div",{className:"ToolIcon__icon",children:e.checked?xL.CHECKED:xL.UNCHECKED})]}),yj=e=>g(Xe,{className:ce("Shape",{fillable:!1,active:e.checked}),type:"radio",icon:BV,name:"editor-current-shape",checked:e.checked,title:`${e.title}  H`,keyBindingLabel:e.isMobile?void 0:V.H.toLocaleUpperCase(),"aria-label":`${e.title}  H`,"aria-keyshortcuts":V.H,"data-testid":"toolbar-hand",onChange:()=>{var t;return(t=e.onChange)==null?void 0:t.call(e)}}),P3=[{type:"rectangle",icon:V_,title:Rt(R("toolBar.rectangle"))},{type:"diamond",icon:$_,title:Rt(R("toolBar.diamond"))},{type:"ellipse",icon:G_,title:Rt(R("toolBar.ellipse"))}],F3=[{type:"selection",icon:yy,title:Rt(R("toolBar.selection"))},{type:"lasso",icon:x1,title:Rt(R("toolBar.lasso"))}],B3=[{type:"arrow",icon:AV,title:Rt(R("toolBar.arrow"))},{type:"line",icon:X_,title:Rt(R("toolBar.line"))}],C7e=({app:e,onHandToolToggle:t,setAppState:n})=>{const i=e.state.activeTool,[r,s]=L.useState(!1),[o,a]=L.useState("rectangle"),[l,c]=L.useState("arrow");L.useEffect(()=>{(i.type==="rectangle"||i.type==="diamond"||i.type==="ellipse")&&a(i.type)},[i.type]),L.useEffect(()=>{(i.type==="arrow"||i.type==="line")&&c(i.type)},[i.type]);const u=i.type==="frame",d=i.type==="laser",f=i.type==="embeddable",{TTDDialogTriggerTunnel:h}=er(),m=(P,D)=>{e.state.activeTool.type!==P&&Je("toolbar",P,"ui"),P==="selection"?e.state.activeTool.type==="selection"||e.setActiveTool({type:"selection"}):e.setActiveTool({type:P})},[p,U]=L.useState(0),b=36,y=4,w=7,v=w*b+(w-1)*y,I=b+y,x=p>=v+1*I,_=p>=v+2*I,T=p>=v+3*I,C=["text","frame","embeddable","laser","magicframe"].filter(P=>!(x&&P==="text"||_&&P==="image"||T&&P==="frame")).includes(i.type),k=C?i.type==="text"?gh:i.type==="image"?G2:i.type==="frame"?ed:i.type==="embeddable"?L6:i.type==="laser"?E0:i.type==="magicframe"?N6:lv:lv;return N("div",{className:"mobile-toolbar",ref:P=>{P&&U(P.getBoundingClientRect().width)},children:[g(yj,{checked:Kh(e.state),onChange:t,title:R("toolBar.hand"),isMobile:!0}),g(sb,{app:e,options:F3,activeTool:i,defaultOption:e.state.preferredSelectionTool.type,namePrefix:"selectionType",title:Rt(R("toolBar.selection")),"data-testid":"toolbar-selection",onToolChange:P=>{(P==="selection"||P==="lasso")&&(e.setActiveTool({type:P}),n({preferredSelectionTool:{type:P,initialized:!0}}))},displayedOption:F3.find(P=>P.type===e.state.preferredSelectionTool.type)||F3[0]}),g(Xe,{className:ce({active:i.type==="freedraw"}),type:"radio",icon:Rp,checked:i.type==="freedraw",name:"editor-current-shape",title:`${Rt(R("toolBar.freedraw"))}`,"aria-label":Rt(R("toolBar.freedraw")),"data-testid":"toolbar-freedraw",onChange:()=>m("freedraw")}),g(Xe,{className:ce({active:i.type==="eraser"}),type:"radio",icon:MV,checked:i.type==="eraser",name:"editor-current-shape",title:`${Rt(R("toolBar.eraser"))}`,"aria-label":Rt(R("toolBar.eraser")),"data-testid":"toolbar-eraser",onChange:()=>m("eraser")}),g(sb,{app:e,options:P3,activeTool:i,defaultOption:o,namePrefix:"shapeType",title:Rt(R(o==="rectangle"?"toolBar.rectangle":o==="diamond"?"toolBar.diamond":o==="ellipse"?"toolBar.ellipse":"toolBar.rectangle")),"data-testid":"toolbar-rectangle",onToolChange:P=>{(P==="rectangle"||P==="diamond"||P==="ellipse")&&(a(P),e.setActiveTool({type:P}))},displayedOption:P3.find(P=>P.type===o)||P3[0]}),g(sb,{app:e,options:B3,activeTool:i,defaultOption:l,namePrefix:"linearElementType",title:Rt(R(l==="arrow"?"toolBar.arrow":"toolBar.line")),"data-testid":"toolbar-arrow",fillable:!0,onToolChange:P=>{(P==="arrow"||P==="line")&&(c(P),e.setActiveTool({type:P}))},displayedOption:B3.find(P=>P.type===l)||B3[0]}),x&&g(Xe,{className:ce({active:i.type==="text"}),type:"radio",icon:gh,checked:i.type==="text",name:"editor-current-shape",title:`${Rt(R("toolBar.text"))}`,"aria-label":Rt(R("toolBar.text")),"data-testid":"toolbar-text",onChange:()=>m("text")}),_&&g(Xe,{className:ce({active:i.type==="image"}),type:"radio",icon:G2,checked:i.type==="image",name:"editor-current-shape",title:`${Rt(R("toolBar.image"))}`,"aria-label":Rt(R("toolBar.image")),"data-testid":"toolbar-image",onChange:()=>m("image")}),T&&g(Xe,{className:ce({active:u}),type:"radio",icon:ed,checked:u,name:"editor-current-shape",title:`${Rt(R("toolBar.frame"))}`,"aria-label":Rt(R("toolBar.frame")),"data-testid":"toolbar-frame",onChange:()=>m("frame")}),N(ze,{open:r,placement:"top",children:[g(ze.Trigger,{className:ce("App-toolbar__extra-tools-trigger App-toolbar__extra-tools-trigger--mobile",{"App-toolbar__extra-tools-trigger--selected":C||r}),onToggle:()=>{s(!r),n({openMenu:null,openPopup:null})},title:R("toolBar.extraTools"),style:{width:b,height:b,display:"flex",alignItems:"center",justifyContent:"center"},children:k}),N(ze.Content,{onClickOutside:()=>s(!1),onSelect:()=>s(!1),className:"App-toolbar__extra-tools-dropdown",children:[!x&&g(ze.Item,{onSelect:()=>e.setActiveTool({type:"text"}),icon:gh,shortcut:V.T.toLocaleUpperCase(),"data-testid":"toolbar-text",selected:i.type==="text",children:R("toolBar.text")}),!_&&g(ze.Item,{onSelect:()=>e.setActiveTool({type:"image"}),icon:G2,"data-testid":"toolbar-image",selected:i.type==="image",children:R("toolBar.image")}),!T&&g(ze.Item,{onSelect:()=>e.setActiveTool({type:"frame"}),icon:ed,shortcut:V.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:u,children:R("toolBar.frame")}),g(ze.Item,{onSelect:()=>e.setActiveTool({type:"embeddable"}),icon:L6,"data-testid":"toolbar-embeddable",selected:f,children:R("toolBar.embeddable")}),g(ze.Item,{onSelect:()=>e.setActiveTool({type:"laser"}),icon:E0,"data-testid":"toolbar-laser",selected:d,shortcut:V.K.toLocaleUpperCase(),children:R("toolBar.laser")}),g("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),e.props.aiEnabled!==!1&&g(h.Out,{}),g(ze.Item,{onSelect:()=>e.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:q_,"data-testid":"toolbar-embeddable",children:R("toolBar.mermaidToExcalidraw")}),e.props.aiEnabled!==!1&&e.plugins.diagramToCode&&g(fe,{children:N(ze.Item,{onSelect:()=>e.onMagicframeToolSelect(),icon:N6,"data-testid":"toolbar-magicframe",children:[R("toolBar.magicframe"),g(ze.Item.Badge,{children:"AI"})]})})]})]})]})},Ej=({children:e,side:t,className:n})=>g("div",{className:ce("FixedSideContainer",`FixedSideContainer_side_${t}`,n),children:e}),A7e="medium",vj=e=>e.penDetected?N("label",{className:ce("ToolIcon ToolIcon__penMode",`ToolIcon_size_${A7e}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:Ede})]}):null,M7e=({appState:e,elements:t,actionManager:n,setAppState:i,onHandToolToggle:r,renderTopLeftUI:s,renderTopRightUI:o,renderSidebars:a,renderWelcomeScreen:l,UIOptions:c,app:u,onPenModeToggle:d})=>{var b;const{WelcomeScreenCenterTunnel:f,MainMenuTunnel:h,DefaultSidebarTriggerTunnel:m}=er(),p=()=>{var v;if(((v=e.openDialog)==null?void 0:v.name)==="elementLinkSelector")return null;const y=N("div",{className:"excalidraw-ui-top-right",children:[(o==null?void 0:o(!0,e))??(!e.viewModeEnabled&&N(fe,{children:[g(vj,{checked:e.penMode,onChange:()=>d(null),title:R("toolBar.penMode"),isMobile:!0,penDetected:e.penDetected}),g(m.Out,{})]})),e.viewModeEnabled&&g(S3e,{actionManager:n})]}),w=N("div",{className:"excalidraw-ui-top-left",children:[s==null?void 0:s(!0,e),g(h.Out,{})]});return N("div",{className:"App-toolbar-content",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[w,y]})},U=()=>g(C7e,{app:u,onHandToolToggle:r,setAppState:i});return N(fe,{children:[a(),g("div",{className:"App-welcome-screen",children:l&&g(f.Out,{})}),!e.viewModeEnabled&&N("div",{className:"App-bottom-bar",style:{marginBottom:xo+$l},children:[g(v3e,{appState:e,elementsMap:u.scene.getNonDeletedElementsMap(),renderAction:n.renderAction,app:u,setAppState:i}),N(Zr,{className:"App-toolbar",children:[!e.viewModeEnabled&&((b=e.openDialog)==null?void 0:b.name)!=="elementLinkSelector"&&U(),e.scrolledOutside&&!e.openMenu&&!e.openSidebar&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(y=>({...y0(t,y)}))},children:R("buttons.scrollBackToContent")})]})]}),g(Ej,{side:"top",className:"App-top-bar",children:p()})]})},CL=e=>{const t=L.useRef(null),[n,i]=L.useState(null);return L.useLayoutEffect(()=>{if(!e.spreadsheet)return;const r=Tye(e.chartType,e.spreadsheet,0,0);i(r);let s;const o=t.current;return(async()=>{var a;s=await DT(r,{exportBackground:!1,viewBackgroundColor:yi.white},null,{skipInliningFonts:!0}),(a=s.querySelector(".style-fonts"))==null||a.remove(),o.replaceChildren(),o.appendChild(s),e.selected&&o.parentNode.focus()})(),()=>{o.replaceChildren()}},[e.spreadsheet,e.chartType,e.selected]),g("button",{type:"button",className:"ChartPreview",onClick:()=>{n&&e.onClick(e.chartType,n)},children:g("div",{ref:t})})},R7e=({setAppState:e,appState:t,onClose:n})=>{const{onInsertElements:i}=po(),r=ue.useCallback(()=>{n&&n()},[n]),s=(o,a)=>{i(a),Je("paste","chart",o),e({currentChartType:o,pasteDialog:{shown:!1,data:null}})};return g(ls,{size:"small",onCloseRequest:r,title:R("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:N("div",{className:"container",children:[g(CL,{chartType:"bar",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="bar",onClick:s}),g(CL,{chartType:"line",spreadsheet:t.pasteDialog.data,selected:t.currentChartType==="line",onClick:s})]})})},zv=({heading:e,children:t,...n})=>{const{id:i}=Dr(),r=g("h2",{className:"visually-hidden",id:`${i}-${e}-title`,children:R(`headings.${e}`)});return g("section",{...n,"aria-labelledby":`${i}-${e}-title`,children:typeof t=="function"?t(r):N(fe,{children:[r,t]})})},k7e=4,L7e=8,D7e=({shouldWrap:e,children:t,username:n})=>e?g(gl,{label:n||"Unknown user",children:t}):g(fe,{children:t}),z3=({actionManager:e,collaborator:t,socketId:n,withName:i=!1,shouldWrapWithTooltip:r=!1,isBeingFollowed:s})=>{const o={socketId:n,collaborator:t,withName:i,isBeingFollowed:s},a=e.renderAction("goToCollaborator",o);return g(D7e,{username:t.username,shouldWrap:r,children:a},n)},N7e=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],wj=ue.memo(({className:e,mobile:t,collaborators:n,userToFollow:i})=>{const r=Nr(),s=new Map;n.forEach((p,U)=>{const b=p.id||U;s.set(b,{...p,socketId:U})});const o=Array.from(s.values()).filter(p=>{var U;return(U=p.username)==null?void 0:U.trim()}),[a,l]=ue.useState(""),c=o.filter(p=>{var U;return(U=p.username)==null?void 0:U.toLowerCase().includes(a)}),u=ue.useRef(null);L.useLayoutEffect(()=>{if(u.current){const p=b=>{const y=Math.max(1,Math.min(8,Math.floor(b/38)));f(y)};if(p(u.current.clientWidth),!aB)return;const U=new ResizeObserver(b=>{for(const y of b){const{width:w}=y.contentRect;p(w)}});return U.observe(u.current),()=>{U.disconnect()}}},[]);const[d,f]=ue.useState(k7e),m=o.slice(0,d-1).map(p=>z3({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}));return t?g("div",{className:ce("UserList UserList_mobile",e),children:o.map(p=>z3({actionManager:r,collaborator:p,socketId:p.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:p.socketId===i}))}):g("div",{className:"UserList__wrapper",ref:u,children:N("div",{className:ce("UserList",e),style:{"--max-avatars":d},children:[m,o.length>d-1&&N(Tl,{children:[N(Il,{className:"UserList__more",children:["+",o.length-d+1]}),g(xy,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:N(Zr,{padding:2,children:[o.length>=L7e&&g(W$,{placeholder:R("quickSearch.placeholder"),onChange:l}),g(K$,{className:"dropdown-menu UserList__collaborators",placeholder:R("userList.empty"),children:c.length>0?[g("div",{className:"hint",children:R("userList.hint.text")}),c.map(p=>z3({actionManager:r,collaborator:p,socketId:p.socketId,withName:!0,isBeingFollowed:p.socketId===i}))]:[]}),g($$,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})]})]})})},(e,t)=>{if(e.collaborators.size!==t.collaborators.size||e.mobile!==t.mobile||e.className!==t.className||e.userToFollow!==t.userToFollow)return!1;const n=t.collaborators.keys();for(const[i,r]of e.collaborators){const s=t.collaborators.get(i);if(!s||i!==n.next().value||!Ki(r,s,N7e))return!1}return!0}),O7e=e=>g("button",{className:"help-icon",onClick:e.onClick,type:"button",title:`${R("helpDialog.title")}  ?`,"aria-label":R("helpDialog.title"),children:j_}),_j=({appState:e,actionManager:t,showExitZenModeBtn:n,renderWelcomeScreen:i})=>{const{FooterCenterTunnel:r,WelcomeScreenHelpHintTunnel:s}=er();return N("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[g("div",{className:ce("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":e.zenModeEnabled}),children:g($a.Col,{gap:2,children:N(zv,{heading:"canvasActions",children:[g(_3e,{renderAction:t.renderAction,zoom:e.zoom}),!e.viewModeEnabled&&g(T3e,{renderAction:t.renderAction,className:ce("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":e.zenModeEnabled})})]})})}),g(r.Out,{}),g("div",{className:ce("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:N("div",{style:{position:"relative"},children:[i&&g(s.Out,{}),g(O7e,{onClick:()=>t.executeAction(zT)})]})}),g(I3e,{actionManager:t,showExitZenModeBtn:n})]})};_j.displayName="Footer";const Tj=ue.createContext({}),Ij=({children:e,className:t})=>{const n=Nn(),i=L.useContext(Tj),r=!!(n.canFitSidebar&&i.shouldRenderDockButton);return N("div",{className:ce("sidebar__header",t),"data-testid":"sidebar-header",children:[e,N("div",{className:"sidebar__header__buttons",children:[r&&g(gl,{label:R("labels.sidebarLock"),children:g(ml,{onSelect:()=>{var s;return(s=i.onDock)==null?void 0:s.call(i,!i.docked)},selected:!!i.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":R("labels.sidebarLock"),children:mde})}),g(ml,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:i.onCloseRequest,"aria-label":R("buttons.close"),children:au})]})]})};Ij.displayName="SidebarHeader";function P7e(e){const t=e+"CollectionProvider",[n,i]=Lp(t),[r,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:m,children:p}=h,U=ue.useRef(null),b=ue.useRef(new Map).current;return g(r,{scope:m,itemMap:b,collectionRef:U,children:p})};o.displayName=t;const a=e+"CollectionSlot",l=ue.forwardRef((h,m)=>{const{scope:p,children:U}=h,b=s(a,p),y=uo(m,b.collectionRef);return g(v0,{ref:y,children:U})});l.displayName=a;const c=e+"CollectionItemSlot",u="data-radix-collection-item",d=ue.forwardRef((h,m)=>{const{scope:p,children:U,...b}=h,y=ue.useRef(null),w=uo(m,y),v=s(c,p);return ue.useEffect(()=>(v.itemMap.set(y,{ref:y,...b}),()=>void v.itemMap.delete(y))),g(v0,{[u]:"",ref:w,children:U})});d.displayName=c;function f(h){const m=s(e+"CollectionConsumer",h);return ue.useCallback(()=>{const U=m.collectionRef.current;if(!U)return[];const b=Array.from(U.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((v,I)=>b.indexOf(v.ref.current)-b.indexOf(I.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}var F7e=L.createContext(void 0);function Sj(e){const t=L.useContext(F7e);return e||t||"ltr"}var H3="rovingFocusGroup.onEntryFocus",B7e={bubbles:!1,cancelable:!0},rE="RovingFocusGroup",[Hv,xj,z7e]=P7e(rE),[H7e,Cj]=Lp(rE,[z7e]),[V7e,$7e]=H7e(rE),Aj=L.forwardRef((e,t)=>g(Hv.Provider,{scope:e.__scopeRovingFocusGroup,children:g(Hv.Slot,{scope:e.__scopeRovingFocusGroup,children:g(G7e,{...e,ref:t})})}));Aj.displayName=rE;var G7e=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=e,f=L.useRef(null),h=uo(t,f),m=Sj(s),[p=null,U]=gT({prop:o,defaultProp:a,onChange:l}),[b,y]=L.useState(!1),w=dl(c),v=xj(n),I=L.useRef(!1),[x,_]=L.useState(0);return L.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(H3,w),()=>T.removeEventListener(H3,w)},[w]),g(V7e,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:p,onItemFocus:L.useCallback(T=>U(T),[U]),onItemShiftTab:L.useCallback(()=>y(!0),[]),onFocusableItemAdd:L.useCallback(()=>_(T=>T+1),[]),onFocusableItemRemove:L.useCallback(()=>_(T=>T-1),[]),children:g(yr.div,{tabIndex:b||x===0?-1:0,"data-orientation":i,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:Li(e.onMouseDown,()=>{I.current=!0}),onFocus:Li(e.onFocus,T=>{const A=!I.current;if(T.target===T.currentTarget&&A&&!b){const C=new CustomEvent(H3,B7e);if(T.currentTarget.dispatchEvent(C),!C.defaultPrevented){const k=v().filter(B=>B.focusable),P=k.find(B=>B.active),D=k.find(B=>B.id===p),G=[P,D,...k].filter(Boolean).map(B=>B.ref.current);kj(G,u)}}I.current=!1}),onBlur:Li(e.onBlur,()=>y(!1))})})}),Mj="RovingFocusGroupItem",Rj=L.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=e,a=rT(),l=s||a,c=$7e(Mj,n),u=c.currentTabStopId===l,d=xj(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return L.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g(Hv.ItemSlot,{scope:n,id:l,focusable:i,active:r,children:g(yr.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:t,onMouseDown:Li(e.onMouseDown,m=>{i?c.onItemFocus(l):m.preventDefault()}),onFocus:Li(e.onFocus,()=>c.onItemFocus(l)),onKeyDown:Li(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const p=Y7e(m,c.orientation,c.dir);if(p!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let b=d().filter(y=>y.focusable).map(y=>y.ref.current);if(p==="last")b.reverse();else if(p==="prev"||p==="next"){p==="prev"&&b.reverse();const y=b.indexOf(m.currentTarget);b=c.loop?W7e(b,y+1):b.slice(y+1)}setTimeout(()=>kj(b))}})})})});Rj.displayName=Mj;var X7e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function j7e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Y7e(e,t,n){const i=j7e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return X7e[i]}function kj(e,t=!1){const n=document.activeElement;for(const i of e)if(i===n||(i.focus({preventScroll:t}),document.activeElement!==n))return}function W7e(e,t){return e.map((n,i)=>e[(t+i)%e.length])}var K7e=Aj,Z7e=Rj,WT="Tabs",[q7e,fAe]=Lp(WT,[Cj]),Lj=Cj(),[Q7e,KT]=q7e(WT),Dj=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=e,u=Sj(a),[d,f]=gT({prop:i,onChange:r,defaultProp:s});return g(Q7e,{scope:n,baseId:rT(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:g(yr.div,{dir:u,"data-orientation":o,...c,ref:t})})});Dj.displayName=WT;var Nj="TabsList",Oj=L.forwardRef((e,t)=>{const{__scopeTabs:n,loop:i=!0,...r}=e,s=KT(Nj,n),o=Lj(n);return g(K7e,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:g(yr.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:t})})});Oj.displayName=Nj;var Pj="TabsTrigger",Fj=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=e,o=KT(Pj,n),a=Lj(n),l=Hj(o.baseId,i),c=Vj(o.baseId,i),u=i===o.value;return g(Z7e,{asChild:!0,...a,focusable:!r,active:u,children:g(yr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:t,onMouseDown:Li(e.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:Li(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:Li(e.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});Fj.displayName=Pj;var Bj="TabsContent",zj=L.forwardRef((e,t)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=e,a=KT(Bj,n),l=Hj(a.baseId,i),c=Vj(a.baseId,i),u=i===a.value,d=L.useRef(u);return L.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g(Iy,{present:r||u,children:({present:f})=>g(yr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});zj.displayName=Bj;function Hj(e,t){return`${e}-trigger-${t}`}function Vj(e,t){return`${e}-content-${t}`}var $j=Dj,Gj=Oj,Xj=Fj,jj=zj;const Yj=({children:e,tab:t,onSelect:n,...i})=>g(Xj,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...i,children:e})});Yj.displayName="SidebarTabTrigger";const Wj=({children:e,...t})=>g(Gj,{className:"sidebar-triggers",...t,children:e});Wj.displayName="SidebarTabTriggers";const Kj=({name:e,tab:t,icon:n,title:i,children:r,onToggle:s,className:o,style:a})=>{var u;const l=xn(),c=ai();return N("label",{title:i,className:"sidebar-trigger__label-element",children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:d=>{var h;(h=document.querySelector(".layer-ui__wrapper"))==null||h.classList.remove("animate");const f=d.target.checked;l({openSidebar:f?{name:e,tab:t}:null,openMenu:null,openPopup:null}),s==null||s(f)},checked:((u=c.openSidebar)==null?void 0:u.name)===e,"aria-label":i,"aria-keyshortcuts":"0"}),N("div",{className:ce("sidebar-trigger",o),style:a,children:[n&&g("div",{children:n}),r&&g("div",{className:"sidebar-trigger__label",children:r})]})]})};Kj.displayName="SidebarTrigger";const Zj=({children:e,...t})=>{const n=ai(),i=xn();if(!n.openSidebar)return null;const{name:r}=n.openSidebar;return g($j,{className:"sidebar-tabs-root",value:n.openSidebar.tab,onValueChange:s=>i(o=>({...o,openSidebar:{...o.openSidebar,name:r,tab:s}})),...t,children:e})};Zj.displayName="SidebarTabs";const qj=({tab:e,children:t,...n})=>g(jj,{...n,value:e,"data-testid":e,children:t});qj.displayName="SidebarTab";const ZT=Wt(!1),Qj=L.forwardRef(({name:e,children:t,onDock:n,docked:i,className:r,...s},o)=>{const a=xn(),l=py(ZT);L.useLayoutEffect(()=>(l(!!i),()=>{l(!1)}),[l,i]);const c=L.useRef({});c.current.onCloseRequest=()=>{a({openSidebar:null})},c.current.onDock=h=>n==null?void 0:n(h),c.current=D2(c.current,{docked:i,shouldRenderDockButton:!!n&&i!=null});const u=L.useRef(null);L.useImperativeHandle(o,()=>u.current);const d=Nn(),f=L.useCallback(()=>{document.querySelector(".Dialog")||a({openSidebar:null})},[a]);return UT(u,L.useCallback(h=>{h.target.closest(".sidebar-trigger")||(!i||!d.canFitSidebar)&&f()},[f,i,d.canFitSidebar])),L.useEffect(()=>{const h=m=>{m.key===V.ESCAPE&&(!i||!d.canFitSidebar)&&f()};return document.addEventListener(te.KEYDOWN,h),()=>{document.removeEventListener(te.KEYDOWN,h)}},[f,i,d.canFitSidebar]),g(Zr,{...s,className:ce(gr.SIDEBAR,{"sidebar--docked":i},r),ref:u,children:g(Tj.Provider,{value:c.current,children:t})})});Qj.displayName="SidebarInner";const wr=Object.assign(L.forwardRef((e,t)=>{var l;const n=ai(),{onStateChange:i}=e,r=L.useRef(n.openSidebar);L.useEffect(()=>{var c,u,d,f,h;(!n.openSidebar&&((c=r==null?void 0:r.current)==null?void 0:c.name)===e.name||((u=n.openSidebar)==null?void 0:u.name)===e.name&&((d=r==null?void 0:r.current)==null?void 0:d.name)!==e.name||((f=r.current)==null?void 0:f.name)===e.name)&&n.openSidebar!==r.current&&(i==null||i(((h=n.openSidebar)==null?void 0:h.name)!==e.name?null:n.openSidebar)),r.current=n.openSidebar},[n.openSidebar,i,e.name]);const[s,o]=L.useState(!1);return L.useLayoutEffect(()=>(o(!0),()=>o(!1)),[]),s&&((l=n.openSidebar)==null?void 0:l.name)===e.name?L.createElement(Qj,{...e,ref:t,key:e.name}):null}),{Header:Ij,TabTriggers:Wj,TabTrigger:Yj,Tabs:Zj,Tab:qj,Trigger:Kj});wr.displayName="Sidebar";const Bp=(e,t)=>{const n=Wt(0),i=r=>{const{tunnelsJotai:{useAtom:s}}=er(),[,o]=s(n),a=L.useRef({preferHost:!1,counter:0});return L.useLayoutEffect(()=>{const l=a.current;return o(c=>{const u=c+1;return l.counter=u,u}),()=>{o(c=>{const u=c-1;return l.counter=u,u||(l.preferHost=!1),u})}},[o]),r.__fallback||(a.current.preferHost=!0),!a.current.counter&&r.__fallback&&a.current.preferHost||a.current.counter>1&&r.__fallback?null:g(t,{...r})};return i.displayName=e,i},Jj=Wt({active:!1});async function Vv({title:e,description:t,actionLabel:n,color:i}){return new Promise(r=>{Xr.set(Jj,{active:!0,onConfirm:()=>r(!0),onClose:()=>r(!1),onReject:()=>r(!1),title:e,description:t,actionLabel:n,color:i})})}const eY=function({onChange:e,value:t,choices:n,name:i}){return g("div",{className:"RadioGroup",children:n.map(r=>N("div",{className:ce("RadioGroup__choice",{active:r.value===t}),title:r.ariaLabel,children:[g("input",{name:i,type:"radio",checked:r.value===t,onChange:()=>e(r.value),"aria-label":r.ariaLabel}),r.label]},String(r.value)))})},tY=({value:e,shortcut:t,onChange:n,choices:i,children:r,name:s})=>{const o=Nn();return N(fe,{children:[N("div",{className:"dropdown-menu-item-base dropdown-menu-item-bare",children:[g("label",{className:"dropdown-menu-item__text",htmlFor:s,children:r}),g(eY,{name:s,value:e,onChange:n,choices:i})]}),t&&o.formFactor!=="phone"&&g("div",{className:"dropdown-menu-item__shortcut dropdown-menu-item__shortcut--orphaned",children:t})]})};tY.displayName="DropdownMenuItemContentRadio";const nY=()=>{const{t:e}=fn(),t=Nr(),n=sE();return t.isActionEnabled(Sv)?g(Lr,{icon:W_,onSelect:async()=>{(!n.length||await Vv({title:e("overwriteConfirm.modal.loadFromFile.title"),actionLabel:e("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:g(Cr,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:r=>g("strong",{children:r}),br:()=>g("br",{})})}))&&t.executeAction(Sv)},"data-testid":"load-button",shortcut:Zi("loadScene"),"aria-label":e("buttons.load"),children:e("buttons.load")}):null};nY.displayName="LoadScene";const iY=()=>{const{t:e}=fn(),t=Nr();return t.isActionEnabled(q6)?g(Lr,{shortcut:Zi("saveScene"),"data-testid":"save-button",onSelect:()=>t.executeAction(q6),icon:Sde,"aria-label":`${e("buttons.save")}`,children:`${e("buttons.save")}`}):null};iY.displayName="SaveToActiveFile";const rY=()=>{const e=xn(),{t}=fn();return g(Lr,{icon:LV,"data-testid":"image-export-button",onSelect:()=>e({openDialog:{name:"imageExport"}}),shortcut:Zi("imageExport"),"aria-label":t("buttons.exportImage"),children:t("buttons.exportImage")})};rY.displayName="SaveAsImage";const sY=e=>{const t=xn(),{t:n}=fn();return g(Lr,{icon:cv,"data-testid":"command-palette-button",onSelect:()=>{Je("command_palette","open","menu"),t({openDialog:{name:"commandPalette"}})},shortcut:Zi("commandPalette"),"aria-label":n("commandPalette.title"),className:e==null?void 0:e.className,children:n("commandPalette.title")})};sY.displayName="CommandPalette";const oY=e=>{const{t}=fn(),n=Nr();return g(Lr,{icon:bd,"data-testid":"search-menu-button",onSelect:()=>{n.executeAction(hj)},shortcut:Zi("searchMenu"),"aria-label":t("search.title"),className:e==null?void 0:e.className,children:t("search.title")})};oY.displayName="SearchMenu";const aY=()=>{const{t:e}=fn(),t=Nr();return g(Lr,{"data-testid":"help-menu-item",icon:j_,onSelect:()=>t.executeAction(zT),shortcut:"?","aria-label":e("helpDialog.title"),children:e("helpDialog.title")})};aY.displayName="Help";const lY=()=>{const{t:e}=fn(),t=py(nE);return Nr().isActionEnabled(A1)?g(Lr,{icon:$c,onSelect:()=>t("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":e("buttons.clearReset"),children:e("buttons.clearReset")}):null};lY.displayName="ClearCanvas";const cY=e=>{const{t}=fn(),n=ai(),i=Nr(),r=Zi("toggleTheme");return i.isActionEnabled(V6)?e!=null&&e.allowSystemTheme?g(tY,{name:"theme",value:e.theme,onChange:s=>e.onSelect(s),choices:[{value:ke.LIGHT,label:sv,ariaLabel:`${t("buttons.lightMode")} - ${r}`},{value:ke.DARK,label:rv,ariaLabel:`${t("buttons.darkMode")} - ${r}`},{value:"system",label:$fe,ariaLabel:t("buttons.systemMode")}],children:t("labels.theme")}):g(Lr,{onSelect:s=>{if(s.preventDefault(),e!=null&&e.onSelect)e.onSelect(n.theme===ke.DARK?ke.LIGHT:ke.DARK);else return i.executeAction(V6)},icon:n.theme===ke.DARK?sv:rv,"data-testid":"toggle-dark-mode",shortcut:r,"aria-label":n.theme===ke.DARK?t("buttons.lightMode"):t("buttons.darkMode"),children:n.theme===ke.DARK?t("buttons.lightMode"):t("buttons.darkMode")}):null};cY.displayName="ToggleTheme";const uY=()=>{const{t:e}=fn(),t=ai(),n=Nr(),i=zp();return t.viewModeEnabled||!i.UIOptions.canvasActions.changeViewBackgroundColor?null:N("div",{style:{marginTop:"0.5rem"},children:[g("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:e("labels.canvasBackground")}),g("div",{style:{padding:"0 0.625rem"},children:n.renderAction("changeViewBackgroundColor")})]})};uY.displayName="ChangeCanvasBackground";const dY=()=>{const{t:e}=fn(),t=xn();return g(Lr,{icon:Ey,onSelect:()=>{t({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":e("buttons.export"),children:e("buttons.export")})};dY.displayName="Export";const fY=()=>{const{t:e}=fn();return N(fe,{children:[g(O1,{icon:Y_,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),g(O1,{icon:kV,href:"https://x.com/excalidraw","aria-label":"X",children:e("labels.followUs")}),g(O1,{icon:RV,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:e("labels.discordChat")})]})};fY.displayName="Socials";const hY=({onSelect:e,isCollaborating:t})=>{const{t:n}=fn();return g(Lr,{"data-testid":"collab-button",icon:Z_,className:ce({"active-collab":t}),onSelect:e,children:n("labels.liveCollaboration")})};hY.displayName="LiveCollaborationTrigger";const J7e=Object.freeze(Object.defineProperty({__proto__:null,ChangeCanvasBackground:uY,ClearCanvas:lY,CommandPalette:sY,Export:dY,Help:aY,LiveCollaborationTrigger:hY,LoadScene:nY,SaveAsImage:rY,SaveToActiveFile:iY,SearchMenu:oY,Socials:fY,ToggleTheme:cY},Symbol.toStringTag,{value:"Module"})),ft=Object.assign(Bp("MainMenu",({children:e,onSelect:t})=>{var o;const{MainMenuTunnel:n}=er(),i=Nn(),r=ai(),s=xn();return g(n.In,{children:N(ze,{open:r.openMenu==="canvas",children:[g(ze.Trigger,{onToggle:()=>{s({openMenu:r.openMenu==="canvas"?null:"canvas",openPopup:null,openDialog:null})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:_de}),N(ze.Content,{onClickOutside:()=>s({openMenu:null}),onSelect:ry(t,()=>{s({openMenu:null})}),placement:"bottom",className:i.formFactor==="phone"?"main-menu-dropdown":"",children:[e,i.formFactor==="phone"&&r.collaborators.size>0&&N("fieldset",{className:"UserList-Wrapper",children:[g("legend",{children:R("labels.collaborators")}),g(wj,{mobile:!0,collaborators:r.collaborators,userToFollow:((o=r.userToFollow)==null?void 0:o.socketId)||null})]})]})]})})}),{Trigger:ze.Trigger,Item:ze.Item,ItemLink:ze.ItemLink,ItemCustom:ze.ItemCustom,Group:ze.Group,Separator:ze.Separator,DefaultItems:J7e}),ks=L.forwardRef(({children:e,icon:t,onClick:n,label:i,variant:r="filled",color:s="primary",size:o="medium",fullWidth:a,className:l,status:c},u)=>{const[d,f]=L.useState(!1),h=async p=>{const U=n==null?void 0:n(p);if(Ep(U)){const b=window.setTimeout(()=>{f(!0)},50);try{await U}catch(y){if(y instanceof jh)console.warn(y);else throw y}finally{clearTimeout(b),f(!1)}}},m=d?"loading":c;return s=m==="success"?"success":s,g("button",{className:ce("ExcButton",`ExcButton--color-${s}`,`ExcButton--variant-${r}`,`ExcButton--size-${o}`,`ExcButton--status-${m}`,{"ExcButton--fullWidth":a},l),onClick:h,type:"button","aria-label":i,ref:u,disabled:m==="loading"||m==="success",children:N("div",{className:"ExcButton__contents",children:[m==="loading"?g(ul,{className:"ExcButton__statusIcon"}):m==="success"&&g("div",{className:"ExcButton__statusIcon",children:Ife}),t&&g("div",{className:"ExcButton__icon","aria-hidden":!0,children:t}),r!=="icon"&&(e??i)]})})}),qT=({title:e,children:t,actionLabel:n,onClick:i})=>N("div",{className:"OverwriteConfirm__Actions__Action",children:[g("h4",{children:e}),g("div",{className:"OverwriteConfirm__Actions__Action__content",children:t}),g(ks,{variant:"outlined",color:"muted",label:n,size:"large",fullWidth:!0,onClick:i})]}),e4e=()=>{const{t:e}=fn(),t=Nr(),n=xn();return g(qT,{title:e("overwriteConfirm.action.exportToImage.title"),actionLabel:e("overwriteConfirm.action.exportToImage.button"),onClick:()=>{t.executeAction(TX,"ui",!0),n({openDialog:{name:"imageExport"}})},children:e("overwriteConfirm.action.exportToImage.description")})},t4e=()=>{const{t:e}=fn(),t=Nr();return g(qT,{title:e("overwriteConfirm.action.saveToDisk.title"),actionLabel:e("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{t.executeAction(IX,"ui")},children:e("overwriteConfirm.action.saveToDisk.description")})},AL=Object.assign(({children:e})=>g("div",{className:"OverwriteConfirm__Actions",children:e}),{ExportToImage:e4e,SaveToDisk:t4e}),Hu=Object.assign(Bp("OverwriteConfirmDialog",({children:e})=>{const{OverwriteConfirmDialogTunnel:t}=er(),[n,i]=dn(Jj);if(!n.active)return null;const r=()=>{n.onClose(),i(o=>({...o,active:!1}))},s=()=>{n.onConfirm(),i(o=>({...o,active:!1}))};return g(t.In,{children:g(ls,{onCloseRequest:r,title:!1,size:916,children:N("div",{className:"OverwriteConfirm",children:[g("h3",{children:n.title}),N("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${n.color}`,children:[g("div",{className:"OverwriteConfirm__Description__icon",children:Sfe}),g("div",{children:n.description}),g("div",{className:"OverwriteConfirm__Description__spacer"}),g(ks,{color:n.color,size:"large",label:n.actionLabel,onClick:s})]}),g(AL,{children:e})]})})})}),{Actions:AL,Action:qT});var n4e="Expected a function",ML=NaN,i4e="[object Symbol]",r4e=/^\s+|\s+$/g,s4e=/^[-+]0x[0-9a-f]+$/i,o4e=/^0b[01]+$/i,a4e=/^0o[0-7]+$/i,l4e=parseInt,c4e=typeof Na=="object"&&Na&&Na.Object===Object&&Na,u4e=typeof self=="object"&&self&&self.Object===Object&&self,d4e=c4e||u4e||Function("return this")(),f4e=Object.prototype,h4e=f4e.toString,g4e=Math.max,m4e=Math.min,V3=function(){return d4e.Date.now()};function p4e(e,t,n){var i,r,s,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(n4e);t=RL(t)||0,$v(n)&&(u=!!n.leading,d="maxWait"in n,s=d?g4e(RL(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(x){var _=i,T=r;return i=r=void 0,c=x,o=e.apply(T,_),o}function m(x){return c=x,a=setTimeout(b,t),u?h(x):o}function p(x){var _=x-l,T=x-c,A=t-_;return d?m4e(A,s-T):A}function U(x){var _=x-l,T=x-c;return l===void 0||_>=t||_<0||d&&T>=s}function b(){var x=V3();if(U(x))return y(x);a=setTimeout(b,p(x))}function y(x){return a=void 0,f&&i?h(x):(i=r=void 0,o)}function w(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function v(){return a===void 0?o:y(V3())}function I(){var x=V3(),_=U(x);if(i=arguments,r=this,l=x,_){if(a===void 0)return m(l);if(d)return a=setTimeout(b,t),h(l)}return a===void 0&&(a=setTimeout(b,t)),o}return I.cancel=w,I.flush=v,I}function $v(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function U4e(e){return!!e&&typeof e=="object"}function b4e(e){return typeof e=="symbol"||U4e(e)&&h4e.call(e)==i4e}function RL(e){if(typeof e=="number")return e;if(b4e(e))return ML;if($v(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=$v(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(r4e,"");var n=o4e.test(e);return n||a4e.test(e)?l4e(e.slice(2),n?2:8):s4e.test(e)?ML:+e}var y4e=p4e;const E4e=El(y4e),v4e=Wt(""),gY=Wt(null),w4e=350,_4e=()=>{const e=po(),t=xn(),n=L.useRef(null),[i,r]=dn(v4e),s=i.trim(),[o,a]=L.useState(!1),[l,c]=L.useState({nonce:null,items:[]}),u=L.useRef(null),d=L.useRef(void 0),[f,h]=dn(gY),m=e.scene.getNonDeletedElementsMap();L.useEffect(()=>{o||(s!==u.current||e.scene.getSceneNonce()!==d.current)&&(u.current=null,DL(s,e,(w,v)=>{c({nonce:Ps(),items:w}),u.current=s,d.current=e.scene.getSceneNonce(),t({searchMatches:w.length?{focusedId:null,matches:w.map(I=>({id:I.element.id,focus:!1,matchedLines:I.matchedLines}))}:null})}))},[o,s,m,e,t,h,d]);const p=()=>{l.items.length>0&&h(w=>w===null?0:(w+1)%l.items.length)},U=()=>{l.items.length>0&&h(w=>w===null?0:w-1<0?l.items.length-1:w-1)};L.useEffect(()=>{t(w=>{var I,x;return w.searchMatches?{searchMatches:{focusedId:f!==null&&((x=(I=w.searchMatches)==null?void 0:I.matches[f])==null?void 0:x.id)||null,matches:w.searchMatches.matches.map((_,T)=>T===f?{..._,focus:!0}:{..._,focus:!1})}}:null})},[f,t]),L.useEffect(()=>{var w,v,I,x;if(l.items.length>0&&f!==null){const _=l.items[f];if(_){const T=e.state.zoom.value,A=as({text:_.searchQuery,x:_.element.x+(((w=_.matchedLines[0])==null?void 0:w.offsetX)??0),y:_.element.y+(((v=_.matchedLines[0])==null?void 0:v.offsetY)??0),width:(I=_.matchedLines[0])==null?void 0:I.width,height:(x=_.matchedLines[0])==null?void 0:x.height,fontSize:we(_.element)?Ht.nameFontSize:_.element.fontSize,fontFamily:we(_.element)?tt.Assistant:_.element.fontFamily}),C=14,k=A.fontSize,P=k*T<C;if(!H2([A],e.canvas.width/window.devicePixelRatio,e.canvas.height/window.devicePixelRatio,{offsetLeft:e.state.offsetLeft,offsetTop:e.state.offsetTop,scrollX:e.state.scrollX,scrollY:e.state.scrollY,zoom:e.state.zoom},e.scene.getNonDeletedElementsMap(),e.getEditorUIOffsets())||P){let D;P?k>=C?D={fitToContent:!0}:D={fitToViewport:!0,maxZoom:Ya(C/k,1)}:D={fitToContent:!0},e.scrollToContent(A,{animate:!0,duration:300,...D,canvasOffsets:e.getEditorUIOffsets()})}}}},[f,l,e]),L.useEffect(()=>()=>{h(null),u.current=null,d.current=void 0,t({searchMatches:null}),a(!1)},[t,h]);const b=Cy({goToNextItem:p,goToPreviousItem:U,searchMatches:l});L.useEffect(()=>{const w=v=>{var I,x,_;if(v.key===V.ESCAPE&&!e.state.openDialog&&!e.state.openPopup){v.preventDefault(),v.stopPropagation(),t({openSidebar:null});return}if(v[V.CTRL_OR_CMD]&&v.key===V.F){if(v.preventDefault(),v.stopPropagation(),e.state.openDialog)return;(I=n.current)!=null&&I.matches(":focus")||(e.state.openDialog&&t({openDialog:null}),(x=n.current)==null||x.focus(),(_=n.current)==null||_.select())}v.target instanceof HTMLElement&&v.target.closest(".layer-ui__search")&&b.searchMatches.items.length&&(v.key===V.ENTER&&(v.stopPropagation(),b.goToNextItem()),v.key===V.ARROW_UP?(v.stopPropagation(),b.goToPreviousItem()):v.key===V.ARROW_DOWN&&(v.stopPropagation(),b.goToNextItem()))};return en(window,te.KEYDOWN,w,{capture:!0,passive:!1})},[t,b,e]);const y=`${l.items.length} ${l.items.length===1?R("search.singleResult"):R("search.multipleResults")}`;return N("div",{className:"layer-ui__search",children:[g("div",{className:"layer-ui__search-header",children:g(xd,{className:gr.SEARCH_MENU_INPUT_WRAPPER,value:i,ref:n,placeholder:R("search.placeholder"),icon:bd,onChange:w=>{r(w),a(!0);const v=w.trim();DL(v,e,(I,x)=>{c({nonce:Ps(),items:I}),h(x),u.current=v,d.current=e.scene.getSceneNonce(),t({searchMatches:I.length?{focusedId:null,matches:I.map(_=>({id:_.element.id,focus:!1,matchedLines:_.matchedLines}))}:null}),a(!1)})},selectOnRender:!0})}),N("div",{className:"layer-ui__search-count",children:[l.items.length>0&&N(fe,{children:[f!==null&&f>-1?N("div",{children:[f+1," / ",y]}):g("div",{children:y}),N("div",{className:"result-nav",children:[g(ml,{onSelect:()=>{p()},className:"result-nav-btn",children:$V}),g(ml,{onSelect:()=>{U()},className:"result-nav-btn",children:Wfe})]})]}),l.items.length===0&&s&&u.current&&g("div",{style:{margin:"1rem auto"},children:R("search.noMatch")})]}),g(S4e,{matches:l,onItemClick:h,focusIndex:f,searchQuery:s})]})},kL=e=>{const t=[e.preview.moreBefore?"...":"",e.preview.previewText.slice(0,e.preview.indexInSearchQuery),e.preview.previewText.slice(e.preview.indexInSearchQuery,e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.previewText.slice(e.preview.indexInSearchQuery+e.searchQuery.length),e.preview.moreAfter?"...":""];return g("div",{tabIndex:-1,className:ce("layer-ui__result-item",{active:e.highlighted}),onClick:e.onClick,ref:n=>{e.highlighted&&(n==null||n.scrollIntoView({behavior:"auto",block:"nearest"}))},children:g("div",{className:"preview-text",children:t.flatMap((n,i)=>g(L.Fragment,{children:i===2?g("b",{children:n}):n},i))})})},T4e=e=>{const t=L.useMemo(()=>e.matches.items.filter(i=>we(i.element)),[e.matches]),n=L.useMemo(()=>e.matches.items.filter(i=>ge(i.element)),[e.matches]);return N("div",{children:[t.length>0&&N("div",{className:"layer-ui__search-result-container",children:[N("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:ed}),g("div",{children:R("search.frames")})]}),t.map((i,r)=>g(kL,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r===e.focusIndex,onClick:()=>e.onItemClick(r)},i.element.id+i.index)),n.length>0&&g("div",{className:"layer-ui__divider"})]}),n.length>0&&N("div",{className:"layer-ui__search-result-container",children:[N("div",{className:"layer-ui__search-result-title",children:[g("div",{className:"title-icon",children:gh}),g("div",{children:R("search.texts")})]}),n.map((i,r)=>g(kL,{searchQuery:e.searchQuery,preview:i.preview,highlighted:r+t.length===e.focusIndex,onClick:()=>e.onItemClick(r+t.length)},i.element.id+i.index))]})]})},I4e=(e,t)=>e.matches.nonce===t.matches.nonce&&e.focusIndex===t.focusIndex,S4e=L.memo(T4e,I4e),LL=(e,t,n)=>{const s=e.slice(0,t),o=s.split(/\s+/),a=s.endsWith(" "),l=o.length-2-1-(a?0:1);let c=o.slice(l<=0?0:l).join(" ")+(a?" ":"");c=c.length>20?c.slice(-20):c;const d=e.slice(t+n.length),f=d.split(/\s+/),h=!d.startsWith(" "),m=h?6:5,p=(h?"":" ")+f.slice(0,m).join(" ");return{indexInSearchQuery:c.length,previewText:c+n+p,moreBefore:l>0,moreAfter:f.length>m}},x4e=(e,t)=>{const n=e.split(`
`),i=[];let r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=n[s+1];if(a){const l=t.indexOf(a,r);if(l>o.length+r){let c=l-(o.length+r);for(;c>0;)o+=" ",c--}}i.push(o),r=r+o.length}return i.join(`
`)},C4e=(e,t,n)=>{const r=x4e(e.text,e.originalText).split(`
`),s=[];let o=0,a=0;for(const d of r){const f=o,h=f+d.length-1;s.push({line:d,startIndex:f,endIndex:h,lineNumber:a}),o=h+1,a++}let l=n,c=e.originalText.slice(n,n+t.length);const u=[];for(const d of s){if(c==="")break;if(l>=d.startIndex&&l<=d.endIndex){const f=d.endIndex+1-l,h=d.line.slice(0,l-d.startIndex),m=c.slice(0,f);c=c.slice(f);const p=jn(h,pt(e),e.lineHeight);if(h===""&&(p.width=0),e.textAlign!=="left"&&d.line.length>0){const v=jn(d.line,pt(e),e.lineHeight),I=e.textAlign==="center"?(e.width-v.width)/2:e.width-v.width;p.width+=I}const{width:U,height:b}=jn(m,pt(e),e.lineHeight),y=p.width,w=d.lineNumber*p.height;u.push({offsetX:y,offsetY:w,width:U,height:b,showOnCanvas:!0}),l+=f}}return u},A4e=(e,t,n,i)=>{const r=e.name??__(e),s=r.slice(n,n+t.length),o=r.slice(0,n),a=pt({fontSize:Ht.nameFontSize,fontFamily:tt.Assistant}),l=Fc(tt.Assistant),c=jn(o,a,l);o===""&&(c.width=0);const u=jn(s,a,l),d=c.width,f=-c.height-Ht.strokeWidth,h=u.width;return[{offsetX:d,offsetY:f,width:h,height:u.height,showOnCanvas:d+h<=e.width*i}]},M4e=e=>e.replace(/[.*+?^${}()|[\]\\-]/g,"\\$&"),DL=E4e((e,t,n)=>{if(!e||e===""){n([],null);return}const i=t.scene.getNonDeletedElements(),r=i.filter(f=>ge(f)),s=i.filter(f=>we(f));r.sort((f,h)=>f.y-h.y),s.sort((f,h)=>f.y-h.y);const o=[],a=new RegExp(M4e(e),"gi");for(const f of r){let h=null;const m=f.originalText;for(;(h=a.exec(m))!==null;){const p=LL(m,h.index,e),U=C4e(f,e,h.index);U.length>0&&o.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const l=[];for(const f of s){let h=null;const m=f.name??__(f);for(;(h=a.exec(m))!==null;){const p=LL(m,h.index,e),U=A4e(f,e,h.index,t.state.zoom.value);U.length>0&&l.push({element:f,searchQuery:e,preview:p,index:h.index,matchedLines:U})}}const c=new Set(t.visibleElements.map(f=>f.id)),u=[...l,...o],d=u.findIndex(f=>c.has(f.element.id))??null;n(u,d)},w4e),mY=Bp("DefaultSidebarTrigger",e=>{const{DefaultSidebarTriggerTunnel:t}=er();return g(t.In,{children:g(wr.Trigger,{...e,className:"default-sidebar-trigger",name:As.name})})});mY.displayName="DefaultSidebarTrigger";const pY=({children:e})=>{const{DefaultSidebarTabTriggersTunnel:t}=er();return g(t.In,{children:e})};pY.displayName="DefaultTabTriggers";const s5=Object.assign(Bp("DefaultSidebar",({children:e,className:t,onDock:n,docked:i,...r})=>{var c;const s=ai(),o=xn(),{DefaultSidebarTabTriggersTunnel:a}=er(),l=((c=s.openSidebar)==null?void 0:c.tab)===Zu;return L.createElement(wr,{...r,name:"default",key:"default",className:ce("default-sidebar",t),docked:l||(i??s.defaultSidebarDockedPreference),onDock:l||n===!1||!n&&i!=null?void 0:ry(n,u=>{o({defaultSidebarDockedPreference:u})})},N(wr.Tabs,{children:[g(wr.Header,{children:N(wr.TabTriggers,{children:[g(wr.TabTrigger,{tab:Zu,children:bd}),g(wr.TabTrigger,{tab:Zb,children:CV}),g(a.Out,{})]})}),g(wr.Tab,{tab:Zb,children:g(B8e,{})}),g(wr.Tab,{tab:Zu,children:g(_4e,{})}),e]}))}),{Trigger:mY,TabTriggers:pY}),UY=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:i})=>{const r=L.useRef(null),s=L.useRef(i);return s.current=i,L.useEffect(()=>{if(!s.current)return;const o=r.current;if(o){const a=l=>{var c;l[V.CTRL_OR_CMD]&&l.key===V.ENTER&&(l.preventDefault(),(c=s.current)==null||c.call(s))};return o.focus(),o.addEventListener(te.KEYDOWN,a),()=>{o.removeEventListener(te.KEYDOWN,a)}}},[]),g("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,ref:r})},R4e=({error:e})=>N("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",g("p",{children:e})]}),bY=({error:e,canvasRef:t,loaded:n})=>N("div",{className:"ttd-dialog-output-wrapper",children:[e&&g(R4e,{error:e.message}),n?g("div",{ref:t,style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container"}):g(ul,{size:"2rem"})]}),o5=({label:e,children:t,panelAction:n,panelActionDisabled:i=!1,onTextSubmitInProgess:r,renderTopRight:s,renderSubmitShortcut:o,renderBottomRight:a})=>N("div",{className:"ttd-dialog-panel",children:[N("div",{className:"ttd-dialog-panel__header",children:[g("label",{children:e}),s==null?void 0:s()]}),t,N("div",{className:ce("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[N(ml,{className:"ttd-dialog-panel-button",onSelect:n?n.action:()=>{},disabled:i||r,children:[N("div",{className:ce({invisible:r}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&g("span",{children:n.icon})]}),r&&g(ul,{})]}),!i&&!r&&(o==null?void 0:o()),a==null?void 0:a()]})]}),yY=({children:e})=>g("div",{className:"ttd-dialog-panels",children:e}),EY=()=>N("div",{className:"ttd-dialog-submit-shortcut",children:[g("div",{className:"ttd-dialog-submit-shortcut__key",children:J("CtrlOrCmd")}),g("div",{className:"ttd-dialog-submit-shortcut__key",children:J("Enter")})]}),k4e=({canvasRef:e,setError:t})=>{const n=e.current;if(!n)return;const i=n.parentElement;i&&(i.style.background="",t(null),n.replaceChildren())},vY=async({canvasRef:e,mermaidToExcalidrawLib:t,mermaidDefinition:n,setError:i,data:r})=>{const s=e.current,o=s==null?void 0:s.parentElement;if(!(!s||!o)){if(!n){k4e({canvasRef:e,setError:i});return}try{const a=await t.api;let l;try{l=await a.parseMermaidToExcalidraw(n)}catch{l=await a.parseMermaidToExcalidraw(n.replace(/"/g,"'"))}const{elements:c,files:u}=l;i(null),r.current={elements:Fv(c,{regenerateIds:!0}),files:u};const d=await Qy({elements:r.current.elements,files:r.current.files,exportPadding:bg,maxWidthOrHeight:Math.max(o.offsetWidth,o.offsetHeight)*window.devicePixelRatio});try{await D0(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(R("canvasError.canvasTooBig")):f}o.style.background="var(--default-bg-color)",s.replaceChildren(d)}catch(a){throw o.style.background="var(--default-bg-color)",n&&i(a),a}}},QT=e=>{td.set(m1.MERMAID_TO_EXCALIDRAW,e)},wY=({app:e,data:t,text:n,shouldSaveMermaidDataToStorage:i})=>{const{elements:r,files:s}=t.current;r.length&&(e.addElementsFromPasteOrLibrary({elements:r,files:s,position:"center",fitToContent:!0}),e.setOpenDialog(null),i&&n&&QT(n))},L4e=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,NL=sl(QT,300),D4e=({mermaidToExcalidrawLib:e})=>{const[t,n]=L.useState(()=>td.get(m1.MERMAID_TO_EXCALIDRAW)||L4e),i=L.useDeferredValue(t.trim()),[r,s]=L.useState(null),o=L.useRef(null),a=L.useRef({elements:[],files:null}),l=po();L.useEffect(()=>{vY({canvasRef:o,data:a,mermaidToExcalidrawLib:e,setError:s,mermaidDefinition:i}).catch(u=>{}),NL(i)},[i,e]),L.useEffect(()=>()=>{NL.flush()},[]);const c=()=>{wY({app:l,data:a,text:t,shouldSaveMermaidDataToStorage:!0})};return N(fe,{children:[g("div",{className:"ttd-dialog-desc",children:g(Cr,{i18nKey:"mermaid.description",flowchartLink:u=>g("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:u}),sequenceLink:u=>g("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:u}),classLink:u=>g("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:u})})}),N(yY,{children:[g(o5,{label:R("mermaid.syntax"),children:g(UY,{input:t,placeholder:"Write Mermaid diagram defintion here...",onChange:u=>n(u.target.value),onKeyboardSubmit:()=>{c()}})}),g(o5,{label:R("mermaid.preview"),panelAction:{action:()=>{c()},label:R("mermaid.button"),icon:X2},renderSubmitShortcut:()=>g(EY,{}),children:g(bY,{canvasRef:o,loaded:e.loaded,error:r})})]})]})},_Y=e=>{const t=xn(),n=L.useRef(null),i=L.useRef(0);return g($j,{ref:n,className:"ttd-dialog-tabs-root",value:e.tab,onValueChange:r=>{var o;if(!r)return;const s=(o=n.current)==null?void 0:o.closest(".Modal__content");if(s){const a=s.offsetHeight||0;a>i.current&&(i.current=a,s.style.minHeight=`min(${i.current}px, 100%)`)}e.dialog==="ttd"&&VB(["text-to-diagram","mermaid"],r)&&t({openDialog:{name:e.dialog,tab:r}})},children:e.children})};_Y.displayName="TTDDialogTabs";const TY=({children:e,...t})=>g(Gj,{className:"ttd-dialog-triggers",...t,children:e});TY.displayName="TTDDialogTabTriggers";const Gv=({children:e,tab:t,onSelect:n,...i})=>g(Xj,{value:t,asChild:!0,onSelect:n,children:g("button",{type:"button",className:"ttd-dialog-tab-trigger",...i,children:e})});Gv.displayName="TTDDialogTabTrigger";const Xv=({tab:e,children:t,...n})=>g(jj,{...n,value:e,children:t});Xv.displayName="TTDDialogTab";const $3=3,hf=1e3,N4e=Wt(null),O4e=Wt(null),IY=e=>{var n;const t=ai();return((n=t.openDialog)==null?void 0:n.name)!=="ttd"?null:g(P4e,{...e,tab:t.openDialog.tab})},P4e=Bp("TTDDialogBase",({tab:e,...t})=>{const n=po(),i=xn(),r=L.useRef(null),[s,o]=dn(O4e),[a,l]=L.useState((s==null?void 0:s.prompt)??""),c=a.trim(),u=x=>{l(x.target.value),o(_=>({generatedResponse:(_==null?void 0:_.generatedResponse)??null,prompt:x.target.value}))},[d,f]=L.useState(!1),[h,m]=dn(N4e),p=async()=>{if(c.length>hf||c.length<$3||d||(h==null?void 0:h.rateLimitRemaining)===0||"__fallback"in t){c.length<$3&&I(new Error(`Prompt is too short (min ${$3} characters)`)),c.length>hf&&I(new Error(`Prompt is too long (max ${hf} characters)`));return}try{f(!0),Je("ai","generate","ttd");const{generatedResponse:x,error:_,rateLimit:T,rateLimitRemaining:A}=await t.onTextSubmit(c);if(typeof x=="string"&&o(C=>({generatedResponse:x,prompt:(C==null?void 0:C.prompt)??null})),b1(T)&&b1(A)&&m({rateLimit:T,rateLimitRemaining:A}),_){I(_);return}if(!x){I(new Error("Generation failed"));return}try{await vY({canvasRef:r,data:w,mermaidToExcalidrawLib:b,setError:I,mermaidDefinition:x}),Je("ai","mermaid parse success","ttd")}catch(C){console.info(`%cTTD mermaid render errror: ${C.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${C.message}`,"color: yellow"),Je("ai","mermaid parse failed","ttd"),I(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(x){let _=x.message;(!_||_==="Failed to fetch")&&(_="Request failed"),I(new Error(_))}finally{f(!1)}},U=L.useRef(p);U.current=p;const[b,y]=L.useState({loaded:!1,api:Ee(()=>import("./index-C4ze4SDF.js").then(x=>x.b6),__vite__mapDeps([]),import.meta.url)});L.useEffect(()=>{(async()=>{await b.api,y(_=>({..._,loaded:!0}))})()},[b.api]);const w=L.useRef({elements:[],files:null}),[v,I]=L.useState(null);return g(ls,{className:"ttd-dialog",onCloseRequest:()=>{n.setOpenDialog(null)},size:1200,title:!1,...t,autofocus:!1,children:N(_Y,{dialog:"ttd",tab:e,children:["__fallback"in t&&t.__fallback?g("p",{className:"dialog-mermaid-title",children:R("mermaid.title")}):N(TY,{children:[g(Gv,{tab:"text-to-diagram",children:N("div",{style:{display:"flex",alignItems:"center"},children:[R("labels.textToDiagram"),g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"var(--color-promo)",color:"var(--color-surface-lowest)"},children:"AI Beta"})]})}),g(Gv,{tab:"mermaid",children:"Mermaid"})]}),g(Xv,{className:"ttd-dialog-content",tab:"mermaid",children:g(D4e,{mermaidToExcalidrawLib:b})}),!("__fallback"in t)&&N(Xv,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[g("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),N(yY,{children:[g(o5,{label:R("labels.prompt"),panelAction:{action:p,label:"Generate",icon:X2},onTextSubmitInProgess:d,panelActionDisabled:c.length>hf||(h==null?void 0:h.rateLimitRemaining)===0,renderTopRight:()=>h?N("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:h.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[h.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>g(EY,{}),renderBottomRight:()=>{if(typeof(s==null?void 0:s.generatedResponse)=="string")return N("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof(s==null?void 0:s.generatedResponse)=="string"&&(QT(s.generatedResponse),i({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",g(Ly,{icon:X2})]});const x=c.length/hf;return x>.8?N("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:x>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",hf]}):null},children:g(UY,{onChange:u,input:a,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{U.current()}})}),g(o5,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),wY({app:n,data:w})},label:"Insert",icon:X2},children:g(bY,{canvasRef:r,error:v,loaded:b.loaded})})]})]})]})})}),F4e=.01,jv=10,pl=(e,t)=>!(t==="angle"&&we(e)),Xi=(e,t)=>{const n=e+t/2;return n-n%t},a5=(e,t,n)=>Object.keys(e).map(i=>({original:(n??t).get(i),latest:t.get(i)})).filter(i=>i.original!==void 0&&i.latest!==void 0),H0=(e,t,n,i,r,s=!0)=>{const o=i.getNonDeletedElementsMap(),a=o.get(n.id);if(!a)return;const[l,c]=[n.x+n.width/2,n.y+n.height/2],[u,d]=q(S(n.x,n.y),S(l,c),n.angle),f=e-u,h=t-d,[m,p]=q(S(e,t),S(l+f,c+h),-n.angle);i.mutateElement(a,{x:m,y:p},{informMutation:s,isDragging:!1}),d0(a,i);const U=Le(n,r);if(U){const b=o.get(U.id);b&&i.mutateElement(b,{x:U.x+f,y:U.y+h},{informMutation:s,isDragging:!1})}if(we(n)){const b=is(r,n.id);b.forEach(y=>{const w=o.get(y.id);if(!w)return;const[v,I]=[y.x+y.width/2,y.y+y.height/2],[x,_]=q(S(y.x,y.y),S(v,I),y.angle),T=Math.round(x+f),A=Math.round(_+h),[C,k]=q(S(T,A),S(v+f,I+h),-y.angle);i.mutateElement(w,{x:C,y:k},{informMutation:s,isDragging:!1}),d0(w,i,{simultaneouslyUpdated:b})})}},JT=(e,t)=>{const i=vc(t).map(r=>At(e,r).reduce((s,o)=>(s[o.id]=!0,s),{}));return e.filter(r=>!$h(r)).forEach(r=>{i.push({[r.id]:!0})}),i},Sl=({label:e,icon:t,dragInputCallback:n,value:i,elements:r,editable:s=!0,shouldKeepAspectRatio:o,property:a,scene:l,appState:c,sensitivity:u=1,dragFinishedCallback:d})=>{const f=po(),h=xn(),m=L.useRef(null),p=L.useRef(null),[U,b]=L.useState(i.toString()),y=L.useRef(null);y.current||(y.current={originalAppState:Ka(c),originalElements:r,lastUpdatedValue:U,updatePending:!1}),L.useEffect(()=>{const I=i.toString();b(I),y.current.lastUpdatedValue=I},[i]);const w=(I,x,_)=>{if(!y.current.updatePending)return!1;y.current.updatePending=!1;const T=Number(I);if(isNaN(T)){b(i.toString());return}const A=Number(T.toFixed(2)),C=Number(i);(isNaN(C)||Math.abs(A-C)>=F4e)&&(y.current.lastUpdatedValue=I,n({accumulatedChange:0,instantChange:0,originalElements:x,originalElementsMap:f.scene.getNonDeletedElementsMap(),shouldKeepAspectRatio:o,shouldChangeByStepSize:!1,scene:l,nextValue:A,property:a,originalAppState:_,setInputValue:k=>b(String(k)),app:f,setAppState:h}),f.syncActionResult({captureUpdate:K.IMMEDIATELY}))},v=L.useRef({});return v.current.handleInputValue=w,L.useEffect(()=>{const I=m.current,x=v.current;return()=>{var T;const _=I==null?void 0:I.value;_&&((T=x.handleInputValue)==null||T.call(x,_,y.current.originalElements,y.current.originalAppState)),window.removeEventListener(te.POINTER_MOVE,x.onPointerMove,!1),window.removeEventListener(te.POINTER_UP,x.onPointerUp,!1)}},[s]),s?N("div",{className:ce("drag-input-container",!s&&"disabled"),"data-testid":e,children:[g("div",{className:"drag-input-label",ref:p,onPointerDown:I=>{if(m.current&&s){document.body.classList.add("excalidraw-cursor-resize"),Number(m.current.value);let x=null,_=f.scene.getNonDeletedElements().reduce((j,G)=>(j.set(G.id,Vc(G)),j),new Map),T=r.map(j=>_.get(j.id));const A=Ka(c);let C=0,k=0;const P=j=>{if(x&&_!==null&&T!==null){const G=j.clientX-x.x;G!==0&&(k+=G,Math.abs(k)>=u&&(k=Math.sign(k)*Math.floor(Math.abs(k)/u),C+=k,n({accumulatedChange:C,instantChange:k,originalElements:T,originalElementsMap:_,shouldKeepAspectRatio:o,shouldChangeByStepSize:j.shiftKey,property:a,scene:l,originalAppState:A,setInputValue:B=>b(String(B)),app:f,setAppState:h}),k=0))}x={x:j.clientX,y:j.clientY}},D=()=>{window.removeEventListener(te.POINTER_MOVE,P,!1),f.syncActionResult({captureUpdate:K.IMMEDIATELY}),d==null||d({app:f,setAppState:h,originalElements:T,originalAppState:A}),x=null,C=0,k=0,T=null,_=null,document.body.classList.remove("excalidraw-cursor-resize"),window.removeEventListener(te.POINTER_UP,D,!1)};v.current.onPointerMove=P,v.current.onPointerUp=D,window.addEventListener(te.POINTER_MOVE,P,!1),window.addEventListener(te.POINTER_UP,D,!1)}},onPointerEnter:()=>{p.current&&(p.current.style.cursor="ew-resize")},children:t?g(Ly,{icon:t}):e}),g("input",{className:"drag-input",autoComplete:"off",spellCheck:"false",onKeyDown:I=>{if(s){const x=I.target;x instanceof HTMLInputElement&&I.key===V.ENTER&&(w(x.value,r,c),f.focusContainer())}},ref:m,value:U,onChange:I=>{y.current.updatePending=!0,b(I.target.value)},onFocus:I=>{I.target.select(),y.current.originalElements=r,y.current.originalAppState=Ka(c)},onBlur:I=>{U?s&&w(I.target.value,y.current.originalElements,y.current.originalAppState):b(i.toString())},disabled:!s})]}):null},B4e=15,z4e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o&&!pe(o)){const a=s.get(o.id);if(!a)return;if(i!==void 0){const h=qu(i);r.mutateElement(a,{angle:h}),d0(a,r);const m=Le(a,s);m&&!Ce(a)&&r.mutateElement(m,{angle:h});return}const l=Math.round(ty(o.angle)*100)/100,c=Math.round(e);let u=(l+c)%360;n&&(u=Xi(u,B4e)),u=u<0?u+360:u;const d=qu(u);r.mutateElement(a,{angle:d}),d0(a,r);const f=Le(a,s);f&&!Ce(a)&&r.mutateElement(f,{angle:d})}},H4e=({element:e,scene:t,appState:n,property:i})=>g(Sl,{label:"A",icon:FV,value:Math.round(ty(e.angle)%360*100)/100,elements:[e],dragInputCallback:z4e,editable:pl(e,"angle"),scene:t,appState:n,property:i}),OL=5,V4e=({property:e,scene:t,appState:n,setAppState:i})=>g(Sl,{label:"Grid step",sensitivity:8,elements:[],dragInputCallback:({nextValue:r,instantChange:s,shouldChangeByStepSize:o,setInputValue:a})=>{i(l=>{let c;return r?c=r:s&&(c=o?Xi(l.gridStep+OL*Math.sign(s),OL):l.gridStep+s),c?(c=SV(c),a(c),{gridStep:c}):(a(l.gridStep),null)})},scene:t,value:n.gridStep,property:e,appState:n}),PL=10,$4e=e=>e.type==="image",G4e=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldKeepAspectRatio:i,shouldChangeByStepSize:r,nextValue:s,property:o,originalAppState:a,instantChange:l,scene:c,app:u,setAppState:d})=>{const f=c.getNonDeletedElementsMap(),h=t[0],m=f.get(h.id);if(h&&m){const p=i||$4e(h),U=h.width/h.height;if(a.croppingElementId===h.id){const b=f.get(h.id);if(!b||!Et(b)||!b.crop)return;const y=b.crop;let w={...y};const v=b.scale[0]===-1,I=b.scale[1]===-1,{width:x,height:_}=ll(b),T=y.naturalWidth/x,A=y.naturalHeight/_,C=v?y.width+y.x:y.naturalWidth-y.x,k=I?y.height+y.y:y.naturalHeight-y.y,P=ci*T,D=ci*A;if(s!==void 0){if(o==="width"){const $=s*T,X=Ze($,P,C);w={...w,width:X,x:v?y.x+y.width-X:y.x}}else if(o==="height"){const $=s*A,X=Ze($,D,k);w={...w,height:X,y:I?y.y+y.height-X:y.y}}c.mutateElement(b,{crop:w,width:w.width/(y.naturalWidth/x),height:w.height/(y.naturalHeight/_)});return}const j=o==="width"?l:0,G=o==="height"?l:0,B=Ze(y.width+j,P,C),H=Ze(y.height+G,P,k);w={...y,x:v?y.x+y.width-B:y.x,y:I?y.y+y.height-H:y.y,width:B,height:H},c.mutateElement(b,{crop:w,width:w.width/(y.naturalWidth/x),height:w.height/(y.naturalHeight/_)});return}if(s!==void 0){const b=Math.max(o==="width"?s:p?s*U:h.width,ms),y=Math.max(o==="height"?s:p?s/U:h.height,ms);if(U0(b,y,m,h,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:p}),we(m)){const w=Go(c.getElementsIncludingDeleted(),m,a,c.getNonDeletedElementsMap()),v=wg(c.getElementsIncludingDeleted(),w,m,u);c.replaceAllElements(v)}return}{const b=o==="width"?e:0,y=o==="height"?e:0;let w=Math.max(0,h.width+b);o==="width"&&(r?w=Xi(w,PL):w=Math.round(w));let v=Math.max(0,h.height+y);if(o==="height"&&(r?v=Xi(v,PL):v=Math.round(v)),p&&(o==="width"?v=Math.round(w/U*100)/100:w=Math.round(v*U*100)/100),v=Math.max(ms,v),w=Math.max(ms,w),U0(w,v,m,h,n,c,o==="width"?"e":"s",{shouldMaintainAspectRatio:p}),we(m)){const I=Go(c.getElementsIncludingDeleted(),m,a,c.getNonDeletedElementsMap());d({elementsToHighlight:I})}}}},X4e=({setAppState:e,app:t,originalElements:n,originalAppState:i})=>{const r=t.scene.getNonDeletedElementsMap(),s=n==null?void 0:n[0],o=s&&r.get(s.id);if(o&&we(o)){const a=Go(t.scene.getElementsIncludingDeleted(),o,i,t.scene.getNonDeletedElementsMap()),l=wg(t.scene.getElementsIncludingDeleted(),a,o,t);t.scene.replaceAllElements(l),e({elementsToHighlight:null})}},FL=({property:e,element:t,scene:n,appState:i})=>{let r=Ya(e==="width"?t.width:t.height,2);if(i.croppingElementId&&i.croppingElementId===t.id&&Et(t)&&t.crop){const{width:s,height:o}=ll(t);if(e==="width"){const a=s/t.crop.naturalWidth;r=Ya(t.crop.width*a,2)}if(e==="height"){const a=o/t.crop.naturalHeight;r=Ya(t.crop.height*a,2)}}return g(Sl,{label:e==="width"?"W":"H",elements:[t],dragInputCallback:G4e,value:r,editable:pl(t,e),scene:n,appState:i,property:e,dragFinishedCallback:X4e})},BL=4,j4e=4,Y4e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t[0];if(o){const a=s.get(o.id);if(!a||!ge(a))return;let l;if(i!==void 0)l=Math.max(Math.round(i),BL);else if(o.type==="text"){const c=Math.round(o.fontSize),u=Math.round(e);l=Math.max(c+u,BL),n&&(l=Xi(l,j4e))}l&&(r.mutateElement(a,{fontSize:l}),Qi(a,r.getContainerElement(a),r))}},W4e=({element:e,scene:t,appState:n,property:i})=>{const r=ge(e)?e:Di(e)?Le(e,t.getNonDeletedElementsMap()):null;return r?g(Sl,{label:"F",value:Math.round(r.fontSize*10)/10,elements:[r],dragInputCallback:Y4e,icon:vy,appState:n,scene:t,property:i}):null},K4e=15,Z4e=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,property:r,scene:s})=>{const o=s.getNonDeletedElementsMap(),a=t.map(c=>o.get(c.id)).filter(c=>c&&!$h(c)&&pl(c,r)),l=t.filter(c=>!$h(c)&&pl(c,r));if(i!==void 0){const c=qu(i);for(const u of a){if(!u)continue;s.mutateElement(u,{angle:c});const d=Le(u,o);d&&!Ce(u)&&s.mutateElement(d,{angle:c})}s.triggerUpdate();return}for(let c=0;c<a.length;c++){const u=a[c];if(!u)continue;const d=l[c],f=Math.round(ty(d.angle)*100)/100,h=Math.round(e);let m=(f+h)%360;n&&(m=Xi(m,K4e)),m=m<0?m+360:m;const p=qu(m);s.mutateElement(u,{angle:p});const U=Le(u,o);U&&!Ce(u)&&s.mutateElement(U,{angle:p})}s.triggerUpdate()},q4e=({elements:e,scene:t,appState:n,property:i})=>{const r=e.filter(l=>!$h(l)&&pl(l,"angle")),s=r.map(l=>Math.round(ty(l.angle)%360*100)/100),o=new Set(s).size===1?s[0]:"Mixed",a=r.some(l=>pl(l,"angle"));return g(Sl,{label:"A",icon:FV,value:o,elements:e,dragInputCallback:Z4e,editable:a,appState:n,scene:t,property:i})},gf=10,Q4e=(e,t,n,i)=>{const r=i.x-e,s=i.y-t,o=i.width*n,a=i.height*n,l=e+r*n,c=t+s*n;return{width:o,height:a,x:l,y:c,...L_(i,o,a,!1),...ge(i)?{fontSize:i.fontSize*n}:{}}},J4e=(e,t,n,i,r,s,o,a)=>{const l=a.getNonDeletedElementsMap(),c=Q4e(e,t,i,s);a.mutateElement(r,c);const u=Le(s,o);if(u){const d=u.fontSize*i;fr(r,a,{newSize:{width:c.width,height:c.height}});const f=l.get(u.id);f&&ge(f)&&(a.mutateElement(f,{fontSize:d}),Ip(r,a,n==="width"?"e":"s",!0))}},zL=(e,t,n,i,r,s,o,a,l,c)=>{s==="width"?t=Math.round(e/i*100)/100:e=Math.round(t*i*100)/100;const u=t/n;for(let d=0;d<a.length;d++){const f=a[d],h=o[d];J4e(r[0],r[1],s,u,h,f,l,c)}},eve=({accumulatedChange:e,originalElements:t,originalElementsMap:n,originalAppState:i,shouldChangeByStepSize:r,nextValue:s,scene:o,property:a,setAppState:l,app:c})=>{const u=o.getNonDeletedElementsMap(),d=JT(t,i);if(s!==void 0){for(const p of d){const U=a5(p,u,n);if(U.length>1){const b=U.map(P=>P.latest),y=U.map(P=>P.original),[w,v,I,x]=nt(y),_=I-w,T=x-v,A=_/T,C=Math.max(ms,a==="width"?Math.max(0,s):_),k=Math.max(ms,a==="height"?Math.max(0,s):T);zL(C,k,T,A,S(w,v),a,b,y,n,o)}else{const[b]=U,y=b==null?void 0:b.latest,w=b==null?void 0:b.original;if(y&&w&&pl(y,a)){let v=a==="width"?Math.max(0,s):y.width;a==="width"&&(r?v=Xi(v,gf):v=Math.round(v));let I=a==="height"?Math.max(0,s):y.height;if(a==="height"&&(r?I=Xi(I,gf):I=Math.round(I)),v=Math.max(ms,v),I=Math.max(ms,I),U0(v,I,y,w,n,o,a==="width"?"e":"s",{shouldInformMutation:!1}),we(y)){const x=Go(o.getElementsIncludingDeleted(),y,i,o.getNonDeletedElementsMap()),_=wg(o.getElementsIncludingDeleted(),x,y,c);o.replaceAllElements(_)}}}}o.triggerUpdate();return}const f=a==="width"?e:0,h=a==="height"?e:0,m=[];for(const p of d){const U=a5(p,u,n);if(U.length>1){const b=U.map(P=>P.latest),y=U.map(P=>P.original),[w,v,I,x]=nt(y),_=I-w,T=x-v,A=_/T;let C=Math.max(0,_+f);a==="width"&&(r?C=Xi(C,gf):C=Math.round(C));let k=Math.max(0,T+h);a==="height"&&(r?k=Xi(k,gf):k=Math.round(k)),C=Math.max(ms,C),k=Math.max(ms,k),zL(C,k,T,A,S(w,v),a,b,y,n,o)}else{const[b]=U,y=b==null?void 0:b.latest,w=b==null?void 0:b.original;if(y&&w&&pl(y,a)){let v=Math.max(0,w.width+f);a==="width"&&(r?v=Xi(v,gf):v=Math.round(v));let I=Math.max(0,w.height+h);if(a==="height"&&(r?I=Xi(I,gf):I=Math.round(I)),v=Math.max(ms,v),I=Math.max(ms,I),U0(v,I,y,w,n,o,a==="width"?"e":"s",{shouldInformMutation:!1}),we(y)){const x=Go(o.getElementsIncludingDeleted(),y,i,o.getNonDeletedElementsMap());m.push(...x)}}}}l({elementsToHighlight:m}),o.triggerUpdate()},tve=({setAppState:e,app:t,originalElements:n,originalAppState:i})=>{const r=t.scene.getNonDeletedElementsMap(),s=n==null?void 0:n[0],o=s&&r.get(s.id);if(o&&we(o)){const a=Go(t.scene.getElementsIncludingDeleted(),o,i,t.scene.getNonDeletedElementsMap()),l=wg(t.scene.getElementsIncludingDeleted(),a,o,t);t.scene.replaceAllElements(l),e({elementsToHighlight:null})}},HL=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=L.useMemo(()=>i.map(c=>{const u=a5(c,n);if(u.length>1){const[f,h,m,p]=nt(u.map(U=>U.latest));return Math.round((e==="width"?m-f:p-h)*100)/100}const[d]=u;return Math.round((e==="width"?d.latest.width:d.latest.height)*100)/100}),[n,i,e]),a=new Set(o).size===1?Math.round(o[0]*100)/100:"Mixed",l=o.length>0;return g(Sl,{label:e==="width"?"W":"H",elements:t,dragInputCallback:eve,value:a,editable:l,appState:s,property:e,scene:r,dragFinishedCallback:tve})},VL=4,nve=4,ive=(e,t)=>e.reduce((n,i)=>{if(!i||$h(i))return n;if(ge(i))return n.push(i),n;if(Di(i)){const r=Le(i,t);if(r)return n.push(r),n}return n},[]),rve=({accumulatedChange:e,originalElements:t,shouldChangeByStepSize:n,nextValue:i,scene:r})=>{const s=r.getNonDeletedElementsMap(),o=t.map(l=>s.get(l.id));let a;if(i){a=Math.max(Math.round(i),VL);for(const l of o)r.mutateElement(l,{fontSize:a}),Qi(l,r.getContainerElement(l),r);r.triggerUpdate()}else{const l=t;for(let c=0;c<o.length;c++){const u=o[c],d=l[c],f=Math.round(d.fontSize),h=Math.round(e);let m=Math.max(f+h,VL);n&&(m=Xi(m,nve)),r.mutateElement(u,{fontSize:m}),Qi(u,r.getContainerElement(u),r)}r.triggerUpdate()}},sve=({elements:e,scene:t,appState:n,property:i,elementsMap:r})=>{const s=ive(e,r);if(!s.length)return null;const o=s.map(c=>Math.round(c.fontSize*10)/10),a=new Set(o).size===1?o[0]:"Mixed",l=o.length>0;return g(Sl,{label:"F",icon:vy,elements:s,dragInputCallback:rve,value:a,editable:l,scene:t,property:i,appState:n})},ove=(e,t,n,i,r,s)=>{for(let o=0;o<i.length;o++){const a=i[o],[l,c]=[a.x+a.width/2,a.y+a.height/2],[u,d]=q(S(a.x,a.y),S(l,c),a.angle),f=e==="x"?Math.round(u+t):u,h=e==="y"?Math.round(d+n):d;H0(f,h,a,s,r,!1)}},ave=(e,t,n,i,r)=>{const s=r.getNonDeletedElementsMap(),[o,a,,]=nt(n),l=e-o,c=t-a;for(let u=0;u<n.length;u++){const d=n[u],f=s.get(d.id);if(f&&(!ge(f)||!f.containerId)){const[h,m]=[f.x+f.width/2,f.y+f.height/2],[p,U]=q(S(f.x,f.y),S(h,m),f.angle);H0(p+l,U+c,d,r,i,!1)}}},lve=({accumulatedChange:e,originalElements:t,originalElementsMap:n,shouldChangeByStepSize:i,nextValue:r,property:s,scene:o,originalAppState:a})=>{var f,h;const l=o.getNonDeletedElementsMap();if(r!==void 0){for(const m of JT(t,a)){const p=a5(m,l,n);if(p.length>1){const[U,b,,]=nt(p.map(v=>v.latest));ave(s==="x"?r:U,s==="y"?r:b,p.map(v=>v.original),n,o)}else{const U=(f=p[0])==null?void 0:f.original,b=(h=p[0])==null?void 0:h.latest;if(U&&b&&pl(b,s)){const[y,w]=[U.x+U.width/2,U.y+U.height/2],[v,I]=q(S(U.x,U.y),S(y,w),U.angle);H0(s==="x"?r:v,s==="y"?r:I,U,o,n,!1)}}}o.triggerUpdate();return}const c=i?Xi(e,jv):e;ove(s,s==="x"?c:0,s==="y"?c:0,t,n,o),o.triggerUpdate()},$L=({property:e,elements:t,elementsMap:n,atomicUnits:i,scene:r,appState:s})=>{const o=L.useMemo(()=>i.map(l=>{const c=Object.keys(l).map(p=>n.get(p)).filter(p=>p!==void 0);if(c.length>1){const[p,U]=nt(c);return Math.round((e==="x"?p:U)*100)/100}const[u]=c,[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=q(S(u.x,u.y),S(d,f),u.angle);return Math.round((e==="x"?h:m)*100)/100}),[i,n,e]),a=new Set(o).size===1?o[0]:"Mixed";return g(Sl,{label:e==="x"?"X":"Y",elements:t,dragInputCallback:lve,value:a,property:e,scene:r,appState:s})},cve=({accumulatedChange:e,instantChange:t,originalElements:n,originalElementsMap:i,shouldChangeByStepSize:r,nextValue:s,property:o,scene:a,originalAppState:l})=>{const c=a.getNonDeletedElementsMap(),u=n[0],[d,f]=[u.x+u.width/2,u.y+u.height/2],[h,m]=q(S(u.x,u.y),S(d,f),u.angle);if(l.croppingElementId===u.id){const w=c.get(u.id);if(!w||!Et(w)||!w.crop)return;const v=w.crop;let I=v;const x=w.scale[0]===-1,_=w.scale[1]===-1,{width:T,height:A}=ll(w);if(s!==void 0){if(o==="x"){const P=s*(v.naturalWidth/T);x?I={...v,x:Ze(v.naturalWidth-P-v.width,0,v.naturalWidth-v.width)}:I={...v,x:Ze(s*(v.naturalWidth/T),0,v.naturalWidth-v.width)}}o==="y"&&(I={...v,y:Ze(s*(v.naturalHeight/A),0,v.naturalHeight-v.height)}),a.mutateElement(w,{crop:I});return}const C=(o==="x"?t:0)*(x?-1:1),k=(o==="y"?t:0)*(_?-1:1);I={...v,x:Ze(v.x+C,0,v.naturalWidth-v.width),y:Ze(v.y+k,0,v.naturalHeight-v.height)},a.mutateElement(w,{crop:I});return}if(s!==void 0){H0(o==="x"?s:h,o==="y"?s:m,u,a,i);return}const p=o==="x"?e:0,U=o==="y"?e:0,b=o==="x"?Math.round(r?Xi(u.x+p,jv):h+p):h,y=o==="y"?Math.round(r?Xi(u.y+U,jv):m+U):m;H0(b,y,u,a,i)},GL=({property:e,element:t,elementsMap:n,scene:i,appState:r})=>{const[s,o]=q(S(t.x,t.y),S(t.x+t.width/2,t.y+t.height/2),t.angle);let a=Ya(e==="x"?s:o,2);if(r.croppingElementId===t.id&&Et(t)&&t.crop){const l=aae(t);l&&(a=Ya(e==="x"?l.x:l.y,2))}return g(Sl,{label:e==="x"?"X":"Y",elements:[t],dragInputCallback:cve,scene:i,value:a,property:e,appState:r})},uve=50,xa=e=>{const t=Hp(),n=e.app.scene.getSceneNonce()||1,i=e.app.scene.getSelectedElements({selectedElementIds:t.selectedElementIds,includeBoundTextElement:!1}),r=B0(e.app);return g(dve,{...e,appState:t,sceneNonce:n,selectedElements:i,gridModeEnabled:r})},Kt=({children:e,columns:t=1,heading:n,style:i,...r})=>g("div",{className:ce("exc-stats__row",{"exc-stats__row--heading":n}),style:{gridTemplateColumns:`repeat(${t}, 1fr)`,...i},...r,children:e});Kt.displayName="StatsRow";const l5=({children:e,order:t,style:n,...i})=>g("div",{className:"exc-stats__rows",style:{order:t,...n},...i,children:e});l5.displayName="StatsRows";xa.StatsRow=Kt;xa.StatsRows=l5;const dve=L.memo(({app:e,onClose:t,renderCustomStats:n,selectedElements:i,appState:r,sceneNonce:s,gridModeEnabled:o})=>{const a=e.scene,l=a.getNonDeletedElements(),c=a.getNonDeletedElementsMap(),u=xn(),d=i.length===1?i[0]:null,f=i.length>1?i:null,h=r.croppingElementId&&Et(d),m=h?ll(d):null,[p,U]=L.useState({width:0,height:0}),b=L.useMemo(()=>Fo(v=>{const I=nt(v);U({width:Math.round(I[2])-Math.round(I[0]),height:Math.round(I[3])-Math.round(I[1])})},uve),[]);L.useEffect(()=>{b(l)},[s,l,b]),L.useEffect(()=>()=>b.cancel(),[b]);const y=L.useMemo(()=>JT(i,r),[i,r]),w=L.useMemo(()=>Oz(i),[i]);return g("div",{className:"exc-stats",children:N(Zr,{padding:3,children:[N("div",{className:"title",children:[g("h2",{children:R("stats.title")}),g("div",{className:"close",onClick:t,children:au})]}),N(yv,{label:g("h3",{children:R("stats.generalStats")}),open:!!(r.stats.panels&Hf.generalStats),openTrigger:()=>u(v=>({stats:{open:!0,panels:v.stats.panels^Hf.generalStats}})),children:[N(l5,{children:[g(Kt,{heading:!0,children:R("stats.scene")}),N(Kt,{columns:2,children:[g("div",{children:R("stats.shapes")}),g("div",{children:l.length})]}),N(Kt,{columns:2,children:[g("div",{children:R("stats.width")}),g("div",{children:p.width})]}),N(Kt,{columns:2,children:[g("div",{children:R("stats.height")}),g("div",{children:p.height})]}),o&&N(fe,{children:[g(Kt,{heading:!0,children:"Canvas"}),g(Kt,{children:g(V4e,{property:"gridStep",scene:a,appState:r,setAppState:u})})]})]}),n==null?void 0:n(l,r)]}),!w&&i.length>0&&g("div",{id:"elementStats",style:{marginTop:12},children:g(yv,{label:g("h3",{children:R("stats.elementProperties")}),open:!!(r.stats.panels&Hf.elementProperties),openTrigger:()=>u(v=>({stats:{open:!0,panels:v.stats.panels^Hf.elementProperties}})),children:N(l5,{children:[d&&N(fe,{children:[h&&g(Kt,{heading:!0,children:R("labels.unCroppedDimension")}),r.croppingElementId&&Et(d)&&m&&N(Kt,{columns:2,children:[g("div",{children:R("stats.width")}),g("div",{children:Ya(m.width,2)})]}),r.croppingElementId&&Et(d)&&m&&N(Kt,{columns:2,children:[g("div",{children:R("stats.height")}),g("div",{children:Ya(m.height,2)})]}),g(Kt,{heading:!0,"data-testid":"stats-element-type",style:{margin:"0.3125rem 0"},children:r.croppingElementId?R("labels.imageCropping"):R(`element.${d.type}`)}),g(Kt,{children:g(GL,{element:d,property:"x",elementsMap:c,scene:a,appState:r})}),g(Kt,{children:g(GL,{element:d,property:"y",elementsMap:c,scene:a,appState:r})}),g(Kt,{children:g(FL,{property:"width",element:d,scene:a,appState:r})}),g(Kt,{children:g(FL,{property:"height",element:d,scene:a,appState:r})}),!pe(d)&&g(Kt,{children:g(H4e,{property:"angle",element:d,scene:a,appState:r})}),g(Kt,{children:g(W4e,{property:"fontSize",element:d,scene:a,appState:r})})]}),f&&N(fe,{children:[p_(f)&&g(Kt,{heading:!0,children:R("element.group")}),N(Kt,{columns:2,style:{margin:"0.3125rem 0"},children:[g("div",{children:R("stats.shapes")}),g("div",{children:i.length})]}),g(Kt,{children:g($L,{property:"x",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Kt,{children:g($L,{property:"y",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Kt,{children:g(HL,{property:"width",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Kt,{children:g(HL,{property:"height",elements:f,elementsMap:c,atomicUnits:y,scene:a,appState:r})}),g(Kt,{children:g(q4e,{property:"angle",elements:f,scene:a,appState:r})}),g(Kt,{children:g(sve,{property:"fontSize",elements:f,scene:a,appState:r,elementsMap:c})})]})]})})})]})})},(e,t)=>e.sceneNonce===t.sceneNonce&&e.selectedElements===t.selectedElements&&e.appState.stats.panels===t.appState.stats.panels&&e.gridModeEnabled===t.gridModeEnabled&&e.appState.gridStep===t.appState.gridStep&&e.appState.croppingElementId===t.appState.croppingElementId),fve=({sourceElementId:e,onClose:t,appState:n,scene:i,generateLinkForSelection:r=rH})=>{var f;const s=i.getNonDeletedElementsMap(),o=((f=s.get(e))==null?void 0:f.link)??null,[a,l]=L.useState(o),[c,u]=L.useState(!1);L.useEffect(()=>{const h=Ge(s,n);let m=o;if(h.length>0&&r){const p=sH(h,n);p&&(m=ns(r(p.id,p.type)))}l(m)},[s,n,n.selectedElementIds,o,r]);const d=L.useCallback(()=>{var h;if(a&&a!==((h=s.get(e))==null?void 0:h.link)){const m=s.get(e);m&&i.mutateElement(m,{link:a})}if(!a&&c&&e){const m=s.get(e);m&&i.mutateElement(m,{link:null})}t==null||t()},[e,a,s,c,i,t]);return L.useEffect(()=>{const h=m=>{var p,U;((p=n.openDialog)==null?void 0:p.name)==="elementLinkSelector"&&m.key===V.ENTER&&d(),((U=n.openDialog)==null?void 0:U.name)==="elementLinkSelector"&&m.key===V.ESCAPE&&(t==null||t())};return window.addEventListener("keydown",h),()=>{window.removeEventListener("keydown",h)}},[n,t,d]),N("div",{className:"ElementLinkDialog",children:[N("div",{className:"ElementLinkDialog__header",children:[g("h2",{children:R("elementLink.title")}),g("p",{children:R("elementLink.desc")})]}),N("div",{className:"ElementLinkDialog__input",children:[g(xd,{value:a??"",onChange:h=>{c||u(!0),l(h)},onKeyDown:h=>{h.key===V.ENTER&&d()},className:"ElementLinkDialog__input-field",selectOnRender:!0}),o&&a&&g(Xe,{type:"button",title:R("buttons.remove"),"aria-label":R("buttons.remove"),label:R("buttons.remove"),onClick:()=>{l(null),u(!0)},className:"ElementLinkDialog__remove",icon:$c})]}),N("div",{className:"ElementLinkDialog__actions",children:[g(Qh,{label:R("buttons.cancel"),onClick:()=>{t==null||t()},style:{marginRight:10}}),g(Qh,{label:R("buttons.confirm"),onClick:d,actionType:"primary"})]})]})},eI=({children:e,onClose:t})=>{const[n,i]=L.useState(!!e),{container:r}=Dr(),s=ue.useCallback(()=>{i(!1),t&&t(),r==null||r.focus()},[t,r]);return g(fe,{children:n&&g(ls,{size:"small",onCloseRequest:s,title:R("errorDialog.title"),children:g("div",{style:{whiteSpace:"pre-wrap"},children:e})})})},hve=()=>N("div",{className:"HelpDialog__header",children:[N("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:YM}),R("helpDialog.documentation")]}),N("a",{className:"HelpDialog__btn",href:"https://plus.excalidraw.com/blog",target:"_blank",rel:"noopener",children:[g("div",{className:"HelpDialog__link-icon",children:YM}),R("helpDialog.blog")]}),N("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:Y_}),R("helpDialog.github")]}),N("a",{className:"HelpDialog__btn",href:"https://youtube.com/@excalidraw",target:"_blank",rel:"noopener noreferrer",children:[g("div",{className:"HelpDialog__link-icon",children:VV}),"YouTube"]})]}),gve=e=>N(fe,{children:[g("h3",{children:e.title}),g("div",{className:"HelpDialog__islands-container",children:e.children})]}),G3=e=>N("div",{className:`HelpDialog__island ${e.className}`,children:[g("h4",{className:"HelpDialog__island-title",children:e.caption}),g("div",{className:"HelpDialog__island-content",children:e.children})]});function*mve(e,t){let n=!0;for(const i of e)n||(yield t),n=!1,yield i}const pve=e=>e.replace(/\b[a-z]\b/,t=>t.toUpperCase()),ye=({label:e,shortcuts:t,isOr:n=!0})=>{const i=t.map(r=>(r.endsWith("++")?[...r.slice(0,-2).split("+"),"+"]:r.split("+")).map(o=>g(Uve,{children:pve(o)},o)));return N("div",{className:"HelpDialog__shortcut",children:[g("div",{children:e}),g("div",{className:"HelpDialog__key-container",children:[...mve(i,n?R("helpDialog.or"):null)]})]})},Uve=e=>g("kbd",{className:"HelpDialog__key",...e}),bve=({onClose:e})=>{const t=ue.useCallback(()=>{e&&e()},[e]);return g(fe,{children:N(ls,{onCloseRequest:t,title:R("helpDialog.title"),className:"HelpDialog",children:[g(hve,{}),N(gve,{title:R("helpDialog.shortcuts"),children:[N(G3,{className:"HelpDialog__island--tools",caption:R("helpDialog.tools"),children:[g(ye,{label:R("toolBar.hand"),shortcuts:[V.H]}),g(ye,{label:R("toolBar.selection"),shortcuts:[V.V,V[1]]}),g(ye,{label:R("toolBar.rectangle"),shortcuts:[V.R,V[2]]}),g(ye,{label:R("toolBar.diamond"),shortcuts:[V.D,V[3]]}),g(ye,{label:R("toolBar.ellipse"),shortcuts:[V.O,V[4]]}),g(ye,{label:R("toolBar.arrow"),shortcuts:[V.A,V[5]]}),g(ye,{label:R("toolBar.line"),shortcuts:[V.L,V[6]]}),g(ye,{label:R("toolBar.freedraw"),shortcuts:[V.P,V[7]]}),g(ye,{label:R("toolBar.text"),shortcuts:[V.T,V[8]]}),g(ye,{label:R("toolBar.image"),shortcuts:[V[9]]}),g(ye,{label:R("toolBar.eraser"),shortcuts:[V.E,V[0]]}),g(ye,{label:R("toolBar.frame"),shortcuts:[V.F]}),g(ye,{label:R("toolBar.laser"),shortcuts:[V.K]}),g(ye,{label:R("labels.eyeDropper"),shortcuts:[V.I,"Shift+S","Shift+G"]}),g(ye,{label:R("helpDialog.editLineArrowPoints"),shortcuts:[J("CtrlOrCmd+Enter")]}),g(ye,{label:R("helpDialog.editText"),shortcuts:[J("Enter")]}),g(ye,{label:R("helpDialog.textNewLine"),shortcuts:[J("Enter"),J("Shift+Enter")]}),g(ye,{label:R("helpDialog.textFinish"),shortcuts:[J("Esc"),J("CtrlOrCmd+Enter")]}),g(ye,{label:R("helpDialog.curvedArrow"),shortcuts:["A",R("helpDialog.click"),R("helpDialog.click"),R("helpDialog.click")],isOr:!1}),g(ye,{label:R("helpDialog.curvedLine"),shortcuts:["L",R("helpDialog.click"),R("helpDialog.click"),R("helpDialog.click")],isOr:!1}),g(ye,{label:R("helpDialog.cropStart"),shortcuts:[R("helpDialog.doubleClick"),J("Enter")],isOr:!0}),g(ye,{label:R("helpDialog.cropFinish"),shortcuts:[J("Enter"),J("Escape")],isOr:!0}),g(ye,{label:R("toolBar.lock"),shortcuts:[V.Q]}),g(ye,{label:R("helpDialog.preventBinding"),shortcuts:[J("CtrlOrCmd")]}),g(ye,{label:R("toolBar.link"),shortcuts:[J("CtrlOrCmd+K")]}),g(ye,{label:R("toolBar.convertElementType"),shortcuts:["Tab","Shift+Tab"],isOr:!0})]}),N(G3,{className:"HelpDialog__island--view",caption:R("helpDialog.view"),children:[g(ye,{label:R("buttons.zoomIn"),shortcuts:[J("CtrlOrCmd++")]}),g(ye,{label:R("buttons.zoomOut"),shortcuts:[J("CtrlOrCmd+-")]}),g(ye,{label:R("buttons.resetZoom"),shortcuts:[J("CtrlOrCmd+0")]}),g(ye,{label:R("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),g(ye,{label:R("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),g(ye,{label:R("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),g(ye,{label:R("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),g(ye,{label:R("buttons.zenMode"),shortcuts:[J("Alt+Z")]}),g(ye,{label:R("buttons.objectsSnapMode"),shortcuts:[J("Alt+S")]}),g(ye,{label:R("labels.toggleGrid"),shortcuts:[J("CtrlOrCmd+'")]}),g(ye,{label:R("labels.viewMode"),shortcuts:[J("Alt+R")]}),g(ye,{label:R("labels.toggleTheme"),shortcuts:[J("Alt+Shift+D")]}),g(ye,{label:R("stats.fullTitle"),shortcuts:[J("Alt+/")]}),g(ye,{label:R("search.title"),shortcuts:[Zi("searchMenu")]}),g(ye,{label:R("commandPalette.title"),shortcuts:l0?[Zi("commandPalette")]:[Zi("commandPalette"),Zi("commandPalette",1)]})]}),N(G3,{className:"HelpDialog__island--editor",caption:R("helpDialog.editor"),children:[g(ye,{label:R("helpDialog.createFlowchart"),shortcuts:[J("CtrlOrCmd+Arrow Key")],isOr:!0}),g(ye,{label:R("helpDialog.navigateFlowchart"),shortcuts:[J("Alt+Arrow Key")],isOr:!0}),g(ye,{label:R("labels.moveCanvas"),shortcuts:[J(`Space+${R("helpDialog.drag")}`),J(`Wheel+${R("helpDialog.drag")}`)],isOr:!0}),g(ye,{label:R("buttons.clearReset"),shortcuts:[J("CtrlOrCmd+Delete")]}),g(ye,{label:R("labels.delete"),shortcuts:[J("Delete")]}),g(ye,{label:R("labels.cut"),shortcuts:[J("CtrlOrCmd+X")]}),g(ye,{label:R("labels.copy"),shortcuts:[J("CtrlOrCmd+C")]}),g(ye,{label:R("labels.paste"),shortcuts:[J("CtrlOrCmd+V")]}),g(ye,{label:R("labels.pasteAsPlaintext"),shortcuts:[J("CtrlOrCmd+Shift+V")]}),g(ye,{label:R("labels.selectAll"),shortcuts:[J("CtrlOrCmd+A")]}),g(ye,{label:R("labels.multiSelect"),shortcuts:[J(`Shift+${R("helpDialog.click")}`)]}),g(ye,{label:R("helpDialog.deepSelect"),shortcuts:[J(`CtrlOrCmd+${R("helpDialog.click")}`)]}),g(ye,{label:R("helpDialog.deepBoxSelect"),shortcuts:[J(`CtrlOrCmd+${R("helpDialog.drag")}`)]}),(BT||l0)&&g(ye,{label:R("labels.copyAsPng"),shortcuts:[J("Shift+Alt+C")]}),g(ye,{label:R("labels.copyStyles"),shortcuts:[J("CtrlOrCmd+Alt+C")]}),g(ye,{label:R("labels.pasteStyles"),shortcuts:[J("CtrlOrCmd+Alt+V")]}),g(ye,{label:R("labels.sendToBack"),shortcuts:[J(ao?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),g(ye,{label:R("labels.bringToFront"),shortcuts:[J(ao?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),g(ye,{label:R("labels.sendBackward"),shortcuts:[J("CtrlOrCmd+[")]}),g(ye,{label:R("labels.bringForward"),shortcuts:[J("CtrlOrCmd+]")]}),g(ye,{label:R("labels.alignTop"),shortcuts:[J("CtrlOrCmd+Shift+Up")]}),g(ye,{label:R("labels.alignBottom"),shortcuts:[J("CtrlOrCmd+Shift+Down")]}),g(ye,{label:R("labels.alignLeft"),shortcuts:[J("CtrlOrCmd+Shift+Left")]}),g(ye,{label:R("labels.alignRight"),shortcuts:[J("CtrlOrCmd+Shift+Right")]}),g(ye,{label:R("labels.duplicateSelection"),shortcuts:[J("CtrlOrCmd+D"),J(`Alt+${R("helpDialog.drag")}`)]}),g(ye,{label:R("helpDialog.toggleElementLock"),shortcuts:[J("CtrlOrCmd+Shift+L")]}),g(ye,{label:R("buttons.undo"),shortcuts:[J("CtrlOrCmd+Z")]}),g(ye,{label:R("buttons.redo"),shortcuts:_B?[J("CtrlOrCmd+Y"),J("CtrlOrCmd+Shift+Z")]:[J("CtrlOrCmd+Shift+Z")]}),g(ye,{label:R("labels.group"),shortcuts:[J("CtrlOrCmd+G")]}),g(ye,{label:R("labels.ungroup"),shortcuts:[J("CtrlOrCmd+Shift+G")]}),g(ye,{label:R("labels.flipHorizontal"),shortcuts:[J("Shift+H")]}),g(ye,{label:R("labels.flipVertical"),shortcuts:[J("Shift+V")]}),g(ye,{label:R("labels.showStroke"),shortcuts:[J("S")]}),g(ye,{label:R("labels.showBackground"),shortcuts:[J("G")]}),g(ye,{label:R("labels.showFonts"),shortcuts:[J("Shift+F")]}),g(ye,{label:R("labels.decreaseFontSize"),shortcuts:[J("CtrlOrCmd+Shift+<")]}),g(ye,{label:R("labels.increaseFontSize"),shortcuts:[J("CtrlOrCmd+Shift+>")]})]})]})]})})},Mt=e=>Array.isArray(e)?`<kbd>${e.map(J).join(" + ")}</kbd>`:`<kbd>${J(e)}</kbd>`,yve=({appState:e,isMobile:t,editorInterface:n,app:i})=>{var u,d,f,h;const{activeTool:r,isResizing:s,isRotating:o,lastPointerDownWith:a}=e,l=e.multiElement!==null;if(((u=e.openSidebar)==null?void 0:u.name)===As.name&&e.openSidebar.tab===Zu&&((d=e.searchMatches)!=null&&d.matches.length))return R("hints.dismissSearch",{shortcut:Mt("Escape")});if(e.openSidebar&&!n.canFitSidebar)return null;if(Ao(e))return R("hints.eraserRevert",{shortcut:Mt("Alt")});if(r.type==="arrow"||r.type==="line")return l?R("hints.linearElementMulti",{shortcut_1:Mt("Escape"),shortcut_2:Mt("Enter")}):r.type==="arrow"?R("hints.arrowTool",{shortcut:Mt("A")}):R("hints.linearElement");if(r.type==="freedraw")return R("hints.freeDraw");if(r.type==="text")return R("hints.text");if(r.type==="embeddable")return R("hints.embeddable");const c=i.scene.getSelectedElements(e);if(s&&a==="mouse"&&c.length===1){const m=c[0];return xe(m)&&m.points.length===2?R("hints.lockAngle",{shortcut:Mt("Shift")}):Et(m)?R("hints.resizeImage",{shortcut_1:Mt("Shift"),shortcut_2:Mt("Alt")}):R("hints.resize",{shortcut_1:Mt("Shift"),shortcut_2:Mt("Alt")})}if(o&&a==="mouse")return R("hints.rotate",{shortcut:Mt("Shift")});if(c.length===1&&ge(c[0]))return R("hints.text_selected",{shortcut:Mt("Enter")});if(e.editingTextElement)return R("hints.text_editing",{shortcut_1:Mt("Escape"),shortcut_2:Mt(["CtrlOrCmd","Enter"])});if(e.croppingElementId)return R("hints.leaveCropEditor",{shortcut_1:Mt("Enter"),shortcut_2:Mt("Escape")});if(c.length===1&&Et(c[0]))return R("hints.enterCropEditor",{shortcut:Mt("Enter")});if(r.type==="selection"){if(e.selectionElement&&!c.length&&!e.editingTextElement&&!((f=e.selectedLinearElement)!=null&&f.isEditing))return R("hints.deepBoxSelect",{shortcut:Mt("CtrlOrCmd")});if(B0(i)&&e.selectedElementsAreBeingDragged)return R("hints.disableSnapping",{shortcut:Mt("CtrlOrCmd")});if(!c.length&&!t)return R("hints.canvasPanning",{shortcut_1:Mt(R("keys.mmb")),shortcut_2:Mt("Space")});if(c.length===1){if(xe(c[0]))return(h=e.selectedLinearElement)!=null&&h.isEditing?e.selectedLinearElement.selectedPointsIndices?R("hints.lineEditor_pointSelected",{shortcut_1:Mt("Delete"),shortcut_2:Mt(["CtrlOrCmd","D"])}):R("hints.lineEditor_nothingSelected",{shortcut_1:Mt("Shift"),shortcut_2:Mt("Alt")}):nn(c[0])?R("hints.lineEditor_line_info",{shortcut:Mt("Enter")}):R("hints.lineEditor_info",{shortcut_1:Mt("CtrlOrCmd"),shortcut_2:Mt(["CtrlOrCmd","Enter"])});if(!e.newElement&&!e.selectedElementsAreBeingDragged&&Qu(c[0])){const m=R("hints.bindTextToElement",{shortcut:Mt("Enter")}),p=R("hints.createFlowchart",{shortcut:Mt(["CtrlOrCmd",""])});return oy(c[0])?vue(c[0],i.scene.getNonDeletedElementsMap())?[m,p]:[m,p]:m}}}return null},Eve=({appState:e,isMobile:t,editorInterface:n,app:i})=>{const r=yve({appState:e,isMobile:t,editorInterface:n,app:i});if(!r)return null;const o=(Array.isArray(r)?r.map(a=>a.replace(/\. ?$/,"")).join(", "):r).split(/(<kbd>[^<]+<\/kbd>)/g).map((a,l)=>{if(l%2===1){const c=a[0]==="<"&&a.match(/^<kbd>([^<]+)<\/kbd>$/);return g("kbd",{children:c?c[1]:a},l)}return a});return g("div",{className:"HintViewer",children:g("span",{children:o})})},vve=2e3,tI=()=>{const[e,t]=L.useState(null),n=L.useRef(0),i=()=>{clearTimeout(n.current),t("success"),n.current=window.setTimeout(()=>{t(null)},vve)},r=L.useCallback(()=>{t(null)},[]);return{copyStatus:e,resetCopyStatus:r,onCopy:i}},l2=({title:e,name:t,checked:n,onChange:i,disabled:r=!1})=>g("div",{className:ce("Switch",{toggled:n,disabled:r}),children:g("input",{name:t,id:t,title:e,type:"checkbox",checked:n,disabled:r,onChange:()=>i(!n),onKeyDown:s=>{s.key===" "&&i(!n)}})}),wve="filter"in document.createElement("canvas").getContext("2d"),_ve=()=>N("div",{children:[g("h3",{children:R("canvasError.cannotShowPreview")}),g("p",{children:g("span",{children:R("canvasError.canvasTooBig")})}),N("em",{children:["(",R("canvasError.canvasTooBigTip"),")"]})]}),Tve=({appStateSnapshot:e,elementsSnapshot:t,files:n,actionManager:i,onExportImage:r,name:s})=>{const o=Wn(t,e),[a,l]=L.useState(s),[c,u]=L.useState(o),[d,f]=L.useState(e.exportBackground),[h,m]=L.useState(e.exportWithDarkMode),[p,U]=L.useState(e.exportEmbedScene),[b,y]=L.useState(e.exportScale),w=L.useRef(null),[v,I]=L.useState(null),{onCopy:x,copyStatus:_,resetCopyStatus:T}=tI();L.useEffect(()=>{T()},[a,d,h,b,p,T]);const{exportedElements:A,exportingFrame:C}=Yy(t,e,c);return L.useEffect(()=>{const k=w.current;if(!k)return;const P=k.offsetWidth,D=k.offsetHeight;P&&Qy({elements:A,appState:{...e,name:a,exportBackground:d,exportWithDarkMode:h,exportScale:b,exportEmbedScene:p},files:n,exportPadding:bg,maxWidthOrHeight:Math.max(P,D),exportingFrame:C}).then(j=>(I(null),D0(j).then(()=>{k.replaceChildren(j)}).catch(G=>{throw G.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(R("canvasError.canvasTooBig")):G}))).catch(j=>{console.error(j),I(j)})},[e,n,A,C,a,d,h,b,p]),N("div",{className:"ImageExportModal",children:[g("h3",{children:R("imageExportDialog.header")}),N("div",{className:"ImageExportModal__preview",children:[g("div",{className:"ImageExportModal__preview__canvas",ref:w,children:v&&g(_ve,{})}),g("div",{className:"ImageExportModal__preview__filename",children:!Xd&&g("input",{type:"text",className:"TextInput",value:a,style:{width:"30ch"},onChange:k=>{l(k.target.value),i.executeAction(Hye,"ui",k.target.value)}})})]}),N("div",{className:"ImageExportModal__settings",children:[g("h3",{children:R("imageExportDialog.header")}),o&&g(ym,{label:R("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:g(l2,{name:"exportOnlySelected",checked:c,onChange:k=>{u(k)}})}),g(ym,{label:R("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:g(l2,{name:"exportBackgroundSwitch",checked:d,onChange:k=>{f(k),i.executeAction($ye,"ui",k)}})}),wve&&g(ym,{label:R("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:g(l2,{name:"exportDarkModeSwitch",checked:h,onChange:k=>{m(k),i.executeAction(Gye,"ui",k)}})}),g(ym,{label:R("imageExportDialog.label.embedScene"),tooltip:R("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:g(l2,{name:"exportEmbedSwitch",checked:p,onChange:k=>{U(k),i.executeAction(TX,"ui",k)}})}),g(ym,{label:R("imageExportDialog.label.scale"),name:"exportScale",children:g(eY,{name:"exportScale",value:b,onChange:k=>{y(k),i.executeAction(Vye,"ui",k)},choices:B9.map(k=>({value:k,label:`${k}`}))})}),N("div",{className:"ImageExportModal__settings__buttons",children:[g(ks,{className:"ImageExportModal__settings__buttons__button",label:R("imageExportDialog.title.exportToPng"),onClick:()=>r(C8.png,A,{exportingFrame:C}),icon:lR,children:R("imageExportDialog.button.exportToPng")}),g(ks,{className:"ImageExportModal__settings__buttons__button",label:R("imageExportDialog.title.exportToSvg"),onClick:()=>r(C8.svg,A,{exportingFrame:C}),icon:lR,children:R("imageExportDialog.button.exportToSvg")}),(BT||l0)&&g(ks,{className:"ImageExportModal__settings__buttons__button",label:R("imageExportDialog.title.copyPngToClipboard"),status:_,onClick:async()=>{await r(C8.clipboard,A,{exportingFrame:C}),x()},icon:kp,children:R("imageExportDialog.button.copyPngToClipboard")})]})]})]})},ym=({label:e,children:t,tooltip:n,name:i})=>N("div",{className:"ImageExportModal__settings__setting",title:e,children:[N("label",{htmlFor:i,className:"ImageExportModal__settings__setting__label",children:[e,n&&g(gl,{label:n,long:!0,children:wfe})]}),g("div",{className:"ImageExportModal__settings__setting__content",children:t})]}),Ive=({elements:e,appState:t,files:n,actionManager:i,onExportImage:r,onCloseRequest:s,name:o})=>{const[{appStateSnapshot:a,elementsSnapshot:l}]=L.useState(()=>({appStateSnapshot:Ka(t),elementsSnapshot:Ka(e)}));return g(ls,{onCloseRequest:s,size:"wide",title:!1,children:g(Tve,{elementsSnapshot:l,appStateSnapshot:a,files:n,actionManager:i,onExportImage:r,name:o})})},Yv=({children:e,color:t})=>g("div",{className:"Card",style:{"--card-color":t==="primary"?"var(--color-primary)":yi[t][7],"--card-color-darker":t==="primary"?"var(--color-primary-darker)":yi[t][8],"--card-color-darkest":t==="primary"?"var(--color-primary-darkest)":yi[t][9]},children:e}),Sve=({elements:e,appState:t,setAppState:n,files:i,actionManager:r,exportOpts:s,canvas:o,onCloseRequest:a})=>{const{onExportToBackend:l}=s;return g("div",{className:"ExportDialog ExportDialog--json",children:N("div",{className:"ExportDialog-cards",children:[s.saveFileToDisk&&N(Yv,{color:"lime",children:[g("div",{className:"Card-icon",children:Ade}),g("h2",{children:R("exportDialog.disk_title")}),N("div",{className:"Card-details",children:[R("exportDialog.disk_details"),!Xd&&r.renderAction("changeProjectName")]}),g(Xe,{className:"Card-button",type:"button",title:R("exportDialog.disk_button"),"aria-label":R("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{r.executeAction(IX,"ui")}})]}),l&&N(Yv,{color:"pink",children:[g("div",{className:"Card-icon",children:D6}),g("h2",{children:R("exportDialog.link_title")}),g("div",{className:"Card-details",children:R("exportDialog.link_details")}),g(Xe,{className:"Card-button",type:"button",title:R("exportDialog.link_button"),"aria-label":R("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{Je("export","link",`ui (${yp()})`),await l(e,t,i),a()}catch(c){n({errorMessage:c.message})}}})]}),s.renderCustomUI&&s.renderCustomUI(e,t,i,o)]})})},xve=({elements:e,appState:t,files:n,actionManager:i,exportOpts:r,canvas:s,setAppState:o})=>{var l;const a=ue.useCallback(()=>{o({openDialog:null})},[o]);return g(fe,{children:((l=t.openDialog)==null?void 0:l.name)==="jsonExport"&&g(ls,{onCloseRequest:a,title:R("buttons.export"),children:g(Sve,{elements:e,appState:t,setAppState:o,files:n,actionManager:i,onCloseRequest:a,exportOpts:r,canvas:s})})})},Cve="small",Ave=e=>N("label",{className:ce("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${Cve}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title,"data-testid":"toolbar-LaserPointer"}),g("div",{className:"ToolIcon__icon",children:E0})]}),Mve=({UIOptions:e})=>N(ft,{__fallback:!0,children:[g(ft.DefaultItems.LoadScene,{}),g(ft.DefaultItems.SaveToActiveFile,{}),e.canvasActions.export&&g(ft.DefaultItems.Export,{}),e.canvasActions.saveAsImage&&g(ft.DefaultItems.SaveAsImage,{}),g(ft.DefaultItems.SearchMenu,{}),g(ft.DefaultItems.Help,{}),g(ft.DefaultItems.ClearCanvas,{}),g(ft.Separator,{}),g(ft.Group,{title:"Excalidraw links",children:g(ft.DefaultItems.Socials,{})}),g(ft.Separator,{}),g(ft.DefaultItems.ToggleTheme,{}),g(ft.DefaultItems.ChangeCanvasBackground,{})]}),Rve=()=>N(Hu,{__fallback:!0,children:[g(Hu.Actions.SaveToDisk,{}),g(Hu.Actions.ExportToImage,{})]}),kve=({actionManager:e,appState:t,files:n,setAppState:i,elements:r,canvas:s,onLockToggle:o,onHandToolToggle:a,onPenModeToggle:l,showExitZenModeBtn:c,renderTopLeftUI:u,renderTopRightUI:d,renderCustomStats:f,UIOptions:h,onExportImage:m,renderWelcomeScreen:p,children:U,app:b,isCollaborating:y,generateLinkForSelection:w})=>{var W,Q,oe;const v=Nn(),x=ua()==="compact",_=U3e(),T=x?{menuTopGap:4,toolbarColGap:4,toolbarRowGap:1,toolbarInnerRowGap:.5,islandPadding:1,collabMarginLeft:8}:{menuTopGap:6,toolbarColGap:4,toolbarRowGap:1,toolbarInnerRowGap:1,islandPadding:1,collabMarginLeft:8},A=_.tunnelsJotai.Provider,[C,k]=dn(Ay),P=()=>h.canvasActions.export?g(xve,{elements:r,appState:t,files:n,actionManager:e,exportOpts:h.canvasActions.export,canvas:s,setAppState:i}):null,D=()=>{var ne;return!h.canvasActions.saveAsImage||((ne=t.openDialog)==null?void 0:ne.name)!=="imageExport"?null:g(Ive,{elements:r,appState:t,files:n,actionManager:e,onExportImage:m,onCloseRequest:()=>i({openDialog:null}),name:b.getName()})},j=()=>N("div",{style:{position:"relative"},children:[g(_.MainMenuTunnel.Out,{}),p&&g(_.WelcomeScreenMenuHintTunnel.Out,{})]}),G=()=>{const ne=x;return g(zv,{heading:"selectedShapeActions",className:ce("selected-shape-actions zen-mode-transition",{"transition-left":t.zenModeEnabled}),children:ne?g(Zr,{className:ce("compact-shape-actions-island"),padding:0,style:{maxHeight:`${t.height-166}px`},children:g(E3e,{appState:t,elementsMap:b.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:b,setAppState:i})}):g(Zr,{className:gr.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${t.height-166}px`},children:g(b3e,{appState:t,elementsMap:b.scene.getNonDeletedElementsMap(),renderAction:e.renderAction,app:b})})})},B=()=>{var me,Re,Ve,wt,Ot;const ne=Oue(t,r),ie=t.stats.open&&!t.zenModeEnabled&&!t.viewModeEnabled&&((me=t.openDialog)==null?void 0:me.name)!=="elementLinkSelector";return g(Ej,{side:"top",children:N("div",{className:"App-menu App-menu_top",children:[N($a.Col,{gap:T.menuTopGap,className:ce("App-menu_top__left"),children:[j(),g("div",{className:ce("selected-shape-actions-container",{"selected-shape-actions-container--compact":x}),children:ne&&G()})]}),!t.viewModeEnabled&&((Re=t.openDialog)==null?void 0:Re.name)!=="elementLinkSelector"&&g(zv,{heading:"shapes",className:"shapes-section",children:Ye=>N("div",{style:{position:"relative"},children:[p&&g(_.WelcomeScreenToolbarHintTunnel.Out,{}),g($a.Col,{gap:T.toolbarColGap,align:"start",children:N($a.Row,{gap:T.toolbarRowGap,className:ce("App-toolbar-container",{"zen-mode":t.zenModeEnabled}),children:[N(Zr,{padding:T.islandPadding,className:ce("App-toolbar",{"zen-mode":t.zenModeEnabled,"App-toolbar--compact":x}),children:[g(Eve,{appState:t,isMobile:v.formFactor==="phone",editorInterface:v,app:b}),Ye,N($a.Row,{gap:T.toolbarInnerRowGap,children:[g(vj,{zenModeEnabled:t.zenModeEnabled,checked:t.penMode,onChange:()=>l(null),title:R("toolBar.penMode"),penDetected:t.penDetected}),g(x7e,{checked:t.activeTool.locked,onChange:o,title:R("toolBar.lock")}),g("div",{className:"App-toolbar__divider"}),g(yj,{checked:Kh(t),onChange:()=>a(),title:R("toolBar.hand"),isMobile:!0}),g(w3e,{setAppState:i,activeTool:t.activeTool,UIOptions:h,app:b})]})]}),y&&g(Zr,{style:{marginLeft:T.collabMarginLeft,alignSelf:"center",height:"fit-content"},children:g(Ave,{title:R("toolBar.laser"),checked:t.activeTool.type===Qn.laser,onChange:()=>b.setActiveTool({type:Qn.laser}),isMobile:!0})})]})})]})}),N("div",{className:ce("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":t.zenModeEnabled,"layer-ui__wrapper__top-right--compact":x}),children:[t.collaborators.size>0&&g(wj,{collaborators:t.collaborators,userToFollow:((Ve=t.userToFollow)==null?void 0:Ve.socketId)||null}),d==null?void 0:d(v.formFactor==="phone",t),!t.viewModeEnabled&&((wt=t.openDialog)==null?void 0:wt.name)!=="elementLinkSelector"&&(!$||((Ot=t.openSidebar)==null?void 0:Ot.name)!==As.name)&&g(_.DefaultSidebarTriggerTunnel.Out,{}),ie&&g(xa,{app:b,onClose:()=>{e.executeAction(Cv)},renderCustomStats:f})]})]})})},H=()=>g(s5,{__fallback:!0,onDock:ne=>{Je("sidebar",`toggleDock (${ne?"dock":"undock"})`,`(${v.formFactor==="phone"?"mobile":"desktop"})`)}}),$=OH(ZT),X=N(fe,{children:[U,g(Mve,{UIOptions:h}),g(s5.Trigger,{__fallback:!0,icon:Qfe,title:Rt(R("toolBar.library")),onToggle:ne=>{ne&&Je("sidebar",`${As.name} (open)`,`button (${v.formFactor==="phone"?"mobile":"desktop"})`)},tab:As.defaultTab}),g(Rve,{}),((W=t.openDialog)==null?void 0:W.name)==="ttd"&&g(IY,{__fallback:!0}),t.isLoading&&g(bj,{delay:250}),t.errorMessage&&g(eI,{onClose:()=>i({errorMessage:null}),children:t.errorMessage}),C&&v.formFactor!=="phone"&&g(jme,{colorPickerType:C.colorPickerType,onCancel:()=>{k(null)},onChange:(ne,ie,me,{altKey:Re})=>{if(!(ne!=="elementBackground"&&ne!=="elementStroke"))if(me.length){for(const Ve of me)_i(Ve,ve(r),{[Re&&C.swapPreviewOnAlt?ne==="elementBackground"?"strokeColor":"backgroundColor":ne==="elementBackground"?"backgroundColor":"strokeColor"]:ie}),qt.delete(Ve);b.scene.triggerUpdate()}else i(ne==="elementBackground"?{currentItemBackgroundColor:ie}:{currentItemStrokeColor:ie})},onSelect:(ne,ie)=>{var me;k(Re=>Re!=null&&Re.keepOpenOnAlt&&ie.altKey?Re:null),(me=C==null?void 0:C.onSelect)==null||me.call(C,ne,ie)}}),((Q=t.openDialog)==null?void 0:Q.name)==="help"&&g(bve,{onClose:()=>{i({openDialog:null})}}),g(x3e,{}),((oe=t.openDialog)==null?void 0:oe.name)==="elementLinkSelector"&&g(fve,{sourceElementId:t.openDialog.sourceElementId,onClose:()=>{i({openDialog:null})},scene:b.scene,appState:t,generateLinkForSelection:w}),g(_.OverwriteConfirmDialogTunnel.Out,{}),D(),P(),t.pasteDialog.shown&&g(R7e,{setAppState:i,appState:t,onClose:()=>i({pasteDialog:{shown:!1,data:null}})}),v.formFactor==="phone"&&g(M7e,{app:b,appState:t,elements:r,actionManager:e,renderJSONExportDialog:P,renderImageExportDialog:D,setAppState:i,onHandToolToggle:a,onPenModeToggle:l,renderTopLeftUI:u,renderTopRightUI:d,renderSidebars:H,renderWelcomeScreen:p,UIOptions:h}),v.formFactor!=="phone"&&N(fe,{children:[N("div",{className:"layer-ui__wrapper",style:t.openSidebar&&$&&v.canFitSidebar?{width:"calc(100% - var(--right-sidebar-width))"}:{},children:[p&&g(_.WelcomeScreenCenterTunnel.Out,{}),B(),g(_j,{appState:t,actionManager:e,showExitZenModeBtn:c,renderWelcomeScreen:p}),t.scrolledOutside&&g("button",{type:"button",className:"scroll-back-to-content",onClick:()=>{i(ne=>({...y0(r,ne)}))},children:R("buttons.scrollBackToContent")})]}),H()]})]});return g(X$.Provider,{value:t,children:g(A,{children:g(aj.Provider,{value:_,children:X})})})},XL=e=>{const{suggestedBindings:t,startBoundElement:n,cursorButton:i,scrollX:r,scrollY:s,...o}=e;return o},Lve=(e,t)=>{if(e.children!==t.children)return!1;const{canvas:n,appState:i,...r}=e,{canvas:s,appState:o,...a}=t;return Ki(XL(i),XL(o),{selectedElementIds:Ki,selectedGroupIds:Ki})&&Ki(r,a)},Dve=ue.memo(kve,Lve),Nve="small",X3=e=>N("label",{className:ce("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${Nve}`,{"is-mobile":e.isMobile}),title:`${e.title}`,children:[g("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),g("div",{className:"ToolIcon__icon",children:e.icon})]}),Ove=({trails:e})=>{const t=L.useRef(null);return L.useEffect(()=>{if(t.current)for(const n of e)n.start(t.current);return()=>{for(const n of e)n.stop()}},e),g("div",{className:"SVGLayer",children:g("svg",{ref:t})})},ui=class ui{static start(t,n){const i=n({deltaTime:0,state:void 0});i&&(ui.animations.set(t,{animation:n,lastTime:0,state:i}),ui.isRunning||(ui.isRunning=!0,r5()?requestAnimationFrame(ui.tick):setTimeout(ui.tick,0)))}static tick(){if(ui.animations.size>0){for(const[t,n]of ui.animations){const i=performance.now(),r=n.lastTime===0?0:i-n.lastTime,s=n.animation({deltaTime:r,state:n.state});if(s)n.lastTime=i,n.state=s;else if(ui.animations.delete(t),ui.animations.size===0){ui.isRunning=!1;return}}r5()?requestAnimationFrame(ui.tick):setTimeout(ui.tick,0)}}static running(t){return ui.animations.has(t)}static cancel(t){ui.animations.delete(t)}};F(ui,"isRunning",!1),F(ui,"animations",new Map);let c5=ui;const Pve="#ff6b6b",Fve="#ff0000",jL=1,YL=2,Bve=(e,t)=>{if(!t.snapLines.length)return;const n=t.theme===ke.LIGHT||t.zenModeEnabled?Pve:Fve,i=(t.zenModeEnabled?jL*1.5:jL)/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY);for(const r of t.snapLines)r.type==="pointer"?(e.lineWidth=i,e.strokeStyle=n,Hve(r,e,t)):r.type==="gap"?(e.lineWidth=i,e.strokeStyle=n,Vve(r.points[0],r.points[1],r.direction,t,e)):r.type==="points"&&(e.lineWidth=i,e.strokeStyle=n,zve(r,e,t));e.restore()},zve=(e,t,n)=>{if(!n.zenModeEnabled){const i=e.points[0],r=e.points[e.points.length-1];fs(i,r,t)}for(const i of e.points)SY(i,n,t)},Hve=(e,t,n)=>{SY(e.points[0],n,t),n.zenModeEnabled||fs(e.points[0],e.points[1],t)},SY=([e,t],n,i)=>{i.save();const r=(n.zenModeEnabled?YL*1.5:YL)/n.zoom.value;i.beginPath(),i.moveTo(e-r,t-r),i.lineTo(e+r,t+r),i.moveTo(e+r,t-r),i.lineTo(e-r,t+r),i.stroke(),i.restore()},fs=(e,t,n)=>{n.beginPath(),n.lineTo(e[0],e[1]),n.lineTo(t[0],t[1]),n.stroke()},Vve=(e,t,n,i,r)=>{const s=8/i.zoom.value,o=s/2,a=s/4;if(n==="horizontal"){const l=[(e[0]+t[0])/2,e[1]];i.zenModeEnabled||fs(S(e[0],e[1]-s),S(e[0],e[1]+s),r),fs(S(l[0]-a,l[1]-o),S(l[0]-a,l[1]+o),r),fs(S(l[0]+a,l[1]-o),S(l[0]+a,l[1]+o),r),i.zenModeEnabled||(fs(S(t[0],t[1]-s),S(t[0],t[1]+s),r),fs(e,t,r))}else{const l=[e[0],(e[1]+t[1])/2];i.zenModeEnabled||fs(S(e[0]-s,e[1]),S(e[0]+s,e[1]),r),fs(S(l[0]-o,l[1]-a),S(l[0]+o,l[1]-a),r),fs(S(l[0]-o,l[1]+a),S(l[0]+o,l[1]+a),r),i.zenModeEnabled||(fs(S(t[0]-s,t[1]),S(t[0]+s,t[1]),r),fs(e,t,r))}},$ve=(e,t)=>{gn(t.selectedLinearElement,"selectedLinearElement is null");const{segmentMidPointHoveredCoords:n}=t.selectedLinearElement;gn(n,"midPointCoords is null"),e.save(),e.translate(t.scrollX,t.scrollY),xY(n,e,t),e.restore()},Gve=(e,t,n)=>{var a,l,c;const{elementId:i,hoverPointIndex:r}=t.selectedLinearElement;if((a=t.selectedLinearElement)!=null&&a.isEditing&&((c=(l=t.selectedLinearElement)==null?void 0:l.selectedPointsIndices)!=null&&c.includes(r)))return;const s=Ue.getElement(i,n);if(!s)return;const o=Ue.getPointAtIndexGlobalCoordinates(s,r,n);e.save(),e.translate(t.scrollX,t.scrollY),xY(o,e,t),e.restore()},xY=(e,t,n)=>{t.fillStyle="rgba(105, 101, 219, 0.4)",Vy(t,e[0],e[1],Ue.POINT_HANDLE_SIZE/n.zoom.value,!1)},j3=(e,t,n,i,r,s,o)=>{var a;e.strokeStyle="#5e5ad8",e.setLineDash([]),e.fillStyle="rgba(255, 255, 255, 0.9)",r?e.fillStyle="rgba(134, 131, 226, 0.9)":s&&(e.fillStyle="rgba(177, 151, 252, 0.7)"),Vy(e,n[0],n[1],(o?i*((a=t.selectedLinearElement)!=null&&a.isEditing?1.5:2):i)/t.zoom.value,!s,!o||r)},Xve=(e,t,n,i)=>{const r=vg(t,t.width,t.height,i);switch(e.fillStyle="rgba(0,0,0,.05)",t.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":j5e(e,t,n,r);break;case"diamond":W5e(e,r,t,n);break;case"ellipse":{const[s,o,a,l]=He(t,n),c=a-s,u=l-o;e.strokeStyle="rgba(0,0,0,.05)",e.lineWidth=r-kt,Y5e(e,c+r+kt,u+r+kt,s+c/2,o+u/2,t.angle);break}}},jve=(e,t,n,i)=>{const[r,s,o]=t,a=vg(o,o.width,o.height,i);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",(s==="both"?[0,-1]:s==="start"?[0]:[-1]).forEach(c=>{const[u,d]=Ue.getPointAtIndexGlobalCoordinates(r,c,n);Vy(e,u,d,a,!0)})},CY=(e,t,n)=>{const{angle:i,x1:r,y1:s,x2:o,y2:a,selectionColors:l,cx:c,cy:u,dashed:d,activeEmbeddable:f}=n,h=o-r,m=a-s,U=(n.padding??gd*2)/t.zoom.value,b=8/t.zoom.value,y=4/t.zoom.value;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=(f?4:1)/t.zoom.value;const w=l.length;for(let v=0;v<w;++v)e.strokeStyle=l[v],d&&e.setLineDash([b,y+(b+y)*(w-1)]),e.lineDashOffset=(b+y)*v,Xy(e,r-U,s-U,h+U*2,m+U*2,c,u,i);e.restore()},Yve=(e,t,n,i)=>{const r=Array.isArray(n)?jve:Xve;e.save(),e.translate(t.scrollX,t.scrollY),r(e,n,i,t.zoom),e.restore()},Wve=(e,t,n,i)=>{const[r,s,o,a]=He(n,i),l=o-r,c=a-s;e.strokeStyle="rgb(0,118,255)",e.lineWidth=Ht.strokeWidth/t.zoom.value,e.save(),e.translate(t.scrollX,t.scrollY),Xy(e,r,s,l,c,r+l/2,s+c/2,n.angle,!1,Ht.radius/t.zoom.value),e.restore()},WL=(e,t,n,i)=>{const{colors:r=["rgb(0,118,255)"],dashed:s=!1}=i||{},o=n.filter(u=>u.groupIds.length===0),a=n.filter(u=>u.groupIds.length>0),l=u=>{const[d,f,h,m]=nt(u);return{angle:0,x1:d,x2:h,y1:f,y2:m,selectionColors:r,dashed:s,cx:d+(h-d)/2,cy:f+(m-f)/2,activeEmbeddable:!1}},c=u=>{const d=At(n,u);return l(d)};Object.entries(Cp(a,t)).filter(([u,d])=>d).map(([u,d])=>u).map(u=>c(u)).concat(o.map(u=>l([u]))).forEach(u=>CY(e,t,u))},Y3=(e,t,n,i)=>{var c,u;if(!t.selectedLinearElement)return;e.save(),e.translate(t.scrollX,t.scrollY),e.lineWidth=1/t.zoom.value;const r=Ue.getPointsGlobalCoordinates(n,i),{POINT_HANDLE_SIZE:s}=Ue,o=(c=t.selectedLinearElement)!=null&&c.isEditing?s:s/2,a=pe(n),l=nn(n);if(r.forEach((d,f)=>{var p,U,b,y,w,v;if(a&&f!==0&&f!==r.length-1)return;const h=f>0&&(f!==r.length-1||!l||!n.polygon)&&Os(d,f===r.length-1?r[0]:r[f-1],2/t.zoom.value);let m=!!((p=t.selectedLinearElement)!=null&&p.isEditing)&&!!((b=(U=t.selectedLinearElement)==null?void 0:U.selectedPointsIndices)!=null&&b.includes(f));l&&n.polygon&&!m&&f===n.points.length-1&&((y=t.selectedLinearElement)!=null&&y.isEditing)&&((v=(w=t.selectedLinearElement)==null?void 0:w.selectedPointsIndices)!=null&&v.includes(0))&&(m=!0),j3(e,t,d,o,m,!1,h)}),pe(n)){const d=((u=n.fixedSegments)==null?void 0:u.map(f=>f.index))||[];r.slice(0,-1).forEach((f,h)=>{Ue.isSegmentTooShort(n,r[h+1],r[h],h,t.zoom)||j3(e,t,S((f[0]+r[h+1][0])/2,(f[1]+r[h+1][1])/2),s/2,!1,!d.includes(h+1),!1)})}else Ue.getEditorMidPoints(n,i,t).filter((f,h,m)=>f!==null&&!(pe(n)&&(h===0||h===m.length-1))).forEach(f=>{var h;((h=t.selectedLinearElement)!=null&&h.isEditing||r.length===2)&&j3(e,t,f,s/2,!1,!0,!1)});e.restore()},KL=(e,t,n,i,r)=>{Object.keys(i).forEach(s=>{const o=i[s];if(o!==void 0){const[a,l,c,u]=o;e.save(),e.lineWidth=1/n.zoom.value,t.selectionColor&&(e.strokeStyle=t.selectionColor),s==="rotation"?Vy(e,a+c/2,l+u/2,c/2,!0):e.roundRect?(e.beginPath(),e.roundRect(a,l,c,u,2/n.zoom.value),e.fill(),e.stroke()):Xy(e,a,l,c,u,a+c/2,l+u/2,r,!0),e.restore()}})},Kve=(e,t,n,i,r)=>{const[s,o,,,a,l]=He(i,r),c=3,u=20,d=c/n.zoom.value,f=d/2,h=a-s+d,m=l-o+d,p=Math.min(u/n.zoom.value,h),U=Math.min(u/n.zoom.value,m);e.save(),e.fillStyle=t.selectionColor,e.strokeStyle=t.selectionColor,e.lineWidth=d,[[[-h,-m],[0,f],[p,f],[f,0],[f,U]],[[h-f,-m],[f,f],[-p+f,f],[0,0],[0,U]],[[-h,m],[0,-f],[p,-f],[f,0],[f,-U]],[[h-f,m],[f,-f],[-p+f,-f],[0,0],[0,-U]]].forEach(y=>{const[[w,v],[I,x],[_,T],[A,C],[k,P]]=y;e.save(),e.translate(a,l),e.rotate(i.angle),e.beginPath(),e.moveTo(w+I,v+x),e.lineTo(w+_,v+T),e.stroke(),e.beginPath(),e.moveTo(w+A,v+C),e.lineTo(w+k,v+P),e.stroke(),e.restore()}),e.restore()},Zve=(e,t,n,i)=>{t.save();const r=gd*2/n.zoom.value,s=e.width+r*2,o=e.height+r*2,a=e.x+s/2,l=e.y+o/2,c=-(s/2+r),u=-(o/2+r);t.translate(a+n.scrollX,l+n.scrollY),t.rotate(e.angle),t.lineWidth=1/n.zoom.value,t.strokeStyle=i,t.strokeRect(c,u,s,o),t.restore()},qve=({canvas:e,elementsMap:t,visibleElements:n,selectedElements:i,allElementsMap:r,scale:s,appState:o,renderConfig:a,editorInterface:l,animationState:c,deltaTime:u})=>{var y,w,v,I,x;if(e===null)return{atLeastOneVisibleElement:!1,elementsMap:t};const[d,f]=$y(e,s),h=c,m=Gy({canvas:e,scale:s,normalizedWidth:d,normalizedHeight:f});m.save(),m.scale(o.zoom.value,o.zoom.value);let p;if(n.forEach(_=>{var T;(T=o.selectedLinearElement)!=null&&T.isEditing&&o.selectedLinearElement.elementId===_.id&&_&&(p=_)}),p&&Y3(m,o,p,t),o.selectionElement&&!o.isCropping)try{Zle(o.selectionElement,m,o,a.selectionColor)}catch(_){console.error(_)}if(o.editingTextElement&&ge(o.editingTextElement)){const _=r.get(o.editingTextElement.id);_&&!_.autoResize&&Zve(_,m,o,a.selectionColor)}if(o.isBindingEnabled&&o.suggestedBindings.filter(_=>_!=null).forEach(_=>{Yve(m,o,_,t)}),o.frameToHighlight&&Wve(m,o,o.frameToHighlight,t),o.elementsToHighlight&&WL(m,o,o.elementsToHighlight),o.activeLockedId){const _=r.get(o.activeLockedId),T=_?[_]:At(r,o.activeLockedId);WL(m,o,T,{colors:["#ced4da"],dashed:!0})}const U=i.some(_=>we(_));if(i.length===1&&((y=o.selectedLinearElement)!=null&&y.isEditing)&&o.selectedLinearElement.elementId===i[0].id&&Y3(m,o,i[0],t),o.selectedLinearElement){const _=o.selectedLinearElement,T=i.find(A=>A.id===_.elementId);_.segmentMidPointHoveredCoords?$ve(m,o):(pe(T)?_.hoverPointIndex===0||_.hoverPointIndex===T.points.length-1:_.hoverPointIndex>=0)&&Gve(m,o,t)}if(!o.multiElement&&!((w=o.selectedLinearElement)!=null&&w.isEditing)){const _=UH(i,o,l),T=i.length===1&&xe(i[0]);T&&((v=o.selectedLinearElement)==null?void 0:v.elementId)===i[0].id&&!i[0].locked&&Y3(m,o,i[0],t);const A=a.selectionColor||yi.black;if(_){const C=ve(i),k=[];for(const D of t.values()){const j=[],G=a.remoteSelectedElementIds.get(D.id);if(T&&pe(D)&&(D.startBinding||D.endBinding)||(C.has(D.id)&&!m_(o,D)&&j.push(A),G&&j.push(...G.map(B=>Ky(B,o.collaborators.get(B))))),j.length){const[B,H,$,X,W,Q]=He(D,t,!0);k.push({angle:D.angle,x1:B,y1:H,x2:$,y2:X,selectionColors:D.locked?["#ced4da"]:j,dashed:!!G||D.locked,cx:W,cy:Q,activeEmbeddable:((I=o.activeEmbeddable)==null?void 0:I.element)===D&&o.activeEmbeddable.state==="active",padding:D.id===o.croppingElementId||Et(D)?0:void 0})}}const P=D=>{const j=At(t,D),[G,B,H,$]=nt(j);k.push({angle:0,x1:G,x2:H,y1:B,y2:$,selectionColors:j.some(X=>X.locked)?["#ced4da"]:[yi.black],dashed:!0,cx:G+(H-G)/2,cy:B+($-B)/2,activeEmbeddable:!1})};for(const D of vc(o))P(D);o.editingGroupId&&P(o.editingGroupId),k.forEach(D=>CY(m,o,D))}if(m.save(),m.translate(o.scrollX,o.scrollY),i.length===1){m.fillStyle=yi.white;const C=pH(i[0],o.zoom,t,"mouse",I1(l));if(!o.viewModeEnabled&&_&&!ge(o.editingTextElement)&&!o.croppingElementId&&KL(m,a,o,C,i[0].angle),o.croppingElementId&&!o.isCropping){const k=t.get(o.croppingElementId);k&&Et(k)&&Kve(m,a,o,k,t)}}else if(i.length>1&&!o.isRotating&&!i.some(C=>C.locked)){const C=gd*2/o.zoom.value;m.fillStyle=yi.white;const[k,P,D,j]=nt(i,t),G=m.getLineDash();m.setLineDash([2/o.zoom.value]);const B=m.lineWidth;m.lineWidth=1/o.zoom.value,m.strokeStyle=A,Xy(m,k-C,P-C,D-k+C*2,j-P+C*2,(k+D)/2,(P+j)/2,0),m.lineWidth=B,m.setLineDash(G);const H=O_([k,P,D,j,(k+D)/2,(P+j)/2],0,o.zoom,"mouse",U?{...I1(l),rotation:!0}:I1(l));i.some($=>!$.locked)&&KL(m,a,o,H,0)}m.restore()}(x=o.searchMatches)==null||x.matches.forEach(({id:_,focus:T,matchedLines:A})=>{const C=t.get(_);if(C){const[k,P,,,D,j]=He(C,t,!0);m.save(),o.theme===ke.LIGHT?T?m.fillStyle="rgba(255, 124, 0, 0.4)":m.fillStyle="rgba(255, 226, 0, 0.4)":T?m.fillStyle="rgba(229, 82, 0, 0.4)":m.fillStyle="rgba(99, 52, 0, 0.4)";const G=we(C)?o.zoom.value:1;m.translate(o.scrollX,o.scrollY),m.translate(D,j),m.rotate(C.angle),A.forEach(B=>{(B.showOnCanvas||T)&&m.fillRect(k+B.offsetX/G-D,P+B.offsetY/G-j,B.width/G,B.height/G)}),m.restore()}}),Bve(m,o),m.restore(),Qye({context:m,renderConfig:a,appState:o,normalizedWidth:d,normalizedHeight:f});let b;return a.renderScrollbars&&(b=f7e(t,d,f,o),m.save(),m.fillStyle=d7e,m.strokeStyle="rgba(255,255,255,0.8)",[b.horizontal,b.vertical].forEach(_=>{_&&xX(m,_.x,_.y,_.width,_.height,xo/2)}),m.restore()),{scrollBars:b,atLeastOneVisibleElement:n.length>0,elementsMap:t,animationState:h}},Qve=e=>{const t=qve(e);return e.callback(t),t},ZL="animateInteractiveScene",Jve=e=>{const t=L.useRef(!1),n=L.useRef(null);return L.useEffect(()=>{var c;if(!t.current){t.current=!0;return}const i=new Map,r=new Map,s=new Map,o=new Map,a=new Map;e.appState.collaborators.forEach((u,d)=>{if(u.selectedElementIds)for(const f of Object.keys(u.selectedElementIds))s.has(f)||s.set(f,[]),s.get(f).push(d);!u.pointer||u.pointer.renderCursor===!1||(u.username&&o.set(d,u.username),u.userState&&a.set(d,u.userState),r.set(d,Kr({sceneX:u.pointer.x,sceneY:u.pointer.y},e.appState)),i.set(d,u.button))});const l=((c=e.containerRef)==null?void 0:c.current)&&getComputedStyle(e.containerRef.current).getPropertyValue("--color-selection")||"#6965db";n.current={app:e.app,canvas:e.canvas,elementsMap:e.elementsMap,visibleElements:e.visibleElements,selectedElements:e.selectedElements,allElementsMap:e.allElementsMap,scale:window.devicePixelRatio,appState:e.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:i,remoteSelectedElementIds:s,remotePointerUsernames:o,remotePointerUserStates:a,selectionColor:l,renderScrollbars:e.renderScrollbars},editorInterface:e.editorInterface,callback:e.renderInteractiveSceneCallback,animationState:{bindingHighlight:void 0},deltaTime:0},c5.running(ZL)||c5.start(ZL,({deltaTime:u,state:d})=>{const f=Qve({...n.current,deltaTime:u,animationState:d}).animationState;if(f){for(const h in f)if(f[h]!==void 0)return f}})}),g("canvas",{className:"excalidraw__canvas interactive",style:{width:e.appState.width,height:e.appState.height,cursor:e.appState.viewModeEnabled?Ct.GRAB:Ct.AUTO},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:e.handleCanvasRef,onContextMenu:e.onContextMenu,onPointerMove:e.onPointerMove,onPointerUp:e.onPointerUp,onPointerCancel:e.onPointerCancel,onTouchMove:e.onTouchMove,onPointerDown:e.onPointerDown,onDoubleClick:e.appState.viewModeEnabled?void 0:e.onDoubleClick,children:R("labels.drawingCanvas")})},qL=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,editingGroupId:e.editingGroupId,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,selectionElement:e.selectionElement,selectedGroupIds:e.selectedGroupIds,selectedLinearElement:e.selectedLinearElement,multiElement:e.multiElement,isBindingEnabled:e.isBindingEnabled,suggestedBindings:e.suggestedBindings,isRotating:e.isRotating,elementsToHighlight:e.elementsToHighlight,collaborators:e.collaborators,activeEmbeddable:e.activeEmbeddable,snapLines:e.snapLines,zenModeEnabled:e.zenModeEnabled,editingTextElement:e.editingTextElement,isCropping:e.isCropping,croppingElementId:e.croppingElementId,searchMatches:e.searchMatches,activeLockedId:e.activeLockedId}),ewe=(e,t)=>e.selectionNonce!==t.selectionNonce||e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements||e.selectedElements!==t.selectedElements||e.renderScrollbars!==t.renderScrollbars?!1:Ki(qL(e.appState),qL(t.appState)),twe=ue.memo(Jve,ewe),nwe=e=>{const t=L.useRef(null),n=L.useRef(!1);return L.useEffect(()=>{e.canvas.style.width=`${e.appState.width}px`,e.canvas.style.height=`${e.appState.height}px`,e.canvas.width=e.appState.width*e.scale,e.canvas.height=e.appState.height*e.scale},[e.appState.height,e.appState.width,e.canvas,e.scale]),L.useEffect(()=>{const i=t.current;if(!i)return;const r=e.canvas;n.current||(n.current=!0,i.replaceChildren(r),r.classList.add("excalidraw__canvas","static")),cX({canvas:r,rc:e.rc,scale:e.scale,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,visibleElements:e.visibleElements,appState:e.appState,renderConfig:e.renderConfig},r5())}),g("div",{className:"excalidraw__canvas-wrapper",ref:t})},QL=e=>({zoom:e.zoom,scrollX:e.scrollX,scrollY:e.scrollY,width:e.width,height:e.height,viewModeEnabled:e.viewModeEnabled,openDialog:e.openDialog,hoveredElementIds:e.hoveredElementIds,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,theme:e.theme,shouldCacheIgnoreZoom:e.shouldCacheIgnoreZoom,viewBackgroundColor:e.viewBackgroundColor,exportScale:e.exportScale,selectedElementsAreBeingDragged:e.selectedElementsAreBeingDragged,gridSize:e.gridSize,gridStep:e.gridStep,frameRendering:e.frameRendering,selectedElementIds:e.selectedElementIds,frameToHighlight:e.frameToHighlight,editingGroupId:e.editingGroupId,currentHoveredFontFamily:e.currentHoveredFontFamily,croppingElementId:e.croppingElementId}),iwe=(e,t)=>e.sceneNonce!==t.sceneNonce||e.scale!==t.scale||e.elementsMap!==t.elementsMap||e.visibleElements!==t.visibleElements?!1:Ki(QL(e.appState),QL(t.appState))&&Ki(e.renderConfig,t.renderConfig),rwe=ue.memo(nwe,iwe),AY=({canvas:e,rc:t,newElement:n,elementsMap:i,allElementsMap:r,scale:s,appState:o,renderConfig:a})=>{var l;if(e){const[c,u]=$y(e,s),d=Gy({canvas:e,scale:s,normalizedWidth:c,normalizedHeight:u});if(d.save(),d.scale(o.zoom.value,o.zoom.value),n&&n.type!=="selection"){if(Qa(n))return;if((n.frameId||((l=o.frameToHighlight)==null?void 0:l.id))&&o.frameRendering.enabled&&o.frameRendering.clip){const h=y6(n,i,o);h&&O4(n,h,o,i)&&Tv(h,d,a,o)}Tu(n,i,r,t,d,a,o)}else d.clearRect(0,0,c,u);d.restore()}},swe=bp(e=>{AY(e)},{trailing:!0}),owe=(e,t)=>{if(t){swe(e);return}AY(e)},awe=e=>{const t=L.useRef(null);return L.useEffect(()=>{t.current&&owe({canvas:t.current,scale:e.scale,newElement:e.appState.newElement,elementsMap:e.elementsMap,allElementsMap:e.allElementsMap,rc:e.rc,renderConfig:e.renderConfig,appState:e.appState},r5())}),g("canvas",{className:"excalidraw__canvas",style:{width:e.appState.width,height:e.appState.height},width:e.appState.width*e.scale,height:e.appState.height*e.scale,ref:t})},lwe=5e3,cwe=({message:e,onClose:t,closable:n=!1,duration:i=lwe,style:r})=>{const s=L.useRef(0),o=i!==1/0,a=L.useCallback(()=>{o&&(s.current=window.setTimeout(()=>t(),i))},[t,i,o]);return L.useEffect(()=>{if(o)return a(),()=>clearTimeout(s.current)},[a,e,i,o]),N("div",{className:"Toast",onMouseEnter:o?()=>clearTimeout(s==null?void 0:s.current):void 0,onMouseLeave:o?a:void 0,style:r,children:[g("p",{className:"Toast__message",children:e}),n&&g(Xe,{icon:au,"aria-label":"close",type:"icon",onClick:t,className:"close"})]})},uwe=({app:e,activeLockedId:t})=>{const n=e.scene.getElement(t),i=n?[n]:At(e.scene.getNonDeletedElementsMap(),t);if(i.length===0)return null;const[r,s]=nt(i),{x:o,y:a}=Kr({sceneX:r,sceneY:s},e.state);return g("div",{className:"UnlockPopup",style:{bottom:`${e.state.height+12-a+e.state.offsetTop}px`,left:`${o-e.state.offsetLeft}px`},onClick:()=>{mi.flushSync(()=>{const l=Cp(i,e.state);e.setState({selectedElementIds:i.reduce((c,u)=>({...c,[u.id]:!0}),{}),selectedGroupIds:l,activeLockedId:null})}),e.actionManager.executeAction(DX)},title:R("labels.elementLock.unlock"),children:pde})},MY=ue.createContext(null),RY=ue.createContext(null),Wv={formFactor:"desktop",desktopUIMode:"full",userAgent:IB(typeof navigator<"u"?navigator.userAgent:""),isTouchScreen:!1,canFitSidebar:!1,isLandscape:!0},nI=ue.createContext(Wv);nI.displayName="EditorInterfaceContext";const iI=ue.createContext({container:null,id:null});iI.displayName="ExcalidrawContainerContext";const rI=ue.createContext([]);rI.displayName="ExcalidrawElementsContext";const sI=ue.createContext({...ia(),width:0,height:0,offsetLeft:0,offsetTop:0});sI.displayName="ExcalidrawAppStateContext";const oI=ue.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});oI.displayName="ExcalidrawSetAppStateContext";const aI=ue.createContext(null);aI.displayName="ExcalidrawActionManagerContext";const po=()=>L.useContext(MY),zp=()=>L.useContext(RY),Nn=()=>L.useContext(nI),ua=()=>p1(Nn()),Dr=()=>L.useContext(iI),sE=()=>L.useContext(rI),Hp=()=>L.useContext(sI),xn=()=>L.useContext(oI),Nr=()=>L.useContext(aI);let Em=!1,W3=0,vm=null,bu=!1,wm=!1,K3=!1,_m={horizontal:null,vertical:null},Fl=0,Tm=!1;const Z3=new Map;let q3=!1,JL=0,eD=!1,yu=null;const Ut={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null};class lI extends ue.Component{constructor(n){super(n);F(this,"canvas");F(this,"interactiveCanvas",null);F(this,"rc");F(this,"unmounted",!1);F(this,"actionManager");F(this,"editorInterface",Wv);F(this,"stylesPanelMode",p1(Wv));F(this,"excalidrawContainerRef",ue.createRef());F(this,"scene");F(this,"fonts");F(this,"renderer");F(this,"visibleElements");F(this,"resizeObserver");F(this,"nearestScrollableContainer");F(this,"library");F(this,"libraryItemsFromStorage");F(this,"id");F(this,"store");F(this,"history");F(this,"excalidrawContainerValue");F(this,"files",{});F(this,"imageCache",new Map);F(this,"iFrameRefs",new Map);F(this,"embedsValidationStatus",new Map);F(this,"initializedEmbeds",new Set);F(this,"handleToastClose",()=>{this.setToast(null)});F(this,"elementsPendingErasure",new Set);F(this,"flowChartCreator",new Eue);F(this,"flowChartNavigator",new yue);F(this,"hitLinkElement");F(this,"lastPointerDownEvent",null);F(this,"lastPointerUpEvent",null);F(this,"lastPointerMoveEvent",null);F(this,"lastPointerMoveCoords",null);F(this,"lastViewportPosition",{x:0,y:0});F(this,"animationFrameHandler",new H3e);F(this,"laserTrails",new l7e(this.animationFrameHandler,this));F(this,"eraserTrail",new v7e(this.animationFrameHandler,this));F(this,"lassoTrail",new E7e(this.animationFrameHandler,this));F(this,"onChangeEmitter",new Ys);F(this,"onPointerDownEmitter",new Ys);F(this,"onPointerUpEmitter",new Ys);F(this,"onUserFollowEmitter",new Ys);F(this,"onScrollChangeEmitter",new Ys);F(this,"missingPointerEventCleanupEmitter",new Ys);F(this,"onRemoveEventListenersEmitter",new Ys);F(this,"updateEditorAtom",(n,...i)=>{const r=Xr.set(n,...i);return this.triggerRender(),r});F(this,"getEffectiveGridSize",()=>B0(this)?this.state.gridSize:null);F(this,"updateEmbedValidationStatus",(n,i)=>{this.embedsValidationStatus.set(n.id,i),qt.delete(n)});F(this,"updateEmbeddables",()=>{const n=new Set;let i=!1;this.scene.getNonDeletedElements().filter(r=>{if(or(r)){if(n.add(r.id),!this.embedsValidationStatus.has(r.id)){i=!0;const s=V2(r.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(r,s)}}else Wl(r)&&n.add(r.id);return!1}),i&&this.scene.triggerUpdate(),this.iFrameRefs.forEach((r,s)=>{n.has(s)||this.iFrameRefs.delete(s)})});F(this,"getFrameNameDOMId",n=>`${this.id}-frame-name-${n.id}`);F(this,"frameNameBoundsCache",{get:n=>{let i=this.frameNameBoundsCache._cache.get(n.id);if(!i||i.zoom!==this.state.zoom.value||i.versionNonce!==n.versionNonce){const r=document.getElementById(this.getFrameNameDOMId(n));if(r){const s=r.getBoundingClientRect(),o=Nt({clientX:s.x,clientY:s.y},this.state),a=Nt({clientX:s.right,clientY:s.bottom},this.state);return i={x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y,angle:0,zoom:this.state.zoom.value,versionNonce:n.versionNonce},this.frameNameBoundsCache._cache.set(n.id,i),i}return null}return i},_cache:new Map});F(this,"resetEditingFrame",n=>{var i;n&&this.scene.mutateElement(n,{name:((i=n.name)==null?void 0:i.trim())||null}),this.setState({editingFrame:null})});F(this,"renderFrameNames",()=>{var s;if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return this.state.editingFrame&&this.resetEditingFrame(null),null;const n=this.state.theme===ke.DARK,i=this.scene.getNonDeletedFramesLikes(),r=i.length>0&&(s=this.state.searchMatches)!=null&&s.focusedId&&we(this.scene.getElement(this.state.searchMatches.focusedId))?this.state.searchMatches.matches.find(o=>o.focus):null;return i.map(o=>{if(!x6(o,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return this.state.editingFrame===o.id&&this.resetEditingFrame(o),null;const{x:a,y:l}=Kr({sceneX:o.x,sceneY:o.y},this.state),c=6;let u;const d=Nz(o);if(o.id===this.state.editingFrame){const f=d;u=g("input",{autoFocus:!0,value:f,onChange:h=>{this.scene.mutateElement(o,{name:h.target.value})},onFocus:h=>h.target.select(),onBlur:()=>this.resetEditingFrame(o),onKeyDown:h=>{(h.key===V.ESCAPE||h.key===V.ENTER)&&this.resetEditingFrame(o)},style:{background:this.state.viewBackgroundColor,filter:n?F9:"none",zIndex:2,border:"none",display:"block",padding:`${c}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:`${Ht.nameFontSize}px`,transform:`translate(-${c}px, ${c}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-a-c}px`},size:f.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else u=d;return g("div",{id:this.getFrameNameDOMId(o),className:gr.FRAME_NAME,style:{position:"absolute",bottom:`${this.state.height+Ht.nameOffsetY-l+this.state.offsetTop}px`,left:`${a-this.state.offsetLeft}px`,zIndex:2,fontSize:Ht.nameFontSize,color:n?Ht.nameColorDarkTheme:Ht.nameColorLightTheme,lineHeight:Ht.nameLineHeight,width:"max-content",maxWidth:(r==null?void 0:r.id)===o.id&&(r!=null&&r.focus)?"none":`${o.width*this.state.zoom.value}px`,overflow:o.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:Ct.MOVE,pointerEvents:this.state.viewModeEnabled?wu.disabled:wu.enabled},onPointerDown:f=>this.handleCanvasPointerDown(f),onWheel:f=>this.handleWheel(f),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:o.id})},children:u},o.id)})});F(this,"focusContainer",()=>{var n;(n=this.excalidrawContainerRef.current)==null||n.focus()});F(this,"getSceneElementsIncludingDeleted",()=>this.scene.getElementsIncludingDeleted());F(this,"getSceneElementsMapIncludingDeleted",()=>this.scene.getElementsMapIncludingDeleted());F(this,"getSceneElements",()=>this.scene.getNonDeletedElements());F(this,"onInsertElements",n=>{this.addElementsFromPasteOrLibrary({elements:n,position:"center",files:null})});F(this,"onExportImage",async(n,i,r)=>{Je("export",n,"ui");const s=await Wy(n,i,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:r.exportingFrame}).catch(FB).catch(o=>{console.error(o),this.setState({errorMessage:o.message})});this.state.exportEmbedScene&&s&&OT(s)&&this.setState({fileHandle:s})});F(this,"magicGenerations",new Map);F(this,"updateMagicGeneration",({frameElement:n,data:i})=>{i.status==="pending"?this.scene.mutateElement(n,{customData:{generationData:void 0}},{informMutation:!1,isDragging:!1}):this.scene.mutateElement(n,{customData:{generationData:i}},{informMutation:!1,isDragging:!1}),this.magicGenerations.set(n.id,i),this.triggerRender()});F(this,"plugins",{});F(this,"onMagicframeToolSelect",()=>{const n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(n.length===0)this.setActiveTool({type:Qn.magicframe}),Je("ai","tool-select (empty-selection)","d2c");else{const i=n.length===1&&F2(n[0])&&n[0];if(!i&&n.some(s=>we(s)||s.frameId)){this.setActiveTool({type:Qn.magicframe});return}Je("ai","tool-select (existing selection)","d2c");let r;if(i)r=i;else{const[s,o,a,l]=nt(n),c=50;r=G4({...Ht,x:s-c,y:o-c,width:a-s+c*2,height:l-o+c*2,opacity:100,locked:!1}),this.scene.insertElement(r);for(const u of n)this.scene.mutateElement(u,{frameId:r.id});this.setState({selectedElementIds:{[r.id]:!0}})}this.onMagicFrameGenerate(r,"upstream")}});F(this,"openEyeDropper",({type:n})=>{this.updateEditorAtom(Ay,{swapPreviewOnAlt:!0,colorPickerType:n==="stroke"?"elementStroke":"elementBackground",onSelect:(i,r)=>{const s=n==="background"&&r.altKey||n==="stroke"&&!r.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?s?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:i},captureUpdate:K.IMMEDIATELY}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:i},captureUpdate:K.IMMEDIATELY}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?Ie(a,{[s?"strokeColor":"backgroundColor"]:i}):a),captureUpdate:K.IMMEDIATELY})},keepOpenOnAlt:!1})});F(this,"dismissLinearEditor",()=>{setTimeout(()=>{var n;(n=this.state.selectedLinearElement)!=null&&n.isEditing&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isEditing:!1}})})});F(this,"syncActionResult",an(n=>{var s,o,a,l,c,u;if(this.unmounted||n===!1)return;this.store.scheduleAction(n.captureUpdate);let i=!1,r=null;if(n.elements&&(this.scene.replaceAllElements(n.elements),i=!0),n.files&&(this.addMissingFiles(n.files,n.replaceFiles),this.addNewImagesToImageCache()),n.appState||r||this.state.contextMenu){let d=((s=n==null?void 0:n.appState)==null?void 0:s.viewModeEnabled)||!1,f=((o=n==null?void 0:n.appState)==null?void 0:o.zenModeEnabled)||!1;const h=((a=n==null?void 0:n.appState)==null?void 0:a.theme)||this.props.theme||ke.LIGHT,m=((l=n==null?void 0:n.appState)==null?void 0:l.name)??this.state.name,p=((c=n==null?void 0:n.appState)==null?void 0:c.errorMessage)??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(d=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(f=this.props.zenModeEnabled),r=((u=n.appState)==null?void 0:u.editingTextElement)||null,n.elements&&r&&n.elements.forEach(U=>{(r==null?void 0:r.id)===U.id&&r!==U&&Q4(U)&&ge(U)&&(r=U)}),r!=null&&r.isDeleted&&(r=null),this.setState(U=>{const b=n.appState||{};return{...U,...b,contextMenu:null,editingTextElement:r,viewModeEnabled:d,zenModeEnabled:f,theme:h,name:m,errorMessage:p}}),i=!0}i||this.scene.triggerUpdate()}));F(this,"onBlur",an(()=>{bu=!1,this.setState({isBindingEnabled:!0})}));F(this,"onUnload",()=>{this.onBlur()});F(this,"disableEvent",n=>{n.preventDefault()});F(this,"resetHistory",()=>{this.history.clear()});F(this,"resetStore",()=>{this.store.clear()});F(this,"resetScene",an(n=>{this.scene.replaceAllElements([]),this.setState(i=>({...ia(),isLoading:n!=null&&n.resetLoadingState?!1:i.isLoading,theme:this.state.theme})),this.resetStore(),this.resetHistory()}));F(this,"initializeScene",async()=>{var s;"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async o=>{if(!o.files.length)return;const a=o.files[0],l=await a.getFile();this.loadFileToCanvas(new File([l],l.name||"",{type:l.type}),a)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let n=null;try{typeof this.props.initialData=="function"?n=await this.props.initialData()||null:n=await this.props.initialData||null,n!=null&&n.libraryItems&&this.library.updateLibrary({libraryItems:n.libraryItems,merge:!0}).catch(o=>{console.error(o)})}catch(o){console.error(o),n={appState:{errorMessage:o.message||"Encountered an error during importing or restoring scene data"}}}const i=Sd(n,null,null,{repairBindings:!0,deleteInvisibleElements:!0}),r=i.appState.activeTool;i.appState.preferredSelectionTool.initialized||(i.appState.preferredSelectionTool={type:this.editorInterface.formFactor==="phone"?"lasso":"selection",initialized:!0}),i.appState={...i.appState,theme:this.props.theme||i.appState.theme,openSidebar:((s=i.appState)==null?void 0:s.openSidebar)||this.state.openSidebar,activeTool:r.type==="image"||r.type==="lasso"||r.type==="selection"?{...r,type:i.appState.preferredSelectionTool.type}:i.appState.activeTool,isLoading:!1,toast:this.state.toast},n!=null&&n.scrollToContent&&(i.appState={...i.appState,...y0(i.elements,{...i.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.resetStore(),this.resetHistory(),this.syncActionResult({...i,captureUpdate:K.NEVER}),this.clearImageShapeCache(),this.fonts.loadSceneFonts().then(o=>{this.fonts.onLoaded(o)}),uh(window.location.href)&&this.scrollToContent(window.location.href,{animate:!1})});F(this,"getFormFactor",(n,i)=>this.props.UIOptions.formFactor??ase(n,i));F(this,"refreshEditorInterface",()=>{const n=this.excalidrawContainerRef.current;if(!n)return;const{width:i,height:r}=n.getBoundingClientRect(),s=lse(),o=IB(typeof navigator<"u"?navigator.userAgent:""),a=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:ese,l=D2(this.editorInterface,{desktopUIMode:this.props.UIOptions.desktopUIMode??s??this.editorInterface.desktopUIMode,formFactor:this.getFormFactor(i,r),userAgent:o,canFitSidebar:i>a,isLandscape:i>r});this.editorInterface=l,this.reconcileStylesPanelMode(l)});F(this,"reconcileStylesPanelMode",n=>{const i=p1(n);if(i===this.stylesPanelMode)return;const r=this.stylesPanelMode;this.stylesPanelMode=i,r!=="full"&&i==="full"&&this.setState(s=>({preferredSelectionTool:{type:"selection",initialized:!0}}))});F(this,"setDesktopUIMode",n=>{const i=use(n);this.editorInterface=D2(this.editorInterface,{desktopUIMode:i}),this.reconcileStylesPanelMode(this.editorInterface)});F(this,"onResize",an(()=>{this.scene.getElementsIncludingDeleted().forEach(n=>qt.delete(n)),this.refreshEditorInterface(),this.updateDOMRect(),this.setState({})}));F(this,"onFullscreenChange",()=>{var n;!document.fullscreenElement&&((n=this.state.activeEmbeddable)==null?void 0:n.state)==="active"&&this.setState({activeEmbeddable:null})});F(this,"renderInteractiveSceneCallback",({atLeastOneVisibleElement:n,scrollBars:i,elementsMap:r})=>{i&&(_m=i);const s=this.state.editingTextElement?!1:!n&&r.size>0;this.state.scrolledOutside!==s&&this.setState({scrolledOutside:s}),this.scheduleImageRefresh()});F(this,"onScroll",sl(()=>{const{offsetTop:n,offsetLeft:i}=this.getCanvasOffsets();this.setState(r=>r.offsetLeft===i&&r.offsetTop===n?null:{offsetTop:n,offsetLeft:i})},Fre));F(this,"onCut",an(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||ka(n.target)||(this.actionManager.executeAction(Gk,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onCopy",an(n=>{var r;!((r=this.excalidrawContainerRef.current)!=null&&r.contains(document.activeElement))||ka(n.target)||(this.actionManager.executeAction(rb,"keyboard",n),n.preventDefault(),n.stopPropagation())}));F(this,"onTouchStart",n=>{if(H9&&n.preventDefault(),!Em){Em=!0,n.touches.length===1&&(vm={x:n.touches[0].clientX,y:n.touches[0].clientY}),clearTimeout(W3),W3=window.setTimeout(lI.resetTapTwice,Nre);return}if(Em&&n.touches.length===1&&vm){const i=n.touches[0];ct(S(i.clientX,i.clientY),S(vm.x,vm.y))<=Yre&&(this.lassoTrail.endPath(),this.deselectElements(),this.handleCanvasDoubleClick({clientX:i.clientX,clientY:i.clientY})),Em=!1,clearTimeout(W3)}n.touches.length===2&&this.setState({selectedElementIds:xt({},this.state),activeEmbeddable:null})});F(this,"onTouchEnd",n=>{this.resetContextMenuTimer(),n.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:xt(this.state.previousSelectedElementIds,this.state)}):Ut.pointers.clear()});F(this,"pasteFromClipboard",an(async n=>{var u;const i=!!q3,r=document.activeElement,s=(u=this.excalidrawContainerRef.current)==null?void 0:u.contains(r);if(n&&!s)return;const o=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(n&&(!(o instanceof HTMLCanvasElement)||ka(r)))return;const a=await Iv(n),l=a.getFiles(),c=await Oye(a,i);if(this.props.onPaste)try{if(await this.props.onPaste(c,n)===!1)return}catch(d){console.error(d)}await this.insertClipboardContent(c,l,i),this.setActiveTool({type:this.state.preferredSelectionTool.type},!0),n==null||n.preventDefault()}));F(this,"addElementsFromPasteOrLibrary",n=>{var T,A;const i=Id(n.elements,null,{deleteInvisibleElements:!0}),[r,s,o,a]=nt(i),l=Gi(r,o)/2,c=Gi(s,a)/2,u=typeof n.position=="object"?n.position.clientX:n.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,d=typeof n.position=="object"?n.position.clientY:n.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:f,y:h}=Nt({clientX:u,clientY:d},this.state),m=f-l,p=h-c,[U,b]=Pn(m,p,this.getEffectiveGridSize()),{duplicatedElements:y}=_1({type:"everything",elements:i.map(C=>Ie(C,{x:C.x+U-r,y:C.y+b-s})),randomizeSeed:!n.retainSeed}),w=this.scene.getElementsIncludingDeleted();let v=[...w,...y];v=((A=(T=this.props).onDuplicate)==null?void 0:A.call(T,v,w))||v,lo(v,ve(y));const x=this.getTopLayerFrameAtSceneCoords({x:f,y:h});if(x){const C=Xle(y,x);w1(v,C,x,this.state)}this.scene.replaceAllElements(v),y.forEach(C=>{if(ge(C)&&Lt(C)){const k=Yn(C,this.scene.getElementsMapIncludingDeleted());Qi(C,k,this.scene)}}),nse&&Ja.loadElementsFonts(y).then(C=>{this.fonts.onLoaded(C)}),n.files&&this.addMissingFiles(n.files);const _=U_(y);this.store.scheduleCapture(),this.setState({...this.state,openSidebar:this.state.openSidebar&&this.editorInterface.canFitSidebar&&Xr.get(ZT)?this.state.openSidebar:null,...Si({editingGroupId:null,selectedElementIds:_.reduce((C,k)=>(Lt(k)||(C[k.id]=!0),C),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{n.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:this.state.preferredSelectionTool.type},!0),n.fitToContent&&this.scrollToContent(y,{fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()})});F(this,"setAppState",(n,i)=>{this.setState(n,i)});F(this,"removePointer",n=>{Fl&&this.resetContextMenuTimer(),Ut.pointers.delete(n.pointerId)});F(this,"toggleLock",(n="ui")=>{this.state.activeTool.locked||Je("toolbar","toggleLock",`${n} (${this.editorInterface.formFactor==="phone"?"mobile":"desktop"})`),this.setState(i=>({activeTool:{...i.activeTool,...tn(this.state,i.activeTool.locked?{type:this.state.preferredSelectionTool.type}:i.activeTool),locked:!i.activeTool.locked}}))});F(this,"updateFrameRendering",n=>{this.setState(i=>{const r=typeof n=="function"?n(i.frameRendering):n;return{frameRendering:{enabled:(r==null?void 0:r.enabled)??i.frameRendering.enabled,clip:(r==null?void 0:r.clip)??i.frameRendering.clip,name:(r==null?void 0:r.name)??i.frameRendering.name,outline:(r==null?void 0:r.outline)??i.frameRendering.outline}}})});F(this,"togglePenMode",n=>{this.setState(i=>({penMode:n??!i.penMode,penDetected:!0}))});F(this,"onHandToolToggle",()=>{this.actionManager.executeAction(J2e)});F(this,"zoomCanvas",n=>{this.setState({...Pu({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Va(n)},this.state)})});F(this,"cancelInProgressAnimation",null);F(this,"scrollToContent",(n=this.scene.getNonDeletedElements(),i)=>{var l;if(typeof n=="string"){let c;if(uh(n)?c=eue(n):c=n,c){const u=this.scene.getElementsFromId(c);u!=null&&u.length?this.scrollToContent(u,{fitToContent:(i==null?void 0:i.fitToContent)??!0,animate:(i==null?void 0:i.animate)??!0}):uh(n)&&this.setState({toast:{message:R("elementLink.notFound"),duration:3e3,closable:!0}})}return}(l=this.cancelInProgressAnimation)==null||l.call(this);const r=Array.isArray(n)?n:[n];let s=this.state.zoom,o=this.state.scrollX,a=this.state.scrollY;if(i!=null&&i.fitToContent||i!=null&&i.fitToViewport){const{appState:c}=Dy({canvasOffsets:i.canvasOffsets,targetElements:r,appState:this.state,fitToViewport:!!(i!=null&&i.fitToViewport),viewportZoomFactor:i==null?void 0:i.viewportZoomFactor,minZoom:i==null?void 0:i.minZoom,maxZoom:i==null?void 0:i.maxZoom});s=c.zoom,o=c.scrollX,a=c.scrollY}else{const c=y0(r,this.state);o=c.scrollX,a=c.scrollY}if(i!=null&&i.animate){const c=this.state.scrollX,u=this.state.scrollY,d=this.state.zoom.value,f=Ose({fromValues:{scrollX:c,scrollY:u,zoom:d},toValues:{scrollX:o,scrollY:a,zoom:s.value},interpolateValue:(h,m,p,U)=>{if(U==="zoom")return h*Math.pow(m/h,ol(p))},onStep:({scrollX:h,scrollY:m,zoom:p})=>{this.setState({scrollX:h,scrollY:m,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:(i==null?void 0:i.duration)??500});this.cancelInProgressAnimation=()=>{f(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:o,scrollY:a,zoom:s})});F(this,"maybeUnfollowRemoteUser",()=>{this.state.userToFollow&&this.setState({userToFollow:null})});F(this,"translateCanvas",n=>{var i;(i=this.cancelInProgressAnimation)==null||i.call(this),this.maybeUnfollowRemoteUser(),this.setState(n)});F(this,"setToast",n=>{this.setState({toast:n})});F(this,"restoreFileFromShare",async()=>{try{const n=await caches.open("web-share-target"),i=await n.match("shared-file");if(i){const r=await i.blob(),s=new File([r],r.name||"",{type:r.type});this.loadFileToCanvas(s,null),await n.delete("shared-file"),window.history.replaceState(null,Ec,window.location.pathname)}}catch(n){this.setState({errorMessage:n.message})}});F(this,"addFiles",an(n=>{const{addedFiles:i}=this.addMissingFiles(n);this.clearImageShapeCache(i),this.scene.triggerUpdate(),this.addNewImagesToImageCache()}));F(this,"addMissingFiles",(n,i=!1)=>{const r=i?{}:{...this.files},s={},o=Array.isArray(n)?n:Object.values(n);for(const a of o)if(!r[a.id]&&(s[a.id]=a,r[a.id]=a,a.mimeType===Te.svg))try{const l=fye(AM(hye(a.dataURL)),Te.svg);a.dataURL!==l&&(a.version=(a.version??1)+1,a.dataURL=l)}catch(l){console.error(l)}return this.files=r,{addedFiles:s}});F(this,"updateScene",an(n=>{const{elements:i,appState:r,collaborators:s,captureUpdate:o}=n;if(o){const a=i||void 0,l=r?ch({...this.store.snapshot.appState,...r}):void 0;this.store.scheduleMicroAction({action:o,elements:a,appState:l})}r&&this.setState(r),i&&this.scene.replaceAllElements(i),s&&this.setState({collaborators:s})}));F(this,"applyDeltas",(n,i)=>{const r=Ud.squash(...n),s={...this.state},o=new Map(this.scene.getElementsMapIncludingDeleted());return Ud.applyTo(r,o,s,i)});F(this,"mutateElement",(n,i,r=!0)=>this.scene.mutateElement(n,i,{informMutation:r,isDragging:!1}));F(this,"triggerRender",n=>{n===!0?this.scene.triggerUpdate():this.setState({})});F(this,"toggleSidebar",({name:n,tab:i,force:r})=>{var a,l;let s;r===void 0?s=((a=this.state.openSidebar)==null?void 0:a.name)===n&&((l=this.state.openSidebar)==null?void 0:l.tab)===i?null:n:s=r?n:null;const o=s?{name:s}:null;return o&&i&&(o.tab=i),this.setState({openSidebar:o}),!!s});F(this,"updateCurrentCursorPosition",an(n=>{this.lastViewportPosition.x=n.clientX,this.lastViewportPosition.y=n.clientY}));F(this,"getEditorUIOffsets",()=>{var o,a,l,c,u,d,f,h,m,p;const n=((c=(l=(a=(o=this.excalidrawContainerRef)==null?void 0:o.current)==null?void 0:a.querySelector(".App-toolbar"))==null?void 0:l.getBoundingClientRect())==null?void 0:c.bottom)??0,i=(f=(d=(u=this.excalidrawContainerRef)==null?void 0:u.current)==null?void 0:d.querySelector(".sidebar"))==null?void 0:f.getBoundingClientRect(),r=(p=(m=(h=this.excalidrawContainerRef)==null?void 0:h.current)==null?void 0:m.querySelector(".App-menu__left"))==null?void 0:p.getBoundingClientRect(),s=16;return b0().rtl?{top:n+s,right:Math.max(this.state.width-((r==null?void 0:r.left)??this.state.width),0)+s,bottom:s,left:Math.max((i==null?void 0:i.right)??0,0)+s}:{top:n+s,right:Math.max(this.state.width-((i==null?void 0:i.left)??this.state.width)+s,0),bottom:s,left:Math.max((r==null?void 0:r.right)??0,0)+s}});F(this,"onKeyDown",an(n=>{var o,a,l,c,u,d;if("Proxy"in window&&(!n.shiftKey&&/^[A-Z]$/.test(n.key)||n.shiftKey&&/^[a-z]$/.test(n.key))&&(n=new Proxy(n,{get(f,h){const m=f[h];return typeof m=="function"?m.bind(f):h==="key"?n.shiftKey?f.key.toUpperCase():f.key.toLowerCase():m}})),!I4(n.target)){if((n.key===V.ESCAPE||n.key===V.ENTER)&&this.state.croppingElementId){this.finishImageCropping();return}const f=Ge(this.scene.getNonDeletedElementsMap(),this.state);if(f.length===1&&Et(f[0])&&n.key===V.ENTER){this.startImageCropping(f[0]);return}if(n.key===V.ESCAPE)this.updateEditorAtom(Sa,null);else if(n.key===V.TAB&&(document.activeElement===((o=this.excalidrawContainerRef)==null?void 0:o.current)||(a=document.activeElement)!=null&&a.classList.contains(gr.CONVERT_ELEMENT_TYPE_POPUP))){n.preventDefault();const m=Zy(f);((l=Xr.get(Sa))==null?void 0:l.type)==="panel"&&OX(this,{conversionType:m,direction:n.shiftKey?"left":"right"})&&this.store.scheduleCapture(),m&&this.updateEditorAtom(Sa,{type:"panel"})}if(n.key===V.ESCAPE&&this.flowChartCreator.isCreatingChart){this.flowChartCreator.clear(),this.triggerRender(!0);return}const h=Om(n.key);if(n[V.CTRL_OR_CMD]&&h&&!n.shiftKey){n.preventDefault();const m=Ge(this.scene.getNonDeletedElementsMap(),this.state);m.length===1&&oy(m[0])&&this.flowChartCreator.createNodes(m[0],this.state,CM(n.key),this.scene),(c=this.flowChartCreator.pendingNodes)!=null&&c.length&&!H2(this.flowChartCreator.pendingNodes,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(this.flowChartCreator.pendingNodes,{animate:!0,duration:300,fitToContent:!0,canvasOffsets:this.getEditorUIOffsets()});return}if(n.altKey){const m=Ge(this.scene.getNonDeletedElementsMap(),this.state);if(m.length===1&&h){n.preventDefault();const p=this.flowChartNavigator.exploreByDirection(m[0],this.scene.getNonDeletedElementsMap(),CM(n.key));if(p){this.setState(b=>({selectedElementIds:xt({[p]:!0},b)}));const U=this.scene.getNonDeletedElementsMap().get(p);U&&!H2([U],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())&&this.scrollToContent(U,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})}return}}}if(n[V.CTRL_OR_CMD]&&n.key===V.P&&!n.shiftKey&&!n.altKey){this.setToast({message:R("commandPalette.shortcutHint",{shortcut:Zi("commandPalette")})}),n.preventDefault();return}if(n[V.CTRL_OR_CMD]&&n.key.toLowerCase()===V.V&&(q3=n.shiftKey,clearTimeout(JL),JL=window.setTimeout(()=>{q3=!1},100)),n[V.CTRL_OR_CMD]&&ka(n.target)&&(n.code===it.MINUS||n.code===it.EQUAL)){n.preventDefault();return}if(ka(n.target)&&n.key!==V.ESCAPE||Om(n.key)&&I4(n.target))return;if(n.key===V.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(n.key.toLowerCase()===V.E&&n.shiftKey&&n[V.CTRL_OR_CMD]){n.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(n.key===V.PAGE_UP||n.key===V.PAGE_DOWN){let f=(n.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;n.key===V.PAGE_DOWN&&(f=-f),n.shiftKey?this.translateCanvas(h=>({scrollX:h.scrollX+f})):this.translateCanvas(h=>({scrollY:h.scrollY+f}))}if(((u=this.state.openDialog)==null?void 0:u.name)==="elementLinkSelector"||this.actionManager.handleKeyDown(n)||this.state.viewModeEnabled)return;if(n[V.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),Om(n.key)){let f=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});const h=f.find(pe),m=new Set;f.filter(pe).filter(y=>{const w=y.startBinding&&!f.some(I=>{var x;return I.id===((x=y.startBinding)==null?void 0:x.elementId)}),v=y.endBinding&&!f.some(I=>{var x;return I.id===((x=y.endBinding)==null?void 0:x.elementId)});return w||v}).forEach(y=>m.add(y.id)),f=f.filter(y=>!m.has(y.id));const p=this.getEffectiveGridSize()&&(n.shiftKey?pA:this.getEffectiveGridSize())||(n.shiftKey?Tre:pA);let U=0,b=0;n.key===V.ARROW_LEFT?U=-p:n.key===V.ARROW_RIGHT?U=p:n.key===V.ARROW_UP?b=-p:n.key===V.ARROW_DOWN&&(b=p),f.forEach(y=>{this.scene.mutateElement(y,{x:y.x+U,y:y.y+b},{informMutation:!1,isDragging:!1}),fr(y,this.scene,{simultaneouslyUpdated:f})}),this.setState({suggestedBindings:V8(f.filter(y=>y.id!==(h==null?void 0:h.id)||p!==0),this.scene.getNonDeletedElementsMap(),this.state.zoom)}),this.scene.triggerUpdate(),n.preventDefault()}else if(n.key===V.ENTER){const f=this.scene.getSelectedElements(this.state);if(f.length===1){const h=f[0];if(n[V.CTRL_OR_CMD]||nn(h))xe(h)&&(!((d=this.state.selectedLinearElement)!=null&&d.isEditing)||this.state.selectedLinearElement.elementId!==h.id)&&(this.store.scheduleCapture(),pe(h)||this.actionManager.executeAction(s2));else if(ge(h)||Dae(h)){let m;ge(h)||(m=h);const p=z8(h,this.state,this.scene.getNonDeletedElementsMap()),U=p.x,b=p.y;this.startTextEditing({sceneX:U,sceneY:b,container:m}),n.preventDefault();return}else we(h)&&this.setState({editingFrame:h.id})}}else if(!n.ctrlKey&&!n.altKey&&!n.metaKey&&!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged){const f=V8e(n.key,this);f?(this.state.activeTool.type!==f&&Je("toolbar",f,`keyboard (${this.editorInterface.formFactor==="phone"?"mobile":"desktop"})`),f==="arrow"&&this.state.activeTool.type==="arrow"&&this.setState(h=>({currentItemArrowType:h.currentItemArrowType===fi.sharp?fi.round:h.currentItemArrowType===fi.round?fi.elbow:fi.sharp})),this.setActiveTool({type:f}),n.stopPropagation()):n.key===V.Q&&(this.toggleLock("keyboard"),n.stopPropagation())}if(n.key===V.SPACE&&Ut.pointers.size===0&&(bu=!0,Dt(this.interactiveCanvas,Ct.GRAB),n.preventDefault()),(n.key===V.G||n.key===V.S)&&!n.altKey&&!n[V.CTRL_OR_CMD]){const f=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!f.length)return;n.key===V.G&&(Hc(this.state.activeTool.type)||f.some(h=>Hc(h.type)))&&(this.setState({openPopup:"elementBackground"}),n.stopPropagation()),n.key===V.S&&(this.setState({openPopup:"elementStroke"}),n.stopPropagation())}if(!n[V.CTRL_OR_CMD]&&n.shiftKey&&n.key.toLowerCase()===V.F){const f=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!f.length)return;(this.state.activeTool.type==="text"||f.find(h=>ge(h)||Le(h,this.scene.getNonDeletedElementsMap())))&&(n.preventDefault(),this.setState({openPopup:"fontFamily"}))}if(n.key===V.K&&!n.altKey&&!n[V.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:this.state.preferredSelectionTool.type}):this.setActiveTool({type:"laser"});return}n[V.CTRL_OR_CMD]&&(n.key===V.BACKSPACE||n.key===V.DELETE)&&this.updateEditorAtom(nE,"clearCanvas");const i=n.key.toLocaleLowerCase(),r=i===V.S&&n.shiftKey,s=n.key===V.I||i===V.G&&n.shiftKey;(r||s)&&this.openEyeDropper({type:r?"stroke":"background"})}));F(this,"onKeyUp",an(n=>{var i,r,s,o;if(n.key===V.SPACE&&(this.state.viewModeEnabled||((i=this.state.openDialog)==null?void 0:i.name)==="elementLinkSelector"?Dt(this.interactiveCanvas,Ct.GRAB):this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"?_o(this.interactiveCanvas):(To(this.interactiveCanvas,this.state),this.setState({selectedElementIds:xt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),bu=!1),!n[V.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),Om(n.key)&&(g6(this.scene.getSelectedElements(this.state).filter(xe),Ju(this.state),((r=this.state.selectedLinearElement)==null?void 0:r.selectedPointsIndices)??[],this.scene,this.state.zoom),this.setState({suggestedBindings:[]})),n.altKey||this.flowChartNavigator.isExploring&&(this.flowChartNavigator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})),!n[V.CTRL_OR_CMD]&&this.flowChartCreator.isCreatingChart){(s=this.flowChartCreator.pendingNodes)!=null&&s.length&&this.scene.insertElements(this.flowChartCreator.pendingNodes);const a=(o=this.flowChartCreator.pendingNodes)==null?void 0:o[0];a&&(this.setState(l=>({selectedElementIds:xt({[a.id]:!0},l)})),H2([a],this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap(),this.getEditorUIOffsets())||this.scrollToContent(a,{animate:!0,duration:300,canvasOffsets:this.getEditorUIOffsets()})),this.flowChartCreator.clear(),this.syncActionResult({captureUpdate:K.IMMEDIATELY})}}));F(this,"isToolSupported",n=>{var i;return((i=this.props.UIOptions.tools)==null?void 0:i[n])!==!1});F(this,"setActiveTool",(n,i=!1)=>{if(!this.isToolSupported(n.type)){console.warn(`"${n.type}" tool is disabled via "UIOptions.canvasActions.tools.${n.type}"`);return}const r=tn(this.state,n);r.type==="hand"?Dt(this.interactiveCanvas,Ct.GRAB):bu||To(this.interactiveCanvas,{...this.state,activeTool:r}),Lse(document.activeElement)&&this.focusContainer(),i_(r.type)||this.setState({suggestedBindings:[]}),r.type==="image"&&this.onImageToolbarButtonClick(),this.setState(s=>{const o={snapLines:s.snapLines.length?[]:s.snapLines,originSnapOffset:null,activeEmbeddable:null};return r.type==="freedraw"&&this.store.scheduleCapture(),r.type==="lasso"?{...s,activeTool:r,...i?{}:{selectedElementIds:xt({},s),selectedGroupIds:xt({},s),editingGroupId:null,multiElement:null},...o}:r.type!=="selection"?{...s,activeTool:r,selectedElementIds:xt({},s),selectedGroupIds:xt({},s),editingGroupId:null,multiElement:null,...o}:{...s,activeTool:r,...o}})});F(this,"setOpenDialog",n=>{this.setState({openDialog:n})});F(this,"setCursor",n=>{Dt(this.interactiveCanvas,n)});F(this,"resetCursor",()=>{_o(this.interactiveCanvas)});F(this,"isTouchScreenMultiTouchGesture",()=>Ut.pointers.size>=2);F(this,"getName",()=>this.state.name||this.props.name||`${R("labels.untitled")}-${xA()}`);F(this,"onGestureStart",an(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:xt({},this.state),activeEmbeddable:null}),Ut.initialScale=this.state.zoom.value}));F(this,"onGestureChange",an(n=>{if(n.preventDefault(),this.isTouchScreenMultiTouchGesture())return;const i=Ut.initialScale;i&&this.setState(r=>({...Pu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Va(i*n.scale)},r)}))}));F(this,"onGestureEnd",an(n=>{n.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:xt(this.state.previousSelectedElementIds,this.state)}),Ut.initialScale=null}));F(this,"startTextEditing",({sceneX:n,sceneY:i,insertAtParentCenter:r=!0,container:s,autoEdit:o=!0})=>{let a=!1,l=r&&this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s);s&&l&&(Le(s,this.scene.getNonDeletedElementsMap())||(a=!0));let c=null;const u=this.scene.getSelectedElements(this.state);u.length===1?ge(u[0])?c=u[0]:s?c=Le(u[0],this.scene.getNonDeletedElementsMap()):c=this.getTextElementAtPosition(n,i):c=this.getTextElementAtPosition(n,i);const d=(c==null?void 0:c.fontFamily)||this.state.currentItemFontFamily,f=(c==null?void 0:c.lineHeight)||Fc(d),h=this.state.currentItemFontSize;if(!c&&a&&s&&!Ce(s)){const b=cz(pt({fontSize:h,fontFamily:d}),f),y=uz(h,f),w=Math.max(s.height,y),v=Math.max(s.width,b);this.scene.mutateElement(s,{height:w,width:v}),n=s.x+v/2,i=s.y+w/2,l&&(l=this.getTextWysiwygSnappedToCenterPosition(n,i,this.state,s))}const m=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),p=c||as({x:l?l.elementCenterX:n,y:l?l.elementCenterY:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:h,fontFamily:d,textAlign:l?"center":this.state.currentItemTextAlign,verticalAlign:l?Wr.MIDDLE:Yb,containerId:a?s==null?void 0:s.id:void 0,groupIds:(s==null?void 0:s.groupIds)??[],lineHeight:f,angle:s?Ce(s)?0:s.angle:0,frameId:m?m.id:null});if(!c&&a&&s&&this.scene.mutateElement(s,{boundElements:(s.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingTextElement:p}),!c)if(s&&a){const U=this.scene.getElementIndex(s.id);this.scene.insertElementAtIndex(p,U+1)}else this.scene.insertElement(p);o||c||s?this.handleTextWysiwyg(p,{isExistingElement:!!c}):this.setState({newElement:p,multiElement:null})});F(this,"startImageCropping",n=>{this.store.scheduleCapture(),this.setState({croppingElementId:n.id})});F(this,"finishImageCropping",()=>{this.state.croppingElementId&&(this.store.scheduleCapture(),this.setState({croppingElementId:null}))});F(this,"handleCanvasDoubleClick",n=>{var a,l,c;if(this.state.multiElement||this.state.activeTool.type!==this.state.preferredSelectionTool.type)return;const i=this.scene.getSelectedElements(this.state);let{x:r,y:s}=Nt(n,this.state);if(i.length===1&&xe(i[0])){const u=i[0];if((n[V.CTRL_OR_CMD]&&cae(u)||nn(u))&&(!((a=this.state.selectedLinearElement)!=null&&a.isEditing)||this.state.selectedLinearElement.elementId!==u.id)){this.actionManager.executeAction(s2);return}else if(this.state.selectedLinearElement&&pe(i[0])){const d=Ue.getSegmentMidpointHitCoords(this.state.selectedLinearElement,{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),f=d?Ue.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,d,this.scene.getNonDeletedElementsMap()):-1;if(f&&f>-1){this.store.scheduleCapture(),Ue.deleteFixedSegment(i[0],this.scene,f);const h=Ue.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:r,y:s},this.state,this.scene.getNonDeletedElementsMap()),m=h?Ue.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,h,this.scene.getNonDeletedElementsMap()):null;this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:{...this.state.selectedLinearElement.pointerDownState,segmentMidpoint:{index:m,value:d,added:!1}},segmentMidPointHoveredCoords:h}});return}}else if((l=this.state.selectedLinearElement)!=null&&l.isEditing&&this.state.selectedLinearElement.elementId===u.id&&nn(u))return}if(i.length===1&&Et(i[0])){this.startImageCropping(i[0]);return}if(_o(this.interactiveCanvas),vc(this.state).length>0){const u=this.getElementAtPosition(r,s),d=u&&Az(u,this.state.selectedGroupIds);if(d){this.store.scheduleCapture(),this.setState(f=>({...f,...Si({editingGroupId:d,selectedElementIds:{[u.id]:!0}},this.scene.getNonDeletedElements(),f,this)}));return}}if(_o(this.interactiveCanvas),!n[V.CTRL_OR_CMD]&&!this.state.viewModeEnabled){const u=this.getElementAtPosition(r,s);if(vs(u)){this.setState({activeEmbeddable:{element:u,state:"active"}});return}if(!((c=this.state.selectedLinearElement)!=null&&c.isEditing)){const d=this.getTextBindableContainerAtPosition(r,s);if(d&&(Di(d)||!Sr(d.backgroundColor)||vf({point:S(r,s),element:d,elementsMap:this.scene.getNonDeletedElementsMap(),threshold:this.getElementHitThreshold(d)}))){const f=z8(d,this.state,this.scene.getNonDeletedElementsMap());r=f.x,s=f.y}this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:d})}}});F(this,"getElementLinkAtPosition",(n,i)=>{if(i&&i.locked)return;const r=this.scene.getNonDeletedElements();let s=-1;for(let o=r.length-1;o>=0;o--){const a=r[o];if(i&&a.id===i.id&&(s=o),a.link&&o>=s&&x3(a,this.scene.getNonDeletedElementsMap(),this.state,S(n.x,n.y),this.editorInterface.formFactor==="phone"))return a}});F(this,"redirectToLink",(n,i)=>{const r=ct(S(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY),S(this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY));if(!this.hitLinkElement||r>lB)return;const s=Nt(this.lastPointerDownEvent,this.state),o=this.scene.getNonDeletedElementsMap(),a=x3(this.hitLinkElement,o,this.state,S(s.x,s.y),this.editorInterface.formFactor==="phone"),l=Nt(this.lastPointerUpEvent,this.state),c=x3(this.hitLinkElement,o,this.state,S(l.x,l.y),this.editorInterface.formFactor==="phone");if(a&&c){Zk();let u=this.hitLinkElement.link;if(u){u=ns(u);let d;if(this.props.onLinkOpen&&(d=HB(te.EXCALIDRAW_LINK,n.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:u},d)),!(d!=null&&d.defaultPrevented)){const f=YB(u)?"_self":"_blank",h=window.open(void 0,f);h&&(h.opener=null,h.location=u)}}}});F(this,"getTopLayerFrameAtSceneCoords",n=>{const i=this.scene.getNonDeletedElementsMap(),r=this.scene.getNonDeletedFramesLikes().filter(s=>!s.locked&&tM(n,s,i));return r.length?r[r.length-1]:null});F(this,"handleCanvasPointerMove",n=>{var m,p,U,b,y,w,v,I;this.savePointer(n.clientX,n.clientY,this.state.cursorButton),this.lastPointerMoveEvent=n.nativeEvent,Ut.pointers.has(n.pointerId)&&Ut.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY});const i=Ut.initialScale;if(Ut.pointers.size===2&&Ut.lastCenter&&i&&Ut.initialDistance){const x=fL(Ut.pointers),_=x.x-Ut.lastCenter.x,T=x.y-Ut.lastCenter.y;Ut.lastCenter=x;const A=hL(Array.from(Ut.pointers.values())),C=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:A/Ut.initialDistance,k=C?Va(i*C):this.state.zoom.value;this.setState(P=>{const D=Pu({viewportX:x.x,viewportY:x.y,nextZoom:k},P);this.translateCanvas({zoom:D.zoom,scrollX:D.scrollX+2*(_/k),scrollY:D.scrollY+2*(T/k),shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Ut.lastCenter=Ut.initialDistance=Ut.initialScale=null;if(bu||wm||K3||Kh(this.state))return;const s=IL(_m,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop).isOverEither;!this.state.newElement&&!this.state.selectionElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.multiElement&&(s?_o(this.interactiveCanvas):To(this.interactiveCanvas,this.state));const o=Nt(n,this.state),{x:a,y:l}=o;if(!this.state.newElement&&q3e(this.state.activeTool.type)){const{originOffset:x,snapLines:_}=Z3e(this.scene.getNonDeletedElements(),this,{x:a,y:l},n,this.scene.getNonDeletedElementsMap());this.setState(T=>{const A=am(T.snapLines,_),C=T.originSnapOffset?am(T.originSnapOffset,x):x;return T.snapLines===A&&T.originSnapOffset===C?null:{snapLines:A,originSnapOffset:C}})}else!this.state.newElement&&!this.state.selectedElementsAreBeingDragged&&!this.state.selectionElement&&this.setState(x=>x.snapLines.length?{snapLines:[]}:null);if((m=this.state.selectedLinearElement)!=null&&m.isEditing&&!this.state.selectedLinearElement.isDragging){const x=Ue.handlePointerMove(n,a,l,this),_=x?this.scene.getElement(x.elementId):null;x&&x!==this.state.selectedLinearElement&&mi.flushSync(()=>{this.setState({selectedLinearElement:x})}),(x==null?void 0:x.lastUncommittedPoint)!=null&&_&&L4(_.type)?this.maybeSuggestBindingAtCursor(o,x.elbowed):this.state.suggestedBindings.length&&this.setState({suggestedBindings:[]})}if(L4(this.state.activeTool.type)){const{newElement:x}=this.state;Ha(x,!1)?this.setState({suggestedBindings:N4(x,[o],this.scene,this.state.zoom,this.state.startBoundElement)}):this.maybeSuggestBindingAtCursor(o,!1)}if(this.state.multiElement){const{multiElement:x}=this.state,{x:_,y:T}=x,{points:A,lastCommittedPoint:C}=x,k=A[A.length-1];if(To(this.interactiveCanvas,this.state),k===C)ct(S(a-_,l-T),k)>=k2?this.scene.mutateElement(x,{points:[...A,S(a-_,l-T)]},{informMutation:!1,isDragging:!1}):Dt(this.interactiveCanvas,Ct.POINTER);else if(A.length>2&&C&&ct(S(a-_,l-T),C)<k2)Dt(this.interactiveCanvas,Ct.POINTER),this.scene.mutateElement(x,{points:A.slice(0,-1)},{informMutation:!1,isDragging:!1});else{const[P,D]=Pn(a,l,n[V.CTRL_OR_CMD]||pe(x)?null:this.getEffectiveGridSize()),[j,G]=(x==null?void 0:x.lastCommittedPoint)??[0,0];let B=P-_-j,H=D-T-G;U1(n)&&({width:B,height:H}=z4(j+_,G+T,P,D)),qo(A,this.state.zoom.value)&&Dt(this.interactiveCanvas,Ct.POINTER),this.scene.mutateElement(x,{points:[...A.slice(0,-1),S(j+B,G+H)]},{isDragging:!0,informMutation:!1}),this.triggerRender(!1)}return}if(!!n.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;const u=this.scene.getNonDeletedElements(),d=this.scene.getSelectedElements(this.state);if(d.length===1&&!s&&!((p=this.state.selectedLinearElement)!=null&&p.isEditing)){if(this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l),(!this.state.selectedLinearElement||this.state.selectedLinearElement.hoverPointIndex===-1)&&((U=this.state.openDialog)==null?void 0:U.name)!=="elementLinkSelector"&&!(d.length===1&&pe(d[0]))&&!(xe(d[0])&&(this.editorInterface.userAgent.isMobileDevice||d[0].points.length===2))){const x=LM(u,this.state,a,l,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.editorInterface);if(x&&x.transformHandleType){Dt(this.interactiveCanvas,NM(x));return}}}else if(d.length>1&&!s&&((b=this.state.openDialog)==null?void 0:b.name)!=="elementLinkSelector"){const x=DM(nt(d),a,l,this.state.zoom,n.pointerType,this.editorInterface);if(x){Dt(this.interactiveCanvas,NM({transformHandleType:x}));return}}const f=this.getElementAtPosition(a,l,{preferSelected:!0,includeLockedElements:!0});let h=null;f&&f.locked?h=null:h=f,this.hitLinkElement=this.getElementLinkAtPosition(o,f),!Ao(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(Dt(this.interactiveCanvas,Ct.POINTER),fEe(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(Zk(),h&&(h.link||or(h))&&this.state.selectedElementIds[h.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?Dt(this.interactiveCanvas,ge(h)?Ct.TEXT:Ct.CROSSHAIR):this.state.viewModeEnabled?Dt(this.interactiveCanvas,Ct.GRAB):((y=this.state.openDialog)==null?void 0:y.name)==="elementLinkSelector"?Dt(this.interactiveCanvas,Ct.AUTO):s?Dt(this.interactiveCanvas,Ct.AUTO):n[V.CTRL_OR_CMD]?Dt(this.interactiveCanvas,Ct.AUTO):(h||this.isHittingCommonBoundingBoxOfSelectedElements(o,d))&&!(h!=null&&h.locked)&&(h&&vs(h)&&this.isIframeLikeElementCenter(h,n,a,l)?(Dt(this.interactiveCanvas,Ct.POINTER),this.setState({activeEmbeddable:{element:h,state:"hover"}})):(!h||!pe(h)||!(h.startBinding||h.endBinding))&&((this.state.activeTool.type!=="lasso"||d.length>0)&&Dt(this.interactiveCanvas,Ct.MOVE),((w=this.state.activeEmbeddable)==null?void 0:w.state)==="hover"&&this.setState({activeEmbeddable:null}))),this.state.selectedLinearElement&&this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l)),((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"&&h?this.setState(x=>({hoveredElementIds:am(x.hoveredElementIds,Si({editingGroupId:x.editingGroupId,selectedElementIds:{[h.id]:!0}},this.scene.getNonDeletedElements(),x,this).selectedElementIds)})):((I=this.state.openDialog)==null?void 0:I.name)==="elementLinkSelector"&&!h&&this.setState(x=>({hoveredElementIds:am(x.hoveredElementIds,{})})))});F(this,"handleEraser",(n,i)=>{const r=this.eraserTrail.addPointToPath(i.x,i.y,n.altKey);this.elementsPendingErasure=new Set(r),this.triggerRender()});F(this,"handleTouchMove",n=>{Tm=!0});F(this,"handleCanvasPointerDown",n=>{var d,f,h;const i=n.target;if(i.setPointerCapture&&i.setPointerCapture(n.pointerId),this.maybeCleanupAfterMissingPointerUp(n.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.searchMatches&&(this.setState(m=>({searchMatches:m.searchMatches&&{focusedId:null,matches:m.searchMatches.matches.map(p=>({...p,focus:!1}))}})),this.updateEditorAtom(gY,null)),Xr.get(Sa)&&this.updateEditorAtom(Sa,null),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.state.openPopup&&this.setState({openPopup:null}),this.updateGestureOnPointerDown(n),n.pointerType==="touch"&&this.state.newElement&&this.state.newElement.type==="freedraw"){const m=this.state.newElement;this.updateScene({...m.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(p=>p.id!==m.id)}:{},appState:{newElement:null,editingTextElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:xt(Object.keys(this.state.selectedElementIds).filter(p=>p!==m.id).reduce((p,U)=>(p[U]=this.state.selectedElementIds[U],p),{}),this.state)},captureUpdate:((d=this.state.openDialog)==null?void 0:d.name)==="elementLinkSelector"?K.EVENTUALLY:K.NEVER});return}const r=document.getSelection();if(r!=null&&r.anchorNode&&r.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(n),!this.state.penDetected&&n.pointerType==="pen"&&this.setState(m=>({penMode:!0,penDetected:!0})),!this.editorInterface.isTouchScreen&&["pen","touch"].includes(n.pointerType)&&(this.editorInterface=D2(this.editorInterface,{isTouchScreen:!0})),wm||(this.lastPointerDownEvent=n,this.handleCanvasPanUsingWheelOrSpaceDrag(n)))return;if(this.setState({lastPointerDownWith:n.pointerType,cursorButton:"down"}),this.savePointer(n.clientX,n.clientY,"down"),n.button===zl.ERASER&&this.state.activeTool.type!==Qn.eraser){this.setState({activeTool:tn(this.state,{type:Qn.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(n);const m=()=>{p(),U==null||U(),Ao(this.state)&&this.setState({activeTool:tn(this.state,{...this.state.activeTool.lastActiveTool||{type:Qn.selection},lastActiveToolBeforeEraser:null})})},p=en(window,te.POINTER_UP,m,{once:!0});let U;requestAnimationFrame(()=>{U=this.missingPointerEventCleanupEmitter.once(m)})});return}if(n.button!==zl.MAIN&&n.button!==zl.TOUCH&&n.button!==zl.ERASER||Ut.pointers.size>1)return;const s=this.initialPointerDownState(n);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(n,s)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(n),this.handleSelectionOnPointerDown(n,s))||!(!this.state.penMode||n.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="lasso"){const m=s.hit.element&&this.isASelectedElement(s.hit.element);!s.hit.hasHitCommonBoundingBoxOfSelectedElements&&!s.resize.handleType&&!m&&(this.lassoTrail.startPath(s.origin.x,s.origin.y,n.shiftKey),s.drag.blockDragging=this.editorInterface.formFactor==="desktop"),this.editorInterface.formFactor!=="desktop"&&s.hit.element&&!m&&(this.setState(p=>{const U={...p.selectedElementIds,[s.hit.element.id]:!0},b=[];Object.keys(p.selectedElementIds).forEach(w=>{const v=this.scene.getElement(w);v&&b.push(v)});const y=s.hit.element;if(we(y))is(b,y.id).forEach(w=>{delete U[w.id]});else if(y.frameId)U[y.frameId]&&delete U[y.id];else{const w=y.groupIds,v=new Set(w.flatMap(I=>At(this.scene.getNonDeletedElements(),I)).filter(I=>we(I)).map(I=>I.id));v.size>0&&b.forEach(I=>{I.frameId&&v.has(I.frameId)&&(delete U[I.id],I.groupIds.flatMap(x=>At(this.scene.getNonDeletedElements(),x)).forEach(x=>{delete U[x.id]}))})}return{...Si({editingGroupId:p.editingGroupId,selectedElementIds:U},this.scene.getNonDeletedElements(),p,this),showHyperlinkPopup:y.link||or(y)?"info":!1}}),s.hit.wasAddedToSelection=!0)}else this.state.activeTool.type==="text"?this.handleTextOnPointerDown(n,s):this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line"?this.handleLinearElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(n,this.state.activeTool.type,s):this.state.activeTool.type==="custom"?To(this.interactiveCanvas,this.state):this.state.activeTool.type===Qn.frame||this.state.activeTool.type===Qn.magicframe?this.createFrameElementOnPointerDown(s,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(s.lastCoords.x,s.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.state.activeTool.type!=="image"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,s);(h=(f=this.props)==null?void 0:f.onPointerDown)==null||h.call(f,this.state.activeTool,s),this.onPointerDownEmitter.trigger(this.state.activeTool,s,n),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(s.lastCoords.x,s.lastCoords.y);const a=this.onPointerMoveFromPointerDownHandler(s),l=this.onPointerUpFromPointerDownHandler(s),c=this.onKeyDownFromPointerDownHandler(s),u=this.onKeyUpFromPointerDownHandler(s);this.missingPointerEventCleanupEmitter.once(m=>l(m||n.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener(te.POINTER_MOVE,a),window.addEventListener(te.POINTER_UP,l),window.addEventListener(te.KEYDOWN,c),window.addEventListener(te.KEYUP,u),s.eventListeners.onMove=a,s.eventListeners.onUp=l,s.eventListeners.onKeyUp=u,s.eventListeners.onKeyDown=c)});F(this,"handleCanvasPointerUp",n=>{var s;this.removePointer(n),this.lastPointerUpEvent=n;const i=Nt({clientX:n.clientX,clientY:n.clientY},this.state),r=n.timeStamp-(((s=this.lastPointerDownEvent)==null?void 0:s.timeStamp)??0);if(this.editorInterface.formFactor==="phone"&&r<300){const o=this.getElementAtPosition(i.x,i.y);if(vs(o)&&this.isIframeLikeElementCenter(o,n,i.x,i.y)){this.handleEmbeddableCenterClick(o);return}}if(this.editorInterface.isTouchScreen){const o=this.getElementAtPosition(i.x,i.y,{includeLockedElements:!0});this.hitLinkElement=this.getElementLinkAtPosition(i,o)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?r<300&&vs(this.hitLinkElement)&&!oX(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,S(i.x,i.y))?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(n,this.editorInterface.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})});F(this,"maybeOpenContextMenuAfterPointerDownOnTouchDevices",n=>{n.pointerType==="touch"&&(Tm=!1,Fl?Tm=!0:Fl=window.setTimeout(()=>{Fl=0,Tm||this.handleCanvasContextMenu(n)},Ore))});F(this,"resetContextMenuTimer",()=>{clearTimeout(Fl),Fl=0,Tm=!1});F(this,"maybeCleanupAfterMissingPointerUp",n=>{yu==null||yu(),this.missingPointerEventCleanupEmitter.trigger(n).clear()});F(this,"handleCanvasPanUsingWheelOrSpaceDrag",n=>{if(!(Ut.pointers.size<=1&&(n.button===zl.WHEEL||n.button===zl.MAIN&&bu||Kh(this.state)||this.state.viewModeEnabled)))return!1;wm=!0,this.focusContainer(),this.state.editingTextElement||n.preventDefault();let i=!1;const r=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);Dt(this.interactiveCanvas,Ct.GRABBING);let{clientX:s,clientY:o}=n;const a=N3(c=>{const u=s-c.clientX,d=o-c.clientY;if(s=c.clientX,o=c.clientY,r&&!i&&(Math.abs(u)>1||Math.abs(d)>1)){i=!0;const f=m=>{document.body.removeEventListener(te.PASTE,f),m.stopPropagation()},h=()=>{setTimeout(()=>{document.body.removeEventListener(te.PASTE,f),window.removeEventListener(te.POINTER_UP,h)},100)};document.body.addEventListener(te.PASTE,f),window.addEventListener(te.POINTER_UP,h)}this.translateCanvas({scrollX:this.state.scrollX-u/this.state.zoom.value,scrollY:this.state.scrollY-d/this.state.zoom.value})}),l=an(yu=()=>{yu=null,wm=!1,bu||(this.state.viewModeEnabled?Dt(this.interactiveCanvas,Ct.GRAB):To(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(te.POINTER_MOVE,a),window.removeEventListener(te.POINTER_UP,l),window.removeEventListener(te.BLUR,l),a.flush()});return window.addEventListener(te.BLUR,l),window.addEventListener(te.POINTER_MOVE,a,{passive:!0}),window.addEventListener(te.POINTER_UP,l),!0});F(this,"clearSelectionIfNotUsingSelection",()=>{this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="lasso"&&this.setState({selectedElementIds:xt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})});F(this,"handleSelectionOnPointerDown",(n,i)=>{var r,s,o,a;if(this.state.activeTool.type==="selection"||this.state.activeTool.type==="lasso"){const l=this.scene.getNonDeletedElements(),c=this.scene.getNonDeletedElementsMap(),u=this.scene.getSelectedElements(this.state);if(u.length===1&&!((r=this.state.selectedLinearElement)!=null&&r.isEditing)&&!pe(u[0])&&!(xe(u[0])&&(this.editorInterface.userAgent.isMobileDevice||u[0].points.length===2))&&!(this.state.selectedLinearElement&&this.state.selectedLinearElement.hoverPointIndex!==-1)){const d=LM(l,this.state,i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.scene.getNonDeletedElementsMap(),this.editorInterface);d!=null&&(d.transformHandleType==="rotation"?(this.setState({resizingElement:d.element}),i.resize.handleType=d.transformHandleType):(this.state.croppingElementId||this.setState({resizingElement:d.element}),i.resize.handleType=d.transformHandleType))}else u.length>1&&(i.resize.handleType=DM(nt(u),i.origin.x,i.origin.y,this.state.zoom,n.pointerType,this.editorInterface));if(i.resize.handleType)i.resize.isResizing=!0,i.resize.offset=Wa(Cue(i.resize.handleType,u,c,i.origin.x,i.origin.y)),u.length===1&&xe(u[0])&&u[0].points.length===2&&(i.resize.arrowDirection=Aue(i.resize.handleType,u[0]));else{if(this.state.selectedLinearElement){const U=this.state.selectedLinearElement,b=Ue.handlePointerDown(n,this,this.store,i.origin,U,this.scene);if(b.hitElement&&(i.hit.element=b.hitElement),b.linearElementEditor&&this.setState({selectedLinearElement:b.linearElementEditor}),b.didAddPoint)return!0}const d=this.getElementsAtPosition(i.origin.x,i.origin.y,{includeLockedElements:!0}),f=d.filter(U=>!U.locked),h=this.getElementAtPosition(i.origin.x,i.origin.y,{allHitElements:d});if((!h||h.id!==this.state.activeLockedId)&&this.setState({activeLockedId:null}),h&&h.locked&&!f.some(U=>this.state.selectedElementIds[U.id])?i.hit.element=null:i.hit.element=i.hit.element??this.getElementAtPosition(i.origin.x,i.origin.y),this.hitLinkElement=this.getElementLinkAtPosition(i.origin,h),this.hitLinkElement)return!0;if(this.state.croppingElementId&&((s=i.hit.element)==null?void 0:s.id)!==this.state.croppingElementId&&this.finishImageCropping(),i.hit.element&&this.getElementLinkAtPosition({x:i.origin.x,y:i.origin.y},i.hit.element))return!1;i.hit.allHitElements=f;const m=i.hit.element,p=i.hit.allHitElements.some(U=>this.isASelectedElement(U));if((m===null||!p)&&!n.shiftKey&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(m),(o=this.state.selectedLinearElement)!=null&&o.isEditing)this.setState({selectedElementIds:xt({[this.state.selectedLinearElement.elementId]:!0},this.state)});else if(m!=null){if(n[V.CTRL_OR_CMD])return n.altKey?(((a=this.state.openDialog)==null?void 0:a.name)==="elementLinkSelector"&&this.setOpenDialog(null),this.lassoTrail.startPath(i.origin.x,i.origin.y,n.shiftKey),this.setActiveTool({type:"lasso",fromSelection:!0}),!1):(this.state.selectedElementIds[m.id]||(i.hit.wasAddedToSelection=!0),this.setState(U=>({...Nle(U,m),previousSelectedElementIds:this.state.selectedElementIds})),!1);this.state.selectedElementIds[m.id]||(this.state.editingGroupId&&!h0(m,this.state.editingGroupId)&&this.setState({selectedElementIds:xt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!p&&!i.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(U=>{var w;let b={...U.selectedElementIds,[m.id]:!0};const y=[];if(Object.keys(U.selectedElementIds).forEach(v=>{const I=this.scene.getElement(v);I&&y.push(I)}),we(m))is(y,m.id).forEach(v=>{delete b[v.id]});else if(m.frameId)b[m.frameId]&&delete b[m.id];else{const v=m.groupIds,I=new Set(v.flatMap(x=>At(this.scene.getNonDeletedElements(),x)).filter(x=>we(x)).map(x=>x.id));I.size>0&&y.forEach(x=>{x.frameId&&I.has(x.frameId)&&(delete b[x.id],x.groupIds.flatMap(_=>At(this.scene.getNonDeletedElements(),_)).forEach(_=>{delete b[_.id]}))})}return((w=U.openDialog)==null?void 0:w.name)==="elementLinkSelector"&&(m.groupIds.some(v=>U.selectedGroupIds[v])||(b={[m.id]:!0})),{...Si({editingGroupId:U.editingGroupId,selectedElementIds:b},this.scene.getNonDeletedElements(),U,this),showHyperlinkPopup:m.link||or(m)?"info":!1}}),i.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1});F(this,"handleTextOnPointerDown",(n,i)=>{if(this.state.editingTextElement)return;let r=i.origin.x,s=i.origin.y;const o=this.getElementAtPosition(r,s,{includeBoundTextElement:!0});let a=this.getTextBindableContainerAtPosition(r,s);Di(o)&&(a=o,r=o.x+o.width/2,s=o.y+o.height/2),this.startTextEditing({sceneX:r,sceneY:s,insertAtParentCenter:!n.altKey,container:a,autoEdit:!1}),_o(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:tn(this.state,{type:this.state.preferredSelectionTool.type})})});F(this,"handleFreeDrawElementOnPointerDown",(n,i,r)=>{const[s,o]=Pn(r.origin.x,r.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),l=n.pressure===.5,c=rue({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:l,locked:!1,frameId:a?a.id:null,points:[S(0,0)],pressures:l?[]:[n.pressure]});this.scene.insertElement(c),this.setState(d=>{const f={...d.selectedElementIds};return delete f[c.id],{selectedElementIds:xt(f,d)}});const u=qa(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom);this.setState({newElement:c,startBoundElement:u,suggestedBindings:[]})});F(this,"insertIframeElement",({sceneX:n,sceneY:i,width:r,height:s})=>{var c;const[o,a]=Pn(n,i,(c=this.lastPointerDownEvent)!=null&&c[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=tue({type:"iframe",x:o,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:r,height:s});return this.scene.insertElement(l),l});F(this,"insertEmbeddableElement",({sceneX:n,sceneY:i,link:r})=>{var c;const[s,o]=Pn(n,i,(c=this.lastPointerDownEvent)!=null&&c[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=Yf(r);if(!a)return;a.error instanceof URIError&&this.setToast({message:R("toast.unrecognizedLinkFormat"),closable:!0});const l=wM({type:"embeddable",x:s,y:o,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:r});return this.scene.insertElement(l),l});F(this,"newImagePlaceholder",({sceneX:n,sceneY:i,addToFrameUnderCursor:r=!0})=>{var c;const[s,o]=Pn(n,i,(c=this.lastPointerDownEvent)!=null&&c[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=r?this.getTopLayerFrameAtSceneCoords({x:s,y:o}):null,l=100/this.state.zoom.value;return lH({type:"image",strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null,x:s-l/2,y:o-l/2,width:l,height:l})});F(this,"handleLinearElementOnPointerDown",(n,i,r)=>{if(this.state.multiElement){const{multiElement:s}=this.state;if(s.type==="line"&&qo(s.points,this.state.zoom.value)){this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Vs);return}if(pe(s)&&s.points.length>1){this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),this.actionManager.executeAction(Vs);return}const{x:o,y:a,lastCommittedPoint:l}=s;if(s.points.length>1&&l&&ct(S(r.origin.x-o,r.origin.y-a),l)<k2){this.actionManager.executeAction(Vs);return}this.setState(c=>({selectedElementIds:xt({...c.selectedElementIds,[s.id]:!0},c)})),this.scene.mutateElement(s,{lastCommittedPoint:s.points[s.points.length-1]}),Dt(this.interactiveCanvas,Ct.POINTER)}else{const[s,o]=Pn(r.origin.x,r.origin.y,n[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),a=this.getTopLayerFrameAtSceneCoords({x:s,y:o}),{currentItemStartArrowhead:l,currentItemEndArrowhead:c}=this.state,[u,d]=i==="arrow"?[l,c]:[null,null],f=i==="arrow"?dh({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemArrowType===fi.round?{type:yn.PROPORTIONAL_RADIUS}:null,startArrowhead:u,endArrowhead:d,locked:!1,frameId:a?a.id:null,elbowed:this.state.currentItemArrowType===fi.elbow,fixedSegments:this.state.currentItemArrowType===fi.elbow?[]:null}):wc({type:i,x:s,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:yn.PROPORTIONAL_RADIUS}:null,locked:!1,frameId:a?a.id:null});this.setState(m=>{const p={...m.selectedElementIds};return delete p[f.id],{selectedElementIds:xt(p,m)}}),this.scene.mutateElement(f,{points:[...f.points,S(0,0)]});const h=qa(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,pe(f),pe(f));this.scene.insertElement(f),this.setState({newElement:f,startBoundElement:h,suggestedBindings:[]})}});F(this,"createGenericElementOnPointerDown",(n,i)=>{var c;const[r,s]=Pn(i.origin.x,i.origin.y,(c=this.lastPointerDownEvent)!=null&&c[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o=this.getTopLayerFrameAtSceneCoords({x:r,y:s}),a={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(n),locked:!1,frameId:o?o.id:null};let l;n==="embeddable"?l=wM({type:"embeddable",...a}):l=ta({type:n,...a}),l.type==="selection"?this.setState({selectionElement:l}):(this.scene.insertElement(l),this.setState({multiElement:null,newElement:l}))});F(this,"createFrameElementOnPointerDown",(n,i)=>{var l;const[r,s]=Pn(n.origin.x,n.origin.y,(l=this.lastPointerDownEvent)!=null&&l[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),o={x:r,y:s,opacity:this.state.currentItemOpacity,locked:!1,...Ht},a=i===Qn.magicframe?G4(o):k_(o);this.scene.insertElement(a),this.setState({multiElement:null,newElement:a})});F(this,"restoreReadyToEraseElements",()=>{this.elementsPendingErasure=new Set,this.triggerRender()});F(this,"eraseElements",()=>{let n=!1;const i=this.scene.getElementsIncludingDeleted().map(r=>this.elementsPendingErasure.has(r.id)||r.frameId&&this.elementsPendingErasure.has(r.frameId)||Lt(r)&&this.elementsPendingErasure.has(r.containerId)?(n=!0,Ie(r,{isDeleted:!0})):r);this.elementsPendingErasure=new Set,n&&(this.store.scheduleCapture(),this.scene.replaceAllElements(i))});F(this,"initializeImage",async(n,i)=>{var l,c,u;if(!L0(i))throw new Error(R("errors.unsupportedFileType"));const r=i.type;if(Dt(this.interactiveCanvas,"wait"),r===Te.svg)try{i=Fk(AM(await i.text()),i.name)}catch(d){throw console.warn(d),new Error(R("errors.svgImageInsertError"))}const s=await(((c=(l=this.props).generateIdForFile)==null?void 0:c.call(l,i))||dye(i));if(!s)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(R("errors.imageInsertError"));const o=this.files[s];if(!(o!=null&&o.dataURL)){try{i=await yX(i,{maxWidthOrHeight:zre})}catch(d){console.error("Error trying to resizing image file on insertion",d)}if(i.size>vA)throw new Error(R("errors.fileTooBig",{maxSize:`${Math.trunc(vA/1024/1024)}MB`}))}const a=((u=this.files[s])==null?void 0:u.dataURL)||await bX(i);return new Promise(async(d,f)=>{var h,m;try{let p=this.getLatestInitializedImageElement(n,s);if(this.addMissingFiles([{mimeType:r,id:s,dataURL:a,created:Date.now(),lastRetrieved:Date.now()}]),!this.imageCache.get(s)){this.addNewImagesToImageCache();const{erroredFiles:b}=await this.updateImageCache([p]);if(b.size)throw new Error("Image cache update resulted with an error.")}const U=await((h=this.imageCache.get(s))==null?void 0:h.image);if(U&&((m=this.state.newElement)==null?void 0:m.id)!==p.id){p=this.getLatestInitializedImageElement(n,s);const b=this.getImageNaturalDimensions(p,U);Object.assign(p,b)}d(p)}catch(p){console.error(p),f(new Error(R("errors.imageInsertError")))}})});F(this,"getLatestInitializedImageElement",(n,i)=>{const r=this.scene.getElement(n.id)??n;return Ie(r,{fileId:i})});F(this,"onImageToolbarButtonClick",async()=>{try{const n=this.state.width/2+this.state.offsetLeft,i=this.state.height/2+this.state.offsetTop,{x:r,y:s}=Nt({clientX:n,clientY:i},this.state),o=await kT({description:"Image",extensions:Object.keys(Nh),multiple:!0});this.insertImages(o,r,s)}catch(n){n.name!=="AbortError"?console.error(n):console.warn(n),this.setState({newElement:null,activeTool:tn(this.state,{type:this.state.preferredSelectionTool.type})},()=>{this.actionManager.executeAction(Vs)})}});F(this,"getImageNaturalDimensions",(n,i)=>{const r=Math.max(this.state.height-120,160),s=Math.min(r,Math.floor(this.state.height*.5)/this.state.zoom.value),o=Math.min(i.naturalHeight,s),a=o*(i.naturalWidth/i.naturalHeight),l=n.x+n.width/2-a/2,c=n.y+n.height/2-o/2;return{x:l,y:c,width:a,height:o,crop:null}});F(this,"updateImageCache",async(n,i=this.files)=>{const{updatedFiles:r,erroredFiles:s}=await fH({imageCache:this.imageCache,fileIds:n.map(o=>o.fileId),files:i});return s.size&&(this.store.scheduleAction(K.NEVER),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(o=>Ln(o)&&s.has(o.fileId)?Ie(o,{status:"error"}):o))),{updatedFiles:r,erroredFiles:s}});F(this,"addNewImagesToImageCache",async(n=hH(this.scene.getNonDeletedElements()),i=this.files)=>{const r=n.filter(s=>!s.isDeleted&&!this.imageCache.has(s.fileId));if(r.length){const{updatedFiles:s}=await this.updateImageCache(r,i);if(s.size)for(const o of r)s.has(o.fileId)&&qt.delete(o);s.size&&this.scene.triggerUpdate()}});F(this,"scheduleImageRefresh",Fo(()=>{this.addNewImagesToImageCache()},Dre));F(this,"updateBindingEnabledOnPointerMove",n=>{const i=nle(n);this.state.isBindingEnabled!==i&&this.setState({isBindingEnabled:i})});F(this,"maybeSuggestBindingAtCursor",(n,i)=>{const r=qa(n,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap(),this.state.zoom,!1,i);this.setState({suggestedBindings:r!=null?[r]:[]})});F(this,"handleInteractiveCanvasRef",n=>{var i,r;n!==null?(this.interactiveCanvas=n,this.interactiveCanvas.addEventListener(te.TOUCH_START,this.onTouchStart,{passive:!1}),this.interactiveCanvas.addEventListener(te.TOUCH_END,this.onTouchEnd)):((i=this.interactiveCanvas)==null||i.removeEventListener(te.TOUCH_START,this.onTouchStart),(r=this.interactiveCanvas)==null||r.removeEventListener(te.TOUCH_END,this.onTouchEnd))});F(this,"insertImages",async(n,i,r)=>{const s=50/this.state.zoom.value,o=MM(n.map(()=>this.newImagePlaceholder({sceneX:i,sceneY:r})),i,r,s);o.forEach(f=>this.scene.insertElement(f));const a=await Promise.all(o.map(async(f,h)=>{try{return await this.initializeImage(f,await N0(n[h]))}catch(m){return this.setState({errorMessage:m.message||R("errors.imageInsertError")}),Ie(f,{isDeleted:!0})}})),l=ve(a),c=MM(a.filter(f=>!f.isDeleted),i,r,s),u=ve(c),d=this.scene.getElementsIncludingDeleted().map(f=>u.get(f.id)??l.get(f.id)??f);this.updateScene({appState:{selectedElementIds:xt(Object.fromEntries(c.map(f=>[f.id,!0])),this.state)},elements:d,captureUpdate:K.IMMEDIATELY}),this.setState({},()=>{this.actionManager.executeAction(Vs)})});F(this,"handleAppOnDrop",async n=>{var d;const{x:i,y:r}=Nt(n,this.state),s=await Iv(n),o=s.getFiles();if(o.length===1){const{file:f,fileHandle:h}=o[0];if(f&&(f.type===Te.png||f.type===Te.svg))try{const m=await PT(f,this.state,this.scene.getElementsIncludingDeleted(),h);this.syncActionResult({...m,appState:{...m.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY});return}catch(m){if(m.name!=="EncodingError")throw new Error(R("alerts.couldNotLoadInvalidFile"))}}const a=o.map(f=>f.file).filter(f=>L0(f));if(a.length>0&&this.isToolSupported("image"))return this.insertImages(a,i,r);const l=s.getData(Te.excalidrawlibIds),c=s.getData(Te.excalidrawlib);if(l||c){try{let f=null;if(l){const{itemIds:h}=JSON.parse(l);f=(await this.library.getLatestLibrary()).filter(p=>h.includes(p.id))}else c&&(f=UX(c));f!=null&&f.length&&(f=f.map(h=>({...h,elements:_1({type:"everything",elements:h.elements,randomizeSeed:!0}).duplicatedElements})),this.addElementsFromPasteOrLibrary({elements:GT(f),position:n,files:null}))}catch(f){this.setState({errorMessage:f.message})}return}if(o.length>0){const{file:f,fileHandle:h}=o[0];f&&await this.loadFileToCanvas(f,h)}const u=s.findByType(Te.text);if(u){const f=u.value;if(f&&V2(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||((d=Yf(f))==null?void 0:d.type)==="video")){const h=this.insertEmbeddableElement({sceneX:i,sceneY:r,link:ns(f)});h&&(this.store.scheduleCapture(),this.setState({selectedElementIds:{[h.id]:!0}}))}}});F(this,"loadFileToCanvas",async(n,i)=>{n=await N0(n);try{const r=this.scene.getElementsIncludingDeleted();let s;try{s=await pX(n,this.state,r,i)}catch(o){const a=o instanceof Ou;if(a&&o.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:R("errors.imageToolNotSupported")});return}const l=R(a?"alerts.cannotRestoreFromImage":"alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:l})}if(!s)return;s.type===Te.excalidraw?(ou(r.concat(s.data.elements)),this.store.scheduleMicroAction({action:K.NEVER,elements:r,appState:void 0}),this.setState({isLoading:!0}),this.syncActionResult({...s.data,appState:{...s.data.appState||this.state,isLoading:!1},replaceFiles:!0,captureUpdate:K.IMMEDIATELY})):s.type===Te.excalidrawlib&&await this.library.updateLibrary({libraryItems:n,merge:!0,openLibraryMenu:!0}).catch(o=>{console.error(o),this.setState({errorMessage:R("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}});F(this,"handleCanvasContextMenu",n=>{if(n.preventDefault(),("pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="touch"||"pointerType"in n.nativeEvent&&n.nativeEvent.pointerType==="pen"&&n.button!==zl.SECONDARY)&&this.state.activeTool.type!==this.state.preferredSelectionTool.type)return;const{x:i,y:r}=Nt(n,this.state),s=this.getElementAtPosition(i,r,{preferSelected:!0,includeLockedElements:!0}),o=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:i,y:r},o),l=s||a?"element":"canvas",c=this.excalidrawContainerRef.current,{top:u,left:d}=c.getBoundingClientRect(),f=n.clientX-d,h=n.clientY-u;Je("contextMenu","openContextMenu",l),this.setState({...s&&!this.state.selectedElementIds[s.id]?{...this.state,...Si({editingGroupId:this.state.editingGroupId,selectedElementIds:{[s.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:xe(s)?new Ue(s,this.scene.getNonDeletedElementsMap()):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:h,left:f,items:this.getContextMenuItems(l)}})})});F(this,"maybeDragNewGenericElement",(n,i,r=!0)=>{var m,p,U;const s=this.state.selectionElement,o=n.lastCoords;if(s&&this.state.activeTool.type!=="eraser"){vM({newElement:s,elementType:this.state.activeTool.type,originX:n.origin.x,originY:n.origin.y,x:o.x,y:o.y,width:Gi(n.origin.x,o.x),height:Gi(n.origin.y,o.y),shouldMaintainAspectRatio:om(i),shouldResizeFromCenter:!1,scene:this.scene,zoom:this.state.zoom.value,informMutation:!1});return}const a=this.state.newElement;if(!a)return;let[l,c]=Pn(o.x,o.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=Ln(a)&&((m=this.imageCache.get(a.fileId))==null?void 0:m.image),d=u&&!(u instanceof Promise)?u.width/u.height:null;this.maybeCacheReferenceSnapPoints(i,[a]);const{snapOffset:f,snapLines:h}=K3e(a,this,i,{x:n.originInGrid.x+(((p=this.state.originSnapOffset)==null?void 0:p.x)??0),y:n.originInGrid.y+(((U=this.state.originSnapOffset)==null?void 0:U.y)??0)},{x:l-n.originInGrid.x,y:c-n.originInGrid.y},this.scene.getNonDeletedElementsMap());l+=f.x,c+=f.y,this.setState({snapLines:h}),vM({newElement:a,elementType:this.state.activeTool.type,originX:n.originInGrid.x,originY:n.originInGrid.y,x:l,y:c,width:Gi(n.originInGrid.x,l),height:Gi(n.originInGrid.y,c),shouldMaintainAspectRatio:Et(a)?!om(i):om(i),shouldResizeFromCenter:wA(i),zoom:this.state.zoom.value,scene:this.scene,widthAspectRatio:d,originOffset:this.state.originSnapOffset,informMutation:r}),this.setState({newElement:a}),(this.state.activeTool.type===Qn.frame||this.state.activeTool.type===Qn.magicframe)&&this.setState({elementsToHighlight:Go(this.scene.getNonDeletedElements(),a,this.state,this.scene.getNonDeletedElementsMap())})});F(this,"maybeHandleCrop",(n,i)=>{var c;if(!this.state.croppingElementId)return!1;const r=n.resize.handleType,s=n.lastCoords,[o,a]=Pn(s.x-n.resize.offset.x,s.y-n.resize.offset.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),l=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(r&&l&&Et(l)){const u=n.originalElements.get(l.id),d=Ln(l)&&((c=this.imageCache.get(l.fileId))==null?void 0:c.image);if(u&&Et(u)&&d&&!(d instanceof Promise)){const[f,h]=Pn(s.x,s.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),m={x:f-n.originInGrid.x,y:h-n.originInGrid.y};this.maybeCacheReferenceSnapPoints(i,[l]);const{snapOffset:p,snapLines:U}=bL([l],[u],this,i,m,r);this.scene.mutateElement(l,iae(l,this.scene.getNonDeletedElementsMap(),r,d.naturalWidth,d.naturalHeight,o+p.x,a+p.y,i.shiftKey?u.width/u.height:void 0)),fr(l,this.scene,{newSize:{width:l.width,height:l.height}}),this.setState({isCropping:r&&r!=="rotation",snapLines:U})}return!0}return!1});F(this,"maybeHandleResize",(n,i)=>{const r=this.scene.getSelectedElements(this.state),s=r.filter(d=>we(d)),o=n.resize.handleType;if(s.length>0&&o==="rotation"||r.length===1&&pe(r[0])||this.state.croppingElementId)return!1;this.setState({isResizing:o&&o!=="rotation",isRotating:o==="rotation",activeEmbeddable:null});const a=n.lastCoords;let[l,c]=Pn(a.x-n.resize.offset.x,a.y-n.resize.offset.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize());const u=new Map;if(s.forEach(d=>{is(this.scene.getNonDeletedElements(),d.id).forEach(h=>{u.set(d.id+h.id,{x:h.x-d.x,y:h.y-d.y})})}),!this.state.selectedElementsAreBeingDragged){const[d,f]=Pn(a.x,a.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),h={x:d-n.originInGrid.x,y:f-n.originInGrid.y},m=[...n.originalElements.values()];this.maybeCacheReferenceSnapPoints(i,r);const{snapOffset:p,snapLines:U}=bL(r,Ge(m,this.state),this,i,h,o);l+=p.x,c+=p.y,this.setState({snapLines:U})}if(Tue(n.originalElements,o,r,this.scene,U1(i),wA(i),r.some(d=>Et(d))?!om(i):om(i),l,c,n.resize.center.x,n.resize.center.y)){const d=V8(r,this.scene.getNonDeletedElementsMap(),this.state.zoom),f=new Set;return s.forEach(h=>{Go(this.scene.getNonDeletedElements(),h,this.state,this.scene.getNonDeletedElementsMap()).forEach(m=>f.add(m))}),this.setState({elementsToHighlight:[...f],suggestedBindings:d}),!0}return!1});F(this,"getContextMenuItems",n=>{const i=[];if(i.push(jk,Xk),n==="canvas")return this.state.viewModeEnabled?[...i,Wk,xv,Pv,Cv]:[$k,qn,jk,Xk,Yk,qn,lhe,mEe,qn,Wk,iEe,xv,Pv,Cv];if(i.push(Yk),this.state.viewModeEnabled)return[rb,...i];const r=this.editorInterface.formFactor==="desktop"?[qn,rhe,she,ohe,ahe]:[];return[qn,Gk,rb,$k,qn,D3e,N3e,O3e,qn,L3e,qn,...i,qn,Xye,jye,qn,Wye,B3e,rEe,sEe,lEe,Kye,qn,Jye,...r,qn,eEe,tEe,qn,s2,qn,LX,BX,qn,che,DX,qn,YV]});F(this,"handleWheel",an(n=>{if(!(n.target instanceof HTMLCanvasElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLIFrameElement||n.target instanceof HTMLElement&&n.target.classList.contains(gr.FRAME_NAME))){n[V.CTRL_OR_CMD]&&n.preventDefault();return}if(n.preventDefault(),wm)return;const{deltaX:i,deltaY:r}=n;if(n.metaKey||n.ctrlKey){const s=Math.sign(r),o=J5*100,a=Math.abs(r);let l=r;a>o&&(l=o*s);let c=this.state.zoom.value-l/100;c+=Math.log10(Math.max(1,this.state.zoom.value))*-s*Math.min(1,a/20),this.translateCanvas(u=>({...Pu({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Va(c)},u),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(n.shiftKey){this.translateCanvas(({zoom:s,scrollX:o})=>({scrollX:o-(r||i)/s.value}));return}this.translateCanvas(({zoom:s,scrollX:o,scrollY:a})=>({scrollX:o-i/s.value,scrollY:a-r/s.value}))}));F(this,"savePointer",(n,i,r)=>{var l,c;if(!n||!i)return;const{x:s,y:o}=Nt({clientX:n,clientY:i},this.state),a={x:s,y:o,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};(c=(l=this.props).onPointerUpdate)==null||c.call(l,{pointer:a,button:r,pointersMap:Ut.pointers})});F(this,"resetShouldCacheIgnoreZoomDebounced",sl(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300));F(this,"updateDOMRect",n=>{var i;if((i=this.excalidrawContainerRef)!=null&&i.current){const r=this.excalidrawContainerRef.current,{width:s,height:o,left:a,top:l}=r.getBoundingClientRect(),{width:c,height:u,offsetTop:d,offsetLeft:f}=this.state;if(s===c&&o===u&&a===f&&l===d){n&&n();return}this.setState({width:s,height:o,offsetLeft:a,offsetTop:l},()=>{n&&n()})}});F(this,"refresh",()=>{this.setState({...this.getCanvasOffsets()})});const i=ia(),{excalidrawAPI:r,viewModeEnabled:s=!1,zenModeEnabled:o=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:c=i.theme,name:u=`${R("labels.untitled")}-${xA()}`}=n;if(this.state={...i,theme:c,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:s,zenModeEnabled:o,objectsSnapModeEnabled:l,gridModeEnabled:a??i.gridModeEnabled,name:u,width:window.innerWidth,height:window.innerHeight},this.refreshEditorInterface(),this.stylesPanelMode=p1(this.editorInterface),this.id=CH(),this.library=new l8e(this),this.actionManager=new z3e(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new A6,this.canvas=document.createElement("canvas"),this.rc=iu.canvas(this.canvas),this.renderer=new EL(this.scene),this.visibleElements=[],this.store=new wce(this),this.history=new zu(this.store),r){const d={updateScene:this.updateScene,applyDeltas:this.applyDeltas,mutateElement:this.mutateElement,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,getSceneElementsMapIncludingDeleted:this.getSceneElementsMapIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:f=>{this.actionManager.registerAction(f)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,getEditorInterface:()=>this.editorInterface,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:f=>this.onChangeEmitter.on(f),onIncrement:f=>this.store.onStoreIncrementEmitter.on(f),onPointerDown:f=>this.onPointerDownEmitter.on(f),onPointerUp:f=>this.onPointerUpEmitter.on(f),onScrollChange:f=>this.onScrollChangeEmitter.on(f),onUserFollow:f=>this.onUserFollowEmitter.on(f)};typeof r=="function"?r(d):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new Ja(this.scene),this.history=new zu(this.store),this.actionManager.registerAll(uv),this.actionManager.registerAction(P3e(this.history)),this.actionManager.registerAction(F3e(this.history))}onWindowMessage(n){if(n.origin!=="https://player.vimeo.com"&&n.origin!=="https://www.youtube.com")return;let i=null;try{i=JSON.parse(n.data)}catch{}if(i)switch(n.origin){case"https://player.vimeo.com":if(i.method==="paused"){let r=null;const s=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!s)break;for(const o of s)o.contentWindow===n.source&&(r=o.contentWindow);r==null||r.postMessage(JSON.stringify({method:i.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(i.event==="infoDelivery"&&i.info&&i.id&&typeof i.info.playerState=="number"){const r=i.id,s=i.info.playerState;Object.values(LU).includes(s)&&Z3.set(r,s)}break}}cacheEmbeddableRef(n,i){i&&this.iFrameRefs.set(n.id,i)}getHTMLIFrameElement(n){return this.iFrameRefs.get(n.id)}handleEmbeddableCenterClick(n){var r,s,o,a;if(((r=this.state.activeEmbeddable)==null?void 0:r.element)===n&&((s=this.state.activeEmbeddable)==null?void 0:s.state)==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:n,state:"active"},selectedElementIds:{[n.id]:!0},newElement:null,selectionElement:null})},100),Wl(n)))return;const i=this.getHTMLIFrameElement(n);if(i!=null&&i.contentWindow){if(i.src.includes("youtube")){const l=Z3.get(n.id);switch(l||(Z3.set(n.id,LU.UNSTARTED),i.contentWindow.postMessage(JSON.stringify({event:"listening",id:n.id}),"*")),l){case LU.PLAYING:case LU.BUFFERING:(o=i.contentWindow)==null||o.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:(a=i.contentWindow)==null||a.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}i.src.includes("player.vimeo.com")&&i.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(n,i,r,s){var o,a;return n&&!i.altKey&&!i.shiftKey&&!i.metaKey&&!i.ctrlKey&&(((o=this.state.activeEmbeddable)==null?void 0:o.element)!==n||((a=this.state.activeEmbeddable)==null?void 0:a.state)==="hover"||!this.state.activeEmbeddable)&&r>=n.x+n.width/3&&r<=n.x+2*n.width/3&&s>=n.y+n.height/3&&s<=n.y+2*n.height/3}renderEmbeddables(){const n=this.state.zoom.value,i=this.state.width,r=this.state.height,s=this.scene.getNonDeletedElements().filter(o=>or(o)&&this.embedsValidationStatus.get(o.id)===!0||Wl(o));return g(fe,{children:s.map(o=>{var p,U,b,y,w,v,I,x,_;const{x:a,y:l}=Kr({sceneX:o.x,sceneY:o.y},this.state),c=x6(o,i,r,this.state,this.scene.getNonDeletedElementsMap()),u=this.initializedEmbeds.has(o.id);if(c&&!u&&this.initializedEmbeds.add(o.id),!(c||u))return null;let f;if(Wl(o)){f=null;const T=(((p=o.customData)==null?void 0:p.generationData)??this.magicGenerations.get(o.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(T.status==="done"){const A=T.html;f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>A}}else if(T.status==="pending")f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>T1(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme===ke.DARK?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let A;T.code==="ERR_GENERATION_INTERRUPTED"?A="Generation was interrupted...":A=T.message||"Generation failed",f={intrinsicSize:{w:o.width,h:o.height},type:"document",srcdoc:()=>T1(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${je.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${A}</h3>
                  `)}}}else f=Yf(K9(o.link||""));const h=((U=this.state.activeEmbeddable)==null?void 0:U.element)===o&&((b=this.state.activeEmbeddable)==null?void 0:b.state)==="active",m=((y=this.state.activeEmbeddable)==null?void 0:y.element)===o&&((w=this.state.activeEmbeddable)==null?void 0:w.state)==="hover";return g("div",{className:ce("excalidraw__embeddable-container",{"is-hovered":m}),style:{transform:c?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${n})`:"none",display:c?"block":"none",opacity:zz(o,Ar(o,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure,null,((v=this.state.openDialog)==null?void 0:v.name)==="elementLinkSelector"?yB:1),"--embeddable-radius":`${dr(Math.min(o.width,o.height),o)}px`},children:N("div",{className:"excalidraw__embeddable-container__inner",style:{width:c?`${o.width}px`:0,height:c?`${o.height}px`:0,transform:c?`rotate(${o.angle}rad)`:"none",pointerEvents:h?wu.enabled:wu.disabled},children:[m&&g("div",{className:"excalidraw__embeddable-hint",children:R("buttons.embeddableInteractionButton")}),g("div",{className:"excalidraw__embeddable__outer",style:{padding:`${o.strokeWidth}px`},children:(or(o)?(x=(I=this.props).renderEmbeddable)==null?void 0:x.call(I,o,this.state):null)??g("iframe",{ref:T=>this.cacheEmbeddableRef(o,T),className:"excalidraw__embeddable",srcDoc:(f==null?void 0:f.type)==="document"?f.srcdoc(this.state.theme):void 0,src:(f==null?void 0:f.type)!=="document"?(f==null?void 0:f.link)??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:`${(_=f==null?void 0:f.sandbox)!=null&&_.allowSameOrigin?"allow-same-origin":""} allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads`})})]})},o.id)})})}toggleOverscrollBehavior(n){document.documentElement.style.overscrollBehaviorX=n.type==="pointerenter"?"none":"auto"}render(){var h,m,p,U,b,y,w,v,I;const n=this.scene.getSelectedElements(this.state),{renderTopRightUI:i,renderTopLeftUI:r,renderCustomStats:s}=this.props,o=this.scene.getSceneNonce(),{elementsMap:a,visibleElements:l}=this.renderer.getRenderableElements({sceneNonce:o,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingTextElement:this.state.editingTextElement,newElementId:(h=this.state.newElement)==null?void 0:h.id});this.visibleElements=l;const c=this.scene.getNonDeletedElementsMap(),u="setPointerCapture"in HTMLElement.prototype?!1:this.state.selectionElement||this.state.newElement||this.state.selectedElementsAreBeingDragged||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down",d=n[0],f=((m=Xr.get(Sa))==null?void 0:m.type)==="panel";return g("div",{translate:"no",className:ce("excalidraw excalidraw-container notranslate",{"excalidraw--view-mode":this.state.viewModeEnabled||((p=this.state.openDialog)==null?void 0:p.name)==="elementLinkSelector","excalidraw--mobile":this.editorInterface.formFactor==="phone"}),style:{"--ui-pointerEvents":u?wu.disabled:wu.enabled,"--right-sidebar-width":"302px"},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:g(MY.Provider,{value:this,children:g(RY.Provider,{value:this.props,children:g(iI.Provider,{value:this.excalidrawContainerValue,children:g(nI.Provider,{value:this.editorInterface,children:g(oI.Provider,{value:this.setAppState,children:g(sI.Provider,{value:this.state,children:N(rI.Provider,{value:this.scene.getNonDeletedElements(),children:[N(aI.Provider,{value:this.actionManager,children:[g(Dve,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:b0().code,renderTopLeftUI:r,renderTopRightUI:i,renderCustomStats:s,showExitZenModeBtn:typeof((U=this.props)==null?void 0:U.zenModeEnabled)>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type===this.state.preferredSelectionTool.type&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,generateLinkForSelection:this.props.generateLinkForSelection,children:this.props.children}),g("div",{className:"excalidraw-textEditorContainer"}),g("div",{className:"excalidraw-contextMenuContainer"}),g("div",{className:"excalidraw-eye-dropper-container"}),g(Ove,{trails:[this.laserTrails,this.lassoTrail,this.eraserTrail]}),n.length===1&&((b=this.state.openDialog)==null?void 0:b.name)!=="elementLinkSelector"&&this.state.showHyperlinkPopup&&g(dEe,{element:d,scene:this.scene,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},d.id),this.props.aiEnabled!==!1&&n.length===1&&F2(d)&&g(vL,{element:d,elementsMap:a,children:g(X3,{title:R("labels.convertToCode"),icon:N6,checked:!1,onChange:()=>this.onMagicFrameGenerate(d,"button")})}),n.length===1&&Wl(d)&&((w=(y=d.customData)==null?void 0:y.generationData)==null?void 0:w.status)==="done"&&N(vL,{element:d,elementsMap:a,children:[g(X3,{title:R("labels.copySource"),icon:kp,checked:!1,onChange:()=>this.onIframeSrcCopy(d)}),g(X3,{title:"Enter fullscreen",icon:Cfe,checked:!1,onChange:()=>{const x=this.getHTMLIFrameElement(d);if(x)try{x.requestFullscreen(),this.setState({activeEmbeddable:{element:d,state:"active"},selectedElementIds:{[d.id]:!0},newElement:null,selectionElement:null})}catch(_){console.warn(_),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&g(cwe,{message:this.state.toast.message,onClose:this.handleToastClose,duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&g(T7e,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:x=>{this.setState({contextMenu:null},()=>{this.focusContainer(),x==null||x()})}}),g(rwe,{canvas:this.canvas,rc:this.rc,elementsMap:a,allElementsMap:c,visibleElements:l,sceneNonce:o,selectionNonce:(v=this.state.selectionElement)==null?void 0:v.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:B0(this),canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:this.flowChartCreator.pendingNodes}}),this.state.newElement&&g(awe,{appState:this.state,scale:window.devicePixelRatio,rc:this.rc,elementsMap:a,allElementsMap:c,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!1,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure,pendingFlowchartNodes:null}}),g(twe,{app:this,containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:a,visibleElements:l,allElementsMap:c,selectedElements:n,sceneNonce:o,selectionNonce:(I=this.state.selectionElement)==null?void 0:I.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderScrollbars:this.props.renderScrollbars===!0,editorInterface:this.editorInterface,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&g(I7e,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames(),this.state.activeLockedId&&g(uwe,{app:this,activeLockedId:this.state.activeLockedId}),f&&g(wEe,{app:this})]}),this.renderEmbeddables()]})})})})})})})})}setPlugins(n){Object.assign(this.plugins,n)}async onMagicFrameGenerate(n,i){var a;const r=(a=this.plugins.diagramToCode)==null?void 0:a.generate;if(!r){this.setState({errorMessage:"No diagram to code plugin found"});return}const s=T_(this.scene.getNonDeletedElements(),n).filter(l=>!F2(l));if(!s.length){i==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),Je("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}const o=this.insertIframeElement({sceneX:n.x+n.width+30,sceneY:n.y,width:n.width,height:n.height});if(o){this.updateMagicGeneration({frameElement:o,data:{status:"pending"}}),this.setState({selectedElementIds:{[o.id]:!0}}),Je("ai","generate (start)","d2c");try{const{html:l}=await r({frame:n,children:s});if(Je("ai","generate (success)","d2c"),!l.trim()){this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}const c=l.includes("<!DOCTYPE html>")&&l.includes("</html>")?l.slice(l.indexOf("<!DOCTYPE html>"),l.indexOf("</html>")+7):l;this.updateMagicGeneration({frameElement:o,data:{status:"done",html:c}})}catch(l){Je("ai","generate (failed)","d2c"),this.updateMagicGeneration({frameElement:o,data:{status:"error",code:"ERR_OAI",message:l.message||"Unknown error during generation"}})}}}onIframeSrcCopy(n){var i,r;((r=(i=n.customData)==null?void 0:i.generationData)==null?void 0:r.status)==="done"&&(cu(n.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}clearImageShapeCache(n){const i=n??this.files;this.scene.getNonDeletedElements().forEach(r=>{Ln(r)&&i[r.fileId]&&(this.imageCache.delete(r.fileId),qt.delete(r))})}async componentDidMount(){var r;this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,this.store.onDurableIncrementEmitter.on(s=>{this.history.record(s.delta)});const{onIncrement:n}=this.props;n&&this.store.onStoreIncrementEmitter.on(s=>{n(s)}),this.scene.onUpdate(this.triggerRender),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),aB&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorInterface(),this.updateDOMRect()}),(r=this.resizeObserver)==null||r.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),ise()&&!pae()&&this.setState({errorMessage:g(w7e,{})})}componentWillUnmount(){var n,i;(n=window.launchQueue)==null||n.setConsumer(()=>{}),this.renderer.destroy(),this.scene.destroy(),this.scene=new A6,this.fonts=new Ja(this.scene),this.renderer=new EL(this.scene),this.files={},this.imageCache.clear(),(i=this.resizeObserver)==null||i.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),this.store.onStoreIncrementEmitter.clear(),this.store.onDurableIncrementEmitter.clear(),qt.destroy(),Ws.destroy(),clearTimeout(Fl),Wn.clearCache(),Si.clearCache(),Fl=0,document.documentElement.style.overscrollBehaviorX=""}removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(en(document,te.KEYDOWN,this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(en(this.excalidrawContainerRef.current,te.WHEEL,this.handleWheel,{passive:!1}),en(window,te.MESSAGE,this.onWindowMessage,!1),en(document,te.POINTER_UP,this.removePointer,{passive:!1}),en(document,te.COPY,this.onCopy,{passive:!1}),en(document,te.KEYUP,this.onKeyUp,{passive:!0}),en(document,te.POINTER_MOVE,this.updateCurrentCursorPosition,{passive:!1}),en(document.fonts,"loadingdone",n=>{const i=n.fontfaces;this.fonts.onLoaded(i)},{passive:!1}),en(document,te.GESTURE_START,this.onGestureStart,!1),en(document,te.GESTURE_CHANGE,this.onGestureChange,!1),en(document,te.GESTURE_END,this.onGestureEnd,!1),en(window,te.FOCUS,()=>{this.maybeCleanupAfterMissingPointerUp(null),this.triggerRender(!0)},{passive:!1})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(en(document,te.FULLSCREENCHANGE,this.onFullscreenChange,{passive:!1}),en(document,te.PASTE,this.pasteFromClipboard,{passive:!1}),en(document,te.CUT,this.onCut,{passive:!1}),en(window,te.RESIZE,this.onResize,!1),en(window,te.UNLOAD,this.onUnload,!1),en(window,te.BLUR,this.onBlur,!1),en(this.excalidrawContainerRef.current,te.WHEEL,this.handleWheel,{passive:!1}),en(this.excalidrawContainerRef.current,te.DRAG_OVER,this.disableEvent,!1),en(this.excalidrawContainerRef.current,te.DROP,this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(en(Vse(this.excalidrawContainerRef.current),te.SCROLL,this.onScroll,{passive:!1})))}componentDidUpdate(n,i){var a,l,c,u,d,f,h,m,p,U,b;this.updateEmbeddables();const r=this.scene.getElementsIncludingDeleted(),s=this.scene.getElementsMapIncludingDeleted();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),i.userToFollow&&!this.state.collaborators.has(i.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(i.zoom.value!==this.state.zoom.value||i.scrollX!==this.state.scrollX||i.scrollY!==this.state.scrollY)&&((l=(a=this.props)==null?void 0:a.onScrollChange)==null||l.call(a,this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),i.userToFollow!==this.state.userToFollow&&(i.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:i.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&Ao(this.state)&&this.setState({activeTool:tn(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&i.theme!==this.state.theme&&lG(this.interactiveCanvas,this.state.theme),i.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),n.langCode!==this.props.langCode&&this.updateLanguage(),Ao(i)&&!Ao(this.state)&&this.eraserTrail.endPath(),n.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),i.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),(((c=i.openDialog)==null?void 0:c.name)==="elementLinkSelector"||((u=this.state.openDialog)==null?void 0:u.name)==="elementLinkSelector")&&((d=i.openDialog)==null?void 0:d.name)!==((f=this.state.openDialog)==null?void 0:f.name)&&(this.deselectElements(),this.setState({hoveredElementIds:{}})),n.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),n.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),(h=this.excalidrawContainerRef.current)==null||h.classList.toggle("theme--dark",this.state.theme===ke.DARK),(m=this.state.selectedLinearElement)!=null&&m.isEditing&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&setTimeout(()=>{var y;(y=this.state.selectedLinearElement)!=null&&y.isEditing&&this.actionManager.executeAction(Vs)}),(p=this.state.editingTextElement)!=null&&p.isDeleted&&this.setState({editingTextElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null}),this.store.commit(s,this.state),this.state.isLoading||((b=(U=this.props).onChange)==null||b.call(U,r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}static resetTapTwice(){Em=!1,vm=null}async insertClipboardContent(n,i,r){const{x:s,y:o}=Nt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state);if(n.errorMessage){this.setState({errorMessage:n.errorMessage});return}if(i.length===0&&!r&&n.mixedContent){await this.addElementsFromMixedContentPaste(n.mixedContent,{isPlainPaste:r,sceneX:s,sceneY:o});return}if(n.spreadsheet&&!r){this.setState({pasteDialog:{data:n.spreadsheet,shown:!0}});return}const a=i.map(u=>u.file);if(a.length===0&&n.text&&!r){const u=n.text.trim();u.startsWith("<svg")&&u.endsWith("</svg>")&&a.push(Fk(u))}if(a.length>0){this.isToolSupported("image")?await this.insertImages(a,s,o):this.setState({errorMessage:R("errors.imageToolNotSupported")});return}if(n.elements){const u=n.programmaticAPI?Fv(n.elements):n.elements;this.addElementsFromPasteOrLibrary({elements:u,files:n.files||null,position:this.editorInterface.formFactor==="desktop"?"cursor":"center",retainSeed:r});return}if(!n.text)return;if(!r&&h7e(n.text)){const u=await Ee(()=>import("./index-C4ze4SDF.js").then(d=>d.b6),__vite__mapDeps([]),import.meta.url);try{const{elements:d,files:f}=await u.parseMermaidToExcalidraw(n.text),h=Fv(d,{regenerateIds:!0});this.addElementsFromPasteOrLibrary({elements:h,files:f,position:this.editorInterface.formFactor==="desktop"?"cursor":"center"});return}catch(d){console.warn(`parsing pasted text as mermaid definition failed: ${d.message}`)}}const l=$B(n.text).split(/\n+/).map(u=>u.trim()).filter(Boolean),c=l.map(u=>mue(u)).filter(u=>{var d;return V2(u,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(u)||((d=Yf(u))==null?void 0:d.type)==="video")});if(!r&&c.length>0&&c.length===l.length){const u=[];for(const d of c){const f=u[u.length-1],h=this.insertEmbeddableElement({sceneX:f?f.x+f.width+20:s,sceneY:o,link:ns(d)});h&&u.push(h)}u.length&&(this.store.scheduleCapture(),this.setState({selectedElementIds:Object.fromEntries(u.map(d=>[d.id,!0]))}));return}this.addTextFromPaste(n.text,r)}async addElementsFromMixedContentPaste(n,{isPlainPaste:i,sceneX:r,sceneY:s}){if(!i&&n.some(o=>o.type==="imageUrl")&&this.isToolSupported("image")){const o=n.filter(u=>u.type==="imageUrl").map(u=>u.value),a=await Promise.all(o.map(async u=>{try{return{file:await gye(u)}}catch(d){let f=d.message;return d.cause==="FETCH_ERROR"?f=R("errors.failedToFetchImage"):d.cause==="UNSUPPORTED"&&(f=R("errors.unsupportedFileType")),{errorMessage:f}}})),l=a.filter(u=>!!u.file).map(u=>u.file);await this.insertImages(l,r,s);const c=a.find(u=>!!u.errorMessage);c&&c.errorMessage&&this.setState({errorMessage:c.errorMessage})}else{const o=n.filter(a=>a.type==="text");o.length&&this.addTextFromPaste(o.map(a=>a.value).join(`

`),i)}}addTextFromPaste(n,i=!1){const{x:r,y:s}=Nt({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),o={x:r,y:s,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:n,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:gp,verticalAlign:Yb,locked:!1},a=pt({fontSize:o.fontSize,fontFamily:o.fontFamily}),l=Fc(o.fontFamily),[c,,u]=Kz(this.state),d=Math.max(Math.min((u-c)*.5,800),200),f=10;let h=s;const m=i?[n]:n.split(`
`),p=m.reduce((U,b,y)=>{var v;const w=Hh(b).trim();if(w.length){const I=this.getTopLayerFrameAtSceneCoords({x:r,y:h});let x=jn(w,a,l);const _=x.width>d,T=_?ru(w,a,d):w;x=_?jn(T,a,l):x;const A=r-x.width/2,C=h-x.height/2,k=as({...o,x:A,y:C,text:T,originalText:w,lineHeight:l,autoResize:!_,frameId:I?I.id:null});U.push(k),h+=k.height+f}else((v=m[y-1])==null?void 0:v.trim())&&(h+=_p(o.fontSize,l)+f);return U},[]);p.length!==0&&(this.scene.insertElements(p),this.store.scheduleCapture(),this.setState({selectedElementIds:xt(Object.fromEntries(p.map(U=>[U.id,!0])),this.state)}),!i&&p.length>1&&eD===!1&&this.editorInterface.formFactor!=="phone"&&(this.setToast({message:R("toast.pasteAsSingleElement",{shortcut:J("CtrlOrCmd+Shift+V")}),duration:5e3}),eD=!0))}handleTextWysiwyg(n,{isExistingElement:i=!1}){const r=this.scene.getElementsMapIncludingDeleted(),s=(o,a)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(l=>l.id===n.id&&ge(l)?Ie(l,{originalText:o,isDeleted:a??l.isDeleted,...aH(l,Yn(l,r),r,o)}):l)])};u7e({id:n.id,canvas:this.canvas,getViewportCoords:(o,a)=>{const{x:l,y:c}=Kr({sceneX:o,sceneY:a},this.state);return[l-this.state.offsetLeft,c-this.state.offsetTop]},onChange:an(o=>{s(o,!1),Q4(n)&&fr(n,this.scene)}),onSubmit:an(({viaKeyboard:o,nextOriginalText:a})=>{const l=!a.trim();if(s(a,l),!l&&o){const c=n.containerId?n.containerId:n.id;mi.flushSync(()=>{this.setState(u=>({selectedElementIds:xt({...u.selectedElementIds,[c]:!0},u)}))})}l&&Sz(this.scene.getNonDeletedElements(),[n]),(!l||i)&&this.store.scheduleCapture(),mi.flushSync(()=>{this.setState({newElement:null,editingTextElement:null})}),this.state.activeTool.locked&&To(this.interactiveCanvas,this.state),this.focusContainer()}),element:n,excalidrawContainer:this.excalidrawContainerRef.current,app:this,autoSelect:!this.editorInterface.isTouchScreen}),this.deselectElements(),s(n.originalText,!1)}deselectElements(){this.setState({selectedElementIds:xt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(n,i){const r=this.getElementAtPosition(n,i,{includeBoundTextElement:!0});return r&&ge(r)&&!r.isDeleted?r:null}getElementAtPosition(n,i,r){let s=[];if(r&&"allHitElements"in r?s=(r==null?void 0:r.allHitElements)||[]:s=this.getElementsAtPosition(n,i,{includeBoundTextElement:r==null?void 0:r.includeBoundTextElement,includeLockedElements:r==null?void 0:r.includeLockedElements}),s.length>1){if(r!=null&&r.preferSelected){for(let a=s.length-1;a>-1;a--)if(this.state.selectedElementIds[s[a].id])return s[a]}const o=s[s.length-1];return vf({point:S(n,i),element:o,threshold:this.getElementHitThreshold(o)/2,elementsMap:this.scene.getNonDeletedElementsMap(),frameNameBound:we(o)?this.frameNameBoundsCache.get(o):null})?o:s[s.length-2]}return s.length===1?s[0]:null}getElementsAtPosition(n,i,r){const s=[],o=this.scene.getNonDeletedElementsMap();return(r!=null&&r.includeBoundTextElement&&(r!=null&&r.includeLockedElements)?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(l=>((r==null?void 0:r.includeLockedElements)||!l.locked)&&((r==null?void 0:r.includeBoundTextElement)||!(ge(l)&&l.containerId)))).filter(l=>this.hitElement(n,i,l)).filter(l=>{const c=Ar(l,o);return c&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?tM({x:n,y:i},c,o):!0}).filter(l=>Wl(l)?(s.push(l),!1):!0).concat(s)}getElementHitThreshold(n){return Math.max(n.strokeWidth/2+.1,.85*(UA/this.state.zoom.value))}hitElement(n,i,r,s=!0){return s&&this.state.selectedElementIds[r.id]&&UH([r],this.state,this.editorInterface)&&ay(S(n,i),r,this.scene.getNonDeletedElementsMap(),this.getElementHitThreshold(r))||gz(S(n,i),r,this.scene.getNonDeletedElementsMap())?!0:vf({point:S(n,i),element:r,threshold:this.getElementHitThreshold(r),elementsMap:this.scene.getNonDeletedElementsMap(),frameNameBound:we(r)?this.frameNameBoundsCache.get(r):null})}getTextBindableContainerAtPosition(n,i){const r=this.scene.getNonDeletedElements(),s=this.scene.getSelectedElements(this.state);if(s.length===1)return Qu(s[0],!1)?s[0]:null;let o=null;for(let a=r.length-1;a>=0;--a){if(r[a].isDeleted)continue;const[l,c,u,d]=He(r[a],this.scene.getNonDeletedElementsMap());if(Ce(r[a])&&vf({point:S(n,i),element:r[a],elementsMap:this.scene.getNonDeletedElementsMap(),threshold:this.getElementHitThreshold(r[a])})){o=r[a];break}else if(l<n&&n<u&&c<i&&i<d){o=r[a];break}}return Qu(o,!1)?o:null}handleHoverSelectedLinearElement(n,i,r){const s=this.scene.getNonDeletedElementsMap(),o=Ue.getElement(n.elementId,s);if(o)if(this.state.selectedLinearElement){let a=-1,l=null;vf({point:S(i,r),element:o,elementsMap:s,threshold:this.getElementHitThreshold(o)})?(a=Ue.getPointIndexUnderCursor(o,s,this.state.zoom,i,r),l=Ue.getSegmentMidpointHitCoords(n,{x:i,y:r},this.state,this.scene.getNonDeletedElementsMap()),(pe(o)?a===0||a===o.points.length-1:a>=0)||l?Dt(this.interactiveCanvas,Ct.POINTER):this.hitElement(i,r,o)&&(!pe(o)||!(o.startBinding||o.endBinding))&&(this.state.activeTool.type!=="lasso"||Object.keys(this.state.selectedElementIds).length>0)&&Dt(this.interactiveCanvas,Ct.MOVE)):this.hitElement(i,r,o)&&(!pe(o)||!(o.startBinding||o.endBinding))&&(this.state.activeTool.type!=="lasso"||Object.keys(this.state.selectedElementIds).length>0)&&Dt(this.interactiveCanvas,Ct.MOVE),this.state.selectedLinearElement.hoverPointIndex!==a&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:a}}),Ue.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,l)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:l}})}else Dt(this.interactiveCanvas,Ct.AUTO)}updateGestureOnPointerDown(n){Ut.pointers.set(n.pointerId,{x:n.clientX,y:n.clientY}),Ut.pointers.size===2&&(Ut.lastCenter=fL(Ut.pointers),Ut.initialScale=this.state.zoom.value,Ut.initialDistance=hL(Array.from(Ut.pointers.values())))}initialPointerDownState(n){const i=Nt(n,this.state),r=this.scene.getSelectedElements(this.state),[s,o,a,l]=nt(r),c=r.findIndex(pe)===0;return{origin:i,withCmdOrCtrl:n[V.CTRL_OR_CMD],originInGrid:Wa(Pn(i.x,i.y,n[V.CTRL_OR_CMD]||c?null:this.getEffectiveGridSize())),scrollbars:IL(_m,n.clientX-this.state.offsetLeft,n.clientY-this.state.offsetTop),lastCoords:{...i},originalElements:this.scene.getNonDeletedElements().reduce((u,d)=>(u.set(d.id,Vc(d)),u),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+s)/2,y:(l+o)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(i,r)},drag:{hasOccurred:!1,offset:null,origin:{...i},blockDragging:!1},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(n,i){if(!(i.scrollbars.isOverEither&&!this.state.multiElement))return!1;K3=!0,i.lastCoords.x=n.clientX,i.lastCoords.y=n.clientY;const r=N3(o=>{o.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(o,i)}),s=an(()=>{yu=null,K3=!1,To(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(n.clientX,n.clientY,"up"),window.removeEventListener(te.POINTER_MOVE,r),window.removeEventListener(te.POINTER_UP,s),r.flush()});return yu=s,window.addEventListener(te.POINTER_MOVE,r),window.addEventListener(te.POINTER_UP,s),!0}isASelectedElement(n){return n!=null&&this.state.selectedElementIds[n.id]}isHittingCommonBoundingBoxOfSelectedElements(n,i){if(i.length<2)return!1;const r=Math.max(UA/this.state.zoom.value,1),[s,o,a,l]=nt(i);return n.x>s-r&&n.x<a+r&&n.y>o-r&&n.y<l+r}getCurrentItemRoundness(n){return this.state.currentItemRoundness==="round"?{type:Hd(n)?yn.ADAPTIVE_RADIUS:yn.PROPORTIONAL_RADIUS}:null}maybeCacheReferenceSnapPoints(n,i,r=!1){Yc({event:n,app:this,selectedElements:i})&&(r||!Ws.getReferenceSnapPoints())&&Ws.setReferenceSnapPoints(X3e(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(n,i,r=!1){Yc({event:n,app:this,selectedElements:i})&&(r||!Ws.getVisibleGaps())&&Ws.setVisibleGaps(G3e(this.scene.getNonDeletedElements(),i,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(n){return an(i=>{this.maybeHandleResize(n,i)||this.maybeDragNewGenericElement(n,i)})}onKeyUpFromPointerDownHandler(n){return an(i=>{i.key===V.ALT&&i.preventDefault(),!this.maybeHandleResize(n,i)&&this.maybeDragNewGenericElement(n,i)})}onPointerMoveFromPointerDownHandler(n){return N3(i=>{var f,h,m,p,U,b,y,w;if(((f=this.state.openDialog)==null?void 0:f.name)==="elementLinkSelector")return;const r=Nt(i,this.state);if(this.state.activeLockedId&&this.setState({activeLockedId:null}),this.state.selectedLinearElement&&this.state.selectedLinearElement.elbowed&&this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index){const[v,I]=Pn(r.x,r.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize());let x=this.state.selectedLinearElement.pointerDownState.segmentMidpoint.index;if(x<0){const T=Ue.getSegmentMidpointHitCoords({...this.state.selectedLinearElement,segmentMidPointHoveredCoords:null},{x:v,y:I},this.state,this.scene.getNonDeletedElementsMap());x=T?Ue.getSegmentMidPointIndex(this.state.selectedLinearElement,this.state,T,this.scene.getNonDeletedElementsMap()):-1}const _=Ue.moveFixedSegment(this.state.selectedLinearElement,x,v,I,this.scene);this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:_.segmentMidPointHoveredCoords,pointerDownState:_.pointerDownState}});return}const s=this.lastPointerMoveCoords??n.origin;if(this.lastPointerMoveCoords=r,n.drag.offset===null&&(n.drag.offset=Wa(Jce(this.scene.getSelectedElements(this.state),n.origin.x,n.origin.y))),!(i.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(i,n))return;if(Ao(this.state)){this.handleEraser(i,r);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(r.x,r.y);const[a,l]=Pn(r.x,r.y,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize());if(!n.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&ct(S(r.x,r.y),S(n.origin.x,n.origin.y))*this.state.zoom.value<mA)return;if(n.resize.isResizing&&(n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeHandleCrop(n,i)||this.maybeHandleResize(n,i)))return!0;const c=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){const v=this.state.selectedLinearElement;if(Ue.shouldAddMidpoint(this.state.selectedLinearElement,r,this.state,c)){const x=Ue.addMidpoint(this.state.selectedLinearElement,r,this,!i[V.CTRL_OR_CMD],this.scene);if(!x)return;mi.flushSync(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:x.pointerDownState,selectedPointsIndices:x.selectedPointsIndices,segmentMidPointHoveredCoords:null}})});return}else if(v.pointerDownState.segmentMidpoint.value!==null&&!v.pointerDownState.segmentMidpoint.added)return;const I=Ue.handlePointDragging(i,this,r.x,r.y,v);if(I){n.lastCoords.x=r.x,n.lastCoords.y=r.y,n.drag.hasOccurred=!0,this.setState(I);return}}const u=n.hit.allHitElements.some(v=>this.isASelectedElement(v)),d=((h=this.state.selectedLinearElement)==null?void 0:h.isEditing)&&i.shiftKey&&this.state.selectedLinearElement.elementId===((m=n.hit.element)==null?void 0:m.id);if((u||n.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!d&&!n.drag.blockDragging){const v=this.scene.getSelectedElements(this.state);if(v.length>0&&v.every(T=>T.locked))return;const I=v.find(T=>we(T)),x=this.getTopLayerFrameAtSceneCoords(r),_=x&&!I?x:null;if(this.state.frameToHighlight!==_&&mi.flushSync(()=>{this.setState({frameToHighlight:_})}),n.drag.hasOccurred=!0,this.state.activeTool.type==="lasso"&&this.lassoTrail.hasCurrentTrail&&!(this.editorInterface.formFactor!=="desktop"&&n.hit.element)&&!this.state.activeTool.fromSelection)return;if(this.state.activeTool.type==="lasso"&&v.length>0&&n.drag.hasOccurred&&!this.state.activeTool.fromSelection&&this.lassoTrail.endPath(),v.length>0&&!n.withCmdOrCtrl&&!this.state.editingTextElement&&((p=this.state.activeEmbeddable)==null?void 0:p.state)!=="active"){const T={x:r.x-n.drag.origin.x,y:r.y-n.drag.origin.y},A=[...n.originalElements.values()],C=i.shiftKey;if(C){const D=Math.abs(T.x),j=Math.abs(T.y),G=C&&D<j,B=C&&D>j;G&&(T.x=0),B&&(T.y=0)}if(this.state.croppingElementId){const D=this.scene.getNonDeletedElementsMap().get(this.state.croppingElementId);if(D&&Et(D)&&D.crop!==null&&n.hit.element===D){const j=D.crop,G=Ln(D)&&((U=this.imageCache.get(D.fileId))==null?void 0:U.image);if(G&&!(G instanceof Promise)){const B=In(pn(r.x-s.x,r.y-s.y),Math.max(this.state.zoom.value,2)),[H,$,X,W,Q,oe]=He(D,c),ne=he(q(S(H,$),S(Q,oe),D.angle)),ie=he(q(S(X,$),S(Q,oe),D.angle)),me=he(q(S(H,W),S(Q,oe),D.angle)),Re=ts(Qb(ie,ne)),Ve=ts(Qb(me,ne)),wt=pn(y1(B,Re),y1(B,Ve)),Ot={...j,x:Ze(j.x-wt[0]*Math.sign(D.scale[0]),0,G.naturalWidth-j.width),y:Ze(j.y-wt[1]*Math.sign(D.scale[1]),0,G.naturalHeight-j.height)};this.scene.mutateElement(D,{crop:Ot});return}}}this.maybeCacheVisibleGaps(i,v),this.maybeCacheReferenceSnapPoints(i,v);const{snapOffset:k,snapLines:P}=j3e(A,T,this,i,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:P}),this.state.editingFrame||qce(n,v,T,this.scene,k,i[V.CTRL_OR_CMD]?null:this.getEffectiveGridSize()),this.setState({selectedElementsAreBeingDragged:!0,selectionElement:null}),(v.length!==1||!pe(v[0]))&&this.setState({suggestedBindings:V8(v,this.scene.getNonDeletedElementsMap(),this.state.zoom)}),i.altKey&&!n.hit.hasBeenDuplicated){n.hit.hasBeenDuplicated=!0;const D=this.scene.getElementsIncludingDeleted(),j=n.hit.element,G=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});j&&n.hit.wasAddedToSelection&&!G.find(ie=>ie.id===j.id)&&G.push(j);const B=new Map(G.map(ie=>[ie.id,ie])),{duplicatedElements:H,duplicateElementsMap:$,elementsWithDuplicates:X,origIdToDuplicateId:W}=_1({type:"in-place",elements:D,appState:this.state,randomizeSeed:!0,idsOfElementsToDuplicate:B,overrides:({duplicateElement:ie,origElement:me})=>({frameId:ie.frameId??me.frameId,seed:Ps()})});H.forEach(ie=>{n.originalElements.set(ie.id,Vc(ie))});const Q=X.map(ie=>{if(B.has(ie.id)){const me=n.originalElements.get(ie.id);if(me)return Ie(ie,{x:me.x,y:me.y})}return ie}),oe=(y=(b=this.props).onDuplicate)==null?void 0:y.call(b,Q,D),ne=lo(oe||Q,ve(H));mi.flushSync(()=>{if(n.hit.element){const ie=W.get(n.hit.element.id),me=ie&&$.get(ie);n.hit.element=me||null}n.hit.allHitElements=n.hit.allHitElements.reduce((ie,me)=>{const Re=W.get(me.id),Ve=Re&&$.get(Re);return Ve&&ie.push(Ve),ie},[]),n.drag.origin=Nt(i,this.state),this.setState(ie=>({...kz(H,this.scene.getNonDeletedElements(),ie)})),this.scene.replaceAllElements(ne),G.forEach(ie=>{var me;os(ie)&&((me=ie.boundElements)!=null&&me.some(Re=>Re.type==="arrow"))&&fr(ie,this.scene)}),this.maybeCacheVisibleGaps(i,G,!0),this.maybeCacheReferenceSnapPoints(i,G,!0)})}return}}if(this.state.selectionElement){if(n.lastCoords.x=r.x,n.lastCoords.y=r.y,i.altKey){this.setActiveTool({type:"lasso",fromSelection:!0},i.shiftKey),this.lassoTrail.startPath(n.origin.x,n.origin.y,i.shiftKey),this.setAppState({selectionElement:null});return}this.maybeDragNewGenericElement(n,i)}else if(this.state.activeTool.type==="lasso")!i.altKey&&this.state.activeTool.fromSelection?(this.setActiveTool({type:"selection"}),this.createGenericElementOnPointerDown("selection",n),n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i),this.lassoTrail.endPath()):this.lassoTrail.addPointToPath(r.x,r.y,i.shiftKey);else{const v=this.state.newElement;if(!v)return;if(v.type==="freedraw"){const I=v.points,x=r.x-v.x,_=r.y-v.y,T=I.length>0&&I[I.length-1];if(!(T&&T[0]===x&&T[1]===_)){const C=v.simulatePressure?v.pressures:[...v.pressures,i.pressure];this.scene.mutateElement(v,{points:[...I,S(x,_)],pressures:C},{informMutation:!1,isDragging:!1}),this.setState({newElement:v})}}else if(xe(v)){n.drag.hasOccurred=!0;const I=v.points;let x=a-v.x,_=l-v.y;U1(i)&&I.length===2&&({width:x,height:_}=z4(v.x,v.y,r.x,r.y)),I.length===1?this.scene.mutateElement(v,{points:[...I,S(x,_)]},{informMutation:!1,isDragging:!1}):(I.length===2||I.length>1&&pe(v))&&this.scene.mutateElement(v,{points:[...I.slice(0,-1),S(x,_)]},{isDragging:!0,informMutation:!1}),this.setState({newElement:v}),Ha(v,!1)&&this.setState({suggestedBindings:N4(v,[r],this.scene,this.state.zoom,this.state.startBoundElement)})}else n.lastCoords.x=r.x,n.lastCoords.y=r.y,this.maybeDragNewGenericElement(n,i,!1)}if(this.state.activeTool.type==="selection"){n.boxSelection.hasOccurred=!0;const v=this.scene.getNonDeletedElements();if((w=this.state.selectedLinearElement)!=null&&w.isEditing)Ue.handleBoxSelection(i,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let I=!0;!i.shiftKey&&Wn(v,this.state)&&(n.withCmdOrCtrl&&n.hit.element?this.setState(_=>Si({..._,selectedElementIds:{[n.hit.element.id]:!0}},this.scene.getNonDeletedElements(),_,this)):I=!1);const x=this.state.selectionElement?b_(v,this.state.selectionElement,this.scene.getNonDeletedElementsMap(),!1):[];this.setState(_=>{const T={...I&&_.selectedElementIds,...x.reduce((A,C)=>(A[C.id]=!0,A),{})};return n.hit.element&&(x.length?delete T[n.hit.element.id]:T[n.hit.element.id]=!0),_=I?_:{..._,selectedGroupIds:{},editingGroupId:null},{...Si({editingGroupId:_.editingGroupId,selectedElementIds:T},this.scene.getNonDeletedElements(),_,this),selectedLinearElement:x.length===1&&xe(x[0])?new Ue(x[0],this.scene.getNonDeletedElementsMap()):null,showHyperlinkPopup:x.length===1&&(x[0].link||or(x[0]))?"info":!1}})}}})}handlePointerMoveOverScrollbars(n,i){var r,s;if(i.scrollbars.isOverHorizontal){const o=n.clientX,a=o-i.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-a*(((r=_m.horizontal)==null?void 0:r.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.x=o,!0}if(i.scrollbars.isOverVertical){const o=n.clientY,a=o-i.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-a*(((s=_m.vertical)==null?void 0:s.deltaMultiplier)||1)/this.state.zoom.value}),i.lastCoords.y=o,!0}return!1}onPointerUpFromPointerDownHandler(n){return an(i=>{var y,w,v,I,x,_,T,A,C,k,P,D,j,G,B,H;this.removePointer(i),n.drag.blockDragging=!1,n.eventListeners.onMove&&n.eventListeners.onMove.flush();const{newElement:r,resizingElement:s,croppingElementId:o,multiElement:a,activeTool:l,isResizing:c,isRotating:u,isCropping:d}=this.state;this.setState($=>({isResizing:!1,isRotating:!1,isCropping:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",snapLines:am($.snapLines,[]),originSnapOffset:null})),this.lassoTrail.endPath(),this.lastPointerMoveCoords=null,Ws.setReferenceSnapPoints(null),Ws.setVisibleGaps(null),this.savePointer(i.clientX,i.clientY,"up");const f=n.hit.allHitElements,h=Nt({clientX:i.clientX,clientY:i.clientY},this.state);if(this.state.activeTool.type==="selection"&&!n.boxSelection.hasOccurred&&!n.resize.isResizing&&!f.some($=>this.state.selectedElementIds[$.id])){const $=this.getElementAtPosition(h.x,h.y,{includeLockedElements:!0});this.store.scheduleCapture(),$!=null&&$.locked?this.setState({activeLockedId:$.groupIds.length>0?$.groupIds.at(-1)||"":$.id}):this.setState({activeLockedId:null})}else this.setState({activeLockedId:null});this.setState({selectedElementsAreBeingDragged:!1});const m=this.scene.getNonDeletedElementsMap();if(n.drag.hasOccurred&&((w=(y=n.hit)==null?void 0:y.element)!=null&&w.id)){const $=m.get(n.hit.element.id);os($)&&((v=$.boundElements)==null||v.filter(X=>X.type==="arrow").map(X=>m.get(X.id)).filter(X=>pe(X)).forEach(X=>{X&&this.scene.mutateElement(X,{})}))}if((I=this.state.selectedLinearElement)!=null&&I.isEditing)if(!n.boxSelection.hasOccurred&&((_=(x=n.hit)==null?void 0:x.element)==null?void 0:_.id)!==this.state.selectedLinearElement.elementId)this.actionManager.executeAction(Vs);else{const $=Ue.handlePointerUp(i,this.state.selectedLinearElement,this.state,this.scene);$!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:$,suggestedBindings:[]})}else if(this.state.selectedLinearElement){if(this.state.selectedLinearElement.elbowed){const $=Ue.getElement(this.state.selectedLinearElement.elementId,this.scene.getNonDeletedElementsMap());$&&this.scene.mutateElement($,{})}((A=(T=n.hit)==null?void 0:T.element)==null?void 0:A.id)!==this.state.selectedLinearElement.elementId?this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null}):this.state.selectedLinearElement.isDragging&&this.actionManager.executeAction(Vs,"ui",{event:i,sceneCoords:h})}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener(te.POINTER_MOVE,n.eventListeners.onMove),window.removeEventListener(te.POINTER_UP,n.eventListeners.onUp),window.removeEventListener(te.KEYDOWN,n.eventListeners.onKeyDown),window.removeEventListener(te.KEYUP,n.eventListeners.onKeyUp),(k=(C=this.props)==null?void 0:C.onPointerUp)==null||k.call(C,l,n),this.onPointerUpEmitter.trigger(this.state.activeTool,n,i),(r==null?void 0:r.type)==="freedraw"){const $=Nt(i,this.state),X=r.points;let W=$.x-r.x,Q=$.y-r.y;W===X[0][0]&&Q===X[0][1]&&(Q+=1e-4,W+=1e-4);const oe=r.simulatePressure?[]:[...r.pressures,i.pressure];this.scene.mutateElement(r,{points:[...X,S(W,Q)],pressures:oe,lastCommittedPoint:S(W,Q)}),this.actionManager.executeAction(Vs);return}if(xe(r)){r.points.length>1&&this.store.scheduleCapture();const $=Nt(i,this.state),X=ct(S($.x,$.y),S(n.origin.x,n.origin.y))*this.state.zoom.value;if((!n.drag.hasOccurred||X<mA)&&r&&!a)if(this.editorInterface.isTouchScreen){const W=Math.min(this.state.width*.7/this.state.zoom.value,100);this.scene.mutateElement(r,{x:r.x-W/2,points:[S(0,0),S(W,0)]},{informMutation:!1,isDragging:!1}),this.actionManager.executeAction(Vs)}else{const W=$.x-r.x,Q=$.y-r.y;this.scene.mutateElement(r,{points:[...r.points,S(W,Q)]},{informMutation:!1,isDragging:!1}),this.setState({multiElement:r,newElement:r})}else n.drag.hasOccurred&&!a&&(Ju(this.state)&&Ha(r,!1)&&this.actionManager.executeAction(Vs,"ui",{event:i,sceneCoords:h}),this.setState({suggestedBindings:[],startBoundElement:null}),l.locked?this.setState(W=>({newElement:null})):(_o(this.interactiveCanvas),this.setState(W=>({newElement:null,activeTool:tn(this.state,{type:this.state.preferredSelectionTool.type}),selectedElementIds:xt({...W.selectedElementIds,[r.id]:!0},W),selectedLinearElement:new Ue(r,this.scene.getNonDeletedElementsMap())}))),this.scene.triggerUpdate());return}if(ge(r)){const $=r_(pt({fontSize:r.fontSize,fontFamily:r.fontFamily}),r.lineHeight);r.width<$&&this.scene.mutateElement(r,{autoResize:!0}),this.resetCursor(),this.handleTextWysiwyg(r,{isExistingElement:!0})}if(l.type!=="selection"&&r&&Qa(r)){this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter($=>$.id!==r.id),appState:{newElement:null},captureUpdate:K.NEVER});return}if(we(r)){const $=$le(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(w1(this.scene.getElementsMapIncludingDeleted(),$,r,this.state))}if(r&&(this.scene.mutateElement(r,Zz(r),{informMutation:!1,isDragging:!1}),this.scene.triggerUpdate()),n.drag.hasOccurred){const $=Nt(i,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){const X=this.scene.getElement(this.state.selectedLinearElement.elementId);if(X!=null&&X.frameId){const W=Ar(X,m);W&&X&&(zc(X,W,this.scene.getNonDeletedElementsMap())||(this.scene.mutateElement(X,{groupIds:[]}),dy([X],this.scene.getNonDeletedElementsMap()),this.scene.triggerUpdate()))}}else{const X=this.getTopLayerFrameAtSceneCoords($),W=this.scene.getSelectedElements(this.state);let Q=this.scene.getElementsMapIncludingDeleted();const oe=ne=>{if(ne.length>0){for(const ie of ne){const me=ie.groupIds.indexOf(this.state.editingGroupId);this.scene.mutateElement(ie,{groupIds:ie.groupIds.slice(0,me)},{informMutation:!1,isDragging:!1})}Q.forEach(ie=>{ie.groupIds.length&&At(Q,ie.groupIds[ie.groupIds.length-1]).length<2&&this.scene.mutateElement(ie,{groupIds:[]},{informMutation:!1,isDragging:!1})}),this.setState({editingGroupId:null})}};if(X&&!this.state.selectedElementIds[X.id]){const ne=W.filter(ie=>ie.frameId!==X.id&&E6(ie,Q,this.state));this.state.editingGroupId&&oe(ne),Q=w1(Q,ne,X,this.state)}else if(!X&&this.state.editingGroupId){const ne=W.filter(ie=>ie.frameId&&!E6(ie,Q,this.state));oe(ne)}Q=Gh(Q,this.state,this),this.scene.replaceAllElements(Q)}}if(s&&this.store.scheduleCapture(),s&&Qa(s)&&this.updateScene({elements:this.scene.getElementsIncludingDeleted().filter($=>$.id!==s.id),captureUpdate:K.NEVER}),n.resize.isResizing){let $=Gh(this.scene.getElementsIncludingDeleted(),this.state,this);const X=this.scene.getSelectedElements(this.state).filter(W=>we(W));for(const W of X)$=wg($,Go(this.scene.getElementsIncludingDeleted(),W,this.state,m),W,this);this.scene.replaceAllElements($)}const p=n.hit.element;((P=this.state.selectedLinearElement)==null?void 0:P.elementId)!==(p==null?void 0:p.id)&&xe(p)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new Ue(p,this.scene.getNonDeletedElementsMap())}),(!o||o&&(!p&&!d||p&&p.id!==o))&&this.finishImageCropping();const U=this.lastPointerDownEvent,b=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(Ao(this.state)&&U&&b){if(this.eraserTrail.endPath(),ct(S(U.clientX,U.clientY),S(b.clientX,b.clientY))===0){const X=Nt({clientX:b.clientX,clientY:b.clientY},this.state);this.getElementsAtPosition(X.x,X.y).forEach(Q=>this.elementsPendingErasure.add(Q.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(p&&!n.drag.hasOccurred&&!n.hit.wasAddedToSelection&&(!((D=this.state.selectedLinearElement)!=null&&D.isEditing)||!n.boxSelection.hasOccurred)&&this.state.activeTool.type!=="lasso"&&(i.shiftKey&&!((j=this.state.selectedLinearElement)!=null&&j.isEditing)?this.state.selectedElementIds[p.id]?m_(this.state,p)?this.setState($=>{const X={...$.selectedElementIds};for(const W of p.groupIds.flatMap(Q=>At(this.scene.getNonDeletedElements(),Q)))delete X[W.id];return{selectedGroupIds:{...$.selectedElementIds,...p.groupIds.map(W=>({[W]:!1})).reduce((W,Q)=>({...W,...Q}),{})},selectedElementIds:xt(X,$)}}):(G=this.state.selectedLinearElement)!=null&&G.isDragging||this.setState($=>{const X={...$.selectedElementIds};delete X[p.id];const W=Ge(this.scene.getNonDeletedElements(),{selectedElementIds:X});return{...Si({editingGroupId:$.editingGroupId,selectedElementIds:X},this.scene.getNonDeletedElements(),$,this),selectedLinearElement:W.length===1&&xe(W[0])?new Ue(W[0],this.scene.getNonDeletedElementsMap()):$.selectedLinearElement}}):p.frameId&&this.state.selectedElementIds[p.frameId]?this.setState($=>{var W;const X={...$.selectedElementIds,[p.id]:!0};return delete X[p.frameId],(((W=this.scene.getElement(p.frameId))==null?void 0:W.groupIds)??[]).flatMap(Q=>At(this.scene.getNonDeletedElements(),Q)).forEach(Q=>{delete X[Q.id]}),{...Si({editingGroupId:$.editingGroupId,selectedElementIds:X},this.scene.getNonDeletedElements(),$,this),showHyperlinkPopup:p.link||or(p)?"info":!1}}):this.setState($=>({selectedElementIds:xt({...$.selectedElementIds,[p.id]:!0},$)})):this.setState($=>{var X;return{...Si({editingGroupId:$.editingGroupId,selectedElementIds:{[p.id]:!0}},this.scene.getNonDeletedElements(),$,this),selectedLinearElement:xe(p)&&((X=$.selectedLinearElement)==null?void 0:X.elementId)!==p.id?new Ue(p,this.scene.getNonDeletedElementsMap()):$.selectedLinearElement}})),this.state.activeTool.type!=="lasso"&&!(p&&pe(p))&&!n.drag.hasOccurred&&!this.state.isResizing&&(p&&Bae({point:S(n.origin.x,n.origin.y),element:p,elementsMap:m,threshold:this.getElementHitThreshold(p),frameNameBound:we(p)?this.frameNameBoundsCache.get(p):null},m)||!p&&n.hit.hasHitCommonBoundingBoxOfSelectedElements)){(B=this.state.selectedLinearElement)!=null&&B.isEditing?this.actionManager.executeAction(s2):this.setState({selectedElementIds:xt({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),Dt(this.interactiveCanvas,Ct.AUTO);return}if(!l.locked&&l.type!=="freedraw"&&r&&this.setState($=>({selectedElementIds:xt({...$.selectedElementIds,[r.id]:!0},$),showHyperlinkPopup:or(r)&&!r.link?"editor":$.showHyperlinkPopup})),(l.type!=="selection"||Wn(this.scene.getNonDeletedElements(),this.state)||!Ki(this.state.previousSelectedElementIds,this.state.selectedElementIds))&&this.store.scheduleCapture(),n.drag.hasOccurred&&!this.state.selectedLinearElement||c||u||d){const $=this.scene.getSelectedElements(this.state).filter(xe);g6($,Ju(this.state),((H=this.state.selectedLinearElement)==null?void 0:H.selectedPointsIndices)??[],this.scene,this.state.zoom)}if(l.type==="laser"){this.laserTrails.endPath();return}!l.locked&&l.type!=="freedraw"&&(l.type!=="lasso"||l.type==="lasso"&&l.fromSelection)?(_o(this.interactiveCanvas),this.setState({newElement:null,suggestedBindings:[],activeTool:tn(this.state,{type:this.state.preferredSelectionTool.type})})):this.setState({newElement:null,suggestedBindings:[]}),p&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Ut.pointers.size<=1&&vs(p)&&this.isIframeLikeElementCenter(p,this.lastPointerUpEvent,n.origin.x,n.origin.y)&&this.handleEmbeddableCenterClick(p)})}clearSelection(n){this.setState(i=>({selectedElementIds:xt({},i),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:i.editingGroupId&&n!=null&&h0(n,i.editingGroupId)?i.editingGroupId:null})),this.setState({selectedElementIds:xt({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}getTextWysiwygSnappedToCenterPosition(n,i,r,s){if(s){let o=s.x+s.width/2,a=s.y+s.height/2;const l=z8(s,r,this.scene.getNonDeletedElementsMap());if(l&&(o=l.x,a=l.y),Math.hypot(n-o,i-a)<Ire){const{x:d,y:f}=Kr({sceneX:o,sceneY:a},r);return{viewportX:d,viewportY:f,elementCenterX:o,elementCenterY:a}}}}getCanvasOffsets(){var n;if((n=this.excalidrawContainerRef)!=null&&n.current){const i=this.excalidrawContainerRef.current,{left:r,top:s}=i.getBoundingClientRect();return{offsetLeft:r,offsetTop:s}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){const n=Uy.find(i=>i.code===this.props.langCode)||$d;await _V(n),this.setAppState({})}}const dwe=e=>{const[t,n]=L.useState(!0);return L.useEffect(()=>{const i=async()=>{await _V(r),n(!1)},r=Uy.find(s=>s.code===e.langCode)||$d;i()},[e.langCode]),t?g(bj,{theme:e.theme}):e.children},kY=({children:e})=>{const{FooterCenterTunnel:t}=er(),n=ai();return g(t.In,{children:g("div",{className:ce("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":n.zenModeEnabled}),children:e})})};kY.displayName="FooterCenter";const LY=({isCollaborating:e,onSelect:t,editorInterface:n,...i})=>{const r=ai(),s=(n==null?void 0:n.formFactor)!=="desktop"||r.width<Jre;return N(ml,{...i,className:ce("collab-button",{active:e}),type:"button",onSelect:t,style:{position:"relative",width:s?void 0:"auto"},title:R("labels.liveCollaboration"),children:[s?K_:R("labels.share"),r.collaborators.size>0&&g("div",{className:"CollabButton-collaborators",children:r.collaborators.size})]})};LY.displayName="LiveCollaborationTrigger";const fwe=()=>g("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:g("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),hwe=()=>N("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[g("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),g("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),DY=({style:e,size:t="small",withText:n})=>N("div",{className:`ExcalidrawLogo is-${t}`,style:e,children:[g(fwe,{}),n&&g(hwe,{})]}),cI=({icon:e,shortcut:t,children:n})=>{const i=Nn();return N(fe,{children:[g("div",{className:"welcome-screen-menu-item__icon",children:e}),g("div",{className:"welcome-screen-menu-item__text",children:n}),t&&i.formFactor!=="phone"&&g("div",{className:"welcome-screen-menu-item__shortcut",children:t})]})};cI.displayName="WelcomeScreenMenuItemContent";const Vp=({onSelect:e,children:t,icon:n,shortcut:i,className:r="",...s})=>g("button",{...s,type:"button",className:`welcome-screen-menu-item ${r}`,onClick:e,children:g(cI,{icon:n,shortcut:i,children:t})});Vp.displayName="WelcomeScreenMenuItem";const NY=({children:e,href:t,icon:n,shortcut:i,className:r="",...s})=>g("a",{...s,className:`welcome-screen-menu-item ${r}`,href:t,target:"_blank",rel:"noopener",children:g(cI,{icon:n,shortcut:i,children:e})});NY.displayName="WelcomeScreenMenuItemLink";const Uo=({children:e})=>{const{WelcomeScreenCenterTunnel:t}=er();return g(t.In,{children:g("div",{className:"welcome-screen-center",children:e||N(fe,{children:[g(uI,{}),g(dI,{children:R("welcomeScreen.defaults.center_heading")}),N(fI,{children:[g(gI,{}),g(hI,{})]})]})})})};Uo.displayName="Center";const uI=({children:e})=>g("div",{className:"welcome-screen-center__logo excalifont welcome-screen-decor",children:e||g(DY,{withText:!0})});uI.displayName="Logo";const dI=({children:e})=>g("div",{className:"welcome-screen-center__heading welcome-screen-decor excalifont",children:e});dI.displayName="Heading";const fI=({children:e})=>g("div",{className:"welcome-screen-menu",children:e});fI.displayName="Menu";const hI=()=>{const e=Nr();return g(Vp,{onSelect:()=>e.executeAction(zT),shortcut:"?",icon:j_,children:R("helpDialog.title")})};hI.displayName="MenuItemHelp";const gI=()=>{const e=ai(),t=Nr();return e.viewModeEnabled?null:g(Vp,{onSelect:()=>t.executeAction(Sv),shortcut:Zi("loadScene"),icon:W_,children:R("buttons.load")})};gI.displayName="MenuItemLoadScene";const OY=({onSelect:e})=>{const{t}=fn();return g(Vp,{shortcut:null,onSelect:e,icon:Z_,children:t("labels.liveCollaboration")})};OY.displayName="MenuItemLiveCollaborationTrigger";Uo.Logo=uI;Uo.Heading=dI;Uo.Menu=fI;Uo.MenuItem=Vp;Uo.MenuItemLink=NY;Uo.MenuItemHelp=hI;Uo.MenuItemLoadScene=gI;Uo.MenuItemLiveCollaborationTrigger=OY;const mI=({children:e})=>{const{WelcomeScreenMenuHintTunnel:t}=er();return g(t.In,{children:N("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[Ude,g("div",{className:"welcome-screen-decor-hint__label",children:e||R("welcomeScreen.defaults.menuHint")})]})})};mI.displayName="MenuHint";const pI=({children:e})=>{const{WelcomeScreenToolbarHintTunnel:t}=er();return g(t.In,{children:N("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[g("div",{className:"welcome-screen-decor-hint__label",children:e||R("welcomeScreen.defaults.toolbarHint")}),yde]})})};pI.displayName="ToolbarHint";const UI=({children:e})=>{const{WelcomeScreenHelpHintTunnel:t}=er();return g(t.In,{children:N("div",{className:"excalifont welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[g("div",{children:e||R("welcomeScreen.defaults.helpHint")}),bde]})})};UI.displayName="HelpHint";const sr=e=>g(fe,{children:e.children||N(fe,{children:[g(Uo,{}),g(mI,{}),g(pI,{}),g(UI,{})]})});sr.displayName="WelcomeScreen";sr.Center=Uo;sr.Hints={MenuHint:mI,ToolbarHint:pI,HelpHint:UI};const PY=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){if(e=Math.trunc(e)||0,e<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...e){this.innerHTML="",this.append(...e)})},gwe=(e,t,n)=>{var i,r,s;return!!(t&&(t.id===((i=e.editingTextElement)==null?void 0:i.id)||t.id===((r=e.resizingElement)==null?void 0:r.id)||t.id===((s=e.newElement)==null?void 0:s.id)||t.version>n.version||t.version===n.version&&t.versionNonce<n.versionNonce))},mwe=Fo((e,t,n)=>{if(window!=null&&window.DEBUG_FRACTIONAL_INDICES){const i=ou(e.map(r=>({...r})));A_(i,{shouldThrow:Y9(),includeBoundTextValidation:!0,reconciliationContext:{localElements:t,remoteElements:n}})}},1e3*60,{leading:!0,trailing:!1}),bI=(e,t,n)=>{const i=ve(e),r=[],s=new Set;for(const a of t)if(!s.has(a.id)){const l=i.get(a.id),c=gwe(n,l,a);l&&c?(r.push(l),s.add(l.id)):(r.push(a),s.add(a.id))}for(const a of e)s.has(a.id)||(r.push(a),s.add(a.id));const o=M_(r);return mwe(o,e,t),ou(o),o},FY=({children:e,icon:t})=>{const{t:n}=fn(),{TTDDialogTriggerTunnel:i}=er(),r=xn();return g(i.In,{children:N(ze.Item,{onSelect:()=>{Je("ai","dialog open","ttd"),r({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:t??Mfe,children:[e??n("labels.textToDiagram"),g(ze.Item.Badge,{children:"AI"})]})})};FY.displayName="TTDDialogTrigger";const pwe=e=>{const t=po();return L.useLayoutEffect(()=>{t.setPlugins({diagramToCode:{generate:e.generate}})},[t,e.generate]),null};PY();const Uwe=e=>{var Q,oe,ne,ie;const{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s=!1,onPointerUpdate:o,renderTopLeftUI:a,renderTopRightUI:l,langCode:c=$d.code,viewModeEnabled:u,zenModeEnabled:d,gridModeEnabled:f,libraryReturnUrl:h,theme:m,name:p,renderCustomStats:U,onPaste:b,detectScroll:y=!0,handleKeyboardGlobally:w=!1,onLibraryChange:v,autoFocus:I=!1,generateIdForFile:x,onLinkOpen:_,generateLinkForSelection:T,onPointerDown:A,onPointerUp:C,onScrollChange:k,onDuplicate:P,children:D,validateEmbeddable:j,renderEmbeddable:G,aiEnabled:B,showDeprecatedFonts:H,renderScrollbars:$}=e,X=(Q=e.UIOptions)==null?void 0:Q.canvasActions,W={...e.UIOptions,canvasActions:{...EA.canvasActions,...X},tools:{image:((ne=(oe=e.UIOptions)==null?void 0:oe.tools)==null?void 0:ne.image)??!0}};return X!=null&&X.export&&(W.canvasActions.export.saveFileToDisk=((ie=X.export)==null?void 0:ie.saveFileToDisk)??EA.canvasActions.export.saveFileToDisk),W.canvasActions.toggleTheme===null&&typeof m>"u"&&(W.canvasActions.toggleTheme=!0),L.useEffect(()=>{(async()=>{await Ee(()=>import("./roundRect-0PYZxl1G.js"),__vite__mapDeps([]),import.meta.url)})();const Re=Ve=>{typeof Ve.scale=="number"&&Ve.scale!==1&&Ve.preventDefault()};return document.addEventListener("touchmove",Re,{passive:!1}),()=>{document.removeEventListener("touchmove",Re)}},[]),g(ode,{store:Xr,children:g(dwe,{langCode:c,theme:m,children:g(lI,{onChange:t,onIncrement:n,initialData:i,excalidrawAPI:r,isCollaborating:s,onPointerUpdate:o,renderTopLeftUI:a,renderTopRightUI:l,langCode:c,viewModeEnabled:u,zenModeEnabled:d,gridModeEnabled:f,libraryReturnUrl:h,theme:m,name:p,renderCustomStats:U,UIOptions:W,onPaste:b,detectScroll:y,handleKeyboardGlobally:w,onLibraryChange:v,autoFocus:I,generateIdForFile:x,onLinkOpen:_,generateLinkForSelection:T,onPointerDown:A,onPointerUp:C,onScrollChange:k,onDuplicate:P,validateEmbeddable:j,renderEmbeddable:G,aiEnabled:B!==!1,showDeprecatedFonts:H,renderScrollbars:$,children:D})})})},bwe=(e,t)=>{if(e.children!==t.children)return!1;const{initialData:n,UIOptions:i={},...r}=e,{initialData:s,UIOptions:o={},...a}=t,l=Object.keys(i),c=Object.keys(o);return l.length!==c.length?!1:l.every(d=>d==="canvasActions"?Object.keys(i.canvasActions).every(h=>{var m,p,U,b;return h==="export"&&((m=i==null?void 0:i.canvasActions)!=null&&m.export)&&((p=o==null?void 0:o.canvasActions)!=null&&p.export)?i.canvasActions.export.saveFileToDisk===o.canvasActions.export.saveFileToDisk:((U=i==null?void 0:i.canvasActions)==null?void 0:U[h])===((b=o==null?void 0:o.canvasActions)==null?void 0:b[h])}):i[d]===o[d])&&Ki(r,a)},yI=ue.memo(Uwe,bwe);yI.displayName="Excalidraw";const ywe=({link:e,onCloseRequest:t,setErrorMessage:n})=>{const{t:i}=fn(),[,r]=L.useState(!1),s=L.useRef(0),o=L.useRef(null),a=async()=>{var u;try{await cu(e)}catch{n(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(u=o.current)==null||u.select()},{onCopy:l,copyStatus:c}=tI();return g(ls,{onCloseRequest:t,title:!1,size:"small",children:N("div",{className:"ShareableLinkDialog",children:[g("h3",{children:"Shareable link"}),N("div",{className:"ShareableLinkDialog__linkRow",children:[g(xd,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:e,selectOnRender:!0}),g(ks,{size:"large",label:i("buttons.copyLink"),icon:kp,status:c,onClick:()=>{l(),a()}})]}),N("div",{className:"ShareableLinkDialog__description",children:[" ",i("alerts.uploadedSecurly")]})]})})},Ewe=300,vwe=5e3,wwe=300,_we=500,tD=2e4,Twe=50,Iwe=33,Swe=24*60*60*1e3,EI=4*1024*1024,xwe=31536e3,ab={SERVER_VOLATILE:"server-volatile-broadcast",SERVER:"server-broadcast",USER_FOLLOW_CHANGE:"user-follow",USER_FOLLOW_ROOM_CHANGE:"user-follow-room-change"};var ar=(e=>(e.INVALID_RESPONSE="INVALID_RESPONSE",e.INIT="SCENE_INIT",e.UPDATE="SCENE_UPDATE",e.MOUSE_LOCATION="MOUSE_LOCATION",e.IDLE_STATUS="IDLE_STATUS",e.USER_VISIBLE_SCENE_BOUNDS="USER_VISIBLE_SCENE_BOUNDS",e))(ar||{});const BY={shareLinkFiles:"/files/shareLinks",collabFiles:"/files/rooms"},Cwe=10,Sn={LOCAL_STORAGE_ELEMENTS:"excalidraw",LOCAL_STORAGE_APP_STATE:"excalidraw-state",LOCAL_STORAGE_COLLAB:"excalidraw-collab",LOCAL_STORAGE_THEME:"excalidraw-theme",LOCAL_STORAGE_DEBUG:"excalidraw-debug",VERSION_DATA_STATE:"version-dataState",VERSION_FILES:"version-files",IDB_LIBRARY:"excalidraw-library",__LEGACY_LOCAL_STORAGE_LIBRARY:"excalidraw-library"},Awe={AUTH_STATE_COOKIE:"excplus-auth"},Cd=document.cookie.includes(Awe.AUTH_STATE_COOKIE),Mwe=e=>{try{localStorage.setItem(Sn.LOCAL_STORAGE_COLLAB,JSON.stringify({username:e}))}catch(t){console.error(t)}},zY=()=>{try{const e=localStorage.getItem(Sn.LOCAL_STORAGE_COLLAB);if(e)return JSON.parse(e).username}catch(e){console.error(e)}return null},HY=()=>{let e=null,t=null;try{e=localStorage.getItem(Sn.LOCAL_STORAGE_ELEMENTS),t=localStorage.getItem(Sn.LOCAL_STORAGE_APP_STATE)}catch(r){console.error(r)}let n=[];if(e)try{n=SH(JSON.parse(e))}catch(r){console.error(r)}let i=null;if(t)try{i={...ia(),...iG(JSON.parse(t))}}catch(r){console.error(r)}return{elements:n,appState:i}},VY=()=>{try{const e=localStorage.getItem(Sn.LOCAL_STORAGE_ELEMENTS);return(e==null?void 0:e.length)||0}catch(e){return console.error(e),0}},Rwe=()=>{try{const e=localStorage.getItem(Sn.LOCAL_STORAGE_APP_STATE),t=localStorage.getItem(Sn.LOCAL_STORAGE_COLLAB),n=(e==null?void 0:e.length)||0,i=(t==null?void 0:t.length)||0;return n+i+VY()}catch(e){return console.error(e),0}},kwe=500,nD=sl(e=>{e({scene:VY(),total:Rwe()})},kwe),Lwe=e=>{const[t,n]=L.useState({scene:0,total:0});L.useEffect(()=>{nD(o=>{n(o)})},[e.elements,e.appState]),L.useEffect(()=>()=>nD.cancel(),[]);const i=S4();let r,s;return i!==hB?(s=i.slice(0,16).replace("T"," "),r=i.slice(21)):s=R("stats.versionNotAvailable"),N(xa.StatsRows,{order:-1,children:[g(xa.StatsRow,{heading:!0,children:R("stats.version")}),N(xa.StatsRow,{style:{textAlign:"center",cursor:"pointer"},onClick:async()=>{try{await cu(S4()),e.setToast(R("toast.copyToClipboard"))}catch{}},title:R("stats.versionCopy"),children:[s,g("br",{}),r]}),g(xa.StatsRow,{heading:!0,children:R("stats.storage")}),N(xa.StatsRow,{columns:2,children:[g("div",{children:R("stats.scene")}),g("div",{children:AA(t.scene,1)})]}),N(xa.StatsRow,{columns:2,children:[g("div",{children:R("stats.total")}),g("div",{children:AA(t.total,1)})]})]})},Ks=Mp(),Dwe=(e,t)=>{const[n,i]=Xh(e);return L.useLayoutEffect(()=>{i(typeof t=="function"?t():t)},[]),[n,i]};class $Y{constructor({getFiles:t,saveFiles:n}){F(this,"fetchingFiles",new Map);F(this,"erroredFiles_fetch",new Map);F(this,"savingFiles",new Map);F(this,"savedFiles",new Map);F(this,"erroredFiles_save",new Map);F(this,"_getFiles");F(this,"_saveFiles");F(this,"isFileTracked",t=>this.savedFiles.has(t)||this.savingFiles.has(t)||this.fetchingFiles.has(t)||this.erroredFiles_fetch.has(t)||this.erroredFiles_save.has(t));F(this,"isFileSavedOrBeingSaved",t=>{const n=this.getFileVersion(t);return this.savedFiles.get(t.id)===n||this.savingFiles.get(t.id)===n});F(this,"getFileVersion",t=>t.version??1);F(this,"saveFiles",async({elements:t,files:n})=>{const i=new Map;for(const r of t){const s=Ln(r)&&n[r.fileId];s&&!this.isFileSavedOrBeingSaved(s)&&(i.set(r.fileId,n[r.fileId]),this.savingFiles.set(r.fileId,this.getFileVersion(s)))}try{const{savedFiles:r,erroredFiles:s}=await this._saveFiles({addedFiles:i});for(const[o,a]of r)this.savedFiles.set(o,this.getFileVersion(a));for(const[o,a]of s)this.erroredFiles_save.set(o,this.getFileVersion(a));return{savedFiles:r,erroredFiles:s}}finally{for(const[r]of i)this.savingFiles.delete(r)}});F(this,"getFiles",async t=>{if(!t.length)return{loadedFiles:[],erroredFiles:new Map};for(const n of t)this.fetchingFiles.set(n,!0);try{const{loadedFiles:n,erroredFiles:i}=await this._getFiles(t);for(const r of n)this.savedFiles.set(r.id,this.getFileVersion(r));for(const[r]of i)this.erroredFiles_fetch.set(r,!0);return{loadedFiles:n,erroredFiles:i}}finally{for(const n of t)this.fetchingFiles.delete(n)}});F(this,"shouldPreventUnload",t=>t.some(n=>Ln(n)&&!n.isDeleted&&this.savingFiles.has(n.fileId)));F(this,"shouldUpdateImageElementStatus",t=>Ln(t)&&this.savedFiles.has(t.fileId)&&t.status==="pending");this._getFiles=t,this._saveFiles=n}reset(){this.fetchingFiles.clear(),this.savingFiles.clear(),this.savedFiles.clear(),this.erroredFiles_fetch.clear(),this.erroredFiles_save.clear()}}const vI=async({files:e,maxBytes:t,encryptionKey:n})=>{const i=[];for(const[r,s]of e){const o=new TextEncoder().encode(s.dataURL),a=await eX(o,{encryptionKey:n,metadata:{id:r,mimeType:s.mimeType,created:Date.now(),lastRetrieved:Date.now()}});if(o.byteLength>t)throw new Error(R("errors.fileTooBig",{maxSize:`${Math.trunc(t/1024/1024)}MB`}));i.push({id:r,buffer:a})}return i},Wm=e=>{e.erroredFiles.size&&e.excalidrawAPI.updateScene({elements:e.excalidrawAPI.getSceneElementsIncludingDeleted().map(t=>Ln(t)&&e.erroredFiles.has(t.fileId)?Ie(t,{status:"error"}):t),captureUpdate:K.NEVER})};var iD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GY=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=r&63|128):(r&64512)===55296&&i+1<e.length&&(e.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(e.charCodeAt(++i)&1023),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=r&63|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=r&63|128)}return t},Nwe=function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=e[n++],o=e[n++],a=e[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(l>>10)),t[i++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},XY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const s=e[r],o=r+1<e.length,a=o?e[r+1]:0,l=r+2<e.length,c=l?e[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),i.push(n[u],n[d],n[f],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(GY(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Nwe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const s=n[e.charAt(r++)],a=r<e.length?n[e.charAt(r)]:0;++r;const c=r<e.length?n[e.charAt(r)]:64;++r;const d=r<e.length?n[e.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new Owe;const f=s<<2|a>>4;if(i.push(f),c!==64){const h=a<<4&240|c>>2;if(i.push(h),d!==64){const m=c<<6&192|d;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Owe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pwe=function(e){const t=GY(e);return XY.encodeByteArray(t,!0)},u5=function(e){return Pwe(e).replace(/\./g,"")},Fwe=function(e){try{return XY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bwe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zwe=()=>Bwe().__FIREBASE_DEFAULTS__,Hwe=()=>{if(typeof process>"u"||typeof iD>"u")return;const e=iD.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Vwe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Fwe(e[1]);return t&&JSON.parse(t)},wI=()=>{try{return zwe()||Hwe()||Vwe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},$we=e=>{var t,n;return(n=(t=wI())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},jY=e=>{const t=$we(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},YY=()=>{var e;return(e=wI())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gwe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u5(JSON.stringify(n)),u5(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xwe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jwe(){var e;const t=(e=wI())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ywe(){return!jwe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wwe(){try{return typeof indexedDB=="object"}catch{return!1}}function Kwe(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zwe="FirebaseError";class jd extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=Zwe,Object.setPrototypeOf(this,jd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,KY.prototype.create)}}class KY{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?qwe(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new jd(r,a,i)}}function qwe(e,t){return e.replace(Qwe,(n,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const Qwe=/\{\$([^}]+)}/g;function Kv(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const s=e[r],o=t[r];if(rD(s)&&rD(o)){if(!Kv(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function rD(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(e){return e&&e._delegate?e._delegate:e}class tg{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jwe{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new Gwe;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(t9e(t))try{this.getOrInitializeService({instanceIdentifier:Iu})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Iu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Iu){return this.instances.has(t)}getOptions(t=Iu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:e9e(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Iu){return this.component?this.component.multipleInstances?t:Iu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e9e(e){return e===Iu?void 0:e}function t9e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Jwe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ht||(ht={}));const i9e={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},r9e=ht.INFO,s9e={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},o9e=(e,t,...n)=>{if(t<e.logLevel)return;const i=new Date().toISOString(),r=s9e[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ZY{constructor(t){this.name=t,this._logLevel=r9e,this._logHandler=o9e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?i9e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const a9e=(e,t)=>t.some(n=>e instanceof n);let sD,oD;function l9e(){return sD||(sD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c9e(){return oD||(oD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qY=new WeakMap,Zv=new WeakMap,QY=new WeakMap,Q3=new WeakMap,_I=new WeakMap;function u9e(e){const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(xc(e.result)),r()},o=()=>{i(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&qY.set(n,e)}).catch(()=>{}),_I.set(t,e),t}function d9e(e){if(Zv.has(e))return;const t=new Promise((n,i)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Zv.set(e,t)}let qv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Zv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||QY.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function f9e(e){qv=e(qv)}function h9e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=e.call(J3(this),t,...n);return QY.set(i,t.sort?t.sort():[t]),xc(i)}:c9e().includes(e)?function(...t){return e.apply(J3(this),t),xc(qY.get(this))}:function(...t){return xc(e.apply(J3(this),t))}}function g9e(e){return typeof e=="function"?h9e(e):(e instanceof IDBTransaction&&d9e(e),a9e(e,l9e())?new Proxy(e,qv):e)}function xc(e){if(e instanceof IDBRequest)return u9e(e);if(Q3.has(e))return Q3.get(e);const t=g9e(e);return t!==e&&(Q3.set(e,t),_I.set(t,e)),t}const J3=e=>_I.get(e);function m9e(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=xc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(xc(o.result),l.oldVersion,l.newVersion,xc(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const p9e=["get","getKey","getAll","getAllKeys","count"],U9e=["put","add","delete","clear"],e7=new Map;function aD(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(e7.get(t))return e7.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=U9e.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||p9e.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return e7.set(t,s),s}f9e(e=>({...e,get:(t,n,i)=>aD(t,n)||e.get(t,n,i),has:(t,n)=>!!aD(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(y9e(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function y9e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qv="@firebase/app",lD="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new ZY("@firebase/app"),E9e="@firebase/app-compat",v9e="@firebase/analytics-compat",w9e="@firebase/analytics",_9e="@firebase/app-check-compat",T9e="@firebase/app-check",I9e="@firebase/auth",S9e="@firebase/auth-compat",x9e="@firebase/database",C9e="@firebase/data-connect",A9e="@firebase/database-compat",M9e="@firebase/functions",R9e="@firebase/functions-compat",k9e="@firebase/installations",L9e="@firebase/installations-compat",D9e="@firebase/messaging",N9e="@firebase/messaging-compat",O9e="@firebase/performance",P9e="@firebase/performance-compat",F9e="@firebase/remote-config",B9e="@firebase/remote-config-compat",z9e="@firebase/storage",H9e="@firebase/storage-compat",V9e="@firebase/firestore",$9e="@firebase/vertexai",G9e="@firebase/firestore-compat",X9e="firebase",j9e="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="[DEFAULT]",Y9e={[Qv]:"fire-core",[E9e]:"fire-core-compat",[w9e]:"fire-analytics",[v9e]:"fire-analytics-compat",[T9e]:"fire-app-check",[_9e]:"fire-app-check-compat",[I9e]:"fire-auth",[S9e]:"fire-auth-compat",[x9e]:"fire-rtdb",[C9e]:"fire-data-connect",[A9e]:"fire-rtdb-compat",[M9e]:"fire-fn",[R9e]:"fire-fn-compat",[k9e]:"fire-iid",[L9e]:"fire-iid-compat",[D9e]:"fire-fcm",[N9e]:"fire-fcm-compat",[O9e]:"fire-perf",[P9e]:"fire-perf-compat",[F9e]:"fire-rc",[B9e]:"fire-rc-compat",[z9e]:"fire-gcs",[H9e]:"fire-gcs-compat",[V9e]:"fire-fst",[G9e]:"fire-fst-compat",[$9e]:"fire-vertex","fire-js":"fire-js",[X9e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5=new Map,W9e=new Map,ew=new Map;function cD(e,t){try{e.container.addComponent(t)}catch(n){Ul.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function V0(e){const t=e.name;if(ew.has(t))return Ul.debug(`There were multiple attempts to register component ${t}.`),!1;ew.set(t,e);for(const n of d5.values())cD(n,e);for(const n of W9e.values())cD(n,e);return!0}function JY(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function eW(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cc=new KY("app","Firebase",K9e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9e{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new tg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tW=j9e;function nW(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const i=Object.assign({name:Jv,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw Cc.create("bad-app-name",{appName:String(r)});if(n||(n=YY()),!n)throw Cc.create("no-options");const s=d5.get(r);if(s){if(Kv(n,s.options)&&Kv(i,s.config))return s;throw Cc.create("duplicate-app",{appName:r})}const o=new n9e(r);for(const l of ew.values())o.addComponent(l);const a=new Z9e(n,i,o);return d5.set(r,a),a}function iW(e=Jv){const t=d5.get(e);if(!t&&e===Jv&&YY())return nW();if(!t)throw Cc.create("no-app",{appName:e});return t}function Ac(e,t,n){var i;let r=(i=Y9e[e])!==null&&i!==void 0?i:e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ul.warn(a.join(" "));return}V0(new tg(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9e="firebase-heartbeat-database",Q9e=1,$0="firebase-heartbeat-store";let t7=null;function rW(){return t7||(t7=m9e(q9e,Q9e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($0)}catch(n){console.warn(n)}}}}).catch(e=>{throw Cc.create("idb-open",{originalErrorMessage:e.message})})),t7}async function J9e(e){try{const n=(await rW()).transaction($0),i=await n.objectStore($0).get(sW(e));return await n.done,i}catch(t){if(t instanceof jd)Ul.warn(t.message);else{const n=Cc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ul.warn(n.message)}}}async function uD(e,t){try{const i=(await rW()).transaction($0,"readwrite");await i.objectStore($0).put(t,sW(e)),await i.done}catch(n){if(n instanceof jd)Ul.warn(n.message);else{const i=Cc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ul.warn(i.message)}}}function sW(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_e=1024,t_e=30;class n_e{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r_e(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dD();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>t_e){const o=s_e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ul.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=dD(),{heartbeatsToSend:i,unsentEntries:r}=i_e(this._heartbeatsCache.heartbeats),s=u5(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ul.warn(n),""}}}function dD(){return new Date().toISOString().substring(0,10)}function i_e(e,t=e_e){const n=[];let i=e.slice();for(const r of e){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),fD(n)>t){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),fD(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class r_e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wwe()?Kwe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J9e(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return uD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return uD(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function fD(e){return u5(JSON.stringify({version:2,heartbeats:e})).length}function s_e(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_e(e){V0(new tg("platform-logger",t=>new b9e(t),"PRIVATE")),V0(new tg("heartbeat",t=>new n_e(t),"PRIVATE")),Ac(Qv,lD,e),Ac(Qv,lD,"esm2017"),Ac("fire-js","")}o_e("");var a_e="firebase",l_e="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ac(a_e,l_e,"app");var hD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mc,oW;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(_,T){function A(){}A.prototype=T.prototype,_.D=T.prototype,_.prototype=new A,_.prototype.constructor=_,_.C=function(C,k,P){for(var D=Array(arguments.length-2),j=2;j<arguments.length;j++)D[j-2]=arguments[j];return T.prototype[k].apply(C,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(_,T,A){A||(A=0);var C=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)C[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;16>k;++k)C[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=_.g[0],A=_.g[1],k=_.g[2];var P=_.g[3],D=T+(P^A&(k^P))+C[0]+3614090360&4294967295;T=A+(D<<7&4294967295|D>>>25),D=P+(k^T&(A^k))+C[1]+3905402710&4294967295,P=T+(D<<12&4294967295|D>>>20),D=k+(A^P&(T^A))+C[2]+606105819&4294967295,k=P+(D<<17&4294967295|D>>>15),D=A+(T^k&(P^T))+C[3]+3250441966&4294967295,A=k+(D<<22&4294967295|D>>>10),D=T+(P^A&(k^P))+C[4]+4118548399&4294967295,T=A+(D<<7&4294967295|D>>>25),D=P+(k^T&(A^k))+C[5]+1200080426&4294967295,P=T+(D<<12&4294967295|D>>>20),D=k+(A^P&(T^A))+C[6]+2821735955&4294967295,k=P+(D<<17&4294967295|D>>>15),D=A+(T^k&(P^T))+C[7]+4249261313&4294967295,A=k+(D<<22&4294967295|D>>>10),D=T+(P^A&(k^P))+C[8]+1770035416&4294967295,T=A+(D<<7&4294967295|D>>>25),D=P+(k^T&(A^k))+C[9]+2336552879&4294967295,P=T+(D<<12&4294967295|D>>>20),D=k+(A^P&(T^A))+C[10]+4294925233&4294967295,k=P+(D<<17&4294967295|D>>>15),D=A+(T^k&(P^T))+C[11]+2304563134&4294967295,A=k+(D<<22&4294967295|D>>>10),D=T+(P^A&(k^P))+C[12]+1804603682&4294967295,T=A+(D<<7&4294967295|D>>>25),D=P+(k^T&(A^k))+C[13]+4254626195&4294967295,P=T+(D<<12&4294967295|D>>>20),D=k+(A^P&(T^A))+C[14]+2792965006&4294967295,k=P+(D<<17&4294967295|D>>>15),D=A+(T^k&(P^T))+C[15]+1236535329&4294967295,A=k+(D<<22&4294967295|D>>>10),D=T+(k^P&(A^k))+C[1]+4129170786&4294967295,T=A+(D<<5&4294967295|D>>>27),D=P+(A^k&(T^A))+C[6]+3225465664&4294967295,P=T+(D<<9&4294967295|D>>>23),D=k+(T^A&(P^T))+C[11]+643717713&4294967295,k=P+(D<<14&4294967295|D>>>18),D=A+(P^T&(k^P))+C[0]+3921069994&4294967295,A=k+(D<<20&4294967295|D>>>12),D=T+(k^P&(A^k))+C[5]+3593408605&4294967295,T=A+(D<<5&4294967295|D>>>27),D=P+(A^k&(T^A))+C[10]+38016083&4294967295,P=T+(D<<9&4294967295|D>>>23),D=k+(T^A&(P^T))+C[15]+3634488961&4294967295,k=P+(D<<14&4294967295|D>>>18),D=A+(P^T&(k^P))+C[4]+3889429448&4294967295,A=k+(D<<20&4294967295|D>>>12),D=T+(k^P&(A^k))+C[9]+568446438&4294967295,T=A+(D<<5&4294967295|D>>>27),D=P+(A^k&(T^A))+C[14]+3275163606&4294967295,P=T+(D<<9&4294967295|D>>>23),D=k+(T^A&(P^T))+C[3]+4107603335&4294967295,k=P+(D<<14&4294967295|D>>>18),D=A+(P^T&(k^P))+C[8]+1163531501&4294967295,A=k+(D<<20&4294967295|D>>>12),D=T+(k^P&(A^k))+C[13]+2850285829&4294967295,T=A+(D<<5&4294967295|D>>>27),D=P+(A^k&(T^A))+C[2]+4243563512&4294967295,P=T+(D<<9&4294967295|D>>>23),D=k+(T^A&(P^T))+C[7]+1735328473&4294967295,k=P+(D<<14&4294967295|D>>>18),D=A+(P^T&(k^P))+C[12]+2368359562&4294967295,A=k+(D<<20&4294967295|D>>>12),D=T+(A^k^P)+C[5]+4294588738&4294967295,T=A+(D<<4&4294967295|D>>>28),D=P+(T^A^k)+C[8]+2272392833&4294967295,P=T+(D<<11&4294967295|D>>>21),D=k+(P^T^A)+C[11]+1839030562&4294967295,k=P+(D<<16&4294967295|D>>>16),D=A+(k^P^T)+C[14]+4259657740&4294967295,A=k+(D<<23&4294967295|D>>>9),D=T+(A^k^P)+C[1]+2763975236&4294967295,T=A+(D<<4&4294967295|D>>>28),D=P+(T^A^k)+C[4]+1272893353&4294967295,P=T+(D<<11&4294967295|D>>>21),D=k+(P^T^A)+C[7]+4139469664&4294967295,k=P+(D<<16&4294967295|D>>>16),D=A+(k^P^T)+C[10]+3200236656&4294967295,A=k+(D<<23&4294967295|D>>>9),D=T+(A^k^P)+C[13]+681279174&4294967295,T=A+(D<<4&4294967295|D>>>28),D=P+(T^A^k)+C[0]+3936430074&4294967295,P=T+(D<<11&4294967295|D>>>21),D=k+(P^T^A)+C[3]+3572445317&4294967295,k=P+(D<<16&4294967295|D>>>16),D=A+(k^P^T)+C[6]+76029189&4294967295,A=k+(D<<23&4294967295|D>>>9),D=T+(A^k^P)+C[9]+3654602809&4294967295,T=A+(D<<4&4294967295|D>>>28),D=P+(T^A^k)+C[12]+3873151461&4294967295,P=T+(D<<11&4294967295|D>>>21),D=k+(P^T^A)+C[15]+530742520&4294967295,k=P+(D<<16&4294967295|D>>>16),D=A+(k^P^T)+C[2]+3299628645&4294967295,A=k+(D<<23&4294967295|D>>>9),D=T+(k^(A|~P))+C[0]+4096336452&4294967295,T=A+(D<<6&4294967295|D>>>26),D=P+(A^(T|~k))+C[7]+1126891415&4294967295,P=T+(D<<10&4294967295|D>>>22),D=k+(T^(P|~A))+C[14]+2878612391&4294967295,k=P+(D<<15&4294967295|D>>>17),D=A+(P^(k|~T))+C[5]+4237533241&4294967295,A=k+(D<<21&4294967295|D>>>11),D=T+(k^(A|~P))+C[12]+1700485571&4294967295,T=A+(D<<6&4294967295|D>>>26),D=P+(A^(T|~k))+C[3]+2399980690&4294967295,P=T+(D<<10&4294967295|D>>>22),D=k+(T^(P|~A))+C[10]+4293915773&4294967295,k=P+(D<<15&4294967295|D>>>17),D=A+(P^(k|~T))+C[1]+2240044497&4294967295,A=k+(D<<21&4294967295|D>>>11),D=T+(k^(A|~P))+C[8]+1873313359&4294967295,T=A+(D<<6&4294967295|D>>>26),D=P+(A^(T|~k))+C[15]+4264355552&4294967295,P=T+(D<<10&4294967295|D>>>22),D=k+(T^(P|~A))+C[6]+2734768916&4294967295,k=P+(D<<15&4294967295|D>>>17),D=A+(P^(k|~T))+C[13]+1309151649&4294967295,A=k+(D<<21&4294967295|D>>>11),D=T+(k^(A|~P))+C[4]+4149444226&4294967295,T=A+(D<<6&4294967295|D>>>26),D=P+(A^(T|~k))+C[11]+3174756917&4294967295,P=T+(D<<10&4294967295|D>>>22),D=k+(T^(P|~A))+C[2]+718787259&4294967295,k=P+(D<<15&4294967295|D>>>17),D=A+(P^(k|~T))+C[9]+3951481745&4294967295,_.g[0]=_.g[0]+T&4294967295,_.g[1]=_.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,_.g[2]=_.g[2]+k&4294967295,_.g[3]=_.g[3]+P&4294967295}i.prototype.u=function(_,T){T===void 0&&(T=_.length);for(var A=T-this.blockSize,C=this.B,k=this.h,P=0;P<T;){if(k==0)for(;P<=A;)r(this,_,P),P+=this.blockSize;if(typeof _=="string"){for(;P<T;)if(C[k++]=_.charCodeAt(P++),k==this.blockSize){r(this,C),k=0;break}}else for(;P<T;)if(C[k++]=_[P++],k==this.blockSize){r(this,C),k=0;break}}this.h=k,this.o+=T},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var T=1;T<_.length-8;++T)_[T]=0;var A=8*this.o;for(T=_.length-8;T<_.length;++T)_[T]=A&255,A/=256;for(this.u(_),_=Array(16),T=A=0;4>T;++T)for(var C=0;32>C;C+=8)_[A++]=this.g[T]>>>C&255;return _};function s(_,T){var A=a;return Object.prototype.hasOwnProperty.call(A,_)?A[_]:A[_]=T(_)}function o(_,T){this.h=T;for(var A=[],C=!0,k=_.length-1;0<=k;k--){var P=_[k]|0;C&&P==T||(A[k]=P,C=!1)}this.g=A}var a={};function l(_){return-128<=_&&128>_?s(_,function(T){return new o([T|0],0>T?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return d;if(0>_)return U(c(-_));for(var T=[],A=1,C=0;_>=A;C++)T[C]=_/A|0,A*=4294967296;return new o(T,0)}function u(_,T){if(_.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_.charAt(0)=="-")return U(u(_.substring(1),T));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(T,8)),C=d,k=0;k<_.length;k+=8){var P=Math.min(8,_.length-k),D=parseInt(_.substring(k,k+P),T);8>P?(P=c(Math.pow(T,P)),C=C.j(P).add(c(D))):(C=C.j(A),C=C.add(c(D)))}return C}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(p(this))return-U(this).m();for(var _=0,T=1,A=0;A<this.g.length;A++){var C=this.i(A);_+=(0<=C?C:4294967296+C)*T,T*=4294967296}return _},e.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(m(this))return"0";if(p(this))return"-"+U(this).toString(_);for(var T=c(Math.pow(_,6)),A=this,C="";;){var k=v(A,T).g;A=b(A,k.j(T));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(_);if(A=k,m(A))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},e.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function m(_){if(_.h!=0)return!1;for(var T=0;T<_.g.length;T++)if(_.g[T]!=0)return!1;return!0}function p(_){return _.h==-1}e.l=function(_){return _=b(this,_),p(_)?-1:m(_)?0:1};function U(_){for(var T=_.g.length,A=[],C=0;C<T;C++)A[C]=~_.g[C];return new o(A,~_.h).add(f)}e.abs=function(){return p(this)?U(this):this},e.add=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0,k=0;k<=T;k++){var P=C+(this.i(k)&65535)+(_.i(k)&65535),D=(P>>>16)+(this.i(k)>>>16)+(_.i(k)>>>16);C=D>>>16,P&=65535,D&=65535,A[k]=D<<16|P}return new o(A,A[A.length-1]&-2147483648?-1:0)};function b(_,T){return _.add(U(T))}e.j=function(_){if(m(this)||m(_))return d;if(p(this))return p(_)?U(this).j(U(_)):U(U(this).j(_));if(p(_))return U(this.j(U(_)));if(0>this.l(h)&&0>_.l(h))return c(this.m()*_.m());for(var T=this.g.length+_.g.length,A=[],C=0;C<2*T;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<_.g.length;k++){var P=this.i(C)>>>16,D=this.i(C)&65535,j=_.i(k)>>>16,G=_.i(k)&65535;A[2*C+2*k]+=D*G,y(A,2*C+2*k),A[2*C+2*k+1]+=P*G,y(A,2*C+2*k+1),A[2*C+2*k+1]+=D*j,y(A,2*C+2*k+1),A[2*C+2*k+2]+=P*j,y(A,2*C+2*k+2)}for(C=0;C<T;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=T;C<2*T;C++)A[C]=0;return new o(A,0)};function y(_,T){for(;(_[T]&65535)!=_[T];)_[T+1]+=_[T]>>>16,_[T]&=65535,T++}function w(_,T){this.g=_,this.h=T}function v(_,T){if(m(T))throw Error("division by zero");if(m(_))return new w(d,d);if(p(_))return T=v(U(_),T),new w(U(T.g),U(T.h));if(p(T))return T=v(_,U(T)),new w(U(T.g),T.h);if(30<_.g.length){if(p(_)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var A=f,C=T;0>=C.l(_);)A=I(A),C=I(C);var k=x(A,1),P=x(C,1);for(C=x(C,2),A=x(A,2);!m(C);){var D=P.add(C);0>=D.l(_)&&(k=k.add(A),P=D),C=x(C,1),A=x(A,1)}return T=b(_,k.j(T)),new w(k,T)}for(k=d;0<=_.l(T);){for(A=Math.max(1,Math.floor(_.m()/T.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=c(A),D=P.j(T);p(D)||0<D.l(_);)A-=C,P=c(A),D=P.j(T);m(P)&&(P=f),k=k.add(P),_=b(_,D)}return new w(k,_)}e.A=function(_){return v(this,_).h},e.and=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)&_.i(C);return new o(A,this.h&_.h)},e.or=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)|_.i(C);return new o(A,this.h|_.h)},e.xor=function(_){for(var T=Math.max(this.g.length,_.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)^_.i(C);return new o(A,this.h^_.h)};function I(_){for(var T=_.g.length+1,A=[],C=0;C<T;C++)A[C]=_.i(C)<<1|_.i(C-1)>>>31;return new o(A,_.h)}function x(_,T){var A=T>>5;T%=32;for(var C=_.g.length-A,k=[],P=0;P<C;P++)k[P]=0<T?_.i(P+A)>>>T|_.i(P+A+1)<<32-T:_.i(P+A);return new o(k,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oW=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Mc=o}).apply(typeof hD<"u"?hD:typeof self<"u"?self:typeof window<"u"?window:{});var c2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aW,Km,lW,lb,tw,cW,uW,dW;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,M,O){return E==Array.prototype||E==Object.prototype||(E[M]=O.value),E};function n(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof c2=="object"&&c2];for(var M=0;M<E.length;++M){var O=E[M];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var i=n(this);function r(E,M){if(M)e:{var O=i;E=E.split(".");for(var z=0;z<E.length-1;z++){var Z=E[z];if(!(Z in O))break e;O=O[Z]}E=E[E.length-1],z=O[E],M=M(z),M!=z&&M!=null&&t(O,E,{configurable:!0,writable:!0,value:M})}}function s(E,M){E instanceof String&&(E+="");var O=0,z=!1,Z={next:function(){if(!z&&O<E.length){var ee=O++;return{value:M(ee,E[ee]),done:!1}}return z=!0,{done:!0,value:void 0}}};return Z[Symbol.iterator]=function(){return Z},Z}r("Array.prototype.values",function(E){return E||function(){return s(this,function(M,O){return O})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(E){var M=typeof E;return M=M!="object"?M:E?Array.isArray(E)?"array":M:"null",M=="array"||M=="object"&&typeof E.length=="number"}function c(E){var M=typeof E;return M=="object"&&E!=null||M=="function"}function u(E,M,O){return E.call.apply(E.bind,arguments)}function d(E,M,O){if(!E)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var Z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Z,z),E.apply(M,Z)}}return function(){return E.apply(M,arguments)}}function f(E,M,O){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,f.apply(null,arguments)}function h(E,M){var O=Array.prototype.slice.call(arguments,1);return function(){var z=O.slice();return z.push.apply(z,arguments),E.apply(this,z)}}function m(E,M){function O(){}O.prototype=M.prototype,E.aa=M.prototype,E.prototype=new O,E.prototype.constructor=E,E.Qb=function(z,Z,ee){for(var be=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)be[Gt-2]=arguments[Gt];return M.prototype[Z].apply(z,be)}}function p(E){const M=E.length;if(0<M){const O=Array(M);for(let z=0;z<M;z++)O[z]=E[z];return O}return[]}function U(E,M){for(let O=1;O<arguments.length;O++){const z=arguments[O];if(l(z)){const Z=E.length||0,ee=z.length||0;E.length=Z+ee;for(let be=0;be<ee;be++)E[Z+be]=z[be]}else E.push(z)}}class b{constructor(M,O){this.i=M,this.j=O,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function y(E){return/^[\s\xa0]*$/.test(E)}function w(){var E=a.navigator;return E&&(E=E.userAgent)?E:""}function v(E){return v[" "](E),E}v[" "]=function(){};var I=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function x(E,M,O){for(const z in E)M.call(O,E[z],z,E)}function _(E,M){for(const O in E)M.call(void 0,E[O],O,E)}function T(E){const M={};for(const O in E)M[O]=E[O];return M}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(E,M){let O,z;for(let Z=1;Z<arguments.length;Z++){z=arguments[Z];for(O in z)E[O]=z[O];for(let ee=0;ee<A.length;ee++)O=A[ee],Object.prototype.hasOwnProperty.call(z,O)&&(E[O]=z[O])}}function k(E){var M=1;E=E.split(":");const O=[];for(;0<M&&E.length;)O.push(E.shift()),M--;return E.length&&O.push(E.join(":")),O}function P(E){a.setTimeout(()=>{throw E},0)}function D(){var E=X;let M=null;return E.g&&(M=E.g,E.g=E.g.next,E.g||(E.h=null),M.next=null),M}class j{constructor(){this.h=this.g=null}add(M,O){const z=G.get();z.set(M,O),this.h?this.h.next=z:this.g=z,this.h=z}}var G=new b(()=>new B,E=>E.reset());class B{constructor(){this.next=this.g=this.h=null}set(M,O){this.h=M,this.g=O,this.next=null}reset(){this.next=this.g=this.h=null}}let H,$=!1,X=new j,W=()=>{const E=a.Promise.resolve(void 0);H=()=>{E.then(Q)}};var Q=()=>{for(var E;E=D();){try{E.h.call(E.g)}catch(O){P(O)}var M=G;M.j(E),100>M.h&&(M.h++,E.next=M.g,M.g=E)}$=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(E,M){this.type=E,this.g=this.target=M,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var E=!1,M=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const O=()=>{};a.addEventListener("test",O,M),a.removeEventListener("test",O,M)}catch{}return E}();function me(E,M){if(ne.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E){var O=this.type=E.type,z=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;if(this.target=E.target||E.srcElement,this.g=M,M=E.relatedTarget){if(I){e:{try{v(M.nodeName);var Z=!0;break e}catch{}Z=!1}Z||(M=null)}}else O=="mouseover"?M=E.fromElement:O=="mouseout"&&(M=E.toElement);this.relatedTarget=M,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=typeof E.pointerType=="string"?E.pointerType:Re[E.pointerType]||"",this.state=E.state,this.i=E,E.defaultPrevented&&me.aa.h.call(this)}}m(me,ne);var Re={2:"touch",3:"pen",4:"mouse"};me.prototype.h=function(){me.aa.h.call(this);var E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var Ve="closure_listenable_"+(1e6*Math.random()|0),wt=0;function Ot(E,M,O,z,Z){this.listener=E,this.proxy=null,this.src=M,this.type=O,this.capture=!!z,this.ha=Z,this.key=++wt,this.da=this.fa=!1}function Ye(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function ut(E){this.src=E,this.g={},this.h=0}ut.prototype.add=function(E,M,O,z,Z){var ee=E.toString();E=this.g[ee],E||(E=this.g[ee]=[],this.h++);var be=li(E,M,z,Z);return-1<be?(M=E[be],O||(M.fa=!1)):(M=new Ot(M,this.src,ee,!!z,Z),M.fa=O,E.push(M)),M};function $t(E,M){var O=M.type;if(O in E.g){var z=E.g[O],Z=Array.prototype.indexOf.call(z,M,void 0),ee;(ee=0<=Z)&&Array.prototype.splice.call(z,Z,1),ee&&(Ye(M),E.g[O].length==0&&(delete E.g[O],E.h--))}}function li(E,M,O,z){for(var Z=0;Z<E.length;++Z){var ee=E[Z];if(!ee.da&&ee.listener==M&&ee.capture==!!O&&ee.ha==z)return Z}return-1}var xl="closure_lm_"+(1e6*Math.random()|0),Pg={};function Wp(E,M,O,z,Z){if(Array.isArray(M)){for(var ee=0;ee<M.length;ee++)Wp(E,M[ee],O,z,Z);return null}return O=dS(O),E&&E[Ve]?E.K(M,O,c(z)?!!z.capture:!1,Z):EE(E,M,O,!1,z,Z)}function EE(E,M,O,z,Z,ee){if(!M)throw Error("Invalid event type");var be=c(Z)?!!Z.capture:!!Z,Gt=_E(E);if(Gt||(E[xl]=Gt=new ut(E)),O=Gt.add(M,O,z,be,ee),O.proxy)return O;if(z=vE(),O.proxy=z,z.src=E,z.listener=O,E.addEventListener)ie||(Z=be),Z===void 0&&(Z=!1),E.addEventListener(M.toString(),z,Z);else if(E.attachEvent)E.attachEvent(uS(M.toString()),z);else if(E.addListener&&E.removeListener)E.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return O}function vE(){function E(O){return M.call(E.src,E.listener,O)}const M=iZ;return E}function uu(E,M,O,z,Z){if(Array.isArray(M))for(var ee=0;ee<M.length;ee++)uu(E,M[ee],O,z,Z);else z=c(z)?!!z.capture:!!z,O=dS(O),E&&E[Ve]?(E=E.i,M=String(M).toString(),M in E.g&&(ee=E.g[M],O=li(ee,O,z,Z),-1<O&&(Ye(ee[O]),Array.prototype.splice.call(ee,O,1),ee.length==0&&(delete E.g[M],E.h--)))):E&&(E=_E(E))&&(M=E.g[M.toString()],E=-1,M&&(E=li(M,O,z,Z)),(O=-1<E?M[E]:null)&&wE(O))}function wE(E){if(typeof E!="number"&&E&&!E.da){var M=E.src;if(M&&M[Ve])$t(M.i,E);else{var O=E.type,z=E.proxy;M.removeEventListener?M.removeEventListener(O,z,E.capture):M.detachEvent?M.detachEvent(uS(O),z):M.addListener&&M.removeListener&&M.removeListener(z),(O=_E(M))?($t(O,E),O.h==0&&(O.src=null,M[xl]=null)):Ye(E)}}}function uS(E){return E in Pg?Pg[E]:Pg[E]="on"+E}function iZ(E,M){if(E.da)E=!0;else{M=new me(M,this);var O=E.listener,z=E.ha||E.src;E.fa&&wE(E),E=O.call(z,M)}return E}function _E(E){return E=E[xl],E instanceof ut?E:null}var TE="__closure_events_fn_"+(1e9*Math.random()>>>0);function dS(E){return typeof E=="function"?E:(E[TE]||(E[TE]=function(M){return E.handleEvent(M)}),E[TE])}function Oi(){oe.call(this),this.i=new ut(this),this.M=this,this.F=null}m(Oi,oe),Oi.prototype[Ve]=!0,Oi.prototype.removeEventListener=function(E,M,O,z){uu(this,E,M,O,z)};function tr(E,M){var O,z=E.F;if(z)for(O=[];z;z=z.F)O.push(z);if(E=E.M,z=M.type||M,typeof M=="string")M=new ne(M,E);else if(M instanceof ne)M.target=M.target||E;else{var Z=M;M=new ne(z,E),C(M,Z)}if(Z=!0,O)for(var ee=O.length-1;0<=ee;ee--){var be=M.g=O[ee];Z=Kp(be,z,!0,M)&&Z}if(be=M.g=E,Z=Kp(be,z,!0,M)&&Z,Z=Kp(be,z,!1,M)&&Z,O)for(ee=0;ee<O.length;ee++)be=M.g=O[ee],Z=Kp(be,z,!1,M)&&Z}Oi.prototype.N=function(){if(Oi.aa.N.call(this),this.i){var E=this.i,M;for(M in E.g){for(var O=E.g[M],z=0;z<O.length;z++)Ye(O[z]);delete E.g[M],E.h--}}this.F=null},Oi.prototype.K=function(E,M,O,z){return this.i.add(String(E),M,!1,O,z)},Oi.prototype.L=function(E,M,O,z){return this.i.add(String(E),M,!0,O,z)};function Kp(E,M,O,z){if(M=E.i.g[String(M)],!M)return!0;M=M.concat();for(var Z=!0,ee=0;ee<M.length;++ee){var be=M[ee];if(be&&!be.da&&be.capture==O){var Gt=be.listener,Ti=be.ha||be.src;be.fa&&$t(E.i,be),Z=Gt.call(Ti,z)!==!1&&Z}}return Z&&!z.defaultPrevented}function fS(E,M,O){if(typeof E=="function")O&&(E=f(E,O));else if(E&&typeof E.handleEvent=="function")E=f(E.handleEvent,E);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(E,M||0)}function hS(E){E.g=fS(()=>{E.g=null,E.i&&(E.i=!1,hS(E))},E.l);const M=E.h;E.h=null,E.m.apply(null,M)}class rZ extends oe{constructor(M,O){super(),this.m=M,this.l=O,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:hS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fg(E){oe.call(this),this.h=E,this.g={}}m(Fg,oe);var gS=[];function mS(E){x(E.g,function(M,O){this.g.hasOwnProperty(O)&&wE(M)},E),E.g={}}Fg.prototype.N=function(){Fg.aa.N.call(this),mS(this)},Fg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var IE=a.JSON.stringify,sZ=a.JSON.parse,oZ=class{stringify(E){return a.JSON.stringify(E,void 0)}parse(E){return a.JSON.parse(E,void 0)}};function SE(){}SE.prototype.h=null;function pS(E){return E.h||(E.h=E.i())}function US(){}var Bg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xE(){ne.call(this,"d")}m(xE,ne);function CE(){ne.call(this,"c")}m(CE,ne);var du={},bS=null;function Zp(){return bS=bS||new Oi}du.La="serverreachability";function yS(E){ne.call(this,du.La,E)}m(yS,ne);function zg(E){const M=Zp();tr(M,new yS(M))}du.STAT_EVENT="statevent";function ES(E,M){ne.call(this,du.STAT_EVENT,E),this.stat=M}m(ES,ne);function nr(E){const M=Zp();tr(M,new ES(M,E))}du.Ma="timingevent";function vS(E,M){ne.call(this,du.Ma,E),this.size=M}m(vS,ne);function Hg(E,M){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){E()},M)}function Vg(){this.g=!0}Vg.prototype.xa=function(){this.g=!1};function aZ(E,M,O,z,Z,ee){E.info(function(){if(E.g)if(ee)for(var be="",Gt=ee.split("&"),Ti=0;Ti<Gt.length;Ti++){var _t=Gt[Ti].split("=");if(1<_t.length){var Pi=_t[0];_t=_t[1];var Fi=Pi.split("_");be=2<=Fi.length&&Fi[1]=="type"?be+(Pi+"="+_t+"&"):be+(Pi+"=redacted&")}}else be=null;else be=ee;return"XMLHTTP REQ ("+z+") [attempt "+Z+"]: "+M+`
`+O+`
`+be})}function lZ(E,M,O,z,Z,ee,be){E.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+Z+"]: "+M+`
`+O+`
`+ee+" "+be})}function qd(E,M,O,z){E.info(function(){return"XMLHTTP TEXT ("+M+"): "+uZ(E,O)+(z?" "+z:"")})}function cZ(E,M){E.info(function(){return"TIMEOUT: "+M})}Vg.prototype.info=function(){};function uZ(E,M){if(!E.g)return M;if(!M)return null;try{var O=JSON.parse(M);if(O){for(E=0;E<O.length;E++)if(Array.isArray(O[E])){var z=O[E];if(!(2>z.length)){var Z=z[1];if(Array.isArray(Z)&&!(1>Z.length)){var ee=Z[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var be=1;be<Z.length;be++)Z[be]=""}}}}return IE(O)}catch{return M}}var qp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},AE;function Qp(){}m(Qp,SE),Qp.prototype.g=function(){return new XMLHttpRequest},Qp.prototype.i=function(){return{}},AE=new Qp;function Cl(E,M,O,z){this.j=E,this.i=M,this.l=O,this.R=z||1,this.U=new Fg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _S}function _S(){this.i=null,this.g="",this.h=!1}var TS={},ME={};function RE(E,M,O){E.L=1,E.v=nU(da(M)),E.m=O,E.P=!0,IS(E,null)}function IS(E,M){E.F=Date.now(),Jp(E),E.A=da(E.v);var O=E.A,z=E.R;Array.isArray(z)||(z=[String(z)]),BS(O.i,"t",z),E.C=0,O=E.j.J,E.h=new _S,E.g=ix(E.j,O?M:null,!E.m),0<E.O&&(E.M=new rZ(f(E.Y,E,E.g),E.O)),M=E.U,O=E.g,z=E.ca;var Z="readystatechange";Array.isArray(Z)||(Z&&(gS[0]=Z.toString()),Z=gS);for(var ee=0;ee<Z.length;ee++){var be=Wp(O,Z[ee],z||M.handleEvent,!1,M.h||M);if(!be)break;M.g[be.key]=be}M=E.H?T(E.H):{},E.m?(E.u||(E.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.A,E.u,E.m,M)):(E.u="GET",E.g.ea(E.A,E.u,null,M)),zg(),aZ(E.i,E.u,E.A,E.l,E.R,E.m)}Cl.prototype.ca=function(E){E=E.target;const M=this.M;M&&fa(E)==3?M.j():this.Y(E)},Cl.prototype.Y=function(E){try{if(E==this.g)e:{const Fi=fa(this.g);var M=this.g.Ba();const ef=this.g.Z();if(!(3>Fi)&&(Fi!=3||this.g&&(this.h.h||this.g.oa()||jS(this.g)))){this.J||Fi!=4||M==7||(M==8||0>=ef?zg(3):zg(2)),kE(this);var O=this.g.Z();this.X=O;t:if(SS(this)){var z=jS(this.g);E="";var Z=z.length,ee=fa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fu(this),$g(this);var be="";break t}this.h.i=new a.TextDecoder}for(M=0;M<Z;M++)this.h.h=!0,E+=this.h.i.decode(z[M],{stream:!(ee&&M==Z-1)});z.length=0,this.h.g+=E,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=O==200,lZ(this.i,this.u,this.A,this.l,this.R,Fi,O),this.o){if(this.T&&!this.K){t:{if(this.g){var Gt,Ti=this.g;if((Gt=Ti.g?Ti.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(Gt)){var _t=Gt;break t}}_t=null}if(O=_t)qd(this.i,this.l,O,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,LE(this,O);else{this.o=!1,this.s=3,nr(12),fu(this),$g(this);break e}}if(this.P){O=!0;let Bs;for(;!this.J&&this.C<be.length;)if(Bs=dZ(this,be),Bs==ME){Fi==4&&(this.s=4,nr(14),O=!1),qd(this.i,this.l,null,"[Incomplete Response]");break}else if(Bs==TS){this.s=4,nr(15),qd(this.i,this.l,be,"[Invalid Chunk]"),O=!1;break}else qd(this.i,this.l,Bs,null),LE(this,Bs);if(SS(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fi!=4||be.length!=0||this.h.h||(this.s=1,nr(16),O=!1),this.o=this.o&&O,!O)qd(this.i,this.l,be,"[Invalid Chunked Response]"),fu(this),$g(this);else if(0<be.length&&!this.W){this.W=!0;var Pi=this.j;Pi.g==this&&Pi.ba&&!Pi.M&&(Pi.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),BE(Pi),Pi.M=!0,nr(11))}}else qd(this.i,this.l,be,null),LE(this,be);Fi==4&&fu(this),this.o&&!this.J&&(Fi==4?JS(this.j,this):(this.o=!1,Jp(this)))}else CZ(this.g),O==400&&0<be.indexOf("Unknown SID")?(this.s=3,nr(12)):(this.s=0,nr(13)),fu(this),$g(this)}}}catch{}finally{}};function SS(E){return E.g?E.u=="GET"&&E.L!=2&&E.j.Ca:!1}function dZ(E,M){var O=E.C,z=M.indexOf(`
`,O);return z==-1?ME:(O=Number(M.substring(O,z)),isNaN(O)?TS:(z+=1,z+O>M.length?ME:(M=M.slice(z,z+O),E.C=z+O,M)))}Cl.prototype.cancel=function(){this.J=!0,fu(this)};function Jp(E){E.S=Date.now()+E.I,xS(E,E.I)}function xS(E,M){if(E.B!=null)throw Error("WatchDog timer not null");E.B=Hg(f(E.ba,E),M)}function kE(E){E.B&&(a.clearTimeout(E.B),E.B=null)}Cl.prototype.ba=function(){this.B=null;const E=Date.now();0<=E-this.S?(cZ(this.i,this.A),this.L!=2&&(zg(),nr(17)),fu(this),this.s=2,$g(this)):xS(this,this.S-E)};function $g(E){E.j.G==0||E.J||JS(E.j,E)}function fu(E){kE(E);var M=E.M;M&&typeof M.ma=="function"&&M.ma(),E.M=null,mS(E.U),E.g&&(M=E.g,E.g=null,M.abort(),M.ma())}function LE(E,M){try{var O=E.j;if(O.G!=0&&(O.g==E||DE(O.h,E))){if(!E.K&&DE(O.h,E)&&O.G==3){try{var z=O.Da.g.parse(M)}catch{z=null}if(Array.isArray(z)&&z.length==3){var Z=z;if(Z[0]==0){e:if(!O.u){if(O.g)if(O.g.F+3e3<E.F)lU(O),oU(O);else break e;FE(O),nr(18)}}else O.za=Z[1],0<O.za-O.T&&37500>Z[2]&&O.F&&O.v==0&&!O.C&&(O.C=Hg(f(O.Za,O),6e3));if(1>=MS(O.h)&&O.ca){try{O.ca()}catch{}O.ca=void 0}}else gu(O,11)}else if((E.K||O.g==E)&&lU(O),!y(M))for(Z=O.Da.g.parse(M),M=0;M<Z.length;M++){let _t=Z[M];if(O.T=_t[0],_t=_t[1],O.G==2)if(_t[0]=="c"){O.K=_t[1],O.ia=_t[2];const Pi=_t[3];Pi!=null&&(O.la=Pi,O.j.info("VER="+O.la));const Fi=_t[4];Fi!=null&&(O.Aa=Fi,O.j.info("SVER="+O.Aa));const ef=_t[5];ef!=null&&typeof ef=="number"&&0<ef&&(z=1.5*ef,O.L=z,O.j.info("backChannelRequestTimeoutMs_="+z)),z=O;const Bs=E.g;if(Bs){const uU=Bs.g?Bs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uU){var ee=z.h;ee.g||uU.indexOf("spdy")==-1&&uU.indexOf("quic")==-1&&uU.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(NE(ee,ee.h),ee.h=null))}if(z.D){const zE=Bs.g?Bs.g.getResponseHeader("X-HTTP-Session-Id"):null;zE&&(z.ya=zE,Jt(z.I,z.D,zE))}}O.G=3,O.l&&O.l.ua(),O.ba&&(O.R=Date.now()-E.F,O.j.info("Handshake RTT: "+O.R+"ms")),z=O;var be=E;if(z.qa=nx(z,z.J?z.ia:null,z.W),be.K){RS(z.h,be);var Gt=be,Ti=z.L;Ti&&(Gt.I=Ti),Gt.B&&(kE(Gt),Jp(Gt)),z.g=be}else qS(z);0<O.i.length&&aU(O)}else _t[0]!="stop"&&_t[0]!="close"||gu(O,7);else O.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?gu(O,7):PE(O):_t[0]!="noop"&&O.l&&O.l.ta(_t),O.v=0)}}zg(4)}catch{}}var fZ=class{constructor(E,M){this.g=E,this.map=M}};function CS(E){this.l=E||10,a.PerformanceNavigationTiming?(E=a.performance.getEntriesByType("navigation"),E=0<E.length&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function AS(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function MS(E){return E.h?1:E.g?E.g.size:0}function DE(E,M){return E.h?E.h==M:E.g?E.g.has(M):!1}function NE(E,M){E.g?E.g.add(M):E.h=M}function RS(E,M){E.h&&E.h==M?E.h=null:E.g&&E.g.has(M)&&E.g.delete(M)}CS.prototype.cancel=function(){if(this.i=kS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function kS(E){if(E.h!=null)return E.i.concat(E.h.D);if(E.g!=null&&E.g.size!==0){let M=E.i;for(const O of E.g.values())M=M.concat(O.D);return M}return p(E.i)}function hZ(E){if(E.V&&typeof E.V=="function")return E.V();if(typeof Map<"u"&&E instanceof Map||typeof Set<"u"&&E instanceof Set)return Array.from(E.values());if(typeof E=="string")return E.split("");if(l(E)){for(var M=[],O=E.length,z=0;z<O;z++)M.push(E[z]);return M}M=[],O=0;for(z in E)M[O++]=E[z];return M}function gZ(E){if(E.na&&typeof E.na=="function")return E.na();if(!E.V||typeof E.V!="function"){if(typeof Map<"u"&&E instanceof Map)return Array.from(E.keys());if(!(typeof Set<"u"&&E instanceof Set)){if(l(E)||typeof E=="string"){var M=[];E=E.length;for(var O=0;O<E;O++)M.push(O);return M}M=[],O=0;for(const z in E)M[O++]=z;return M}}}function LS(E,M){if(E.forEach&&typeof E.forEach=="function")E.forEach(M,void 0);else if(l(E)||typeof E=="string")Array.prototype.forEach.call(E,M,void 0);else for(var O=gZ(E),z=hZ(E),Z=z.length,ee=0;ee<Z;ee++)M.call(void 0,z[ee],O&&O[ee],E)}var DS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mZ(E,M){if(E){E=E.split("&");for(var O=0;O<E.length;O++){var z=E[O].indexOf("="),Z=null;if(0<=z){var ee=E[O].substring(0,z);Z=E[O].substring(z+1)}else ee=E[O];M(ee,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function hu(E){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,E instanceof hu){this.h=E.h,eU(this,E.j),this.o=E.o,this.g=E.g,tU(this,E.s),this.l=E.l;var M=E.i,O=new jg;O.i=M.i,M.g&&(O.g=new Map(M.g),O.h=M.h),NS(this,O),this.m=E.m}else E&&(M=String(E).match(DS))?(this.h=!1,eU(this,M[1]||"",!0),this.o=Gg(M[2]||""),this.g=Gg(M[3]||"",!0),tU(this,M[4]),this.l=Gg(M[5]||"",!0),NS(this,M[6]||"",!0),this.m=Gg(M[7]||"")):(this.h=!1,this.i=new jg(null,this.h))}hu.prototype.toString=function(){var E=[],M=this.j;M&&E.push(Xg(M,OS,!0),":");var O=this.g;return(O||M=="file")&&(E.push("//"),(M=this.o)&&E.push(Xg(M,OS,!0),"@"),E.push(encodeURIComponent(String(O)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O=this.s,O!=null&&E.push(":",String(O))),(O=this.l)&&(this.g&&O.charAt(0)!="/"&&E.push("/"),E.push(Xg(O,O.charAt(0)=="/"?bZ:UZ,!0))),(O=this.i.toString())&&E.push("?",O),(O=this.m)&&E.push("#",Xg(O,EZ)),E.join("")};function da(E){return new hu(E)}function eU(E,M,O){E.j=O?Gg(M,!0):M,E.j&&(E.j=E.j.replace(/:$/,""))}function tU(E,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);E.s=M}else E.s=null}function NS(E,M,O){M instanceof jg?(E.i=M,vZ(E.i,E.h)):(O||(M=Xg(M,yZ)),E.i=new jg(M,E.h))}function Jt(E,M,O){E.i.set(M,O)}function nU(E){return Jt(E,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),E}function Gg(E,M){return E?M?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function Xg(E,M,O){return typeof E=="string"?(E=encodeURI(E).replace(M,pZ),O&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function pZ(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var OS=/[#\/\?@]/g,UZ=/[#\?:]/g,bZ=/[#\?]/g,yZ=/[#\?@]/g,EZ=/#/g;function jg(E,M){this.h=this.g=null,this.i=E||null,this.j=!!M}function Al(E){E.g||(E.g=new Map,E.h=0,E.i&&mZ(E.i,function(M,O){E.add(decodeURIComponent(M.replace(/\+/g," ")),O)}))}e=jg.prototype,e.add=function(E,M){Al(this),this.i=null,E=Qd(this,E);var O=this.g.get(E);return O||this.g.set(E,O=[]),O.push(M),this.h+=1,this};function PS(E,M){Al(E),M=Qd(E,M),E.g.has(M)&&(E.i=null,E.h-=E.g.get(M).length,E.g.delete(M))}function FS(E,M){return Al(E),M=Qd(E,M),E.g.has(M)}e.forEach=function(E,M){Al(this),this.g.forEach(function(O,z){O.forEach(function(Z){E.call(M,Z,z,this)},this)},this)},e.na=function(){Al(this);const E=Array.from(this.g.values()),M=Array.from(this.g.keys()),O=[];for(let z=0;z<M.length;z++){const Z=E[z];for(let ee=0;ee<Z.length;ee++)O.push(M[z])}return O},e.V=function(E){Al(this);let M=[];if(typeof E=="string")FS(this,E)&&(M=M.concat(this.g.get(Qd(this,E))));else{E=Array.from(this.g.values());for(let O=0;O<E.length;O++)M=M.concat(E[O])}return M},e.set=function(E,M){return Al(this),this.i=null,E=Qd(this,E),FS(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[M]),this.h+=1,this},e.get=function(E,M){return E?(E=this.V(E),0<E.length?String(E[0]):M):M};function BS(E,M,O){PS(E,M),0<O.length&&(E.i=null,E.g.set(Qd(E,M),p(O)),E.h+=O.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],M=Array.from(this.g.keys());for(var O=0;O<M.length;O++){var z=M[O];const ee=encodeURIComponent(String(z)),be=this.V(z);for(z=0;z<be.length;z++){var Z=ee;be[z]!==""&&(Z+="="+encodeURIComponent(String(be[z]))),E.push(Z)}}return this.i=E.join("&")};function Qd(E,M){return M=String(M),E.j&&(M=M.toLowerCase()),M}function vZ(E,M){M&&!E.j&&(Al(E),E.i=null,E.g.forEach(function(O,z){var Z=z.toLowerCase();z!=Z&&(PS(this,z),BS(this,Z,O))},E)),E.j=M}function wZ(E,M){const O=new Vg;if(a.Image){const z=new Image;z.onload=h(Ml,O,"TestLoadImage: loaded",!0,M,z),z.onerror=h(Ml,O,"TestLoadImage: error",!1,M,z),z.onabort=h(Ml,O,"TestLoadImage: abort",!1,M,z),z.ontimeout=h(Ml,O,"TestLoadImage: timeout",!1,M,z),a.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=E}else M(!1)}function _Z(E,M){const O=new Vg,z=new AbortController,Z=setTimeout(()=>{z.abort(),Ml(O,"TestPingServer: timeout",!1,M)},1e4);fetch(E,{signal:z.signal}).then(ee=>{clearTimeout(Z),ee.ok?Ml(O,"TestPingServer: ok",!0,M):Ml(O,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(Z),Ml(O,"TestPingServer: error",!1,M)})}function Ml(E,M,O,z,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),z(O)}catch{}}function TZ(){this.g=new oZ}function IZ(E,M,O){const z=O||"";try{LS(E,function(Z,ee){let be=Z;c(Z)&&(be=IE(Z)),M.push(z+ee+"="+encodeURIComponent(be))})}catch(Z){throw M.push(z+"type="+encodeURIComponent("_badmap")),Z}}function iU(E){this.l=E.Ub||null,this.j=E.eb||!1}m(iU,SE),iU.prototype.g=function(){return new rU(this.l,this.j)},iU.prototype.i=function(E){return function(){return E}}({});function rU(E,M){Oi.call(this),this.D=E,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(rU,Oi),e=rU.prototype,e.open=function(E,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=E,this.A=M,this.readyState=1,Wg(this)},e.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};E&&(M.body=E),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yg(this)),this.readyState=0},e.Sa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,Wg(this)),this.g&&(this.readyState=3,Wg(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zS(this)}else E.text().then(this.Ra.bind(this),this.ga.bind(this))};function zS(E){E.j.read().then(E.Pa.bind(E)).catch(E.ga.bind(E))}e.Pa=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var M=E.value?E.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!E.done}))&&(this.response=this.responseText+=M)}E.done?Yg(this):Wg(this),this.readyState==3&&zS(this)}},e.Ra=function(E){this.g&&(this.response=this.responseText=E,Yg(this))},e.Qa=function(E){this.g&&(this.response=E,Yg(this))},e.ga=function(){this.g&&Yg(this)};function Yg(E){E.readyState=4,E.l=null,E.j=null,E.v=null,Wg(E)}e.setRequestHeader=function(E,M){this.u.append(E,M)},e.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],M=this.h.entries();for(var O=M.next();!O.done;)O=O.value,E.push(O[0]+": "+O[1]),O=M.next();return E.join(`\r
`)};function Wg(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(rU.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function HS(E){let M="";return x(E,function(O,z){M+=z,M+=":",M+=O,M+=`\r
`}),M}function OE(E,M,O){e:{for(z in O){var z=!1;break e}z=!0}z||(O=HS(O),typeof E=="string"?O!=null&&encodeURIComponent(String(O)):Jt(E,M,O))}function En(E){Oi.call(this),this.headers=new Map,this.o=E||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(En,Oi);var SZ=/^https?$/i,xZ=["POST","PUT"];e=En.prototype,e.Ha=function(E){this.J=E},e.ea=function(E,M,O,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);M=M?M.toUpperCase():"GET",this.D=E,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():AE.g(),this.v=this.o?pS(this.o):pS(AE),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(M,String(E),!0),this.B=!1}catch(ee){VS(this,ee);return}if(E=O||"",O=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var Z in z)O.set(Z,z[Z]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ee of z.keys())O.set(ee,z.get(ee));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(O.keys()).find(ee=>ee.toLowerCase()=="content-type"),Z=a.FormData&&E instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xZ,M,void 0))||z||Z||O.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,be]of O)this.g.setRequestHeader(ee,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{XS(this),this.u=!0,this.g.send(E),this.u=!1}catch(ee){VS(this,ee)}};function VS(E,M){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=M,E.m=5,$S(E),sU(E)}function $S(E){E.A||(E.A=!0,tr(E,"complete"),tr(E,"error"))}e.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=E||7,tr(this,"complete"),tr(this,"abort"),sU(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sU(this,!0)),En.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?GS(this):this.bb())},e.bb=function(){GS(this)};function GS(E){if(E.h&&typeof o<"u"&&(!E.v[1]||fa(E)!=4||E.Z()!=2)){if(E.u&&fa(E)==4)fS(E.Ea,0,E);else if(tr(E,"readystatechange"),fa(E)==4){E.h=!1;try{const be=E.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var O;if(!(O=M)){var z;if(z=be===0){var Z=String(E.D).match(DS)[1]||null;!Z&&a.self&&a.self.location&&(Z=a.self.location.protocol.slice(0,-1)),z=!SZ.test(Z?Z.toLowerCase():"")}O=z}if(O)tr(E,"complete"),tr(E,"success");else{E.m=6;try{var ee=2<fa(E)?E.g.statusText:""}catch{ee=""}E.l=ee+" ["+E.Z()+"]",$S(E)}}finally{sU(E)}}}}function sU(E,M){if(E.g){XS(E);const O=E.g,z=E.v[0]?()=>{}:null;E.g=null,E.v=null,M||tr(E,"ready");try{O.onreadystatechange=z}catch{}}}function XS(E){E.I&&(a.clearTimeout(E.I),E.I=null)}e.isActive=function(){return!!this.g};function fa(E){return E.g?E.g.readyState:0}e.Z=function(){try{return 2<fa(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(E){if(this.g){var M=this.g.responseText;return E&&M.indexOf(E)==0&&(M=M.substring(E.length)),sZ(M)}};function jS(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.H){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function CZ(E){const M={};E=(E.g&&2<=fa(E)&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<E.length;z++){if(y(E[z]))continue;var O=k(E[z]);const Z=O[0];if(O=O[1],typeof O!="string")continue;O=O.trim();const ee=M[Z]||[];M[Z]=ee,ee.push(O)}_(M,function(z){return z.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kg(E,M,O){return O&&O.internalChannelParams&&O.internalChannelParams[E]||M}function YS(E){this.Aa=0,this.i=[],this.j=new Vg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kg("failFast",!1,E),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kg("baseRetryDelayMs",5e3,E),this.cb=Kg("retryDelaySeedMs",1e4,E),this.Wa=Kg("forwardChannelMaxRetries",2,E),this.wa=Kg("forwardChannelRequestTimeoutMs",2e4,E),this.pa=E&&E.xmlHttpFactory||void 0,this.Xa=E&&E.Tb||void 0,this.Ca=E&&E.useFetchStreams||!1,this.L=void 0,this.J=E&&E.supportsCrossDomainXhr||!1,this.K="",this.h=new CS(E&&E.concurrentRequestLimit),this.Da=new TZ,this.P=E&&E.fastHandshake||!1,this.O=E&&E.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=E&&E.Rb||!1,E&&E.xa&&this.j.xa(),E&&E.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&E&&E.detectBufferingProxy||!1,this.ja=void 0,E&&E.longPollingTimeout&&0<E.longPollingTimeout&&(this.ja=E.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=YS.prototype,e.la=8,e.G=1,e.connect=function(E,M,O,z){nr(0),this.W=E,this.H=M||{},O&&z!==void 0&&(this.H.OSID=O,this.H.OAID=z),this.F=this.X,this.I=nx(this,null,this.W),aU(this)};function PE(E){if(WS(E),E.G==3){var M=E.U++,O=da(E.I);if(Jt(O,"SID",E.K),Jt(O,"RID",M),Jt(O,"TYPE","terminate"),Zg(E,O),M=new Cl(E,E.j,M),M.L=2,M.v=nU(da(O)),O=!1,a.navigator&&a.navigator.sendBeacon)try{O=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!O&&a.Image&&(new Image().src=M.v,O=!0),O||(M.g=ix(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Jp(M)}tx(E)}function oU(E){E.g&&(BE(E),E.g.cancel(),E.g=null)}function WS(E){oU(E),E.u&&(a.clearTimeout(E.u),E.u=null),lU(E),E.h.cancel(),E.s&&(typeof E.s=="number"&&a.clearTimeout(E.s),E.s=null)}function aU(E){if(!AS(E.h)&&!E.s){E.s=!0;var M=E.Ga;H||W(),$||(H(),$=!0),X.add(M,E),E.B=0}}function AZ(E,M){return MS(E.h)>=E.h.j-(E.s?1:0)?!1:E.s?(E.i=M.D.concat(E.i),!0):E.G==1||E.G==2||E.B>=(E.Va?0:E.Wa)?!1:(E.s=Hg(f(E.Ga,E,M),ex(E,E.B)),E.B++,!0)}e.Ga=function(E){if(this.s)if(this.s=null,this.G==1){if(!E){this.U=Math.floor(1e5*Math.random()),E=this.U++;const Z=new Cl(this,this.j,E);let ee=this.o;if(this.S&&(ee?(ee=T(ee),C(ee,this.S)):ee=this.S),this.m!==null||this.O||(Z.H=ee,ee=null),this.P)e:{for(var M=0,O=0;O<this.i.length;O++){t:{var z=this.i[O];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(M+=z,4096<M){M=O;break e}if(M===4096||O===this.i.length-1){M=O+1;break e}}M=1e3}else M=1e3;M=ZS(this,Z,M),O=da(this.I),Jt(O,"RID",E),Jt(O,"CVER",22),this.D&&Jt(O,"X-HTTP-Session-Id",this.D),Zg(this,O),ee&&(this.O?M="headers="+encodeURIComponent(String(HS(ee)))+"&"+M:this.m&&OE(O,this.m,ee)),NE(this.h,Z),this.Ua&&Jt(O,"TYPE","init"),this.P?(Jt(O,"$req",M),Jt(O,"SID","null"),Z.T=!0,RE(Z,O,null)):RE(Z,O,M),this.G=2}}else this.G==3&&(E?KS(this,E):this.i.length==0||AS(this.h)||KS(this))};function KS(E,M){var O;M?O=M.l:O=E.U++;const z=da(E.I);Jt(z,"SID",E.K),Jt(z,"RID",O),Jt(z,"AID",E.T),Zg(E,z),E.m&&E.o&&OE(z,E.m,E.o),O=new Cl(E,E.j,O,E.B+1),E.m===null&&(O.H=E.o),M&&(E.i=M.D.concat(E.i)),M=ZS(E,O,1e3),O.I=Math.round(.5*E.wa)+Math.round(.5*E.wa*Math.random()),NE(E.h,O),RE(O,z,M)}function Zg(E,M){E.H&&x(E.H,function(O,z){Jt(M,z,O)}),E.l&&LS({},function(O,z){Jt(M,z,O)})}function ZS(E,M,O){O=Math.min(E.i.length,O);var z=E.l?f(E.l.Na,E.l,E):null;e:{var Z=E.i;let ee=-1;for(;;){const be=["count="+O];ee==-1?0<O?(ee=Z[0].g,be.push("ofs="+ee)):ee=0:be.push("ofs="+ee);let Gt=!0;for(let Ti=0;Ti<O;Ti++){let _t=Z[Ti].g;const Pi=Z[Ti].map;if(_t-=ee,0>_t)ee=Math.max(0,Z[Ti].g-100),Gt=!1;else try{IZ(Pi,be,"req"+_t+"_")}catch{z&&z(Pi)}}if(Gt){z=be.join("&");break e}}}return E=E.i.splice(0,O),M.D=E,z}function qS(E){if(!E.g&&!E.u){E.Y=1;var M=E.Fa;H||W(),$||(H(),$=!0),X.add(M,E),E.v=0}}function FE(E){return E.g||E.u||3<=E.v?!1:(E.Y++,E.u=Hg(f(E.Fa,E),ex(E,E.v)),E.v++,!0)}e.Fa=function(){if(this.u=null,QS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var E=2*this.R;this.j.info("BP detection timer enabled: "+E),this.A=Hg(f(this.ab,this),E)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nr(10),oU(this),QS(this))};function BE(E){E.A!=null&&(a.clearTimeout(E.A),E.A=null)}function QS(E){E.g=new Cl(E,E.j,"rpc",E.Y),E.m===null&&(E.g.H=E.o),E.g.O=0;var M=da(E.qa);Jt(M,"RID","rpc"),Jt(M,"SID",E.K),Jt(M,"AID",E.T),Jt(M,"CI",E.F?"0":"1"),!E.F&&E.ja&&Jt(M,"TO",E.ja),Jt(M,"TYPE","xmlhttp"),Zg(E,M),E.m&&E.o&&OE(M,E.m,E.o),E.L&&(E.g.I=E.L);var O=E.g;E=E.ia,O.L=1,O.v=nU(da(M)),O.m=null,O.P=!0,IS(O,E)}e.Za=function(){this.C!=null&&(this.C=null,oU(this),FE(this),nr(19))};function lU(E){E.C!=null&&(a.clearTimeout(E.C),E.C=null)}function JS(E,M){var O=null;if(E.g==M){lU(E),BE(E),E.g=null;var z=2}else if(DE(E.h,M))O=M.D,RS(E.h,M),z=1;else return;if(E.G!=0){if(M.o)if(z==1){O=M.m?M.m.length:0,M=Date.now()-M.F;var Z=E.B;z=Zp(),tr(z,new vS(z,O)),aU(E)}else qS(E);else if(Z=M.s,Z==3||Z==0&&0<M.X||!(z==1&&AZ(E,M)||z==2&&FE(E)))switch(O&&0<O.length&&(M=E.h,M.i=M.i.concat(O)),Z){case 1:gu(E,5);break;case 4:gu(E,10);break;case 3:gu(E,6);break;default:gu(E,2)}}}function ex(E,M){let O=E.Ta+Math.floor(Math.random()*E.cb);return E.isActive()||(O*=2),O*M}function gu(E,M){if(E.j.info("Error code "+M),M==2){var O=f(E.fb,E),z=E.Xa;const Z=!z;z=new hu(z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||eU(z,"https"),nU(z),Z?wZ(z.toString(),O):_Z(z.toString(),O)}else nr(2);E.G=0,E.l&&E.l.sa(M),tx(E),WS(E)}e.fb=function(E){E?(this.j.info("Successfully pinged google.com"),nr(2)):(this.j.info("Failed to ping google.com"),nr(1))};function tx(E){if(E.G=0,E.ka=[],E.l){const M=kS(E.h);(M.length!=0||E.i.length!=0)&&(U(E.ka,M),U(E.ka,E.i),E.h.i.length=0,p(E.i),E.i.length=0),E.l.ra()}}function nx(E,M,O){var z=O instanceof hu?da(O):new hu(O);if(z.g!="")M&&(z.g=M+"."+z.g),tU(z,z.s);else{var Z=a.location;z=Z.protocol,M=M?M+"."+Z.hostname:Z.hostname,Z=+Z.port;var ee=new hu(null);z&&eU(ee,z),M&&(ee.g=M),Z&&tU(ee,Z),O&&(ee.l=O),z=ee}return O=E.D,M=E.ya,O&&M&&Jt(z,O,M),Jt(z,"VER",E.la),Zg(E,z),z}function ix(E,M,O){if(M&&!E.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=E.Ca&&!E.pa?new En(new iU({eb:O})):new En(E.pa),M.Ha(E.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function rx(){}e=rx.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function cU(){}cU.prototype.g=function(E,M){return new Or(E,M)};function Or(E,M){Oi.call(this),this.g=new YS(M),this.l=E,this.h=M&&M.messageUrlParams||null,E=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(E?E["X-WebChannel-Content-Type"]=M.messageContentType:E={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(E?E["X-WebChannel-Client-Profile"]=M.va:E={"X-WebChannel-Client-Profile":M.va}),this.g.S=E,(E=M&&M.Sb)&&!y(E)&&(this.g.m=E),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!y(M)&&(this.g.D=M,E=this.h,E!==null&&M in E&&(E=this.h,M in E&&delete E[M])),this.j=new Jd(this)}m(Or,Oi),Or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Or.prototype.close=function(){PE(this.g)},Or.prototype.o=function(E){var M=this.g;if(typeof E=="string"){var O={};O.__data__=E,E=O}else this.u&&(O={},O.__data__=IE(E),E=O);M.i.push(new fZ(M.Ya++,E)),M.G==3&&aU(M)},Or.prototype.N=function(){this.g.l=null,delete this.j,PE(this.g),delete this.g,Or.aa.N.call(this)};function sx(E){xE.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var M=E.__sm__;if(M){e:{for(const O in M){E=O;break e}E=void 0}(this.i=E)&&(E=this.i,M=M!==null&&E in M?M[E]:void 0),this.data=M}else this.data=E}m(sx,xE);function ox(){CE.call(this),this.status=1}m(ox,CE);function Jd(E){this.g=E}m(Jd,rx),Jd.prototype.ua=function(){tr(this.g,"a")},Jd.prototype.ta=function(E){tr(this.g,new sx(E))},Jd.prototype.sa=function(E){tr(this.g,new ox)},Jd.prototype.ra=function(){tr(this.g,"b")},cU.prototype.createWebChannel=cU.prototype.g,Or.prototype.send=Or.prototype.o,Or.prototype.open=Or.prototype.m,Or.prototype.close=Or.prototype.close,dW=function(){return new cU},uW=function(){return Zp()},cW=du,tw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qp.NO_ERROR=0,qp.TIMEOUT=8,qp.HTTP_ERROR=6,lb=qp,wS.COMPLETE="complete",lW=wS,US.EventType=Bg,Bg.OPEN="a",Bg.CLOSE="b",Bg.ERROR="c",Bg.MESSAGE="d",Oi.prototype.listen=Oi.prototype.K,Km=US,En.prototype.listenOnce=En.prototype.L,En.prototype.getLastError=En.prototype.Ka,En.prototype.getLastErrorCode=En.prototype.Ba,En.prototype.getStatus=En.prototype.Z,En.prototype.getResponseJson=En.prototype.Oa,En.prototype.getResponseText=En.prototype.oa,En.prototype.send=En.prototype.ea,En.prototype.setWithCredentials=En.prototype.Ha,aW=En}).apply(typeof c2<"u"?c2:typeof self<"u"?self:typeof window<"u"?window:{});const gD="@firebase/firestore",mD="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lg="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new ZY("@firebase/firestore");function _f(){return Ad.logLevel}function _e(e,...t){if(Ad.logLevel<=ht.DEBUG){const n=t.map(TI);Ad.debug(`Firestore (${Lg}): ${e}`,...n)}}function bl(e,...t){if(Ad.logLevel<=ht.ERROR){const n=t.map(TI);Ad.error(`Firestore (${Lg}): ${e}`,...n)}}function ng(e,...t){if(Ad.logLevel<=ht.WARN){const n=t.map(TI);Ad.warn(`Firestore (${Lg}): ${e}`,...n)}}function TI(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(e="Unexpected state"){const t=`FIRESTORE (${Lg}) INTERNAL ASSERTION FAILED: `+e;throw bl(t),new Error(t)}function jt(e,t){e||Ne()}function rt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends jd{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class c_e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n($i.UNAUTHENTICATED))}shutdown(){}}class u_e{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class d_e{constructor(t){this.t=t,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){jt(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Rc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Rc,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Rc)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(jt(typeof i.accessToken=="string"),new fW(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return jt(t===null||typeof t=="string"),new $i(t)}}class f_e{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class h_e{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new f_e(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pD{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g_e{constructor(t,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,eW(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,n){jt(this.o===void 0);const i=s=>{s.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,_e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new pD(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(jt(typeof n.token=="string"),this.R=n.token,new pD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_e(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hW{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=m_e(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=t.charAt(r[s]%62))}return i}}function gt(e,t){return e<t?-1:e>t?1:0}function ig(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=-62135596800,bD=1e6;class wi{static now(){return wi.fromMillis(Date.now())}static fromDate(t){return wi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*bD);return new wi(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<UD)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bD}_compareTo(t){return this.seconds===t.seconds?gt(this.nanoseconds,t.nanoseconds):gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-UD;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(t){return new Fe(t)}static min(){return new Fe(new wi(0,0))}static max(){return new Fe(new wi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="__name__";class Mo{constructor(t,n,i){n===void 0?n=0:n>t.length&&Ne(),i===void 0?i=t.length-n:i>t.length-n&&Ne(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return Mo.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Mo?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let r=0;r<i;r++){const s=Mo.compareSegments(t.get(r),n.get(r));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const i=Mo.isNumericId(t),r=Mo.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Mo.extractNumericId(t).compare(Mo.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Mc.fromString(t.substring(4,t.length-2))}}class cn extends Mo{construct(t,n,i){return new cn(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new cn(n)}static emptyPath(){return new cn([])}}const p_e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends Mo{construct(t,n,i){return new ji(t,n,i)}static isValidIdentifier(t){return p_e.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yD}static keyField(){return new ji([yD])}static fromServerFormat(t){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<t.length;){const a=t[r];if(a==="\\"){if(r+1===t.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ji(n)}static emptyPath(){return new ji([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(t){this.path=t}static fromPath(t){return new Oe(cn.fromString(t))}static fromName(t){return new Oe(cn.fromString(t).popFirst(5))}static empty(){return new Oe(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&cn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return cn.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Oe(new cn(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=-1;function U_e(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Fe.fromTimestamp(i===1e9?new wi(n+1,0):new wi(n,i));return new Wc(r,Oe.empty(),t)}function b_e(e){return new Wc(e.readTime,e.key,G0)}class Wc{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Wc(Fe.min(),Oe.empty(),G0)}static max(){return new Wc(Fe.max(),Oe.empty(),G0)}}function y_e(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Oe.comparator(e.documentKey,t.documentKey),n!==0?n:gt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v_e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oE(e){if(e.code!==ae.FAILED_PRECONDITION||e.message!==E_e)throw e;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new se((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):se.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):se.reject(n)}static resolve(t){return new se((n,i)=>{n(t)})}static reject(t){return new se((n,i)=>{i(t)})}static waitFor(t){return new se((n,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(t){let n=se.resolve(!1);for(const i of t)n=n.next(r=>r?se.resolve(r):i());return n}static forEach(t,n){const i=[];return t.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(t,n){return new se((i,r)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(t[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(t,n){return new se((i,r)=>{const s=()=>{t()===!0?n().next(()=>{s()},r):i()};s()})}}function w_e(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dg(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}aE.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __e=-1;function $p(e){return e==null}function f5(e){return e===0&&1/e==-1/0}function T_e(e){return typeof e=="number"&&Number.isInteger(e)&&!f5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW="";function I_e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ED(t)),t=S_e(e.get(n),t);return ED(t)}function S_e(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const s=e.charAt(r);switch(s){case"\0":n+="";break;case gW:n+="";break;default:n+=s}}return n}function ED(e){return e+gW+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mW(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t,n){this.comparator=t,this.root=n||Ai.EMPTY}insert(t,n){return new Dn(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ai.BLACK,null,null))}remove(t){return new Dn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ai.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){const t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new u2(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new u2(this.root,t,this.comparator,!1)}getReverseIterator(){return new u2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new u2(this.root,t,this.comparator,!0)}}class u2{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?i(t.key,n):1,n&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ai{constructor(t,n,i,r,s){this.key=t,this.value=n,this.color=i??Ai.RED,this.left=r??Ai.EMPTY,this.right=s??Ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,s){return new Ai(t??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ai.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return Ai.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const t=this.left.check();if(t!==this.right.check())throw Ne();return t+(this.isRed()?0:1)}}Ai.EMPTY=null,Ai.RED=!0,Ai.BLACK=!1;Ai.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(t,n,i,r,s){return this}insert(t,n,i){return new Ai(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this.comparator=t,this.data=new Dn(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wD(this.data.getIterator())}getIteratorFrom(t){return new wD(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof ii)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ii(this.comparator);return n.data=t,n}}class wD{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t){this.fields=t,t.sort(ji.comparator)}static empty(){return new Ss([])}unionWith(t){let n=new ii(ji.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new Ss(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ig(this.fields,t.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pW("Invalid base64 string: "+s):s}}(t);return new Ni(n)}static fromUint8Array(t){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Ni(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const x_e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kc(e){if(jt(!!e),typeof e=="string"){let t=0;const n=x_e.exec(e);if(jt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rn(e.seconds),nanos:Rn(e.nanos)}}function Rn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Zc(e){return typeof e=="string"?Ni.fromBase64String(e):Ni.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UW="server_timestamp",bW="__type__",yW="__previous_value__",EW="__local_write_time__";function II(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[bW])===null||n===void 0?void 0:n.stringValue)===UW}function lE(e){const t=e.mapValue.fields[yW];return II(t)?lE(t):t}function X0(e){const t=Kc(e.mapValue.fields[EW].timestampValue);return new wi(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_e{constructor(t,n,i,r,s,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const h5="(default)";class j0{constructor(t,n){this.projectId=t,this.database=n||h5}static empty(){return new j0("","")}get isDefaultDatabase(){return this.database===h5}isEqual(t){return t instanceof j0&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW="__type__",A_e="__max__",d2={mapValue:{}},wW="__vector__",g5="value";function qc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?II(e)?4:R_e(e)?9007199254740991:M_e(e)?10:11:Ne()}function ra(e,t){if(e===t)return!0;const n=qc(e);if(n!==qc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return X0(e).isEqual(X0(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Kc(r.timestampValue),a=Kc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,s){return Zc(r.bytesValue).isEqual(Zc(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,s){return Rn(r.geoPointValue.latitude)===Rn(s.geoPointValue.latitude)&&Rn(r.geoPointValue.longitude)===Rn(s.geoPointValue.longitude)}(e,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Rn(r.integerValue)===Rn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Rn(r.doubleValue),a=Rn(s.doubleValue);return o===a?f5(o)===f5(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ig(e.arrayValue.values||[],t.arrayValue.values||[],ra);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(vD(o)!==vD(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ra(o[l],a[l])))return!1;return!0}(e,t);default:return Ne()}}function Y0(e,t){return(e.values||[]).find(n=>ra(n,t))!==void 0}function rg(e,t){if(e===t)return 0;const n=qc(e),i=qc(t);if(n!==i)return gt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return gt(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Rn(s.integerValue||s.doubleValue),l=Rn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return _D(e.timestampValue,t.timestampValue);case 4:return _D(X0(e),X0(t));case 5:return gt(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Zc(s),l=Zc(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=gt(a[c],l[c]);if(u!==0)return u}return gt(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=gt(Rn(s.latitude),Rn(o.latitude));return a!==0?a:gt(Rn(s.longitude),Rn(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return TD(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},f=o.fields||{},h=(a=d[g5])===null||a===void 0?void 0:a.arrayValue,m=(l=f[g5])===null||l===void 0?void 0:l.arrayValue,p=gt(((c=h==null?void 0:h.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return p!==0?p:TD(h,m)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===d2.mapValue&&o===d2.mapValue)return 0;if(s===d2.mapValue)return 1;if(o===d2.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=gt(l[d],u[d]);if(f!==0)return f;const h=rg(a[l[d]],c[u[d]]);if(h!==0)return h}return gt(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Ne()}}function _D(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return gt(e,t);const n=Kc(e),i=Kc(t),r=gt(n.seconds,i.seconds);return r!==0?r:gt(n.nanos,i.nanos)}function TD(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=rg(n[r],i[r]);if(s)return s}return gt(n.length,i.length)}function sg(e){return nw(e)}function nw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const i=Kc(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Zc(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Oe.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=nw(s);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${nw(n.fields[o])}`;return r+"}"}(e.mapValue):Ne()}function cb(e){switch(qc(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=lE(e);return t?16+cb(t):16;case 5:return 2*e.stringValue.length;case 6:return Zc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+cb(s),0)}(e.arrayValue);case 10:case 11:return function(i){let r=0;return Yd(i.fields,(s,o)=>{r+=s.length+cb(o)}),r}(e.mapValue);default:throw Ne()}}function iw(e){return!!e&&"integerValue"in e}function SI(e){return!!e&&"arrayValue"in e}function ID(e){return!!e&&"nullValue"in e}function SD(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function n7(e){return!!e&&"mapValue"in e}function M_e(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[vW])===null||n===void 0?void 0:n.stringValue)===wW}function P1(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yd(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=P1(i)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=P1(e.arrayValue.values[n]);return t}return Object.assign({},e)}function R_e(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===A_e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.value=t}static empty(){return new Tr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!n7(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=P1(n)}setAll(t){let n=ji.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=P1(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(t){const n=this.field(t.popLast());n7(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ra(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];n7(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Yd(n,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Tr(P1(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(t,n,i,r,s,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ui(t,0,Fe.min(),Fe.min(),Fe.min(),Tr.empty(),0)}static newFoundDocument(t,n,i,r){return new Ui(t,1,n,Fe.min(),i,r,0)}static newNoDocument(t,n){return new Ui(t,2,n,Fe.min(),Fe.min(),Tr.empty(),0)}static newUnknownDocument(t,n){return new Ui(t,3,n,Fe.min(),Fe.min(),Tr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Tr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Tr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ui&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ui(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(t,n){this.position=t,this.inclusive=n}}function xD(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(s.field.isKeyField()?i=Oe.comparator(Oe.fromName(o.referenceValue),n.key):i=rg(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function CD(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ra(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(t,n="asc"){this.field=t,this.dir=n}}function k_e(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{}class ni extends _W{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new D_e(t,n,i):n==="array-contains"?new P_e(t,i):n==="in"?new F_e(t,i):n==="not-in"?new B_e(t,i):n==="array-contains-any"?new z_e(t,i):new ni(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new N_e(t,i):new O_e(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(rg(n,this.value)):n!==null&&qc(this.value)===qc(n)&&this.matchesComparison(rg(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends _W{constructor(t,n){super(),this.filters=t,this.op=n,this.ce=null}static create(t,n){return new sa(t,n)}matches(t){return TW(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function TW(e){return e.op==="and"}function IW(e){return L_e(e)&&TW(e)}function L_e(e){for(const t of e.filters)if(t instanceof sa)return!1;return!0}function rw(e){if(e instanceof ni)return e.field.canonicalString()+e.op.toString()+sg(e.value);if(IW(e))return e.filters.map(t=>rw(t)).join(",");{const t=e.filters.map(n=>rw(n)).join(",");return`${e.op}(${t})`}}function SW(e,t){return e instanceof ni?function(i,r){return r instanceof ni&&i.op===r.op&&i.field.isEqual(r.field)&&ra(i.value,r.value)}(e,t):e instanceof sa?function(i,r){return r instanceof sa&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&SW(o,r.filters[a]),!0):!1}(e,t):void Ne()}function xW(e){return e instanceof ni?function(n){return`${n.field.canonicalString()} ${n.op} ${sg(n.value)}`}(e):e instanceof sa?function(n){return n.op.toString()+" {"+n.getFilters().map(xW).join(" ,")+"}"}(e):"Filter"}class D_e extends ni{constructor(t,n,i){super(t,n,i),this.key=Oe.fromName(i.referenceValue)}matches(t){const n=Oe.comparator(t.key,this.key);return this.matchesComparison(n)}}class N_e extends ni{constructor(t,n){super(t,"in",n),this.keys=CW("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class O_e extends ni{constructor(t,n){super(t,"not-in",n),this.keys=CW("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function CW(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Oe.fromName(i.referenceValue))}class P_e extends ni{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return SI(n)&&Y0(n.arrayValue,this.value)}}class F_e extends ni{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Y0(this.value.arrayValue,n)}}class B_e extends ni{constructor(t,n){super(t,"not-in",n)}matches(t){if(Y0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Y0(this.value.arrayValue,n)}}class z_e extends ni{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!SI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Y0(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_e{constructor(t,n=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function AD(e,t=null,n=[],i=[],r=null,s=null,o=null){return new H_e(e,t,n,i,r,s,o)}function xI(e){const t=rt(e);if(t.le===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>rw(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),$p(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>sg(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>sg(i)).join(",")),t.le=n}return t.le}function CI(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!k_e(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!SW(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!CD(e.startAt,t.startAt)&&CD(e.endAt,t.endAt)}function sw(e){return Oe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function V_e(e,t,n,i,r,s,o,a){return new cE(e,t,n,i,r,s,o,a)}function AI(e){return new cE(e)}function MD(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function $_e(e){return e.collectionGroup!==null}function F1(e){const t=rt(e);if(t.he===null){t.he=[];const n=new Set;for(const s of t.explicitOrderBy)t.he.push(s),n.add(s.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ii(ji.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.he.push(new p5(s,i))}),n.has(ji.keyField().canonicalString())||t.he.push(new p5(ji.keyField(),i))}return t.he}function jo(e){const t=rt(e);return t.Pe||(t.Pe=G_e(t,F1(e))),t.Pe}function G_e(e,t){if(e.limitType==="F")return AD(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new p5(r.field,s)});const n=e.endAt?new m5(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new m5(e.startAt.position,e.startAt.inclusive):null;return AD(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function ow(e,t,n){return new cE(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uE(e,t){return CI(jo(e),jo(t))&&e.limitType===t.limitType}function AW(e){return`${xI(jo(e))}|lt:${e.limitType}`}function Tf(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>xW(r)).join(", ")}]`),$p(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>sg(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>sg(r)).join(",")),`Target(${i})`}(jo(e))}; limitType=${e.limitType})`}function dE(e,t){return t.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Oe.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(e,t)&&function(i,r){for(const s of F1(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(e,t)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=xD(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,F1(i),r)||i.endAt&&!function(o,a,l){const c=xD(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,F1(i),r))}(e,t)}function X_e(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function MW(e){return(t,n)=>{let i=!1;for(const r of F1(e)){const s=j_e(r,t,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function j_e(e,t,n){const i=e.field.isKeyField()?Oe.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?rg(l,c):Ne()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Yd(this.inner,(n,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return mW(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_e=new Dn(Oe.comparator);function Qc(){return Y_e}const RW=new Dn(Oe.comparator);function Zm(...e){let t=RW;for(const n of e)t=t.insert(n.key,n);return t}function W_e(e){let t=RW;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Vu(){return B1()}function kW(){return B1()}function B1(){return new Wd(e=>e.toString(),(e,t)=>e.isEqual(t))}const K_e=new ii(Oe.comparator);function vt(...e){let t=K_e;for(const n of e)t=t.add(n);return t}const Z_e=new ii(gt);function q_e(){return Z_e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f5(t)?"-0":t}}function LW(e){return{integerValue:""+e}}function Q_e(e,t){return T_e(t)?LW(t):MI(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this._=void 0}}function J_e(e,t,n){return e instanceof U5?function(r,s){const o={fields:{[bW]:{stringValue:UW},[EW]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&II(s)&&(s=lE(s)),s&&(o.fields[yW]=s),{mapValue:o}}(n,t):e instanceof W0?DW(e,t):e instanceof K0?NW(e,t):function(r,s){const o=tTe(r,s),a=RD(o)+RD(r.Ie);return iw(o)&&iw(r.Ie)?LW(a):MI(r.serializer,a)}(e,t)}function eTe(e,t,n){return e instanceof W0?DW(e,t):e instanceof K0?NW(e,t):n}function tTe(e,t){return e instanceof b5?function(i){return iw(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}class U5 extends fE{}class W0 extends fE{constructor(t){super(),this.elements=t}}function DW(e,t){const n=OW(t);for(const i of e.elements)n.some(r=>ra(r,i))||n.push(i);return{arrayValue:{values:n}}}class K0 extends fE{constructor(t){super(),this.elements=t}}function NW(e,t){let n=OW(t);for(const i of e.elements)n=n.filter(r=>!ra(r,i));return{arrayValue:{values:n}}}class b5 extends fE{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function RD(e){return Rn(e.integerValue||e.doubleValue)}function OW(e){return SI(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function nTe(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof W0&&r instanceof W0||i instanceof K0&&r instanceof K0?ig(i.elements,r.elements,ra):i instanceof b5&&r instanceof b5?ra(i.Ie,r.Ie):i instanceof U5&&r instanceof U5}(e.transform,t.transform)}class _s{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new _s}static exists(t){return new _s(void 0,t)}static updateTime(t){return new _s(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ub(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class hE{}function PW(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new RI(e.key,_s.none()):new Gp(e.key,e.data,_s.none());{const n=e.data,i=Tr.empty();let r=new ii(ji.comparator);for(let s of t.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Kd(e.key,i,new Ss(r.toArray()),_s.none())}}function iTe(e,t,n){e instanceof Gp?function(r,s,o){const a=r.value.clone(),l=LD(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Kd?function(r,s,o){if(!ub(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=LD(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(FW(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function z1(e,t,n,i){return e instanceof Gp?function(s,o,a,l){if(!ub(s.precondition,o))return a;const c=s.value.clone(),u=DD(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Kd?function(s,o,a,l){if(!ub(s.precondition,o))return a;const c=DD(s.fieldTransforms,l,o),u=o.data;return u.setAll(FW(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(s,o,a){return ub(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function kD(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ig(i,r,(s,o)=>nTe(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gp extends hE{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kd extends hE{constructor(t,n,i,r,s=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FW(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function LD(e,t,n){const i=new Map;jt(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,eTe(o,a,n[r]))}return i}function DD(e,t,n){const i=new Map;for(const r of e){const s=r.transform,o=n.data.field(r.field);i.set(r.field,J_e(s,o,t))}return i}class RI extends hE{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BW extends hE{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rTe{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&iTe(s,t,i[r])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=z1(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=z1(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=kW();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=PW(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),vt())}isEqual(t){return this.batchId===t.batchId&&ig(this.mutations,t.mutations,(n,i)=>kD(n,i))&&ig(this.baseMutations,t.baseMutations,(n,i)=>kD(n,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sTe{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oTe{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn,dt;function aTe(e){switch(e){case ae.OK:return Ne();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ne()}}function zW(e){if(e===void 0)return bl("GRPC error has no .code"),ae.UNKNOWN;switch(e){case Fn.OK:return ae.OK;case Fn.CANCELLED:return ae.CANCELLED;case Fn.UNKNOWN:return ae.UNKNOWN;case Fn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Fn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Fn.INTERNAL:return ae.INTERNAL;case Fn.UNAVAILABLE:return ae.UNAVAILABLE;case Fn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Fn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Fn.NOT_FOUND:return ae.NOT_FOUND;case Fn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Fn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Fn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Fn.ABORTED:return ae.ABORTED;case Fn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Fn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Fn.DATA_LOSS:return ae.DATA_LOSS;default:return Ne()}}(dt=Fn||(Fn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lTe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cTe=new Mc([4294967295,4294967295],0);function ND(e){const t=lTe().encode(e),n=new oW;return n.update(t),new Uint8Array(n.digest())}function OD(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Mc([n,i],0),new Mc([r,s],0)]}class kI{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qm(`Invalid padding: ${n}`);if(i<0)throw new qm(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new qm(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new qm(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*t.length-n,this.de=Mc.fromNumber(this.Ee)}Ae(t,n,i){let r=t.add(n.multiply(Mc.fromNumber(i)));return r.compare(cTe)===1&&(r=new Mc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const n=ND(t),[i,r]=OD(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(t,n,i){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new kI(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ee===0)return;const n=ND(t),[i,r]=OD(n);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class qm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(t,n,i,r,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const r=new Map;return r.set(t,Xp.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new gE(Fe.min(),r,new Dn(gt),Qc(),vt())}}class Xp{constructor(t,n,i,r,s){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new Xp(i,n,vt(),vt(),vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t,n,i,r){this.me=t,this.removedTargetIds=n,this.key=i,this.fe=r}}class HW{constructor(t,n){this.targetId=t,this.ge=n}}class VW{constructor(t,n,i=Ni.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}}class PD{constructor(){this.pe=0,this.ye=FD(),this.we=Ni.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=vt(),n=vt(),i=vt();return this.ye.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ne()}}),new Xp(this.we,this.Se,t,n,i)}Me(){this.be=!1,this.ye=FD()}xe(t,n){this.be=!0,this.ye=this.ye.insert(t,n)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,jt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class uTe{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Qc(),this.$e=f2(),this.Ke=f2(),this.Ue=new Dn(gt)}We(t){for(const n of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(n,t.fe):this.ze(n,t.key,t.fe);for(const n of t.removedTargetIds)this.ze(n,t.key,t.fe)}je(t){this.forEachTarget(t,n=>{const i=this.He(n);switch(t.state){case 0:this.Je(n)&&i.Ce(t.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(t.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(t.resumeToken));break;default:Ne()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(t){const n=t.targetId,i=t.ge.count,r=this.Xe(n);if(r){const s=r.target;if(sw(s))if(i===0){const o=new Oe(s.path);this.ze(n,o,Ui.newNoDocument(o,Fe.min()))}else jt(i===1);else{const o=this.et(n);if(o!==i){const a=this.tt(t),l=a?this.nt(a,t,o):1;if(l!==0){this.Ye(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,c)}}}}}tt(t){const n=t.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Zc(i).toUint8Array()}catch(l){if(l instanceof pW)return ng("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new kI(o,r,s)}catch(l){return ng(l instanceof qm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(t,n,i){return n.ge.count===i-this.st(t,n.targetId)?0:2}st(t,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.ze(n,s,null),r++)}),r}ot(t){const n=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&sw(a.target)){const l=new Oe(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Ui.newNoDocument(l,t))}s.ve&&(n.set(o,s.Fe()),s.Me())}});let i=vt();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(t));const r=new gE(t,n,this.Ue,this.Qe,i);return this.Qe=Qc(),this.$e=f2(),this.Ke=f2(),this.Ue=new Dn(gt),r}Ge(t,n){if(!this.Je(t))return;const i=this.ut(t,n.key)?2:0;this.He(t).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(t)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(t))}ze(t,n,i){if(!this.Je(t))return;const r=this.He(t);this.ut(t,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(t)),this.Ke=this.Ke.insert(n,this.ct(n).add(t)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(t){this.qe.delete(t)}et(t){const n=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let n=this.qe.get(t);return n||(n=new PD,this.qe.set(t,n)),n}ct(t){let n=this.Ke.get(t);return n||(n=new ii(gt),this.Ke=this.Ke.insert(t,n)),n}_t(t){let n=this.$e.get(t);return n||(n=new ii(gt),this.$e=this.$e.insert(t,n)),n}Je(t){const n=this.Xe(t)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",t),n}Xe(t){const n=this.qe.get(t);return n&&n.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new PD),this.ke.getRemoteKeysForTarget(t).forEach(n=>{this.ze(t,n,null)})}ut(t,n){return this.ke.getRemoteKeysForTarget(t).has(n)}}function f2(){return new Dn(Oe.comparator)}function FD(){return new Dn(Oe.comparator)}const dTe={asc:"ASCENDING",desc:"DESCENDING"},fTe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hTe={and:"AND",or:"OR"};class gTe{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function aw(e,t){return e.useProto3Json||$p(t)?t:{value:t}}function y5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $W(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mTe(e,t){return y5(e,t.toTimestamp())}function el(e){return jt(!!e),Fe.fromTimestamp(function(n){const i=Kc(n);return new wi(i.seconds,i.nanos)}(e))}function LI(e,t){return lw(e,t).canonicalString()}function lw(e,t){const n=function(r){return new cn(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function GW(e){const t=cn.fromString(e);return jt(KW(t)),t}function E5(e,t){return LI(e.databaseId,t.path)}function H1(e,t){const n=GW(t);if(n.get(1)!==e.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Oe(jW(n))}function XW(e,t){return LI(e.databaseId,t)}function pTe(e){const t=GW(e);return t.length===4?cn.emptyPath():jW(t)}function BD(e){return new cn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jW(e){return jt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function zD(e,t,n){return{name:E5(e,t),fields:n.value.mapValue.fields}}function UTe(e,t){return"found"in t?function(i,r){jt(!!r.found),r.found.name,r.found.updateTime;const s=H1(i,r.found.name),o=el(r.found.updateTime),a=r.found.createTime?el(r.found.createTime):Fe.min(),l=new Tr({mapValue:{fields:r.found.fields}});return Ui.newFoundDocument(s,o,a,l)}(e,t):"missing"in t?function(i,r){jt(!!r.missing),jt(!!r.readTime);const s=H1(i,r.missing),o=el(r.readTime);return Ui.newNoDocument(s,o)}(e,t):Ne()}function bTe(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ne()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(jt(u===void 0||typeof u=="string"),Ni.fromBase64String(u||"")):(jt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Ni.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){const u=c.code===void 0?ae.UNKNOWN:zW(c.code);return new Ae(u,c.message||"")}(o);n=new VW(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=H1(e,i.document.name),s=el(i.document.updateTime),o=i.document.createTime?el(i.document.createTime):Fe.min(),a=new Tr({mapValue:{fields:i.document.fields}}),l=Ui.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new db(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=H1(e,i.document),s=i.readTime?el(i.readTime):Fe.min(),o=Ui.newNoDocument(r,s),a=i.removedTargetIds||[];n=new db([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=H1(e,i.document),s=i.removedTargetIds||[];n=new db([],s,r,null)}else{if(!("filter"in t))return Ne();{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new oTe(r,s),a=i.targetId;n=new HW(a,o)}}return n}function yTe(e,t){let n;if(t instanceof Gp)n={update:zD(e,t.key,t.value)};else if(t instanceof RI)n={delete:E5(e,t.key)};else if(t instanceof Kd)n={update:zD(e,t.key,t.data),updateMask:xTe(t.fieldMask)};else{if(!(t instanceof BW))return Ne();n={verify:E5(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof U5)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof W0)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof K0)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof b5)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ne()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:mTe(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ne()}(e,t.precondition)),n}function ETe(e,t){return{documents:[XW(e,t.path)]}}function vTe(e,t){const n={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=XW(e,r);const s=function(c){if(c.length!==0)return WW(sa.create(c,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:If(f.field),direction:TTe(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=aw(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{ht:n,parent:r}}function wTe(e){let t=pTe(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){jt(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=YW(d);return f instanceof sa&&IW(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(m){return new p5(Sf(m.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,$p(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new m5(h,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,h=d.values||[];return new m5(h,f)}(n.endAt)),V_e(t,r,o,s,a,"F",l,c)}function _Te(e,t){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function YW(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Sf(n.unaryFilter.field);return ni.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Sf(n.unaryFilter.field);return ni.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Sf(n.unaryFilter.field);return ni.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Sf(n.unaryFilter.field);return ni.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(e):e.fieldFilter!==void 0?function(n){return ni.create(Sf(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return sa.create(n.compositeFilter.filters.map(i=>YW(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(e):Ne()}function TTe(e){return dTe[e]}function ITe(e){return fTe[e]}function STe(e){return hTe[e]}function If(e){return{fieldPath:e.canonicalString()}}function Sf(e){return ji.fromServerFormat(e.fieldPath)}function WW(e){return e instanceof ni?function(n){if(n.op==="=="){if(SD(n.value))return{unaryFilter:{field:If(n.field),op:"IS_NAN"}};if(ID(n.value))return{unaryFilter:{field:If(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(SD(n.value))return{unaryFilter:{field:If(n.field),op:"IS_NOT_NAN"}};if(ID(n.value))return{unaryFilter:{field:If(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:If(n.field),op:ITe(n.op),value:n.value}}}(e):e instanceof sa?function(n){const i=n.getFilters().map(r=>WW(r));return i.length===1?i[0]:{compositeFilter:{op:STe(n.op),filters:i}}}(e):Ne()}function xTe(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function KW(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(t,n,i,r,s=Fe.min(),o=Fe.min(),a=Ni.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new uc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CTe{constructor(t){this.Tt=t}}function ATe(e){const t=wTe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ow(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MTe{constructor(){this.Tn=new RTe}addToCollectionParentIndex(t,n){return this.Tn.add(n),se.resolve()}getCollectionParents(t,n){return se.resolve(this.Tn.getEntries(n))}addFieldIndex(t,n){return se.resolve()}deleteFieldIndex(t,n){return se.resolve()}deleteAllFieldIndexes(t){return se.resolve()}createTargetIndexes(t,n){return se.resolve()}getDocumentsMatchingTarget(t,n){return se.resolve(null)}getIndexType(t,n){return se.resolve(0)}getFieldIndexes(t,n){return se.resolve([])}getNextCollectionGroupToUpdate(t){return se.resolve(null)}getMinOffset(t,n){return se.resolve(Wc.min())}getMinOffsetFromCollectionGroup(t,n){return se.resolve(Wc.min())}updateCollectionGroup(t,n,i){return se.resolve()}updateIndexEntries(t,n){return se.resolve()}}class RTe{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new ii(cn.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(t){const n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new ii(cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZW=41943040;class _r{static withCacheSize(t){return new _r(t,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(ZW,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new og(0)}static Un(){return new og(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="LruGarbageCollector",kTe=1048576;function $D([e,t],[n,i]){const r=gt(e,n);return r===0?gt(t,i):r}class LTe{constructor(t){this.Hn=t,this.buffer=new ii($D),this.Jn=0}Yn(){return++this.Jn}Zn(t){const n=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();$D(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class DTe{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){_e(VD,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dg(n)?_e(VD,"Ignoring IndexedDB error during garbage collection: ",n):await oE(n)}await this.er(3e5)})}}class NTe{constructor(t,n){this.tr=t,this.params=n}calculateTargetCount(t,n){return this.tr.nr(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return se.resolve(aE.ae);const i=new LTe(n);return this.tr.forEachTarget(t,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.tr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.tr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(HD)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HD):this.ir(t,n))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,n){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),_f()<=ht.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}}function OTe(e,t){return new NTe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PTe{constructor(){this.changes=new Wd(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ui.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FTe{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BTe{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&z1(i.mutation,r,Ss.empty(),wi.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,vt()).next(()=>i))}getLocalViewOfDocuments(t,n,i=vt()){const r=Vu();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(s=>{let o=Zm();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const i=Vu();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,vt()))}populateOverlays(t,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,r){let s=Qc();const o=B1(),a=function(){return B1()}();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Kd)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),z1(u.mutation,c,u.mutation.getFieldMask(),wi.now())):o.set(c.key,Ss.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new FTe(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const i=B1();let r=new Dn((o,a)=>o-a),s=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Ss.empty();u=a.applyToLocalView(c,u),i.set(l,u);const d=(r.get(a.batchId)||vt()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=kW();u.forEach(f=>{if(!s.has(f)){const h=PW(n.get(f),i.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return se.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(o){return Oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):$_e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-s.size):se.resolve(Vu());let a=G0,l=s;return o.next(c=>se.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?se.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,vt())).next(u=>({batchId:a,changes:W_e(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Oe(n)).next(i=>{let r=Zm();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){const s=n.collectionGroup;let o=Zm();return this.indexManager.getCollectionParents(t,s).next(a=>se.forEach(a,l=>{const c=function(d,f){return new cE(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ui.newInvalidDocument(u)))});let a=Zm();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&z1(u.mutation,c,Ss.empty(),wi.now()),dE(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zTe{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,n){return se.resolve(this.dr.get(n))}saveBundleMetadata(t,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:el(r.createTime)}}(n)),se.resolve()}getNamedQuery(t,n){return se.resolve(this.Ar.get(n))}saveNamedQuery(t,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:ATe(r.bundledQuery),readTime:el(r.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HTe{constructor(){this.overlays=new Dn(Oe.comparator),this.Rr=new Map}getOverlay(t,n){return se.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Vu();return se.forEach(n,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,s)=>{this.Et(t,n,s)}),se.resolve()}removeOverlaysForBatchId(t,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),se.resolve()}getOverlaysForCollection(t,n,i){const r=Vu(),s=n.length+1,o=new Oe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return se.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let s=new Dn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Vu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Vu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return se.resolve(a)}Et(t,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new sTe(n,i));let s=this.Rr.get(n);s===void 0&&(s=vt(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VTe{constructor(){this.sessionToken=Ni.EMPTY_BYTE_STRING}getSessionToken(t){return se.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.Vr=new ii(hi.mr),this.gr=new ii(hi.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,n){const i=new hi(t,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.wr(new hi(t,n))}Sr(t,n){t.forEach(i=>this.removeReference(i,n))}br(t){const n=new Oe(new cn([])),i=new hi(n,t),r=new hi(n,t+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const n=new Oe(new cn([])),i=new hi(n,t),r=new hi(n,t+1);let s=vt();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new hi(t,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class hi{constructor(t,n){this.key=t,this.Cr=n}static mr(t,n){return Oe.comparator(t.key,n.key)||gt(t.Cr,n.Cr)}static pr(t,n){return gt(t.Cr,n.Cr)||Oe.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Te{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new ii(hi.mr)}checkEmpty(t){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rTe(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new hi(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return se.resolve(o)}lookupMutationBatch(t,n){return se.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?__e:this.Fr-1)}getAllMutationBatches(t){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new hi(n,0),r=new hi(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new ii(gt);return n.forEach(r=>{const s=new hi(r,0),o=new hi(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),se.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,r=i.length+1;let s=i;Oe.isDocumentKey(s)||(s=s.child(""));const o=new hi(new Oe(s),0);let a=new ii(gt);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),se.resolve(this.Br(a))}Br(t){const n=[];return t.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){jt(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return se.forEach(n.mutations,r=>{const s=new hi(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=i})}qn(t){}containsKey(t,n){const i=new hi(n,0),r=this.Mr.firstAfterOrEqual(i);return se.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,se.resolve()}Lr(t,n){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const n=this.Nr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GTe{constructor(t){this.kr=t,this.docs=function(){return new Dn(Oe.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():Ui.newInvalidDocument(n))}getEntries(t,n){let i=Qc();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ui.newInvalidDocument(r))}),se.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let s=Qc();const o=n.path,a=new Oe(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||y_e(b_e(u),i)<=0||(r.has(u.key)||dE(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return se.resolve(s)}getAllFromCollectionGroup(t,n,i,r){Ne()}qr(t,n){return se.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new XTe(this)}getSize(t){return se.resolve(this.size)}}class XTe extends PTe{constructor(t){super(),this.Ir=t}applyChanges(t){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(i)}),se.waitFor(n)}getFromCache(t,n){return this.Ir.getEntry(t,n)}getAllFromCache(t,n){return this.Ir.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jTe{constructor(t){this.persistence=t,this.Qr=new Wd(n=>xI(n),CI),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new DI,this.targetCount=0,this.Ur=og.Kn()}forEachTarget(t,n){return this.Qr.forEach((i,r)=>n(r)),se.resolve()}getLastRemoteSnapshotVersion(t){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return se.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),se.resolve()}zn(t){this.Qr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Ur=new og(n),this.highestTargetId=n),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,n){return this.zn(n),this.targetCount+=1,se.resolve()}updateTargetData(t,n){return this.zn(n),se.resolve()}removeTargetData(t,n){return this.Qr.delete(n.target),this.Kr.br(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(t,n,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),se.waitFor(s).next(()=>r)}getTargetCount(t){return se.resolve(this.targetCount)}getTargetData(t,n){const i=this.Qr.get(n)||null;return se.resolve(i)}addMatchingKeys(t,n,i){return this.Kr.yr(n,i),se.resolve()}removeMatchingKeys(t,n,i){this.Kr.Sr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),se.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Kr.br(n),se.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Kr.vr(n);return se.resolve(i)}containsKey(t,n){return se.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(t,n){this.Wr={},this.overlays={},this.Gr=new aE(0),this.zr=!1,this.zr=!0,this.jr=new VTe,this.referenceDelegate=t(this),this.Hr=new jTe(this),this.indexManager=new MTe,this.remoteDocumentCache=function(r){return new GTe(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new CTe(n),this.Yr=new zTe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new HTe,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Wr[t.toKey()];return i||(i=new $Te(n,this.referenceDelegate),this.Wr[t.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,n,i){_e("MemoryPersistence","Starting transaction:",t);const r=new YTe(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(t,n){return se.or(Object.values(this.Wr).map(i=>()=>i.containsKey(t,n)))}}class YTe extends v_e{constructor(t){super(),this.currentSequenceNumber=t}}class NI{constructor(t){this.persistence=t,this.ti=new DI,this.ni=null}static ri(t){return new NI(t)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(t,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),se.resolve()}removeReference(t,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),se.resolve()}markPotentiallyOrphaned(t,n){return this.ii.add(n.toString()),se.resolve()}removeTarget(t,n){this.ti.br(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(t,n))}Zr(){this.ni=new Set}Xr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.ii,i=>{const r=Oe.fromPath(i);return this.si(t,r).next(s=>{s||n.removeEntry(r,Fe.min())})}).next(()=>(this.ni=null,n.apply(t)))}updateLimboDocument(t,n){return this.si(t,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(t){return 0}si(t,n){return se.or([()=>se.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.ei(t,n)])}}class v5{constructor(t,n){this.persistence=t,this.oi=new Wd(i=>I_e(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=OTe(this,n)}static ri(t,n){return new v5(t,n)}Zr(){}Xr(t){return se.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}nr(t){const n=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}sr(t){let n=0;return this.rr(t,i=>{n++}).next(()=>n)}rr(t,n){return se.forEach(this.oi,(i,r)=>this.ar(t,i,r).next(s=>s?se.resolve():n(r)))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(t,o=>this.ar(t,o,n).next(a=>{a||(i++,s.removeEntry(o,Fe.min()))})).next(()=>s.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,n){return this.oi.set(n,t.currentSequenceNumber),se.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),se.resolve()}removeReference(t,n,i){return this.oi.set(i,t.currentSequenceNumber),se.resolve()}updateLimboDocument(t,n){return this.oi.set(n,t.currentSequenceNumber),se.resolve()}Jr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=cb(t.data.value)),n}ar(t,n,i){return se.or([()=>this.persistence.ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const r=this.oi.get(n);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(t,n){let i=vt(),r=vt();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new OI(t,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WTe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KTe{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Ywe()?8:w_e(Xwe())>0?6:4}()}initialize(t,n){this.ns=t,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(t,n,i,r){const s={result:null};return this.rs(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(t,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new WTe;return this._s(t,n,o).next(a=>{if(s.result=a,this.Xi)return this.us(t,n,o,a.size)})}).next(()=>s.result)}us(t,n,i,r){return i.documentReadCount<this.es?(_f()<=ht.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Tf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),se.resolve()):(_f()<=ht.DEBUG&&_e("QueryEngine","Query:",Tf(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(_f()<=ht.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Tf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jo(n))):se.resolve())}rs(t,n){if(MD(n))return se.resolve(null);let i=jo(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ow(n,null,"F"),i=jo(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=vt(...s);return this.ns.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const c=this.cs(n,a);return this.ls(n,c,o,l.readTime)?this.rs(t,ow(n,null,"F")):this.hs(t,c,n,l)}))})))}ss(t,n,i,r){return MD(n)||r.isEqual(Fe.min())?se.resolve(null):this.ns.getDocuments(t,i).next(s=>{const o=this.cs(n,s);return this.ls(n,o,i,r)?se.resolve(null):(_f()<=ht.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tf(n)),this.hs(t,o,n,U_e(r,G0)).next(a=>a))})}cs(t,n){let i=new ii(MW(t));return n.forEach((r,s)=>{dE(t,s)&&(i=i.add(s))}),i}ls(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(t,n,i){return _f()<=ht.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Tf(n)),this.ns.getDocumentsMatchingQuery(t,n,Wc.min(),i)}hs(t,n,i,r){return this.ns.getDocumentsMatchingQuery(t,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="LocalStore",ZTe=3e8;class qTe{constructor(t,n,i,r){this.persistence=t,this.Ps=n,this.serializer=r,this.Ts=new Dn(gt),this.Is=new Wd(s=>xI(s),CI),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(i)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new BTe(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ts))}}function QTe(e,t,n,i){return new qTe(e,t,n,i)}async function QW(e,t){const n=rt(e);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(t),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=vt();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function JW(e){const t=rt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Hr.getLastRemoteSnapshotVersion(n))}function JTe(e,t){const n=rt(e),i=t.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const a=[];t.targetChanges.forEach((u,d)=>{const f=r.get(d);if(!f)return;a.push(n.Hr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Hr.addMatchingKeys(s,u.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Ni.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):u.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(u.resumeToken,i)),r=r.insert(d,h),function(p,U,b){return p.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=ZTe?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,h,u)&&a.push(n.Hr.updateTargetData(s,h))});let l=Qc(),c=vt();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(eIe(s,o,t.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Fe.min())){const u=n.Hr.getLastRemoteSnapshotVersion(s).next(d=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return se.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ts=r,s))}function eIe(e,t,n){let i=vt(),r=vt();return n.forEach(s=>i=i.add(s)),t.getEntries(e,i).next(s=>{let o=Qc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Fe.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):_e(PI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function tIe(e,t){const n=rt(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,t).next(s=>s?(r=s,se.resolve(r)):n.Hr.allocateTargetId(i).next(o=>(r=new uc(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(t,i.targetId)),i})}async function cw(e,t,n){const i=rt(e),r=i.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Dg(o))throw o;_e(PI,`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ts=i.Ts.remove(t),i.Is.delete(r.target)}function GD(e,t,n){const i=rt(e);let r=Fe.min(),s=vt();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=rt(l),f=d.Is.get(u);return f!==void 0?se.resolve(d.Ts.get(f)):d.Hr.getTargetData(c,u)}(i,o,jo(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,t,n?r:Fe.min(),n?s:vt())).next(a=>(nIe(i,X_e(t),a),{documents:a,gs:s})))}function nIe(e,t,n){let i=e.Es.get(t)||Fe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),e.Es.set(t,i)}class XD{constructor(){this.activeTargetIds=q_e()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class iIe{constructor(){this.ho=new XD,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,n,i){this.Po[t]=n}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new XD,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rIe{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="ConnectivityMonitor";class YD{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_e(jD,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){_e(jD,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h2=null;function uw(){return h2===null?h2=function(){return 268435456+Math.round(2147483648*Math.random())}():h2++,"0x"+h2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="RestConnection",sIe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oIe{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===h5?`project_id=${i}`:`project_id=${i}&database_id=${r}`}So(t,n,i,r,s){const o=uw(),a=this.bo(t,n.toUriEncodedString());_e(i7,`Sending RPC '${t}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(t,a,l,i).then(c=>(_e(i7,`Received RPC '${t}' ${o}: `,c),c),c=>{throw ng(i7,`RPC '${t}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(t,n,i,r,s,o){return this.So(t,n,i,r,s)}Do(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lg}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}bo(t,n){const i=sIe[t];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aIe{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="WebChannelConnection";class lIe extends oIe{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,n,i,r){const s=uw();return new Promise((o,a)=>{const l=new aW;l.setWithCredentials(!0),l.listenOnce(lW.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lb.NO_ERROR:const u=l.getResponseJson();_e(zi,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(u)),o(u);break;case lb.TIMEOUT:_e(zi,`RPC '${t}' ${s} timed out`),a(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case lb.HTTP_ERROR:const d=l.getStatus();if(_e(zi,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const m=function(U){const b=U.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(b)>=0?b:ae.UNKNOWN}(h.status);a(new Ae(m,h.message))}else a(new Ae(ae.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{_e(zi,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);_e(zi,`RPC '${t}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Wo(t,n,i){const r=uw(),s=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=dW(),a=uW(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");_e(zi,`Creating RPC '${t}' stream ${r}: ${u}`,l);const d=o.createWebChannel(u,l);let f=!1,h=!1;const m=new aIe({Fo:U=>{h?_e(zi,`Not sending because RPC '${t}' stream ${r} is closed:`,U):(f||(_e(zi,`Opening RPC '${t}' stream ${r} transport.`),d.open(),f=!0),_e(zi,`RPC '${t}' stream ${r} sending:`,U),d.send(U))},Mo:()=>d.close()}),p=(U,b,y)=>{U.listen(b,w=>{try{y(w)}catch(v){setTimeout(()=>{throw v},0)}})};return p(d,Km.EventType.OPEN,()=>{h||(_e(zi,`RPC '${t}' stream ${r} transport opened.`),m.Qo())}),p(d,Km.EventType.CLOSE,()=>{h||(h=!0,_e(zi,`RPC '${t}' stream ${r} transport closed`),m.Ko())}),p(d,Km.EventType.ERROR,U=>{h||(h=!0,ng(zi,`RPC '${t}' stream ${r} transport errored:`,U),m.Ko(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),p(d,Km.EventType.MESSAGE,U=>{var b;if(!h){const y=U.data[0];jt(!!y);const w=y,v=(w==null?void 0:w.error)||((b=w[0])===null||b===void 0?void 0:b.error);if(v){_e(zi,`RPC '${t}' stream ${r} received error:`,v);const I=v.status;let x=function(A){const C=Fn[A];if(C!==void 0)return zW(C)}(I),_=v.message;x===void 0&&(x=ae.INTERNAL,_="Unknown error status: "+I+" with message "+v.message),h=!0,m.Ko(new Ae(x,_)),d.close()}else _e(zi,`RPC '${t}' stream ${r} received:`,y),m.Uo(y)}}),p(a,cW.STAT_EVENT,U=>{U.stat===tw.PROXY?_e(zi,`RPC '${t}' stream ${r} detected buffering proxy`):U.stat===tw.NOPROXY&&_e(zi,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.$o()},0),m}}function r7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(e){return new gTe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n,i=1e3,r=1.5,s=6e4){this.Ti=t,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&_e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="PersistentStream";class cIe{constructor(t,n,i,r,s,o,a,l){this.Ti=t,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new FI(t,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(bl(n.toString()),bl("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{t(()=>{const r=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(t,n){const i=this.R_(this.i_);this.stream=this.f_(t,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return _e(WD,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return n=>{this.Ti.enqueueAndForget(()=>this.i_===t?n():(_e(WD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uIe extends cIe{constructor(t,n,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}f_(t,n){return this.connection.Wo("Listen",t,n)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const n=bTe(this.serializer,t),i=function(s){if(!("targetChange"in s))return Fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?el(o.readTime):Fe.min()}(t);return this.listener.p_(n,i)}y_(t){const n={};n.database=BD(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=sw(l)?{documents:ETe(s,l)}:{query:vTe(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$W(s,o.resumeToken);const c=aw(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Fe.min())>0){a.readTime=y5(s,o.snapshotVersion.toTimestamp());const c=aw(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);const i=_Te(this.serializer,t);i&&(n.labels=i),this.I_(n)}w_(t){const n={};n.database=BD(this.serializer),n.removeTarget=t,this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dIe{}class fIe extends dIe{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(t,lw(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ae(ae.UNKNOWN,s.toString())})}Co(t,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(t,lw(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class hIe{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(bl(n),this.N_=!1):_e("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="RemoteStore";class gIe{constructor(t,n,i,r,s){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{Yp(this)&&(_e(ag,"Restarting streams for network reachability change."),await async function(l){const c=rt(l);c.W_.add(4),await jp(c),c.j_.set("Unknown"),c.W_.delete(4),await pE(c)}(this))})}),this.j_=new hIe(i,r)}}async function pE(e){if(Yp(e))for(const t of e.G_)await t(!0)}async function jp(e){for(const t of e.G_)await t(!1)}function eK(e,t){const n=rt(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),VI(n)?HI(n):Ng(n).c_()&&zI(n,t))}function BI(e,t){const n=rt(e),i=Ng(n);n.U_.delete(t),i.c_()&&tK(n,t),n.U_.size===0&&(i.c_()?i.P_():Yp(n)&&n.j_.set("Unknown"))}function zI(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fe.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ng(e).y_(t)}function tK(e,t){e.H_.Ne(t),Ng(e).w_(t)}function HI(e){e.H_=new uTe({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Ng(e).start(),e.j_.B_()}function VI(e){return Yp(e)&&!Ng(e).u_()&&e.U_.size>0}function Yp(e){return rt(e).W_.size===0}function nK(e){e.H_=void 0}async function mIe(e){e.j_.set("Online")}async function pIe(e){e.U_.forEach((t,n)=>{zI(e,t)})}async function UIe(e,t){nK(e),VI(e)?(e.j_.q_(t),HI(e)):e.j_.set("Unknown")}async function bIe(e,t,n){if(e.j_.set("Online"),t instanceof VW&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(e,t)}catch(i){_e(ag,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await KD(e,i)}else if(t instanceof db?e.H_.We(t):t instanceof HW?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Fe.min()))try{const i=await JW(e.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Ni.EMPTY_BYTE_STRING,u.snapshotVersion)),tK(s,l);const d=new uc(u.target,l,c,u.sequenceNumber);zI(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(i){_e(ag,"Failed to raise snapshot:",i),await KD(e,i)}}async function KD(e,t,n){if(!Dg(t))throw t;e.W_.add(1),await jp(e),e.j_.set("Offline"),n||(n=()=>JW(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{_e(ag,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await pE(e)})}async function ZD(e,t){const n=rt(e);n.asyncQueue.verifyOperationInProgress(),_e(ag,"RemoteStore received new credentials");const i=Yp(n);n.W_.add(3),await jp(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await pE(n)}async function yIe(e,t){const n=rt(e);t?(n.W_.delete(2),await pE(n)):t||(n.W_.add(2),await jp(n),n.j_.set("Unknown"))}function Ng(e){return e.J_||(e.J_=function(n,i,r){const s=rt(n);return s.M_(),new uIe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(e.datastore,e.asyncQueue,{xo:mIe.bind(null,e),No:pIe.bind(null,e),Lo:UIe.bind(null,e),p_:bIe.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),VI(e)?HI(e):e.j_.set("Unknown")):(await e.J_.stop(),nK(e))})),e.J_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t,n,i,r,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Rc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,s){const o=Date.now()+i,a=new $I(t,n,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iK(e,t){if(bl("AsyncQueue",`${t}: ${e}`),Dg(e))return new Ae(ae.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{static emptySet(t){return new vh(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Oe.comparator(n.key,i.key):(n,i)=>Oe.comparator(n.key,i.key),this.keyedMap=Zm(),this.sortedSet=new Dn(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof vh)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new vh;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Z_=new Dn(Oe.comparator)}track(t){const n=t.doc.key,i=this.Z_.get(n);i?t.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,t):t.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.Z_=this.Z_.remove(n):t.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:t.doc}):Ne():this.Z_=this.Z_.insert(n,t)}X_(){const t=[];return this.Z_.inorderTraversal((n,i)=>{t.push(i)}),t}}class lg{constructor(t,n,i,r,s,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new lg(t,n,vh.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&uE(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EIe{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class vIe{constructor(){this.queries=QD(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=rt(n),s=r.queries;r.queries=QD(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new Ae(ae.ABORTED,"Firestore shutting down"))}}function QD(){return new Wd(e=>AW(e),uE)}async function wIe(e,t){const n=rt(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.na()&&t.ra()&&(i=2):(s=new EIe,i=t.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=iK(o,`Initialization of query '${Tf(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&GI(n)}async function _Ie(e,t){const n=rt(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const o=s.ta.indexOf(t);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=t.ra()?0:1:!s.na()&&t.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function TIe(e,t){const n=rt(e);let i=!1;for(const r of t){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&GI(n)}function IIe(e,t,n){const i=rt(e),r=i.queries.get(t);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(t)}function GI(e){e.ia.forEach(t=>{t.next()})}var dw,JD;(JD=dw||(dw={}))._a="default",JD.Cache="cache";class SIe{constructor(t,n,i){this.query=t,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new lg(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ua?this.la(t)&&(this.aa.next(t),n=!0):this.ha(t,this.onlineState)&&(this.Pa(t),n=!0),this.ca=t,n}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),n=!0),n}ha(t,n){if(!t.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}la(t){if(t.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(t){t=lg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==dw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(t){this.key=t}}class sK{constructor(t){this.key=t}}class xIe{constructor(t,n){this.query=t,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=vt(),this.mutatedKeys=vt(),this.ya=MW(t),this.wa=new vh(this.ya)}get Sa(){return this.fa}ba(t,n){const i=n?n.Da:new qD,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{const f=r.get(u),h=dE(this.query,d)?d:null,m=!!f&&this.mutatedKeys.has(f.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let U=!1;f&&h?f.data.isEqual(h.data)?m!==p&&(i.track({type:3,doc:h}),U=!0):this.va(f,h)||(i.track({type:2,doc:h}),U=!0,(l&&this.ya(h,l)>0||c&&this.ya(h,c)<0)&&(a=!0)):!f&&h?(i.track({type:0,doc:h}),U=!0):f&&!h&&(i.track({type:1,doc:f}),U=!0,(l||c)&&(a=!0)),U&&(h?(o=o.add(h),s=p?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){const s=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const o=t.Da.X_();o.sort((u,d)=>function(h,m){const p=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return p(h)-p(m)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(i),r=r!=null&&r;const a=n&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new lg(this.query,t.wa,s,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new qD,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=vt(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return t.forEach(i=>{this.pa.has(i)||n.push(new sK(i))}),this.pa.forEach(i=>{t.has(i)||n.push(new rK(i))}),n}Oa(t){this.fa=t.gs,this.pa=vt();const n=this.ba(t.documents);return this.applyChanges(n,!0)}Na(){return lg.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const XI="SyncEngine";class CIe{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class AIe{constructor(t){this.key=t,this.Ba=!1}}class MIe{constructor(t,n,i,r,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Wd(a=>AW(a),uE),this.qa=new Map,this.Qa=new Set,this.$a=new Dn(Oe.comparator),this.Ka=new Map,this.Ua=new DI,this.Wa={},this.Ga=new Map,this.za=og.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function RIe(e,t,n=!0){const i=uK(e);let r;const s=i.ka.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await oK(i,t,n,!0),r}async function kIe(e,t){const n=uK(e);await oK(n,t,!0,!1)}async function oK(e,t,n,i){const r=await tIe(e.localStore,jo(t)),s=r.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await LIe(e,t,s,o==="current",r.resumeToken)),e.isPrimaryClient&&n&&eK(e.remoteStore,r),a}async function LIe(e,t,n,i,r){e.Ha=(d,f,h)=>async function(p,U,b,y){let w=U.view.ba(b);w.ls&&(w=await GD(p.localStore,U.query,!1).then(({documents:_})=>U.view.ba(_,w)));const v=y&&y.targetChanges.get(U.targetId),I=y&&y.targetMismatches.get(U.targetId)!=null,x=U.view.applyChanges(w,p.isPrimaryClient,v,I);return tN(p,U.targetId,x.Ma),x.snapshot}(e,d,f,h);const s=await GD(e.localStore,t,!0),o=new xIe(t,s.gs),a=o.ba(s.documents),l=Xp.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=o.applyChanges(a,e.isPrimaryClient,l);tN(e,n,c.Ma);const u=new CIe(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}async function DIe(e,t,n){const i=rt(e),r=i.ka.get(t),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!uE(o,t))),void i.ka.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await cw(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&BI(i.remoteStore,r.targetId),fw(i,r.targetId)}).catch(oE)):(fw(i,r.targetId),await cw(i.localStore,r.targetId,!0))}async function NIe(e,t){const n=rt(e),i=n.ka.get(t),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),BI(n.remoteStore,i.targetId))}async function aK(e,t){const n=rt(e);try{const i=await JTe(n.localStore,t);t.targetChanges.forEach((r,s)=>{const o=n.Ka.get(s);o&&(jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?jt(o.Ba):r.removedDocuments.size>0&&(jt(o.Ba),o.Ba=!1))}),await cK(n,i,t)}catch(i){await oE(i)}}function eN(e,t,n){const i=rt(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=rt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.ta)f.sa(a)&&(c=!0)}),c&&GI(l)}(i.eventManager,t),r.length&&i.La.p_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function OIe(e,t,n){const i=rt(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ka.get(t),s=r&&r.key;if(s){let o=new Dn(Oe.comparator);o=o.insert(s,Ui.newNoDocument(s,Fe.min()));const a=vt().add(s),l=new gE(Fe.min(),new Map,new Dn(gt),o,a);await aK(i,l),i.$a=i.$a.remove(s),i.Ka.delete(t),jI(i)}else await cw(i.localStore,t,!1).then(()=>fw(i,t,n)).catch(oE)}function fw(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.qa.get(t))e.ka.delete(i),n&&e.La.Ja(i,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.br(t).forEach(i=>{e.Ua.containsKey(i)||lK(e,i)})}function lK(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);n!==null&&(BI(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),jI(e))}function tN(e,t,n){for(const i of n)i instanceof rK?(e.Ua.addReference(i.key,t),PIe(e,i)):i instanceof sK?(_e(XI,"Document no longer in limbo: "+i.key),e.Ua.removeReference(i.key,t),e.Ua.containsKey(i.key)||lK(e,i.key)):Ne()}function PIe(e,t){const n=t.key,i=n.path.canonicalString();e.$a.get(n)||e.Qa.has(i)||(_e(XI,"New document in limbo: "+n),e.Qa.add(i),jI(e))}function jI(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Oe(cn.fromString(t)),i=e.za.next();e.Ka.set(i,new AIe(n)),e.$a=e.$a.insert(n,i),eK(e.remoteStore,new uc(jo(AI(n.path)),i,"TargetPurposeLimboResolution",aE.ae))}}async function cK(e,t,n){const i=rt(e),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=OI.Yi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=rt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>se.forEach(c,f=>se.forEach(f.Hi,h=>u.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>se.forEach(f.Ji,h=>u.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Dg(d))throw d;_e(PI,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const h=u.Ts.get(f),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);u.Ts=u.Ts.insert(f,p)}}}(i.localStore,s))}async function FIe(e,t){const n=rt(e);if(!n.currentUser.isEqual(t)){_e(XI,"User change. New user:",t.toKey());const i=await QW(n.localStore,t);n.currentUser=t,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new Ae(ae.CANCELLED,o))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await cK(n,i.Rs)}}function BIe(e,t){const n=rt(e),i=n.Ka.get(t);if(i&&i.Ba)return vt().add(i.key);{let r=vt();const s=n.qa.get(t);if(!s)return r;for(const o of s){const a=n.ka.get(o);r=r.unionWith(a.view.Sa)}return r}}function uK(e){const t=rt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aK.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=BIe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=OIe.bind(null,t),t.La.p_=TIe.bind(null,t.eventManager),t.La.Ja=IIe.bind(null,t.eventManager),t}class w5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=mE(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,n){return null}nu(t,n){return null}eu(t){return QTe(this.persistence,new KTe,t.initialUser,this.serializer)}Xa(t){return new qW(NI.ri,this.serializer)}Za(t){return new iIe}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}w5.provider={build:()=>new w5};class zIe extends w5{constructor(t){super(),this.cacheSizeBytes=t}tu(t,n){jt(this.persistence.referenceDelegate instanceof v5);const i=this.persistence.referenceDelegate.garbageCollector;return new DTe(i,t.asyncQueue,n)}Xa(t){const n=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new qW(i=>v5.ri(i,n),this.serializer)}}class hw{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>eN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FIe.bind(null,this.syncEngine),await yIe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new vIe}()}createDatastore(t){const n=mE(t.databaseInfo.databaseId),i=function(s){return new lIe(s)}(t.databaseInfo);return function(s,o,a,l){return new fIe(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,s,o,a){return new gIe(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>eN(this.syncEngine,n,0),function(){return YD.D()?new YD:new rIe}())}createSyncEngine(t,n){return function(r,s,o,a,l,c,u){const d=new MIe(r,s,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(r){const s=rt(r);_e(ag,"RemoteStore shutting down."),s.W_.add(5),await jp(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hw.provider={build:()=>new hw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HIe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):bl("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VIe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(r,s){const o=rt(r),a={documents:s.map(d=>E5(o.serializer,d))},l=await o.Co("BatchGetDocuments",o.serializer.databaseId,cn.emptyPath(),a,s.length),c=new Map;l.forEach(d=>{const f=UTe(o.serializer,d);c.set(f.key.toString(),f)});const u=[];return s.forEach(d=>{const f=c.get(d.toString());jt(!!f),u.push(f)}),u}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new RI(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{const r=Oe.fromPath(i);this.mutations.push(new BW(r,this.precondition(r)))}),await async function(i,r){const s=rt(i),o={writes:r.map(a=>yTe(s.serializer,a))};await s.So("Commit",s.serializer.databaseId,cn.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw Ne();n=Fe.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){const n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(Fe.min())?_s.exists(!1):_s.updateTime(n):_s.none()}preconditionForUpdate(t){const n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(Fe.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _s.updateTime(n)}return _s.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ie{constructor(t,n,i,r,s){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=s,this.Tu=i.maxAttempts,this.a_=new FI(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new VIe(this.datastore),n=this.du(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Au(r)}))}).catch(i=>{this.Au(i)})})}du(t){try{const n=this.updateFunction(t);return!$p(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!aTe(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="FirestoreClient";class GIe{constructor(t,n,i,r,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=$i.UNAUTHENTICATED,this.clientId=hW.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{_e(Jc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(_e(Jc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=iK(n,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function s7(e,t){e.asyncQueue.verifyOperationInProgress(),_e(Jc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async r=>{i.isEqual(r)||(await QW(t.localStore,r),i=r)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function nN(e,t){e.asyncQueue.verifyOperationInProgress();const n=await XIe(e);_e(Jc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>ZD(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>ZD(t.remoteStore,r)),e._onlineComponents=t}async function XIe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){_e(Jc,"Using user provided OfflineComponentProvider");try{await s7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(r){return r.name==="FirebaseError"?r.code===ae.FAILED_PRECONDITION||r.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ng("Error using user provided cache. Falling back to memory cache: "+n),await s7(e,new w5)}}else _e(Jc,"Using default OfflineComponentProvider"),await s7(e,new zIe(void 0));return e._offlineComponents}async function dK(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(_e(Jc,"Using user provided OnlineComponentProvider"),await nN(e,e._uninitializedComponentsProvider._online)):(_e(Jc,"Using default OnlineComponentProvider"),await nN(e,new hw))),e._onlineComponents}function jIe(e){return dK(e).then(t=>t.datastore)}async function YIe(e){const t=await dK(e),n=t.eventManager;return n.onListen=RIe.bind(null,t.syncEngine),n.onUnlisten=DIe.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=kIe.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=NIe.bind(null,t.syncEngine),n}function WIe(e,t,n={}){const i=new Rc;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new HIe({next:f=>{u.su(),o.enqueueAndForget(()=>_Ie(s,d));const h=f.docs.has(a);!h&&f.fromCache?c.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?c.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new SIe(AI(a.path),u,{includeMetadataChanges:!0,Ta:!0});return wIe(s,d)}(await YIe(e),e.asyncQueue,t,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KIe(e,t,n){if(!n)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ZIe(e,t,n,i){if(t===!0&&i===!0)throw new Ae(ae.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function rN(e){if(!Oe.isDocumentKey(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function YI(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ne()}function _5(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=YI(e);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK="firestore.googleapis.com",sN=!0;class oN{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hK,this.ssl=sN}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:sN;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ZW;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<kTe)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}ZIe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fK((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ae(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class WI{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oN({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oN(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new c_e;switch(i.type){case"firstParty":return new h_e(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=iN.get(n);i&&(_e("ComponentProvider","Removing Datastore"),iN.delete(n),i.terminate())}(this),Promise.resolve()}}function qIe(e,t,n,i={}){var r;const s=(e=_5(e,WI))._getSettings(),o=`${t}:${n}`;if(s.host!==hK&&s.host!==o&&ng("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=$i.MOCK_USER;else{a=WY(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new $i(c)}e._authCredentials=new u_e(new fW(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new KI(this.firestore,t,this._query)}}class Ls{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Z0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ls(this.firestore,t,this._key)}}class Z0 extends KI{constructor(t,n,i){super(t,n,AI(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ls(this.firestore,null,new Oe(t))}withConverter(t){return new Z0(this.firestore,t,this._path)}}function gK(e,t,...n){if(e=go(e),arguments.length===1&&(t=hW.newId()),KIe("doc","path",t),e instanceof WI){const i=cn.fromString(t,...n);return rN(i),new Ls(e,null,new Oe(i))}{if(!(e instanceof Ls||e instanceof Z0))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(cn.fromString(t,...n));return rN(i),new Ls(e.firestore,e instanceof Z0?e.converter:null,new Oe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="AsyncQueue";class lN{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new FI(this,"async_queue_retry"),this.Su=()=>{const i=r7();i&&_e(aN,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=t;const n=r7();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const n=r7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Rc;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Dg(t))throw t;_e(aN,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const n=this.bu.then(()=>(this.pu=!0,t().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw bl("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.bu=n,n}enqueueAfterDelay(t,n,i){this.Du(),this.wu.indexOf(t)>-1&&(n=0);const r=$I.createAndSchedule(this,t,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const n of this.fu)if(n.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const n=this.fu.indexOf(t);this.fu.splice(n,1)}}class ZI extends WI{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new lN,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new lN(t),this._firestoreClient=void 0,await t}}}function QIe(e,t){const n=typeof e=="object"?e:iW(),i=typeof e=="string"?e:h5,r=JY(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=jY("firestore");s&&qIe(r,...s)}return r}function mK(e){if(e._terminated)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||JIe(e),e._firestoreClient}function JIe(e){var t,n,i;const r=e._freezeSettings(),s=function(a,l,c,u){return new C_e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,fK(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new GIe(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new yl(Ni.fromBase64String(t))}catch(n){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new yl(Ni.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gt(this._lat,t._lat)||gt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eSe=/^__.*__$/;class tSe{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Kd(t,this.data,this.fieldMask,n,this.fieldTransforms):new Gp(t,this.data,n,this.fieldTransforms)}}class pK{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Kd(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function UK(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class eS{constructor(t,n,i,r,s,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new eS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.$u(t),r}Ku(t){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return T5(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(UK(this.Lu)&&eSe.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class nSe{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||mE(t)}ju(t,n,i,r=!1){return new eS({Lu:t,methodName:n,zu:i,path:ji.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iSe(e){const t=e._freezeSettings(),n=mE(e._databaseId);return new nSe(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rSe(e,t,n,i,r,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,r);tS("Data must be an object, but it was:",o,i);const a=bK(i,o);let l,c;if(s.merge)l=new Ss(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=gw(t,d,n);if(!o.contains(f))throw new Ae(ae.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);EK(u,f)||u.push(f)}l=new Ss(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new tSe(new Tr(a),l,c)}class bE extends qI{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof bE}}function sSe(e,t,n,i){const r=e.ju(1,t,n);tS("Data must be an object, but it was:",r,i);const s=[],o=Tr.empty();Yd(i,(l,c)=>{const u=nS(t,l,n);c=go(c);const d=r.Ku(u);if(c instanceof bE)s.push(u);else{const f=yE(c,d);f!=null&&(s.push(u),o.set(u,f))}});const a=new Ss(s);return new pK(o,a,r.fieldTransforms)}function oSe(e,t,n,i,r,s){const o=e.ju(1,t,n),a=[gw(t,i,n)],l=[r];if(s.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(gw(t,s[f])),l.push(s[f+1]);const c=[],u=Tr.empty();for(let f=a.length-1;f>=0;--f)if(!EK(c,a[f])){const h=a[f];let m=l[f];m=go(m);const p=o.Ku(h);if(m instanceof bE)c.push(h);else{const U=yE(m,p);U!=null&&(c.push(h),u.set(h,U))}}const d=new Ss(c);return new pK(u,d,o.fieldTransforms)}function yE(e,t){if(yK(e=go(e)))return tS("Unsupported field value:",t,e),bK(e,t);if(e instanceof qI)return function(i,r){if(!UK(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=yE(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(i,r){if((i=go(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Q_e(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=wi.fromDate(i);return{timestampValue:y5(r.serializer,s)}}if(i instanceof wi){const s=new wi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:y5(r.serializer,s)}}if(i instanceof QI)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof yl)return{bytesValue:$W(r.serializer,i._byteString)};if(i instanceof Ls){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:LI(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof JI)return function(o,a){return{mapValue:{fields:{[vW]:{stringValue:wW},[g5]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return MI(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${YI(i)}`)}(e,t)}function bK(e,t){const n={};return mW(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yd(e,(i,r)=>{const s=yE(r,t.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function yK(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof wi||e instanceof QI||e instanceof yl||e instanceof Ls||e instanceof qI||e instanceof JI)}function tS(e,t,n){if(!yK(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=YI(n);throw i==="an object"?t.Wu(e+" a custom object"):t.Wu(e+" "+i)}}function gw(e,t,n){if((t=go(t))instanceof UE)return t._internalPath;if(typeof t=="string")return nS(e,t);throw T5("Field path arguments must be of type string or ",e,!1,void 0,n)}const aSe=new RegExp("[~\\*/\\[\\]]");function nS(e,t,n){if(t.search(aSe)>=0)throw T5(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new UE(...t.split("."))._internalPath}catch{throw T5(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function T5(e,t,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new Ae(ae.INVALID_ARGUMENT,a+e+l)}function EK(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(t,n,i,r,s){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ls(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new lSe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(vK("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lSe extends I5{data(){return super.data()}}function vK(e,t){return typeof t=="string"?nS(e,t):t instanceof UE?t._internalPath:t._delegate._internalPath}class wK{convertValue(t,n="none"){switch(qc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Zc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ne()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Yd(t,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(t){var n,i,r;const s=(r=(i=(n=t.fields)===null||n===void 0?void 0:n[g5].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Rn(o.doubleValue));return new JI(s)}convertGeoPoint(t){return new QI(Rn(t.latitude),Rn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":const i=lE(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(X0(t));default:return null}}convertTimestamp(t){const n=Kc(t);return new wi(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=cn.fromString(t);jt(KW(i));const r=new j0(i.get(1),i.get(3)),s=new Oe(i.popFirst(5));return r.isEqual(n)||bl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cSe(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class uSe extends wK{constructor(t){super(),this.firestore=t}convertBytes(t){return new yl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ls(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class iS extends I5{constructor(t,n,i,r,s,o){super(t,n,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new dSe(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(vK("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class dSe extends iS{data(t={}){return super.data(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fSe(e){e=_5(e,Ls);const t=_5(e.firestore,ZI);return WIe(mK(t),e._key).then(n=>hSe(t,e,n))}class TK extends wK{constructor(t){super(),this.firestore=t}convertBytes(t){return new yl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ls(this.firestore,null,n)}}function hSe(e,t,n){const i=n.docs.get(t._key),r=new TK(e);return new iS(e,r,t._key,i,new _K(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gSe={maxAttempts:5};function Qm(e,t){if((e=go(e)).firestore!==t)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mSe{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=iSe(t)}get(t){const n=Qm(t,this._firestore),i=new uSe(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||r.length!==1)return Ne();const s=r[0];if(s.isFoundDocument())return new I5(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new I5(this._firestore,i,n._key,null,n.converter);throw Ne()})}set(t,n,i){const r=Qm(t,this._firestore),s=cSe(r.converter,n,i),o=rSe(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,i);return this._transaction.set(r._key,o),this}update(t,n,i,...r){const s=Qm(t,this._firestore);let o;return o=typeof(n=go(n))=="string"||n instanceof UE?oSe(this._dataReader,"Transaction.update",s._key,n,i,r):sSe(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(t){const n=Qm(t,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pSe extends mSe{constructor(t,n){super(t,n),this._firestore=t}get(t){const n=Qm(t,this._firestore),i=new TK(this._firestore);return super.get(t).then(r=>new iS(this._firestore,i,n._key,r._document,new _K(!1,!1),n.converter))}}function USe(e,t,n){e=_5(e,ZI);const i=Object.assign(Object.assign({},gSe),n);return function(s){if(s.maxAttempts<1)throw new Ae(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){const l=new Rc;return s.asyncQueue.enqueueAndForget(async()=>{const c=await jIe(s);new $Ie(s.asyncQueue,c,a,o,l).Iu()}),l.promise}(mK(e),r=>t(new pSe(e,r)),i)}(function(t,n=!0){(function(r){Lg=r})(tW),V0(new tg("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new ZI(new d_e(i.getProvider("auth-internal")),new g_e(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new j0(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ac(gD,mD,t),Ac(gD,mD,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IK="firebasestorage.googleapis.com",SK="storageBucket",bSe=2*60*1e3,ySe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends jd{constructor(t,n,i=0){super(o7(t),`Firebase Storage: ${n} (${o7(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return o7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kn;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kn||(Kn={}));function o7(e){return"storage/"+e}function rS(){const e="An unknown error occurred, please check the error payload for server response.";return new Zn(Kn.UNKNOWN,e)}function ESe(e){return new Zn(Kn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vSe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zn(Kn.UNAUTHENTICATED,e)}function wSe(){return new Zn(Kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _Se(e){return new Zn(Kn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function TSe(){return new Zn(Kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ISe(){return new Zn(Kn.CANCELED,"User canceled the upload/download.")}function SSe(e){return new Zn(Kn.INVALID_URL,"Invalid URL '"+e+"'.")}function xSe(e){return new Zn(Kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function CSe(){return new Zn(Kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SK+"' property when initializing the app?")}function ASe(){return new Zn(Kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MSe(e){return new Zn(Kn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mw(e){return new Zn(Kn.INVALID_ARGUMENT,e)}function xK(){return new Zn(Kn.APP_DELETED,"The Firebase app was deleted.")}function RSe(e){return new Zn(Kn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function V1(e,t){return new Zn(Kn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Im(e){throw new Zn(Kn.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=qr.makeFromUrl(t,n)}catch{return new qr(t,"")}if(i.path==="")return i;throw xSe(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(v){v.path.charAt(v.path.length-1)==="/"&&(v.path_=v.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(v){v.path_=decodeURIComponent(v.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${u}/b/${r}/o${f}`,"i"),m={bucket:1,path:3},p=n===IK?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",b=new RegExp(`^https?://${p}/${r}/${U}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:h,indices:m,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let v=0;v<w.length;v++){const I=w[v],x=I.regex.exec(t);if(x){const _=x[I.indices.bucket];let T=x[I.indices.path];T||(T=""),i=new qr(_,T),I.postModify(i);break}}if(i==null)throw SSe(t);return i}}class kSe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LSe(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...U){c||(c=!0,t.apply(null,U))}function d(U){r=setTimeout(()=>{r=null,e(h,l())},U)}function f(){s&&clearTimeout(s)}function h(U,...b){if(c){f();return}if(U){f(),u.call(null,U,...b);return}if(l()||o){f(),u.call(null,U,...b);return}i<64&&(i*=2);let w;a===1?(a=2,w=0):w=(i+Math.random())*1e3,d(w)}let m=!1;function p(U){m||(m=!0,f(),!c&&(r!==null?(U||(a=2),clearTimeout(r),d(0)):U||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}function DSe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NSe(e){return e!==void 0}function OSe(e){return typeof e=="object"&&!Array.isArray(e)}function CK(e){return typeof e=="string"||e instanceof String}function cN(e){return sS()&&e instanceof Blob}function sS(){return typeof Blob<"u"}function uN(e,t,n,i){if(i<t)throw mw(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw mw(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PSe(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function FSe(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var nd;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(nd||(nd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BSe(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zSe{constructor(t,n,i,r,s,o,a,l,c,u,d,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new g2(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===nd.NO_ERROR,l=s.getStatus();if(!a||BSe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===nd.ABORT;i(!1,new g2(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new g2(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());NSe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=rS();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?xK():ISe();o(l)}else{const l=TSe();o(l)}};this.canceled_?n(!1,new g2(!1,null,!0)):this.backoffId_=LSe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&DSe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class g2{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function HSe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function VSe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function $Se(e,t){t&&(e["X-Firebase-GMPID"]=t)}function GSe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function XSe(e,t,n,i,r,s,o=!0){const a=FSe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return $Se(c,t),HSe(c,n),VSe(c,s),GSe(c,i),new zSe(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jSe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YSe(...e){const t=jSe();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(sS())return new Blob(e);throw new Zn(Kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WSe(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KSe(e){if(typeof atob>"u")throw MSe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a7{constructor(t,n){this.data=t,this.contentType=n||null}}function ZSe(e,t){switch(e){case Bo.RAW:return new a7(AK(t));case Bo.BASE64:case Bo.BASE64URL:return new a7(MK(e,t));case Bo.DATA_URL:return new a7(QSe(t),JSe(t))}throw rS()}function AK(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function qSe(e){let t;try{t=decodeURIComponent(e)}catch{throw V1(Bo.DATA_URL,"Malformed data URL.")}return AK(t)}function MK(e,t){switch(e){case Bo.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw V1(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Bo.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw V1(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=KSe(t)}catch(r){throw r.message.includes("polyfill")?r:V1(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class RK{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw V1(Bo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=exe(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function QSe(e){const t=new RK(e);return t.base64?MK(Bo.BASE64,t.rest):qSe(t.rest)}function JSe(e){return new RK(e).contentType}function exe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,n){let i=0,r="";cN(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(cN(this.data_)){const i=this.data_,r=WSe(i,t,n);return r===null?null:new ic(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new ic(i,!0)}}static getBlob(...t){if(sS()){const n=t.map(i=>i instanceof ic?i.data_:i);return new ic(YSe.apply(null,n))}else{const n=t.map(o=>CK(o)?ZSe(Bo.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new ic(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function txe(e){let t;try{t=JSON.parse(e)}catch{return null}return OSe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nxe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ixe(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function kK(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rxe(e,t){return t}class ir{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||rxe}}let m2=null;function sxe(e){return!CK(e)||e.length<2?e:kK(e)}function oxe(){if(m2)return m2;const e=[];e.push(new ir("bucket")),e.push(new ir("generation")),e.push(new ir("metageneration")),e.push(new ir("name","fullPath",!0));function t(s,o){return sxe(o)}const n=new ir("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new ir("size");return r.xform=i,e.push(r),e.push(new ir("timeCreated")),e.push(new ir("updated")),e.push(new ir("md5Hash",null,!0)),e.push(new ir("cacheControl",null,!0)),e.push(new ir("contentDisposition",null,!0)),e.push(new ir("contentEncoding",null,!0)),e.push(new ir("contentLanguage",null,!0)),e.push(new ir("contentType",null,!0)),e.push(new ir("metadata","customMetadata",!0)),m2=e,m2}function axe(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new qr(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function lxe(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return axe(i,e),i}function cxe(e,t,n){const i=txe(t);return i===null?null:lxe(e,i,n)}function uxe(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class dxe{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fxe(e){if(!e)throw rS()}function hxe(e,t){function n(i,r){const s=cxe(e,r,t);return fxe(s!==null),s}return n}function gxe(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=wSe():r=vSe():n.getStatus()===402?r=ESe(e.bucket):n.getStatus()===403?r=_Se(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function mxe(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function pxe(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=mxe(null,t)),i}function Uxe(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let v=0;v<2;v++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=pxe(t,i,r),u=uxe(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=ic.getBlob(d,i,f);if(h===null)throw ASe();const m={name:c.fullPath},p=PSe(s,e.host,e._protocol),U="POST",b=e.maxUploadRetryTime,y=new dxe(p,U,hxe(e,n),b);return y.urlParams=m,y.headers=o,y.body=h.uploadData(),y.errorHandler=gxe(t),y}class bxe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=nd.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=nd.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=nd.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw Im("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Im("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Im("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Im("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Im("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class yxe extends bxe{initXhr(){this.xhr_.responseType="text"}}function Exe(){return new yxe}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t,n){this._service=t,n instanceof qr?this._location=n:this._location=qr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Md(t,n)}get root(){const t=new qr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kK(this._location.path)}get storage(){return this._service}get parent(){const t=nxe(this._location.path);if(t===null)return null;const n=new qr(this._location.bucket,t);return new Md(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw RSe(t)}}function vxe(e,t,n){e._throwIfRoot("uploadBytes");const i=Uxe(e.storage,e._location,oxe(),new ic(t,!0),n);return e.storage.makeRequestWithTokens(i,Exe).then(r=>({metadata:r,ref:e}))}function wxe(e,t){const n=ixe(e._location.path,t),i=new qr(e._location.bucket,n);return new Md(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _xe(e){return/^[A-Za-z]+:\/\//.test(e)}function Txe(e,t){return new Md(e,t)}function LK(e,t){if(e instanceof oS){const n=e;if(n._bucket==null)throw CSe();const i=new Md(n,n._bucket);return t!=null?LK(i,t):i}else return t!==void 0?wxe(e,t):e}function Ixe(e,t){if(t&&_xe(t)){if(e instanceof oS)return Txe(e,t);throw mw("To use ref(service, url), the first argument must be a Storage instance.")}else return LK(e,t)}function dN(e,t){const n=t==null?void 0:t[SK];return n==null?null:qr.makeFromBucketSpec(n,e)}function Sxe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:WY(r,e.app.options.projectId))}class oS{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=IK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bSe,this._maxUploadRetryTime=ySe,this._requests=new Set,r!=null?this._bucket=qr.makeFromBucketSpec(r,this._host):this._bucket=dN(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=qr.makeFromBucketSpec(this._url,t):this._bucket=dN(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){uN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){uN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(eW(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Md(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new kSe(xK());{const o=XSe(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const fN="@firebase/storage",hN="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK="storage";function NK(e,t,n){return e=go(e),vxe(e,t,n)}function OK(e,t){return e=go(e),Ixe(e,t)}function xxe(e=iW(),t){e=go(e);const i=JY(e,DK).getImmediate({identifier:t}),r=jY("storage");return r&&Cxe(i,...r),i}function Cxe(e,t,n,i={}){Sxe(e,t,n,i)}function Axe(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new oS(n,i,r,t,tW)}function Mxe(){V0(new tg(DK,Axe,"PUBLIC").setMultipleInstances(!0)),Ac(fN,hN,""),Ac(fN,hN,"esm2017")}Mxe();let S5;try{S5=JSON.parse('{"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}')}catch{console.warn('Error JSON parsing firebase config. Supplied value: {"apiKey":"AIzaSyAd15pYlMci_xIp9ko6wkEsDzAAA0Dn0RU","authDomain":"excalidraw-room-persistence.firebaseapp.com","databaseURL":"https://excalidraw-room-persistence.firebaseio.com","projectId":"excalidraw-room-persistence","storageBucket":"excalidraw-room-persistence.appspot.com","messagingSenderId":"654800341332","appId":"1:654800341332:web:4a692de832b55bd57ce0c1"}'),S5={}}let l7=null,c7=null,u7=null;const PK=()=>(l7||(l7=nW(S5)),l7),FK=()=>(c7||(c7=QIe(PK())),c7),Rxe=()=>(u7||(u7=xxe(PK())),u7),BK=async()=>Rxe(),kxe=async(e,t)=>{const n=JSON.stringify(t),i=new TextEncoder().encode(n),{encryptedBuffer:r,iv:s}=await Hy(e,i);return{ciphertext:r,iv:s}},pw=async(e,t)=>{const n=e.ciphertext.toUint8Array(),i=e.iv.toUint8Array(),r=await k0(i,n,t),s=new TextDecoder("utf-8").decode(new Uint8Array(r));return JSON.parse(s)},Ru=class Ru{};F(Ru,"cache",new WeakMap),F(Ru,"get",t=>Ru.cache.get(t)),F(Ru,"set",(t,n)=>{Ru.cache.set(t,tc(n))});let q0=Ru;const zK=(e,t)=>{if(e.socket&&e.roomId&&e.roomKey){const n=tc(t);return q0.get(e.socket)===n}return!0},aS=async({prefix:e,files:t})=>{const n=await BK(),i=[],r=[];return await Promise.all(t.map(async({id:s,buffer:o})=>{try{const a=OK(n,`${e}/${s}`);await NK(a,o,{cacheControl:`public, max-age=${xwe}`}),r.push(s)}catch{i.push(s)}})),{savedFiles:r,erroredFiles:i}},gN=async(e,t)=>{const n=tc(e),{ciphertext:i,iv:r}=await kxe(t,e);return{sceneVersion:n,ciphertext:yl.fromUint8Array(new Uint8Array(i)),iv:yl.fromUint8Array(r)}},Lxe=async(e,t,n)=>{const{roomId:i,roomKey:r,socket:s}=e;if(!i||!r||!s||zK(e,t))return null;const o=FK(),a=gK(o,"scenes",i),l=await USe(o,async u=>{const d=await u.get(a);if(!d.exists()){const U=await gN(t,r);return u.set(a,U),U}const f=d.data(),h=dc(Id(await pw(f,r),null)),m=dc(bI(t,h,n)),p=await gN(m,r);return u.update(a,p),p}),c=dc(Id(await pw(l,r),null));return q0.set(s,c),c},Dxe=async(e,t,n)=>{const i=FK(),r=gK(i,"scenes",e),s=await fSe(r);if(!s.exists())return null;const o=s.data(),a=dc(Id(await pw(o,t),null,{deleteInvisibleElements:!0}));return n&&q0.set(n,a),a},HK=async(e,t,n)=>{const i=[],r=new Map;return await Promise.all([...new Set(n)].map(async s=>{try{const o=`https://firebasestorage.googleapis.com/v0/b/${S5.storageBucket}/o/${encodeURIComponent(e.replace(/^\//,""))}%2F${s}`,a=await fetch(`${o}?alt=media`);if(a.status<400){const l=await a.arrayBuffer(),{data:c,metadata:u}=await tX(new Uint8Array(l),{decryptionKey:t}),d=new TextDecoder().decode(c);i.push({mimeType:u.mimeType||Te.binary,id:s,dataURL:d,created:(u==null?void 0:u.created)||Date.now(),lastRetrieved:(u==null?void 0:u.created)||Date.now()})}else r.set(s,!0)}catch(o){r.set(s,!0),console.error(o)}})),{loadedFiles:i,erroredFiles:r}},VK=e=>e.isDeleted?e.updated>Date.now()-Swe:!Qa(e),dc=e=>e.filter(t=>VK(t)),Nxe="https://json.excalidraw.com/api/v2/",Oxe="https://json.excalidraw.com/api/v2/post/",Pxe=async()=>{const e=new Uint8Array(Cwe);return window.crypto.getRandomValues(e),zB(e)},$K=/^#room=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/,mN=e=>{const t=new URL(e).hash;return $K.test(t)},Fxe=e=>{const n=new URL(e).hash.match($K);return n&&n[2].length!==22?(window.alert(R("alerts.invalidEncryptionKey")),null):n?{roomId:n[1],roomKey:n[2]}:null},Bxe=async()=>{const e=await Pxe(),t=await RT();if(!t)throw new Error("Couldn't generate room key");return{roomId:e,roomKey:t}},zxe=e=>`${window.location.origin}${window.location.pathname}#room=${e.roomId},${e.roomKey}`,Hxe=async({buffer:e,decryptionKey:t})=>{let n;try{const s=e.slice(0,eb),o=e.slice(eb,e.byteLength);n=await k0(new Uint8Array(s),o,t)}catch{const o=new Uint8Array(eb);n=await k0(o,e,t)}const i=new window.TextDecoder("utf-8").decode(new Uint8Array(n)),r=JSON.parse(i);return{elements:r.elements||null,appState:r.appState||null}},Vxe=async(e,t)=>{try{const n=await fetch(`${Nxe}${e}`);if(!n.ok)return window.alert(R("alerts.importBackendFailed")),{};const i=await n.arrayBuffer();try{const{data:r}=await tX(new Uint8Array(i),{decryptionKey:t}),s=JSON.parse(new TextDecoder().decode(r));return{elements:s.elements||null,appState:s.appState||null}}catch(r){return console.warn("error when decoding shareLink data using the new format:",r),Hxe({buffer:i,decryptionKey:t})}}catch(n){return window.alert(R("alerts.importBackendFailed")),console.error(n),{}}},pN=async(e,t,n)=>{let i;return e!=null&&t!=null?i=Sd(await Vxe(e,t),n==null?void 0:n.appState,n==null?void 0:n.elements,{repairBindings:!0,refreshDimensions:!1,deleteInvisibleElements:!0}):i=Sd(n||null,null,null,{repairBindings:!0,deleteInvisibleElements:!0}),{elements:i.elements,appState:i.appState,files:i.files}},$xe=async(e,t,n)=>{const i=await RT("string"),r=await eX(new TextEncoder().encode(Rg(e,t,n,"database")),{encryptionKey:i});try{const s=new Map;for(const c of e)Ln(c)&&n[c.fileId]&&s.set(c.fileId,n[c.fileId]);const o=await vI({files:s,encryptionKey:i,maxBytes:EI}),l=await(await fetch(Oxe,{method:"POST",body:r.buffer})).json();if(l.id){const c=new URL(window.location.href);c.hash=`json=${l.id},${i}`;const u=c.toString();return await aS({prefix:`/files/shareLinks/${l.id}`,files:o}),{url:u,errorMessage:null}}else if(l.error_class==="RequestTooLargeError")return{url:null,errorMessage:R("alerts.couldNotCreateShareableLinkTooBig")};return{url:null,errorMessage:R("alerts.couldNotCreateShareableLink")}}catch(s){return console.error(s),{url:null,errorMessage:R("alerts.couldNotCreateShareableLink")}}};function Gxe(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var i=function(){return indexedDB.databases().finally(n)};t=setInterval(i,100),i()}).finally(function(){return clearInterval(t)})}function Zd(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function lS(e,t){const n=Gxe().then(()=>{const i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),Zd(i)});return(i,r)=>n.then(s=>r(s.transaction(t,i).objectStore(t)))}let d7;function Og(){return d7||(d7=lS("keyval-store","keyval")),d7}function Xxe(e,t=Og()){return t("readonly",n=>Zd(n.get(e)))}function GK(e,t,n=Og()){return n("readwrite",i=>(i.put(t,e),Zd(i.transaction)))}function jxe(e,t=Og()){return t("readwrite",n=>(e.forEach(i=>n.put(i[1],i[0])),Zd(n.transaction)))}function Yxe(e,t=Og()){return t("readonly",n=>Promise.all(e.map(i=>Zd(n.get(i)))))}function Wxe(e,t=Og()){return t("readwrite",n=>(n.delete(e),Zd(n.transaction)))}function Kxe(e,t){return e("readonly",n=>(n.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},Zd(n.transaction)))}function Zxe(e=Og()){const t=[];return Kxe(e,n=>t.push([n.key,n.value])).then(()=>t)}class qxe{constructor(){F(this,"locks",new Map);F(this,"lock",t=>{this.locks.set(t,!0)});F(this,"unlock",t=>(this.locks.delete(t),!this.isLocked()))}isLocked(t){return t?this.locks.has(t):!!this.locks.size}}const x5={[Sn.VERSION_DATA_STATE]:-1,[Sn.VERSION_FILES]:-1},UN=e=>JSON.parse(localStorage.getItem(e)||"-1")>x5[e],XK=e=>{const t=Date.now();try{localStorage.setItem(e,JSON.stringify(t)),x5[e]=t}catch(n){console.error("error while updating browser state verison",n)}},Qxe=()=>{try{for(const e of Object.keys(x5))localStorage.setItem(e,JSON.stringify(-1)),x5[e]=-1}catch(e){console.error("error while resetting browser state verison",e)}},$1=lS("files-db","files-store"),fb=Wt(!1);class Jxe extends $Y{constructor(){super(...arguments);F(this,"clearObsoleteFiles",async n=>{await Zxe($1).then(i=>{for(const[r,s]of i)(!s.lastRetrieved||Date.now()-s.lastRetrieved>24*3600*1e3)&&!n.currentFileIds.includes(r)&&Wxe(r,$1)})})}}const eCe=(e,t)=>{var i;const n=Ks.get(fb);try{const r=iG(t);((i=r.openSidebar)==null?void 0:i.name)===As.name&&r.openSidebar.tab===Zu&&(r.openSidebar=null),localStorage.setItem(Sn.LOCAL_STORAGE_ELEMENTS,JSON.stringify(SH(e))),localStorage.setItem(Sn.LOCAL_STORAGE_APP_STATE,JSON.stringify(r)),XK(Sn.VERSION_DATA_STATE),n&&Ks.set(fb,!1)}catch(r){console.error(r),tCe(r)&&!n&&Ks.set(fb,!0)}},tCe=e=>e instanceof DOMException&&e.name==="QuotaExceededError",Ii=class Ii{};F(Ii,"_save",sl(async(t,n,i,r)=>{eCe(t,n),await Ii.fileStorage.saveFiles({elements:t,files:i}),r()},Ewe)),F(Ii,"save",(t,n,i,r)=>{Ii.isSavePaused()||Ii._save(t,n,i,r)}),F(Ii,"flushSave",()=>{Ii._save.flush()}),F(Ii,"locker",new qxe),F(Ii,"pauseSave",t=>{Ii.locker.lock(t)}),F(Ii,"resumeSave",t=>{Ii.locker.unlock(t)}),F(Ii,"isSavePaused",()=>document.hidden||Ii.locker.isLocked()),F(Ii,"fileStorage",new Jxe({getFiles(t){return Yxe(t,$1).then(async n=>{const i=[],r=new Map,s=[];n.forEach((o,a)=>{const l=t[a];if(o){const c={...o,lastRetrieved:Date.now()};s.push([l,c]),i.push(c)}else r.set(l,!0)});try{jxe(s,$1)}catch(o){console.warn(o)}return{loadedFiles:i,erroredFiles:r}})},async saveFiles({addedFiles:t}){const n=new Map,i=new Map;return XK(Sn.VERSION_FILES),await Promise.all([...t].map(async([r,s])=>{try{await GK(r,s,$1),n.set(r,s)}catch(o){console.error(o),i.set(r,s)}})),{savedFiles:n,erroredFiles:i}}}));let Ci=Ii;const Gs=class Gs{static async load(){return await Xxe(Gs.key,Gs.store)||null}static save(t){return GK(Gs.key,t,Gs.store)}};F(Gs,"idb_name",Sn.IDB_LIBRARY),F(Gs,"key","libraryData"),F(Gs,"store",lS(`${Gs.idb_name}-db`,`${Gs.idb_name}-store`));let C5=Gs;class nCe{static load(){const t=localStorage.getItem(Sn.__LEGACY_LOCAL_STORAGE_LIBRARY);if(t!=null){const n=JSON.parse(t);if(n)return{libraryItems:n}}return null}static clear(){localStorage.removeItem(Sn.__LEGACY_LOCAL_STORAGE_LIBRARY)}}const Uw=Wt({message:null,nonce:0}),jK=({collabError:e})=>{const[t,n]=L.useState(!1),i=L.useRef(0);return L.useEffect(()=>(n(!0),i.current=window.setTimeout(()=>{n(!1)},1e3),()=>{window.clearTimeout(i.current)}),[e.message,e.nonce]),e.message?g(gl,{label:e.message,long:!0,children:g("div",{className:ce("collab-errors-button",{"collab-errors-button-shake":t}),children:kde})}):null};jK.displayName="CollabError";class iCe{constructor(t){F(this,"collab");F(this,"socket",null);F(this,"socketInitialized",!1);F(this,"roomId",null);F(this,"roomKey",null);F(this,"broadcastedElementVersions",new Map);F(this,"queueFileUpload",Fo(async()=>{try{await this.collab.fileManager.saveFiles({elements:this.collab.excalidrawAPI.getSceneElementsIncludingDeleted(),files:this.collab.excalidrawAPI.getFiles()})}catch(i){i.name!=="AbortError"&&this.collab.excalidrawAPI.updateScene({appState:{errorMessage:i.message}})}let t=!1;const n=this.collab.excalidrawAPI.getSceneElementsIncludingDeleted().map(i=>this.collab.fileManager.shouldUpdateImageElementStatus(i)?(t=!0,Ie(i,{status:"saved"})):i);t&&this.collab.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER})},wwe));F(this,"broadcastScene",async(t,n,i)=>{if(t===ar.INIT&&!i)throw new Error("syncAll must be true when sending SCENE.INIT");const r=n.reduce((o,a)=>((i||!this.broadcastedElementVersions.has(a.id)||a.version>this.broadcastedElementVersions.get(a.id))&&VK(a)&&o.push(a),o),[]),s={type:t,payload:{elements:r}};for(const o of r)this.broadcastedElementVersions.set(o.id,o.version);this.queueFileUpload(),await this._broadcastSocketData(s)});F(this,"broadcastIdleChange",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:ar.IDLE_STATUS,payload:{socketId:this.socket.id,userState:t,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastMouseLocation",t=>{var n;if((n=this.socket)!=null&&n.id){const i={type:ar.MOUSE_LOCATION,payload:{socketId:this.socket.id,pointer:t.pointer,button:t.button||"up",selectedElementIds:this.collab.excalidrawAPI.getAppState().selectedElementIds,username:this.collab.state.username}};return this._broadcastSocketData(i,!0)}});F(this,"broadcastVisibleSceneBounds",(t,n)=>{var i;if((i=this.socket)!=null&&i.id){const r={type:ar.USER_VISIBLE_SCENE_BOUNDS,payload:{socketId:this.socket.id,username:this.collab.state.username,sceneBounds:t.sceneBounds}};return this._broadcastSocketData(r,!0,n)}});F(this,"broadcastUserFollowed",t=>{var n;(n=this.socket)!=null&&n.id&&this.socket.emit(ab.USER_FOLLOW_CHANGE,t)});this.collab=t}open(t,n,i){return this.socket=t,this.roomId=n,this.roomKey=i,this.socket.on("init-room",()=>{this.socket&&(this.socket.emit("join-room",this.roomId),Je("share","room joined"))}),this.socket.on("new-user",async r=>{this.broadcastScene(ar.INIT,this.collab.getSceneElementsIncludingDeleted(),!0)}),this.socket.on("room-user-change",r=>{this.collab.setCollaborators(r)}),t}close(){this.socket&&(this.queueFileUpload.flush(),this.socket.close(),this.socket=null,this.roomId=null,this.roomKey=null,this.socketInitialized=!1,this.broadcastedElementVersions=new Map)}isOpen(){return!!(this.socketInitialized&&this.socket&&this.roomId&&this.roomKey)}async _broadcastSocketData(t,n=!1,i){var r;if(this.isOpen()){const s=JSON.stringify(t),o=new TextEncoder().encode(s),{encryptedBuffer:a,iv:l}=await Hy(this.roomKey,o);(r=this.socket)==null||r.emit(n?ab.SERVER_VOLATILE:ab.SERVER,i??this.roomId,a,l)}}}var rCe={};const YK=Wt(null),bw=Wt(!1),WK=Wt(!1),KK=Wt(null);class sCe extends L.PureComponent{constructor(n){super(n);F(this,"portal");F(this,"fileManager");F(this,"excalidrawAPI");F(this,"activeIntervalId");F(this,"idleTimeoutId");F(this,"socketInitializationTimer");F(this,"lastBroadcastedOrReceivedSceneVersion",-1);F(this,"collaborators",new Map);F(this,"onUmmount",null);F(this,"onOfflineStatusToggle",()=>{Ks.set(WK,!window.navigator.onLine)});F(this,"isCollaborating",()=>Ks.get(bw));F(this,"setIsCollaborating",n=>{Ks.set(bw,n)});F(this,"onUnload",()=>{this.destroySocketClient({isUnload:!0})});F(this,"beforeUnload",an(n=>{const i=dc(this.getSceneElementsIncludingDeleted());this.isCollaborating()&&(this.fileManager.shouldPreventUnload(i)||!zK(this.portal,i))&&(this.saveCollabRoomToFirebase(i),rCe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?j9(n):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))}));F(this,"saveCollabRoomToFirebase",async n=>{try{const i=await Lxe(this.portal,n,this.excalidrawAPI.getAppState());this.resetErrorIndicator(),this.isCollaborating()&&i&&this.handleRemoteSceneUpdate(this._reconcileElements(i))}catch(i){const r=/is longer than.*?bytes/.test(i.message)?R("errors.collabSaveFailed_sizeExceeded"):R("errors.collabSaveFailed");(!this.state.dialogNotifiedErrors[r]||!this.isCollaborating())&&(this.setErrorDialog(r),this.setState({dialogNotifiedErrors:{...this.state.dialogNotifiedErrors,[r]:!0}})),this.isCollaborating()&&this.setErrorIndicator(r),console.error(i)}});F(this,"stopCollaboration",(n=!0)=>{if(this.queueBroadcastAllElements.cancel(),this.queueSaveToFirebase.cancel(),this.loadImageFiles.cancel(),this.resetErrorIndicator(!0),this.saveCollabRoomToFirebase(dc(this.excalidrawAPI.getSceneElementsIncludingDeleted())),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),!n)Ci.fileStorage.reset(),this.destroySocketClient();else if(window.confirm(R("alerts.collabStopOverridePrompt"))){Qxe(),window.history.pushState({},Ec,window.location.origin),this.destroySocketClient(),Ci.fileStorage.reset();const i=this.excalidrawAPI.getSceneElementsIncludingDeleted().map(r=>Et(r)&&r.status==="saved"?Ie(r,{status:"pending"}):r);this.excalidrawAPI.updateScene({elements:i,captureUpdate:K.NEVER})}});F(this,"destroySocketClient",n=>{this.lastBroadcastedOrReceivedSceneVersion=-1,this.portal.close(),this.fileManager.reset(),n!=null&&n.isUnload||(this.setIsCollaborating(!1),this.setActiveRoomLink(null),this.collaborators=new Map,this.excalidrawAPI.updateScene({collaborators:this.collaborators}),Ci.resumeSave("collaboration"))});F(this,"fetchImageFilesFromFirebase",async n=>{const i=n.elements.filter(r=>Ln(r)&&!this.fileManager.isFileTracked(r.fileId)&&!r.isDeleted&&(n.forceFetchFiles?r.status!=="pending"||Date.now()-r.updated>1e4:r.status==="saved")).map(r=>r.fileId);return await this.fileManager.getFiles(i)});F(this,"decryptPayload",async(n,i,r)=>{try{const s=await k0(n,i,r),o=new TextDecoder("utf-8").decode(new Uint8Array(s));return JSON.parse(o)}catch(s){return window.alert(R("alerts.decryptFailed")),console.error(s),{type:ar.INVALID_RESPONSE}}});F(this,"fallbackInitializationHandler",null);F(this,"startCollaboration",async n=>{if(this.state.username||Ee(()=>import("./random-username.esm-__vdrxyo.js"),__vite__mapDeps([]),import.meta.url).then(({getRandomUsername:l})=>{const c=l();this.setUsername(c)}),this.portal.socket)return null;let i,r;n?{roomId:i,roomKey:r}=n:({roomId:i,roomKey:r}=await Bxe(),window.history.pushState({},Ec,zxe({roomId:i,roomKey:r})));const s=iy();this.setIsCollaborating(!0),Ci.pauseSave("collaboration");const{default:o}=await Ee(()=>import("./index-ChGp7972.js"),__vite__mapDeps([]),import.meta.url),a=()=>{this.initializeRoom({roomLinkData:n,fetchScene:!0}).then(l=>{s.resolve(l)})};this.fallbackInitializationHandler=a;try{this.portal.socket=this.portal.open(o("https://oss-collab.excalidraw.com",{transports:["websocket","polling"]}),i,r),this.portal.socket.once("connect_error",a)}catch(l){return console.error(l),this.setErrorDialog(l.message),null}if(n)this.excalidrawAPI.resetScene();else{const l=this.excalidrawAPI.getSceneElements().map(c=>Et(c)&&c.status==="saved"?Ie(c,{status:"pending"}):c);this.excalidrawAPI.updateScene({elements:l,captureUpdate:K.NEVER}),this.saveCollabRoomToFirebase(dc(l))}return this.socketInitializationTimer=window.setTimeout(a,vwe),this.portal.socket.on("client-broadcast",async(l,c)=>{var d;if(!this.portal.roomKey)return;const u=await this.decryptPayload(c,l,this.portal.roomKey);switch(u.type){case ar.INVALID_RESPONSE:return;case ar.INIT:{if(!this.portal.socketInitialized){this.initializeRoom({fetchScene:!1});const f=u.payload.elements,h=this._reconcileElements(f);this.handleRemoteSceneUpdate(h),s.resolve({elements:h,scrollToContent:!0})}break}case ar.UPDATE:this.handleRemoteSceneUpdate(this._reconcileElements(u.payload.elements));break;case ar.MOUSE_LOCATION:{const{pointer:f,button:h,username:m,selectedElementIds:p}=u.payload,U=u.payload.socketId||u.payload.socketID;this.updateCollaborator(U,{pointer:f,button:h,selectedElementIds:p,username:m});break}case ar.USER_VISIBLE_SCENE_BOUNDS:{const{sceneBounds:f,socketId:h}=u.payload,m=this.excalidrawAPI.getAppState();if(((d=m.userToFollow)==null?void 0:d.socketId)!==h){console.warn(`receiving remote client's (from ${h}) viewport bounds even though we're not subscribed to it!`);return}if(m.userToFollow&&m.followedBy.has(m.userToFollow.socketId))return;this.excalidrawAPI.updateScene({appState:cG({appState:m,bounds:f,fitToViewport:!0,viewportZoomFactor:1}).appState});break}case ar.IDLE_STATUS:{const{userState:f,socketId:h,username:m}=u.payload;this.updateCollaborator(h,{userState:f,username:m});break}default:Ko(u,null)}}),this.portal.socket.on("first-in-room",async()=>{this.portal.socket&&this.portal.socket.off("first-in-room");const l=await this.initializeRoom({fetchScene:!0,roomLinkData:n});s.resolve(l)}),this.portal.socket.on(ab.USER_FOLLOW_ROOM_CHANGE,l=>{this.excalidrawAPI.updateScene({appState:{followedBy:new Set(l)}}),this.relayVisibleSceneBounds({force:!0})}),this.initializeIdleDetector(),this.setActiveRoomLink(window.location.href),s});F(this,"initializeRoom",async({fetchScene:n,roomLinkData:i})=>{if(clearTimeout(this.socketInitializationTimer),this.portal.socket&&this.fallbackInitializationHandler&&this.portal.socket.off("connect_error",this.fallbackInitializationHandler),n&&i&&this.portal.socket){this.excalidrawAPI.resetScene();try{const r=await Dxe(i.roomId,i.roomKey,this.portal.socket);if(r)return this.setLastBroadcastedOrReceivedSceneVersion(tc(r)),{elements:r,scrollToContent:!0}}catch(r){console.error(r)}finally{this.portal.socketInitialized=!0}}else this.portal.socketInitialized=!0;return null});F(this,"_reconcileElements",n=>{const i=this.getSceneElementsIncludingDeleted(),r=this.excalidrawAPI.getAppState(),s=Id(n,null),o=bI(i,s,r);return this.setLastBroadcastedOrReceivedSceneVersion(tc(o)),o});F(this,"loadImageFiles",Fo(async()=>{const{loadedFiles:n,erroredFiles:i}=await this.fetchImageFilesFromFirebase({elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()});this.excalidrawAPI.addFiles(n),Wm({excalidrawAPI:this.excalidrawAPI,erroredFiles:i,elements:this.excalidrawAPI.getSceneElementsIncludingDeleted()})},_we));F(this,"handleRemoteSceneUpdate",n=>{this.excalidrawAPI.updateScene({elements:n,captureUpdate:K.NEVER}),this.loadImageFiles()});F(this,"onPointerMove",()=>{this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.idleTimeoutId=window.setTimeout(this.reportIdle,bA),this.activeIntervalId||(this.activeIntervalId=window.setInterval(this.reportActive,yA))});F(this,"onVisibilityChange",()=>{document.hidden?(this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.onIdleStateChange(Du.AWAY)):(this.idleTimeoutId=window.setTimeout(this.reportIdle,bA),this.activeIntervalId=window.setInterval(this.reportActive,yA),this.onIdleStateChange(Du.ACTIVE))});F(this,"reportIdle",()=>{this.onIdleStateChange(Du.IDLE),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null)});F(this,"reportActive",()=>{this.onIdleStateChange(Du.ACTIVE)});F(this,"initializeIdleDetector",()=>{document.addEventListener(te.POINTER_MOVE,this.onPointerMove),document.addEventListener(te.VISIBILITY_CHANGE,this.onVisibilityChange)});F(this,"updateCollaborator",(n,i)=>{var o;const r=new Map(this.collaborators),s=Object.assign({},r.get(n),i,{isCurrentUser:n===((o=this.portal.socket)==null?void 0:o.id)});r.set(n,s),this.collaborators=r,this.excalidrawAPI.updateScene({collaborators:r})});F(this,"setLastBroadcastedOrReceivedSceneVersion",n=>{this.lastBroadcastedOrReceivedSceneVersion=n});F(this,"getLastBroadcastedOrReceivedSceneVersion",()=>this.lastBroadcastedOrReceivedSceneVersion);F(this,"getSceneElementsIncludingDeleted",()=>this.excalidrawAPI.getSceneElementsIncludingDeleted());F(this,"onPointerUpdate",Fo(n=>{n.pointersMap.size<2&&this.portal.socket&&this.portal.broadcastMouseLocation(n)},Iwe));F(this,"relayVisibleSceneBounds",n=>{const i=this.excalidrawAPI.getAppState();this.portal.socket&&(i.followedBy.size>0||n!=null&&n.force)&&this.portal.broadcastVisibleSceneBounds({sceneBounds:Kz(i)},`follow@${this.portal.socket.id}`)});F(this,"onIdleStateChange",n=>{this.portal.broadcastIdleChange(n)});F(this,"broadcastElements",n=>{tc(n)>this.getLastBroadcastedOrReceivedSceneVersion()&&(this.portal.broadcastScene(ar.UPDATE,n,!1),this.lastBroadcastedOrReceivedSceneVersion=tc(n),this.queueBroadcastAllElements())});F(this,"syncElements",n=>{this.broadcastElements(n),this.queueSaveToFirebase()});F(this,"queueBroadcastAllElements",Fo(()=>{this.portal.broadcastScene(ar.UPDATE,this.excalidrawAPI.getSceneElementsIncludingDeleted(),!0);const n=this.getLastBroadcastedOrReceivedSceneVersion(),i=Math.max(n,tc(this.getSceneElementsIncludingDeleted()));this.setLastBroadcastedOrReceivedSceneVersion(i)},tD));F(this,"queueSaveToFirebase",Fo(()=>{this.portal.socketInitialized&&this.saveCollabRoomToFirebase(dc(this.excalidrawAPI.getSceneElementsIncludingDeleted()))},tD,{leading:!1}));F(this,"setUsername",n=>{this.setState({username:n}),Mwe(n)});F(this,"getUsername",()=>this.state.username);F(this,"setActiveRoomLink",n=>{this.setState({activeRoomLink:n}),Ks.set(KK,n)});F(this,"getActiveRoomLink",()=>this.state.activeRoomLink);F(this,"setErrorIndicator",n=>{Ks.set(Uw,{message:n,nonce:Date.now()})});F(this,"resetErrorIndicator",(n=!1)=>{Ks.set(Uw,{message:null,nonce:0}),n&&this.setState({dialogNotifiedErrors:{}})});F(this,"setErrorDialog",n=>{this.setState({errorMessage:n})});this.state={errorMessage:null,dialogNotifiedErrors:{},username:zY()||"",activeRoomLink:null},this.portal=new iCe(this),this.fileManager=new $Y({getFiles:async i=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new jh;return HK(`files/rooms/${r}`,s,i)},saveFiles:async({addedFiles:i})=>{const{roomId:r,roomKey:s}=this.portal;if(!r||!s)throw new jh;const{savedFiles:o,erroredFiles:a}=await aS({prefix:`${BY.collabFiles}/${r}`,files:await vI({files:i,encryptionKey:s,maxBytes:EI})});return{savedFiles:o.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map),erroredFiles:a.reduce((l,c)=>{const u=i.get(c);return u&&l.set(c,u),l},new Map)}}}),this.excalidrawAPI=n.excalidrawAPI,this.activeIntervalId=null,this.idleTimeoutId=null}componentDidMount(){window.addEventListener(te.BEFORE_UNLOAD,this.beforeUnload),window.addEventListener("online",this.onOfflineStatusToggle),window.addEventListener("offline",this.onOfflineStatusToggle),window.addEventListener(te.UNLOAD,this.onUnload);const n=this.excalidrawAPI.onUserFollow(o=>{this.portal.socket&&this.portal.broadcastUserFollowed(o)}),i=bp(this.relayVisibleSceneBounds),r=this.excalidrawAPI.onScrollChange(()=>i());this.onUmmount=()=>{n(),r()},this.onOfflineStatusToggle();const s={isCollaborating:this.isCollaborating,onPointerUpdate:this.onPointerUpdate,startCollaboration:this.startCollaboration,syncElements:this.syncElements,fetchImageFilesFromFirebase:this.fetchImageFilesFromFirebase,stopCollaboration:this.stopCollaboration,setUsername:this.setUsername,getUsername:this.getUsername,getActiveRoomLink:this.getActiveRoomLink,setCollabError:this.setErrorDialog};Ks.set(YK,s)}componentWillUnmount(){var n;window.removeEventListener("online",this.onOfflineStatusToggle),window.removeEventListener("offline",this.onOfflineStatusToggle),window.removeEventListener(te.BEFORE_UNLOAD,this.beforeUnload),window.removeEventListener(te.UNLOAD,this.onUnload),window.removeEventListener(te.POINTER_MOVE,this.onPointerMove),window.removeEventListener(te.VISIBILITY_CHANGE,this.onVisibilityChange),this.activeIntervalId&&(window.clearInterval(this.activeIntervalId),this.activeIntervalId=null),this.idleTimeoutId&&(window.clearTimeout(this.idleTimeoutId),this.idleTimeoutId=null),(n=this.onUmmount)==null||n.call(this)}setCollaborators(n){var r;const i=new Map;for(const s of n)i.set(s,Object.assign({},this.collaborators.get(s),{isCurrentUser:s===((r=this.portal.socket)==null?void 0:r.id)}));this.collaborators=i,this.excalidrawAPI.updateScene({collaborators:i})}render(){const{errorMessage:n}=this.state;return g(fe,{children:n!=null&&g(eI,{onClose:()=>this.setErrorDialog(null),children:n})})}}const oCe=(e,t,n,i)=>{e.save(),e.strokeStyle=i,e.beginPath(),e.moveTo(n[0][0]*t,n[0][1]*t),e.lineTo(n[1][0]*t,n[1][1]*t),e.stroke(),e.restore()},aCe=(e,t,[n,i,r,s],o)=>{e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(n[0]*t,n[1]*t),e.bezierCurveTo(i[0]*t,i[1]*t,r[0]*t,r[1]*t,s[0]*t,s[1]*t),e.stroke(),e.restore()},lCe=(e,t)=>{e.strokeStyle="#888",e.save(),e.beginPath(),e.moveTo(-10*t,-10*t),e.lineTo(10*t,10*t),e.moveTo(10*t,-10*t),e.lineTo(-10*t,10*t),e.stroke(),e.save()},bN=(e,t,n,i,r,s,o)=>{if(Bh(t)){if(!t.fixedPoint){console.warn("Binding must have a fixedPoint");return}const a=n.get(t.elementId),[l,c]=f0(t.fixedPoint,a,n);e.save(),e.strokeStyle=o,e.lineWidth=1,e.beginPath(),e.moveTo(l*i,c*i),e.bezierCurveTo(l*i-r,c*i-s,l*i-r,c*i+s,l*i,c*i),e.stroke(),e.restore()}},yN=(e,t,n,i,r,s,o)=>{if(Bh(e)){const a=n.get(e.elementId);if(!e.fixedPoint){console.warn("Binding must have a fixedPoint");return}const[l,c]=f0(e.fixedPoint,a,n);t.save(),t.strokeStyle=o,t.lineWidth=1,t.beginPath(),t.moveTo(l*i,c*i),t.bezierCurveTo(l*i+r,c*i+s,l*i+r,c*i-s,l*i,c*i),t.stroke(),t.restore()}},cCe=(e,t,n)=>{const i=ve(t),r=16;t.forEach(s=>{var o,a,l,c,u;if(!s.isDeleted){if(Ce(s)){if(s.startBinding){if(!((a=(o=i.get(s.startBinding.elementId))==null?void 0:o.boundElements)!=null&&a.find(d=>d.id===s.id)))return;bN(e,s.startBinding,i,n,r,r,"red")}if(s.endBinding){if(!((c=(l=i.get(s.endBinding.elementId))==null?void 0:l.boundElements)!=null&&c.find(d=>d.id===s.id)))return;bN(e,s.endBinding,i,n,r,r,"red")}}os(s)&&((u=s.boundElements)!=null&&u.length)&&s.boundElements.forEach(d=>{var h,m;if(d.type!=="arrow")return;const f=i.get(d.id);f&&((h=f.startBinding)==null?void 0:h.elementId)===s.id&&yN(f.startBinding,e,i,n,r,r,"green"),f&&((m=f.endBinding)==null?void 0:m.elementId)===s.id&&yN(f.endBinding,e,i,n,r,r,"green")})}})},EN=(e,t,n)=>{e.forEach(i=>{switch(!0){case xse(i.data):oCe(t,n.zoom.value,i.data,i.color);break;case Ese(i.data):aCe(t,n.zoom.value,i.data,i.color);break;default:throw new Error(`Unknown element type ${JSON.stringify(i)}`)}})},uCe=(e,t,n,i)=>{var a,l,c,u;const[r,s]=$y(e,i),o=Gy({canvas:e,scale:i,normalizedWidth:r,normalizedHeight:s,viewBackgroundColor:"transparent"});if(o.save(),o.translate(t.scrollX*t.zoom.value,t.scrollY*t.zoom.value),lCe(o,t.zoom.value),cCe(o,n,t.zoom.value),(a=window.visualDebug)!=null&&a.currentFrame&&((l=window.visualDebug)!=null&&l.data)&&window.visualDebug.data.length>0){const[d]=dCe();EN(window.visualDebug.data[d],o,t)}else(c=window.visualDebug)==null||c.data.forEach(d=>{EN(d,o,t)});window.visualDebug&&(window.visualDebug.data=((u=window.visualDebug)==null?void 0:u.data.map(d=>d.filter(f=>f.permanent)))??[])},dCe=()=>{var n,i,r;const e=((n=window.visualDebug)==null?void 0:n.currentFrame)??0,t=((i=window.visualDebug)==null?void 0:i.data.length)??0;return t>0?[e%t,((r=window.visualDebug)==null?void 0:r.currentFrame)??0]:[0,0]},fCe=bp((e,t,n,i)=>{uCe(e,t,n,i)},{trailing:!0}),ZK=()=>{var e;return Array.isArray((e=window.visualDebug)==null?void 0:e.data)},hCe=({onChange:e})=>{const t=L.useCallback(()=>{var s,o;(!((s=window.visualDebug)!=null&&s.currentFrame)||isNaN(((o=window.visualDebug)==null?void 0:o.currentFrame)??-1))&&(window.visualDebug.currentFrame=0),window.visualDebug.currentFrame+=1,e()},[e]),n=L.useCallback(()=>{var s,o,a;(!((s=window.visualDebug)!=null&&s.currentFrame)||isNaN(((o=window.visualDebug)==null?void 0:o.currentFrame)??-1)||((a=window.visualDebug)==null?void 0:a.currentFrame)<1)&&(window.visualDebug.currentFrame=1),window.visualDebug.currentFrame-=1,e()},[e]),i=L.useCallback(()=>{window.visualDebug.currentFrame=void 0,e()},[e]),r=L.useCallback(()=>{window.visualDebug&&(window.visualDebug.currentFrame=void 0,window.visualDebug.data=[]),e()},[e]);return N(fe,{children:[g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:r,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:$c})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:n,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(ov,{flip:!0})})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-forward","aria-label":"Move forward",type:"button",onClick:i,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:au})}),g("button",{className:"ToolIcon_type_button","data-testid":"debug-backward","aria-label":"Move backward",type:"button",onClick:t,children:g("div",{className:"ToolIcon__icon","aria-hidden":"true","aria-disabled":"false",children:g(ov,{})})})]})},gCe=ue.forwardRef(({appState:e,scale:t},n)=>{const{width:i,height:r}=e;return g("canvas",{style:{width:i,height:r,position:"absolute",zIndex:2,pointerEvents:"none"},width:i*t,height:r*t,ref:n,children:"Debug Canvas"})}),mCe=()=>{const{t:e}=fn();return g("a",{className:"encrypted-icon tooltip",href:"https://plus.excalidraw.com/blog/end-to-end-encryption",target:"_blank",rel:"noopener","aria-label":e("encrypted.link"),children:g(gl,{label:e("encrypted.tooltip"),long:!0,children:Fde})})},pCe=ue.memo(({onChange:e})=>g(kY,{children:N("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[ZK()&&g(hCe,{onChange:e}),!Cd&&g(mCe,{})]})}));function UCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q0(e){"@babel/helpers - typeof";return Q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q0(e)}function bCe(e,t){if(Q0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(Q0(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function yCe(e){var t=bCe(e,"string");return Q0(t)=="symbol"?t:t+""}function ECe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,yCe(i.key),i)}}function vCe(e,t,n){return t&&ECe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var qK=[],wCe=qK.forEach,_Ce=qK.slice;function TCe(e){return wCe.call(_Ce.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e}var vN=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ICe=function(t,n,i){var r=i||{};r.path=r.path||"/";var s=encodeURIComponent(n),o=t+"="+s;if(r.maxAge>0){var a=r.maxAge-0;if(isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age="+Math.floor(a)}if(r.domain){if(!vN.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!vN.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite){var l=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(l){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},wN={create:function(t,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};i&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+i*60*1e3)),r&&(s.domain=r),document.cookie=ICe(t,encodeURIComponent(n),s)},read:function(t){for(var n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(n)===0)return s.substring(n.length,s.length)}return null},remove:function(t){this.create(t,"",-1)}},SCe={name:"cookie",lookup:function(t){var n;if(t.lookupCookie&&typeof document<"u"){var i=wN.read(t.lookupCookie);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupCookie&&typeof document<"u"&&wN.create(n.lookupCookie,t,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},xCe={name:"querystring",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));for(var r=i.substring(1),s=r.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("=");if(a>0){var l=s[o].substring(0,a);l===t.lookupQuerystring&&(n=s[o].substring(a+1))}}}return n}},Sm=null,_N=function(){if(Sm!==null)return Sm;try{Sm=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Sm=!1}return Sm},CCe={name:"localStorage",lookup:function(t){var n;if(t.lookupLocalStorage&&_N()){var i=window.localStorage.getItem(t.lookupLocalStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupLocalStorage&&_N()&&window.localStorage.setItem(n.lookupLocalStorage,t)}},xm=null,TN=function(){if(xm!==null)return xm;try{xm=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{xm=!1}return xm},ACe={name:"sessionStorage",lookup:function(t){var n;if(t.lookupSessionStorage&&TN()){var i=window.sessionStorage.getItem(t.lookupSessionStorage);i&&(n=i)}return n},cacheUserLanguage:function(t,n){n.lookupSessionStorage&&TN()&&window.sessionStorage.setItem(n.lookupSessionStorage,t)}},MCe={name:"navigator",lookup:function(t){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var i=0;i<navigator.languages.length;i++)n.push(navigator.languages[i]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},RCe={name:"htmlTag",lookup:function(t){var n,i=t.htmlTag||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(n=i.getAttribute("lang")),n}},kCe={name:"path",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(i instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof i[t.lookupFromPathIndex]!="string")return;n=i[t.lookupFromPathIndex].replace("/","")}else n=i[0].replace("/","")}return n}},LCe={name:"subdomain",lookup:function(t){var n;if(typeof window<"u"){var i=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);i instanceof Array&&(typeof t.lookupFromSubdomainIndex=="number"?n=i[t.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):n=i[0].replace("http://","").replace("https://","").replace(".",""))}return n}};function DCe(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var QK=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};UCe(this,e),this.type="languageDetector",this.detectors={},this.init(t,n)}return vCe(e,[{key:"init",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n,this.options=TCe(i,this.options||{},DCe()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(SCe),this.addDetector(xCe),this.addDetector(CCe),this.addDetector(ACe),this.addDetector(MCe),this.addDetector(RCe),this.addDetector(kCe),this.addDetector(LCe)}},{key:"addDetector",value:function(n){this.detectors[n.name]=n}},{key:"detect",value:function(n){var i=this;n||(n=this.options.order);var r=[];return n.forEach(function(s){if(i.detectors[s]){var o=i.detectors[s].lookup(i.options);o&&typeof o=="string"&&(o=[o]),o&&(r=r.concat(o))}}),this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}},{key:"cacheUserLanguage",value:function(n,i){var r=this;i||(i=this.options.caches),i&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||i.forEach(function(s){r.detectors[s]&&r.detectors[s].cacheUserLanguage(n,r.options)}))}}]),e}();QK.type="languageDetector";const cS=new QK;cS.init({languageUtils:{}});const JK=()=>{var i;const e=cS.detect(),t=Array.isArray(e)?e[0]:e;return(t?(i=Uy.find(r=>r.code.startsWith(t)))==null?void 0:i.code:null)||$d.code},eZ=Wt(JK()),NCe=()=>{const[e,t]=Xh(eZ);return L.useEffect(()=>{cS.cacheUserLanguage(e)},[e]),[e,t]},OCe=({style:e})=>{const{t,langCode:n}=fn(),i=B_(eZ);return g("select",{className:"dropdown-select dropdown-select__language",onChange:({target:r})=>i(r.value),value:n,"aria-label":t("buttons.selectLanguage"),style:e,children:Uy.map(r=>g("option",{value:r.code,children:r.label},r.code))})},PCe=ue.memo(e=>N(ft,{children:[g(ft.DefaultItems.LoadScene,{}),g(ft.DefaultItems.SaveToActiveFile,{}),g(ft.DefaultItems.Export,{}),g(ft.DefaultItems.SaveAsImage,{}),e.isCollabEnabled&&g(ft.DefaultItems.LiveCollaborationTrigger,{isCollaborating:e.isCollaborating,onSelect:()=>e.onCollabDialogOpen()}),g(ft.DefaultItems.CommandPalette,{className:"highlighted"}),g(ft.DefaultItems.SearchMenu,{}),g(ft.DefaultItems.Help,{}),g(ft.DefaultItems.ClearCanvas,{}),e.onToggleLens&&g(ft.Item,{icon:the,onClick:e.onToggleLens,children:"Capture Lens"}),e.onToggleKanji&&g(ft.Item,{icon:k6,onClick:e.onToggleKanji,children:"Kanji Card"}),g(ft.Separator,{}),g(ft.ItemLink,{icon:k6,href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=hamburger",className:"",children:"Excalidraw+"}),g(ft.DefaultItems.Socials,{}),g(ft.ItemLink,{icon:HV,href:`https://app.excalidraw.com${Cd?"":"/sign-up"}?utm_source=signin&utm_medium=app&utm_content=hamburger`,className:"highlighted",children:Cd?"Sign in":"Sign up"}),Y9(),g(ft.Separator,{}),g(ft.DefaultItems.ToggleTheme,{allowSystemTheme:!0,theme:e.theme,onSelect:e.setTheme}),g(ft.ItemCustom,{children:g(OCe,{style:{width:"100%"}})}),g(ft.DefaultItems.ChangeCanvasBackground,{})]})),FCe=ue.memo(e=>{const{t}=fn();let n;return Cd?n=t("welcomeScreen.app.center_heading_plus").split(/(Excalidraw\+)/).map((i,r)=>i==="Excalidraw+"?g("a",{style:{pointerEvents:wu.inheritFromUI},href:"https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenSignedInUser",children:"Excalidraw+"},r):i):n=t("welcomeScreen.app.center_heading"),N(sr,{children:[g(sr.Hints.MenuHint,{children:t("welcomeScreen.app.menuHint")}),g(sr.Hints.ToolbarHint,{}),g(sr.Hints.HelpHint,{}),N(sr.Center,{children:[g(sr.Center.Logo,{}),g(sr.Center.Heading,{children:n}),N(sr.Center.Menu,{children:[g(sr.Center.MenuItemLoadScene,{}),g(sr.Center.MenuItemHelp,{}),e.isCollabEnabled&&g(sr.Center.MenuItemLiveCollaborationTrigger,{onSelect:()=>e.onCollabDialogOpen()}),!Cd&&g(sr.Center.MenuItemLink,{href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=welcomeScreenGuest",shortcut:null,icon:HV,children:"Sign up"})]})]})]})}),yw=async(e,t,n,i)=>{const r=await BK(),s=`${NB(12)}`,o=await RT(),a=await Hy(o,Rg(e,t,n,"database")),l=new Blob([a.iv,new Uint8Array(a.encryptedBuffer)],{type:Te.binary}),c=OK(r,`/migrations/scenes/${s}`);await NK(c,l,{customMetadata:{data:JSON.stringify({version:2,name:i}),created:Date.now().toString()}});const u=new Map;for(const d of e)Ln(d)&&n[d.fileId]&&u.set(d.fileId,n[d.fileId]);if(u.size){const d=await vI({files:u,encryptionKey:o,maxBytes:EI});await aS({prefix:`/migrations/files/scenes/${s}`,files:d})}window.open(`https://app.excalidraw.com/import?excalidraw=${s},${o}`)},BCe=({elements:e,appState:t,files:n,name:i,onError:r,onSuccess:s})=>{const{t:o}=fn();return N(Yv,{color:"primary",children:[g("div",{className:"Card-icon",children:g(DY,{style:{"--color-logo-icon":"#fff",width:"2.8rem",height:"2.8rem"}})}),g("h2",{children:"Excalidraw+"}),g("div",{className:"Card-details",children:o("exportDialog.excalidrawplus_description")}),g(Xe,{className:"Card-button",type:"button",title:o("exportDialog.excalidrawplus_button"),"aria-label":o("exportDialog.excalidrawplus_button"),showAriaLabel:!0,onClick:async()=>{try{Je("export","eplus",`ui (${yp()})`),await yw(e,t,n,i),s()}catch(a){console.error(a),a.name!=="AbortError"&&r(new Error(o("exportDialog.excalidrawplus_exportError")))}}})]})};class zCe extends ue.Component{constructor(){super(...arguments);F(this,"state",{hasError:!1,sentryEventId:"",localStorage:""})}render(){return this.state.hasError?this.errorSplash():this.props.children}componentDidCatch(n,i){const r={};for(const[s,o]of Object.entries({...localStorage}))try{r[s]=JSON.parse(o)}catch{r[s]=o}S9(s=>{s.setExtras(i);const o=M9(n);this.setState(a=>({hasError:!0,sentryEventId:o,localStorage:JSON.stringify(r)}))})}selectTextArea(n){n.target!==document.activeElement&&(n.preventDefault(),n.target.select())}async createGithubIssue(){let n="";try{const i=(await Ee(()=>import("./bug-issue-template-BID_ABWq.js"),__vite__mapDeps([]),import.meta.url)).default;n=encodeURIComponent(i(this.state.sentryEventId))}catch(i){console.error(i)}window.open(`https://github.com/excalidraw/excalidraw/issues/new?body=${n}`,"_blank","noopener noreferrer")}errorSplash(){return g("div",{className:"ErrorSplash excalidraw",children:N("div",{className:"ErrorSplash-messageContainer",children:[g("div",{className:"ErrorSplash-paragraph bigger align-center",children:g(Cr,{i18nKey:"errorSplash.headingMain",button:n=>g("button",{onClick:()=>window.location.reload(),children:n})})}),N("div",{className:"ErrorSplash-paragraph align-center",children:[g(Cr,{i18nKey:"errorSplash.clearCanvasMessage",button:n=>g("button",{onClick:()=>{try{localStorage.clear(),window.location.reload()}catch(i){console.error(i)}},children:n})}),g("br",{}),N("div",{className:"smaller",children:[g("span",{role:"img","aria-label":"warning",children:""}),R("errorSplash.clearCanvasCaveat"),g("span",{role:"img","aria-hidden":"true",children:""})]})]}),N("div",{children:[g("div",{className:"ErrorSplash-paragraph",children:R("errorSplash.trackedToSentry",{eventId:this.state.sentryEventId})}),g("div",{className:"ErrorSplash-paragraph",children:g(Cr,{i18nKey:"errorSplash.openIssueMessage",button:n=>g("button",{onClick:()=>this.createGithubIssue(),children:n})})}),g("div",{className:"ErrorSplash-paragraph",children:N("div",{className:"ErrorSplash-details",children:[g("label",{children:R("errorSplash.sceneContent")}),g("textarea",{rows:5,onPointerDown:this.selectTextArea,readOnly:!0,value:this.state.localStorage})]})})]})]})})}}const tZ=Wt({isOpen:!1}),HCe=()=>{const e=window.navigator,t=/Apple/.test(e.vendor),n=e.appVersion.indexOf("Win")!==-1;return t?Lde:n?Nde:K_},VCe=({collabAPI:e,activeRoomLink:t,handleClose:n})=>{const{t:i}=fn(),[,r]=L.useState(!1),s=L.useRef(0),o=L.useRef(null),a="share"in navigator,{onCopy:l,copyStatus:c}=tI(),u=async()=>{var f;try{await cu(t)}catch{e.setCollabError(i("errors.copyToSystemClipboardFailed"))}r(!0),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{r(!1)},3e3),(f=o.current)==null||f.select()},d=async()=>{try{await navigator.share({title:i("roomDialog.shareTitle"),text:i("roomDialog.shareTitle"),url:t})}catch{}};return N(fe,{children:[g("h3",{className:"ShareDialog__active__header",children:i("labels.liveCollaboration").replace(/\./g,"")}),g(xd,{defaultValue:e.getUsername(),placeholder:"Your name",label:"Your name",onChange:e.setUsername,onKeyDown:f=>f.key===V.ENTER&&n()}),N("div",{className:"ShareDialog__active__linkRow",children:[g(xd,{ref:o,label:"Link",readonly:!0,fullWidth:!0,value:t}),a&&g(ks,{size:"large",variant:"icon",label:"Share",icon:HCe(),className:"ShareDialog__active__share",onClick:d}),g(ks,{size:"large",label:i("buttons.copyLink"),icon:kp,status:c,onClick:()=>{u(),l()}})]}),N("div",{className:"ShareDialog__active__description",children:[N("p",{children:[N("span",{role:"img","aria-hidden":"true",className:"ShareDialog__active__description__emoji",children:[""," "]}),i("roomDialog.desc_privacy")]}),g("p",{children:i("roomDialog.desc_exitSession")})]}),g("div",{className:"ShareDialog__active__actions",children:g(ks,{size:"large",variant:"outlined",color:"danger",label:i("roomDialog.button_stopSession"),icon:Tfe,onClick:()=>{Je("share","room closed"),e.stopCollaboration(),e.isCollaborating()||n()}})})]})},$Ce=e=>{const{t}=fn(),{collabAPI:n}=e,i=n?N(fe,{children:[g("div",{className:"ShareDialog__picker__header",children:t("labels.liveCollaboration").replace(/\./g,"")}),N("div",{className:"ShareDialog__picker__description",children:[g("div",{style:{marginBottom:"1em"},children:t("roomDialog.desc_intro")}),t("roomDialog.desc_privacy")]}),g("div",{className:"ShareDialog__picker__button",children:g(ks,{size:"large",label:t("roomDialog.button_startSession"),icon:_fe,onClick:()=>{Je("share","room creation",`ui (${yp()})`),n.startCollaboration(null)}})}),e.type==="share"&&g("div",{className:"ShareDialog__separator",children:g("span",{children:t("shareDialog.or")})})]}):null;return N(fe,{children:[i,e.type==="share"&&N(fe,{children:[g("div",{className:"ShareDialog__picker__header",children:t("exportDialog.link_title")}),g("div",{className:"ShareDialog__picker__description",children:t("exportDialog.link_details")}),g("div",{className:"ShareDialog__picker__button",children:g(ks,{size:"large",label:t("exportDialog.link_button"),icon:D6,onClick:async()=>{await e.onExportToBackend(),e.handleClose()}})})]})]})},GCe=e=>{const t=hh(KK);return g(ls,{size:"small",onCloseRequest:e.handleClose,title:!1,children:g("div",{className:"ShareDialog",children:e.collabAPI&&t?g(VCe,{collabAPI:e.collabAPI,activeRoomLink:t,handleClose:e.handleClose}):g($Ce,{...e})})})},XCe=e=>{const[t,n]=Xh(tZ),{openDialog:i}=ai();return L.useEffect(()=>{i&&n({isOpen:!1})},[i,n]),t.isOpen?g(GCe,{handleClose:()=>n({isOpen:!1}),collabAPI:e.collabAPI,onExportToBackend:e.onExportToBackend,type:t.type}):null},IN=()=>{var e;return(e=window.matchMedia)==null?void 0:e.call(window,"(prefers-color-scheme: dark)")},jCe=()=>{const[e,t]=L.useState(()=>localStorage.getItem(Sn.LOCAL_STORAGE_THEME)||ke.LIGHT),[n,i]=L.useState(ke.LIGHT);return L.useEffect(()=>{const r=IN(),s=a=>{i(a.matches?ke.DARK:ke.LIGHT)};e==="system"&&(r==null||r.addEventListener("change",s));const o=a=>{!a[V.CTRL_OR_CMD]&&a.altKey&&a.shiftKey&&a.code===it.D&&(a.preventDefault(),a.stopImmediatePropagation(),t(n===ke.DARK?ke.LIGHT:ke.DARK))};return document.addEventListener(te.KEYDOWN,o,{capture:!0}),()=>{r==null||r.removeEventListener("change",s),document.removeEventListener(te.KEYDOWN,o,{capture:!0})}},[e,n,t]),L.useLayoutEffect(()=>{var r;localStorage.setItem(Sn.LOCAL_STORAGE_THEME,e),i(e==="system"?(r=IN())!=null&&r.matches?ke.DARK:ke.LIGHT:e)},[e]),{editorTheme:n,appTheme:e,setAppTheme:t}},YCe=({excalidrawAPI:e})=>N(fe,{children:[g(pwe,{generate:async({frame:t,children:n})=>{const i=e.getAppState(),r=await r8e({elements:n,appState:{...i,exportBackground:!0,viewBackgroundColor:i.viewBackgroundColor},exportingFrame:t,files:e.getFiles(),mimeType:Te.jpg}),s=await bX(r),o=hz(n),a=await fetch("https://oss-ai.excalidraw.com/v1/ai/diagram-to-code/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({texts:o,image:s,theme:i.theme})});if(!a.ok){const l=await a.text(),c=Jse(l);if(!c)throw new Error(l);if(c.statusCode===429)return{html:`<html>
                <body style="margin: 0; text-align: center">
                <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; height: 100vh; padding: 0 60px">
                  <div style="color:red">Too many requests today,</br>please try again tomorrow!</div>
                  </br>
                  </br>
                  <div>You can also try <a href="https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=d2c" target="_blank" rel="noopener">Excalidraw+</a> to get more requests.</div>
                </div>
                </body>
                </html>`};throw new Error(c.message||l)}try{const{html:l}=await a.json();if(!l)throw new Error("Generation failed (invalid response)");return{html:l}}catch{throw new Error("Generation failed (invalid response)")}}}),g(IY,{onTextSubmit:async t=>{try{const n=await fetch("https://oss-ai.excalidraw.com/v1/ai/text-to-diagram/generate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({prompt:t})}),i=n.headers.has("X-Ratelimit-Limit")?parseInt(n.headers.get("X-Ratelimit-Limit")||"0",10):void 0,r=n.headers.has("X-Ratelimit-Remaining")?parseInt(n.headers.get("X-Ratelimit-Remaining")||"0",10):void 0,s=await n.json();if(!n.ok){if(n.status===429)return{rateLimit:i,rateLimitRemaining:r,error:new Error("Too many requests today, please try again tomorrow!")};throw new Error(s.message||"Generation failed...")}const o=s.generatedResponse;if(!o)throw new Error("Generation failed...");return{generatedResponse:o,rateLimit:i,rateLimitRemaining:r}}catch{throw new Error("Request failed")}}})]}),WCe="REQUEST_SCENE",p2="https://app.excalidraw.com",KCe=async({rawElementsString:e,rawAppStateString:t})=>{if(!e||!t)throw new to("Elements or appstate is missing.");try{const n=JSON.parse(e);if(!n.length)throw new to("Scene is empty, nothing to export.");const i=JSON.parse(t),r=n.reduce((o,a)=>("fileId"in a&&a.fileId&&o.push(a.fileId),o),[]),s=await Ci.fileStorage.getFiles(r);return{type:"SCENE_DATA",elements:n,appState:i,files:s}}catch(n){throw n instanceof to?n:new to("Failed to parse scene data.")}},ZCe=async({token:e,publicKey:t})=>{try{const[n,i,r]=e.split(".");if(!n||!i||!r)throw new to("Invalid JWT format");const s=Mk(i),o=Mk(r),a=`${n}.${i}`,l=Uint8Array.from(o,p=>p.charCodeAt(0)),c=t.replace(/-----\w+ PUBLIC KEY-----/g,""),u=Uint8Array.from(atob(c),p=>p.charCodeAt(0)),d=await crypto.subtle.importKey("spki",u,{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},!0,["verify"]);if(!await crypto.subtle.verify("RSASSA-PKCS1-v1_5",d,l,new TextEncoder().encode(a)))throw new Error("Invalid JWT");const h=JSON.parse(s),m=Math.floor(Date.now()/1e3);if(h.exp&&h.exp<m)throw new Error("JWT has expired")}catch(n){throw console.error("Failed to verify JWT:",n),new Error(n instanceof Error?n.message:"Invalid JWT")}},qCe=()=>{const e=L.useRef(!1);return L.useLayoutEffect(()=>{const t=async n=>{if(n.origin!==p2)throw new to("Invalid origin");if(n.data.type===WCe){if(!n.data.jwt)throw new to("JWT is missing");try{try{await ZCe({token:n.data.jwt,publicKey:`MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEApQ0jM9Qz8TdFLzcuAZZX
/WvuKSOJxiw6AR/ZcE3eFQWM/mbFdhQgyK8eHGkKQifKzH1xUZjCxyXcxW6ZO02t
kPOPxhz+nxUrIoWCD/V4NGmUA1lxwHuO21HN1gzKrN3xHg5EGjyouR9vibT9VDGF
gq6+4Ic/kJX+AD2MM7Yre2+FsOdysrmuW2Fu3ahuC1uQE7pOe1j0k7auNP0y1q53
PrB8Ts2LUpepWC1l7zIXFm4ViDULuyWXTEpUcHSsEH8vpd1tckjypxCwkipfZsXx
iPszy0o0Dx2iArPfWMXlFAI9mvyFCyFC3+nSvfyAUb2C4uZgCwAuyFh/ydPF4DEE
PQIDAQAB`})}catch(r){throw console.error(`Failed to verify JWT: ${r.message}`),new to("Failed to verify JWT")}const i=await KCe({rawAppStateString:localStorage.getItem(Sn.LOCAL_STORAGE_APP_STATE),rawElementsString:localStorage.getItem(Sn.LOCAL_STORAGE_ELEMENTS)});n.source.postMessage(i,{targetOrigin:p2})}catch(i){const r={type:"ERROR",message:i instanceof to?i.message:"Failed to export scene data"};n.source.postMessage(r,{targetOrigin:p2})}}};if(window.addEventListener("message",t),!e.current){e.current=!0;const n={type:"READY"};window.parent.postMessage(n,p2)}return()=>{window.removeEventListener("message",t)}},[]),null},QCe=({isSignedIn:e})=>g("a",{href:e?"https://app.excalidraw.com":"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=guestBanner#excalidraw-redirect",target:"_blank",rel:"noopener",className:"plus-banner",children:"Excalidraw+"}),SN=({children:e,href:t})=>g("a",{href:t,target:"_blank",rel:"noopener",className:"link-button",children:g(ks,{children:e})}),JCe=()=>{const{theme:e,openSidebar:t}=ai();return N(s5,{children:[N(s5.TabTriggers,{children:[g(wr.TabTrigger,{tab:"comments",style:{opacity:(t==null?void 0:t.tab)==="comments"?1:.4},children:Jfe}),g(wr.TabTrigger,{tab:"presentation",style:{opacity:(t==null?void 0:t.tab)==="presentation"?1:.4},children:ehe})]}),g(wr.Tab,{tab:"comments",children:N("div",{className:"app-sidebar-promo-container",children:[g("div",{className:"app-sidebar-promo-image",style:{"--image-source":`url(/oss_promo_comments_${e===ke.DARK?"dark":"light"}.jpg)`,opacity:.7}}),g("div",{className:"app-sidebar-promo-text",children:"Make comments with Excalidraw+"}),g(SN,{href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=comments_promo#excalidraw-redirect",children:"Sign up now"})]})}),g(wr.Tab,{tab:"presentation",className:"px-3",children:N("div",{className:"app-sidebar-promo-container",children:[g("div",{className:"app-sidebar-promo-image",style:{"--image-source":`url(/oss_promo_presentations_${e===ke.DARK?"dark":"light"}.svg)`,backgroundSize:"60%",opacity:.4}}),g("div",{className:"app-sidebar-promo-text",children:"Create presentations with Excalidraw+"}),g(SN,{href:"https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=presentations_promo#excalidraw-redirect",children:"Sign up now"})]})})]})},eAe=({excalidrawAPI:e,onClose:t})=>{const[n,i]=L.useState({x:100,y:100}),[r,s]=L.useState({width:400,height:300}),[o,a]=L.useState(!1),[l,c]=L.useState(!1),[u,d]=L.useState(null),[f,h]=L.useState(!1),m=L.useRef({x:0,y:0,posX:0,posY:0}),p=L.useRef({x:0,y:0,width:0,height:0,posX:0,posY:0}),U=L.useCallback((x,_)=>{x.preventDefault(),x.stopPropagation(),_?(c(!0),d(_),p.current={x:x.clientX,y:x.clientY,width:r.width,height:r.height,posX:n.x,posY:n.y}):(a(!0),m.current={x:x.clientX,y:x.clientY,posX:n.x,posY:n.y})},[n,r]),b=L.useCallback(x=>{if(o){const _=x.clientX-m.current.x,T=x.clientY-m.current.y;i({x:m.current.posX+_,y:m.current.posY+T})}else if(l&&u){const _=x.clientX-p.current.x,T=x.clientY-p.current.y,A=p.current;let C=A.width,k=A.height,P=A.posX,D=A.posY;u.includes("e")?C=Math.max(100,A.width+_):u.includes("w")&&(C=Math.max(100,A.width-_),P=A.posX+(A.width-C)),u.includes("s")?k=Math.max(100,A.height+T):u.includes("n")&&(k=Math.max(100,A.height-T),D=A.posY+(A.height-k)),s({width:C,height:k}),i({x:P,y:D})}},[o,l,u]),y=L.useCallback(()=>{a(!1),c(!1),d(null)},[]);ue.useEffect(()=>{if(o||l)return window.addEventListener("mousemove",b),window.addEventListener("mouseup",y),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",y)}},[o,l,b,y]);const w=L.useCallback(async()=>{try{const x=e.getAppState(),_=e.getSceneElements(),T=e.getFiles(),A=document.querySelector(".excalidraw");if(!A){console.error("Canvas container not found. Ensure the Excalidraw component is wrapped in a div with class '.excalidraw-wrapper' or similar.");return}const C=A.getBoundingClientRect(),k=n.x-C.left,P=n.y-C.top,D=x.zoom.value,j=x.scrollX,G=x.scrollY,B=k/D-j,H=P/D-G,$=B+r.width/D,X=H+r.height/D,W=_.filter(oe=>{if(oe.isDeleted)return!1;const[ne,ie,me,Re]=nt([oe]);return!(me<B||ne>$||Re<H||ie>X)});W.length===0&&console.warn("No elements in lens area"),(await K6(W,{...x,exportScale:2},T,{exportBackground:!0,viewBackgroundColor:x.viewBackgroundColor})).toBlob(oe=>{if(oe){const ne=URL.createObjectURL(oe),ie=document.createElement("a");ie.href=ne,ie.download=`excalidraw-lens-capture-${Date.now()}.png`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(ne)}})}catch(x){console.error("Error capturing lens area:",x)}},[e,n,r]),v=L.useCallback(async()=>{try{h(!0);const x=e.getAppState(),_=e.getSceneElements(),T=e.getFiles(),A=document.querySelector(".excalidraw");if(!A){console.error("Canvas container not found."),h(!1);return}const C=A.getBoundingClientRect(),k=n.x-C.left,P=n.y-C.top,D=x.zoom.value,j=x.scrollX,G=x.scrollY,B=k/D-j,H=P/D-G,$=B+r.width/D,X=H+r.height/D,W=_.filter(me=>{if(me.isDeleted)return!1;const[Re,Ve,wt,Ot]=nt([me]);return!(wt<B||Re>$||Ot<H||Ve>X)}),oe=(await K6(W,{...x,exportScale:2},T,{exportBackground:!0,viewBackgroundColor:x.viewBackgroundColor})).toDataURL("image/jpeg").split(",")[1],ne=await fetch("http://localhost:3001/ocr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:oe,fileType:1})});if(!ne.ok)throw new Error(`OCR API error: ${ne.statusText}`);const ie=await ne.json();if(console.log("=== OCR Response ==="),console.log(ie),ie.result&&ie.result.ocrResults&&ie.result.ocrResults.length>0){const me=ie.result.ocrResults[0].prunedResult.rec_texts;console.log("Recognized text:"),me.forEach((Ve,wt)=>{console.log(`  [${wt}]: ${Ve}`)});const Re=me.join(`
`);alert(`OCR completed!

Recognized text:
${Re}`)}else console.log("No OCR results found"),console.log("Full response:",JSON.stringify(ie,null,2)),alert("OCR completed but no text was detected.")}catch(x){console.error("Error during OCR:",x),alert(`OCR failed: ${x instanceof Error?x.message:"Unknown error"}`)}finally{h(!1)}},[e,n,r]),I=x=>g("div",{className:`lens-resize-handle lens-resize-handle-${x}`,onMouseDown:_=>U(_,x)});return N("div",{className:"lens-overlay",style:{left:n.x,top:n.y,width:r.width,height:r.height},children:[g("div",{className:"lens-content",onMouseDown:x=>U(x),children:N("div",{className:"lens-controls",children:[g("button",{className:"lens-button lens-capture-button",onClick:w,title:"Capture this area",children:" Capture"}),g("button",{className:"lens-button lens-ocr-button",onClick:v,disabled:f,title:"Run OCR on this area",children:f?"Processing...":N(fe,{children:[Gfe," OCR"]})}),g("button",{className:"lens-button lens-close-button",onClick:t,title:"Close lens",children:""})]})}),I("nw"),I("n"),I("ne"),I("e"),I("se"),I("s"),I("sw"),I("w")]})},U2=[{id:1,number:"1",word:"one",kanji:"",key:["floor","ceiling"],key_words:["floor","ceiling"],mark:!0,story:g(fe,{children:"* As a primitive element, the key-word meaning is discarded, and the single horizontal stroke takes on the meaning of floor or ceiling, depending on its position: if it stands above another primitive, it means ceiling; if below, floor."})},{id:8,number:"8",word:"eight",kanji:"",key:["eight"],key_words:["eight","floor"],mark:!0,story:N(fe,{children:['Just as the Arabic numeral "8" is composed of a small circle followed by a larger one, so the kanji for ',g("strong",{children:"eight"}),' is composed of a short line followed by a longer line, slanting towards it but not touching it. And just as the "lazy 8"  is the mathematical symbol for "infinity," so the expanse opened up below these two strokes is associated by the Japanese with the sense of an'," ",g("em",{children:"infinite expanse"}),' or something "all-encompassing." [2]']})}],tAe=({onClose:e})=>{const[t,n]=L.useState(0),[i,r]=L.useState({x:window.innerWidth/2,y:window.innerHeight/4}),[s,o]=L.useState({width:600,height:400}),[a,l]=L.useState(!1),[c,u]=L.useState(!1),[d,f]=L.useState({x:0,y:0}),[h,m]=L.useState({x:0,y:0,width:0,height:0}),p=T=>{T.stopPropagation(),n(A=>(A+1)%U2.length)},U=T=>{T.stopPropagation(),n(A=>A===0?U2.length-1:A-1)},b=T=>{c||(l(!0),f({x:T.clientX-i.x,y:T.clientY-i.y}))},y=T=>{T.stopPropagation(),u(!0),m({x:T.clientX,y:T.clientY,width:s.width,height:s.height})},w=T=>{if(a)r({x:T.clientX-d.x,y:T.clientY-d.y});else if(c){const A=T.clientX-h.x,C=T.clientY-h.y;o({width:Math.max(300,h.width+A),height:Math.max(200,h.height+C)})}},v=()=>{l(!1),u(!1)},I=U2[t],[x,_]=L.useState(null);return g("div",{className:"KanjiOverlay",style:{top:i.y,left:i.x,width:s.width,height:s.height,transform:"translate(-50%, -50%)",cursor:a?"grabbing":"default"},onMouseMove:w,onMouseUp:v,onMouseLeave:v,children:g("div",{style:{width:"100%",height:"100%"},onMouseDown:b,children:N(Zr,{padding:4,className:"KanjiOverlay__island",style:{width:"100%",height:"100%"},children:[g(ml,{onSelect:e,"data-testid":"sidebar-close",className:"sidebar__close",style:{width:24,height:24},children:au}),N("div",{className:"KanjiOverlay__navigation",children:[g("button",{className:"KanjiOverlay__nav-button",onClick:U,"aria-label":"Previous card",onMouseDown:T=>T.stopPropagation(),children:""}),g("button",{className:"KanjiOverlay__nav-button",onClick:p,"aria-label":"Next card",onMouseDown:T=>T.stopPropagation(),children:""})]}),N("div",{className:"KanjiOverlay__header",children:[N("div",{className:"KanjiOverlay__kanji",children:[I.mark&&g("div",{className:"KanjiOverlay__mark",children:"*"}),I.kanji]}),g("div",{className:"KanjiOverlay__word",children:I.word})]}),g("div",{className:"KanjiOverlay__keywords",children:I.key_words.map((T,A)=>g("button",{className:"KanjiOverlay__keyword-chip",onClick:()=>{const C=U2.findIndex(k=>k.key.includes(T));C!==-1&&n(C)},type:"button",children:T},A))}),g("div",{className:"KanjiOverlay__body",children:g("div",{className:"KanjiOverlay__description",children:I.story})}),g("div",{style:{width:"100%",height:"100%"},onMouseDown:T=>T.stopPropagation(),children:g(yI,{excalidrawAPI:T=>_(T),viewModeEnabled:!1,zenModeEnabled:!0,gridModeEnabled:!1,UIOptions:{canvasActions:{changeViewBackgroundColor:!1,clearCanvas:!1,export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1}}})}),g("div",{className:"KanjiOverlay__resize-handle",onMouseDown:y})]})})})};var nAe={};PY();window.EXCALIDRAW_THROTTLE_RENDER=!0;let xf=null;window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),xf=e});let nZ=!1;if(window.self!==window.top)try{const e=new URL(document.referrer),t=new URL(window.location.href);e.origin===t.origin&&(nZ=!0)}catch{}const xN={title:R("overwriteConfirm.modal.shareableLink.title"),description:g(Cr,{i18nKey:"overwriteConfirm.modal.shareableLink.description",bold:e=>g("strong",{children:e}),br:()=>g("br",{})}),actionLabel:R("overwriteConfirm.modal.shareableLink.button"),color:"danger"},Ew=async e=>{var c,u;const n=new URLSearchParams(window.location.search).get("id"),i=window.location.hash.match(/^#json=([a-zA-Z0-9_-]+),([a-zA-Z0-9_-]+)$/),r=window.location.hash.match(/^#url=(.*)$/),s=HY();let o=await pN(null,null,s),a=Fxe(window.location.href);const l=!!(n||i||a);if(l)if(!o.elements.length||a||await Vv(xN))i&&(o=await pN(i[1],i[2],s)),o.scrollToContent=!0,a||window.history.replaceState({},Ec,window.location.origin);else{if(document.hidden)return new Promise((d,f)=>{window.addEventListener("focus",()=>Ew(e).then(d).catch(f),{once:!0})});a=null,window.history.replaceState({},Ec,window.location.origin)}else if(r){window.history.replaceState({},Ec,window.location.origin);const d=r[1];try{const f=await fetch(window.decodeURIComponent(d)),h=await PT(await f.blob(),null,null);if(!o.elements.length||await Vv(xN))return{scene:h,isExternalScene:l}}catch{return{scene:{appState:{errorMessage:R("alerts.invalidSceneUrl")}},isExternalScene:l}}}if(a&&e.collabAPI){const{excalidrawAPI:d}=e,f=await e.collabAPI.startCollaboration(a);return{scene:{...f,appState:{...fX({...f==null?void 0:f.appState,theme:((c=s==null?void 0:s.appState)==null?void 0:c.theme)||((u=f==null?void 0:f.appState)==null?void 0:u.theme)},d.getAppState()),isLoading:!1},elements:bI((f==null?void 0:f.elements)||[],d.getSceneElementsIncludingDeleted(),d.getAppState())},isExternalScene:!0,id:a.roomId,key:a.roomKey}}else if(o)return l&&i?{scene:o,isExternalScene:l,id:i[1],key:i[2]}:{scene:o,isExternalScene:!1};return{scene:null,isExternalScene:!1}},iAe=()=>{const[e,t]=L.useState(""),n=Kse(),{editorTheme:i,appTheme:r,setAppTheme:s}=jCe(),[o,a]=NCe(),l=Nn(),c=L.useRef({promise:null});c.current.promise||(c.current.promise=iy());const u=L.useRef(null);L.useEffect(()=>{Je("load","frame",yp()),setTimeout(()=>{Je("load","version",S4())},Pre)},[]);const[d,f]=zX(),[,h]=Xh(tZ),[m]=Xh(YK),[p]=Dwe(bw,()=>mN(window.location.href)),U=hh(Uw);u8e({excalidrawAPI:d,adapter:C5,migrationAdapter:nCe});const[,b]=L.useState(!1),[y,w]=L.useState(!1),[v,I]=L.useState(!1);L.useEffect(()=>{},[d]),L.useEffect(()=>{if(!d||!n&&!m)return;const B=(Q,oe=!1)=>{var ne;if(Q.scene)if(m!=null&&m.isCollaborating())Q.scene.elements&&m.fetchImageFilesFromFirebase({elements:Q.scene.elements,forceFetchFiles:!0}).then(({loadedFiles:ie,erroredFiles:me})=>{d.addFiles(ie),Wm({excalidrawAPI:d,erroredFiles:me,elements:d.getSceneElementsIncludingDeleted()})});else{const ie=((ne=Q.scene.elements)==null?void 0:ne.reduce((me,Re)=>Ln(Re)?me.concat(Re.fileId):me,[]))||[];Q.isExternalScene?HK(`${BY.shareLinkFiles}/${Q.id}`,Q.key,ie).then(({loadedFiles:me,erroredFiles:Re})=>{d.addFiles(me),Wm({excalidrawAPI:d,erroredFiles:Re,elements:d.getSceneElementsIncludingDeleted()})}):oe&&(ie.length&&Ci.fileStorage.getFiles(ie).then(({loadedFiles:me,erroredFiles:Re})=>{me.length&&d.addFiles(me),Wm({excalidrawAPI:d,erroredFiles:Re,elements:d.getSceneElementsIncludingDeleted()})}),Ci.fileStorage.clearObsoleteFiles({currentFileIds:ie}))}};Ew({collabAPI:m,excalidrawAPI:d}).then(async Q=>{B(Q,!0),c.current.promise.resolve(Q.scene)});const H=async Q=>{Q.preventDefault(),Lv()||(m!=null&&m.isCollaborating()&&!mN(window.location.href)&&m.stopCollaboration(!1),d.updateScene({appState:{isLoading:!0}}),Ew({collabAPI:m,excalidrawAPI:d}).then(ne=>{B(ne),ne.scene&&d.updateScene({...ne.scene,...Sd(ne.scene,null,null,{repairBindings:!0}),captureUpdate:K.IMMEDIATELY})}))},$=sl(()=>{if(!document.hidden&&(m&&!m.isCollaborating()||n)){if(UN(Sn.VERSION_DATA_STATE)){const Q=HY(),oe=zY();a(JK()),d.updateScene({...Q,captureUpdate:K.NEVER}),C5.load().then(ne=>{ne&&d.updateLibrary({libraryItems:ne.libraryItems})}),m==null||m.setUsername(oe||"")}if(UN(Sn.VERSION_FILES)){const Q=d.getSceneElementsIncludingDeleted(),oe=d.getFiles(),ne=(Q==null?void 0:Q.reduce((ie,me)=>Ln(me)&&!oe[me.fileId]?ie.concat(me.fileId):ie,[]))||[];ne.length&&Ci.fileStorage.getFiles(ne).then(({loadedFiles:ie,erroredFiles:me})=>{ie.length&&d.addFiles(ie),Wm({excalidrawAPI:d,erroredFiles:me,elements:d.getSceneElementsIncludingDeleted()})})}}},Twe),X=()=>{Ci.flushSave()},W=Q=>{(Q.type===te.BLUR||document.hidden)&&Ci.flushSave(),(Q.type===te.VISIBILITY_CHANGE||Q.type===te.FOCUS)&&$()};return window.addEventListener(te.HASHCHANGE,H,!1),window.addEventListener(te.UNLOAD,X,!1),window.addEventListener(te.BLUR,W,!1),document.addEventListener(te.VISIBILITY_CHANGE,W,!1),window.addEventListener(te.FOCUS,W,!1),()=>{window.removeEventListener(te.HASHCHANGE,H,!1),window.removeEventListener(te.UNLOAD,X,!1),window.removeEventListener(te.BLUR,W,!1),window.removeEventListener(te.FOCUS,W,!1),document.removeEventListener(te.VISIBILITY_CHANGE,W,!1)}},[n,m,d,a]),L.useEffect(()=>{const B=H=>{Ci.flushSave(),d&&Ci.fileStorage.shouldPreventUnload(d.getSceneElements())&&(nAe.VITE_APP_DISABLE_PREVENT_UNLOAD!=="true"?j9(H):console.warn("preventing unload disabled (VITE_APP_DISABLE_PREVENT_UNLOAD)"))};return window.addEventListener(te.BEFORE_UNLOAD,B),()=>{window.removeEventListener(te.BEFORE_UNLOAD,B)}},[d]);const x=(B,H,$)=>{m!=null&&m.isCollaborating()&&m.syncElements(B),Ci.isSavePaused()||Ci.save(B,H,$,()=>{if(d){let X=!1;const W=d.getSceneElementsIncludingDeleted().map(Q=>{if(Ci.fileStorage.shouldUpdateImageElementStatus(Q)){const oe=Ie(Q,{status:"saved"});return oe!==Q&&(X=!0),oe}return Q});X&&d.updateScene({elements:W,captureUpdate:K.NEVER})}}),u.current&&d&&fCe(u.current,H,B,window.devicePixelRatio)},[_,T]=L.useState(null),A=async(B,H,$)=>{if(B.length===0)throw new Error(R("alerts.cannotExportEmptyCanvas"));try{const{url:X,errorMessage:W}=await $xe(B,{...H,viewBackgroundColor:H.exportBackground?H.viewBackgroundColor:ia().viewBackgroundColor},$);if(W)throw new Error(W);X&&T(X)}catch(X){if(X.name!=="AbortError"){const{width:W,height:Q}=H;throw console.error(X,{width:W,height:Q,devicePixelRatio:window.devicePixelRatio}),new Error(X.message)}}},C=(B,H)=>g(Lwe,{setToast:$=>d.setToast({message:$}),appState:H,elements:B}),k=hh(WK),P=hh(fb),D=L.useCallback(()=>h({isOpen:!0,type:"collaborationOnly"}),[h]);if(nZ)return g("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",height:"100%"},children:g("h1",{children:"I'm not a pretzel!"})});const j={label:"Excalidraw+",category:ot.links,predicate:!0,icon:g("div",{style:{width:14},children:k6}),keywords:["plus","cloud","server"],perform:()=>{window.open("https://plus.excalidraw.com/plus?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}},G={label:"Sign up",category:ot.links,predicate:!0,icon:g("div",{style:{width:14},children:k6}),keywords:["excalidraw","plus","cloud","server","signin","login","signup"],perform:()=>{window.open("https://app.excalidraw.com?utm_source=excalidraw&utm_medium=app&utm_content=command_palette","_blank")}};return N("div",{style:{height:"100%"},className:ce("excalidraw-app",{"is-collaborating":p}),children:[N(yI,{excalidrawAPI:f,onChange:x,initialData:c.current.promise,isCollaborating:p,onPointerUpdate:m==null?void 0:m.onPointerUpdate,UIOptions:{canvasActions:{toggleTheme:!0,export:{onExportToBackend:A,renderCustomUI:d?(B,H,$)=>g(BCe,{elements:B,appState:H,files:$,name:d.getName(),onError:X=>{d==null||d.updateScene({appState:{errorMessage:X.message}})},onSuccess:()=>{d.updateScene({appState:{openDialog:null}})}}):void 0}}},langCode:o,renderCustomStats:C,detectScroll:!1,handleKeyboardGlobally:!0,autoFocus:!0,theme:i,renderTopRightUI:B=>B||!m||n?null:N("div",{className:"excalidraw-ui-top-right",children:[(d==null?void 0:d.getEditorInterface().formFactor)==="desktop"&&g(QCe,{isSignedIn:Cd}),U.message&&g(jK,{collabError:U}),g(LY,{isCollaborating:p,onSelect:()=>h({isOpen:!0,type:"share"}),editorInterface:l})]}),onLinkOpen:(B,H)=>{B.link&&uh(B.link)&&(H.preventDefault(),d==null||d.scrollToContent(B.link,{animate:!0}))},children:[g(PCe,{onCollabDialogOpen:D,isCollaborating:p,isCollabEnabled:!n,theme:r,setTheme:B=>s(B),refresh:()=>b(B=>!B),onToggleLens:()=>w(B=>!B),onToggleKanji:()=>I(B=>!B)}),g(FCe,{onCollabDialogOpen:D,isCollabEnabled:!n}),N(Hu,{children:[g(Hu.Actions.ExportToImage,{}),g(Hu.Actions.SaveToDisk,{}),d&&g(Hu.Action,{title:R("overwriteConfirm.action.excalidrawPlus.title"),actionLabel:R("overwriteConfirm.action.excalidrawPlus.button"),onClick:()=>{yw(d.getSceneElements(),d.getAppState(),d.getFiles(),d.getName())},children:R("overwriteConfirm.action.excalidrawPlus.description")})]}),g(pCe,{onChange:()=>d==null?void 0:d.refresh()}),d&&g(YCe,{excalidrawAPI:d}),g(FY,{}),p&&k&&g("div",{className:"alertalert--warning",children:R("alerts.collabOfflineWarning")}),P&&g("div",{className:"alert alert--danger",children:R("alerts.localStorageQuotaExceeded")}),_&&g(ywe,{link:_,onCloseRequest:()=>T(null),setErrorMessage:t}),d&&!n&&g(sCe,{excalidrawAPI:d}),g(XCe,{collabAPI:m,onExportToBackend:async()=>{if(d)try{await A(d.getSceneElements(),d.getAppState(),d.getFiles())}catch(B){t(B.message)}}}),g(JCe,{}),e&&g(eI,{onClose:()=>t(""),children:e}),g(uL,{customCommandPaletteItems:[{label:R("labels.liveCollaboration"),category:ot.app,keywords:["team","multiplayer","share","public","session","invite"],icon:Z_,perform:()=>{h({isOpen:!0,type:"collaborationOnly"})}},{label:R("roomDialog.button_stopSession"),category:ot.app,predicate:()=>!!(m!=null&&m.isCollaborating()),keywords:["stop","session","end","leave","close","exit","collaboration"],perform:()=>{m&&(m.stopCollaboration(),m.isCollaborating()||h({isOpen:!1}))}},{label:R("labels.share"),category:ot.app,predicate:!0,icon:K_,keywords:["link","shareable","readonly","export","publish","snapshot","url","collaborate","invite"],perform:async()=>{h({isOpen:!0,type:"share"})}},{label:"GitHub",icon:Y_,category:ot.links,predicate:!0,keywords:["issues","bugs","requests","report","features","social","community"],perform:()=>{window.open("https://github.com/excalidraw/excalidraw","_blank","noopener noreferrer")}},{label:R("labels.followUs"),icon:kV,category:ot.links,predicate:!0,keywords:["twitter","contact","social","community"],perform:()=>{window.open("https://x.com/excalidraw","_blank","noopener noreferrer")}},{label:R("labels.discordChat"),category:ot.links,predicate:!0,icon:RV,keywords:["chat","talk","contact","bugs","requests","report","feedback","suggestions","social","community"],perform:()=>{window.open("https://discord.gg/UexuTaE","_blank","noopener noreferrer")}},{label:"YouTube",icon:VV,category:ot.links,predicate:!0,keywords:["features","tutorials","howto","help","community"],perform:()=>{window.open("https://youtube.com/@excalidraw","_blank","noopener noreferrer")}},...Cd?[{...G,label:"Sign in / Go to Excalidraw+"}]:[j,G],{label:R("overwriteConfirm.action.excalidrawPlus.button"),category:ot.export,icon:Dde,predicate:!0,keywords:["plus","export","save","backup"],perform:()=>{d&&yw(d.getSceneElements(),d.getAppState(),d.getFiles(),d.getName())}},{...uL.defaultItems.toggleTheme,perform:()=>{s(i===ke.DARK?ke.LIGHT:ke.DARK)}},{label:R("labels.installPWA"),category:ot.app,predicate:()=>!!xf,perform:()=>{xf&&(xf.prompt(),xf.userChoice.then(()=>{xf=null}))}}]}),ZK()&&d&&g(gCe,{appState:d.getAppState(),scale:window.devicePixelRatio,ref:u})]}),y&&d&&g(eAe,{excalidrawAPI:d,onClose:()=>w(!1)}),v&&g(tAe,{onClose:()=>I(!1)})]})},rAe=()=>window.location.pathname==="/excalidraw-plus-export"?g(qCe,{}):g(zCe,{children:g(nde,{store:Ks,children:g(iAe,{})})});window.__EXCALIDRAW_SHA__="";const sAe=document.getElementById("root"),oAe=MJ.createRoot(sAe);LJ();oAe.render(g(L.StrictMode,{children:g(rAe,{})}));export{Ee as _,Na as c,El as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./subset-worker.chunk-CVR6pt27.js","./subset-shared.chunk-D3ioWSie.js","./pica-DxF4wvw4.js","./_commonjs-dynamic-modules-TDtrdbi3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-BzlFw6wD.js.map
